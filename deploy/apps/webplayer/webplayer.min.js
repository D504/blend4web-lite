var b4w="object"===typeof b4w?b4w:function(a){var t={};a.module=t;var p={};a.Ja=function(a,b){var c=t[a];c&&(c.yq=null);p[b||"__b4w_default"]=null};a.register=function(a,b){t[a]||(t[a]=b)};a.require=function(a,b){if(!t[a])throw Error('Module "'+a+'" not found');b=b||"__b4w_default";p[b]||(p[b]=function(a){return function(b){var c=t[b];if(!c)throw Error('Module "'+b+'" not found');c.yq||(c.yq={});c.yq[a]||(c.yq[a]={},c(c.yq[a],p[a]));return c.yq[a]}}(b));return p[b](a)};a.module_check=function(a){return t[a]?
!0:!1};a.get_namespace=function(a){for(var b in p)if(p[b]==a)return b;return""};a.worker_listeners=[];a.worker_namespaces=[];return a}({});b4w.module.app=function(a,t){function p(){var a=L.wr();document.addEventListener("visibilitychange",function(){document.hidden?(a=L.wr(),L.pause()):a||L.resume()},!1)}function c(){var a=0,b=l.qe(),d=L.wr(),f=!0;L.Ot(function(){if(!(a%10)){var c=b.getBoundingClientRect();c.top>window.innerHeight||0>c.bottom?(f&&(d=L.wr()),L.pause(),f=!1):d||f||(L.resume(),f=!0)}a++})}function b(a,b,d,f){var c=document.createElement("canvas"),v=document.getElementById(a);v||(H.error('Warning: canvas container "'+a+
'" not found, appending to body'),v=document.body);c.style.position="absolute";c.style.left=0;c.style.top=0;c.style.width=v.offsetWidth+"px";c.style.height=v.offsetHeight+"px";c.width=v.offsetWidth*window.devicePixelRatio;c.height=v.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",c.style.left=0,c.style.top=0,a.style.pointerEvents="none"):a=null;v.appendChild(c);if(!L.Mf(c,a))return d&&I("Browser could not initialize WebGL","For more info visit",
"https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",f),!1;a&&l.iv(a,"LAST");return!0}function k(a,b){a?(b&&(document.getElementById(b).style.display="block"),S=document.getElementById(a)):(S=document.createElement("div"),S.innerHTML=0,S.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",l.iv(S,"JUST_AFTER_CANVAS"))}function g(a,b){var d=
String(a);b&&(d+="/"+String(b));S.innerHTML=d}function M(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function m(a,b,f){var c=Math.max(J.H0(a),1),v=W.Sj(a,ea);b=d.Jc(v,b,ka);b[2]=0;G.normalize(b,b);G.scale(b,c*f,b);f=W.Ne(a,ca);G.add(f,b,f);J.je(a,f)}function z(a,b){var d=J.NO(a,da);if(d.up!=d.down){var f=J.jl(a,aa)[1],d=(d.down-f)/(d.down-d.up),f=J.MO(a,da),d=Math.max(d,2/f.max);J.Lc(a,0,d*b)}}function C(a,b,d,f){W.Bg(a,5*b,5*d,5*f)}function h(a,b,
d){var f=J.QI(a),c=Math.abs(b);d=Math.pow(c*d,1-Math.pow(c*d,.15));W.Bg(a,0,0,0>b?.001<f?-f*d:0:d/(1-d)*f)}function e(a,b,d,f){for(var c=d*b;0<a;--a)d+=c,f+=c,c=d*b;return f}function A(a,b,d,f,c){c?(c=J.b5(a,ka),a=J.Ne(a),a=G.dist(c,a)+f,f=0<b?e(b,-d,a,f):e(-b,d/(1-d),a,f)):f-=2*b*d;return f}function q(a,b,c,e,g,n){function l(a,b,w,d){if(1==w){J.Tj(a,L);var f=q?.003*L.trans:.003*L.rot;w=v.wd(a,b,0);v.jf(a,b,0).gesture===v.Ex?(La+="X"==d?-w*f:0,ab+="Y"==d?-w*f:0):v.jf(a,b,0).gesture===v.Cx&&(a=q?.003*
L.rot:7.5E-4*L.trans,ub+="X"==d?-w*a:0,pb+="Y"==d?-w*a:0)}}function u(a,b,w,d){if(1==w){w=v.wd(a,b,1);J.Tj(a,L);if(q)f=.003*L.trans,c=7.5E-4*L.rot;else var f=.003*L.rot,c=7.5E-4*L.trans;if(1===v.jf(a,b,0).which)ga+="X"==d?-w*f:0,Mb+="Y"==d?-w*f:0;else if(2===v.jf(a,b,0).which||3===v.jf(a,b,0).which)oa+="X"==d?-w*c:0,T+="Y"==d?-w*c:0}}function H(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function F(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function x(a){return a[0]&&(a[1]||-.1>a[2])}function N(a){return a[0]&&
(a[1]||.1<a[2])}function E(a){return a[0]&&(a[1]||a[2]||a[3])}function S(a,b,w){if(1==w)switch(w=v.wd(a,b,0),J.Tj(a,L),b){case "FORWARD":I?M[0]=1:q?(b=J.jl(a,aa)[1],b=Math.abs(b)>=Math.PI/4?d.Ee:d.qc,m(a,b,.5*L.trans*w)):p?h(a,-L.zoom,w):C(a,0,0,-L.trans*w);break;case "BACKWARD":I?M[0]=-1:q?(b=J.jl(a,aa)[1],b=Math.abs(b)>=Math.PI/4?d.Eh:d.ic,m(a,b,.5*L.trans*w)):p?h(a,L.zoom,w):C(a,0,0,L.trans*w);break;case "UP":q?z(a,30*-L.zoom*w):I||C(a,0,L.trans*w,0);break;case "DOWN":q?z(a,30*L.zoom*w):I||C(a,
0,-L.trans*w,0);break;case "LEFT":I?M[1]=1:q?m(a,d.it,.5*L.trans*w):C(a,-L.trans*w,0,0);break;case "RIGHT":I?M[1]=-1:q?m(a,d.Af,.5*L.trans*w):C(a,L.trans*w,0,0);break;case "ROT_LEFT":p?J.Lc(a,.75*-L.rot*w,0):J.Lc(a,.75*L.rot*w,0);break;case "ROT_RIGHT":p?J.Lc(a,.75*L.rot*w,0):J.Lc(a,.75*-L.rot*w,0);break;case "ROT_UP":p?J.Lc(a,0,.75*-L.rot*w):J.Lc(a,0,.75*L.rot*w);break;case "ROT_DOWN":p?J.Lc(a,0,.75*L.rot*w):J.Lc(a,0,.75*-L.rot*w)}else switch(b){case "FORWARD":case "BACKWARD":I&&(M[0]=0);break;case "LEFT":case "RIGHT":I&&
(M[1]=0)}I&&(y.fI(I,M[0],M[1]),a=J.Gz(a,ma),y.VB(I,a[0]),y.WB(I,a[1]))}r=a;ha=b;qa=c;K=e;pa=g;ja=n;var k=f.il();P(k);var p=!1,I=null,q=!1;switch(J.Vi(k)){case J.Ob:p=!a;break;case J.Xc:I=f.Jz();break;case J.He:return;case J.ed:q=!0}var L=J.Tj(k,wa);a=v.vm();if(y.pG(k)){var xa=v.ZE(k,null,!0);v.qa(k,"CAMERA_COLLISION",v.Sg,[xa],null,function(a,b){var w=v.jf(a,b,0).coll_dist;if(0>w){var d=v.jf(a,b,0).coll_norm,f=ka;G.scale(d,-.25*w,f);w=W.Ne(a,ca);G.add(w,f,w);W.eC(a,w)}})}if(I){var xa=W.Ne(k),O=W.Sj(k),
O=d.EE(O);xa[2]-=.5;y.cC(I,xa,O);D.oW(k,I);var M=new Float32Array(2),Z=!0;y.UB(I,y.zJ);v.Pq(k,"TOGGLE_CHAR_MOVE_TYPE",v.Ai,v.VT,function(){Z=!Z;y.UB(I,Z?y.zJ:y.zT)})}var R,ea,w,Da,ua,ta,t,X,da;n?xa=O=ta=t=X=da=v.yu(0):(da=U.wX(),O=da.length?da[da.length-1]:0,xa=v.gc(U.Rn,O),O=v.gc(U.Sn,O),ta=v.me(U.dm,da),t=v.me(U.Pn,da),X=v.me(U.em,da),da=v.me(U.Qn,da));b?b=R=ea=w=Da=ua=v.yu(0):(b=v.qd(v.WJ),R=v.qd(v.UJ),ea=v.qd(v.PJ),w=v.qd(v.QJ),Da=v.qd(v.aU),ua=v.qd(v.WT));var Ja=v.qd(v.VJ),fa=v.qd(v.RJ),na=v.qd(v.SJ),
Ga=v.qd(v.TJ);q||(v.qa(k,"FORWARD",v.ob,[a,b,t],x,S),v.qa(k,"BACKWARD",v.ob,[a,R,t],N,S));p?(v.qa(k,"ROT_UP",v.ob,[a,Ja,Da,da],H,S),v.qa(k,"ROT_DOWN",v.ob,[a,fa,ua,da],F,S),v.qa(k,"ROT_LEFT",v.ob,[a,na,ea,X],H,S),v.qa(k,"ROT_RIGHT",v.ob,[a,Ga,w,X],F,S)):q?(v.qa(k,"LEFT",v.ob,[a,na,ea,ta],H,S),v.qa(k,"RIGHT",v.ob,[a,Ga,w,ta],F,S),v.qa(k,"FORWARD",v.ob,[a,Ja,b,t],H,S),v.qa(k,"BACKWARD",v.ob,[a,fa,R,t],F,S),v.qa(k,"UP",v.ob,[a,ua,da],N,S),v.qa(k,"DOWN",v.ob,[a,Da,da],x,S)):(v.qa(k,"UP",v.ob,[a,Da,xa],
E,S),v.qa(k,"DOWN",v.ob,[a,ua,O],E,S),v.qa(k,"LEFT",v.ob,[a,ea,ta],x,S),v.qa(k,"RIGHT",v.ob,[a,w,ta],N,S),v.qa(k,"ROT_UP",v.ob,[a,Ja,da],x,S),v.qa(k,"ROT_DOWN",v.ob,[a,fa,da],N,S),v.qa(k,"ROT_LEFT",v.ob,[a,na,X],x,S),v.qa(k,"ROT_RIGHT",v.ob,[a,Ga,X],N,S));if(!c){var Qa=0;c=v.eF(e);var Ha=0;t=v.Oy(e);v.qa(k,"MOUSE_WHEEL",v.Yp,[c],null,function(a,b,w){1==w&&(b=v.wd(a,b,0),J.Tj(a,L),p||q?Qa=A(a,b,L.zoom,Qa,p):(L.trans*=1+b*L.zoom,J.m4(a,L)))});v.qa(k,"TOUCH_ZOOM",v.Yp,[t],null,function(a,b,w){1==w&&
(w=v.wd(a,b,0),J.Tj(a,L),v.jf(a,b,0)===v.Dx&&(Ha=A(a,w,.03*L.zoom,Ha,p)))});v.qa(k,"ZOOM_INTERPOL",v.Sg,[a],null,function(a,b){if(p||q)if(1E-5<Math.abs(Qa)||1E-5<Math.abs(Ha)){var w=v.wd(a,b,0),f=d.Tc(Qa,0,w,.1*B);Qa-=f;w=d.Tc(Ha,0,w,.15*B);Ha-=w;q?z(a,-(f+w)):(f=J.QI(a)+f+w,f=Math.max(f,.001),J.d5(a,f))}else Ha=Qa=0})}var ga=0,Mb=0,oa=0,T=0,Ka=0,Va=0;n||(n=function(a){J.Tj(a,L);Ka+=.002*L.trans},c=function(a){J.Tj(a,L);Va+=.05*L.zoom},t=function(a){J.Tj(a,L);Ka-=.002*L.trans},da=function(a){J.Tj(a,
L);Va-=.05*L.zoom},p?(v.qa(k,"GMPD_PAN_Y_POS",v.ob,[xa],null,c),v.qa(k,"GMPD_PAN_Y_NEG",v.ob,[O],null,da),v.qa(k,"GMPD_PAN_X_POS",v.ob,[ta],function(a){return-.1>a[0]},t),v.qa(k,"GMPD_PAN_X_NEG",v.ob,[ta],function(a){return.1<a[0]},n)):q&&(v.qa(k,"GMPD_PAN_X_POS",v.ob,[X],function(a){return-.1>a[0]},t),v.qa(k,"GMPD_PAN_X_NEG",v.ob,[X],function(a){return.1<a[0]},n)));if(g){g=v.Vk("X",window);n=v.Vk("Y",window);xa=v.xo(e);c=v.xo(window);var Wa=!1,O=function(a){a[2]?Wa=!0:a[0]||(Wa=!1);return Wa&&a[0]};
v.qa(k,"MOUSE_X",v.Sg,[c,g,xa],O,u,"X");v.qa(k,"MOUSE_Y",v.Sg,[c,n,xa],O,u,"Y");g=U.ba(U.Wc,window);U.yw(g,!1)}else g=v.Vk("X",e),n=v.Vk("Y",e),xa=v.xo(e),v.qa(k,"MOUSE_X",v.Sg,[xa,g],null,u,"X"),v.qa(k,"MOUSE_Y",v.Sg,[xa,n],null,u,"Y");var La=0,ab=0,ub=0,pb=0;g=v.Bu("X",e);e=v.Bu("Y",e);v.qa(k,"TOUCH_X",v.Sg,[g],null,l,"X");v.qa(k,"TOUCH_Y",v.Sg,[e],null,l,"Y");v.qa(k,"ROT_TRANS_INTERPOL",v.Sg,[a],null,function(a,b){if(1E-5<Math.abs(ga)||1E-5<Math.abs(Mb)||1E-5<Math.abs(La)||1E-5<Math.abs(ab)||1E-5<
Math.abs(oa)||1E-5<Math.abs(T)||1E-5<Math.abs(ub)||1E-5<Math.abs(pb)||1E-5<Math.abs(Ka)||1E-5<Math.abs(Va)){var w=v.wd(a,b,0),f=d.Tc(ga,0,w,.08*B),c=d.Tc(Mb,0,w,.08*B);ga-=f;Mb-=c;var e=d.Tc(La,0,w,.12*B),r=d.Tc(ab,0,w,.12*B);La-=e;ab-=r;var g=d.Tc(oa,0,w,.08*B),n=d.Tc(T,0,w,.08*B);oa-=g;T-=n;var h=d.Tc(ub,0,w,.12*B),l=d.Tc(pb,0,w,.12*B);ub-=h;pb-=l;var F=d.Tc(Ka,0,w,.08*B),w=d.Tc(Va,0,w,.08*B);Ka-=F;Va-=w;p?(J.Lc(a,f+e,c+r),c=J.QI(a),J.c5(a,c*(g+h+F),c*(n+l+w))):q?(f+e&&m(a,d.Af,.2*(f+e)),c+r&&(n=
J.jl(a,aa)[1],m(a,Math.abs(n)>Math.PI/4?d.Eh:d.ic,.2*(c+r))),J.Lc(a,g+h+F,0)):(J.Lc(a,.5*(f+e),.5*(c+r)),I&&(g=J.Gz(a,ma),y.VB(I,g[0]),y.WB(I,g[1])))}});v.Pq(k,"DEC_STEREO_DIST",v.Ai,v.ZT,function(a){var w=J.nO(a);J.ER(a,.9*w)});v.Pq(k,"INC_STEREO_DIST",v.Ai,v.bU,function(a){var w=J.nO(a);J.ER(a,1.1*w)})}function P(a){var b=J.Vi(a),d=v.YE(function(){var d=J.Vi(a),f=d!=b;b=d;return f});v.qa(a,"CHANGE_MOVE_STYLE",v.Sg,[d],null,function(){O();q(r,ha,qa,K,pa,ja)})}function O(){var a=f.il();v.qm(a,"TOGGLE_CHAR_MOVE_TYPE")&&
f.Jz()&&D.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),d=0;d<b.length;d++)v.Tf(a,b[d])}function I(a,b,d,f){var c=document.createElement("div"),v=document.createElement("div"),e=document.createElement("div");if(f)for(var r=0;r<f.length;r++){var g=document.getElementById(f[r]);g&&g.parentNode.removeChild(g)}c.style.cssText=
"z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";v.style.cssText="color:#fff;font-size:24px;";e.style.cssText="color:#fff;font-size:20px;";v.innerHTML=a;e.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+d+'">'+d.replace("https://www.","")+"</a>";c.appendChild(v);c.appendChild(e);document.body.appendChild(c)}function u(a,b,d,f,c){function v(){var r=performance.now()-e;c(b+r*(d-b)/f);(r>=f||!a.parentNode)&&L.Z2(v)}var e=performance.now();
L.Ot(v)}var J=t("camera"),x=t("config"),D=t("constraints"),l=t("container"),v=t("controls"),N=t("data"),E=t("debug"),U=t("input"),L=t("main"),y=t("physics"),H=t("print"),n=t("screen"),f=t("scenes"),W=t("transform"),d=t("util"),G=t("vec3"),B=1,S=null,r=!1,ha=!1,qa=!1,K=null,pa=!1,ja=!1,ma=new Float32Array(2),aa=new Float32Array(2),ka=new Float32Array(3),ca=new Float32Array(3),ea=new Float32Array(4),wa={},da={};a.Mf=function(a){function d(){var a=b(B,P,y,n),d=l.Xh();if(a){var f=l.qe();l.Gl();D&&(k(h,
F),L.P3(g));S&&(p(),c());u&&L.Ot(function(){f.style.height=f.clientWidth/u+"px"});r&&L.Ot(function(){l.Gl()});q&&L.Ot(function(){l.JF()});K&&x.UH();A==x.Et?E.rS(function(a,b){0==a?(H.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),x.Eq(x.Bk)):1.5>b?(H.log("QUALITY TEST RESULT: LOW ("+b.toFixed(1)+" GB/s)"),x.Eq(x.im)):(H.log("QUALITY TEST RESULT: HIGH ("+b.toFixed(1)+" GB/s)"),x.Eq(x.Bk));e(d,!0)}):e(d,!0)}else e(d,!1)}function f(a){a.keyCode==v.$T&&(L.wr()?L.resume():L.pause())}function e(){}
a=a||{};var r=!1,B=null,n=null,h=null,u=0,F=null,G=!0,K=!1,S=!0,y=!0,m=!1,D=!1,I=!1,q=!1,A=x.get("quality"),xa;for(xa in a)switch(xa){case "canvas_container_id":B=a.canvas_container_id;break;case "callback":e=a.callback;break;case "autoresize":r=a.autoresize;break;case "show_hud_debug_info":I=a.show_hud_debug_info;break;case "sfx_mix_mode":m=a.sfx_mix_mode;break;case "show_fps":D=a.show_fps;break;case "track_container_position":q=a.track_container_position;H.va("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");
break;case "fps_wrapper_id":F=a.fps_wrapper_id;break;case "fps_elem_id":h=a.fps_elem_id;break;case "error_purge_elements":n=a.error_purge_elements;break;case "report_init_failure":y=a.report_init_failure;break;case "pause_invisible":S=a.pause_invisible;break;case "key_pause_enabled":G=a.key_pause_enabled;break;case "force_container_ratio":u=a.force_container_ratio;break;case "min_capabilities":K=a.min_capabilities;break;case "quality":A=a.quality;break;default:x.set(xa,a[xa])}A!=x.Et&&x.set("quality",
A);G&&document.addEventListener("keydown",f,!1);x.set("show_hud_debug_info",I);x.set("sfx_mix_mode",m);var P=I||m||null;"complete"==document.readyState?window.setTimeout(d,0):window.addEventListener("load",d,!1);window.addEventListener("unload",function(){N.Ja()},!1)};a.dea=function(a,b){var d=M(a);d.addEventListener("mouseup",function(){b(d.value)},!1)};a.cea=function(a,b){var d=M(a);d.addEventListener("change",function(){var a=d.checked;b(void 0!=a?a:d.value)},!1)};a.eea=function(a,b){var d=M(a);
d.addEventListener("keypress",function(a){b(a.keyCode,d.value)},!1)};a.LZ=q;a.t$=O;a.daa=function(a){function b(a){return a[0]&&(a[1]||a[2])}function d(a,b,d){if(1==d)switch(d=v.wd(a,b,0),b){case "FORWARD":f?y.Ws(a,1):W.Bg(a,0,-1*d,0);break;case "BACKWARD":f?y.Ws(a,-1):W.Bg(a,0,1*d,0);break;case "LEFT":f?y.Vs(a,-1):W.Bg(a,1*d,0,0);break;case "RIGHT":f?y.Vs(a,1):W.Bg(a,-1*d,0,0)}else switch(b){case "FORWARD":case "BACKWARD":f&&y.Ws(a,0);break;case "LEFT":case "RIGHT":f&&y.Vs(a,0)}}var f=y.xg(a)||y.yg(a),
c=v.vm(),e=v.qd(v.WJ),r=v.qd(v.UJ),g=v.qd(v.PJ),B=v.qd(v.QJ),n=v.qd(v.VJ),h=v.qd(v.RJ),l=v.qd(v.SJ),u=v.qd(v.TJ);v.qa(a,"FORWARD",v.ob,[c,e,n],b,d);v.qa(a,"BACKWARD",v.ob,[c,r,h],b,d);v.qa(a,"LEFT",v.ob,[c,g,l],b,d);v.qa(a,"RIGHT",v.ob,[c,B,u],b,d)};a.v$=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],d=0;d<b.length;d++)v.Tf(a,b[d])};a.caa=function(){v.Pq(null,"CAMERA_SHOT",v.Ai,v.XT,function(){E.L1()});v.Pq(null,"LIGHT_SHOT",v.Ai,v.YT,function(){E.N1()});v.Pq(null,"TELEMETRY",v.Ai,v.cU,
function(){E.CH()})};a.SH=function(a,b,d){H.ff("request_fullscreen","screen.request_fullscreen");n.SH(a,b,d)};a.CF=function(){H.ff("exit_fullscreen","screen.exit_fullscreen");n.CF()};a.Lq=function(){H.ff("check_fullscreen","screen.check_fullscreen");return n.Lq()};a.wda=I;a.Yz=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),d={},f=0;f<b.length;f++){var c=b[f].split("="),v=c[0];1<c.length?(c=c[1],a?v in d?d[v].push(c):
d[v]=[c]:d[v]=c):a?v in d||(d[v]=[]):d[v]=""}return d};a.Nh=function(a,b,d,f,c,v,e,r){if(a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)){v=v||"";e=e||"";r=r||function(){};var g=a.style,B=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==g[b])if(void 0!=g["webkit"+B])b="webkit"+B;else if(void 0!=g["ms"+B])b="ms"+B;else if(void 0!=g["moz"+B])b="moz"+B;else return;u(a,d,f,c,function(c){a&&(g[b]=v+c+e,d>f&&c<=f||d<f&&c>=f)&&(g[b]=v+f+e,r())})}};a.GW=function(a,b,d,f,c,v){a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)&&
(v=v||function(){},u(a,d,f,c,function(c){a&&(0<=c&&a.setAttribute(b,c),d>f&&c<=f||d<f&&c>=f)&&(a.setAttribute(b,f),v())}))};a.BQ=function(b){if(b.length){var d=b.shift(),f=d.elem,c=d.prop,v=d.from,e=d.to,r=d.duration,g=d.opt_prefix,B=d.opt_suffix,n=function(){d.cb&&d.cb();a.BQ(b)};"css"==d.type?a.Nh(f,c,v,e,r,g,B,n):"attr"==d.type&&a.GW(f,c,v,e,r,n)}};a.Lda=function(a){B=a};a.Paa=function(){return B}};b4w.module.camera=function(a,t){function p(a,b){if(!g.mb(a))return m.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=h.la(a.A.D);e.Jc(c,e.qc,b);return b}var c=t("__camera"),b=t("__container"),k=t("__math"),g=t("__obj_util"),M=t("__physics"),m=t("__print"),z=t("__scenes"),C=t("__transform"),h=t("__tsr"),e=t("__util"),A=t("__vec3"),q=t("__vec4"),P=t("__quat"),O=new Float32Array(2),I=new Float32Array(3),u=new Float32Array(3),J=new Float32Array(4),x=P.create(),D={},
l={};a.He=c.He;a.Ob=c.Ob;a.Xc=c.Xc;a.ed=c.ed;a.Q4=function(a,b){if(g.mb(a)){c.Xw(a);a.A.xb=c.He;if(b){var v=b.pos||h.X(a.A.D);b.look_at?c.wR(a,v,b.look_at):C.je(a,v)}C.W(a);M.$(a);c.pr(a)}else m.error("static_setup(): Wrong camera object")};a.Jea=function(a,b,e){c.fp(a)?(b=b||h.X(a.A.D),e?c.wR(a,b,e):C.je(a,b),C.W(a),M.$(a)):m.error("static_set_look_at(): Wrong camera object or camera move style")};a.Kea=function(a,b){c.fp(a)?(C.Ll(a,b),C.W(a),M.$(a)):m.error("static_set_rotation(): Wrong camera object or camera move style")};
a.Iea=function(a,b){if(!c.fp(a))return m.error("static_get_rotation(): Wrong camera object or camera move style"),null;b=b||new Float32Array(4);return C.Sj(a,b)};a.b_=function(a){g.mb(a)?(c.Xw(a),a.A.xb=c.Xc,C.W(a),M.$(a),c.pr(a)):m.error("eye_setup(): Wrong camera object")};a.HF=function(a,b){c.Oe(a)?(b=b||h.X(a.A.D),C.je(a,b),c.Ey(a,a.A.We,!0),C.W(a),M.$(a)):m.error("eye_set_look_at(): Wrong camera object or camera move style")};a.naa=function(b,e,g,h){m.ff("eye_rotate","rotate_camera");c.Oe(b)?
a.Lc(b,e,g,h||!1):m.error("eye_rotate(): Wrong camera object or camera move style")};a.paa=function(a,b){c.Oe(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.gC(a,b),C.W(a),M.$(a)):m.error("eye_set_vertical_limits(): Incorrect limits object."):m.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};a.maa=function(a,b,e){if(!c.Oe(a))return m.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.A;return a.ib?(b=b||{},e?(b.down=a.ib.Yq,
b.up=a.ib.Ls):(b.down=a.ib.down,b.up=a.ib.up),b.camera_space=e||!1,b):null};a.oaa=function(a,b){c.Oe(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.$B(a,b),C.W(a),M.$(a)):m.error("eye_set_horizontal_limits(): Incorrect limits object."):m.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};a.a_=function(a,b){if(!c.Oe(a))return m.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.yc?(b=b||{},b.left=e.yc.left,
b.right=e.yc.right,b.camera_space=!1,b):null};a.e5=function(a,b){if(g.mb(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){m.error("target_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=
Math.max(b.dist_lim.max,0)}if(b.Nv&&("number"!=typeof b.Nv.min_y||"number"!=typeof b.Nv.max_y||b.Nv.min_y>b.Nv.max_y))m.error("target_setup(): Wrong pivot limits object");else{c.Xw(a);a.A.xb=c.Ob;var e=b.pos||h.X(a.A.D),v=b.pivot;v||(v=p(a,I),v=A.add(e,v,v));c.LR(a,e,v,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.Nv,b.use_panning||!1);C.W(a);M.$(a);c.pr(a)}}else m.error("target_setup(): Wrong vertical limits object");else m.error("target_setup(): Wrong horizontal limits object");else m.error("target_setup(): Wrong camera object")};
a.Rea=function(b,e,g,h){m.ff("target_rotate","rotate_camera");c.Ic(b)?a.Lc(b,e,g,h||!1):m.error("target_rotate(): Wrong camera object or camera move style")};a.Wea=function(a,b,e){c.Ic(a)?(b=b||h.X(a.A.D),e=e||a.A.pivot,c.tI(a,b,e),C.W(a),M.$(a)):m.error("target_set_trans_pivot(): Wrong camera object or camera move style")};a.Vea=function(a,b){c.Ic(a)?(c.j4(a,b),C.W(a),M.$(a)):m.error("target_set_pivot_translation(): Wrong camera object or camera move style")};a.d5=function(a,b){if(c.Ic(a)){var e=
C.Gv(a,a.A.pivot);C.Bg(a,0,0,Math.max(0,b)-e);C.W(a);M.$(a)}else m.error("target_set_distance(): Wrong camera object or camera move style")};a.QI=function(a){return c.Ic(a)?C.Gv(a,a.A.pivot):(m.error("target_get_distance(): Wrong camera object or camera move style"),0)};a.Zea=function(a,b){if(c.Ic(a)){var e=C.Sz(b,!1,I),v=C.bG(b),l=z.R(),l=g.La(a,l).oa[0],l=c.E_(l)/2,v=v/Math.sin(l),l=C.Gv(a,e);c.tI(a,h.X(a.A.D),e);C.W(a);C.Bg(a,0,0,v-l);C.W(a);M.$(a)}else m.error("target_zoom_object(): Wrong camera object or camera move style")};
a.b5=function(a,b){if(!c.Ic(a))return m.error("target_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);A.copy(a.A.pivot,b);return b};a.Sea=function(a,b){if(c.Ic(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){m.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.hR(a,b);C.W(a);M.$(a)}else m.error("target_set_distance_limits(): Wrong camera object or camera move style")};a.Oea=
function(a,b){if(!c.Ic(a))return m.error("target_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.Ub?(b=b||{},b.min=e.Ub.min,b.max=e.Ub.max,b):null};a.Xea=function(a,b){c.Ic(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.gC(a,b),C.W(a),M.$(a)):m.error("target_set_vertical_limits(): Wrong limits object"):m.error("target_set_vertical_limits(): Wrong camera object or camera move style")};a.Qea=function(a,b,e){if(!c.Ic(a))return m.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.ib?(b=b||{},e?(b.down=a.ib.Yq,b.up=a.ib.Ls):(b.down=a.ib.down,b.up=a.ib.up),b.camera_space=e||!1,b):null};a.Tea=function(a,b){c.Ic(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.$B(a,b),C.W(a),M.$(a)):m.error("target_set_horizontal_limits(): Wrong limits object"):m.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};a.a5=function(a,b){if(!c.Ic(a))return m.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;var e=a.A;return e.yc?(b=b||{},b.left=e.yc.left,b.right=e.yc.right,b.camera_space=!1,b):null};a.Uea=function(a,b){c.Ic(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?m.error("target_set_pivot_limits(): Wrong limits object"):(c.zR(a,b),C.W(a),M.$(a)):m.error("target_set_pivot_limits(): Wrong camera object or camera move style")};a.Pea=function(a,b){if(!c.Ic(a))return m.error("target_get_pivot_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.Se?
(b=b||{},b.min_z=e.Se.min_z,b.max_z=e.Se.max_z,b):null};a.c5=function(a,b,e){if(c.Ic(a)){var g=a.A;g.use_panning&&(I[0]=b,I[1]=-e,I[2]=0,h.Ud(I,g.D,I),A.add(g.pivot,I,g.pivot),b=h.X(g.D),A.add(b,I,b),C.W(a),M.$(a))}else m.error("target_pan_pivot(): wrong object")};a.Yea=function(a,b){if(!c.Ic(a))return m.error("target_switch_panning(): Wrong camera object or camera move style"),null;a.A.use_panning=b};a.rca=function(b,g){a.OO(b,{pos:g.pos,pivot:g.pivot});var h="undefined"==typeof g.dist_interval?
0:Math.max(g.dist_interval,0),v="undefined"==typeof g.angle_interval?0:Math.max(g.angle_interval,0),u="undefined"==typeof g.t?.5:e.pa(g.t,0,1),x=a.MO(b,D);x.min=Math.max(x.min-u*h,0);x.max+=(1-u)*h;h=a.NO(b,l);h.down=e.pa(h.down+u*v,-Math.PI/2,0);h.up=e.pa(h.up-(1-u)*v,-Math.PI/2,0);c.pA(b,x);c.qA(b,h);C.W(b);M.$(b);c.pr(b)};a.OO=function(a,b){if(g.mb(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){m.error("hover_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<b.hover_angle_lim.up))m.error("hover_setup(): Wrong hover angle limits object");else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))m.error("hover_setup(): Wrong horizontal translation limits object");
else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))m.error("hover_setup(): Wrong vertical translation limits object");else{c.Xw(a);a.A.xb=c.ed;var e=b.pos||h.X(a.A.D);c.KR(a,e,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);C.W(a);M.$(a);c.pr(a)}}else m.error("hover_setup(): Wrong camera object")};a.nca=function(b,e,g,h){m.ff("hover_rotate","rotate_camera");
c.md(b)?a.Lc(b,e,g,h||!1):m.error("hover_rotate(): Wrong camera object or camera move style")};a.pca=function(a,b){c.md(a)?(c.vR(a,b),C.W(a),M.$(a)):m.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};a.lca=function(a,b){if(!c.md(a))return m.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);A.copy(a.A.Hc,b);return b};a.H0=function(a){return c.md(a)?C.Gv(a,a.A.Hc):(m.error("hover_get_distance(): Wrong camera object or camera move style"),
0)};a.qA=function(a,b){c.md(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?m.error("hover_set_vertical_limits(): Wrong limits object"):(c.qA(a,b),C.W(a),M.$(a)):m.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};a.NO=function(a,b){if(!c.md(a))return m.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var e=a.A;b=b||{};b.down=e.ib.down;b.up=e.ib.up;return b};a.pA=function(a,b){c.md(a)?"number"!=typeof b.min||"number"!=
typeof b.max||b.min>b.max?m.error("hover_set_distance_limits(): Wrong limits object"):(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.pA(a,b),C.W(a),M.$(a)):m.error("hover_set_distance_limits(): Wrong camera object or camera move style")};a.MO=function(a,b){if(!c.md(a))return m.error("hover_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.A;b=b||{};b.min=e.Ub.min;b.max=e.Ub.max;return b};a.qca=function(a,b){c.md(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||
b.min>b.max)?m.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.GR(a,b),C.W(a),M.$(a)):m.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};a.mca=function(a,b){if(!c.md(a))return m.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.he?(b=b||{},b.min=e.he.min,b.max=e.he.max,b):null};a.oca=function(a,b){c.md(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?m.error("hover_set_horiz_trans_limits(): Wrong limits object"):
(c.uR(a,b),C.W(a),M.$(a)):m.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};a.kca=function(a,b){if(!c.md(a))return m.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.ge?(b=b||{},b.min=e.ge.min,b.max=e.ge.max,b):null};a.sca=function(a,b){if(!c.md(a))return m.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.A.Nj=b};a.fp=c.fp;a.Ic=c.Ic;a.Oe=c.Oe;a.md=c.md;a.Vi=function(a){return g.mb(a)?
c.Vi(a):(m.error("get_move_style(): Wrong camera object"),null)};a.je=function(a,b){if(g.mb(a)){var e=a.A;if(c.Ic(a)){var l=h.X(e.D),l=A.subtract(b,l,I);A.add(l,e.pivot,e.pivot)}else c.md(a)&&(l=h.X(e.D),l=A.subtract(b,l,I),A.add(l,e.Hc,e.Hc));C.je(a,b);C.W(a);M.$(a)}else m.error("set_translation(): Wrong camera object")};a.Ne=function(a,b){if(!g.mb(a))return m.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return C.Ne(a,b)};a.Lc=function(a,b,e,h){g.mb(a)?(h?c.g4(a,
b,e):c.q3(a,b,e),C.W(a),M.$(a)):m.error("rotate_camera(): Wrong camera object")};a.m4=function(a,b){if(g.mb(a)){var c=a.A;"number"==typeof b.trans&&(c.Ys=e.pa(b.trans,0,Infinity));"number"==typeof b.rot&&(c.Xs=e.pa(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.Zs=e.pa(b.zoom,0,.99))}else m.error("set_velocities(): Wrong camera object")};a.Tj=function(a,b){if(!g.mb(a))return m.error("get_velocities(): Wrong camera object"),null;var c=a.A;b=b||{};b.trans=c.Ys;b.rot=c.Xs;b.zoom=c.Zs;return b};a.Jca=
function(a){if(!g.mb(a))return m.error("is_look_up(): Wrong camera object"),!1;a=h.la(a.A.D);return 0<=e.Jc(a,e.qc,I)[1]};a.jl=function(a,b){if(!g.mb(a))return m.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.jl(a,b);return b};a.Gz=function(a,b){if(!g.mb(a))return m.error("get_camera_angles_char(): Wrong camera object"),null;b=b||new Float32Array(2);c.Gz(a,b);return b};a.L_=function(a,b){b=b||new Float32Array(2);var g=A.normalize(a,I),g=e.SQ(e.qc,g,x);e.WE(g,!0);
c.TF(g,b);return b};a.ER=function(a,b){if(g.mb(a))for(var e=z.R(),e=g.La(a,e).oa,h=0;h<e.length;h++){var l=e[h];l.type!=c.Yc&&l.type!=c.gd&&l.type!=c.eg&&l.type!=c.Df||c.i4(l,b,l.Hg)}else m.error("set_stereo_distance(): Wrong camera object")};a.nO=function(a){if(!g.mb(a))return m.error("get_stereo_distance(): Wrong camera object"),0;var b=z.R();a=g.La(a,b).oa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Yc||e.type==c.gd)return e.tn}return 0};a.YB=function(a,b){if(g.mb(a)){var e=z.R(),e=g.La(a,
e).oa;c.YB(e,b)}else m.error("set_eye_distance(): Wrong camera object")};a.$aa=function(a){if(!g.mb(a))return m.error("get_eye_distance(): Wrong camera object"),0;var b=z.R();a=g.La(a,b).oa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Yc||e.type==c.gd||e.type==c.eg||e.type==c.Df)return e.Hg}return 0};a.uI=function(a,b){g.mb(a)?(A.copy(b,a.A.We),C.W(a),M.$(a)):m.error("set_vertical_axis(): Wrong camera object")};a.r0=function(a,b){if(g.mb(a))return b||(b=A.create()),A.copy(a.A.We,b),b;m.error("get_vertical_axis(): Wrong camera object")};
a.efa=function(a,b,e){if(g.mb(a)){var h=z.R();a=g.La(a,h).oa;for(h=0;h<a.length;h++){var l=a[h];A.set(-b,-e,0,l.Uw.trans);l.Kc?c.DR(l,!1):c.Kl(l,!1)}}else m.error("translate_view(): Wrong camera object")};a.Rba=p;a.SN=function(a){if(!g.mb(a))return m.error("get_fov(): Wrong camera object"),0;var b=z.R();a=g.La(a,b).oa;return c.SN(a[0])};a.oR=function(a,b){if(g.mb(a))for(var e=z.R(),e=g.La(a,e).oa,h=0;h<e.length;h++){var l=e[h];c.oR(l,b);l.Kc?c.DR(l,!1):c.Kl(l,!1)}else m.error("set_fov(): Wrong camera object")};
a.kI=function(){m.va("set_hmd_fov() deprecated")};a.Ey=function(a,b,e){g.mb(a)?(b=b||a.A.We,c.Ey(a,b,e||!1),C.W(a),M.$(a)):m.error("correct_up(): Wrong camera object")};a.fea=function(a,b){if(g.mb(a)&&c.BA(a)){var e=a.A;if(c.Ic(a)){var l=h.X(e.D),l=A.dist(l,e.pivot);e.Mm=b/2*e.Lm/l}else c.md(a)?(l=h.X(e.D),l=A.distance(l,e.Hc),e.Mm=b/2*e.Lm/l):(e=z.R(),g.La(a,e).oa[0].wc=b/2);c.P5(a)}else m.error("set_ortho_scale(): Wrong camera object")};a.rba=function(a){if(!g.mb(a)||!c.BA(a))return m.error("get_ortho_scale(): Wrong camera object"),
0;var b=z.R();return 2*g.La(a,b).oa[0].wc};a.BA=function(a){return g.mb(a)?c.BA(a):(m.error("is_ortho_camera(): Wrong camera object"),!1)};a.I9=function(a,l,x,p){if(!g.mb(a))return m.error("calc_ray(): Wrong camera object"),null;var v=z.R(),y=g.La(a,v).oa[0];p&&3==p.length?m.va('dest parameter in the function "calc_ray" should be type of parametric line.'):p=p||new Float32Array(6);switch(y.type){case c.fd:case c.fg:case c.Yc:case c.gd:var H=Math.tan(c.s0(y)/2),n=H*y.Ab,v=I;l=b.fu(l,x,O,y);v[0]=(2*
l[0]/y.width-1)*n;v[1]=(1-2*l[1]/y.height)*H;v[2]=-1;h.Ud(v,a.A.D,v);A.normalize(v,v);3==p.length?A.copy(v,p):(a=C.Ne(a,u),k.AR(p,a),k.oI(p,v));return p;case c.Ye:return v=I,l=b.fu(l,x,O,y),v[0]=(2*l[0]/y.width-1)*y.top*y.Ab,v[1]=(1-2*l[1]/y.height)*y.top,v[2]=0,h.Mc(v,a.A.D,v),A.copy(v,p),a=h.la(a.A.D,J),A.transformQuat(e.qc,a,v),k.oI(p,v),p;default:return m.error("calc_ray(): Non-compatible camera"),p}};a.GH=function(a,b,e){if(!g.mb(a))return m.error("project_point(): Wrong camera object"),null;
e=e||new Float32Array(2);return c.GH(a,b,e)};a.Yba=function(a){return(c.Ic(a)||c.md(a))&&null!==a.A.Ub};a.dca=function(a){return(c.Oe(a)||c.Ic(a)||c.md(a))&&null!==a.A.ib};a.C0=function(a){return(c.Ic(a)||c.Oe(a))&&null!==a.A.yc};a.eca=function(a){return c.md(a)&&null!==a.A.he};a.Zba=function(a){return c.md(a)&&null!==a.A.ge};a.eba=function(a,b){if(!g.mb(a))return m.error("get_frustum_planes(): Wrong camera object"),null;var c=z.R(),c=g.La(a,c).oa[0].Mo;q.copy(c.left,b.left);q.copy(c.right,b.right);
q.copy(c.top,b.top);q.copy(c.bottom,b.bottom);q.copy(c.near,b.near);q.copy(c.far,b.far);return b};a.Kl=function(a,b){g.mb(a)?c.b4(a,b):m.error("set_projection(): Wrong camera object")}};b4w.module.__camera=function(a,t){function p(a,b,w,d,f){Ba.je(a,b);w&&x(a,b,w);E(a,d);U(a,f)}function c(a,b,w,d,c,e,r,g){var ga=a.A;Ba.je(a,b);ga.pivot.set(w);x(a,b,w);E(a,d);U(a,c);n(a,e);f(a,r);ga.use_panning=g}function b(a,b,w,f,c,e,r,g){var ga=a.A;Ba.je(a,b);ga.Hc.set(w);x(a,b,w);H(a,f);L(a,c);W(a,e);d(a,r);ga.Nj=g}function k(a,b,d){var f=a.A,c=Aa.X(f.D),e=Aa.la(f.D),f=Ea;f.set(la.ic);f[3]=0;a=A(a,w)[1];e=la.Jc(e,la.qc,ta);F.AR(Ha,c);F.oI(Ha,e);if(!la.A1(f,-b,Ha,d)||Math.abs(a)<ra)ya.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),
d[0]=c[0],d[1]=c[1],d[2]=0;return d}function g(b){for(var w=b.A,d=0;d<b.T.length;d++){var f=b.T[d].oa[0];if(f.type==a.Ye)switch(w.xb){case a.Ob:var c=Aa.X(w.D);w.Lm=Y.dist(c,w.pivot);w.Mm=f.wc;break;case a.ed:c=Aa.X(w.D),w.Lm=Y.dist(c,w.Hc),w.Mm=f.wc}}}function M(a){a={type:a,name:"",UR:1,width:0,height:0,Lf:null,Uu:null,cc:null,og:null,Ab:0,wc:0,ar:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Nd:xa.create(),D:new Float32Array(9),pc:new Float32Array(16),bt:new Float32Array(16),Uw:{trans:Y.create(),
angle:0},Ib:new Float32Array(16),Mg:new Float32Array(16),wD:new Float32Array(16),EH:new Float32Array(16),ui:new Float32Array(16),direction:new Float32Array(3),Ng:Aa.wo(),xD:Aa.wo(),Yv:Aa.wo(),KB:Aa.wo(),ow:Aa.wo(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,oe:!1,dof_on:!1,PA:new Float32Array(3),Mo:z(),tn:0,Hg:0,Kc:null,Kj:null,Du:null,Py:new Float32Array(4),Yr:new Float32Array(4)};a.Nd[0]=a.Nd[2]=
0;a.Nd[1]=a.Nd[3]=0;return a}function m(a,b){var w=M(a.type);w.name=a.name;w.UR=a.UR;w.width=a.width;w.height=a.height;b||(w.Lf=a.Lf,w.Uu=a.Uu,w.cc=a.cc,w.og=a.og);w.Ab=a.Ab;w.ar=a.ar;w.wc=a.wc;w.near=a.near;w.far=a.far;w.left=a.left;w.right=a.right;w.top=a.top;w.bottom=a.bottom;xa.copy(a.Nd,w.Nd);Aa.copy(a.D,w.D);ia.copy(a.pc,w.pc);ia.copy(a.bt,w.bt);w.Uw=la.Y(a.Uw);ia.copy(a.Ib,w.Ib);ia.copy(a.Mg,w.Mg);ia.copy(a.wD,w.wD);ia.copy(a.EH,w.EH);ia.copy(a.ui,w.ui);w.direction.set(a.direction);Aa.copy(a.Ng,
w.Ng);Aa.copy(a.xD,w.xD);Aa.copy(a.Yv,w.Yv);Aa.copy(a.KB,w.KB);Aa.copy(a.ow,w.ow);w.dof_distance=a.dof_distance;w.dof_front_start=a.dof_front_start;w.dof_front_end=a.dof_front_end;w.dof_rear_start=a.dof_rear_start;w.dof_rear_end=a.dof_rear_end;w.dof_power=a.dof_power;w.dof_bokeh_intensity=a.dof_bokeh_intensity;w.dof_object=a.dof_object;w.dof_bokeh=a.dof_bokeh;w.oe=a.oe;w.dof_on=a.dof_on;Y.copy(a.PA,w.PA);var d=a.Mo,f=w.Mo;xa.copy(d.left,f.left);xa.copy(d.right,f.right);xa.copy(d.top,f.top);xa.copy(d.bottom,
f.bottom);xa.copy(d.near,f.near);xa.copy(d.far,f.far);w.tn=a.tn;w.Hg=a.Hg;a.Kc&&(w.Kc=xa.clone(a.Kc));if(a.Kj){d=a.Kj.length;w.Kj=Array(d);for(f=0;f<d;f++)w.Kj[f]=Y.clone(a.Kj[f]);w.Du=new Float32Array(a.Du)}xa.copy(a.Py,w.Py);xa.copy(a.Yr,w.Yr);return w}function z(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function C(b){switch(b){case "STATIC":return a.He;
case "TARGET":return a.Ob;case "EYE":return a.Xc;case "HOVER":return a.ed;default:la.K("Unknown move style")}}function h(b){var w=M(b);if(b==a.Ac)return w;switch(b){case a.fd:O(w,Oa,.1,1E3);break;case a.Ye:O(w,2.5,.1,1E3);break;case a.fg:break;case a.Ei:break;case a.Ck:break;case a.Yc:case a.gd:case a.eg:case a.Df:la.K("Stereo camera may only be created from perspective one");break;default:la.K("Unknown camera type")}return w}function e(b,w,d){b.type!=a.Yc&&b.type!=a.gd&&b.type!=a.eg&&b.type!=a.Df&&
la.K("set_stereo_params(): wrong camera type");if(b.type==a.Yc||b.type==a.gd)b.tn=w;b.Hg=d;ka(b,!1);if(va.Ya()&&(w=va.R(),b=w.J.Bd))for(w=sa.La(va.Hm(w),w).oa,d=0;d<w.length;d++)Ja(w[d],b)}function A(a,b){var w=Aa.la(a.A.D);return q(w,b)}function q(a,b){var w=la.Jc(a,la.ic,ta),d=la.Jc(a,la.Eh,Pa),f=-Math.asin(w[2]/Y.length(w)),w=Math.abs(f)>Math.PI/4?Y.scale(d,-la.sign(f),cb):Y.scale(w,-la.sign(d[2]),cb),c=Math.atan(Math.abs(w[0]/w[1]));0<d[2]&&(f=la.sign(f)*Math.PI-f);d=c;0<w[1]&&(d=Math.PI-d);0>
w[0]&&(d=2*Math.PI-d);b[0]=d;b[1]=f;return b}function P(a){switch(a.ar){case "AUTO":return 1<a.Ab?X(a)?a.wc/a.Ab:2*Math.atan(Math.tan(a.wc/2)/a.Ab):a.wc;case "HORIZONTAL":return X(a)?a.wc/a.Ab:2*Math.atan(Math.tan(a.wc/2)/a.Ab);case "VERTICAL":return a.wc}}function O(b,w,d,f){switch(b.type){case a.fd:case a.Yc:case a.gd:b.wc=w;b.Ab=1;break;case a.Ye:b.wc=w;b.Ab=1;break;case a.eg:case a.Df:break;default:la.K("set_frustum(): Unsupported camera type: "+b.type)}b.near=d;b.far=f}function I(b,w){var d=
Aa.Wb(w.A.D,ta),f=Aa.Eb(w.A.D,Ia),c=ia.fromRotationTranslation(f,d,Ga);ia.invert(c,b.pc);if(va.Ya())var c=va.R(),e=va.dc(c,Ua.Gh);if(b.type==a.Yc||e&&e.enable_hmd_stereo&&b.type==a.eg)b.pc[12]+=b.Hg/2;else if(b.type==a.gd||e&&e.enable_hmd_stereo&&b.type==a.Df)b.pc[12]-=b.Hg/2;if(b.Kc){Aa.Wh(b.pc,b.Yv);Aa.invert(b.Yv,b.KB);var c=b.Kc[0],e=b.Kc[1],r=b.Kc[2],g=b.Kc[3],B=b.bt;B[0]=1-2*c*c;B[1]=-2*c*e;B[2]=-2*c*r;B[3]=0;B[4]=-2*c*e;B[5]=1-2*e*e;B[6]=-2*e*r;B[7]=0;B[8]=-2*c*r;B[9]=-2*e*r;B[10]=1-2*r*r;
B[11]=0;B[12]=-2*c*g;B[13]=-2*e*g;B[14]=-2*r*g;B[15]=1;ia.multiply(b.pc,b.bt,b.pc);u(b,!0);Y.transformMat4(d,b.bt,d)}Aa.Wh(b.pc,b.Ng);Aa.invert(b.Ng,b.xD);Aa.ti(d,1,f,b.D);ea(b)}function u(a,b){ka(a,!0);var w=Ea,d=Ga;ia.invert(a.pc,d);ia.transpose(d,d);xa.transformMat4(a.Kc,d,w);d=Ma;d[0]=(la.sign(w[0])+a.Ib[8])/a.Ib[0];d[1]=(la.sign(w[1])+a.Ib[9])/a.Ib[5];d[2]=-1;d[3]=(1+a.Ib[10])/a.Ib[14];xa.scale(w,2/(w[0]*d[0]+w[1]*d[1]+w[2]*d[2]+w[3]*d[3]),w);a.Ib[2]=w[0];a.Ib[6]=w[1];a.Ib[10]=w[2]+1;a.Ib[14]=
w[3];ca(a);b||ea(a)}function J(a,b,w){w=Y.subtract(w,b,ta);Y.length(w)&&(Y.normalize(w,w),w=la.SQ(la.qc,w,Ia),Ba.Ll(a,w));Ba.je(a,b)}function x(a,b,w){var d=a.A,f=N(a);J(a,b,w);f?(b=Y.copy(d.We,ta),Y.negate(b,b),l(a,b,!0)):l(a,d.We,!0)}function D(a,b){for(var w=a.A,d=b.oa,f=Aa.Eb(w.D,Ia),f=la.Jc(f,la.qc,ta),c=Aa.Wb(w.D,Pa),e=b.PR,r=0;r<e.length;r++){var g=e[r];Y.copy(f,g.direction);Aa.Wb(w.D,g.PA)}for(r=0;r<d.length;r++)g=d[r],I(g,a),Y.copy(f,g.direction),g.dof_object&&g.dof_on&&(w=Ba.Ne(g.dof_object,
cb),w=Y.dist(c,w),g.dof_distance=w)}function l(b,w,d){var f=b.A,c=Aa.la(f.D),e=la.Jc(c,la.ic,ta);Y.normalize(e,e);if(.999999<Math.abs(Y.dot(w,e)))e=Q.identity(Ia);else{var r=Y.cross(w,e,Pa);Y.normalize(r,r);f.xb==a.Ob?f.yn&&Y.negate(r,r):(f=la.Jc(c,la.Eh,cb),0<Y.dot(f,w)&&Y.negate(r,r));f=la.Jc(c,la.Af,cb);Y.normalize(f,f);var g=la.pa(Y.dot(f,r),-1,1),e=-.999999>=g?Q.setAxisAngle(e,Math.acos(g),Ia):Q.rotationTo(f,r,Ia);Q.normalize(e,e)}Q.multiply(e,c,c);d&&(d=la.Jc(c,la.Ee,ta),0>Y.dot(w,d)&&Q.rotateZ(c,
Math.PI,c));v(b)}function v(b){var w=b.A;w.xb==a.Ob&&(w.yn=N(b))}function N(a){a=Aa.la(a.A.D);return 0>la.Jc(a,la.Ee,ta)[2]}function E(b,d){var f=b.A;if(d){f.yc=f.yc||{};f.yc.left=d.left;f.yc.right=d.right;f.yc.JA=d.left;f.yc.MB=d.right;f.yc.camera_space=!!d.camera_space;var c=b.A;!(f=c.yc)||c.xb!=a.Xc&&c.xb!=a.Ob||(c=A(b,w),f.camera_space?(f.left+=c[0],f.right+=c[0]):(f.JA-=c[0],f.MB-=c[0]),f.left=la.Jh(f.left),f.right=la.Jh(f.right),f.JA=la.Jh(f.JA),f.MB=la.Jh(f.MB))}else f.yc=null}function U(a,
b){var w=a.A;b?(w.ib=w.ib||{},w.ib.down=b.down,w.ib.up=b.up,w.ib.Yq=b.down,w.ib.Ls=b.up,w.ib.camera_space=!!b.camera_space,y(a)):w.ib=null}function L(a,b){var d=a.A;if(!b){var f=A(a,w);b={down:f[1],up:f[1]}}d.ib=d.ib||{};d.ib.down=b.down;d.ib.up=b.up;y(a);d.Ub&&d.ib&&aa(a)}function y(b){var d=b.A,f=d.ib;if(f)switch(d.xb){case a.Xc:case a.Ob:b=A(b,w);f.camera_space?(f.up+=b[1],f.down+=b[1]):(f.Ls-=b[1],f.Yq-=b[1]);f.up=la.Fi(f.up,-Math.PI,Math.PI);f.down=la.Fi(f.down,-Math.PI,Math.PI);f.Ls=la.Fi(f.Ls,
-Math.PI,Math.PI);f.Yq=la.Fi(f.Yq,-Math.PI,Math.PI);break;case a.ed:f.up=la.Fi(f.up,-Math.PI,Math.PI),f.down=la.Fi(f.down,-Math.PI,Math.PI),f.up=la.pa(f.up,-Math.PI/2,0),f.down=la.pa(f.down,-Math.PI/2,0)}}function H(a,b){var w=a.A;if(!b){var d=Ba.Gv(a,w.Hc);b={min:d,max:d}}w.Ub=w.Ub||{};w.Ub.min=b.min;w.Ub.max=b.max;w.Ub&&w.ib&&aa(a)}function n(a,b){var w=a.A;b?(w.Ub=w.Ub||{},w.Ub.min=b.min,w.Ub.max=b.max):w.Ub=null}function f(a,b){var w=a.A;b?(w.Se=w.Se||{},w.Se.min_z=b.min_z,w.Se.max_z=b.max_z):
w.Se=null}function W(a,b){var w=a.A;b?(w.ge=w.ge||{},w.ge.min=b.min,w.ge.max=b.max):w.ge=null}function d(a,b){var w=a.A;b?(w.he=w.he||{},w.he.min=b.min,w.he.max=b.max):w.he=null}function G(b){var w=b.A;if(sa.mb(b))for(var d=b.T,f=0;f<d.length;f++){var c=d[f].oa;if(c[0].type===a.Ye){switch(w.xb){case a.Ob:var e=Aa.X(w.D),e=Y.dist(e,w.pivot),e=e/w.Lm*w.Mm;break;case a.ed:e=Aa.X(w.D);e=Y.distance(e,w.Hc);e=e/w.Lm*w.Mm;break;default:e=c[0].wc}for(var r=0;r<c.length;r++){var g=c[r];g.wc=e;ka(g,!0)}D(b,
d[f])}}}function B(b){var d=b.A,f=d.xb;if(f===a.Ob||f===a.Xc){if(d.yc){var c=d.yc.left,e=d.yc.right,g=A(b,w);(g=f==a.Ob?la.no(g[0],c,e):la.no(g[0],e,c))&&(f==a.Ob?r(b,g,0):qa(b,g,0))}d.ib&&(c=d.ib.down,e=d.ib.up,g=A(b,w),(g=f==a.Ob?la.no(g[1],e,c):la.no(g[1],c,e))&&(f==a.Ob?r(b,0,g):qa(b,0,g)));if(f===a.Ob&&d.Ub){var g=b.A,c=Aa.X(g.D),e=Y.subtract(c,g.pivot,ta),B=Y.length(e);B>g.Ub.max?(Y.scale(e,g.Ub.max/B,e),Y.add(g.pivot,e,c)):B<g.Ub.min&&(B=Aa.la(g.D),B=la.Jc(B,la.qc,Pa),Y.scale(B,100*g.Ub.min,
B),Y.add(e,B,e),Y.scale(e,-g.Ub.min/Y.length(e),e),Y.add(g.pivot,e,c))}}f===a.Ob&&d.Se&&(d=b.A,g=d.pivot[2],c=la.pa(d.pivot[2],d.Se.min_z,d.Se.max_z),c!=g&&(g=Y.set(0,0,c-g,ta),Y.add(d.pivot,g,d.pivot),d=Aa.X(d.D),Y.add(d,g,d)));f===a.ed&&(f=b.A,f.ge&&(g=la.pa(f.Hc[0],f.ge.min,f.ge.max)-f.Hc[0],f.Hc[0]+=g,d=Aa.X(f.D),d[0]+=g),f.he&&(g=la.pa(f.Hc[1],f.he.min,f.he.max)-f.Hc[1],f.Hc[1]+=g,d=Aa.X(f.D),d[1]+=g),f=b.A,d=A(b,w)[1],(f=la.no(d,f.ib.up,f.ib.down))&&pa(b,0,f))}function S(a,b,w,d){a=A(a,ua);
d[0]=b-a[0];d[1]=w-a[1];return d}function r(a,b,w){var d=a.A;ma(a,a.A.pivot,b,w);a=A(a,Da);a=la.Fi(a[1],-Math.PI,Math.PI);d.yn=Math.abs(a)>Math.PI/2}function ha(a,b,w){b=S(a,b,w,Da);r(a,b[0],b[1])}function qa(a,b,w){var d=a.A;if(b||w)a=Q.identity(Ia),b&&(b=Q.setAxisAngle(d.We,b,Na),Q.multiply(a,b,a)),b=Aa.la(d.D),w&&(d=la.Jc(b,la.Af,ta),w=Q.setAxisAngle(d,w,Na),Q.normalize(w,w),Q.multiply(a,w,a)),Q.multiply(a,b,b),Q.normalize(b,b)}function K(a,b,d){var f=Aa.Eb(a.A.D,Ia),f=q(f,w);qa(a,b-f[0],d-f[1])}
function pa(a,b,w){var d=a.A;d.Nj||(b=0);ma(a,d.Hc,b,w);w&&aa(a)}function ja(a,b,w){b=S(a,b,w,Da);pa(a,b[0],b[1])}function ma(a,b,w,d){var f=a.A;if(w||d){a=Q.identity(Ia);w&&(w=Q.setAxisAngle(la.ic,w,Na),Q.multiply(a,w,a));w=Aa.la(f.D);if(d){var c=la.Jc(w,la.Af,ta);d=Q.setAxisAngle(c,d,Na);Q.normalize(d,d);Q.multiply(a,d,a)}d=Aa.X(f.D);la.r3(d,b,a,d);Q.multiply(a,w,w);Q.normalize(w,w)}}function aa(a){var b=a.A,d=A(a,w)[1],f=a.A;a=f.ib;f=f.Ub;a.down-a.up?(d=(a.down-d)/(a.down-a.up),d=Math.max(d,0)):
d=0;d=d*(f.max-f.min)+f.min;a=Aa.X(b.D);f=Aa.la(b.D);f=la.Jc(f,la.qc,ta);Y.normalize(f,f);Y.scale(f,d,f);Y.subtract(b.Hc,f,a)}function ka(b,w){switch(b.type){case a.fd:case a.fg:ia.perspective(P(b),b.Ab,b.near,b.far,b.Ib);break;case a.Ye:case a.Ei:var d=P(b),f=d*b.Ab;ia.ortho(-f,f,-d,d,b.near,b.far,b.Ib);break;case a.Ck:ia.ortho(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Ib);break;case a.Yc:case a.gd:var f=Math.tan(P(b)/2),d=b.near*f,c=b.Ab*b.tn*f;b.type==a.Yc?(f=c-b.Hg/2,c+=b.Hg/2):(f=c+b.Hg/2,
c-=b.Hg/2);f=-(b.near/b.tn*f);c*=b.near/b.tn;ia.frustum(f,c,-d,d,b.near,b.far,b.Ib);b.left=f;b.right=c;break;case a.eg:case a.Df:va.Ya()&&(d=va.R(),(d=va.dc(d,Ua.Gh))&&d.enable_hmd_stereo?(d=Math.tan(b.Nd[1]),f=Math.tan(b.Nd[2]),c=Math.tan(b.Nd[3]),b.top=b.near*Math.tan(b.Nd[0]),b.right=b.near*d,b.bottom=-b.near*f,b.left=-b.near*c,ia.frustum(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Ib)):(b.top=b.near*Math.tan(P(b)/2),b.bottom=-b.top,b.right=b.top*b.Ab,b.left=-b.right,ia.perspective(P(b),b.Ab,
b.near,b.far,b.Ib)));break;case a.Ac:return;default:la.K("Wrong camera type: "+b.type)}ca(b);w||ea(b)}function ca(a){ia.translate(a.Ib,a.Uw.trans,a.Ib);ia.rotateZ(a.Ib,a.Uw.angle,a.Ib)}function ea(a){wa(a);da(a);la.FF(a.Mg,a.Mo)}function wa(a){ia.copy(a.pc,a.Mg);ia.multiply(a.Ib,a.Mg,a.Mg);ia.invert(a.Mg,a.wD)}function da(a){ia.copy(a.pc,a.ui);a.ui[12]=0;a.ui[13]=0;a.ui[14]=0;a.ui[15]=1;ia.multiply(a.Ib,a.ui,a.ui);ia.invert(a.ui,a.ui)}function Z(b,w,d,f,c){f||(f=new Float32Array(24));w||(w=b.near);
d||(d=b.far);var e,r,g,B,l,h,n,u;switch(b.type){case a.Ac:la.K("Extraction from NONE camera is not possible");break;case a.fd:case a.fg:e=w*Math.tan(P(b)/2);B=-e;r=e*b.Ab;g=-r;l=d/w*e;u=-l;h=l*b.Ab;n=-h;break;case a.Ye:case a.Ei:B=P(b);g=B*b.Ab;e=l=B;r=h=g;B=u=-B;g=n=-g;break;case a.Ck:e=l=b.top;r=h=b.right;B=u=b.bottom;g=n=b.left;break;case a.Yc:case a.gd:l=w/b.near;e=w*Math.tan(P(b)/2);B=-e;r=b.right*l;g=b.left*l;n=d/w;l=e*n;u=-l;h=r*n;n*=g;break;case a.eg:case a.Df:l=w/b.near;e=b.top*l;B=b.bottom*
l;r=b.right*l;g=b.left*l;n=d/w;l=e*n;u=B*n;h=r*n;n*=g;break;default:la.K("Wrong camera type: "+b.type)}f[0]=g;f[1]=B;f[2]=-w;f[3]=r;f[4]=B;f[5]=-w;f[6]=r;f[7]=e;f[8]=-w;f[9]=g;f[10]=e;f[11]=-w;f[12]=n;f[13]=u;f[14]=-d;f[15]=n;f[16]=l;f[17]=-d;f[18]=h;f[19]=l;f[20]=-d;f[21]=h;f[22]=u;f[23]=-d;c&&(w=Ga,ia.invert(b.pc,w),la.$r(f,w,f,0));return f}function Ja(a,b){if(b.enable_csm){var w=b.csm_num;if(!a.Kj){var d=b.csm_num;a.Kj=Array(d);for(var f=0;f<d;f++)a.Kj[f]=new Float32Array(3);a.Du=new Float32Array(d)}for(d=
0;d<w;d++){var f=d?R(b,a,d-1):a.near,c=R(b,a,d),f=Z(a,f,c,Qa),f=ba.a0(f);a.Kj[d].set(f.V);a.Du[d]=f.pb;a.Py[d]=Y.length(f.V);a.Yr[d]=na(b.first_cascade_blur_radius,b.last_cascade_blur_radius,w,d)}}else a.Yr[0]=b.first_cascade_blur_radius}function R(a,b,w){var d=a.csm_num,f=la.pa(a.csm_first_cascade_border,b.near,b.far);a=la.pa(a.csm_last_cascade_border,b.near,b.far);return la.pa(na(f,a,d,w),b.near,b.far)}function na(a,b,w,d){switch(d){case 0:break;case w-1:a=b;break;default:a=0==a?0:a*Math.pow(b/
a,d/(w-1))}return a}function X(b){switch(b.type){case a.Ye:case a.Ei:case a.Ck:return!0;default:return!1}}function fa(a,b){b||(b=new Float32Array(3));var w=Aa.X(a.A.D);Y.copy(w,b);return b}var ba=t("__boundings"),za=t("__container"),ia=t("__mat4"),F=t("__math"),sa=t("__obj_util"),ya=t("__print"),Q=t("__quat"),va=t("__scenes"),Ua=t("__subscene"),Ba=t("__transform"),Aa=t("__tsr"),la=t("__util"),Y=t("__vec3"),xa=t("__vec4");a.Ac=10;a.fd=20;a.Ye=30;a.fg=40;a.Ei=50;a.Ck=60;a.Yc=70;a.gd=80;a.eg=90;a.Df=
100;a.He=0;a.Ob=2;a.Xc=3;a.ed=4;var Oa=la.bf(40),ra=la.bf(.5),V=new Float32Array([1,1,1,1]),Ya=new Float32Array([-1,-1,1,1]),Fa=new Float32Array([0,0,-1,1]),w=new Float32Array(2),Da=new Float32Array(2),ua=new Float32Array(2),ta=new Float32Array(3),Pa=new Float32Array(3),cb=new Float32Array(3),Ia=new Float32Array(4),Na=new Float32Array(4),Ea=new Float32Array(4),Ma=new Float32Array(4),Ga=new Float32Array(16),Qa=new Float32Array(24),Ha=new Float32Array(6);a.jX=function(w,d){var f=d.A,e=w.data;switch(e.type){case "PERSP":var r=
h(a.fd);r.ar=e.sensor_fit;O(r,e.angle,e.clip_start,e.clip_end);break;case "ORTHO":r=h(a.Ye),r.ar=e.sensor_fit,O(r,e.ortho_scale/2,e.clip_start,e.clip_end)}r.name=d.name;var l=d.T;l[0].oa.push(r);for(var n=1;n<l.length;n++){var u=m(r,!1);l[n].oa.push(u)}f.xb=C(e.b4w_move_style);f.dof_distance=e.dof_distance;r=e.dof_object;f.dof_object=r?r.Oa:null;f.dof_front_start=e.b4w_dof_front_start;f.dof_front_end=e.b4w_dof_front_end;f.dof_rear_start=e.b4w_dof_rear_start;f.dof_rear_end=e.b4w_dof_rear_end;f.dof_power=
e.b4w_dof_power;f.dof_bokeh=e.b4w_dof_bokeh;f.dof_bokeh_intensity=e.b4w_dof_bokeh_intensity;f.oe=e.b4w_dof_foreground_blur;f.Ys=e.b4w_trans_velocity;f.Xs=e.b4w_rot_velocity;f.Zs=e.b4w_zoom_velocity;r=d.A.xb;l=w.data;n=null;r!=a.Ob&&r!=a.Xc||!l.b4w_use_horizontal_clamping||(n={left:l.b4w_rotation_left_limit,right:l.b4w_rotation_right_limit,camera_space:"LOCAL"==l.b4w_horizontal_clamping_type},r==a.Xc&&(n.left*=-1,n.right*=-1));r=n;l=d.A.xb;n=w.data;u=null;l!=a.Ob&&l!=a.Xc||!n.b4w_use_vertical_clamping?
l==a.ed&&n.b4w_use_zooming&&(n.b4w_hover_angle_min<=n.b4w_hover_angle_max?(u={down:n.b4w_hover_angle_min,up:n.b4w_hover_angle_max},u.down*=-1,u.up*=-1):ya.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):(u={down:n.b4w_rotation_down_limit,up:n.b4w_rotation_up_limit,camera_space:"LOCAL"==n.b4w_vertical_clamping_type},l==a.Ob&&(u.down*=-1,u.up*=-1));var l=u,n=d.A.xb,u=w.data,F=null;n==a.Ob&&u.b4w_use_target_distance_limits&&u.b4w_distance_min<=u.b4w_distance_max?F={min:u.b4w_distance_min,
max:u.b4w_distance_max}:n===a.ed&&u.b4w_use_zooming&&(u.b4w_distance_min<=u.b4w_distance_max?F={min:u.b4w_distance_min,max:u.b4w_distance_max}:ya.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));n=F;u=w.data;F=null;d.A.xb==a.ed&&u.b4w_use_horizontal_clamping&&u.b4w_horizontal_translation_min<=u.b4w_horizontal_translation_max&&(F={min:u.b4w_horizontal_translation_min,max:u.b4w_horizontal_translation_max});var u=F,F=w.data,H=null;d.A.xb==a.ed&&F.b4w_use_vertical_clamping&&
F.b4w_vertical_translation_min<=F.b4w_vertical_translation_max&&(H={min:F.b4w_vertical_translation_min,max:F.b4w_vertical_translation_max});var F=H,H=w.data,Da=null;d.A.xb==a.Ob&&H.b4w_use_pivot_limits&&(Da={min_z:H.b4w_pivot_z_min,max_z:H.b4w_pivot_z_max});H=Da;switch(f.xb){case a.Xc:f=Aa.X(d.A.D);p(d,f,null,r,l);break;case a.Ob:f=Aa.X(d.A.D);c(d,f,e.b4w_target,r,l,n,H,e.b4w_use_panning);break;case a.ed:f=Aa.X(d.A.D),r=k(d,w.data.b4w_hover_zero_level,Pa),b(d,f,r,n,l,u,F,e.b4w_enable_hover_hor_rotation)}B(d);
g(d)};a.r4=p;a.LR=c;a.KR=b;a.pr=g;a.hd=m;a.mY=z;a.$ca=C;a.ad=h;a.K9=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.cc;case "DEPTH":return!!a.og;case "SCREEN":return!a.cc&&!a.og;default:la.K("Wrong attachment type: "+b)}};a.TB=function(a,b,w){switch(b){case "COLOR":case "CUBEMAP":a.cc=w;break;case "DEPTH":a.og=w;break;case "SCREEN":a.cc=null;a.og=null;break;default:la.K("Wrong attachment type: "+b)}};a.Naa=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.cc;case "DEPTH":return a.og;
case "SCREEN":return null;default:la.K("Wrong attachment type: "+b)}};a.VA=function(b,w){(b.type!=a.fd||w!=a.Yc&&w!=a.gd&&w!=a.eg&&w!=a.Df)&&la.K("make_stereo(): wrong camera type");b.type=w;e(b,6,.065)};a.i4=e;a.jl=A;a.TF=q;a.Gz=function(a,b){A(a,b);b[0]=la.Jh(b[0]+Math.PI);b[1]*=-1;return b};a.oR=function(b,w){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:b.wc=w}};a.SN=function(b){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:return b.wc;default:return 0}};a.s0=P;a.pR=O;a.qR=function(b,
w,d,f,c){switch(b.type){case a.fd:case a.Yc:case a.gd:case a.Ye:b.wc=d;b.Ab=1;break;case a.fg:case a.Ei:b.wc=d;b.Ab=w/d;break;case a.eg:case a.Df:break;default:la.K("set_frustum2(): Unsupported camera type: "+b.type)}b.near=f;b.far=c};a.T3=function(b,w,d,f,c,e,r){switch(b.type){case a.Ck:b.left=w;b.right=d;b.bottom=f;b.top=c;b.near=e;b.far=r;break;default:la.K("set_frustum_asymmetric(): Unsupported camera type: "+b.type)}};a.Vi=function(a){return a.A.xb};a.o4=I;a.DR=u;a.vI=function(b,w,d){var f=ta;
f[0]=0;f[1]=0;f[2]=-1;Y.transformQuat(f,d,f);f[0]+=w[0];f[1]+=w[1];f[2]+=w[2];var c=Pa;c[0]=0;c[1]=1;c[2]=0;Y.transformQuat(c,d,c);ia.lookAt(w,f,c,b.pc);d=va.R();d=va.dc(d,Ua.Gh);if(b.type==a.Yc||d&&d.enable_hmd_stereo&&b.type==a.eg)b.pc[12]+=b.Hg/2;else if(b.type==a.gd||d&&d.enable_hmd_stereo&&b.type==a.Df)b.pc[12]-=b.Hg/2;Aa.Wh(b.pc,b.Ng);wa(b);da(b);Aa.Ad(w,b.D)};a.wR=J;a.Wda=x;a.B5=D;a.A5=function(b){var w=b.A;B(b);G(b);switch(w.xb){case a.Ob:var d=Aa.X(w.D),f=Aa.la(w.D);la.HB(d,f,w.pivot,la.qc);
for(f=0;f<b.T.length;f++)for(var c=b.T[f].oa,r=0;r<c.length;r++){var g=c[r];g.type!=a.Yc&&g.type!=a.gd||e(g,Y.dist(d,w.pivot),g.Hg)}l(b,w.We);break;case a.Xc:b.Cc||l(b,w.We)}v(b)};a.Ey=l;a.HS=v;a.$B=E;a.gC=U;a.qA=L;a.pA=H;a.hR=n;a.zR=f;a.uR=W;a.GR=d;a.P5=G;a.Eda=r;a.mea=ha;a.Bda=function(a,b,w){qa(a,b,w)};a.jea=function(a,b,w){K(a,b,w)};a.Dda=qa;a.lea=K;a.Cda=pa;a.h4=ja;a.q3=function(b,w,d){var f=b.A.xb;f===a.Ob?r(b,w,d):f===a.Xc?qa(b,w,d):f===a.ed?pa(b,w,d):f===a.He&&qa(b,w,d)};a.g4=function(b,w,
d){var f=b.A.xb;f===a.Ob?ha(b,w,d):f===a.Xc?K(b,w,d):f===a.ed?ja(b,w,d):f===a.He&&K(b,w,d)};a.Gca=function(b){switch(b.type){case a.fd:case a.Ye:case a.Yc:case a.gd:return!0;default:return!1}};a.E_=function(b){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:var w;a:{switch(b.ar){case "AUTO":w=1<b.Ab?b.wc:X(b)?b.wc*b.Ab:2*Math.atan(Math.tan(b.wc/2)*b.Ab);break a;case "HORIZONTAL":w=b.wc;break a;case "VERTICAL":w=X(b)?b.wc*b.Ab:2*Math.atan(Math.tan(b.wc/2)*b.Ab);break a}w=void 0}return Math.min(P(b),
w);default:return ya.error("get_angular_diameter(): Unsupported camera type: "+b.type),0}};a.D3=function(b,w){switch(b.type){case a.fg:case a.Ei:ya.error("set_aspect(): Unsupported camera type: "+b.type);break;default:b.Ab=w}};a.Maa=function(a){return a.Ab};a.Kl=ka;a.G3=function(b,w,d,f,c){var e=1/Math.max(c,f);switch(b.type){case a.Ac:case a.fd:case a.fg:c/=2;f/=2;d=-(d-c)/c*Math.tan(P(b)/2);w=(w-f)/f*Math.tan(P(b)/2)*b.Ab;f=b.near*(d+e);c=b.near*(w+e);d=b.near*(d-e);w=b.near*(w-e);ia.frustum(w,
c,d,f,b.near,b.far,b.Ib);break;case a.Ye:case a.Ei:d=-d/c;w/=f;f=P(b);c=f*b.Ab;ia.ortho(-c+(w-e)*(c+c),-c+(w+e)*(c+c),f+(d-e)*(f+f),f+(d+e)*(f+f),b.near,b.far,b.Ib);break;case a.Ck:d=-d/c,w/=f,f=b.top+(d+e)*(b.top-b.bottom),c=b.left+(w+e)*(b.right-b.left),d=b.top+(d-e)*(b.top-b.bottom),w=b.left+(w-e)*(b.right-b.left),ia.ortho(w,c,d,f,b.near,b.far,b.Ib)}ca(b);ea(b)};a.fX=da;a.XZ=Z;a.zW=function(a){a=a.A;var b=ba.Hf();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.Ca=b;var w=ba.zL(1,
la.Rh([0,0,0]));a.Bc=w;a.Ut=ba.mL(1,b);a.Wt=ba.oL(1,b);a.Vt=ba.nL(1,b)};a.fp=function(b){return sa.mb(b)&&b.A&&b.A.xb==a.He};a.Ic=function(b){return sa.mb(b)&&b.A&&b.A.xb==a.Ob};a.Oe=function(b){return sa.mb(b)&&b.A&&b.A.xb==a.Xc};a.md=function(b){return sa.mb(b)&&b.A&&b.A.xb==a.ed};a.BA=function(b){return sa.mb(b)&&b.A&&b.T[0].oa[0].type==a.Ye};a.hJ=Ja;a.jZ=R;a.GH=function(b,w,d){b=b.T[0].oa[0];switch(b.type){case a.fd:case a.fg:case a.Ye:case a.Ei:case a.Yc:case a.gd:case a.eg:case a.Df:case a.Ac:var f=
Ea;f.set(w);f[3]=1;xa.transformMat4(f,b.Mg,f);w=-f[1]/f[3];d[0]=(f[0]/f[3]+1)/2*b.width;d[1]=(w+1)/2*b.height;za.q6(d[0],d[1],d,b);2<d.length&&(d[2]=(f[2]/Math.abs(f[3])+1)/2);return d;default:return ya.error("Non-compatible camera"),d}};a.V_=function(a){return a.T[0].oa[0]};a.Iz=function(b,w){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:var d=Math.tan(P(b)/2);switch(w){case "LEFT":return-d*b.Ab;case "RIGHT":return d*b.Ab;case "TOP":return d;case "BOTTOM":return-d}break;case a.Ye:case a.Ei:switch(w){case "LEFT":return-P(b)*
b.Ab;case "RIGHT":return P(b)*b.Ab;case "TOP":return P(b);case "BOTTOM":return-P(b)}break;case a.Ck:switch(w){case "LEFT":return b.left;case "RIGHT":return b.right;case "TOP":return b.top;case "BOTTOM":return b.bottom}break;case a.eg:case a.Df:d=va.R();if((d=va.dc(d,Ua.Gh))&&d.enable_hmd_stereo)switch(w){case "LEFT":return-Math.tan(Math.min(b.Nd[1],b.Nd[3]));case "RIGHT":return Math.tan(Math.min(b.Nd[1],b.Nd[3]));case "TOP":return Math.tan(Math.min(b.Nd[0],b.Nd[2]));case "BOTTOM":return-Math.tan(Math.min(b.Nd[0],
b.Nd[2]))}else switch(d=Math.tan(P(b)/2),w){case "LEFT":return-d*b.Ab;case "RIGHT":return d*b.Ab;case "TOP":return d;case "BOTTOM":return-d}break;default:la.K("Unknown camera type")}};a.f1=X;a.tI=function(a,b,w){a=a.A;Aa.Ad(b,a.D);Y.copy(w,a.pivot)};a.vR=function(a,b){var w=a.A,d=Y.subtract(b,w.Hc,ta),f=Aa.X(w.D),d=Y.add(d,f,d);Ba.je(a,d);Y.copy(b,w.Hc)};a.j4=function(a,b){var w=a.A,d=Y.subtract(b,w.pivot,ta),f=Aa.X(w.D),d=Y.add(d,f,d);Ba.je(a,d);Y.copy(b,w.pivot)};a.Zaa=fa;a.$da=function(w,d){w.A.xb=
d;w.A.yc=null;w.A.ib=null;w.A.Ub=null;w.A.ge=null;w.A.he=null;g(w);switch(d){case a.ed:var f=Aa.X(w.A.D),c=k(w,0,Pa);b(w,f,c,null,null,null,null,w.A.Nj);break;case a.Ob:f=fa(w,ta),c=Aa.la(w.A.D),c=la.Jc(c,la.qc,Pa),c=Y.scaleAndAdd(f,c,10,c),Y.copy(c,w.A.pivot)}};a.Xw=function(a){a=a.A;a.xb=0;Y.set(0,0,0,a.pivot);Y.set(0,0,0,a.Hc);a.yn=!1;a.use_panning=!1;a.yc=null;a.ib=null;a.Ub=null;a.ge=null;a.he=null;a.Se=null;a.Nj=!0};a.YB=function(a,b){for(var w=0;w<a.length;w++){var d=a[w];70!=d.type&&80!=d.type&&
90!=d.type&&100!=d.type||e(d,d.tn,b)}};a.kI=function(a,b,w){var d=va.R();a=sa.La(a,d).oa;for(d=0;d<a.length;d++){var f=a[d];if(90==f.type||100==f.type)90==f.type&&xa.copy(b,f.Nd),100==f.type&&xa.copy(w,f.Nd),f.Kc?u(f,!1):ka(f,!1)}};a.Sda=function(a,b,w){var d=va.R();a=sa.La(a,d).oa;for(d=0;d<a.length;d++){var f=a[d];if(90==f.type||100==f.type)90==f.type&&b&&ia.copy(b,f.Ib),100==f.type&&w&&ia.copy(w,f.Ib),ca(f),ea(f)}};a.b4=function(b,w){for(var d=va.R(),d=sa.La(b,d).oa,f,c,e,r,g,B,l,n,h=0;h<d.length;h++){var u=
d[h];if(u.type==a.Ac&&u.near||u.type==a.fd||u.type==a.fg){f=u.near;c=ia.invert(w,Ga);r=xa.transformMat4(V,c,Ea);e=r[0]*f;r=r[1]*f;B=xa.transformMat4(Ya,c,Ea);g=B[0]*f;B=B[1]*f;c=xa.transformMat4(Fa,c,Ea);c=-c[2]*c[3];l=ia.frustum(g,e,B,r,f,c,Ga);n=(e-g)/(r-B);break}}for(h=0;h<d.length;h++)if(u=d[h],u.type==a.Ac||u.type==a.fd||u.type==a.fg)u.far=c,u.near=f,u.right=e,u.top=r,u.left=g,u.bottom=B,u.Ab=n,u.wc=Math.atan(r/f)-Math.atan(B/f),ia.copy(l,u.Ib),ca(u),ea(u)}};b4w.module.__boundings=function(a,t){function p(){return{max_x:0,min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function c(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function b(){return{V:new Float32Array(3),ab:new Float32Array(3),eb:new Float32Array(3),fb:new Float32Array(3)}}function k(a,b){var f=a.max_y,c=a.max_z,d=a.min_x,e=a.min_y,g=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,f);a.max_z=Math.max(b.max_z,c);a.min_x=
Math.min(b.min_x,d);a.min_y=Math.min(b.min_y,e);a.min_z=Math.min(b.min_z,g);return a}function g(a,b,f,c){var d=a[b],e=a[b+1],g=a[b+2],l=a[b],r=a[b+1],h=a[b+2];for(b+=3;b<f;b+=3)var u=a[b],n=a[b+1],x=a[b+2],d=Math.max(d,u),e=Math.max(e,n),g=Math.max(g,x),l=Math.min(l,u),r=Math.min(r,n),h=Math.min(h,x);c.max_x=d;c.max_y=e;c.max_z=g;c.min_x=l;c.min_y=r;c.min_z=h;return c}function M(a,b){b||(b=new Float32Array(24));var f=a.max_x,c=a.max_y,d=a.max_z,e=a.min_x,g=a.min_y,l=a.min_z;b[0]=e;b[1]=g;b[2]=l;b[3]=
f;b[4]=g;b[5]=l;b[6]=f;b[7]=c;b[8]=l;b[9]=e;b[10]=c;b[11]=l;b[12]=e;b[13]=g;b[14]=d;b[15]=f;b[16]=g;b[17]=d;b[18]=f;b[19]=c;b[20]=d;b[21]=e;b[22]=c;b[23]=d;return b}function m(){return{V:new Float32Array(3),pb:0}}function z(a,b){b.V[0]=a.V[0];b.V[1]=a.V[1];b.V[2]=a.V[2];b.pb=a.pb;return b}function C(){return{ab:new Float32Array(3),eb:new Float32Array(3),fb:new Float32Array(3),V:new Float32Array(3)}}function h(a,b){u.copy(a.ab,b.ab);u.copy(a.eb,b.eb);u.copy(a.fb,b.fb);u.copy(a.V,b.V);return b}function e(a,
b,f,c){return{ab:new Float32Array(a),eb:new Float32Array(b),fb:new Float32Array(f),V:new Float32Array([c[0],c[1],c[2]])}}function A(a,b){var f=J.gX(a,E),f=b?J.aX(a,f,L):x.identity(L),f=J.f_(f,U);u.copy(a,l);u.transformMat3(l,f,l);for(var c=l[0],d=c,g=l[1],B=g,h=l[2],r=h,n,k,K,H,v=3;v<a.length;v+=3)l[0]=a[v],l[1]=a[v+1],l[2]=a[v+2],u.transformMat3(l,f,l),n=l[0],k=l[1],K=l[2],n>c&&(c=n),n<d&&(d=n),k>g&&(g=k),k<B&&(B=k),K>h&&(h=K),K<r&&(r=K);c=Math.max(c-d,.001);g=Math.max(g-B,.001);h=Math.max(h-r,.001);
r=x.identity(L);r[0]=c?1/c:2E3;r[4]=g?1/g:2E3;r[8]=h?1/h:2E3;x.transpose(f,y);l[0]=a[0];l[1]=a[1];l[2]=a[2];u.transformMat3(l,f,l);u.transformMat3(l,r,l);u.transformMat3(l,y,l);B=l[0];d=l[0];n=l[1];k=l[1];K=l[2];H=l[2];for(v=3;v<a.length;v+=3)l[0]=a[v],l[1]=a[v+1],l[2]=a[v+2],u.transformMat3(l,f,l),u.transformMat3(l,r,l),u.transformMat3(l,y,l),B=Math.max(B,l[0]),d=Math.min(d,l[0]),n=Math.max(n,l[1]),k=Math.min(k,l[1]),K=Math.max(K,l[2]),H=Math.min(H,l[2]);v=Math.sqrt((B-d)*(B-d)+(n-k)*(n-k)+(K-H)*
(K-H))/2;v=Math.min(v,1);N[0]=(B+d)/2;N[1]=(n+k)/2;N[2]=(K+H)/2;B=N;r=x.identity(L);r[0]=c;r[4]=g;r[8]=h;u.transformMat3(B,f,B);u.transformMat3(B,r,B);u.transformMat3(B,y,B);r=[f[0],f[3],f[6]];d=[f[1],f[4],f[7]];f=[f[2],f[5],f[8]];u.scale(r,c*v,r);u.scale(d,g*v,d);u.scale(f,h*v,f);return e(r,d,f,B)}function q(){return{pb:0,height:0,V:new Float32Array(3)}}function P(a,b,f){u.add(b,f,a.V);u.scale(a.V,.5,a.V);a.pb=u.distance(a.V,b);return a}var O=t("__tsr"),I=t("__util"),u=t("__vec3"),J=t("__math"),
x=t("__mat3"),D=new Float32Array(24),l=new Float32Array(3),v=new Float32Array(3),N=new Float32Array(3),E=new Float32Array(3),U=new Float32Array(9),L=new Float32Array(9),y=new Float32Array(9);a.SO=function(){return{Ef:p(),ig:C(),Ff:m()}};a.qM=function(a,b){c(a.Ef,b.Ef);h(a.ig,b.ig);z(a.Ff,b.Ff)};a.Hf=p;a.Hj=c;a.My=b;a.VX=function(a,b){u.copy(a.V,b.V);u.copy(a.ab,b.ab);u.copy(a.eb,b.eb);u.copy(a.fb,b.fb)};a.E9=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};
a.C6=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0};a.wy=function(a){var b=p();c(a,b);return b};a.bX=function(a){var b=a.max_x-a.min_x,f=a.max_y-a.min_y;f<b&&(b=f);a=a.max_z-a.min_z;a<b&&(b=a);return b};a.oz=k;a.sE=g;a.Kq=function(a,b,f){f||(f=p());a=M(a,D);O.An(a,b,a);return g(a,0,a.length,f)};a.gN=M;a.Bea=function(a,b,f){f||(f=p());var c=b.min_x,d=b.max_x,e=b.min_y,g=b.max_y,l=b.min_z;b=b.max_z;if(c>=a.max_x||d<=a.min_x||e>=a.max_y||g<=a.min_y||l>=a.max_z||b<=a.min_z)return f.min_x=
-.1,f.max_x=.1,f.min_y=-.1,f.max_y=.1,f.min_z=-.2,f.max_z=-.1,f;f.min_x=Math.max(a.min_x,c);f.max_x=Math.min(a.max_x,d);f.min_y=Math.max(a.min_y,e);f.max_y=Math.min(a.max_y,g);f.min_z=Math.max(a.min_z,l);f.max_z=Math.min(a.max_z,b);return f};a.Nea=function(a,b,f){f||(f=p());var c=a.max_x-a.min_x,d=a.max_y-a.min_y,e=a.max_z-a.min_z;f.min_x=a.min_x-.5*(b-1)*c;f.max_x=a.max_x+.5*(b-1)*c;f.min_y=a.min_y-.5*(b-1)*d;f.max_y=a.max_y+.5*(b-1)*d;f.min_z=a.min_z-.5*(b-1)*e;f.max_z=a.max_z+.5*(b-1)*e;return f};
a.ly=function(a,b,f){f||(f=m());O.Mc(a.V,b,f.V);b=O.fe(b);f.pb=a.pb*(0>b?-b:b);return f};a.zE=function(a,b,f){f||(f=C());O.Mc(a.V,b,f.V);u.copy(a.ab,f.ab);u.copy(a.eb,f.eb);u.copy(a.fb,f.fb);O.Ud(f.ab,b,f.ab);O.Ud(f.eb,b,f.eb);O.Ud(f.fb,b,f.fb);return f};a.AE=function(a,c,f){f||(f=b());O.Mc(a.V,c,f.V);u.copy(a.ab,f.ab);u.copy(a.eb,f.eb);u.copy(a.fb,f.fb);O.Ud(f.ab,c,f.ab);O.Ud(f.eb,c,f.eb);O.Ud(f.fb,c,f.fb);return f};a.zL=function(a,b){var f=m();u.copy(b,f.V);f.pb=a;return f};a.p3=function(a,c,f,
e,d){var g=b();u.copy(a,g.V);u.copy(c,g.ab);u.copy(f,g.eb);u.copy(e,g.fb);u.scale(g.ab,d[0],g.ab);u.scale(g.eb,d[1],g.eb);u.scale(g.fb,d[2],g.fb);return g};a.Gy=m;a.um=z;a.xu=C;a.Nq=h;a.b$=function(a){var b=C();h(a,b);return b};a.c$=function(a){var b=m();z(a,b);return b};a.tE=e;a.LW=function(){var a;a||(a=m());u.set(0,0,0,a.V);a.pb=1E12;return a};a.TZ=function(a,b){var f=u.subtract(b.V,a.V,u.create());0==u.length(f)&&u.set(1,0,0,f);var c=u.normalize(f,u.create()),f=u.scale(c,a.pb,u.create());u.add(f,
a.V,f);var d=u.scale(c,-a.pb,u.create());u.add(d,a.V,d);var e=u.scale(c,b.pb,u.create());u.add(e,b.V,e);var g=u.scale(c,-b.pb,u.create());u.add(g,b.V,g);f=[f,d,e,g];c=u.normalize(c,u.create());d=f[0];e=f[0];for(g=1;g<f.length;g++){var l=u.dot(f[g],c);l<u.dot(d,c)&&(d=f[g]);l>u.dot(e,c)&&(e=f[g])}c=[d,e];f=c[0];c=c[1];a.V=u.scale(u.add(f,c,u.create()),.5,u.create());a.pb=u.length(u.subtract(c,f,u.create()))/2};a.GF=function(a,b){u.add(a.V,a.eb,l);u.add(l,a.ab,l);u.add(l,a.fb,l);b.push(l[0],l[1],l[2]);
u.add(a.V,a.eb,l);u.add(l,a.ab,l);u.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);u.add(a.V,a.eb,l);u.subtract(l,a.ab,l);u.add(l,a.fb,l);b.push(l[0],l[1],l[2]);u.add(a.V,a.eb,l);u.subtract(l,a.ab,l);u.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);u.subtract(a.V,a.eb,l);u.add(l,a.ab,l);u.add(l,a.fb,l);b.push(l[0],l[1],l[2]);u.subtract(a.V,a.eb,l);u.add(l,a.ab,l);u.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);u.subtract(a.V,a.eb,l);u.subtract(l,a.ab,l);u.add(l,a.fb,l);b.push(l[0],l[1],l[2]);u.subtract(a.V,a.eb,
l);u.subtract(l,a.ab,l);u.subtract(l,a.fb,l);b.push(l[0],l[1],l[2])};a.Fy=A;a.aY=function(a){var c=b();u.copy(a.ab,c.ab);u.copy(a.eb,c.eb);u.copy(a.fb,c.fb);u.copy(a.V,c.V);return c};a.Hy=function(a){var b=m(),f;f=u.length(a.ab);var c=u.length(a.eb),d=u.length(a.fb);f=f>c?f:c;b.V=a.V;b.pb=d>f?d:f;return b};a.YO=function(a,b){var f=u.length(a.ab),c=u.length(a.eb),d=u.length(a.fb);return.75*b.pb*b.pb*b.pb>f*c*d};a.O0=a.Q0=a.P0=q;a.mL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c-2*a),e=q();
e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.oL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=q();e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.nL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=q();e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.SX=a.UX=a.TX=function(a,b){b.pb=a.pb;b.height=a.height;b.V.set(a.V);return b};a.M9=function(a,b){return a.min_x>b.max_x||a.max_x<b.min_x?!1:a.min_y>b.max_y||a.max_y<b.min_y?!1:a.min_z>
b.max_z||a.max_z<b.min_z?!1:!0};a.W2=function(a){for(var b=0,f=0,e=p(),d=0;d<a.submeshes.length;d++){for(var l=a.submeshes[d],B=l.position,h=0;h<B.length/3;h++)var r=B[3*h],u=B[3*h+1],x=B[3*h+2],b=Math.max(Math.sqrt(r*r+u*u+x*x),b),f=Math.max(Math.sqrt(r*r+u*u),f);h=l.boundings.bb;B=g(B,0,B.length,p());h.max_x=B.max_x;h.min_x=B.min_x;h.max_y=B.max_y;h.min_y=B.min_y;h.max_z=B.max_z;h.min_z=B.min_z;h=M(B,D);h=A(h,!1);l.boundings.be_cen=h.V;l.boundings.be_ax=[h.ab[0],h.eb[1],h.fb[2]];d?k(e,B):c(B,e)}d=
a.b4w_boundings.bb;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;d=a.b4w_boundings.bb_src;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;a.b4w_boundings.bs_rad=b;a.b4w_boundings.bc_rad=f;h=M(e,D);h=A(h,!1);a.b4w_boundings.be_cen=h.V;a.b4w_boundings.be_ax=[h.ab[0],h.eb[1],h.fb[2]]};a.a0=function(a){var b=a.subarray(0,3),f=a.subarray(6,9),c=a.subarray(12,15),d=a.subarray(18,21);a=u.subtract(f,b,l);u.normalize(a,
a);var e=I.m0(b,f,c,v),e=u.cross(e,a,e);u.normalize(e,e);var g=u.create(),h=u.create();u.subtract(f,b,N);h[0]=u.dot(N,a);h[1]=u.dot(N,e);f=u.create();u.subtract(c,b,N);f[0]=u.dot(N,a);f[1]=u.dot(N,e);c=u.create();u.subtract(d,b,N);c[0]=u.dot(N,a);c[1]=u.dot(N,e);d=m();c=[g,h,f,c];g=P(d,c[0],c[1]);for(d=2;d<c.length;d++)if(u.distance(g.V,c[d])>g.pb){for(var r=g,g=c,h=c[d],f=d-1,r=P(r,h,g[0]),x=1;x<=f;x++)if(u.distance(r.V,g[x])>r.pb){for(var k=r,r=g,K=h,p=g[x],y=x-1,k=P(k,K,p),D=0;D<=y;D++)if(u.distance(k.V,
r[D])>k.pb){var E=K,q=p,A=r[D],H=u.subtract(q,A,N),H=u.squaredLength(H),z=u.subtract(E,A,N),L=u.squaredLength(z),z=u.subtract(E,q,N),O=u.squaredLength(z),z=H*(L+O-H),C=L*(O+H-L),H=O*(H+L-O),L=z+C+H;u.copy(E,k.V);u.scale(k.V,z/L,k.V);u.scaleAndAdd(k.V,q,C/L,k.V);u.scaleAndAdd(k.V,A,H/L,k.V);k.pb=u.distance(k.V,E)}r=k}g=r}d=g;a=u.scale(a,d.V[0],N);u.scaleAndAdd(a,e,d.V[1],a);u.add(a,b,d.V);return d}};b4w.module.__tsr=function(a,t){function p(){var a=new Float32Array(8);a[3]=1;a[7]=1;return a}function c(){var a=new Float32Array(9);a[3]=1;a[7]=1;return a}function b(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b}function k(a,b,c,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=b;e[4]=c[0];e[5]=c[1];e[6]=c[2];e[7]=c[3];return e}function g(a,b){b[0]=a[4];b[1]=a[5];b[2]=a[6];b[3]=a[7];return b}function M(a,b,c){var e=b[0],g=b[1],h=b[2],u=b[3],k=b[4],p=b[5],m=b[6];
b=b[7];var I=a[0]*u,y=a[1]*u,q=a[2]*u;a=b*I+p*q-m*y;var u=b*y+m*I-k*q,n=b*q+k*y-p*I,I=-k*I-p*y-m*q;c[0]=a*b+I*-k+u*-m-n*-p;c[1]=u*b+I*-p+n*-k-a*-m;c[2]=n*b+I*-m+a*-p-u*-k;c[0]+=e;c[1]+=g;c[2]+=h;return c}var m=t("__mat4"),z=t("__quat"),C=t("__util"),h=t("__vec3"),e=Math.sin(-Math.PI/4),A=-e,q=new Float32Array(3),P=new Float32Array(4),O=new Float32Array(16);a.create=p;a.clone=function(a){var c=p();b(a,c);return c};a.Az=function(a,b,c,e,g,h,k,m){var l=p();l[0]=a;l[1]=b;l[2]=c;l[3]=e;l[4]=g;l[5]=h;l[6]=
k;l[7]=m;return l};a.wo=c;a.d$=function(a){var e=c();b(a,e);return e};a.Baa=function(a,b,e,g,h,l,k,p){var u=c();u[0]=a;u[1]=b;u[2]=e;u[3]=g;u[4]=h;u[5]=l;u[6]=k;u[7]=p;return u};a.copy=b;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=1;return a};a.ti=k;a.Ad=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.Ve=function(a,b){b[3]=a;return b};a.mn=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.Gc=function(a,b){b[4]=a[0];b[5]=a[1];b[6]=a[2];b[7]=
a[3];return b};a.X=function(a){return a.subarray(0,3)};a.Wb=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fe=function(a){return a[3]};a.hr=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.la=function(a){return a.subarray(4,8)};a.Eb=g;a.invert=function(a,b){var c=1/a[3];if(!c)return null;var e=a[0],g=a[1],h=a[2];P[0]=a[4];P[1]=a[5];P[2]=a[6];P[3]=a[7];z.invert(P,P);var u=P[0],k=P[1],p=P[2],m=P[3],e=e*c,g=g*c,q=h*c,h=m*e+k*q-p*g,y=m*g+p*e-u*q,A=m*q+u*g-k*e,e=-u*e-k*g-p*q;
b[0]=-(h*m+e*-u+y*-p-A*-k);b[1]=-(y*m+e*-k+A*-u-h*-p);b[2]=-(A*m+e*-p+h*-k-y*-u);b[3]=c;b[4]=u;b[5]=k;b[6]=p;b[7]=m;return b};a.bD=function(a,b){var c=a[3];m.fromRotationTranslation(a.subarray(4,8),a.subarray(0,3),b);for(var e=0;12>e;e++)b[e]*=c;return b};a.Wh=function(a,b){var c=C.SG(a,q),e=C.MP(a),g=C.RG(a,P);k(c,e,g,b);return b};a.multiply=function(a,b,c){M(b,a,c);c[3]=a[3]*b[3];var e=a[4],g=a[5],h=a[6];a=a[7];var u=b[4],k=b[5],p=b[6];b=b[7];c[4]=e*b+a*u+g*p-h*k;c[5]=g*b+a*k+h*u-e*p;c[6]=h*b+a*
p+e*k-g*u;c[7]=a*b-e*u-g*k-h*p;return c};a.l5=function(a,b,c){var e=b[3];b=m.fromRotationTranslation(b.subarray(4,8),b.subarray(0,3),O);for(var g=0;12>g;g++)b[g]*=e;m.multiply(b,a,c);return c};a.Mc=M;a.yS=function(a,b,c){var e=b[3],g=a[0]-b[0],h=a[1]-b[1],u=a[2]-b[2];a=b[4];var k=b[5],p=b[6];b=b[7];var m=a*a+k*k+p*p+b*b,m=m?1/m:0;a=-a*m;k=-k*m;p=-p*m;b*=m;var m=b*g+k*u-p*h,q=b*h+p*g-a*u,y=b*u+a*h-k*g,g=-a*g-k*h-p*u;c[0]=m*b+g*-a+q*-p-y*-k;c[1]=q*b+g*-k+y*-a-m*-p;c[2]=y*b+g*-p+m*-k-q*-a;c[0]/=e;c[1]/=
e;c[2]/=e;return c};a.An=function(a,b,c,e){e||(e=0);var g=a.length,h=b[0],k=b[1],u=b[2],x=b[3],p=b[4],m=b[5],y=b[6];b=b[7];for(var q=0;q<g;q+=3){var n=a[q]*x,f=a[q+1]*x,A=a[q+2]*x,d=b*n+m*A-y*f,G=b*f+y*n-p*A,B=b*A+p*f-m*n,n=-p*n-m*f-y*A;c[e+q]=d*b+n*-p+G*-y-B*-m;c[e+q+1]=G*b+n*-m+B*-p-d*-y;c[e+q+2]=B*b+n*-y+d*-m-G*-p;c[e+q]+=h;c[e+q+1]+=k;c[e+q+2]+=u}return c};a.cJ=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],k=b[4],u=b[5],x=b[6];b=b[7];for(var p=0;p<g;p+=3){var m=a[p]*h,y=a[p+1]*h,q=a[p+2]*h,
n=b*m+u*q-x*y,f=b*y+x*m-k*q,A=b*q+k*y-u*m,m=-k*m-u*y-x*q;c[e+p]=n*b+m*-k+f*-x-A*-u;c[e+p+1]=f*b+m*-u+A*-k-n*-x;c[e+p+2]=A*b+m*-x+n*-u-f*-k}return c};a.Ud=function(a,b,c){var e=b[3],g=b[4],h=b[5],k=b[6];b=b[7];var u=a[0]*e,p=a[1]*e,m=a[2]*e;a=b*u+h*m-k*p;var e=b*p+k*u-g*m,q=b*m+g*p-h*u,u=-g*u-h*p-k*m;c[0]=a*b+u*-g+e*-k-q*-h;c[1]=e*b+u*-h+q*-g-a*-k;c[2]=q*b+u*-k+a*-h-e*-g;return c};a.dJ=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],k=b[4],u=b[5],x=b[6];b=b[7];for(var p=0;p<g;p+=4){var m=a[p]*h,y=
a[p+1]*h,q=a[p+2]*h,n=b*m+u*q-x*y,f=b*y+x*m-k*q,A=b*q+k*y-u*m,m=-k*m-u*y-x*q;c[e+p]=n*b+m*-k+f*-x-A*-u;c[e+p+1]=f*b+m*-u+A*-k-n*-x;c[e+p+2]=A*b+m*-x+n*-u-f*-k;c[e+p+3]=a[p+3]}return c};a.xS=function(a,b,c){b=g(b,P);z.multiply(b,a,c)};a.m5=function(a,b,c,e){e=e||0;b=g(b,P);C.U2(a,b,c,e)};a.translate=function(a,b,c){var e=a[3],g=a[4],h=a[5],k=a[6],u=a[7],p=b[0]*e,m=b[1]*e,q=b[2]*e;b=u*p+h*q-k*m;var e=u*m+k*p-g*q,y=u*q+g*m-h*p,p=-g*p-h*m-k*q;c[0]=a[0]+b*u+p*-g+e*-k-y*-h;c[1]=a[1]+e*u+p*-h+y*-g-b*-k;
c[2]=a[2]+y*u+p*-k+b*-h-e*-g;c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];return c};a.qr=function(a,b,c,e){h.lerp(a.subarray(0,3),b.subarray(0,3),c,e.subarray(0,3));var g=a[3];e[3]=g+c*(b[3]-g);z.slerp(a.subarray(4,8),b.subarray(4,8),c,e.subarray(4,8));return e};a.laa=function(a,b,c,e){var g=a.subarray(0,3),h=b.subarray(0,3),k=e.subarray(0,3);k[0]=h[0]*(c+1)-g[0]*c;k[1]=h[1]*(c+1)-g[1]*c;k[2]=h[2]*(c+1)-g[2]*c;e[3]=b[3]*(c+1)-a[3]*c;a=a.subarray(4,8);b=b.subarray(4,8);g=e.subarray(4,8);g[0]=
b[0]*(c+1)-a[0]*c;g[1]=b[1]*(c+1)-a[1]*c;g[2]=b[2]*(c+1)-a[2]*c;g[3]=b[3]*(c+1)-a[3]*c;z.normalize(g,g);return e};a.W0=function(a,b,c,e,g){g[0]=a[0]+b*c[0];g[1]=a[1]+b*c[1];g[2]=a[2]+b*c[2];g[3]=a[3];c=e[0];var h=e[1];e=e[2];var k=a[4],u=a[5],p=a[6],m=a[7];g[4]=.5*(c*m+h*p-e*u);g[5]=.5*(h*m+e*k-c*p);g[6]=.5*(e*m+c*u-h*k);g[7]=.5*(-c*k-h*u-e*p);g[4]=a[4]+g[4]*b;g[5]=a[5]+g[5]*b;g[6]=a[6]+g[6]*b;g[7]=a[7]+g[7]*b;a=g[4];b=g[5];c=g[6];h=g[7];a=a*a+b*b+c*c+h*h;0<a&&(a=1/Math.sqrt(a),g[4]*=a,g[5]*=a,g[6]*=
a,g[7]*=a)};a.afa=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];var c=a[4],g=a[5],h=a[6],l=a[7];b[4]=c*A+l*e;b[5]=g*A+h*e;b[6]=h*A-g*e;b[7]=l*A-c*e};a.$ea=function(a,b){b[0]=a[0];b[1]=-a[2];b[2]=a[1];b[3]=a[3];b[4]=a[4];b[5]=-a[6];b[6]=a[5];b[7]=a[7]}};b4w.module.__vec3=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array,p=Math.random;a.create=function(){var a=new t(3);a[0]=0;a[1]=0;a[2]=0;return a};a.clone=function(a){var b=new t(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=function(a,b,k){var c=new t(3);c[0]=a;c[1]=b;c[2]=k;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set=function(a,b,k,g){g[0]=a;g[1]=b;g[2]=k;return g};a.add=function(a,b,k){k[0]=a[0]+b[0];k[1]=a[1]+b[1];k[2]=a[2]+b[2];
return k};a.subtract=function(a,b,k){k[0]=a[0]-b[0];k[1]=a[1]-b[1];k[2]=a[2]-b[2];return k};a.sub=a.subtract;a.multiply=function(a,b,k){k[0]=a[0]*b[0];k[1]=a[1]*b[1];k[2]=a[2]*b[2];return k};a.mul=a.multiply;a.divide=function(a,b,k){k[0]=a[0]/b[0];k[1]=a[1]/b[1];k[2]=a[2]/b[2];return k};a.div=a.divide;a.min=function(a,b,k){k[0]=Math.min(a[0],b[0]);k[1]=Math.min(a[1],b[1]);k[2]=Math.min(a[2],b[2]);return k};a.max=function(a,b,k){k[0]=Math.max(a[0],b[0]);k[1]=Math.max(a[1],b[1]);k[2]=Math.max(a[2],
b[2]);return k};a.scale=function(a,b,k){k[0]=a[0]*b;k[1]=a[1]*b;k[2]=a[2]*b;return k};a.scaleAndAdd=function(a,b,k,g){g[0]=a[0]+b[0]*k;g[1]=a[1]+b[1]*k;g[2]=a[2]+b[2]*k;return g};a.distance=function(a,b){var c=b[0]-a[0],g=b[1]-a[1],p=b[2]-a[2];return Math.sqrt(c*c+g*g+p*p)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0],g=b[1]-a[1],p=b[2]-a[2];return c*c+g*g+p*p};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;
a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=function(a,b){var c=a[0],g=a[1],p=a[2],c=c*c+g*g+p*p;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};a.cross=function(a,b,k){var c=a[0],p=a[1];a=a[2];var m=b[0],z=b[1];b=b[2];
k[0]=p*b-a*z;k[1]=a*m-c*b;k[2]=c*z-p*m;return k};a.lerp=function(a,b,k,g){var c=a[0],p=a[1];a=a[2];g[0]=c+k*(b[0]-c);g[1]=p+k*(b[1]-p);g[2]=a+k*(b[2]-a);return g};a.gca=function(a,b,k,g,p,m){var c=p*p,C=c*(2*p-3)+1,h=c*(p-2)+p,e=c*(p-1);p=c*(3-2*p);m[0]=a[0]*C+b[0]*h+k[0]*e+g[0]*p;m[1]=a[1]*C+b[1]*h+k[1]*e+g[1]*p;m[2]=a[2]*C+b[2]*h+k[2]*e+g[2]*p;return m};a.pL=function(a,b,k,g,p,m){var c=1-p,C=c*c,h=p*p,e=C*c,C=3*p*C,c=3*h*c;p=h*p;m[0]=a[0]*e+b[0]*C+k[0]*c+g[0]*p;m[1]=a[1]*e+b[1]*C+k[1]*c+g[1]*p;
m[2]=a[2]*e+b[2]*C+k[2]*c+g[2]*p;return m};a.random=function(a,b){a=a||1;var c=2*p()*Math.PI,g=2*p()-1,M=Math.sqrt(1-g*g)*a;b[0]=Math.cos(c)*M;b[1]=Math.sin(c)*M;b[2]=g*a;return b};a.transformMat4=function(a,b,k){var c=a[0],p=a[1];a=a[2];var m=b[3]*c+b[7]*p+b[11]*a+b[15],m=m||1;k[0]=(b[0]*c+b[4]*p+b[8]*a+b[12])/m;k[1]=(b[1]*c+b[5]*p+b[9]*a+b[13])/m;k[2]=(b[2]*c+b[6]*p+b[10]*a+b[14])/m;return k};a.transformMat3=function(a,b,k){var c=a[0],p=a[1];a=a[2];k[0]=c*b[0]+p*b[3]+a*b[6];k[1]=c*b[1]+p*b[4]+a*
b[7];k[2]=c*b[2]+p*b[5]+a*b[8];return k};a.transformQuat=function(a,b,k){var c=a[0],p=a[1],m=a[2];a=b[0];var z=b[1],C=b[2];b=b[3];var h=b*c+z*m-C*p,e=b*p+C*c-a*m,A=b*m+a*p-z*c,c=-a*c-z*p-C*m;k[0]=h*b+c*-a+e*-C-A*-z;k[1]=e*b+c*-z+A*-a-h*-C;k[2]=A*b+c*-C+h*-z-e*-a;return k};a.rotateX=function(a,b,k,g){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[0];p[1]=c[1]*Math.cos(k)-c[2]*Math.sin(k);p[2]=c[1]*Math.sin(k)+c[2]*Math.cos(k);g[0]=p[0]+b[0];g[1]=p[1]+b[1];g[2]=p[2]+b[2];return g};
a.rotateY=function(a,b,k,g){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[2]*Math.sin(k)+c[0]*Math.cos(k);p[1]=c[1];p[2]=c[2]*Math.cos(k)-c[0]*Math.sin(k);g[0]=p[0]+b[0];g[1]=p[1]+b[1];g[2]=p[2]+b[2];return g};a.rotateZ=function(a,b,k,g){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[0]*Math.cos(k)-c[1]*Math.sin(k);p[1]=c[0]*Math.sin(k)+c[1]*Math.cos(k);p[2]=c[2];g[0]=p[0]+b[0];g[1]=p[1]+b[1];g[2]=p[2]+b[2];return g};a.forEach=function(){var c=a.create();return function(a,
k,g,p,m,z){var b;k||(k=3);g||(g=0);for(p?b=Math.min(p*k+g,a.length):b=a.length;g<b;g+=k)c[0]=a[g],c[1]=a[g+1],c[2]=a[g+2],m(c,z,c),a[g]=c[0],a[g+1]=c[1],a[g+2]=c[2];return a}}();a.angle=function(c,b){var k=a.fromValues(c[0],c[1],c[2]),g=a.fromValues(b[0],b[1],b[2]);a.normalize(k,k);a.normalize(g,g);k=a.dot(k,g);return 1<k?0:Math.acos(k)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}};b4w.module.vec3=b4w.module.__vec3;
b4w.module.__vec4=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array,p=Math.random;a.create=function(){var a=new t(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.clone=function(a){var b=new t(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,k,g){var c=new t(4);c[0]=a;c[1]=b;c[2]=k;c[3]=g;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,b,k,g,p){p[0]=a;p[1]=b;p[2]=k;p[3]=g;return p};a.add=function(a,b,k){k[0]=
a[0]+b[0];k[1]=a[1]+b[1];k[2]=a[2]+b[2];k[3]=a[3]+b[3];return k};a.subtract=function(a,b,k){k[0]=a[0]-b[0];k[1]=a[1]-b[1];k[2]=a[2]-b[2];k[3]=a[3]-b[3];return k};a.sub=a.subtract;a.multiply=function(a,b,k){k[0]=a[0]*b[0];k[1]=a[1]*b[1];k[2]=a[2]*b[2];k[3]=a[3]*b[3];return k};a.mul=a.multiply;a.divide=function(a,b,k){k[0]=a[0]/b[0];k[1]=a[1]/b[1];k[2]=a[2]/b[2];k[3]=a[3]/b[3];return k};a.div=a.divide;a.min=function(a,b,k){k[0]=Math.min(a[0],b[0]);k[1]=Math.min(a[1],b[1]);k[2]=Math.min(a[2],b[2]);k[3]=
Math.min(a[3],b[3]);return k};a.max=function(a,b,k){k[0]=Math.max(a[0],b[0]);k[1]=Math.max(a[1],b[1]);k[2]=Math.max(a[2],b[2]);k[3]=Math.max(a[3],b[3]);return k};a.scale=function(a,b,k){k[0]=a[0]*b;k[1]=a[1]*b;k[2]=a[2]*b;k[3]=a[3]*b;return k};a.scaleAndAdd=function(a,b,k,g){g[0]=a[0]+b[0]*k;g[1]=a[1]+b[1]*k;g[2]=a[2]+b[2]*k;g[3]=a[3]+b[3]*k;return g};a.distance=function(a,b){var c=b[0]-a[0],g=b[1]-a[1],p=b[2]-a[2],m=b[3]-a[3];return Math.sqrt(c*c+g*g+p*p+m*m)};a.dist=a.distance;a.squaredDistance=
function(a,b){var c=b[0]-a[0],g=b[1]-a[1],p=b[2]-a[2],m=b[3]-a[3];return c*c+g*g+p*p+m*m};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+c*c+g*g+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1],g=a[2];a=a[3];return b*b+c*c+g*g+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=
function(a,b){var c=a[0],g=a[1],p=a[2],m=a[3],z=c*c+g*g+p*p+m*m;0<z&&(z=1/Math.sqrt(z),b[0]=c*z,b[1]=g*z,b[2]=p*z,b[3]=m*z);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,p,g){var c=a[0],k=a[1],z=a[2];a=a[3];g[0]=c+p*(b[0]-c);g[1]=k+p*(b[1]-k);g[2]=z+p*(b[2]-z);g[3]=a+p*(b[3]-a);return g};a.random=function(c,b){c=c||1;b[0]=p();b[1]=p();b[2]=p();b[3]=p();a.normalize(b,b);a.scale(b,c,b);return b};a.transformMat4=function(a,b,p){var c=a[0],k=a[1],m=
a[2];a=a[3];p[0]=b[0]*c+b[4]*k+b[8]*m+b[12]*a;p[1]=b[1]*c+b[5]*k+b[9]*m+b[13]*a;p[2]=b[2]*c+b[6]*k+b[10]*m+b[14]*a;p[3]=b[3]*c+b[7]*k+b[11]*m+b[15]*a;return p};a.transformQuat=function(a,b,p){var c=a[0],k=a[1],m=a[2],z=b[0],C=b[1],h=b[2];b=b[3];var e=b*c+C*m-h*k,A=b*k+h*c-z*m,q=b*m+z*k-C*c,c=-z*c-C*k-h*m;p[0]=e*b+c*-z+A*-h-q*-C;p[1]=A*b+c*-C+q*-z-e*-h;p[2]=q*b+c*-h+e*-C-A*-z;p[3]=a[3];return p};a.forEach=function(){var c=a.create();return function(a,p,g,M,m,z){var b;p||(p=4);g||(g=0);for(M?b=Math.min(M*
p+g,a.length):b=a.length;g<b;g+=p)c[0]=a[g],c[1]=a[g+1],c[2]=a[g+2],c[3]=a[g+3],m(c,z,c),a[g]=c[0],a[g+1]=c[1],a[g+2]=c[2],a[g+3]=c[3];return a}}();a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.vec4=b4w.module.__vec4;
b4w.module.__quat=function(a,t){var p=t("__vec3"),c=t("__vec4"),b=t("__mat3"),k="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new k(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.rotationTo=function(){var b=p.create(),c=p.fromValues(1,0,0),k=p.fromValues(0,1,0);return function(g,m,h){var e=p.dot(g,m);if(-.9999999>e)return p.cross(c,g,b),1E-6>p.length(b)&&p.cross(k,g,b),p.normalize(b,b),a.setAxisAngle(b,Math.PI,h),h;if(.9999999<e)return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h;p.cross(g,
m,b);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=1+e;return a.normalize(h,h)}}();a.setAxes=function(){var c=b.create();return function(b,g,p,k){c[0]=g[0];c[3]=g[1];c[6]=g[2];c[1]=p[0];c[4]=p[1];c[7]=p[2];c[2]=-b[0];c[5]=-b[1];c[8]=-b[2];return a.normalize(a.fromMat3(c,k),k)}}();a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=function(a,b,c){b*=.5;var g=Math.sin(b);c[0]=g*a[0];c[1]=g*a[1];c[2]=g*a[2];c[3]=Math.cos(b);
return c};a.add=c.add;a.multiply=function(a,b,c){var g=a[0],p=a[1],h=a[2];a=a[3];var e=b[0],k=b[1],m=b[2];b=b[3];c[0]=g*b+a*e+p*m-h*k;c[1]=p*b+a*k+h*e-g*m;c[2]=h*b+a*m+g*k-p*e;c[3]=a*b-g*e-p*k-h*m;return c};a.mul=a.multiply;a.scale=c.scale;a.rotateX=function(a,b,c){b*=.5;var g=a[0],p=a[1],h=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=g*b+a*e;c[1]=p*b+h*e;c[2]=h*b-p*e;c[3]=a*b-g*e;return c};a.rotateY=function(a,b,c){b*=.5;var g=a[0],p=a[1],h=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=g*
b-h*e;c[1]=p*b+a*e;c[2]=h*b+g*e;c[3]=a*b-p*e;return c};a.rotateZ=function(a,b,c){b*=.5;var g=a[0],p=a[1],h=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=g*b+p*e;c[1]=p*b-g*e;c[2]=h*b+a*e;c[3]=a*b-h*e;return c};a.calculateW=function(a,b){var c=a[0],g=a[1],p=a[2];b[0]=c;b[1]=g;b[2]=p;b[3]=Math.sqrt(Math.abs(1-c*c-g*g-p*p));return b};a.dot=c.dot;a.lerp=c.lerp;a.slerp=function(a,b,c,p){var g=a[0],h=a[1],e=a[2];a=a[3];var k=b[0],m=b[1],P=b[2];b=b[3];var O,z,u;z=g*k+h*m+e*P+a*b;0>z&&(z=-z,k=-k,m=-m,
P=-P,b=-b);1E-6<1-z?(O=Math.acos(z),u=Math.sin(O),z=Math.sin((1-c)*O)/u,c=Math.sin(c*O)/u):z=1-c;p[0]=z*g+c*k;p[1]=z*h+c*m;p[2]=z*e+c*P;p[3]=z*a+c*b;return p};a.Fea=function(){var b=a.create(),c=a.create();return function(g,p,k,h,e,A){a.slerp(g,h,e,b);a.slerp(p,k,e,c);a.slerp(b,c,2*e*(1-e),A);return A}}();a.invert=function(a,b){var c=a[0],g=a[1],p=a[2],h=a[3],e=c*c+g*g+p*p+h*h,e=e?1/e:0;b[0]=-c*e;b[1]=-g*e;b[2]=-p*e;b[3]=h*e;return b};a.conjugate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=
a[3];return b};a.length=c.length;a.len=a.length;a.squaredLength=c.squaredLength;a.sqrLen=a.squaredLength;a.normalize=c.normalize;a.fromMat3=function(a,b){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var g=0;a[4]>a[0]&&(g=1);a[8]>a[3*g+g]&&(g=2);var p=(g+1)%3,h=(g+2)%3,c=Math.sqrt(a[3*g+g]-a[3*p+p]-a[3*h+h]+1);b[g]=.5*c;c=.5/c;b[3]=(a[3*p+h]-a[3*h+p])*c;b[p]=(a[3*p+g]+a[3*g+p])*c;b[h]=(a[3*h+g]+a[3*g+h])*c}return b};a.str=
function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.quat=b4w.module.__quat;
b4w.module.__mat3=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new t(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat4=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c};a.clone=function(a){var c=new t(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.copy=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=
a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],p=a[2],g=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=p;c[7]=g}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c};a.invert=function(a,c){var b=a[0],p=a[1],g=a[2],M=a[3],m=a[4],z=a[5],C=a[6],h=a[7],e=a[8],A=e*m-z*h,q=-e*M+z*C,P=
h*M-m*C,O=b*A+p*q+g*P;if(!O)return null;O=1/O;c[0]=A*O;c[1]=(-e*p+g*h)*O;c[2]=(z*p-g*m)*O;c[3]=q*O;c[4]=(e*b-g*C)*O;c[5]=(-z*b+g*M)*O;c[6]=P*O;c[7]=(-h*b+p*C)*O;c[8]=(m*b-p*M)*O;return c};a.adjoint=function(a,c){var b=a[0],p=a[1],g=a[2],M=a[3],m=a[4],z=a[5],C=a[6],h=a[7],e=a[8];c[0]=m*e-z*h;c[1]=g*h-p*e;c[2]=p*z-g*m;c[3]=z*C-M*e;c[4]=b*e-g*C;c[5]=g*M-b*z;c[6]=M*h-m*C;c[7]=p*C-b*h;c[8]=b*m-p*M;return c};a.determinant=function(a){var c=a[3],b=a[4],p=a[5],g=a[6],M=a[7],m=a[8];return a[0]*(m*b-p*M)+a[1]*
(-m*c+p*g)+a[2]*(M*c-b*g)};a.multiply=function(a,c,b){var k=a[0],g=a[1],p=a[2],m=a[3],z=a[4],C=a[5],h=a[6],e=a[7];a=a[8];var A=c[0],q=c[1],P=c[2],O=c[3],I=c[4],u=c[5],J=c[6],x=c[7];c=c[8];b[0]=A*k+q*m+P*h;b[1]=A*g+q*z+P*e;b[2]=A*p+q*C+P*a;b[3]=O*k+I*m+u*h;b[4]=O*g+I*z+u*e;b[5]=O*p+I*C+u*a;b[6]=J*k+x*m+c*h;b[7]=J*g+x*z+c*e;b[8]=J*p+x*C+c*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var k=a[0],g=a[1],p=a[2],m=a[3],z=a[4],C=a[5],h=a[6],e=a[7];a=a[8];var A=c[0];c=c[1];b[0]=k;b[1]=g;b[2]=p;
b[3]=m;b[4]=z;b[5]=C;b[6]=A*k+c*m+h;b[7]=A*g+c*z+e;b[8]=A*p+c*C+a;return b};a.rotate=function(a,c,b){var k=a[0],g=a[1],p=a[2],m=a[3],z=a[4],C=a[5],h=a[6],e=a[7];a=a[8];var A=Math.sin(c);c=Math.cos(c);b[0]=c*k+A*m;b[1]=c*g+A*z;b[2]=c*p+A*C;b[3]=c*m-A*k;b[4]=c*z-A*g;b[5]=c*C-A*p;b[6]=h;b[7]=e;b[8]=a;return b};a.scale=function(a,c,b){var k=c[0];c=c[1];b[0]=k*a[0];b[1]=k*a[1];b[2]=k*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.q_=function(a,c){c[0]=1;c[1]=0;c[2]=
0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};a.o_=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=b;c[2]=0;c[3]=-b;c[4]=k;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.p_=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.fromMat2d=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};a.fromQuat=function(a,c){var b=a[0],k=a[1],g=a[2],p=a[3],m=b+b,z=k+k,C=g+g,b=b*m,h=k*m,k=k*z,e=g*m,A=
g*z,g=g*C,m=p*m,z=p*z,p=p*C;c[0]=1-k-g;c[3]=h-p;c[6]=e+z;c[1]=h+p;c[4]=1-b-g;c[7]=A-m;c[2]=e-z;c[5]=A+m;c[8]=1-b-k;return c};a.normalFromMat4=function(a,c){var b=a[0],k=a[1],g=a[2],p=a[3],m=a[4],z=a[5],C=a[6],h=a[7],e=a[8],A=a[9],q=a[10],P=a[11],O=a[12],I=a[13],u=a[14],J=a[15],x=b*z-k*m,D=b*C-g*m,l=b*h-p*m,v=k*C-g*z,N=k*h-p*z,E=g*h-p*C,t=e*I-A*O,L=e*u-q*O,e=e*J-P*O,y=A*u-q*I,A=A*J-P*I,q=q*J-P*u,P=x*q-D*A+l*y+v*e-N*L+E*t;if(!P)return null;P=1/P;c[0]=(z*q-C*A+h*y)*P;c[1]=(C*e-m*q-h*L)*P;c[2]=(m*A-z*
e+h*t)*P;c[3]=(g*A-k*q-p*y)*P;c[4]=(b*q-g*e+p*L)*P;c[5]=(k*e-b*A-p*t)*P;c[6]=(I*E-u*N+J*v)*P;c[7]=(u*l-O*E-J*D)*P;c[8]=(O*N-I*l+J*x)*P;return c};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.n_=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}};b4w.module.mat3=b4w.module.__mat3;
b4w.module.__mat4=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new t(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.clone=function(a){var c=new t(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.copy=function(a,c){c[0]=a[0];
c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],k=a[2],g=a[3],p=a[6],m=a[7],z=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=b;c[6]=a[9];c[7]=a[13];c[8]=k;c[9]=p;c[11]=a[14];c[12]=g;c[13]=
m;c[14]=z}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],c[14]=a[11],c[15]=a[15];return c};a.invert=function(a,c){var b=a[0],k=a[1],g=a[2],p=a[3],m=a[4],z=a[5],C=a[6],h=a[7],e=a[8],A=a[9],q=a[10],P=a[11],O=a[12],I=a[13],u=a[14],J=a[15],x=b*z-k*m,D=b*C-g*m,l=b*h-p*m,v=k*C-g*z,N=k*h-p*z,E=g*h-p*C,t=e*I-A*O,L=e*u-q*O,y=e*J-P*O,H=A*u-q*I,n=A*J-P*I,f=q*J-P*u,W=x*f-D*n+l*H+v*y-N*L+E*t;if(!W)return null;
W=1/W;c[0]=(z*f-C*n+h*H)*W;c[1]=(g*n-k*f-p*H)*W;c[2]=(I*E-u*N+J*v)*W;c[3]=(q*N-A*E-P*v)*W;c[4]=(C*y-m*f-h*L)*W;c[5]=(b*f-g*y+p*L)*W;c[6]=(u*l-O*E-J*D)*W;c[7]=(e*E-q*l+P*D)*W;c[8]=(m*n-z*y+h*t)*W;c[9]=(k*y-b*n-p*t)*W;c[10]=(O*N-I*l+J*x)*W;c[11]=(A*l-e*N-P*x)*W;c[12]=(z*L-m*H-C*t)*W;c[13]=(b*H-k*L+g*t)*W;c[14]=(I*D-O*v-u*x)*W;c[15]=(e*v-A*D+q*x)*W;return c};a.adjoint=function(a,c){var b=a[0],k=a[1],g=a[2],p=a[3],m=a[4],z=a[5],C=a[6],h=a[7],e=a[8],A=a[9],q=a[10],P=a[11],O=a[12],I=a[13],u=a[14],J=a[15];
c[0]=z*(q*J-P*u)-A*(C*J-h*u)+I*(C*P-h*q);c[1]=-(k*(q*J-P*u)-A*(g*J-p*u)+I*(g*P-p*q));c[2]=k*(C*J-h*u)-z*(g*J-p*u)+I*(g*h-p*C);c[3]=-(k*(C*P-h*q)-z*(g*P-p*q)+A*(g*h-p*C));c[4]=-(m*(q*J-P*u)-e*(C*J-h*u)+O*(C*P-h*q));c[5]=b*(q*J-P*u)-e*(g*J-p*u)+O*(g*P-p*q);c[6]=-(b*(C*J-h*u)-m*(g*J-p*u)+O*(g*h-p*C));c[7]=b*(C*P-h*q)-m*(g*P-p*q)+e*(g*h-p*C);c[8]=m*(A*J-P*I)-e*(z*J-h*I)+O*(z*P-h*A);c[9]=-(b*(A*J-P*I)-e*(k*J-p*I)+O*(k*P-p*A));c[10]=b*(z*J-h*I)-m*(k*J-p*I)+O*(k*h-p*z);c[11]=-(b*(z*P-h*A)-m*(k*P-p*A)+e*
(k*h-p*z));c[12]=-(m*(A*u-q*I)-e*(z*u-C*I)+O*(z*q-C*A));c[13]=b*(A*u-q*I)-e*(k*u-g*I)+O*(k*q-g*A);c[14]=-(b*(z*u-C*I)-m*(k*u-g*I)+O*(k*C-g*z));c[15]=b*(z*q-C*A)-m*(k*q-g*A)+e*(k*C-g*z);return c};a.determinant=function(a){var c=a[0],b=a[1],k=a[2],g=a[3],p=a[4],m=a[5],z=a[6],C=a[7],h=a[8],e=a[9],A=a[10],q=a[11],P=a[12],O=a[13],I=a[14];a=a[15];return(c*m-b*p)*(A*a-q*I)-(c*z-k*p)*(e*a-q*O)+(c*C-g*p)*(e*I-A*O)+(b*z-k*m)*(h*a-q*P)-(b*C-g*m)*(h*I-A*P)+(k*C-g*z)*(h*O-e*P)};a.multiply=function(a,c,b){var k=
a[0],g=a[1],p=a[2],m=a[3],z=a[4],C=a[5],h=a[6],e=a[7],A=a[8],q=a[9],P=a[10],O=a[11],I=a[12],u=a[13],J=a[14];a=a[15];var x=c[0],D=c[1],l=c[2],v=c[3];b[0]=x*k+D*z+l*A+v*I;b[1]=x*g+D*C+l*q+v*u;b[2]=x*p+D*h+l*P+v*J;b[3]=x*m+D*e+l*O+v*a;x=c[4];D=c[5];l=c[6];v=c[7];b[4]=x*k+D*z+l*A+v*I;b[5]=x*g+D*C+l*q+v*u;b[6]=x*p+D*h+l*P+v*J;b[7]=x*m+D*e+l*O+v*a;x=c[8];D=c[9];l=c[10];v=c[11];b[8]=x*k+D*z+l*A+v*I;b[9]=x*g+D*C+l*q+v*u;b[10]=x*p+D*h+l*P+v*J;b[11]=x*m+D*e+l*O+v*a;x=c[12];D=c[13];l=c[14];v=c[15];b[12]=x*k+
D*z+l*A+v*I;b[13]=x*g+D*C+l*q+v*u;b[14]=x*p+D*h+l*P+v*J;b[15]=x*m+D*e+l*O+v*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var k=c[0],g=c[1];c=c[2];var p,m,z,C,h,e,A,q,P,O,I,u;a===b?(b[12]=a[0]*k+a[4]*g+a[8]*c+a[12],b[13]=a[1]*k+a[5]*g+a[9]*c+a[13],b[14]=a[2]*k+a[6]*g+a[10]*c+a[14],b[15]=a[3]*k+a[7]*g+a[11]*c+a[15]):(p=a[0],m=a[1],z=a[2],C=a[3],h=a[4],e=a[5],A=a[6],q=a[7],P=a[8],O=a[9],I=a[10],u=a[11],b[0]=p,b[1]=m,b[2]=z,b[3]=C,b[4]=h,b[5]=e,b[6]=A,b[7]=q,b[8]=P,b[9]=O,b[10]=I,b[11]=u,
b[12]=p*k+h*g+P*c+a[12],b[13]=m*k+e*g+O*c+a[13],b[14]=z*k+A*g+I*c+a[14],b[15]=C*k+q*g+u*c+a[15]);return b};a.scale=function(a,c,b){var k=c[0],g=c[1];c=c[2];b[0]=a[0]*k;b[1]=a[1]*k;b[2]=a[2]*k;b[3]=a[3]*k;b[4]=a[4]*g;b[5]=a[5]*g;b[6]=a[6]*g;b[7]=a[7]*g;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.rotate=function(a,c,b,k){var g=b[0],p=b[1];b=b[2];var m=Math.sqrt(g*g+p*p+b*b),z,C,h,e,A,q,P,O,I,u,J,x,D,l,v,N,E,t,L,y;if(1E-7>Math.abs(m))return null;
m=1/m;g*=m;p*=m;b*=m;z=Math.sin(c);C=Math.cos(c);h=1-C;c=a[0];m=a[1];e=a[2];A=a[3];q=a[4];P=a[5];O=a[6];I=a[7];u=a[8];J=a[9];x=a[10];D=a[11];l=g*g*h+C;v=p*g*h+b*z;N=b*g*h-p*z;E=g*p*h-b*z;t=p*p*h+C;L=b*p*h+g*z;y=g*b*h+p*z;g=p*b*h-g*z;p=b*b*h+C;k[0]=c*l+q*v+u*N;k[1]=m*l+P*v+J*N;k[2]=e*l+O*v+x*N;k[3]=A*l+I*v+D*N;k[4]=c*E+q*t+u*L;k[5]=m*E+P*t+J*L;k[6]=e*E+O*t+x*L;k[7]=A*E+I*t+D*L;k[8]=c*y+q*g+u*p;k[9]=m*y+P*g+J*p;k[10]=e*y+O*g+x*p;k[11]=A*y+I*g+D*p;a!==k&&(k[12]=a[12],k[13]=a[13],k[14]=a[14],k[15]=a[15]);
return k};a.rotateX=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var g=a[4],p=a[5],m=a[6],z=a[7],C=a[8],h=a[9],e=a[10],A=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=g*c+C*k;b[5]=p*c+h*k;b[6]=m*c+e*k;b[7]=z*c+A*k;b[8]=C*c-g*k;b[9]=h*c-p*k;b[10]=e*c-m*k;b[11]=A*c-z*k;return b};a.rotateY=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var g=a[0],p=a[1],m=a[2],z=a[3],C=a[8],h=a[9],e=a[10],A=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*c-C*k;b[1]=p*c-h*k;b[2]=m*c-e*k;b[3]=z*c-A*k;b[8]=g*k+C*c;b[9]=p*k+h*c;b[10]=m*k+e*c;b[11]=z*k+A*c;return b};a.rotateZ=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var g=a[0],p=a[1],m=a[2],z=a[3],C=a[4],h=a[5],e=a[6],A=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*c+C*k;b[1]=p*c+h*k;b[2]=m*c+e*k;b[3]=z*c+A*k;b[4]=C*c-g*k;b[5]=h*c-p*k;b[6]=e*c-m*k;b[7]=A*c-z*k;return b};
a.q_=function(a,c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};a.p_=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=a[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=a[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.o_=function(a,c,b){var k=c[0],g=c[1];c=c[2];var p=Math.sqrt(k*k+g*g+c*c),m;if(1E-7>Math.abs(p))return null;p=1/p;k*=p;g*=p;c*=p;p=Math.sin(a);a=Math.cos(a);m=1-a;b[0]=k*k*m+a;b[1]=g*k*m+c*
p;b[2]=c*k*m-g*p;b[3]=0;b[4]=k*g*m-c*p;b[5]=g*g*m+a;b[6]=c*g*m+k*p;b[7]=0;b[8]=k*c*m+g*p;b[9]=g*c*m-k*p;b[10]=c*c*m+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.yaa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=b;c[7]=0;c[8]=0;c[9]=-b;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.zaa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=0;c[2]=-b;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=b;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=
0;c[14]=0;c[15]=1;return c};a.Aaa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=b;c[2]=0;c[3]=0;c[4]=-b;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.fromRotationTranslation=function(a,c,b){var k=a[0],g=a[1],p=a[2],m=a[3],z=k+k,C=g+g,h=p+p;a=k*z;var e=k*C,k=k*h,A=g*C,g=g*h,p=p*h,z=m*z,C=m*C,m=m*h;b[0]=1-(A+p);b[1]=e+m;b[2]=k-C;b[3]=0;b[4]=e-m;b[5]=1-(a+p);b[6]=g+z;b[7]=0;b[8]=k+C;b[9]=g-z;b[10]=1-(a+A);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=
c[2];b[15]=1;return b};a.waa=function(a,c,b,k){var g=a[0],p=a[1],m=a[2],z=a[3],C=g+g,h=p+p,e=m+m;a=g*C;var A=g*h,g=g*e,q=p*h,p=p*e,m=m*e,C=z*C,h=z*h,z=z*e,e=b[0],P=b[1];b=b[2];k[0]=(1-(q+m))*e;k[1]=(A+z)*e;k[2]=(g-h)*e;k[3]=0;k[4]=(A-z)*P;k[5]=(1-(a+m))*P;k[6]=(p+C)*P;k[7]=0;k[8]=(g+h)*b;k[9]=(p-C)*b;k[10]=(1-(a+q))*b;k[11]=0;k[12]=c[0];k[13]=c[1];k[14]=c[2];k[15]=1;return k};a.xaa=function(a,c,b,k,g){var p=a[0],m=a[1],z=a[2],C=a[3],h=p+p,e=m+m,A=z+z;a=p*h;var q=p*e,p=p*A,P=m*e,m=m*A,z=z*A,h=C*h,
e=C*e,C=C*A,A=b[0],O=b[1];b=b[2];var I=k[0],u=k[1];k=k[2];g[0]=(1-(P+z))*A;g[1]=(q+C)*A;g[2]=(p-e)*A;g[3]=0;g[4]=(q-C)*O;g[5]=(1-(a+z))*O;g[6]=(m+h)*O;g[7]=0;g[8]=(p+e)*b;g[9]=(m-h)*b;g[10]=(1-(a+P))*b;g[11]=0;g[12]=c[0]+I-(g[0]*I+g[4]*u+g[8]*k);g[13]=c[1]+u-(g[1]*I+g[5]*u+g[9]*k);g[14]=c[2]+k-(g[2]*I+g[6]*u+g[10]*k);g[15]=1;return g};a.fromQuat=function(a,c){var b=a[0],k=a[1],g=a[2],p=a[3],m=b+b,z=k+k,C=g+g,b=b*m,h=k*m,k=k*z,e=g*m,A=g*z,g=g*C,m=p*m,z=p*z,p=p*C;c[0]=1-k-g;c[1]=h+p;c[2]=e-z;c[3]=0;
c[4]=h-p;c[5]=1-b-g;c[6]=A+m;c[7]=0;c[8]=e+z;c[9]=A-m;c[10]=1-b-k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.frustum=function(a,c,b,k,g,t,m){var p=1/(c-a),C=1/(k-b),h=1/(g-t);m[0]=2*g*p;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=2*g*C;m[6]=0;m[7]=0;m[8]=(c+a)*p;m[9]=(k+b)*C;m[10]=(t+g)*h;m[11]=-1;m[12]=0;m[13]=0;m[14]=t*g*2*h;m[15]=0;return m};a.perspective=function(a,c,b,k,g){a=1/Math.tan(a/2);var p=1/(b-k);g[0]=a/c;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=a;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=(k+b)*p;g[11]=
-1;g[12]=0;g[13]=0;g[14]=2*k*b*p;g[15]=0;return g};a.lda=function(a,c,b,k){var g=Math.tan(a.upDegrees*Math.PI/180),p=Math.tan(a.downDegrees*Math.PI/180),m=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var z=2/(m+a),C=2/(g+p);k[0]=z;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=C;k[6]=0;k[7]=0;k[8]=-((m-a)*z*.5);k[9]=(g-p)*C*.5;k[10]=b/(c-b);k[11]=-1;k[12]=0;k[13]=0;k[14]=b*c/(c-b);k[15]=0;return k};a.ortho=function(a,c,b,k,g,t,m){var p=1/(a-c),C=1/(b-k),h=1/(g-t);m[0]=-2*p;m[1]=0;
m[2]=0;m[3]=0;m[4]=0;m[5]=-2*C;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=2*h;m[11]=0;m[12]=(a+c)*p;m[13]=(k+b)*C;m[14]=(t+g)*h;m[15]=1;return m};a.lookAt=function(p,c,b,k){var g,t,m,z,C,h,e,A,q=p[0],P=p[1];p=p[2];m=b[0];z=b[1];t=b[2];e=c[0];b=c[1];g=c[2];if(1E-7>Math.abs(q-e)&&1E-7>Math.abs(P-b)&&1E-7>Math.abs(p-g))return a.identity(k);c=q-e;b=P-b;e=p-g;A=1/Math.sqrt(c*c+b*b+e*e);c*=A;b*=A;e*=A;g=z*e-t*b;t=t*c-m*e;m=m*b-z*c;(A=Math.sqrt(g*g+t*t+m*m))?(A=1/A,g*=A,t*=A,m*=A):m=t=g=0;z=b*m-e*t;C=e*g-c*m;h=c*
t-b*g;(A=Math.sqrt(z*z+C*C+h*h))?(A=1/A,z*=A,C*=A,h*=A):h=C=z=0;k[0]=g;k[1]=z;k[2]=c;k[3]=0;k[4]=t;k[5]=C;k[6]=b;k[7]=0;k[8]=m;k[9]=h;k[10]=e;k[11]=0;k[12]=-(g*q+t*P+m*p);k[13]=-(z*q+C*P+h*p);k[14]=-(c*q+b*P+e*p);k[15]=1;return k};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.n_=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],
2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}};b4w.module.mat4=b4w.module.__mat4;b4w.module.__util=function(a,t){function p(a){return 0<a?1:0>a?-1:0}function c(a,b,d){var f=a[0],c=a[1];a=a[2];var e=Math.cos(f/2),w=Math.cos(c/2),g=Math.cos(a/2),r=Math.sin(f/2),c=Math.sin(c/2),h=Math.sin(a/2);if(-1<Ba.indexOf(b))var B=Math.cos((f+a)/2),l=Math.sin((f+a)/2),F=Math.cos((f-a)/2),k=Math.sin((f-a)/2),K=Math.cos((a-f)/2),n=Math.sin((a-f)/2);switch(b){case 0:d[0]=w*l;d[1]=c*F;d[2]=c*k;d[3]=w*B;break;case 1:d[0]=c*k;d[1]=w*l;d[2]=c*F;d[3]=w*B;break;case 2:d[0]=c*F;d[1]=c*k;d[2]=w*l;d[3]=
w*B;break;case 3:d[0]=w*l;d[1]=c*n;d[2]=c*K;d[3]=w*B;break;case 4:d[0]=c*K;d[1]=w*l;d[2]=c*n;d[3]=w*B;break;case 5:d[0]=c*n;d[1]=c*K;d[2]=w*l;d[3]=w*B;break;case 6:d[0]=r*w*g+e*c*h;d[1]=e*c*g-r*w*h;d[2]=e*w*h+r*c*g;d[3]=e*w*g-r*c*h;break;case 7:d[0]=e*w*h+r*c*g;d[1]=r*w*g+e*c*h;d[2]=e*c*g-r*w*h;d[3]=e*w*g-r*c*h;break;case 8:d[0]=e*c*g-r*w*h;d[1]=e*w*h+r*c*g;d[2]=r*w*g+e*c*h;d[3]=e*w*g-r*c*h;break;case 9:d[0]=r*w*g-e*c*h;d[1]=e*w*h-r*c*g;d[2]=e*c*g+r*w*h;d[3]=e*w*g+r*c*h;break;case 10:d[0]=e*c*g+r*
w*h;d[1]=r*w*g-e*c*h;d[2]=e*w*h-r*c*g;d[3]=e*w*g+r*c*h;break;case 11:d[0]=e*w*h-r*c*g,d[1]=e*c*g+r*w*h,d[2]=r*w*g-e*c*h,d[3]=e*w*g+r*c*h}return d}function b(a,b,d){var f=a[0],c=a[1],e=a[2];a=a[3];switch(b){case 0:d[0]=Math.atan2(f*c+e*a,c*a-f*e);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*c-e*a,f*e+c*a);break;case 1:d[0]=Math.atan2(f*a+c*e,e*a-f*c);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(c*e-f*a,f*c+e*a);break;case 2:d[0]=Math.atan2(f*e+c*a,f*a-c*e);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=Math.atan2(f*
e-c*a,f*a+c*e);break;case 3:d[0]=Math.atan2(f*e-c*a,f*c+e*a);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*e+c*a,e*a-f*c);break;case 4:d[0]=Math.atan2(f*c-e*a,f*a+c*e);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(f*c+e*a,f*a-c*e);break;case 5:d[0]=Math.atan2(c*e-f*a,f*e+c*a);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=Math.atan2(f*a+c*e,c*a-f*e);break;case 6:d[0]=Math.atan2(2*(f*a-c*e),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*e+c*a));d[2]=Math.atan2(2*(e*a-f*c),1-2*(c*c+e*e));break;case 7:b=f*c+e*a;.499999<b?
(d[0]=0,d[1]=Math.PI/2,d[2]=2*Math.atan2(f,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=-2*Math.atan2(f,a)):(d[0]=Math.atan2(2*(c*a-f*e),1-2*(c*c+e*e)),d[1]=Math.asin(2*(f*c+e*a)),d[2]=Math.atan2(2*(f*a-c*e),1-2*(f*f+e*e)));break;case 8:d[0]=Math.atan2(2*(e*a-f*c),1-2*(f*f+e*e));d[1]=Math.asin(2*(f*a+c*e));d[2]=Math.atan2(2*(c*a-f*e),1-2*(f*f+c*c));break;case 9:d[0]=Math.atan2(2*(f*a+c*e),1-2*(f*f+e*e));d[1]=Math.asin(2*(e*a-f*c));d[2]=Math.atan2(2*(f*e+c*a),1-2*(c*c+e*e));break;case 10:d[0]=Math.atan2(2*
(f*e+c*a),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*a-c*e));d[2]=Math.atan2(2*(f*c+e*a),1-2*(f*f+e*e));break;case 11:b=c*a-f*e,.499999<b?(d[0]=0,d[1]=Math.PI/2,d[2]=-2*Math.atan2(e,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=2*Math.atan2(e,a)):(d[0]=Math.atan2(2*(f*c+e*a),1-2*(c*c+e*e)),d[1]=Math.asin(2*(c*a-f*e)),d[2]=Math.atan2(2*(f*a+c*e),1-2*(f*f+c*c)))}return d}function k(a,b){var d=Math.cos(a[0]),f=Math.cos(a[1]),c=Math.cos(a[2]),e=Math.sin(a[0]),w=Math.sin(a[1]),g=Math.sin(a[2]),r=d*c,h=d*g,B=e*c,
l=e*g;b[0]=f*c;b[1]=f*g;b[2]=-w;b[3]=w*B-h;b[4]=w*l+r;b[5]=f*e;b[6]=w*r+l;b[7]=w*h-B;b[8]=f*d;return b}function g(a,b,f){f||(f=new Float32Array(3));d.transformQuat(b,a,f);return f}function M(a,b){b||(b=new Float32Array(4));U.fromMat4(a,ea);var d=ea[0],f=ea[3],c=ea[6],e=ea[1],w=ea[4],g=ea[7],r=ea[2],h=ea[5],B=ea[8],d=Math.sqrt(d*d+f*f+c*c)||1,e=Math.sqrt(e*e+w*w+g*g)||1,r=Math.sqrt(r*r+h*h+B*B)||1;ea[0]/=d;ea[3]/=d;ea[6]/=d;ea[1]/=e;ea[4]/=e;ea[7]/=e;ea[2]/=r;ea[5]/=r;ea[8]/=r;W.fromMat3(ea,b);W.normalize(b,
b);return b}function m(a){var b=a[0],d=a[1],f=a[2],c=a[3],e=Math.sqrt(b*b+d*d+f*f),e=1/e;a[0]=b*e;a[1]=d*e;a[2]=f*e;a[3]=c*e}function z(a,b){var d=b;switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var f in a)d=z(a[f],d);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(f=0;f<a.length;f++)d=C(a[f],d);break;case Array:for(f=0;f<a.length;f++)d=z(a[f],d);break;
case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:d=C(0,d);break;default:u("Wrong object constructor:",a.constructor)}else d=C(0,d);return d;case "number":return C(a,d);case "boolean":return C(a|0,d);case "string":return h(a,d);case "function":case "undefined":return C(0,d)}}function C(a,b){var d=b;X[0]=a;d=(d<<5)-d+fa[0];d&=d;d=(d<<5)-d+fa[1];return d&d}function h(a,b){for(var d=b,f=0;f<a.length;f++)d=(d<<
5)-d+a.charCodeAt(f),d&=d;return d}function e(a){return(34*a+1)*a%289}function A(a){return a-Math.floor(a)}function q(a){return P((34*a+5)*a)}function P(a){return a-289*Math.floor(a/289)}function O(a){return a-7*Math.floor(a/7)}function I(a,b,d){a<b&&(a=b);a>d&&(a=d);return a}function u(a){a&&H.error.apply(H,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function J(a,b,d){a-=b;d-=b;return b+(a-Math.floor(a/d)*d)}function x(a){return J(a,0,2*Math.PI)}function D(a,b){if(a&&b){var d=a instanceof Array;if(d!=b instanceof Array)return!1;var f=a.buffer instanceof ArrayBuffer&&"undefined"!==a.byteLength;if(f!=(b.buffer instanceof ArrayBuffer&&"undefined"!==b.byteLength))return!1;if(d){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(!l(a[d],b[d]))return!1}else if(f){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(a[d]!=b[d])return!1}else{switch(a.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return a==
b}for(var c in a)if(!l(a[c],b[c]))return!1;for(c in b)if(!(c in a))return!1}return!0}return!(a||b)}function l(a,b){if(typeof a!=typeof b)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==b;case "object":return D(a,b);default:return!0}}function v(a,b,f){var c=r,e=d.dot(a,b);-.9999999>e?(d.cross(F,a,c),1E-6>d.length(c)&&d.cross(sa,a,c),d.normalize(c,c),W.setAxisAngle(c,Math.PI,f)):(d.cross(a,b,c),f.set(c),f[3]=1+e,W.normalize(f,f));return f}function N(a){if(""==a)return".";
var b=0==a.indexOf("/")|0;b&&0==a.indexOf("//")&&0!=a.indexOf("///")&&(b=2);a=a.split("/");for(var d=[],f=0;f<a.length;f++){var c=a[f];""!=c&&"."!=c&&(".."!=c||!b&&!d.length||d.length&&".."==d[d.length-1]?d.push(c):d.length&&d.pop())}a=d.join("/");for(f=0;f<b;f++)a="/"+a;return a||"."}function E(a,b,f){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<c?(b[0]=Math.atan2(a[5],a[8]),b[1]=Math.atan2(-a[2],c),b[2]=Math.atan2(a[1],a[0]),f[0]=Math.atan2(-a[5],-a[8]),f[1]=Math.atan2(-a[2],-c),f[2]=Math.atan2(-a[1],
-a[0])):(b[0]=Math.atan2(-a[7],a[4]),b[1]=Math.atan2(-a[2],c),b[2]=0,d.copy(b,f))}var U=t("__mat3"),L=t("__mat4"),y=t("__math"),H=t("__print"),n=t("__tbn"),f=t("__tsr"),W=t("__quat"),d=t("__vec3"),G=t("__vec4"),B=0,S={},r=new Float32Array(3),ha=new Float32Array(3),qa=new Float32Array(3),K=new Float32Array(3),pa=new Float32Array(3),ja=new Float32Array(3),ma=new Float32Array(3),aa=new Float32Array(3),ka=new Float32Array(4),ca=new Float32Array(4),ea=new Float32Array(9),wa=new Float32Array(9),da=new Float32Array(9),
Z=new Float32Array(16),Ja=new Float32Array(16),R=W.create(),na=W.create(),X=new Float64Array(1),fa=new Uint32Array(X.buffer),ba=new Float32Array([0,0,0,1]),za=new Float32Array([0,0,0,1,0,0,0,1]),ia=new Float32Array([1,1,1]),F=new Float32Array([1,0,0]),sa=new Float32Array([0,1,0]),ya=new Float32Array([0,0,1]),Q=new Float32Array([-1,0,0]),va=new Float32Array([0,-1,0]),Ua=new Float32Array([0,0,-1]),Ba=[0,1,2,4,5],Aa=Math.floor(44488.07041494893),la=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,
1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])];a.gE=new Float32Array([0,0,0]);a.Fx=ba;a.z8=za;a.Lt=ia;a.Af=F;a.Ee=sa;a.ic=ya;a.it=Q;a.Eh=va;a.qc=Ua;a.uK=0;a.BK=1;a.CK=2;a.wK=3;a.yK=4;a.EK=5;a.vK=6;a.AK=7;a.hE=8;a.xK=9;a.zK=10;a.DK=11;a.JT=la;a.LD=1;a.Ft=2;a.yk=4;a.IJ=4;a.Of=function(a){return"undefined"!=
typeof a};a.rP=function(a,b,d){for(var f=[],c=d.length,e=0;e<c;e++){var w=d[e];w[a]==b&&f.push(w)}return f};a.Rh=function(a){return new Float32Array(a)};a.lN=function(a,b){var d=a.length,f=new Float32Array(d+b.length);f.set(a);f.set(b,d);return f};a.n5=function(a,b){var d=a.length,f=new Uint32Array(d+b.length);f.set(a);f.set(b,d);return f};a.xX=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};a.xW=function(a,b){var d=[],f={},c=b.length,e,w;for(e=0;e<c;e++)f[b[e]]=
!0;c=a.length;for(e=0;e<c;e++)w=a[e],w in f&&d.push(w);return d};a.sign=p;a.Pca=function(a,b,d){for(var f=d.length,c=0;c<f;c++)if(d[c][a]==b)return!0;return!1};a.Od=function(a,b,d){for(var f=0;f<d.length;f++){var c=d[f];if(c[a]===b)return c}return null};a.Nca=function(a,b,d,f,c){for(var e=0;e<c.length;e++){var w=c[e];if(w[a]==b&&w[d]==f)return w}return null};a.e0=function(a,b){for(var d=0;d<a.length;d++)if(a[d].uuid==b)return d;return-1};a.sW=function(a,b){for(var d=0;d<a.length;d++)if(a[d]==b)return;
a.push(b)};a.X9=function(a){for(var b=0;b<a.length-1;b++)for(var d=a[b],f=b+1;f<a.length;f++)if(d==a[f])return!1;return!0};a.i5=function(a,b,d,f){f||(f=new Float32Array(16));L.identity(f);f[12]=a;f[13]=b;f[14]=d};var Y=1;a.V2=function(){Y=(69069*Y+5)%Math.pow(2,32);return Math.round(Y/65536)%32768/32767};a.O4=function(a){Y=a};a.pi=function(a){var b=a[0]%Aa*48271-3399*Math.floor(a[0]/Aa);a[0]=0<b?b:b+2147483647;return(a[0]-1)/2147483646};a.uA=function(a,b){b||(b=[]);b[0]=5E4+Math.floor(a);return b};
a.bl=function(a,b){var d=r;d[0]=a[2];d[1]=a[1];d[2]=a[0];c(d,11,b);return b};a.pH=c;a.AQ=b;a.QZ=k;a.Uv=function(a,d){var f=b(a,11,r);d[0]=f[2];d[1]=f[1];d[2]=f[0];return d};a.Jc=g;a.vF=function(a,b,f){f||(f=new Float32Array(4));a=d.normalize(a,r);var c=d.dot(b,a);a=d.cross(b,a,ha);c=Math.acos(c);f[0]=a[0]*Math.sin(c/2);f[1]=a[1]*Math.sin(c/2);f[2]=a[2]*Math.sin(c/2);f[3]=Math.cos(c/2);return f};a.j5=function(a,b,f,c){c||(c=new Float32Array(4));d.transformQuat(f,b,c);c[3]=-d.dot(a,c)};a.vZ=function(a){var b=
f.la(a.A.D),c=r;switch(a.type){case "CAMERA":c[0]=0;c[1]=-1;c[2]=0;d.transformQuat(c,b,c);ha[0]=0;ha[1]=0;ha[2]=-1;break;case "MESH":c[0]=0;c[1]=0;c[2]=1;d.transformQuat(c,b,c);ha[0]=0;ha[1]=0;ha[2]=1;break;case "EMPTY":c[0]=0,c[1]=1,c[2]=0,d.transformQuat(c,b,c),ha[0]=0,ha[1]=1,ha[2]=0}c[1]=0;d.normalize(c,c);a=d.dot(c,ha);return Math.acos(a)*(0<-c[0]*ha[2]?-1:1)};a.iy=function(a,b,d,f){if(0!=d){f=f||[];for(var c=0;c<a.length;c++)f[c]=(1-d)*a[c]+d*b[c]}};a.GS=function(){B++;return B.toString(10)};
a.Gw=function(a){S[a]||(S[a]=0);var b=a+S[a];S[a]++;return b};a.Jj=function(){return{a_position:new Float32Array(0),a_tbn:n.create(0)}};a.Y=function(b){if(!(b instanceof Object))return b;var d;d=b.constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:d=new d(b);break;case Array:d=new d(b.length);for(var f=0;f<b.length;f++)d[f]=a.Y(b[f]);break;default:for(f in d=new d,b)b.hasOwnProperty(f)&&
(d[f]=a.Y(b[f]))}return d};a.nu=function(a){var b=a instanceof Array?[]:{},d;for(d in a)if(a.hasOwnProperty(d))if(a[d]instanceof Object){var f=a[d].constructor;switch(f){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:b[d]=new f(a[d]);break;case Array:b[d]=a[d].slice(0);break;default:b[d]=a[d]}}else b[d]=a[d];return b};a.RG=M;a.SG=function(a,b){b||(b=new Float32Array(3));b[0]=a[12];b[1]=a[13];
b[2]=a[14];return b};a.MP=function(a){ka[0]=.577350269189626;ka[1]=.577350269189626;ka[2]=.577350269189626;ka[3]=0;G.transformMat4(ka,a,ka);return G.length(ka)};a.FF=function(a,b){var d=b.left,f=b.right,c=b.top,e=b.bottom,w=b.near,g=b.far;d[0]=a[3]+a[0];d[1]=a[7]+a[4];d[2]=a[11]+a[8];d[3]=a[15]+a[12];f[0]=a[3]-a[0];f[1]=a[7]-a[4];f[2]=a[11]-a[8];f[3]=a[15]-a[12];c[0]=a[3]-a[1];c[1]=a[7]-a[5];c[2]=a[11]-a[9];c[3]=a[15]-a[13];e[0]=a[3]+a[1];e[1]=a[7]+a[5];e[2]=a[11]+a[9];e[3]=a[15]+a[13];w[0]=a[3]+
a[2];w[1]=a[7]+a[6];w[2]=a[11]+a[10];w[3]=a[15]+a[14];g[0]=a[3]-a[2];g[1]=a[7]-a[6];g[2]=a[11]-a[10];g[3]=a[15]-a[14];m(d);m(f);m(c);m(e);m(w);m(g)};a.J4=function(a,b,d){return d<-y.oi(a,b.near)||d<-y.oi(a,b.left)||d<-y.oi(a,b.right)||d<-y.oi(a,b.top)||d<-y.oi(a,b.bottom)||d<-y.oi(a,b.far)?!0:!1};a.KZ=function(a,b,f,c,e){var g=d.dot(f,b.far),w=d.dot(c,b.far),r=d.dot(e,b.far),g=Math.sqrt(g*g+w*w+r*r);if(g<-y.oi(a,b.near)||g<-y.oi(a,b.far))return!0;g=d.dot(f,b.left);w=d.dot(c,b.left);r=d.dot(e,b.left);
if(Math.sqrt(g*g+w*w+r*r)<-y.oi(a,b.left))return!0;g=d.dot(f,b.right);w=d.dot(c,b.right);r=d.dot(e,b.right);if(Math.sqrt(g*g+w*w+r*r)<-y.oi(a,b.right))return!0;g=d.dot(f,b.top);w=d.dot(c,b.top);r=d.dot(e,b.top);if(Math.sqrt(g*g+w*w+r*r)<-y.oi(a,b.top))return!0;g=d.dot(f,b.bottom);w=d.dot(c,b.bottom);r=d.dot(e,b.bottom);return Math.sqrt(g*g+w*w+r*r)<-y.oi(a,b.bottom)?!0:!1};a.$r=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var w=a[e],g=a[e+1],r=a[e+2];d[f+e]=b[0]*w+b[4]*g+b[8]*r+b[12];
d[f+e+1]=b[1]*w+b[5]*g+b[9]*r+b[13];d[f+e+2]=b[2]*w+b[6]*g+b[10]*r+b[14]}};a.qfa=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var w=a[e],g=a[e+1],r=a[e+2];d[f+e]=b[0]*w+b[4]*g+b[8]*r;d[f+e+1]=b[1]*w+b[5]*g+b[9]*r;d[f+e+2]=b[2]*w+b[6]*g+b[10]*r}return d};a.U2=function(a,b,d,f){f=f||0;for(var c=a.length,e=0;e<c;e+=4){R[0]=a[e];R[1]=a[e+1];R[2]=a[e+2];R[3]=a[e+3];var w=0<R[3];W.multiply(b,R,R);(w&&0>R[3]||!w&&0<R[3])&&G.scale(R,-1,R);d[f+e]=R[0];d[f+e+1]=R[1];d[f+e+2]=R[2];d[f+e+3]=R[3]}};
a.m6=function(a,b,d){d||(d=new Float32Array(3));ka[0]=a[0];ka[1]=a[1];ka[2]=a[2];ka[3]=0;G.transformMat4(ka,b,ka);d[0]=ka[0];d[1]=ka[1];d[2]=ka[2]};a.uaa=function(a,b){var d=a.length;d||u("flatten(): Wrong or empty array");var f=a[0].length;f||u("flatten(): Wrong or empty subarray");b||(b=new Float32Array(d*f));for(var c=0;c<d;c++)for(var e=0;e<f;e++)b[c*f+e]=a[c][e];return b};a.n6=function(a){for(var b=[],d=0;d<a.length;d+=3)b[d/3]=new Float32Array([a[d],a[d+1],a[d+2]]);return b};a.hy=function(b,
d,f,c){if(c<f)return f;var e=f+Math.floor((c-f)/2);return b[e]>d?a.hy(b,d,f,e-1):b[e]<d?a.hy(b,d,e+1,c):e};a.rm=function(a,b){for(var d=0;d<a.length;d++)if(a[d]!=b[d])return!1;return!0};a.e$=function(a,b,d){for(var f=0;f<a.length;f++)if(Math.abs(a[f]-b[f])>d)return!1;return!0};a.Jda=function(a,b,d){d||(d=new Float32Array(16));for(var f=0;12>f;f++)d[f]=a[f]*b;d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};a.l5=function(a,b,d,f,c){c||(c=new Float32Array(16));b=L.fromRotationTranslation(d,
f,Z);L.multiply(b,a,c);return c};a.Mc=function(a,b,f,c,e){e||(e=new Float32Array(3));f=L.fromRotationTranslation(f,c,Z);1!==b&&(c=L.identity(Ja),b=d.set(b,b,b,r),L.scale(c,b,c),L.multiply(f,c,f));d.transformMat4(a,f,e);return e};a.dfa=function(a,b,d,f,c){c||(c=new Float32Array(4));b=L.fromRotationTranslation(d,f,Z);G.transformMat4(a,b,c);return c};a.Dca=function(a,b,f,c,e){e||(e=new Float32Array(3));b=L.fromRotationTranslation(f,c,Z);L.invert(b,b);d.transformMat4(a,b,e);return e};a.cfa=function(a,
b,d){d||(d=new Float32Array(16));L.fromRotationTranslation(b,a,d);a=a[3];for(b=0;12>b;b++)d[b]*=a;return d};a.Xca=function(b,d,f){a.SG(b,d);d[3]=a.MP(b);M(b,f)};a.v9=function(a){for(var b=[],d=0;d<a.length;d++)b.push(a[d]);return JSON.stringify(b)};a.r3=function(a,b,f,c){c||(c=new Float32Array(3));var e=r;d.subtract(b,a,e);d.transformQuat(e,f,e);d.subtract(b,e,c)};a.MF=function(){var a=r;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),c=new Float32Array(16),
e=new Float32Array(16),w=new Float32Array(16);L.lookAt(a,[-1,0,0],[0,-1,0],b);L.scale(b,[-1,1,1],b);L.scale(b,[-1,1,-1],d);L.lookAt(a,[0,-1,0],[0,0,-1],f);L.scale(f,[1,1,-1],f);L.scale(f,[1,-1,-1],c);L.lookAt(a,[0,0,-1],[0,-1,0],e);L.scale(e,[-1,1,1],e);L.scale(e,[-1,1,-1],w);return[b,d,f,c,e,w]};a.y_=function(){var a=r;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),c=new Float32Array(16),e=new Float32Array(16),w=new Float32Array(16);L.lookAt(a,[1,0,
0],[0,-1,0],b);L.scale(b,[-1,1,-1],d);L.lookAt(a,[0,1,0],[0,0,1],f);L.scale(f,[1,-1,-1],c);L.lookAt(a,[0,0,1],[0,-1,0],e);L.scale(e,[-1,1,-1],w);return[b,d,f,c,e,w]};a.BL=function(a){return z(a,0)};a.GO=z;a.fca=h;a.P1=function(a,b){b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b};a.zQ=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=1/Math.sqrt(d),b[0]=
a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};a.trunc=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};a.bf=function(a){return a*Math.PI/180};a.IB=function(a){return 180*a/Math.PI};a.CI=function(a){var b=.366025403784439*a[0]+.366025403784439*a[1],d=Math.floor(a[0]+b),f=Math.floor(a[1]+b),c=.211324865405187*d+.211324865405187*f,b=a[0]-d+c;a=a[1]-f+c;var g=b>a?1:0,w=1-g,c=b+.211324865405187-g,r=a+.211324865405187-w,h=b+-.577350269189626,B=a+-.577350269189626,d=
d%289,f=f%289,l=Math.max(.5-(b*b+a*a),0),F=Math.max(.5-(c*c+r*r),0),k=Math.max(.5-(h*h+B*B),0),K=2*A(.024390243902439*e(e(f)+d))-1,g=2*A(.024390243902439*e(e(f+w)+d+g))-1,n=2*A(.024390243902439*e(e(f+1)+d+1))-1,d=Math.abs(K)-.5,f=Math.abs(g)-.5,w=Math.abs(n)-.5,K=K-Math.floor(K+.5),g=g-Math.floor(g+.5),n=n-Math.floor(n+.5);return 130*(l*l*l*l*(1.79284291400159-.85373472095314*(K*K+d*d))*(K*b+d*a)+F*F*F*F*(1.79284291400159-.85373472095314*(g*g+f*f))*(g*c+f*r)+k*k*k*k*(1.79284291400159-.85373472095314*
(n*n+w*w))*(n*h+w*B))};a.FL=function(a){var b=1/7,d=b/2,f=P(Math.floor(a[0])),c=P(Math.floor(a[1])),e=A(a[0]);a=A(a[1]);var w=e-.5,g=e-1.5,e=a-.5;a-=1.5;var r=q(f),h=q(f+1),B=r,f=h,r=q(r+c),h=q(h+c),B=q(B+c+1),f=q(f+c+1),c=w+.7*(O(r)*b+d),l=g+.7*(O(h)*b+d),w=w+.7*(O(B)*b+d),g=g+.7*(O(f)*b+d),r=e+.7*(O(Math.floor(r*b))*b+d),e=e+.7*(O(Math.floor(h*b))*b+d),B=a+.7*(O(Math.floor(B*b))*b+d),b=a+.7*(O(Math.floor(f*b))*b+d);return Math.min(c*c+r*r,l*l+e*e,w*w+B*B,g*g+b*b)};a.GB=function(a,b,f,c,e){e||(e=
new Float32Array(4));a=d.transformQuat(b,a,r);b=f[0];var g=f[1];f=f[2];var w=ea;w[0]=g*g+f*f;w[1]=-g*b;w[2]=-f*b;w[3]=-b*g;w[4]=b*b+f*f;w[5]=-f*g;w[6]=-b*f;w[7]=-g*f;w[8]=b*b+g*g;d.transformMat3(a,w,a);d.normalize(a,a);W.rotationTo(c,a,e);return e};a.EE=function(a,b){b||(b=new Float32Array(4));var d,f;d=W.setAxisAngle([0,0,1],Math.PI,W.create());f=W.setAxisAngle([1,0,0],Math.PI/2,W.create());W.multiply(d,f,d);W.multiply(a,d,b);return b};a.Ja=function(){B=0;S={}};a.pa=I;a.Tc=function(a,b,d,f){return f?
(d=Math.exp(-d/f),(1-d)*a+d*b):a};a.AC=function(a,b,f,c,e){e||(e=new Float32Array(a.length));if(c)for(f=Math.exp(-f/c),c=0;c<e.length;c++)e[c]=(1-f)*a[c]+f*b[c];else d.copy(a,e);return e};a.VR=function(a,b,d,f,c){c||(c=new Float32Array(a.length));f?W.slerp(a,b,Math.exp(-d/f),c):W.copy(a,c)};a.zG=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};a.Yi=function(a,b){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(b&&b==a.length||!b)return!0;return!1};
a.WE=function(a,b){var f=U.fromQuat(a,ea),c=r;c[0]=f[6];c[1]=f[7];c[2]=f[8];c=d.cross(ya,c,c);d.normalize(c,c);var e=f[4];!b&&0<e&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);ha[0]=f[0];ha[1]=f[1];ha[2]=f[2];d.normalize(ha,ha);W.rotationTo(ha,c,ca);W.multiply(ca,a,a)};a.BN=function(a,b,d,f){d=d*b-.5;f=f*b-.5;var c=d-Math.floor(d),e=f-Math.floor(f);d=Math.floor(d);f=Math.floor(f);var w=b-1;return(a[f*b+d]*(1-c)+a[f*b+Math.min(d+1,w)]*c)*(1-e)+(a[Math.min(f+1,w)*b+d]*(1-c)+a[Math.min(f+1,w)*b+Math.min(d+1,w)]*c)*
e};a.Bp=function(a){for(var b=0,d=0;3>d;d++)0<(a&1<<d)&&b++;return b};a.PQ=function(a){for(var b=[0,0,0],d=0;3>d;d++)0<(a&1<<d)&&(b[2-d]=1);return b};a.cs=function(a,b){var d=0;(1==b||2==b)&&0<(a&4)&&d++;2==b&&0<(a&2)&&d++;return d};a.Ez=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};a.kl=function(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b};a.CQ=function(a){return a.length?a[Math.floor(Math.random()*
a.length)]:null};a.LO=function(a,b,f){f||(f=new Float32Array(3));f[0]=a[0]-b[0];f[1]=a[1]-b[1];f[2]=0;d.normalize(f,f)};a.k5=function(a,b,d){var f=a[0],c=a[1];a=a[2];var e=b[0],w=b[1],g=b[2];b=b[3];var r=w*a-g*c,h=g*f-e*a,B=e*c-w*f;d[0]=f+2*r*b+2*(w*B-g*h);d[1]=c+2*h*b+2*(g*r-e*B);d[2]=a+2*B*b+2*(e*h-w*r)};a.assert=function(a){a||u("Assertion failed")};a.K=u;a.Fi=J;a.Jh=x;a.WF=function(a){return/(?:\.([^.]+))?$/.exec(a)[1]};a.T4=function(a,b){for(var d in a){var f=!0,c=a[d],e=b[d];switch(typeof c){case "number":case "string":case "boolean":f=
c==e;break;case "object":f=D(c,e)}if(!f)return!1}return!0};a.IH=function(a,b){var d=a[0],f=a[2],c=a[3];b[0]=a[1];b[1]=f;b[2]=c;b[3]=d};a.rN=function(a){a++;132651<a&&H.error("Color ID pool depleted");var b=Math.floor(a/2601);a%=2601;return new Float32Array([b/51,Math.floor(a/51)/51,a%51/51])};a.A1=function(a,b,f,c){ka.set(a);ka[3]=b;r[0]=f[3];r[1]=f[4];r[2]=f[5];ca.set(r);ca[3]=0;a=G.dot(ka,ca);if(0==a)return null;d.copy(f,r);ca.set(r);ca[3]=1;a=-G.dot(ka,ca)/a;c[0]=f[0]+a*f[3];c[1]=f[1]+a*f[4];c[2]=
f[2]+a*f[5];return c};a.m0=function(a,b,d,f){var c=b[0]-a[0],e=d[0]-a[0],w=b[1]-a[1],g=d[1]-a[1];b=b[2]-a[2];a=d[2]-a[2];f[0]=w*a-b*g;f[1]=e*b-c*a;f[2]=c*g-w*e;return f};a.h$=function(a,b){for(var d=0;d<a.length;d++)b[d]=a[d];return b};a.SQ=v;a.no=function(a,b,d){if(b==d)return d-a;a=x(a);b=x(b);d=x(d);b=2*Math.PI-b;d=x(d+b);a=x(a+b);return a>d?(d-=a,a=2*Math.PI-a,-d>a?a:d):0};a.qn=function(a,b,d){isFinite(b)&&isFinite(d)&&(a=I(a,b,d));return a*a*(3-2*a)};a.lerp=function(a,b,d){return b+a*(d-b)};
a.yW=function(a,b){for(var d=0;d<a.length;d++)for(var f=0;f<b.length;f++)if(b[f]==a[d])return!0;return!1};a.m$=function(a){for(var b=Array(a),d=0;d<a;d++)b[d]=0;return b};a.hT=function(a,b){for(var d=Math.max(a.length,b.length),f=0;f<d;f++){var c=p((f>=a.length?0:a[f])-(f>=b.length?0:b[f]));if(c)return c}return 0};a.Jn=function(a){return a.join(".")};a.fS=function(a){return a.split(".").map(function(a){return a|0})};a.aS=function(a,b){b[0]=Math.pow(a[0],2.2);b[1]=Math.pow(a[1],2.2);b[2]=Math.pow(a[2],
2.2)};a.MG=function(a,b){b[0]=Math.pow(a[0],1/2.2);b[1]=Math.pow(a[1],1/2.2);b[2]=Math.pow(a[2],1/2.2);return b};a.Bl=function(a){var b=a.split("://",2);return 1<b.length?(b[1]=N(b[1]),b.join("://")):N(a)};a.ju=function(a){return!!parseInt(a.toString(2).substr(1),2)};a.JZ=function(a,b,d,f){f[0]=a[0];f[1]=b[0];f[2]=d[0];f[3]=a[1];f[4]=b[1];f[5]=d[1];f[6]=a[2];f[7]=b[2];f[8]=d[2];return f};a.wm=function(){var a=[{}];a.length=0;return a};a.br=function(a){a=Math.round(32767.5*(a+1)-32768);return I(a?
a:0,-32768,32767)};a.RR=function(a){return I((a+32768)/32767.5-1,-1,1)};a.DS=function(a){return I(Math.round(255*a),0,255)};a.CS=function(a){return I(a/255,0,1)};a.zZ=function(a,b,f,c){var e=d.subtract(f,b,r),g=d.subtract(c,f,ha),w=d.subtract(b,c,qa);b=d.subtract(a,b,K);f=d.subtract(a,f,pa);a=d.subtract(a,c,ja);c=d.cross(e,g,ma);if(0<=d.dot(d.cross(c,e,aa),b)&&0<=d.dot(d.cross(c,g,aa),f)&&0<=d.dot(d.cross(c,w,aa),a))return w=d.length(c),g=d.dot(c,b),Math.abs(g/w);e=d.scale(e,I(d.dot(e,b)/d.length(e),
0,1),aa);b=d.length(d.subtract(b,e,aa));g=d.scale(g,I(d.dot(g,f)/d.length(g),0,1),aa);g=d.length(d.subtract(f,g,aa));w=d.scale(w,I(d.dot(w,a)/d.length(w),0,1),aa);w=d.length(d.subtract(a,w,aa));return Math.min(Math.min(b,g),w)};a.s3=function(a,b,d,f,c){if(d||f){var e=W.identity(R);d&&(b=W.setAxisAngle(b,d,na),W.multiply(e,b,e));a=W.copy(a,c);f&&(c=g(a,F,r),f=W.setAxisAngle(c,f,na),W.normalize(f,f),W.multiply(e,f,e));W.multiply(e,a,a);W.normalize(a,a)}};a.HB=function(a,b,f,c){g(b,c,ha);d.normalize(ha,
ha);d.subtract(f,a,qa);d.normalize(qa,qa);a=v(ha,qa,ka);W.multiply(a,b,b);W.normalize(b,b)};a.S2=function(a,b,f,c){b=d.transformQuat(b,a,ha);var e=d.dot(c,f);c=d.scale(c,e,qa);f=d.subtract(f,c,qa);c=W.identity(R);d.normalize(f,f);.999999>Math.abs(d.dot(b,f))&&v(b,f,c);W.normalize(c,c);W.multiply(c,a,a)};a.hM=function(a,b){for(var d=2*Math.PI,f=[],c=0;3>c;c++)f[c]=a[c]-b[c],5.1<f[c]?(a[c]-=f[c]/d*d,f[c]=a[c]-b[c]):-5.1>f[c]&&(a[c]+=-f[c]/d*d,f[c]=a[c]-b[c]);3.2<Math.abs(f[0])&&1.6>Math.abs(f[1])&&
1.6>Math.abs(f[2])&&(a[0]=0<f[0]?a[0]-d:a[0]+d);3.2<Math.abs(f[1])&&1.6>Math.abs(f[2])&&1.6>Math.abs(f[0])&&(a[1]=0<f[1]?a[1]-d:a[1]+d);3.2<Math.abs(f[2])&&1.6>Math.abs(f[0])&&1.6>Math.abs(f[1])&&(a[2]=0<f[2]?a[2]-d:a[2]+d)};a.YH=function(a,b,f){b=k(b,ea);a=k(a,wa);a=U.multiply(a,b,da);b=r;E(a,b,ha);d.copy(Math.abs(b[0])+Math.abs(b[1])+Math.abs(b[2])>Math.abs(ha[0])+Math.abs(ha[1])+Math.abs(ha[2])?ha:b,f)};a.T2=function(a,b,f){a=U.fromQuat(a,ea);var c=r;E(a,c,ha);d.copy(Math.abs(c[0]-b[0])+Math.abs(c[1]-
b[1])+Math.abs(c[2]-b[2])>Math.abs(ha[0]-b[0])+Math.abs(ha[1]-b[1])+Math.abs(ha[2]-b[2])?ha:c,f);return f}};b4w.module.__math=function(a,t){function p(a,b){for(var c=a[1],e=1,g=2;g<a.length;g++)4!=g&&8!=g&&Math.abs(a[g])>Math.abs(c)&&(c=a[g],e=g);for(var h=Math.floor(e/3),e=e%3,c=.5*Math.atan(2*c/(a[3*h+h]-a[3*e+e])),g=0;g<b.length;g++)b[g]=g&&4!=g&&8!=g?0:1;b[e+3*h]=-Math.sin(c);b[h+3*e]=Math.sin(c);b[h+3*h]=Math.cos(c);b[e+3*e]=Math.cos(c);return b}function c(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function b(a,b){for(var c=a.content[b];0<b;){var e=(b+1>>1)-1,g=a.content[e];if(a.Cp(c)<a.Cp(g))a.content[e]=
c,a.content[b]=g,b=e;else break}}function k(a,b){for(var c=a.content.length,e=a.content[b],g=a.Cp(e);;){var h=b+1<<1,k=h-1,l=null;if(k<c){var m=a.Cp(a.content[k]);m<g&&(l=k)}h<c&&a.Cp(a.content[h])<(null===l?g:m)&&(l=h);if(null!==l)a.content[b]=a.content[l],a.content[l]=e,b=l;else break}}function g(a,b,c,e){return c-M(e-a,0,c,e)+b}function M(a,b,c,e){return(a/=e)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*
a+.984375)+b}var m=t("__mat3"),z=t("__vec3"),C=new Float32Array(3),h=new Float32Array(9),e=new Float32Array(9),A=new Float32Array(9),q=new Float32Array(9);a.uba=function(a,b){b=b||new Float32Array(3);b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.vba=function(a,b){b=b||new Float32Array(3);return z.copy(a,b)};a.AR=function(a,b){z.copy(b,a)};a.oI=function(a,b){z.normalize(b,C);a[3]=C[0];a[4]=C[1];a[5]=C[2]};a.H9=function(a,b,c){c=c||new Float32Array(3);c[0]=a[0]+a[3]*b;c[1]=a[1]+a[4]*b;c[2]=a[2]+a[5]*b;
return c};a.gX=function(a,b){b[0]=0;b[1]=0;for(var c=b[2]=0;c<a.length;c+=3)b[0]+=a[c],b[1]+=a[c+1],b[2]+=a[c+2];return z.scale(b,3/a.length,b)};a.aX=function(a,b,c){for(var e=0;e<c.length;e++)c[e]=0;for(e=0;e<a.length;e+=3){var g=a[e]-b[0],h=a[e+1]-b[1],k=a[e+2]-b[2];c[0]+=g*g;c[1]+=g*h;c[2]+=g*k;c[4]+=h*h;c[5]+=h*k;c[8]+=k*k}c[3]=c[1];c[6]=c[2];c[7]=c[5];for(e=0;e<c.length;e++)c[e]*=3/a.length;return c};a.f_=function(a,b){var g=m.copy(a,h);if(5E-4>c(g))return m.identity(b);var k=p(g,e),z=m.transpose(k,
A);m.multiply(g,z,q);m.multiply(k,q,g);for(var x=m.copy(k,b),D=1;5E-4<=c(g)&&100>D;)k=p(g,e),z=m.transpose(k,A),m.multiply(g,z,q),m.multiply(k,q,g),m.multiply(k,x,x),D++;return x};a.oi=function(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]};a.MW=function(a){return{content:[],Cp:a}};a.rL=function(a,c){a.content.push(c);b(a,a.content.length-1)};a.NW=function(a){var b=a.content[0],c=a.content.pop();0<a.content.length&&(a.content[0]=c,k(a,0));return b};a.F9=function(a,c){var e=a.content.indexOf(c),g=
a.content.pop();e!==a.content.length-1&&(a.content[e]=g,a.Cp(g)<a.Cp(c)?b(e):k(e))};a.OW=function(a,c){b(a,a.content.indexOf(c))};a.Qca=function(a,b,c,e){return c*a/e+b};a.N$=function(a,b,c,e){return c*(a/=e)*a+b};a.X$=function(a,b,c,e){return-c*(a/=e)*(a-2)+b};a.J$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};a.A$=function(a,b,c,e){return c*(a/=e)*a*a+b};a.U$=function(a,b,c,e){return c*((a=a/e-1)*a*a+1)+b};a.G$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a+b:c/2*((a-=2)*a*
a+2)+b};a.O$=function(a,b,c,e){return c*(a/=e)*a*a*a+b};a.Y$=function(a,b,c,e){return-c*((a=a/e-1)*a*a*a-1)+b};a.K$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};a.P$=function(a,b,c,e){return c*(a/=e)*a*a*a*a+b};a.Z$=function(a,b,c,e){return c*((a=a/e-1)*a*a*a*a+1)+b};a.L$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};a.Q$=function(a,b,c,e){return-c*Math.cos(a/e*(Math.PI/2))+c+b};a.$$=function(a,b,c,e){return c*Math.sin(a/e*(Math.PI/2))+
b};a.M$=function(a,b,c,e){return-c/2*(Math.cos(Math.PI*a/e)-1)+b};a.C$=function(a,b,c,e){return 0==a?b:c*Math.pow(2,10*(a/e-1))+b};a.W$=function(a,b,c,e){return a==e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b};a.I$=function(a,b,c,e){return 0==a?b:a==e?b+c:1>(a/=e/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};a.z$=function(a,b,c,e){return-c*(Math.sqrt(1-(a/=e)*a)-1)+b};a.T$=function(a,b,c,e){return c*Math.sqrt(1-(a=a/e-1)*a)+b};a.F$=function(a,b,c,e){return 1>(a/=e/2)?-c/2*(Math.sqrt(1-a*a)-
1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};a.B$=function(a,b,c,e){var g=0,h=c;if(0==a)return b;if(1==(a/=e))return b+c;g||(g=.3*e);h<Math.abs(c)?(h=c,c=g/4):c=g/(2*Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,10*--a)*Math.sin(2*(a*e-c)*Math.PI/g))+b};a.V$=function(a,b,c,e){var g,h=0,k=c;if(0==a)return b;if(1==(a/=e))return b+c;h||(h=.3*e);k<Math.abs(c)?(k=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/k);return k*Math.pow(2,-10*a)*Math.sin(2*(a*e-g)*Math.PI/h)+c+b};a.H$=function(a,b,c,e){var g,h=0,k=c;if(0==a)return b;
if(2==(a/=e/2))return b+c;h||(h=.3*e*1.5);k<Math.abs(c)?(k=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/k);return 1>a?-.5*k*Math.pow(2,10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)+b:k*Math.pow(2,-10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)*.5+c+b};a.x$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*(a/=e)*a*((g+1)*a-g)+b};a.R$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*((a=a/e-1)*a*((g+1)*a+g)+1)+b};a.D$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return 1>(a/=e/2)?c/2*a*a*(((g*=1.525)+1)*a-g)+b:c/2*((a-=
2)*a*(((g*=1.525)+1)*a+g)+2)+b};a.y$=g;a.S$=M;a.E$=function(a,b,c,e){return a<e/2?.5*g(2*a,0,c,e)+b:.5*M(2*a-e,0,c,e)+.5*c+b}};b4w.module.__print=function(a){function t(a,b){var c=[];-1<a[0].indexOf("%c")?c.push(a[0].replace("%c","%c"+b+": ")):c.push(b+": "+a[0]);for(var e=1;e<a.length;e++)c.push(a[e]);return c}function p(){g++;var a=t(arguments,"B4W ERROR");console.error.apply(console,a)}function c(a){a in m||(m[a]=a,p([a]))}function b(a,b){c(a+"() is deprecated, use "+b+"() instead.")}var k=!1,g=0,M=0,m={};a.n4=function(a){k=a};a.Pd=function(){console.log.apply(console,arguments)};a.log=function(){if(k){var a=t(arguments,
"B4W LOG");console.log.apply(console,a)}};a.jM=t;a.error=p;a.va=c;a.ff=b;a.jaa=function(a,g){switch(1<g.length){case !0:c(a+"() is deprecated, use "+g.slice(0,-1).join("(), ")+"() or "+g[g.length-1]+"() instead.");break;case !1:b(a,g[0])}};a.nz=function(a,b){void 0===b?c('Config option "'+a+'" is deprecated.'):c('Config option "'+a+'" is deprecated, use "'+b+'" instead.')};a.warn=function(){M++;var a=t(arguments,"B4W WARN");console.warn.apply(console,a)};a.info=function(){var a=t(arguments,"B4W INFO");
console.info.apply(console,a)};a.UZ=function(){g++;var a=t(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};a.VZ=function(){M++;var a=t(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};a.time=function(){k&&console.time.apply(console,arguments)};a.timeEnd=function(){k&&console.timeEnd.apply(console,arguments)};a.group=function(){console.group.apply(console,arguments)};a.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};a.groupEnd=function(){console.groupEnd.apply(console,
arguments)};a.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};a.t0=function(){return M};a.T_=function(){return g};a.cM=function(){g=M=0}};b4w.module.print=b4w.module.__print;b4w.module.__tbn=function(a,t){function p(a,b,c){a=z(a,b||0,c);A.normalize(a,c);return c}function c(a,b,c){c=c||0;var e=z(a,c,v),g=A.length(e),h=I.sign(e[3])*I.sign(b[3])||1;A.scale(b,h*g,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?3.1E-5:-3.1E-5);C(a,e,c);return a}function b(a,b){return I.sign(a[4*(b||0)+3])}function k(a,b,c){c=c||0;var e=z(a,c,v);0>I.sign(e[3])*b&&A.scale(e,-1,e);C(a,e,c)}function g(a,b,c){c=c||0;var e=z(a,c,v);A.normalize(e,e);A.scale(e,b,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?e[3]+
3.1E-5:e[3]-3.1E-5);C(a,e,c)}function M(a,b){var c=z(a,b||0,v);return A.length(c)}function m(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=.5;return b}function z(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function C(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function h(a){return a.length/4}function e(a,e,l){for(var x=h(a),m=0;m<x;m++){var n=b(a,m),f=M(a,m),v=p(a,m,J),v=A.multiply(e,v,J);c(l,v,m);g(l,f,m);k(l,n,m)}}a.mK=
4;var A=t("__quat"),q=t("__tsr"),P=t("__vec3"),O=t("__vec4"),I=t("__util"),u=A.create(),J=A.create(),x=P.create(),D=P.create(),l=P.create(),v=O.create(),N=O.create();a.er=function(a,b,e){var h=!(!b||!b.length),v=a.length/3;e=e||m(v);for(var n=0;n<v;++n){var f=x;f[0]=a[3*n];f[1]=a[3*n+1];f[2]=a[3*n+2];P.normalize(f,f);if(h){var q=N;q[0]=b[4*n];q[1]=b[4*n+1];q[2]=b[4*n+2];q[3]=b[4*n+3];P.normalize(q,q);var d=P.cross(q,f,D);P.normalize(d,d);var G=A.rotationTo(I.ic,d,u),B=P.transformQuat(I.Ee,G,l),B=
A.rotationTo(B,f,J),G=A.multiply(B,G,u);A.normalize(G,G);B=.5;d=P.cross(f,d,l);if(3.1E-5<Math.abs(d[0]-q[0])||3.1E-5<Math.abs(d[1]-q[1])||3.1E-5<Math.abs(d[2]-q[2]))B=Math.acos(P.dot(f,q))/Math.PI;c(e,G,n);k(e,I.sign(q[3]),n);g(e,B,n)}else G=A.rotationTo(I.Ee,f,u),c(e,G,n)}return e};a.copy=function(a,b,c,e){if(0!==c){b=4*b||0;c=c||a.length;for(var g=0,h=0;g<4*c;g+=4,h+=4)e[h]=a[b+g],e[h+1]=a[b+g+1],e[h+2]=a[b+g+2],e[h+3]=a[b+g+3]}};a.Eb=p;a.Gc=c;a.k0=function(a,b,c){a=p(a,b,u);return P.transformQuat(I.Ee,
a,c)};a.create=m;a.identity=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=.5;return a};a.Po=z;a.mk=C;a.Pz=h;a.gH=e;a.RP=function(a,b,c){b=q.Eb(b,u);e(a,b,c)};a.slerp=function(a,e,h,l){var x=b(e,0),n=p(a,0,u),f=p(e,0,J);a=M(a);e=M(e);n=A.slerp(n,f,h,J);A.normalize(n,n);c(l,n,0);g(l,h*(a-e)+e);k(l,x,0);return l};a.fB=function(a,e,h){var l=b(e,0),x=p(a,0,u),n=p(e,0,J);a=M(a,0);e=M(e,0);x=A.multiply(x,n,u);c(h,x,0);g(h,a+e-.5);k(h,l,0);return h};a.d2=function(a,e,h){var l=b(e,
0),x=p(a,0,u),n=p(e,0,J);a=M(a);e=M(e);n=A.invert(n,J);x=A.multiply(x,n,u);c(h,x,0);g(h,a-e+.5);k(h,l,0)}};b4w.module.__container=function(a,t){var p,c,b;function k(){l.getBoundingClientRect()}function g(a,b,c,e){J.PO?(c=c.getBoundingClientRect(),e[0]=a-c.left,e[1]=b-c.top):(E.clientX=a,E.clientY=b,E.view=window,a=new MouseEvent("b4w_convert",E),c.dispatchEvent(a),e[0]=a.offsetX,e[1]=a.offsetY);return e}function M(a,b,c,e){a.style.width=c+"px";a.style.height=e+"px";b&&(b.style.width=c+"px",b.style.height=e+"px")}function m(a,b,c){var g=l,k=v;c&&M(g,k,a,b);k&&(k.width=a,k.height=b,e.Ip());c=Math.floor(a*
J.canvas_resolution_factor);b=Math.floor(b*J.canvas_resolution_factor);g.width=c;g.height=b;var k=Math.min(D.drawingBufferWidth,x.UG,x.ZG[0]),f=Math.min(D.drawingBufferHeight,x.UG,x.ZG[1]);if(c>k||b>f)A.warn("Canvas size exceeds platform limits, downscaling"),k=Math.min(k/c,k/b),c*=k,b*=k;g.width=Math.floor(c);g.height=Math.floor(b);q.JR(g.width,g.height,a?c/a:1);q.Ya()&&I.W(q.R().Dk);h.M5(g.width,g.height);h.Xi()&&(z.update(),q.update(O.Ro(),0),z.SS())}var z=t("__anchors"),C=t("__config"),h=t("__data"),
e=t("__hud"),A=t("__print"),q=t("__scenes"),P=t("__subscene"),O=t("__time"),I=t("__transform"),u=t("__util"),J=C.L,x=C.Ni,D=null,l=null,v=null,N=null,E={clientX:0,clientY:0};c=p=0;b=1;a.wh=function(a){D=a};a.Xh=function(){return l};a.GN=function(){return v};a.qe=function(){return N};a.Mf=function(a,b){a&&a.parentNode?(l=a,v=b,N=a.parentNode):u.K("canvas container is not available")};a.iv=function(a,b){b=b||"LAST";switch(b){case "FIRST":N.insertBefore(a,N.firstElementChild);break;case "JUST_BEFORE_CANVAS":N.insertBefore(a,
l);break;case "JUST_AFTER_CANVAS":l.nextElementSibling?N.insertBefore(a,l.nextElementSibling):N.appendChild(a,l);break;case "LAST":N.appendChild(a,l);break;default:A.error(b+" invalid stack order")}};a.tO=function(){return p};a.sO=function(){return c};a.$Q=function(){};a.IS=k;a.s4=function(a,e,g){p=a;c=e;b=g;k()};a.JF=function(){};a.vy=function(a,b,c){return g(a,b,l,c)};a.JN=function(a,b,c){a.constructor==MouseEvent?(c[0]=a.offsetX,c[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?a.changedTouches:
b?a.targetTouches:a.touches,g(b[0].clientX,b[0].clientY,a.target,c)):(c[0]=-1,c[1]=-1);return c};a.eM=g;a.fu=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a*b;e[1]=c*b;g&&(a=g.width/p,e[0]*=a,e[1]*=a);return e};a.q6=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a/b;e[1]=c/b;g&&(a=g.width/p,e[0]/=a,e[1]/=a)};a.bP=function(b){return b&&b.parentNode?b.parentNode==N?!0:a.bP(b.parentNode):!1};a.gP=function(){return J.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};a.i_=function(a){var b=document.getElementsByTagName("script");
a=u.Bl(a);for(var c=0;c<b.length;c++)if(b[c].src==a)return b[c];return null};a.resize=m;a.Gl=function(a){var b=N,c=l,e=b.clientWidth,b=b.clientHeight;if(a||e!=c.clientWidth||b!=c.clientHeight){a=c.width;c=c.height;M(l,v,e,b);if(q.Ya()){var g=q.R();if((g=q.dc(g,P.Gh))&&g.enable_hmd_stereo){m(a,c,!1);return}}m(e,b,!1)}};a.reset=function(){N=v=l=D=null}};b4w.module.__anchors=function(a,t){function p(){if(!n&&!L){var a=y;if(a)if("visible"==a.lastElementChild.style.visibility)c(),y=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,d=b.firstElementChild,f=Math.ceil(b.getBoundingClientRect().width),e=Math.ceil(b.getBoundingClientRect().height),g=Math.ceil(a.getBoundingClientRect().width),h=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var B=!0,l=!0;a.style.display="none";
n=!0;g!=f?D.Hi(g,f,200,function(a){a==f&&(B=!1,l||(n=!1,d.style.visibility="visible"));b.style.width=a+"px"}):(B=!1,l||(n=!1));h!=e?D.Hi(h,e,200,function(a){a==e&&(l=!1,B||(n=!1,d.style.visibility="visible"));b.style.height=a+"px"}):(l=!1,B||(n=!1))}}}function c(){var a=y.lastElementChild;y.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function b(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}
function k(a,d,f){var e=document.createElement("div"),g=document.createElement("span");f&&(e.style.maxWidth=f+"px");e.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";b(g);g.innerHTML=
a;e.style.visibility="hidden";g.style.visibility="hidden";e.appendChild(g);d.appendChild(e);q.Ih(d,function(){n||d==y||1!=d.style.opacity||L||(y&&"visible"==y.lastElementChild.style.visibility&&c(),y=d)})}function g(){for(var a=0,b=0;b<U.length;b++)U[b].Wq&&a++;f=new Float32Array(3*a)}function M(a,b){return b.depth-a.depth}function m(a,b,d){a=a.element;E.QO&&(b=Math.floor(b),d=Math.floor(d));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+d+"px, 0px)":"webkitTransform"in a.style?a.style.webkitTransform=
"translate3d("+b+"px, "+d+"px, 0px)":(a.style.left=b+"px",a.style.top=d+"px")}function z(a){for(var b=0;b<U.length;b++)if(U[b].aa==a)return!0;return!1}var C=t("__batch"),h=t("__camera"),e=t("__config"),A=t("__container"),q=t("__input"),P=t("__objects"),O=t("__obj_util"),I=t("__print"),u=t("__renderer"),J=t("__scenes"),x=t("__subscene"),D=t("__time"),l=t("__transform"),v=t("__tsr"),N=t("__vec3"),E=e.L,U=[],L=!1,y=null,H=!1,n=!1,f=new Float32Array(0),W=new Uint8Array(16),d=new Float32Array(2),G=new Float32Array(3),
B=new Float32Array(3);a.append=function(a){if(!z(a)){var d=a.anchor.Wq&&!!J.dc(J.Ui(),x.Vp),d={type:a.anchor.type,aa:a,x:0,y:0,depth:0,fo:"out",Wq:d,element:null,Hr:null,$V:a.anchor.V1,Bm:a.anchor.Bm};switch(d.type){case "ANNOTATION":var c=d.aa;a=A.qe();var f=P.Qo(c),c=c.name,e="",h=document.createElement("div"),B=h.cloneNode(!1),l=document.createElement("span");h.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";B.style.cssText+=
"background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";h.style.visibility="hidden";f&&(e=f.description||e,c=f.title||c);l.innerHTML=c;l.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
b(l);l.style.whiteSpace="nowrap";B.appendChild(l);h.appendChild(B);e&&k(e,h,d.$V);a.appendChild(h);d.element=h;break;case "ELEMENT":if(d.element=document.getElementById(a.anchor.Bm),d.element)for(f=0;f<U.length;f++)"ELEMENT"==U[f].type&&U[f].Bm==a.anchor.Bm&&(I.warn("Anchor with the id '"+a.anchor.Bm+"' already exists, making the new anchor generic."),d.type="GENERIC");else I.warn("Anchor HTML element with the id '"+a.anchor.Bm+"' was not found, making it generic."),d.type="GENERIC"}U.push(d);g();
H||(H=!0,A.qe().addEventListener("mouseup",p))}};a.remove=function(a){for(var b=0;b<U.length;b++){var d=U[b];if(d.aa==a){"ANNOTATION"==d.type&&(a=d,A.qe().removeChild(a.element));U.splice(b,1);g();break}}};a.update=function(a){for(var b=0,d=U.length;d--;){var c=U[d];if(c.Wq){var e=v.X(c.aa.A.D);f.set(e,3*b++)}var g;g=c;var e=G,B=J.Hm(J.Ui());g=v.X(g.aa.A.D);h.GH(B,g,e);g=e;e=g[0];B=g[1];g=g[2];if(a||e!=c.x||B!=c.y||g!=c.depth){switch(c.type){case "ANNOTATION":var l=e,k=B;m(c,l,k);break;case "ELEMENT":k=
c.element.getBoundingClientRect(),l=e-k.width/2,k=B-k.height/2,m(c,l,k)}c.x=e;c.y=B;c.depth=g;c.Hr&&c.Hr(e,B,c.fo,c.aa,c.element)}}U.sort(M);for(d=0;d<U.length;d++)c=U[d],"GENERIC"!=c.type&&(c.element.style.zIndex=y==c.element?U.length:d);0<b&&(a=J.dc(J.Ui(),x.Vp),b=a.kb[0].Ua[0],C.p5(b.Ha,f),x.pd(a,b))};a.SS=function(){for(var a=A.qe(),b=J.R(),b=J.dc(b,x.Gh),b=!(!b||!b.enable_hmd_stereo),f=U.length;f--;){var e=U[f],g=e.aa,h=g.A,k=e.x,n=e.y,m=e.depth,q=J.Hm(J.Ui()),v=l.Ne(g,G),q=l.Ne(q,B),v=N.dist(v,
q);(m=0>k||0>n||0>m||1<m||J.CG(g)||k>=a.clientWidth||n>=a.clientHeight)||(h.nl?(m=h.mh,h=v<h.nh?!1:m==O.$D||v<m?!0:!1):h=!0,m=!h);h=m?"out":"visible";e.Wq&&"out"!=h&&(h=e,m=J.dc(J.Ui(),x.Vp).H,v=A.fu(h.x,h.y,d,m),u.JB(m.Lf,v[0],m.height-v[1],2,2,W),h=255<=W[0]+W[4]+W[8]+W[12]?"visible":"out"!=h.fo&&W[0]+W[4]+W[8]+W[12]?h.fo:"covered");b&&(h="out");if(h!=e.fo){switch(e.type){case "ANNOTATION":case "ELEMENT":var D=e.element;D&&("out"==h?(D.style.visibility="hidden",D.children.length&&(D.children[0].style.visibility=
"hidden")):"visible"==h?(D.style.visibility="visible",D.children.length&&(D.children[0].style.visibility="visible"),D.style.opacity=1):(D.style.visibility="visible",D.style.opacity=.1,D.children.length&&(D.children[0].style.visibility="visible"),"ANNOTATION"==e.type&&1<D.children.length&&"visible"==D.lastElementChild.style.visibility&&(c(),D==y&&(y=null))))}e.fo=h;e.Hr&&e.Hr(k,n,e.fo,g,D)}}};a.B9=function(a,b){for(var d=0;d<U.length;d++)U[d].aa==a&&(U[d].Hr=b)};a.r$=function(a){for(var b=0;b<U.length;b++)U[b].aa==
a&&(U[b].Hr=null)};a.Ja=function(){for(var a=0;a<U.length;a++){var b=U[a];"ANNOTATION"==b.type&&A.qe().removeChild(b.element)}U.length=0};a.X0=z;a.Xaa=function(a){for(var b=0;b<U.length;b++)if(U[b].aa==a)return U[b].Bm;return!1};a.pause=function(){L=!0};a.resume=function(){L=!1};a.y2=function(a,b){for(var d=-1,c=0;c<U.length;c++){var f;if(f="visible"==U[c].fo){var e=U[c];if(e.element){f=Math.round(e.element.offsetWidth)||0;var g=Math.round(e.element.offsetHeight)||0}else g=f=0;var h=e.x,e=e.y;f=a>=
h&&a<=h+f&&b<e&&b>=e-g?!0:!1}if(f)if(0>d)var r=U[c].depth,d=c;else U[c].depth<r&&(d=c,r=U[c].depth)}return 0>d?null:U[d].aa}};b4w.module.__batch=function(a,t){function p(a){a={type:a,Hb:"",id:0,Me:0,ou:-1,$m:"",Uy:-1,Sq:-1,Eu:0,ng:0,zm:[],wa:[],Ig:[],jg:[],Dc:[],Tk:[],vk:null,nd:{},Gb:null,qb:X.V0(),Qe:"",Tt:[],Pa:null,ag:F.wm(),$f:!1,Xk:!1,Wy:!1,Fv:0,pp:0,DA:0,EA:0,kd:!1,bA:0,ll:0,Md:new Float32Array(3),mg:new Float32Array(16),Fk:!1,gg:!1,Bb:!1,Za:!1,sj:!1,Na:!1,Nc:!1,df:!1,Vf:!1,tf:!1,ze:!1,Te:!1,xe:!1,we:!1,Mj:ia.Zp,cg:!1,Uh:!1,Zk:!1,fh:!1,mh:ea.$D,nh:0,tl:0,ul:0,Um:b(),Le:-1,te:-1,hA:!1,lA:0,iA:0,mA:0,nA:0,kA:new Float32Array(3),
jA:new Float32Array(3),fv:!1,Ze:0,ef:0,rg:1,ri:0,ss:0,Eg:1,Ur:0,Co:0,Gk:1,Pr:0,lp:0,Rd:0,si:0,ce:new Float32Array(2),rn:new Float32Array(3),wi:new Float32Array(3),Fg:new Float32Array(3),jd:new Float32Array(4),Lo:new Float32Array(2),gp:null,Cr:null,tv:null,sv:null,Vj:!1,wireframe_edge_color:sa.create(),oj:!1,water_dynamic:!1,Ww:!1,BD:!1,CD:0,DD:0,AD:0,et:.1,hs:0,ls:0,Qi:0,wz:new Float32Array(2),vz:new Float32Array(2),Ru:new Float32Array(2),gs:new Float32Array(3),ks:new Float32Array(3),Al:null,Dl:!1,
ol:!1,fz:!1,Ra:null,zv:0,bo:null,Kv:null,bj:[],mi:[],Re:[],li:[],Cb:K.SO(),Gn:!1,Be:null,Mh:!0,TO:0,Rr:new Float32Array(3)};a.jd[3]=1;a.Za=!0;a.zv=1;a.Um.mr=-1;return a}function c(a){var d=p(a.type);d.Hb=a.Hb;d.id=a.id;d.ou=a.ou;d.$m=a.$m;d.Uy=a.Uy;d.Sq=a.Sq;d.Eu=a.Eu;d.ng=a.ng;d.zm=[];d.wa=a.wa.slice();d.Ig=a.Ig.slice();d.jg=a.jg.slice();d.Dc=a.Dc.slice();d.Tk=a.Tk.slice();d.vk=F.Y(a.vk);d.nd=F.Y(a.nd);d.Gb=a.Gb;d.qb=X.OX(a.qb);d.Qe=a.Qe;d.Tt=R.KX(a.Tt);d.Pa=a.Pa;d.$f=a.$f;d.Xk=a.Xk;d.Wy=a.Wy;d.Fv=
a.Fv;d.pp=a.pp;d.DA=a.DA;d.EA=a.EA;d.bA=a.bA;d.ll=a.ll;d.Md=a.Md;d.mg=a.mg;d.Fk=a.Fk;d.gg=a.gg;d.Bb=a.Bb;d.Za=a.Za;d.sj=a.sj;d.Na=a.Na;d.Nc=a.Nc;d.df=a.df;d.Vf=a.Vf;d.tf=a.tf;d.ze=a.ze;d.Te=a.Te;d.xe=a.xe;d.we=a.we;d.kd=a.kd;d.Mj=a.Mj;d.cg=a.cg;d.Uh=a.Uh;d.Zk=a.Zk;d.fh=a.fh;d.mh=a.mh;d.nh=a.nh;d.tl=a.tl;d.ul=a.ul;var c=a.Um,f=b();f.Nw=c.Nw;f.Gf=c.Gf;f.xy=c.xy;f.Lj=c.Lj;f.mr=c.mr;f.lr=c.lr;f.kr=c.kr;f.BB=c.BB;d.Um=f;d.Le=a.Le;d.te=a.te;d.hA=a.hA;d.lA=a.lA;d.iA=a.iA;d.mA=a.mA;d.nA=a.nA;sa.copy(a.kA,
d.kA);sa.copy(a.jA,d.jA);d.fv=a.fv;d.Ze=a.Ze;d.ef=a.ef;d.rg=a.rg;d.ri=a.ri;d.ss=a.ss;d.Eg=a.Eg;d.Ur=a.Ur;d.Co=a.Co;d.Gk=a.Gk;d.Pr=a.Pr;d.lp=a.lp;d.Rd=a.Rd;d.si=a.si;d.ce[0]=a.ce[0];d.ce[1]=a.ce[1];sa.copy(a.rn,d.rn);sa.copy(a.wi,d.wi);sa.copy(a.Fg,d.Fg);ya.copy(a.jd,d.jd);d.Lo.set(a.Lo);d.gp=F.Y(a.gp);a.Cr&&(d.Cr=new Float32Array(a.Cr),d.tv=new Float32Array(a.tv),d.sv=new Float32Array(a.sv));d.Vj=a.Vj;sa.copy(a.wireframe_edge_color,d.wireframe_edge_color);d.oj=a.oj;d.water_dynamic=a.water_dynamic;
d.Ww=a.Ww;d.BD=a.BD;d.CD=a.CD;d.DD=a.DD;d.AD=a.AD;d.et=a.et;d.hs=a.hs;d.ls=a.ls;d.Qi=a.Qi;d.wz.set(a.wz);d.vz.set(a.vz);d.Ru.set(a.Ru);sa.copy(a.gs,d.gs);sa.copy(a.ks,d.ks);d.Al=F.Y(a.Al);d.Dl=a.Dl;d.ol=a.ol;d.fz=a.fz;a.Ra&&(d.Ra=wa.fM(a.Ra));d.zv=a.zv;a.bo&&(d.bo=new Float32Array(a.bo));d.Kv=F.Y(a.Kv);d.bj=a.bj.slice();d.mi=a.mi.slice();d.Re=a.Re.slice();d.li=a.li.slice();K.qM(a.Cb,d.Cb);d.Gn=a.Gn;d.Mh=a.Mh;d.Rr=a.Rr;return d}function b(){return{Nw:!1,Gf:0,Lj:0,mr:0,lr:0,kr:0,BB:0,xy:1}}function k(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.Hb=
a.Bb?a.sj?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.Hb=a.tf?"CAST":"RECEIVE";break;case "COLOR_ID":a.Hb=a.sj?"COLOR_ID_XRAY":"COLOR_ID"}}function g(a,b,d){var c=[],e=a.Oa,w=m(d,b,!b.cf,!1),g=a.data,h=e.Ec,r=Array(h.length),B=Array(h.length),l=[],k=na.Vb(d,fa.Nb),K=!1;k&&(K=k.ip.length?!0:!1);for(var G=0;G<w.length;G++)for(var x=w[G],q=0;q<h.length;q++){var u=h[q];if(!qa(e,q)&&!ia.FO(g,q))if("PHYSICS"==x&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)l.push(ia.qz(g,q,[],b.Aj,{},null));else if(!u.Zj||
K){var S=p(x);"MAIN"==x?r[q]=S:"DEBUG_VIEW"==x&&(B[q]=S);S.ou=a.b4w_cluster_data.cluster_id;if(f(S,u)&&z(S,u,g)){"SHADOW"==x&&r[q]&&(S.Nc=r[q].Nc);S.Mj=b.$f||b.df?ia.dx:ia.Zp;v(S,b);U(S,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==S.type)S.$m=ha(S,b,a.uuid);S.Zk=a.b4w_do_not_cull;"MAIN"==S.type&&(S.fh=a.b4w_caustics);y(S,"DISABLE_FOG",("COLOR_ID"!=x&&"SHADOW"!=x&&a.b4w_disable_fogging)|0);var A=ia.qz(g,q,S.Tk,b.Aj,S.nd,S.vk);!u.xf||"a_shade_tangs"in A.sa[0]||(y(S,"CALC_TBN",1),L(S,"a_tbn"));
u.Zj&&(A=wa.M2(A));W(S);c.push({Ha:S,sh:b,gy:b,Be:A,ii:[u.name],Ue:[a]})}}}if(l.length){S=p("PHYSICS");S.Hb="NAVMESH";S.$m=ha(S,b,a.uuid);for(var A=ia.jS(l),Da=[],G=0;G<h.length;G++)Da.push(h[G].name);W(S);c.push({Ha:S,sh:b,gy:b,Be:A,ii:Da,Ue:[a]})}for(G=0;G<B.length;G++)B[G]&&(B[G].Sq=r[G].id,W(B[G]));var D=a.particle_systems;if(0<D.length){for(var Aa=!1,H=!1,G=0;G<D.length;G++){var E=D[G],C=E.settings;C.use_render_emitter&&c.length&&(Aa=!0);"HAIR"!=C.type||"OBJECT"!=C.render_type&&"GROUP"!=C.render_type&&
E.transforms.length||(H=!0);if(Aa&&H)break}var Z;if(c.length)Z=c[0];else{var ua=p("TMP");U(ua,D);var R=ia.qz(g,0,ua.Tk,b.Aj,ua.nd,ua.vk);Z={Ha:ua,Be:R}}var N=Z,O=N.Ha.nd,va;if(H){var ca;if(1<h.length){for(var P={},t=0;t<D.length;t++){var la=D[t].settings;if("HAIR"==la.type&&("OBJECT"==la.render_type||"GROUP"==la.render_type)){var I=la.b4w_vcol_from_name,pa=la.b4w_vcol_to_name;""!==I&&""!==pa&&(P[I]=F.Y(O[I]))}}"a_bending_col_main"in O&&(P.a_bending_col_main=F.Y(O.a_bending_col_main));"a_bending_col_detail"in
O&&(P.a_bending_col_detail=F.Y(O.a_bending_col_detail));ca=ia.hN(g,[],P)}else ca=N.Be;va=ca}else va=null;for(var J=va,aa=a.Oa,Y=[],ka=a.particle_systems,ya=a.data,M=0;M<ka.length;M++){var da=ka[M],Ba=da.settings;if(Ba.count)if("EMITTER"==Ba.type){if("DYNAMIC"==b.type){var ma=p("PARTICLES");ma.Cb.Ef=b.Ca;ma.Cb.ig=b.Kb;ma.Cb.Ff=b.Bc;var Ua,xa=da.settings.material-1;xa>=aa.Ec.length&&(ja.warn('Wrong material used for rendering particle system "'+da.name+'"'),xa=0);Ua=xa;var ba=aa.Ec[Ua];if(!qa(aa,Ua)&&
("HALO"===da.settings.render_type&&"HALO"==ba.type&&(ma.fv=!0),z(ma,ba,ya))){var V=ma,Oa=aa,wb=da.settings;switch(wb.b4w_billboard_align){case "VIEW":y(V,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":y(V,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":y(V,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":y(V,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:F.K("Wrong billboard align value")}y(V,"BILLBOARD",0);var id=wb.b4w_enable_soft_particles&&ea.OL(Oa,wb);y(V,"SOFT_PARTICLES",
0<wb.b4w_particles_softness&&id&&Q.Yy?1:0);y(V,"SOFT_STRENGTH",X.fa(wb.b4w_particles_softness));X.ya(V.qb,"WORLD_SPACE","WORLD"==wb.b4w_coordinate_system?1:0);ma.df=!0;ma.Zk=a.b4w_do_not_cull;ma.$m=ha(ma,b,aa.name+"_"+Ba.uuid);wa.uY(ma,da,ba);var Kc=wa.v_(ma,ya,da,aa.A);wa.S5(Kc,ma,Ba.count);wa.Q5(aa);v(ma,aa.A);W(ma);Y.push({Ha:ma,sh:b,gy:b,Be:Kc,ii:[ba.name],Ue:[a]})}}}else if("HAIR"==Ba.type){var bb=F.uA(da.seed),Ab=Ja.PL(Q.OG)&&!Ba.b4w_initial_rand_rotation&&!Ba.b4w_hair_billboard,jb=4;Ab&&(jb=
8);if(da.transforms.length)var Tb=da.transforms;else for(var sb=ia.OF(J,Ba.count,!1,bb),Tb=new Float32Array(sb.length*jb),ra=0;ra<sb.length;ra++){var mc=.75+.5*F.pi(bb);Tb[ra*jb]=sb[ra][0];Tb[ra*jb+1]=sb[ra][1];Tb[ra*jb+2]=sb[ra][2];Tb[ra*jb+3]=mc;Ab&&(Tb[ra*jb+4]=1,Tb[ra*jb+5]=0,Tb[ra*jb+6]=0,Tb[ra*jb+7]=0)}var Ya=na.Vb(d,fa.zk)?!0:!1;if("OBJECT"==Ba.render_type){var Fa=[m(d,Ba.dupli_object.Oa.A,!b.cf,!0)],Lc=n(a,b,O,J,[Ba.dupli_object],Fa,[Tb],Ba,da,Ya,bb,!1);Y.push.apply(Y,Lc)}else if("GROUP"==
Ba.render_type){for(var Uc=Ba.dupli_group.objects,Fa=[],ra=0;ra<Uc.length;ra++){var jd=m(d,Uc[ra].Oa.A,!b.cf,!0);Fa.push(jd)}for(var kd=!1,ad=[],ra=0;ra<Uc.length;ra++)ad.push(Uc[ra].Oa);if(Ba.use_whole_group){for(var Ec,Zb=Tb,bd=ad,Vc=Ab,cd=jb,Bb={},Gb=new Float32Array([0,0,0,1]),xb=0;xb<Zb.length;xb+=cd)for(var nb=0;nb<bd.length;nb++){var Kb=sa.create(),ld=za.fe(bd[nb].A.D),Mc=za.X(bd[nb].A.D);sa.scale(Mc,ld,Kb);var hb=sa.clone([Zb[xb],Zb[xb+1],Zb[xb+2]]);Bb[nb]||(Bb[nb]=new Float32Array(Zb.length));
Vc&&(Bb[nb][xb+4]=Gb[0]=Zb[xb+4],Bb[nb][xb+5]=Gb[1]=Zb[xb+5],Bb[nb][xb+6]=Gb[2]=Zb[xb+6],Bb[nb][xb+7]=Gb[3]=Zb[xb+7],F.IH(Gb,Gb),F.k5(Kb,Gb,Kb));sa.add(hb,Kb,hb);Bb[nb][xb]=hb[0];Bb[nb][xb+1]=hb[1];Bb[nb][xb+2]=hb[2];Bb[nb][xb+3]=Zb[xb+3]}Ec=Bb;kd=!0}else{var Nc;if(Ba.use_group_count){for(var bc=Tb,Fc=ad,cc=Ba.dupli_weights,Wc=bb,Ub=Ab,Ob=jb,Cb={},xc=[],kb=0;kb<Fc.length;kb++)for(var Gc=Fc[kb],nc=Gc.Rf||Gc.name,Oc=0;Oc<cc.length;Oc++){var Hb=cc[Oc];nc==Hb.name&&xc.push(Hb)}cc.length!=xc.length&&ja.error("dupli weights match failed");
for(kb=0;kb<bc.length;kb+=Ob){for(var Lb,yc=xc,oc=[0],tb=0;tb<yc.length;tb++)oc[tb+1]=oc[tb]+yc[tb].count;for(var Pb=oc[oc.length-1]*F.pi(Wc),yb=0,tb=0;tb<oc.length;tb++)if(Pb>=oc[tb]&&Pb<oc[tb+1]){yb=tb;break}Lb=yb;Cb[Lb]=Cb[Lb]||[];Cb[Lb].push(bc[kb],bc[kb+1],bc[kb+2],bc[kb+3]);Ub&&Cb[Lb].push(bc[kb+4],bc[kb+5],bc[kb+6],bc[kb+7])}for(Lb in Cb)Cb[Lb]=new Float32Array(Cb[Lb]);Nc=Cb}else{for(var Db=Tb,Ra=bb,pc=Ab,Qb=jb,dc=ad.length,db={},Vb=0;Vb<Db.length;Vb+=Qb){var zc=Math.floor(dc*F.pi(Ra));db[zc]=
db[zc]||[];db[zc].push(Db[Vb],Db[Vb+1],Db[Vb+2],Db[Vb+3]);pc&&db[zc].push(Db[Vb+4],Db[Vb+5],Db[Vb+6],Db[Vb+7])}for(zc in db)db[zc]=new Float32Array(db[zc]);Nc=db}Ec=Nc}Lc=n(a,b,O,J,Uc,Fa,Ec,Ba,da,Ya,bb,kd);Y.push.apply(Y,Lc)}"INSTANCE"==Ba.b4w_wind_bend_inheritance&&aa.A.zf&&ja.warn('Emitter object "'+aa.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else F.K("Unknown particle settings type")}Aa?
c.push.apply(c,Y):c=Y}return c}function M(a){for(var b=[],c=[],f={},e=0;e<a.length;e++){var w=a[e].Ha,g=null;if(w.id in f){var h=f[w.id],r=c[h].Ha;d(w,function(a){d(r,function(b){F.T4(a,b)&&1!=a.TO&&(g=c[h])})});if(!g){do w.id++;while(f[w.id])}}g||(g={Ha:w,fQ:[],kL:[],lS:[],Ue:[],GQ:[],ii:[]},f[w.id]=c.length,c.push(g));if(a[e].Be&&a[e].Be.hb){g.fQ.push(a[e].sh);g.kL.push(a[e].gy);g.lS.push(a[e].Be);for(var B=0;B<a[e].Ue.length;B++)w=a[e].Ue[B],-1==g.GQ.indexOf(w.uuid)&&(g.Ue.push(w),g.GQ.push(w.uuid));
for(B=0;B<a[e].ii.length;B++)w=a[e].ii[B],-1==g.ii.indexOf(w)&&g.ii.push(w)}g.ii.sort()}for(e=0;e<c.length;e++){var w=c[e].Ha,l=c[e].fQ,k=c[e].kL,n=c[e].lS;a="DYNAMIC"==k[0].type||"COLOR_ID"==w.type?k[0]:ea.QE(k[0]);if("STATIC"==a.type&&"COLOR_ID"!=w.type)for(B=0;B<l.length;B++){var G=l[B],x=k[B],f=n[B],m=za.identity(ra);G.Kh&&!G.Xt?(G=za.hr(G.D,Oa),za.mn(G,m)):za.copy(G.D,m);x.Om?f.Nf||(x.Kh?ia.W4(f,m):ia.KI(f,m)):ia.KI(f,m);if(x.Om)y(w,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].Ue.length){G={};if(x.zf||
x.Kh)G.au_center_pos=[m[0],m[1],m[2]];x.zf&&(G.au_wind_bending_amp=[x.Og],G.au_wind_bending_freq=[x.Pg],G.au_detail_bending_amp=[x.pg],G.au_detail_bending_freq=[x.qg],G.au_branch_bending_amp=[x.kg]);ia.V4(f,G);y(w,"AU_QUALIFIER","GLSL_IN")}else a.sy.set(m.subarray(0,3)),y(w,"AU_QUALIFIER","uniform")}if(0==n.length)f=ia.fi(F.Gw("%empty"));else if(1==n.length)f=n[0];else{f=[];for(B=0;B<n.length;B++)ia.d1(n[B])||f.push(B);if(f.length<n.length)for(B=0;B<f.length;B++)ia.OC(n[f[B]]);f=ia.jS(n)}if("STATIC"==
a.type){if("COLOR_ID"!=w.type){n=[];for(B=0;B<c[e].Ue.length;B++)K.GF(c[e].Ue[B].Oa.A.lL,n);K.sE(n,0,n.length,a.Ki);K.Hj(a.Ki,a.Ca);a.nm=K.Fy(F.Rh(n),!0);K.Nq(a.nm,a.Kb);a.$e=K.Hy(a.nm);K.um(a.$e,a.Bc)}a.nl&&(B=c[e].Ue[0].b4w_cluster_data,B.cluster_center?a.Av.set(B.cluster_center):a.Av.set(a.$e.V))}"PARTICLES"!=w.type&&(B=f.Cd,a.Kh?(K.Hj(a.Ca,w.Cb.Ef),K.Nq(a.Kb,w.Cb.ig),K.um(a.Bc,w.Cb.Ff),w.Gn=!1):(K.Hj(B.Ca,w.Cb.Ef),K.Nq(B.Kb,w.Cb.ig),a.Bc.pb<B.Bc.pb?"STATIC"==a.type&&"COLOR_ID"!=w.type?K.um(a.$e,
w.Cb.Ff):K.um(a.Bc,w.Cb.Ff):K.um(B.Bc,w.Cb.Ff),w.Gn=K.YO(w.Cb.ig,w.Cb.Ff)));b.push({Ha:w,A:a,Be:f,ii:c[e].ii,Ue:c[e].Ue})}return b}function m(a,b,d,c){var f=[];c||(b.kn&&na.Vb(a,fa.Bf)||b.zd&&na.Vb(a,fa.Ci))&&f.push("COLOR_ID");d&&(f.push("MAIN"),f.push("NODES_GLOW"),na.Vb(a,fa.Bi)&&f.push("DEBUG_VIEW"),na.Vb(a,fa.Wg)&&f.push("SHADOW"),na.Vb(a,fa.zk)&&f.push("GRASS_MAP"));f.push("PHYSICS");if(b.tf||b.xe)for(a=null,b.tf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.xe&&(b=["COLOR_ID",
"PHYSICS","SHADOW","DEBUG_VIEW"],a?a=F.xW(a,b):a=b),b=a,a=0;a<b.length;a++)d=f.indexOf(b[a]),-1!==d&&f.splice(d,1);return f}function z(a,b,d){var c;switch(a.type){case "MAIN":if(b.cf)c=!1;else{if(b.Ch&&"HALO"!=b.type)I(a,b,d,"MAIN");else{e(a,b);a.Na=b.Na;a.sj=b.Fl&&"OPAQUE"!=b.tb&&"CLIP"!=b.tb&&"ALPHA_ANTIALIASING"!=b.tb;a.Rd=b.Rd;a.wi.set([1,1,1]);var f=b.Ah;a.jd.set(b.jd);a.jd[3]=b.alpha;if(b.Zj){B(a,"lens_flares.glslv","lens_flares.glslf");L(a,"a_position");L(a,"a_texcoord");var w=ba.hf(f[0]),
g=f[0].texture;S(a,w,"u_sampler",g.name)}else{B(a,"main.glslv","main_stack.glslf");b.Nc||(d=ca.cF(b.dd,{Nc:b.Nc,Jf:b.Jf,Xf:b.Xf,xf:b.xf}),a.qb.Qf=ca.su(d));var r=A("use_map_color_diffuse",f);c=A("use_map_color_spec",f);var k=A("use_map_normal",f),K=A("use_map_mirror",f),n=A("use_stencil",f);d=r[0];c=c[0];k=k[0];K=K[0];r=r[1];f=n[0]&&A("use_rgb_to_intensity",f)[0];if(d){g=d.texture;switch(d.blend_type){case "MIX":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":y(a,"TEXTURE_BLEND_TYPE",
"TEXTURE_BLEND_TYPE_MULTIPLY")}w=ba.hf(d);S(a,w,"u_colormap0",g.name);a.Co=d.diffuse_color_factor;d.use_map_alpha?a.Gk=d.alpha_factor:a.Gk=0;a.wi.set(d.scale)}n=d&&d==c;c&&(n||(g=c.texture,w=ba.hf(c),S(a,w,"u_specmap0",g.name)),a.ss=c.specular_color_factor);if(k&&(g=k.texture,L(a,"a_tbn"),w=ba.hf(k),S(a,w,"u_normalmap0",g.name),a.Pr=k.normal_factor,g.b4w_use_map_parallax&&Q.uB)){var w=X.fa(g.b4w_parallax_steps),G=X.fa(g.b4w_parallax_lod_dist);y(a,"PARALLAX",1);y(a,"PARALLAX_STEPS",w);y(a,"PARALLAX_LOD_DIST",
G);a.Ur=g.b4w_parallax_scale}K&&(g=K.texture,w=ba.hf(K),S(a,w,"u_mirrormap",g.name),a.lp=K.mirror_factor);if(K=d&&r&&f?1:0)w=ba.hf(r),g=r.texture,S(a,w,"u_colormap1",g.name),w=ba.hf(f),g=f.texture,S(a,w,"u_stencil0",g.name);(g=d||c||k)&&a.wi.set(g.scale);y(a,"TEXTURE_SPEC",void 0==c?0:1);y(a,"ALPHA_AS_SPEC",n?1:0);y(a,"TEXTURE_STENCIL_ALPHA_MASK",K);L(a,"a_position");L(a,"a_tbn");(d||c||k)&&L(a,"a_texcoord");if(b.ma.$j){a.oj=!0;a.water_dynamic=b.ma.ea;b.ma.Wf&&!a.Bb?(ja.warn('Material: "'+b.name+
'" is opaque.',"Disabling water shore smoothing."),a.Ww=!1):a.Ww="REFLECT"!=a.Hb?b.ma.Wf:!1;B(a,"water.glslv","water.glslf");K=ca.cF(b.dd,{Nc:!1,Jf:b.Jf,Xf:b.Xf,xf:b.xf});a.qb.Qf=ca.su(K);L(a,"a_position");Q.rT?(L(a,"a_polyindex"),a.Za=!0,sa.set(0,0,0,a.wireframe_edge_color),ma.gG()?y(a,"DEBUG_WIREFRAME",1):y(a,"DEBUG_WIREFRAME",2)):y(a,"DEBUG_WIREFRAME",0);n=b.Ah;K=A("use_map_normal",n);w=A("use_map_mirror",n)[0];K.length&&(g=K[0].texture,S(a,ba.hf(K[0]),"u_normalmap0",g.name),a.et=b.ma.jB);y(a,
"NUM_NORMALMAPS",K.length);a.Al=Array(K.length);for(g=0;g<K.length;g++)a.Al[g]=new Float32Array(2),a.Al[g].set([K[g].scale[0],K[g].scale[1]]);w&&(G=ba.hf(w),g=w.texture,S(a,G,"u_mirrormap",g.name),a.lp=w.mirror_factor);w=null;if(Q.Qu)for(g=0;g<n.length;g++){var x=n[g];if(!0===x.texture.b4w_water_foam){w=x;break}}w&&(y(a,"FOAM",1),G=ba.hf(w),g=w.texture,S(a,G,"u_foam",g.name),a.Qi=b.ma.Qi,a.wz.set(g.b4w_foam_uv_freq),a.vz.set(g.b4w_foam_uv_magnitude),a.Ru[0]=w.scale[0],a.Ru[1]=w.scale[1]);for(g=0;g<
n.length;g++)if(x=n[g],!0===x.texture.b4w_shore_dist_map){var m=x;break}m&&Q.Ux&&(n=ba.hf(m),g=m.texture,S(a,n,"u_shore_dist_map",g.name),y(a,"SHORE_PARAMS",1),m=x.texture.b4w_shore_boundings,y(a,"MAX_SHORE_DIST",X.fa(x.texture.b4w_max_shore_dist)),y(a,"SHORE_MAP_SIZE_X",X.fa(m[0]-m[1])),y(a,"SHORE_MAP_SIZE_Y",X.fa(m[2]-m[3])),y(a,"SHORE_MAP_CENTER_X",X.fa((m[0]+m[1])/2)),y(a,"SHORE_MAP_CENTER_Y",X.fa((m[2]+m[3])/2)));b.ma.yA?(y(a,"GENERATED_MESH",1),a.BD=!0,a.CD=b.ma.kB,a.DD=b.ma.lB,a.AD=b.ma.$y):
(L(a,"a_tbn"),(w||K.length)&&L(a,"a_texcoord"),y(a,"GENERATED_MESH",0));if(b.ma.ea){var x=X.fa(b.ma.dst_noise_scale0),m=X.fa(b.ma.dst_noise_scale1),K=X.fa(b.ma.dst_noise_freq0),n=X.fa(b.ma.dst_noise_freq1),g=X.fa(b.ma.dir_min_shore_fac),w=X.fa(b.ma.dir_freq),G=X.fa(b.ma.dir_noise_scale),v=X.fa(b.ma.dir_noise_freq),u=X.fa(b.ma.dir_min_noise_fac),D=X.fa(b.ma.dst_min_fac),ia=X.fa(b.ma.waves_hor_fac);y(a,"DST_NOISE_SCALE_0",x);y(a,"DST_NOISE_SCALE_1",m);y(a,"DST_NOISE_FREQ_0",K);y(a,"DST_NOISE_FREQ_1",
n);y(a,"DIR_MIN_SHR_FAC",g);y(a,"DIR_FREQ",w);y(a,"DIR_NOISE_SCALE",G);y(a,"DIR_NOISE_FREQ",v);y(a,"DIR_MIN_NOISE_FAC",u);y(a,"DST_MIN_FAC",D);y(a,"WAVES_HOR_FAC",ia)}P(a,b);O(a,b);a.gs.set(b.ma.hC);a.ks.set(b.ma.kC);a.hs=b.ma.iC;a.ls=b.ma.lC;y(a,"ABSORB",X.fa(b.ma.Tx));y(a,"SSS_STRENGTH",X.fa(b.ma.IC));y(a,"SSS_WIDTH",X.fa(b.ma.JC))}"HALO"===b.type&&(B(a,"halo.glslv","halo.glslf"),C(a,b),a.Tk=["a_position"]);b.xf&&(y(a,"USE_TBN_SHADING",1),L(a,"a_shade_tangs"));y(a,"TEXCOORD",0);y(a,"NORMAL_TEXCOORD",
0);d&&h(a,d,"TEXTURE_COLOR0_CO");r&&h(a,r,"TEXTURE_COLOR1_CO");f&&h(a,f,"TEXTURE_STENCIL_ALPHA_MASK_CO");c&&h(a,c,"TEXTURE_SPEC_CO");k&&h(a,k,"TEXTURE_NORM_CO");y(a,"SHADELESS",b.Nc?1:0);a.Nc=b.Nc}y(a,"ALPHA","OPAQUE"===b.tb?0:1);y(a,"ALPHA_CLIP","CLIP"===b.tb?1:0);y(a,"DOUBLE_SIDED_LIGHTING",b.Os?1:0);b.Ow?(y(a,"VERTEX_COLOR",1),L(a,"a_color")):y(a,"VERTEX_COLOR",0);a.Ze=b.Ze;a.rg=b.rg;a.ef=b.ef;a.Fg.set(b.Fg);a.Eg=b.Eg;P(a,b);O(a,b);b.qv?y(a,"WETTABLE",1):y(a,"WETTABLE",0);q(a,b);b.ep&&!a.Bb?(ja.warn('Material "'+
b.name+'" is not blend. Disabling refractions.'),a.Dl=!1):a.Dl=b.ep;a.si=b.si}c=!0}break;case "NODES_GLOW":c=I(a,b,d,"GLOW");break;case "SHADOW":if(b.Zj||b.ma.$j||b.cf||"HALO"==b.type)c=!1;else if(e(a,b),a.Na=b.Na,a.Bb)c=!1;else{!b.Ch||"CLIP"!=b.tb&&"ALPHA_ANTIALIASING"!=b.tb?B(a,"shadow.glslv","shadow.glslf"):I(a,b,d,"SHADOW");a.Za=a.Za&&!(Q.fw&&"ALPHA_ANTIALIASING"==b.tb);ya.set(0,0,0,b.alpha,a.jd);L(a,"a_position");L(a,"a_tbn");y(a,"ALPHA","OPAQUE"===b.tb?0:1);a.wi.set([1,1,1]);d=A("use_map_color_diffuse",
b.Ah)[0];if(!d||"CLIP"!=b.tb&&"ALPHA_ANTIALIASING"!=b.tb)y(a,"TEXTURE_COLOR",0);else{switch(d.blend_type){case "MIX":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.wi.set(d.scale);y(a,"TEXTURE_COLOR",1);L(a,"a_texcoord");b=ba.hf(d);d=d.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=b.source&&"CANVAS"!=b.source&&"NONE"!=b.source||S(a,b,"u_colormap0",d.name)}c=!0}break;case "PHYSICS":d=b.Sd;b=b.ma;d.Ns?(a.uk=d.uk,a.Tb=
d.Tb,a.Fj=d.Fj,a.Ej=d.Ej,a.Gj=d.Gj,a.Vh=d.Vh,a.Qh=d.Qh,c=!0):b.$j?(a.oj=!0,a.x6=b.ea,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,a.dir_min_noise_fac=b.dir_min_noise_fac,a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,c=!0):c=!1;break;case "COLOR_ID":if(b.Zj||
"HALO"==b.type)c=!1;else{k=c=b.tb;"ALPHA_ANTIALIASING"==k&&(k="CLIP",b.tb="CLIP");e(a,b);a.Na=b.Na;a.cg=!1;a.Za=!0;a.Bb=!1;a.sj=b.Fl&&"OPAQUE"!=k&&"CLIP"!=k;b.Ch&&"CLIP"==k?I(a,b,d,"COLOR_ID"):B(a,"color_id.glslv","color_id.glslf");ya.set(0,0,0,b.alpha,a.jd);L(a,"a_position");y(a,"ALPHA","OPAQUE"===k?0:1);a.wi.set([1,1,1]);d=A("use_map_color_diffuse",b.Ah)[0];y(a,"ALPHA_CLIP","CLIP"===k?1:0);if(d&&"CLIP"==k){switch(d.blend_type){case "MIX":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;
case "MULTIPLY":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.wi.set(d.scale);y(a,"TEXTURE_COLOR",1);L(a,"a_texcoord");k=ba.hf(d);d=d.texture;"IMAGE"!=k.source&&"ENVIRONMENT_MAP"!=k.source&&"CANVAS"!=k.source&&"NONE"!=k.source||S(a,k,"u_colormap0",d.name)}else y(a,"TEXTURE_COLOR",0);b.tb=c;c=!0}break;case "GRASS_MAP":!b.qk.yr||b.cf?c=!1:(e(a,b),a.Na=b.Na,a.Bb=!1,a.cg=!1,a.Za=!0,B(a,"grass_map.glslv","grass_map.glslf"),L(a,"a_position"),d=b.qk.Mu?b.qk.Mu:null,b=b.qk.Lu?b.qk.Lu:null,a.nd.a_grass_size=
{Oo:!0,src:[]},d?(a.nd.a_grass_size.src.push({name:d,gi:4}),y(a,"DYNAMIC_GRASS_SIZE",1)):y(a,"DYNAMIC_GRASS_SIZE",0),a.nd.a_grass_color={Oo:!0,src:[]},b?(a.nd.a_grass_color.src.push({name:b,gi:7}),y(a,"DYNAMIC_GRASS_COLOR",1)):y(a,"DYNAMIC_GRASS_COLOR",0),y(a,"GRASS_TEXTURE_SIZE",X.fa(Ua.ev)),c=!0);break;case "DEBUG_VIEW":c=l(a,b);break;case "PARTICLES":a:if(b.cf)c=!1;else{c=b.Ah;if(a.fv)B(a,"particle_system.glslv","particle_system_stack.glslf"),y(a,"HALO_PARTICLES",1),C(a,b);else{k={Nc:!1,Jf:b.Jf,
Xf:b.Xf,xf:b.xf};if(b.Ch){B(a,"particle_system.glslv","particle_system.glslf");I(a,b,d,"PARTICLES");c=!0;break a}B(a,"particle_system.glslv","particle_system_stack.glslf");d=ca.cF(b.dd,k);a.qb.Qf=ca.su(d);if(d=A("use_map_color_diffuse",c)[0]){y(a,"TEXTURE_COLOR",1);switch(d.blend_type){case "MIX":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":y(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Co=d.diffuse_color_factor;d.use_map_alpha?a.Gk=d.alpha_factor:a.Gk=0;S(a,
ba.hf(d),"default"+String(a.wa.length),d.texture.name)}}a.jd.set(b.jd);a.jd[3]=b.alpha;a.Ze=b.Ze;a.rg=b.rg;a.ef=b.ef;a.Fg.set(b.Fg);a.Eg=b.Eg;L(a,"a_position");L(a,"a_tbn");y(a,"ALPHA","OPAQUE"===b.tb?0:1);y(a,"ALPHA_CLIP","CLIP"===b.tb?1:0);y(a,"PARTICLES_SHADELESS",b.Nc?1:0);P(a,b);O(a,b);e(a,b);a.Na=b.Na;a.sj=b.Fl&&"OPAQUE"!=b.tb&&"CLIP"!=b.tb&&"ALPHA_ANTIALIASING"!=b.tb;a.Rd=b.Rd;c=!0}break;default:F.K("Wrong batch type: "+a.type)}return c}function C(a,b){var d=b.jr;y(a,"NUM_RINGS",d.NB);y(a,
"NUM_LINES",d.LA);y(a,"NUM_STARS",d.LC);y(a,"SKY_STARS",d.CA?1:0);a.lA=d.size;a.iA=d.gv/20;a.kA.set(d.OB);a.jA.set(d.NA);a.mA=1/d.MC;a.nA=d.NC;a.hA=!0}function h(a,b,d){switch(b.texture_coords){case "UV":case "ORCO":y(a,d,"TEXTURE_COORDS_UV_ORCO");y(a,"TEXCOORD",1);break;case "NORMAL":y(a,d,"TEXTURE_COORDS_NORMAL");y(a,"NORMAL_TEXCOORD",1);break;default:y(a,d,"TEXTURE_COORDS_NONE")}}function e(a,b){switch(b.tb){case "ALPHA_ANTIALIASING":a.Bb=!1;a.cg=!1;a.Za=!0;a.Fk=!1;a.gg=!0;break;case "ALPHA_SORT":a.Bb=
!0;a.cg=!0;a.Za=!0;a.Fk=!1;a.gg=!1;break;case "ALPHA":a.Bb=!0;a.cg=!1;a.Za=!0;a.Fk=!1;a.gg=!1;break;case "CLIP":a.Bb=!1;a.cg=!1;a.Za=!0;a.Fk=!0;a.gg=!1;break;case "ADD":a.Bb=!0;a.cg=!1;a.Za=!1;a.Fk=!1;a.gg=!1;break;case "OPAQUE":a.Bb=!1;a.cg=!1;a.Za=!0;a.Fk=!1;a.gg=!1;break;default:F.K("Unknown alpha blend mode: "+b.tb)}}function A(a,b){for(var d=[],c=b.length,f=0;f<c;f++){var e=b[f];1==e[a]&&e.texture&&e.texture.J&&d.push(e)}return d}function q(a,b){var d=b.zp;a.ri=d.ri;a.Lo[0]=d.Vu;a.Lo[1]=1-d.Wu/
5}function P(a,b){var d,c=0;switch(b.Xf){case "PHONG":case "COOKTORR":d=b.Fp;break;case "WARDISO":d=b.DC;break;case "TOON":d=b.EC;c=b.FC;break;case "BLINN":d=b.CC;c=b.Fp;break;default:ja.error("unsupported specular shader: "+b.Xf+' (material "'+b.name+'")'),d=b.Fp}a.rn[0]=b.uw;a.rn[1]=d;a.rn[2]=c}function O(a,b){switch(b.Jf){case "LAMBERT":a.ce[0]=0;a.ce[1]=0;break;case "OREN_NAYAR":a.ce[0]=b.PB;a.ce[1]=0;break;case "FRESNEL":a.ce[0]=b.az;a.ce[1]=b.bz;break;case "MINNAERT":a.ce[0]=b.Ty;a.ce[1]=0;
break;case "TOON":a.ce[0]=b.cz;a.ce[1]=b.dz;break;default:ja.error("unsupported diffuse shader: "+b.Jf+' (material "'+b.name+'")'),a.ce[0]=0,a.ce[1]=0}}function I(a,b,d,c){if(!b.Ch||b.cf)return!1;var f;switch(c){case "MAIN":B(a,"main.glslv","main.glslf");f=!1;break;case "GLOW":B(a,"main.glslv","main.glslf");f=!0;break;case "SHADOW":B(a,"shadow.glslv","shadow.glslf");f=!1;break;case "COLOR_ID":B(a,"color_id.glslv","color_id.glslf"),f=!1}d=ca.kM(b.se,b.dd,c,{nJ:d.active_vcol_name,mJ:d.active_uv_name});
if(!d.Da)return ja.error('Failed to create node graph for material "'+b.name+'", disable nodes'),D(a,b),!0;a.Qe=d.id;a.Vj=!0;y(a,"NODES",1);y(a,"DOUBLE_SIDED_LIGHTING",b.Os?1:0);L(a,"a_position");b.pD&&L(a,"a_orco_tex_coord");e(a,b);a.Na=b.Na;a.Rd=b.Rd;f?(y(a,"ALPHA",1),y(a,"ALPHA_CLIP",0)):(y(a,"ALPHA","OPAQUE"===b.tb?0:1),y(a,"ALPHA_CLIP","CLIP"===b.tb?1:0));a.sj=b.Fl&&"OPAQUE"!=b.tb&&"CLIP"!=b.tb&&"ALPHA_ANTIALIASING"!=b.tb;a.ef=b.ef;a.Ze=b.Ze;q(a,b);b.qv?y(a,"WETTABLE",1):y(a,"WETTABLE",0);var g=
null,w=!1;aa.ja(d.Da,function(d,c){switch(c.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var f=c.data.name,e=c.data.value;a.vk||(a.vk={});a.vk[e]=f;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":f=c.data.name;a.nd[f]={Oo:!0,src:[{name:c.data.value}]};e=0;if("GEOMETRY_VC"==c.type)e=7;else for(var h=0;h<c.outputs.length;h++){var r="RGB".indexOf(c.outputs[h].identifier);-1<r&&(e|=1<<2-r)}a.nd[f].src[0].gi=e;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":L(a,
"a_tbn");break;case "TEX_COORD_OB":y(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":y(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":c.data.value.xf&&(y(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&L(a,"a_shade_tangs"));L(a,"a_tbn");w=!0;break;case "BSDF_BEGIN":w=!0;L(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":f=c.data.name;e=c.data.au;h=c.data.value;S(a,h,f,e);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":y(a,
"CALC_TBN_SPACE",1);L(a,"a_tbn");c.data&&(f=c.data.name,e=c.data.au,h=c.data.value,S(a,h,f,e));break;case "NORMAL_MAP":L(a,"a_tbn");switch(Number(c.jb[0][1])){case ca.CU:y(a,"CALC_TBN_SPACE",1);break;case ca.BU:case ca.AU:y(a,"USE_MODEL_TSR",1)}break;case "LAMP":c.data&&(a.gp=c.data);break;case "B4W_REFRACTION":a.Bb?a.Dl=!0:(a.Dl=!1,ja.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));y(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":g||(g=c.data.Xa);
break;case "PARTICLE_INFO":"PARTICLES"==a.type&&c.data&&(a.Kv=c.data);break;case "VECT_TRANSFORM":switch(Number(c.jb[1][1])){case ca.tK:y(a,"USE_MODEL_TSR_INVERSE",1);break;case ca.sK:y(a,"USE_VIEW_TSR",1);break;case ca.rK:y(a,"USE_MODEL_TSR",1);break;case ca.qK:y(a,"USE_MODEL_TSR",1);y(a,"USE_VIEW_TSR",1);break;case ca.pK:y(a,"USE_VIEW_TSR_INVERSE",1);break;case ca.oK:y(a,"USE_MODEL_TSR_INVERSE",1),y(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":y(a,"USE_MODEL_TSR",1);a.Rr[1]=b.gk;a.Rr[2]=
Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":y(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":y(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":L(a,"a_tbn");ma.gG()?y(a,"USE_DERIVATIVES_EXT",1):ja.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":a.Bb=!0;a.Dl=!0;break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":y(a,"USE_BSDF_SKY_DIM",1),ma.oO()&&y(a,"USE_TEXTURE_LOD_EXT",
1)}});g&&S(a,g,"u_nodes_texture");w||(a.Nc=!0);f=a.qb.Qf=ca.su(d.Da);J(d.Da,a);d=a.mi;c=a.li;for(var h=0;h<f.length;h++){var r=f[h];switch(r.id){case "VALUE":var l=r.Vr[0];if(l)for(var k=0;k<d.length;k+=3)if(d[k]==l){r.jb.push(["VALUE_ROW_IND",d[k+1]]);r.jb.push(["VALUE_COL_IND",d[k+2]]);break}break;case "RGB":if(l=r.Vr[0])for(k=0;k<c.length;k+=2)if(c[k]==l){r.jb.push(["RGB_IND",c[k+1]]);break}}}y(a,"NUM_VALUES",a.bj.length/4);y(a,"NUM_RGBS",a.Re.length);return!0}function u(a,b){var d=b.J.Mn;if(""!=
d.Qe){a.Vj=!0;a.Qe=d.Qe;var c=ca.Rz(d.Qe).Da;if(c){var f=null;aa.ja(c,function(b,d){switch(d.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":S(a,d.data.value,d.data.name,d.data.au);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":f||(f=d.data.Xa);break;case "VECT_TRANSFORM":switch(Number(d.jb[1][1])){case ca.tK:y(a,"USE_MODEL_TSR_INVERSE",1);break;case ca.sK:y(a,"USE_VIEW_TSR",1);break;case ca.rK:y(a,"USE_MODEL_TSR",1);break;case ca.qK:y(a,
"USE_MODEL_TSR",1);y(a,"USE_VIEW_TSR",1);break;case ca.pK:y(a,"USE_VIEW_TSR_INVERSE",1);break;case ca.oK:y(a,"USE_MODEL_TSR_INVERSE",1),y(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":y(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":y(a,"USE_VIEW_TSR_INVERSE",1)}});f&&S(a,f,"u_nodes_texture");d=a.qb.Qf=ca.su(c);J(c,a);for(var c=a.mi,e=a.li,g=0;g<d.length;g++){var w=d[g];switch(w.id){case "VALUE":var h=w.Vr[0];if(h)for(var r=0;r<c.length;r+=3)if(c[r]==h){w.jb.push(["VALUE_ROW_IND",c[r+1]]);
w.jb.push(["VALUE_COL_IND",c[r+2]]);break}break;case "RGB":if(h=w.Vr[0])for(r=0;r<e.length;r+=2)if(e[r]==h){w.jb.push(["RGB_IND",e[r+1]]);break}}}y(a,"NUM_VALUES",a.bj.length/4);y(a,"NUM_RGBS",a.Re.length)}else ja.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),D(a,b.world.name)}}function J(a,b){var d=[],c=[],f=[],e=[];x(a,d,c,f,e);b.bj=d;b.mi=c;b.Re=f;b.li=e}function x(a,b,d,c,f){aa.ja(a,function(a,e){if("VALUE"==e.type){var g=""+e.name;b.push(e.outputs[0].Qa);var w=
d.length/3;d.push(g,parseInt(w/4),parseInt(w%4))}else"RGB"==e.type&&(g=""+e.name,w=e.outputs[0].Qa.slice(0,3),c.push(w[0],w[1],w[2]),f.push(g,f.length/2))});a=b.length+4-b.length%4;for(var e=b.length;e<a;e++)b.push(0)}function D(a,b){switch(a.type){case "SHADOW":B(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":B(a,"color_id.glslv","color_id.glslf");break;default:B(a,"main.glslv","main_stack.glslf")}y(a,"SHADELESS",1);L(a,"a_position");L(a,"a_tbn");ya.set(1,0,1,1,a.jd);b&&(y(a,"ALPHA","OPAQUE"===
b.tb?0:1),y(a,"ALPHA_CLIP","CLIP"===b.tb?1:0),y(a,"VERTEX_COLOR",0),a.Rd=b.Rd,e(a,b),a.Na=b.Na);return!0}function l(a,b){if(b&&(b.Zj||b.cf))return!1;B(a,"debug_view.glslv","debug_view.glslf");L(a,"a_position");L(a,"a_tbn");L(a,"a_polyindex");a.Za=!0;sa.set(0,0,0,a.wireframe_edge_color);return!0}function v(a,b){a.Me=b.Me;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==a.type?(b.Om?y(a,"AU_QUALIFIER","GLSL_IN"):y(a,"AU_QUALIFIER","uniform"),y(a,"STATIC_BATCH",0)):(y(a,"AU_QUALIFIER","GLSL_IN"),
y(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(ma.gG()?y(a,"WIREFRAME_QUALITY",1):y(a,"WIREFRAME_QUALITY",0),a.Xk?(y(a,"DEBUG_SPHERE",1),a.Wy?y(a,"DEBUG_SPHERE_DYNAMIC",1):y(a,"DEBUG_SPHERE_DYNAMIC",0)):y(a,"DEBUG_SPHERE",0),y(a,"ALPHA",1));b.$f&&"PARTICLES"!=a.type&&!b.Om&&(a.$f=b.$f);b.zf?(""!==b.vl?(a.nd.a_bending_col_main={Oo:!0,src:[{name:b.vl,gi:4}]},L(a,"a_bending_col_main"),""!==b.If.LG&&""!==b.If.KG&&""!==b.If.tH?(a.nd.a_bending_col_detail={Oo:!0,src:[{name:b.If.LG,gi:4},{name:b.If.KG,gi:2},
{name:b.If.tH,gi:1}]},L(a,"a_bending_col_detail"),L(a,"a_tbn"),y(a,"DETAIL_BEND",1)):y(a,"DETAIL_BEND",0),y(a,"MAIN_BEND_COL",1)):y(a,"MAIN_BEND_COL",0),b.jo?y(a,"BEND_CENTER_ONLY",1):y(a,"BEND_CENTER_ONLY",0),y(a,"WIND_BEND",1)):y(a,"WIND_BEND",0);y(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.Xt|0);b.Kh?y(a,"BILLBOARD",1):y(a,"BILLBOARD",0);b.Kh&&b.Om?y(a,"HAIR_BILLBOARD",1):y(a,"HAIR_BILLBOARD",0);b.Yt?y(a,"BILLBOARD_SPHERICAL",1):y(a,"BILLBOARD_SPHERICAL",0);switch(b.Zt){case "RANDOM":y(a,"BILLBOARD_RANDOM",
1);y(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":y(a,"BILLBOARD_RANDOM",0);y(a,"BILLBOARD_JITTERED",1);break;default:y(a,"BILLBOARD_RANDOM",0),y(a,"BILLBOARD_JITTERED",0)}b.kd&&Q.Ux?y(a,"DYNAMIC_GRASS",1):y(a,"DYNAMIC_GRASS",0);a.kd=b.kd;"PARTICLES"!=a.type&&(a.df=b.df);a.Vf=b.Vf;a.tf=b.tf;a.ze=b.ze&&!a.Nc&&!(a.Bb&&Q.wF);Q.gw?("MAIN"==a.type&&a.ze||"SHADOW"==a.type)&&y(a,"RGBA_SHADOWS",1):y(a,"RGBA_SHADOWS",0);a.Te=b.Te;a.xe=b.xe;a.we=b.we;a.Rr[0]=b.gk;a.mh=b.mh;a.nh=b.nh;a.tl=b.tl;a.ul=b.ul;
a.Le=b.Le;a.te=b.te;b.Rm?(L(a,"a_influence"),y(a,"SKINNED",1),Q.oC?(y(a,"DISABLE_TANGENT_SKINNING",1),y(a,"FRAMES_BLENDING",0)):(y(a,"DISABLE_TANGENT_SKINNING",0),b.Ko?y(a,"FRAMES_BLENDING",1):y(a,"FRAMES_BLENDING",0)),y(a,"MAX_BONES",b.$i)):(y(a,"SKINNED",0),y(a,"FRAMES_BLENDING",0),y(a,"DISABLE_TANGENT_SKINNING",0));b.Fd?(y(a,"VERTEX_ANIM",1),Q.iT?y(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):y(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):y(a,"VERTEX_ANIM",0);b.Rm&&b.Fd&&F.K("Skinning and vertex animation are mutually exlusive")}}
function N(a,b,d){if(b.length){for(var c=ea.Wz(b,Q.ssao&&d.b4w_enable_ssao),f=a.qb,e=a.gp,g=0,h=0;h<a.qb.Qf.length;h++){var w=a.qb.Qf[h];if("LIGHTING_LAMP"==w.id){var r=b[g++%b.length],B=r.xd,l=ea.La(r,d);if("SPOT"==B.type||"POINT"==B.type)var k=Math.cos(B.ts/2);if("SPOT"==B.type)var F=B.HC*(1-k);r=c.indexOf(r);w.jb=[["LAMP_TYPE",B.type],["LAMP_IND",l.yv],["LAMP_SPOT_SIZE",X.fa(k||.01)],["LAMP_SPOT_BLEND",X.fa(F||.01)],["LAMP_LIGHT_DIST",X.fa(B.distance)],["LAMP_USE_SPHERE",B.lJ?1:0],["LAMP_SHADOW_MAP_IND",
r]]}else if("LAMP"==w.id&&e)for(var l=w.jb[0][1],K=0;K<b.length;K++)if(r=b[K],e[r.dd]==l){B=r.xd;if("SPOT"==B.type||"POINT"==B.type)k=Math.cos(B.ts/2);"SPOT"==B.type&&(F=B.HC*(1-k));w.jb.push(["LAMP_TYPE",B.type],["LAMP_SPOT_SIZE",X.fa(k||.01)],["LAMP_SPOT_BLEND",X.fa(F||.01)],["LAMP_LIGHT_DIST",X.fa(B.distance)],["LAMP_USE_SPHERE",B.lJ?1:0])}}if(e){d=0;for(var n in e)d++;a.Cr=new Float32Array(3*d);a.tv=new Float32Array(3*d);a.sv=new Float32Array(3*d);X.ya(f,"NUM_LAMP_LIGHTS",d);for(h=0;h<b.length;h++)E(a,
b[h])}}}function E(a,b){if(b.dd in a.gp){var d=a.gp[b.dd],c=za.X(b.A.D);a.Cr.set(c,3*d);a.tv.set(b.xd.direction,3*d);a.sv.set(b.xd.qu,3*d)}}function U(a,b){for(var d=0;d<b.length;d++){var c=b[d].settings.b4w_vcol_from_name,f=b[d].settings.b4w_vcol_to_name;""!==c&&""!==f&&(a.nd[c]={Oo:!1,src:[{name:c,gi:7}]})}}function L(a,b){var d=a.Tk;-1==d.indexOf(b)&&d.push(b);a.Tk=d.sort()}function y(a,b,d){X.ya(a.qb,b,d)}function H(a,b){if("PHYSICS"==a.type)"NAVMESH"==a.Hb?a.Pa=ia.kS(b,ia.Zp,[]):(0<b.Fb.length&&
ia.X4(b,b.sa[0]),a.Be=b);else{var d=a.Mj;a.hA&&"PARTICLES"!=a.type&&(b=ia.YZ(b));a.BD&&(b=da.u_(a.CD,a.DD,a.AD));d=ia.kS(b,d,a.nd);a.Pa=d;a.df||a.cg||a.$f||(d.kf=null,d.Uc.length=0);d=b.sa.length;a.Fv=b.hb*d;var c;a:switch(a.Mj){case ia.Zp:case ia.nt:case ia.dx:c=!0;break a;default:c=!1}c?ia.c1(b)?a.pp=b.Ga.length/3*d:a.pp=b.hb/3*d:a.pp=0}}function n(a,b,d,c,e,g,h,r,B,l,k,K){var w=a.Oa,n=[],G=r.b4w_dynamic_grass;if(!l&&G)return n;for(var x="INSTANCE"==r.b4w_wind_bend_inheritance,m="INSTANCE"==r.b4w_shadow_inheritance,
q="INSTANCE"==r.b4w_reflection_inheritance,S=[],u=[],A=0;A<e.length;A++){var D=e[A].Oa.A,H=ea.QE(b);H.Kh=r.b4w_hair_billboard;H.Zt=r.b4w_hair_billboard_type;H.Yt="SPHERICAL"==r.b4w_hair_billboard_geometry;H.kd=G;H.Om=!0;x?(H.zf=D.zf,H.Up=D.Up,H.Pg=D.Pg,H.qg=D.qg,H.vl=D.vl,H.pg=D.pg,H.kg=D.kg,H.Og=D.Og,H.If=D.If,H.jo=!1):(H.zf=w.A.zf,H.Up=w.A.Up,H.Pg=w.A.Pg,H.qg=w.A.qg,H.vl=w.A.vl,H.pg=w.A.pg,H.kg=w.A.kg,H.Og=w.A.Og,H.If=w.A.If,H.jo=!0);m?(H.Vf=D.Vf,H.tf=D.tf,H.ze=D.ze):(H.Vf=w.A.Vf,H.tf=w.A.tf,H.ze=
w.A.ze);q?(H.Te=D.Te,H.xe=D.xe,H.we=D.we,H.Le=D.Le,H.te=D.te,H.hj=D.hj):(H.Te=w.A.Te,H.xe=w.A.xe,H.we=w.A.we,H.Le=w.A.Le,H.te=w.A.te,H.hj=w.A.hj);S.push(H);var E=h[A];E||(E=new Float32Array);K&&F.uA(B.seed,k);var C=new Float32Array(3),R=new Float32Array([0,0,0,1]),L=[],N=Ja.PL(Q.OG)&&!r.b4w_initial_rand_rotation&&!r.b4w_hair_billboard,O=4;N&&(O=8);for(var va=0;va<E.length;va+=O){C[0]=E[va];C[1]=E[va+1];C[2]=E[va+2];var ca=E[va+3]*za.fe(D.D);if(r.b4w_initial_rand_rotation){switch(r.b4w_rotation_type){case "XYZ":var P=
new Float32Array([F.pi(k),F.pi(k),F.pi(k)]);sa.normalize(P,P);break;case "Z":P=new Float32Array([0,0,1]);break;default:F.K("Unsupported random rotation type: "+r.b4w_rotation_type)}Z.setAxisAngle(P,r.b4w_rand_rotation_strength*(2*Math.PI*F.pi(k)-Math.PI),R)}else if(N&&(R.set(E.subarray(va+4,va+8)),F.IH(R,R),!r.use_whole_group))if(r.use_rotation_dupli){var t=za.la(D.D);Z.multiply(R,t,R)}else Z.multiply(R,Aa,R);var la=za.ti(C,ca,R,za.create());L.push(la)}u.push(L)}for(var I={},pa=0,A=0;A<e.length;A++)for(var Da=
e[A].Oa.Ec,va=0;va<Da.length;va++)Da[va].name in I?I[Da[va].name]++:(I[Da[va].name]=1,pa++);for(var pa=pa?pa:1,ua={},A=0;A<e.length;A++){var J=e[A],aa=g[A],H=S[A],Y={};H.zf&&(Y.au_wind_bending_amp=[H.Og],Y.au_wind_bending_freq=[H.Pg],Y.au_detail_bending_freq=[H.qg],Y.au_detail_bending_amp=[H.pg],Y.au_branch_bending_amp=[H.kg],H.Og=0,H.Pg=0,H.qg=0,H.pg=0,H.kg=0);L=u[A];if(L.length){for(var ka=J.data,Da=J.Oa.Ec,da=Array(Da.length),ya=Array(Da.length),va=0;va<Da.length;va++)if(!qa(w,va)&&!ia.FO(ka,va))for(var M=
0;M<aa.length;M++){var Ba=aa[M],ma=p(Ba),X=Da[va];"MAIN"==Ba?da[va]=ma:"DEBUG_VIEW"==Ba&&(ya[va]=ma);ma.ou=a.b4w_cluster_data.cluster_id;if(f(ma,X)&&z(ma,X,ka)){"SHADOW"==Ba&&da[va]&&(ma.Nc=da[va].Nc);ma.Mj=ia.Zp;v(ma,H);ma.$m=ha(ma,H,r.uuid);ma.Zk=a.b4w_do_not_cull||r.b4w_dynamic_grass;"MAIN"==ma.type&&(ma.fh=a.b4w_caustics);y(ma,"DISABLE_FOG",("COLOR_ID"!=Ba&&"SHADOW"!=Ba&&a.b4w_disable_fogging)|0);"JITTERED"==r.b4w_hair_billboard_type&&(ma.DA=r.b4w_hair_billboard_jitter_amp,ma.EA=r.b4w_hair_billboard_jitter_freq);
G&&(ma.bA=r.b4w_dynamic_grass_scale_threshold);x||(delete ma.nd.a_bending_col_main,delete ma.nd.a_bending_col_detail);var ta=ia.qz(ka,va,ma.Tk,b.Aj,ma.nd,ma.vk),Ua=w.A.D,U=!0;if(1<I[X.name]){var wb=0,id;for(id in ta.sa)wb++;U=ta.Ga.length*L.length*wb*I[X.name]>2E5*pa}var Kc=Q.QK&&U&&"PHYSICS"!=ma.type;if(Kc){ma.TO=r.use_whole_group?2:1;var bb=ia.PX(ta);ia.AL(ta,bb,L);bb.Nf={Ew:L,II:Ua,bS:"STATIC"==b.type,PC:Y,Xr:{},hz:G};if(H.zf&&H.jo){var fa=sa.fromValues(0,0,0);za.Mc(fa,w.A.D,fa);for(var xa=[],
na=0;na<L.length;na++)xa.push(fa[0],fa[1],fa[2]);bb.Nf.Xr.a_emitter_center={Sc:3,data:xa}}ia.AL(ta,ta,L);"STATIC"==b.type&&ia.SW(bb.Cd,Ua)}else{var ba=bb=ia.O1(ta,Y,L),Pa=L;ba.Ea.au_center_pos=new Float32Array(3*ba.hb);for(var V=Pa.length,wa=ba.hb/V,cb=0;cb<V;cb++)for(var Ia=Pa[cb],Oa=3*wa*cb,ra=0;ra<wa;ra++)ba.Ea.au_center_pos[Oa+3*ra]=Ia[0],ba.Ea.au_center_pos[Oa+3*ra+1]=Ia[1],ba.Ea.au_center_pos[Oa+3*ra+2]=Ia[2];bb=ba;if(H.zf&&H.jo){var Na=bb,Ya=w.A.D;Na.Ea.a_emitter_center=new Float32Array(3*
Na.hb);var Ea=sa.fromValues(0,0,0);za.Mc(Ea,Ya,Ea);for(var Fa=0;Fa<Na.hb;Fa++)Na.Ea.a_emitter_center[3*Fa]=Ea[0],Na.Ea.a_emitter_center[3*Fa+1]=Ea[1],Na.Ea.a_emitter_center[3*Fa+2]=Ea[2];bb=Na}}var Ma=r.b4w_vcol_from_name,Ga=r.b4w_vcol_to_name,Qa=ma,Bb=d,Gb=!x,xb=ka,nb=[];if(""!==Ma&&""!==Ga){var Kb,ld=void 0,Mc=Ga,hb=Qa.nd,Nc=[];for(ld in hb)for(var bc=hb[ld].src,Fc=0,cc=0;cc<bc.length;cc++){var Wc=bc[cc].gi;Mc==bc[cc].name&&Nc.push(ld,Wc,Fc);Fc+=F.Bp(Wc)}Kb=Nc;if(0<Kb.length)for(var Ub=0;Ub<Kb.length;Ub+=
3)nb.push({Nu:Ma,jz:7,vB:Kb[Ub],wB:Kb[Ub+1],gz:Kb[Ub+2]});else ia.y0(Qa.Tk,"a_color")&&Ga==xb.active_vcol_name&&nb.push({Nu:Ma,jz:7,vB:"a_color",wB:7,gz:0})}Gb&&("a_bending_col_main"in Bb&&nb.push({Nu:"a_bending_col_main",jz:4,vB:"a_bending_col_main",wB:4,gz:0}),"a_bending_col_detail"in Bb&&nb.push({Nu:"a_bending_col_detail",jz:7,vB:"a_bending_col_detail",wB:7,gz:0}));for(var Ob=bb,Cb=L,xc=c,kb=nb,Gc=ma.nd,nc=Kc,Oc=!1,Hb=0;Hb<kb.length;Hb++){var Lb=kb[Hb].Nu,yc=xc.Ea[Lb];if(yc&&0<yc.length){Oc=!0;
break}}if(nc)var oc=Ob.Nf.Xr;if(Oc){var tb,Pb=w.A.Ca,yb=xc.sa[0].a_position,Db=Cb,Ra=ua,pc=new Float32Array(3),Qb=new Float32Array(3),dc=new Uint32Array(Db.length);if(!("verts_indices"in Ra)){Ra.Qk=new Float32Array(3);Ra.Kk=new Float32Array(3);Ra.pJ=new Uint32Array(yb.length/3);Ra.Hv=new Uint32Array(yb.length/3);Ra.Qk[0]=(Pb.max_x-Pb.min_x)/20;Ra.Qk[1]=(Pb.max_y-Pb.min_y)/20;Ra.Qk[2]=(Pb.max_z-Pb.min_z)/20;Ra.Kk[0]=Pb.min_x;Ra.Kk[1]=Pb.min_y;Ra.Kk[2]=Pb.min_z;for(var db=0;db<yb.length/3;db++){var Vb=
yb[3*db+1],zc=yb[3*db+2],ib=F.trunc((yb[3*db]-Ra.Kk[0])/Ra.Qk[0]),Pc=F.trunc((Vb-Ra.Kk[1])/Ra.Qk[1]),Hc=F.trunc((zc-Ra.Kk[2])/Ra.Qk[2]),ib=F.pa(ib,0,19),Pc=F.pa(Pc,0,19),Hc=F.pa(Hc,0,19);Ra.pJ[db]=db;Ra.Hv[db]=Hc*Math.pow(20,2)+20*Pc+ib}ia.D4(Ra.Hv,Ra.pJ,ia.eE,!0);Ra.Pp=new Uint32Array(Math.pow(20,3));for(db=0;db<Ra.Hv.length;db++)Ra.Pp[Ra.Hv[db]]++;delete Ra.Hv;for(db=1;db<Ra.Pp.length;db++)Ra.Pp[db]+=Ra.Pp[db-1]}for(var qc=0;qc<Db.length;qc++){pc[0]=Db[qc][0];pc[1]=Db[qc][1];pc[2]=Db[qc][2];for(var Rb=
1E10,Qc=-1,dd=F.trunc((pc[0]-Ra.Kk[0])/Ra.Qk[0]),ed=F.trunc((pc[1]-Ra.Kk[1])/Ra.Qk[1]),Ib=F.trunc((pc[2]-Ra.Kk[2])/Ra.Qk[2]),dd=F.pa(dd,0,19),ed=F.pa(ed,0,19),Ib=F.pa(Ib,0,19),Ac=Ib*Math.pow(20,2)+20*ed+dd,Ad=Ra.Pp[Ac],ec=0==Ac?0:Ra.Pp[Ac-1];ec<Ad;ec++){var eb=Ra.pJ[ec];Qb[0]=yb[3*eb];Qb[1]=yb[3*eb+1];Qb[2]=yb[3*eb+2];sa.sub(Qb,pc,Qb);var fc=sa.sqrLen(Qb);fc<=Rb&&(Rb=fc,Qc=eb)}if(-1==Qc)for(ec=0;ec<yb.length/3;ec++)Qb[0]=yb[3*ec],Qb[1]=yb[3*ec+1],Qb[2]=yb[3*ec+2],sa.sub(Qb,pc,Qb),fc=sa.sqrLen(Qb),
fc<=Rb&&(Rb=fc,Qc=ec);dc[qc]=Qc}tb=dc;for(var Wb=Ob.hb/Cb.length,Hb=0;Hb<kb.length;Hb++){var Xa=kb[Hb].vB,lb=kb[Hb].wB,Lb=kb[Hb].Nu,gc=kb[Hb].jz,yc=xc.Ea[Lb];switch(Xa){case "a_bending_col_main":var Xc=1;break;case "a_bending_col_detail":Xc=3;break;case "a_color":Xc=3;break;default:for(var hc=Xc=0;hc<Gc[Xa].src.length;hc++)Xc+=F.Bp(Gc[Xa].src[hc].gi)}if(yc&&0<yc.length){var Yc=F.Bp(gc),Zd=F.Bp(lb),fd=gc&lb,Ld=F.PQ(fd);fd!=lb&&ja.error("Wrong color extraction from "+Lb+" to "+Xa+".");if(nc)for(oc[Xa]=
{Sc:Xc,data:[]},hc=0;hc<Cb.length;hc++)for(md=tb[hc],Md=md*Yc,$b=0;$b<Ld.length;$b++)Ld[$b]&&(td=F.cs(gc,$b),oc[Xa].data.push(yc[Md+td]));else{if("a_bending_col_main"==Xa||"a_bending_col_detail"==Xa)Ob.Ea[Xa]=new Float32Array(Ob.hb*Zd);for(hc=0;hc<Cb.length;hc++){var md=tb[hc],Md=md*Yc,Qd=hc*Wb*Xc;if(-1!=md)for(var ud=0;ud<Wb;ud++)for(var $d=ud*Xc,$b=0;$b<Ld.length;$b++)if(Ld[$b]){var td=F.cs(gc,$b);Ob.Ea[Xa][Qd+$d+(kb[Hb].gz+F.cs(lb,$b))]=yc[Md+td]}}}}else Ob.Ea[Xa]=new Float32Array(0)}}bb=Ob;y(ma,
"USE_INSTANCED_PARTCLS",bb.Nf?1:0);W(ma);n.push({Ha:ma,sh:b,gy:H,Be:bb,ii:[X.name],Ue:[a]})}}for(va=0;va<ya.length;va++)ya[va]&&(ya[va].Sq=da[va].id,W(ya[va]))}}return n}function f(a,b){var d=!0;"NODES_GLOW"==a.type&&(d=ca.NL(b));return d}function W(a){d(a,function(a){a.id=0;a.id=F.BL(a)})}function d(a,b){for(var d=null,c=null,f=[],e=0;e<a.wa.length;e++){var g=a.wa[e],h=g.Lh;h&&(d||(d={}),d[e]=h,g.Lh=null);if(h=g.sb)c||(c={}),c[e]=h,g.sb=null;f.push(g.bQ);g.bQ=0}g=a.Cb;a.Cb=null;h=a.ag;a.ag=null;
var r=a.Pa;a.Pa=null;var w=a.Be;a.Be=null;b(a);a.Pa=r;a.Be=w;a.ag=h;a.Cb=g;if(d)for(e in d)a.wa[e].Lh=d[e];if(c)for(e in c)a.wa[e].sb=c[e];for(e=0;e<a.wa.length;e++)a.wa[e].bQ=f[e]}function G(a,b,d,c){var f=p("DEBUG_VIEW");B(f,"debug_view.glslv","debug_view.glslf");f.Xk=!0;f.Za=!0;f.$m=ha(f,a,b);f.Wy=d;v(f,a);W(f);if(c.Gn){a=c.Cb.ig;var e=sa.create();b=da.NF(1,e);d=sa.fromValues(sa.length(a.ab),sa.length(a.eb),sa.length(a.fb));ia.UQ(b,d,e);var e=sa.normalize(a.ab,la),g=sa.normalize(a.eb,Y),h=sa.normalize(a.fb,
xa);!d[0]&&d[1]&&d[2]?sa.cross(g,h,e):!d[1]&&d[0]&&d[2]?sa.cross(h,e,g):!d[2]&&d[0]&&d[1]&&sa.cross(e,g,h);d=F.JZ(e,g,h,V);ka.invert(d,d);d=Z.fromMat3(d,Oa);za.Gc(d,ra);za.Ve(1,ra);za.Ad(a.V,ra);ia.KI(b,ra)}else a=c.Cb.Ff,b=da.NF(a.pb,a.V);K.qM(c.Cb,f.Cb);ia.OC(b,1,!0);b.Ea.a_polyindex=ia.pz(b);H(f,b);return f}function B(a,b,d){a.qb.Lg=b;a.qb.gf=d;X.K3(a.qb)}function S(a,b,d,c){c=c||"";-1==a.Ig.indexOf(d)&&(a.wa.push(b),a.Ig.push(d),a.jg.push(c));a.Gb&&R.gL(a)}function r(a){a.qb||F.K("No shaders info for batch "+
a.name);a.Gb=X.M_(a.qb);var b=a.qb;if(b.status===X.nK){var d=a.Gb.attributes,c=a.Pa.cd,f;for(f in d)c[f]||F.K('missing data for "'+f+'" attribute')}b.status&X.FT&&ja.error("Texture limit exceeded for shader - "+b.gf+', materials: "'+a.Dc.join(", ")+'". Maximum texture count: '+va.XG+", actual texture count: "+b.VC);b.status&X.ET&&ja.error("Fragment uniform limit exceeded for shader - "+b.gf+', materials: "'+a.Dc.join(", ")+'". ');b.status&X.IT&&ja.error("Vertex uniform limit exceeded for shader - "+
b.Lg+', materials: "'+a.Dc.join(", ")+'". ');b.status&X.HT&&ja.error("Vertex attribute limit exceeded for shader - "+b.Lg+', materials: "'+a.Dc.join(", ")+'". Maximum attribute count: '+va.YG+", actual attribute count: "+b.by);b.status&X.GT&&("MAIN"!=a.type||a.Vj||ja.error("Varying limit exceeded for shader - "+a.qb.gf+', materials: "'+a.Dc.join(", ")+'"'),"MAIN"==a.type&&a.Vj||"NODES_GLOW"==a.type)&&(c=d=0,a.vk&&(d=F.kl(a.vk)),a.nd&&(c=F.kl(a.nd)),ja.error("Varying limit exceeded for node shader - "+
a.qb.gf+", uv: "+d+", vc: "+c+', materials: "'+a.Dc.join(", ")+'"'));b.status&X.BT&&ja.error("Shader compilation/linking error: "+b.Lg+", "+b.gf+', materials: "'+a.Dc.join(", ")+'"');return a.qb.status===X.nK?(R.BW(a.Gb),R.dL(a),R.gL(a),!0):!1}function ha(a,b,d){return"NAVMESH"==a.Hb?d:b.df?"_odd_id_"+F.GS():d}function qa(a,b){return 0<=b&&b<a.oh.Yo.length&&a.oh.Yo[b]}var K=t("__boundings"),pa=t("__config"),ja=t("__print"),ma=t("__extensions"),aa=t("__graph"),ka=t("__mat3"),ca=t("__nodemat"),ea=t("__obj_util"),
wa=t("__particles"),da=t("__primitives"),Z=t("__quat"),Ja=t("__reformer"),R=t("__renderer"),na=t("__scenegraph"),X=t("__shaders"),fa=t("__subscene"),ba=t("__textures"),za=t("__tsr"),ia=t("__geometry"),F=t("__util"),sa=t("__vec3"),ya=t("__vec4"),Q=pa.L,va=pa.Ni,Ua=pa.ds,Ba=pa.JO,Aa=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),la=new Float32Array(3),Y=new Float32Array(3),xa=new Float32Array(3),Oa=new Float32Array(4),ra=za.create(),V=ka.create(),Ya={},Fa=new Float32Array(24);a.HW=function(a){return Ya[a]||
null};a.IW=function(a,b){Ya[a]=b};a.LX=c;a.wN=function(a,b,d,c){var f;f=a.J.Da;for(var e=[],h=0;h<b.length;h++){var r=b[h],B=r.Oa;B.mv||e.push.apply(e,g(r,B.A,f))}f=M(e);for(e=0;e<f.length;e++)if(h=f[e].Ha,h.Dc=f[e].ii,H(h,f[e].Be),N(h,d,a),"STATIC"==f[e].A.type&&"COLOR_ID"!=h.type){var r=F.Gw("%meta%"+h.type+"%"+h.Dc.join("%")+"%"),w=ea.zu(r,"MESH");ea.Z1(w,f[e].A);ea.Yx(w,a);ea.$g(w,a,h);c.push(w);if("MAIN"==h.type)for(B=0;B<f[e].Ue.length;B++)r=f[e].Ue[B].Oa,r.Bv.push(w)}else r=f[e].Ue[0].Oa,ea.$g(r,
a,h);if(Q.debug_view){for(e=0;e<f.length;e++)if(d=f[e].A,"DYNAMIC"==d.type&&(r=f[e].Ue[0].Oa,h=f[e].Ha,"MAIN"==h.type)){for(var B=ea.La(r,a),w=B.da,l=!1,B=0;B<w.length;B++)w[B].Xk&&(l=!0);l||(d=G(d,r.name,!0,h),ea.$g(r,a,d))}for(e=0;e<c.length;e++)r=c[e],d=r.A,B=ea.La(r,a),h=B.da[0],"MAIN"==h.type&&(d=G(d,r.name,!1,h),ea.$g(r,a,d));for(e=0;e<f.length;e++)h=f[e].Ha,"DEBUG_VIEW"==h.type&&(h.Uy=e)}for(e=0;e<b.length;e++)for(B=ea.La(b[e].Oa,a),w=B.da,B=0;B<w.length;B++)k(w[B]);for(e=0;e<c.length;e++)for(B=
ea.La(c[e],a),w=B.da,B=0;B<w.length;B++)k(w[B])};a.mW=function(a,b,d){var f=a.J.Mn,e=p("MAIN");B(e,"sky.glslv","sky.glslf");e.ol=!0;e.Za=!1;if(b.procedural_skydome)y(e,"PROCEDURAL_SKYDOME",1),e.fz=!0;else{var g=f.Ep,h=na.Vb(a.J.Da,fa.Ie).H.cc;S(e,h,"u_sky");g&&(y(e,"WO_SKYTEX",1),g.invert&&y(e,"MTEX_NEGATIVE",1),g.aT&&y(e,"MTEX_RGBTOINT",1),y(e,"BLENDTYPE",g.uL),g.WS&&y(e,"WOMAP_BLEND",1),g.XS&&y(e,"WOMAP_HORIZ",1),g.ZS&&y(e,"WOMAP_ZENUP",1),g.YS&&y(e,"WOMAP_ZENDOWN",1));f.Kp&&y(e,"WO_SKYBLEND",1);
f.Lp&&y(e,"WO_SKYPAPER",1);f.Mp&&y(e,"WO_SKYREAL",1)}b.Te&&(e.Te=!0,b.xe&&(e.xe=!0));L(e,"a_position");b=da.x_();H(e,b);k(e);e.Zk=!0;W(e);ea.$g(d,a,e);na.Vb(a.J.Da,fa.Bi)&&(f=c(e),f.type="DEBUG_VIEW",f.Hb="",l(f),y(f,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.Ea.a_polyindex=ia.pz(b),H(f,b),f.Sq=e.id,W(f),ea.$g(d,a,f))};a.Iy=function(a,b,d){var f=ea.La(a,d).da,e=[],g=na.Vb(b,fa.Ge),h=na.Vb(b,fa.Zd),r=na.Vb(b,fa.Ci);b=na.Vb(b,fa.Bf);for(var B=0;B<f.length;B++){var w=f[B],l=null;"SHADOW"==w.type&&"RECEIVE"==
w.Hb&&w.Vf&&(l=c(w),l.Hb="CAST");"MAIN"!=w.type&&"PARTICLES"!=w.type||!g&&!h||!w.Te||(l=c(w),l.Hb="REFLECT",l.Dl=!1,l.cg&&(l.cg=!1,l.Za=!1),l.Ra=w.Ra);"COLOR_ID"==w.type&&r&&a.A.zd&&(b&&a.A.kn?(l=c(w),l.Hb="OUTLINE"):w.Hb="OUTLINE");l&&(l.Uh=!0,W(l),e.push(l))}for(f=0;f<e.length;f++)ea.$g(a,d,e[f])};a.sT=function(a,b,d){return(b=d*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};a.z6=function(a,b,d){b=d*(b.max_z-b.min_z);if(!b)return 0;a=2*b*a;return Math.atan((Math.pow(a+
1,4)-Math.pow(a+1,2))/b)};a.JW=function(a){var b=K.Hf();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};a.t5=D;a.s5=N;a.V3=E;a.fL=function(a,b){y(a,"CSM_SECTION1",0);y(a,"CSM_SECTION2",0);y(a,"CSM_SECTION3",0);y(a,"NUM_CAST_LAMPS",0);if(b){y(a,"NUM_CAST_LAMPS",b.Zi.length);Q.TA&&y(a,"MAC_OS_SHADOW_HACK",1);for(var d=1;d<b.csm_num;d++)y(a,"CSM_SECTION"+String(d),1);y(a,"SHADOW_TEX_RES",X.fa(b.csm_resolution));y(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?
1:0);y(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!Q.SL?1:0)}else y(a,"SHADOW_TEX_RES",0),y(a,"CSM_FADE_LAST_CASCADE",0),y(a,"CSM_BLEND_BETWEEN_CASCADES",0)};a.Uf=y;a.H_=function(a){return X.S_(a.qb,"STEPS_PER_PASS")};a.q5=H;a.r5=W;a.I5=function(a,b){a.Cb.Ef=K.sE(b,0,b.length,a.Cb.Ef);var d=K.gN(a.Cb.Ef,Fa);a.Cb.ig=K.Fy(d,!0);a.Cb.Ff=K.Hy(a.Cb.ig);a.Gn=K.YO(a.Cb.ig,a.Cb.Ff)};a.$x=B;a.Ji=S;a.j3=function(a,b,d){d=a.Ig.indexOf(d);-1<d&&(a.wa[d]=b)};a.BY=function(a,b){var d=p("MAIN");d.Bb=
!0;ya.set(b[0],b[1],b[2],.5,d.jd);d.Mj=ia.nt;H(d,a);B(d,"main.glslv","main_stack.glslf");y(d,"SHADELESS",1);r(d);return d};a.Dd=r;a.vN=function(a,b){for(var d=0;d<b.length;d++){var c=b[d],f=p("LINE");B(f,"line.glslv","line.glslf");f.Bb=!0;f.Zk=!0;var e=da.z_();H(f,e);k(f);ea.Yx(c,a);ea.$g(c,a,f);r(f)}};a.qX=function(a){return a.Gb.Lv.length?a.Gb.zH.u_cube_fog?!0:!1:!1};a.kY=function(){var a=p("DEPTH_PACK");a.Na=!0;a.Za=!1;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");
r(a);return a};a.Ly=function(a){var b=p("POSTPROCESSING");B(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":y(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":y(b,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":y(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":y(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":y(b,
"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":y(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":y(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":y(b,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:F.K("Wrong postprocessing effect: "+a)}y(b,"SHADOW_USAGE","NO_SHADOWS");b.Na=!0;b.Za=!1;a=da.Ld();H(b,a);r(b);return b};a.EY=function(a){var b=p("SSAO");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv",
"postprocessing/ssao.glslf");y(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.Gp);y(b,"SSAO_HEMISPHERE",a.ys?1:0);y(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};d=ba.xm(ba.Di,!1);d.source="NODE_TEX";ba.Iw(d,a,0);S(b,d,"u_ssao_special_tex");r(b);return b};a.FY=function(a){var b=p("SSAO_BLUR");
b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");y(b,"SSAO_BLUR_DEPTH",a.us?1:0);y(b,"SHADOW_USAGE","NO_SHADOWS");r(b);return b};a.dY=function(a){var b=p("COC");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");y(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":y(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":y(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":y(b,"COC_TYPE",
"COC_COMBINE")}y(b,"SHADOW_USAGE","NO_SHADOWS");r(b);return b};a.lY=function(a){var b=p("DOF");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.H.dof_bokeh?y(b,"DOF_TYPE","DOF_BOKEH"):(y(b,"DOF_TYPE","DOF_SIMPLE"),y(b,"DEPTH_RGBA",1));y(b,"SHADOW_USAGE","NO_SHADOWS");r(b);return b};a.tY=function(){var a=p("OUTLINE");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");r(a);return a};
a.nY=function(){var a=p("GLOW_COMBINE");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");r(a);return a};a.oY=function(a,b,d){var c=p("GOD_RAYS");c.Za=!1;c.Na=!0;var f=da.t_();H(c,f);B(c,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");y(c,"DEPTH_RGBA",a?1:0);y(c,"WATER_EFFECTS",b?1:0);y(c,"STEPS_PER_PASS",X.fa(d,1));y(c,"SHADOW_USAGE","NO_SHADOWS");r(c);return c};a.pY=function(){var a=p("GOD_RAYS_COM");a.Za=!1;a.Na=!0;var b=
da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");y(a,"SAFARI_CANVAS_ALPHA_HACK",Q.TQ?1:0);r(a);return a};a.hY=function(a,b){var d=p("SKY");d.Za=!1;d.Na=!1;var c=da.Fz();H(d,c);""!=b.sC?(B(d,"skybox.glslv","node_skybox.glslf"),y(d,"IS_WORLD",1),u(d,a)):b.procedural_skydome?(B(d,"skybox.glslv","proc_skybox.glslf"),y(d,"WATER_EFFECTS",1)):(B(d,"skybox.glslv","tex_skybox.glslf"),a&&(c=a.J.Mn,c.uC&&S(d,ba.hf(c.uC),"u_sky_texture",c.uC.texture.name),c.Ep&&
y(d,"WO_SKYTEX",1)),b.rC&&y(d,"MTEX_NEGATIVE",1),b.zC&&y(d,"MTEX_RGBTOINT",1),y(d,"BLENDTYPE",b.qC),b.vC&&y(d,"WOMAP_BLEND",1),b.wC&&y(d,"WOMAP_HORIZ",1),b.yC&&y(d,"WOMAP_ZENUP",1),b.xC&&y(d,"WOMAP_ZENDOWN",1),b.Kp&&y(d,"WO_SKYBLEND",1),b.Lp&&y(d,"WO_SKYPAPER",1),b.Mp&&y(d,"WO_SKYREAL",1));r(d);return d};a.eW=function(a,b){var d=na.Vb(a.J.Da,fa.Ie);d&&ea.$g(b,a,d.kb[0].Ua[0].Ha)};a.fY=function(){var a=p("IRRADIANCE");a.Za=!1;a.Na=!1;var b=da.Fz();H(a,b);B(a,"skybox.glslv","irradiance_skybox.glslf");
r(a);return a};a.gY=function(){var a=p("R_CONVOLUTION");a.Za=!1;a.Na=!1;var b=da.Fz();H(a,b);B(a,"skybox.glslv","r_convolution_skybox.glslf");r(a);return a};a.cY=function(){var a=p("BRDF");a.Za=!1;a.Na=!1;var b=da.Fz();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");r(a);return a};a.ZX=function(a){var b=p("ANTIALIASING");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");Q.xQ?(y(b,"AA_METHOD",
"AA_METHOD_FXAA_QUALITY"),y(b,"AA_QUALITY",a.Cz)):y(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");r(b);return b};a.CY=function(a){var b=p("SMAA"),d=da.Ld();H(b,d);B(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");y(b,"AA_METHOD","AA_METHOD_SMAA_HIGH");y(b,"SMAA_PASS",a);y(b,"SMAA_PREDICATION",0);y(b,"SMAA_REPROJECTION",0);r(b);b.Za=!1;b.Na=!0;return b};a.eY=function(){var a=p("COMPOSITING");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");
r(a);return a};a.sY=function(){var a=p("MOTION_BLUR");a.Na=!0;a.Za=!1;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");r(a);return a};a.GY=function(a){var b=p("STEREO");b.Na=!0;b.Za=!1;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");y(b,"ANAGLYPH","ANAGLYPH"===a?1:0);y(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);y(b,"DISTOR_SCALE",Ba.nonwebvr.XM);r(b);return b};a.qY=function(){var a=p("LUMINANCE");a.Za=!1;a.Na=
!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");r(a);return a};a.$X=function(){var a=p("LUMINANCE");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");r(a);return a};a.rY=function(a){var b=p("LUMINANCE_X_BLUR");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&X.ya(b.qb,"ADAPTIVE_BLOOM",1);r(b);return b};a.bY=
function(a){var b=p("BLOOM");b.Za=!1;b.Na=!0;var d=da.Ld();H(b,d);B(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var c="BLUR_PASS_1";else 2==a?c="BLUR_PASS_2":3==a?c="BLUR_PASS_3":4==a?c="BLUR_PASS_4":5==a&&(c="BLUR_PASS_5");X.ya(b.qb,"BLUR_PASS_NUM",c);r(b);return b};a.gZ=function(){var a=p("VELOCITY");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");r(a);return a};a.YX=function(){var a=p("ANCHOR_VISIBILITY");
a.Za=!0;a.Na=!0;a.Mj=ia.nt;B(a,"anchors.glslv","anchors.glslf");var b=da.uN(1);H(a,b);y(a,"ANCHOR_NUM",1);r(a);a.bo=new Float32Array(3);return a};a.vY=function(){var a=p("PERFORMANCE");a.Za=!1;a.Na=!0;var b=da.Ld();H(a,b);B(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");r(a);return a};a.p5=function(a,b){var d=b.length/3;if(d!=a.bo.length/3){var c=da.uN(d);H(a,c);y(a,"ANCHOR_NUM",d);r(a)}a.bo=b};a.U_=function(a){if(!a.T.length)return null;a=a.T[0];return a.da.length?a.da[0]:
null};a.saa=function(a,b,d){a=a.T[0].da;for(var c=0;c<a.length;c++)if(a[c].type==d&&-1!=a[c].Dc.indexOf(b))return a[c];return null};a.Em=function(a,b){for(var d=a.T[0].da,c=0;c<d.length;c++)if("MAIN"==d[c].type&&!d[c].Uh&&-1!=d[c].Dc.indexOf(b))return d[c];return null};a.taa=function(a,b,d){a=a.T[0].da;for(var c=0;c<a.length;c++)if(a[c].type==d&&a[c].Uh&&-1!=a[c].Dc.indexOf(b))return a[c];return null};a.HG=function(a,b,d,c){a=a.T[0].da;for(var f=0;f<a.length;f++){var e=a[f];if(-1!=e.Dc.indexOf(b)&&
(!c||e.type==c)&&d(e))break}};a.L9=function(a,b){for(var d=a.T[0].da,c=0;c<d.length;c++)if(d[c].type==b)return!0;return!1};a.G_=function(a,b){for(var d=(b?ea.La(a,b):a.T[0]).da,c=0;c<d.length;c++)if("SKY"==d[c].type)return d[c];return null};a.aM=function(a){var b=a.wa;a.wa=[];for(var d=0;d<b.length;d++)ba.$L(b[d]);a.wa=b;a.Pa&&a.Pa.Mh&&ia.FX(a.Pa);a.Mh&&a.ag.length&&R.IX(a);a.Gb&&a.Gb.Mh&&X.HX(a.Gb);a.Qe&&(b=ca.Rz(a.Qe))&&b.ZL&&ca.GX(a.Qe)};a.B_=ha;a.Ja=function(){Ya={}}};b4w.module.__config=function(a,t){function p(){return b4w.module_check(a.Sf.py)}function c(){for(var c=a.Sf,k=null,m=document.getElementsByTagName("script"),p=0;p<m.length;p++){for(var C=m[p].src,h=0;h<c.mP.length;h++)if(0<=C.indexOf(c.mP[h])){k=C;break}if(null!==k)break}k||(b.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),k=document.location.href);c=k.indexOf("?");0<=c&&(k=k.substring(0,c));return k.substring(0,k.lastIndexOf("/"))}var b=t("__print"),
k=t("__util");a.im=1;a.Bk=2;a.Un=3;a.kK=4;a.Et=5;a.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};a.pM=k.Y(a.context);a.L={alpha_sort:!0,alpha_sort_threshold:.1,kp:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,nN:1,k_:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Sl:3,allow_cors:!1,mN:!1,nE:!0,anisotropic_filtering:!0,WC:!1,show_hud_debug_info:!1,Yy:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,
bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,rT:!1,Qu:!0,uB:!0,kd:!0,water_dynamic:!0,Wf:!0,mC:!0,VS:!0,precision:"highp",quality:a.Bk,Ux:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,g2:!1,xI:!1,wF:!1,iT:!1,is_mobile_device:!1,vG:!1,PE:!1,Cea:!1,kw:!1,allow_hidpi:!1,QR:!1,aH:!1,VO:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,rA:!1,jN:!1,OG:[0,0],xQ:!0,oC:!1,url_params:null,Mb:!0,oc:4,ru:!1,TQ:!1,u3:!1,ew:!1,OQ:!1,
TL:!1,QO:!1,PO:!1,media_auto_activation:!0,NP:4,TA:!1,gl_debug:!1,ML:!1,QK:!1,lE:!1,so:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",vA:!1,gw:!1,debug_loading:!1,JP:!1,IP:!1,SL:!1,fw:!0};a.RM=k.Y(a.L);a.eo={zz:-1,oN:!1,Jo:1};a.controls={a2:1/120};a.Ke={path:"",x2:"B4W_ASSETS_PATH=__JS__/../../assets\/",Q2:"B4W_PROJ_ASSETS_PATH=__JS__/../../..\/",U1:15,prevent_caching:!0,$G:!1,pF:!1,EB:!1};a.cL=k.Y(a.Ke);a.Sf={shaders_path:"",v4:"../shaders/",OR:"include/",
wea:"postprocessing/",py:"built_in_data",mP:"b4w.min.js b4w.full.min.js b4w.simple.min.js b4w.whitespace.min.js src/b4w.js webplayer.min.js".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};a.JO={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{XM:.8,Wi:.064,xj:.035,hw:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],Ln:.11,Wj:.062,yj:.004}};a.N={enabled:!0,max_fps:60,Jw:"",
mD:"",nD:"B4W_URANIUM_PATH=./",bL:"uranium.js",qT:"uranium_wasm.js",PP:"uranium.js.mem",pT:"uranium_wasm.wasm",US:"../deploy/apps/common/",BE:!1,ping:!1,Op:!0,Pw:!0};a.kQ=k.Y(a.N);a.ds={ev:1024,Qy:256,JM:32,lZ:128,kZ:256,mQ:.25,G2:.5,F2:1};a.XQ=k.Y(a.ds);a.ra={rJ:!0,$A:!1,hL:!1,WL:!1,VM:!1};a.MR=k.Y(a.ra);a.zd={outlining_overview_mode:!1,dj:[1,.4,.05],an:.2,bn:3.8,cn:1};a.Ao={enabled:!1,xw:39,Y4:0,y4:"COLOR"};a.QM=k.Y(a.Ao);a.Ni={T1:8,TG:64,XG:8,WA:8,YG:15,OP:0,XA:128,ph:1024,UG:4096,nc:4096,ZG:[4096,
4096],Vq:24};a.oM=k.Y(a.Ni);a.Eq=function(){var b=a.L,c=a.N,m=a.ds;switch(b.quality){case a.Un:b.shadows=!0;b.Wf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Qu=!0;b.uB=!0;b.kd=!0;m.ev=2048;m.Qy=512;b.Sl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.mC=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!0;b.enable_outlining=!0;b.glow_materials=!0;b.oc=16;b.srgb_type="SRGB_PROPER";c.max_fps=120;b.lod_smooth_transitions=
!0;break;case a.Bk:b.shadows=!0;b.Wf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Qu=!0;b.uB=!0;b.kd=!0;m.ev=1024;m.Qy=256;b.Sl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.mC=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!1;b.enable_outlining=!0;b.glow_materials=!0;b.srgb_type="SRGB_SIMPLE";b.oc=4;c.max_fps=60;b.lod_smooth_transitions=!0;break;case a.im:b.shadows=!1;b.Wf=!1;b.ssao=!1;b.dof=!1;b.god_rays=!1;
b.bloom=!1;b.reflections=!1;b.refractions=!1;b.Qu=!1;b.uB=!1;b.kd=!1;m.ev=512;m.Qy=256;b.Sl=2;b.anisotropic_filtering=!1;b.use_min50=!0;b.water_dynamic=!1;b.mC=!1;b.antialiasing=!1;b.smaa=!1;b.compositing=!1;b.motion_blur=!1;b.allow_hidpi=!1;b.enable_outlining=!1;b.glow_materials=!1;b.srgb_type="SRGB_SIMPLE";b.oc=1;c.max_fps=60;b.lod_smooth_transitions=!1;break;case a.Et:k.K("Direct AUTO quality profile setting is forbidden")}};a.set=function(c,k){switch(c){case "allow_cors":a.L.allow_cors=k;break;
case "allow_hidpi":a.L.allow_hidpi=k;break;case "alpha":a.context.alpha=k;break;case "alpha_sort":a.L.alpha_sort=k;break;case "alpha_sort_threshold":a.L.alpha_sort_threshold=k;break;case "anaglyph_use":b.nz("anaglyph_use","stereo");a.L.stereo=k?"ANAGLYPH":a.L.stereo;break;case "animation_framerate":a.eo.zz=k;break;case "anisotropic_filtering":a.L.anisotropic_filtering=k;break;case "antialiasing":a.L.antialiasing=k;break;case "assets_dir":case "assets_path":a.Ke.path=k;break;case "assets_dds_available":a.Ke.pF=
k;break;case "assets_pvr_available":a.Ke.EB=k;break;case "assets_min50_available":a.Ke.$G=k;break;case "audio":a.ra.rJ=k;break;case "background_color":a.L.background_color=k;break;case "bloom":a.L.bloom=k;break;case "built_in_module_name":a.Sf.py=k;break;case "canvas_resolution_factor":a.L.canvas_resolution_factor=k;break;case "console_verbose":a.L.console_verbose=k;break;case "compositing":a.L.compositing=k;break;case "dof":a.L.dof=k;break;case "do_not_load_resources":a.L.do_not_load_resources=k;
break;case "god_rays":a.L.god_rays=k;break;case "stereo":a.L.stereo=k;break;case "lod_leap_smooth_threshold":a.L.lod_leap_smooth_threshold=k;break;case "lod_smooth_transitions":a.L.lod_smooth_transitions=k;break;case "max_fps":a.L.max_fps=k;break;case "max_fps_physics":a.N.max_fps=k;break;case "media_auto_activation":a.L.media_auto_activation=k;break;case "motion_blur":a.L.motion_blur=k;break;case "physics_enabled":a.N.enabled=k;break;case "physics_uranium_path":a.N.Pw&&window.WebAssembly?(a.N.Jw=
k+a.N.qT,a.N.mD=k+a.N.pT):(a.N.Jw=k+a.N.bL,a.N.mD=k+a.N.PP);a.N.US=k;break;case "physics_use_wasm":a.N.Pw=k;break;case "physics_calc_fps":a.N.BE=k;break;case "physics_use_workers":a.N.Op=k;break;case "precision":a.L.precision=k;break;case "prevent_caching":a.Ke.prevent_caching=k;break;case "quality":a.L.quality=k;break;case "reflections":a.L.reflections=k;break;case "refractions":a.L.refractions=k;break;case "sfx_mix_mode":a.ra.$A=k;break;case "shaders_dir":case "shaders_path":a.Sf.shaders_path=k;
break;case "shadows":a.L.shadows=k;break;case "show_hud_debug_info":a.L.show_hud_debug_info=k;break;case "smaa":b.nz("smaa");a.L.smaa=k;break;case "smaa_search_texture_path":b.nz("smaa_search_texture_path");a.Sf.smaa_search_texture_path=k;break;case "smaa_area_texture_path":b.nz("smaa_area_texture_path");a.Sf.smaa_area_texture_path=k;break;case "ssao":a.L.ssao=k;break;case "debug_view":a.L.debug_view=k;break;case "enable_selectable":a.L.enable_selectable=k;break;case "enable_outlining":a.L.enable_outlining=
k;break;case "outlining_overview_mode":a.zd.outlining_overview_mode=k;break;case "glow_materials":a.L.glow_materials=k;break;case "url_params":a.L.url_params=k;break;case "use_min50":a.L.use_min50=k;break;case "enable_texture_cache":a.L.enable_texture_cache=k;break;case "gl_debug":a.L.gl_debug=k;break;case "srgb_type":a.L.srgb_type=k;break;case "shadow_blur_samples":a.L.shadow_blur_samples=k;break;case "reflection_quality":a.L.reflection_quality=k;break;case "assets_gzip_available":a.L.assets_gzip_available=
k;break;case "debug_loading":a.L.debug_loading=k;break;case "msaa_samples":a.L.oc=k;break;default:b.error("Unknown config property: "+c)}};a.get=function(c){switch(c){case "allow_cors":return a.L.allow_cors;case "allow_hidpi":return a.L.allow_hidpi;case "alpha":return a.context.alpha;case "alpha_sort":return a.L.alpha_sort;case "alpha_sort_threshold":return a.L.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==a.L.stereo;case "animation_framerate":return a.eo.zz;case "anisotropic_filtering":return a.L.anisotropic_filtering;
case "antialiasing":return a.L.antialiasing;case "assets_dir":case "assets_path":return a.Ke.path;case "assets_dds_available":return a.Ke.pF;case "assets_pvr_available":return a.Ke.EB;case "assets_min50_available":return a.Ke.$G;case "audio":return a.ra.rJ;case "background_color":return a.L.background_color;case "bloom":return a.L.bloom;case "built_in_module_name":return a.Sf.py;case "canvas_resolution_factor":return a.L.canvas_resolution_factor;case "console_verbose":return a.L.console_verbose;case "compositing":return a.L.compositing;
case "dof":return a.L.dof;case "do_not_load_resources":return a.L.do_not_load_resources;case "is_mobile_device":return a.L.is_mobile_device;case "god_rays":return a.L.god_rays;case "stereo":return a.L.stereo;case "lod_leap_smooth_threshold":return a.L.lod_leap_smooth_threshold;case "lod_smooth_transitions":return a.L.lod_smooth_transitions;case "max_fps":return a.L.max_fps;case "max_fps_physics":return a.N.max_fps;case "media_auto_activation":return a.L.media_auto_activation;case "motion_blur":return a.L.motion_blur;
case "physics_enabled":return a.N.enabled;case "physics_uranium_path":return a.N.US;case "physics_uranium_bin":return a.N.mD;case "physics_use_wasm":return a.N.Pw;case "physics_calc_fps":return a.N.BE;case "physics_use_workers":return a.N.Op;case "precision":return a.L.precision;case "prevent_caching":return a.Ke.prevent_caching;case "quality":return a.L.quality;case "reflections":return a.L.reflections;case "refractions":return a.L.refractions;case "sfx_mix_mode":return a.ra.$A;case "shaders_dir":case "shaders_path":return a.Sf.shaders_path;
case "shadows":return a.L.shadows;case "show_hud_debug_info":return a.L.show_hud_debug_info;case "smaa":return a.L.smaa;case "smaa_search_texture_path":return a.Sf.smaa_search_texture_path;case "smaa_area_texture_path":return a.Sf.smaa_area_texture_path;case "ssao":return a.L.ssao;case "debug_view":return a.L.debug_view;case "enable_selectable":return a.L.enable_selectable;case "enable_outlining":return a.L.enable_outlining;case "outlining_overview_mode":return a.zd.outlining_overview_mode;case "glow_materials":return a.L.glow_materials;
case "url_params":return a.L.url_params;case "use_min50":return a.L.use_min50;case "enable_texture_cache":return a.L.enable_texture_cache;case "gl_debug":return a.L.gl_debug;case "srgb_type":return a.L.srgb_type;case "shadow_blur_samples":return a.L.shadow_blur_samples;case "reflection_quality":return a.L.reflection_quality;case "assets_gzip_available":return a.L.assets_gzip_available;case "debug_loading":return a.L.debug_loading;case "msaa_samples":return a.L.oc;default:b.error("Unknown config property: "+
c)}};a.reset=function(){for(var b in a.pM)a.context[b]=a.pM[b];for(b in a.RM)a.L[b]=a.RM[b];for(b in a.cL)a.Ke[b]=a.cL[b];for(b in a.kQ)a.N[b]=a.kQ[b];for(b in a.XQ)a.ds[b]=a.XQ[b];for(b in a.MR)a.ra[b]=a.MR[b];for(b in a.QM)a.Ao[b]=a.QM[b]};a.UH=function(){var b=a.Ni.Vq,c;for(c in a.oM)a.Ni[c]=a.oM[c];a.Ni.Vq=b};a.aP=p;a.Z3=function(){var b=a.Sf,k=a.N;p()||""!=b.shaders_path||(b.shaders_path=c()+"/"+b.v4);if(a.N.Pw&&window.WebAssembly)var b=k.nD+k.qT,m=k.nD+k.pT;else b=k.nD+k.bL,m=k.nD+k.PP;k.enabled&&
""==k.Jw&&(k.Jw=c()+"/"+b.replace("B4W_URANIUM_PATH=",""),k.mD=c()+"/"+m.replace("B4W_URANIUM_PATH=",""))};a.RF=function(b){var g=a.Ke;if(g.path)return g.path;var k=g.x2,p="B4W_ASSETS_PATH=";b&&(k=g.Q2,p="B4W_PROJ_ASSETS_PATH=",k=k.replace("__NAME__",b));k=k.replace(p,"");return k=k.replace("__JS__",c())}};b4w.module.__extensions=function(a,t){function p(a){if(a in m)return m[a];var b=M.getExtension(a)||null;m[a]=b;k.log("%cGET EXTENSION","color: #"+(b?"0a0":"a00"),a);return b}function c(a){if(a in m)return m[a];switch(a){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":var b={};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":b=M;break;default:b=M.getExtension(a)||null}m[a]=b;k.log("%cGET EXTENSION (WebGL 2)","color: #"+
(b?"0a0":"a00"),a);return b}var b=t("__config"),k=t("__print"),g=b.L,M=null,m={};a.wh=function(a){M=a};a.hO=function(){return p("WEBGL_compressed_texture_s3tc")||p("WEBKIT_WEBGL_compressed_texture_s3tc")};a.eO=function(){return p("WEBKIT_WEBGL_compressed_texture_pvrtc")||p("WEBGL_compressed_texture_pvrtc")};a.R_=function(){return g.Mb?c("WEBGL_depth_texture"):p("WEBGL_depth_texture")||p("WEBKIT_WEBGL_depth_texture")};a.QF=function(){return p("EXT_texture_filter_anisotropic")||p("WEBKIT_EXT_texture_filter_anisotropic")};
a.oO=function(){return g.Mb?c("EXT_shader_texture_lod"):p("EXT_shader_texture_lod")};a.P_=function(){return p("WEBGL_debug_shaders")};a.Uz=function(){return p("WEBGL_debug_renderer_info")};a.NN=function(){return g.Mb?c("OES_element_index_uint"):p("OES_element_index_uint")};a.gG=function(){return g.Mb?c("OES_standard_derivatives"):p("OES_standard_derivatives")};a.VF=function(){var a=g.Mb?c("EXT_disjoint_timer_query_webgl2"):p("EXT_disjoint_timer_query");return null==a?a:a.createQueryEXT?{createQuery:function(){return a.createQueryEXT()},
beginQuery:function(b){a.beginQueryEXT(a.TIME_ELAPSED_EXT,b)},endQuery:function(){a.endQueryEXT(a.TIME_ELAPSED_EXT)},zN:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_AVAILABLE_EXT)},AN:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_EXT)},yN:function(){return a.GPU_DISJOINT_EXT}}:{createQuery:function(){return M.createQuery()},beginQuery:function(b){M.beginQuery(a.TIME_ELAPSED_EXT,b)},endQuery:function(){M.endQuery(a.TIME_ELAPSED_EXT)},zN:function(a){return M.getQueryParameter(a,
M.QUERY_RESULT_AVAILABLE)},AN:function(a){return M.getQueryParameter(a,M.QUERY_RESULT)},yN:function(){return a.GPU_DISJOINT_EXT}}};a.g0=function(){if(g.Mb)return c("ANGLE_instanced_arrays");var a=p("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(b,c,e,g,k){a.drawElementsInstancedANGLE(b,c,e,g,k)},vertexAttribDivisor:function(b,c){a.vertexAttribDivisorANGLE(b,c)},drawArraysInstanced:function(b,c,e,g){a.drawArraysInstancedANGLE(b,c,e,g)}}};a.iG=function(){if(g.Mb)return c("OES_vertex_array_object");
var a=p("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(b){a.bindVertexArrayOES(b)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(b){a.deleteVertexArrayOES(b)},isVertexArray:function(b){return a.isVertexArrayOES(b)}}};a.Ja=function(){m={}};a.reset=function(){M=null}};b4w.module.__graph=function(a,t){function p(a,b,d){d||(d=null);c(a,b)?H.K("Graph already has node with given ID"):a.ga.push(b,d)}function c(a,b){for(var d=a.ga,c=0;c<d.length;c+=2)if(d[c]==b)return!0;return!1}function b(a,b,d,e){e||(e=null);c(a,b)&&c(a,d)?a.Ka.push(b,d,e):H.K("Wrong node IDs")}function k(a,b){c(a,b)||H.K("Node not found");for(var d=a.ga,f=0;f<d.length;f+=2)d[f]==b&&(d.splice(f,2),f-=2)}function g(a,b,d,c){E(a,b,d)||H.K("Edge not found");a=a.Ka;for(var f=0,e=0;e<a.length;e+=3)if(a[e]==
b&&a[e+1]==d){if(-1==c)a.splice(e,3);else{if(c==f){a.splice(e,3);break}f++}e-=3}}function M(a){a=a.ga;for(var b=-1,d=0;d<a.length;d+=2)b=Math.max(b,a[d]);return++b}function m(a,b){for(var d=a.ga,c=0;c<d.length;c+=2)if(d[c+1]==b)return d[c];return-1}function z(a){var b=[],d={};C(a,d);for(var c=a.ga,f=0;f<c.length;f+=2)0==l(a,c[f])&&h(a,c[f],d,b);return{ga:b,Ka:a.Ka.slice(0)}}function C(a,b){for(var d=a.ga,c=0;c<d.length;c+=2)b[d[c]]=!1}function h(a,b,d,c){if(!d[b]){d[b]=!0;for(var f=0;f<D(a,b);f++)h(a,
v(a,b,f),d,c);c.unshift(b,x(a,b))}}function e(a,b,d,c){if(!d[b]){d[b]=!0;if(10==c||30==c)for(var f=0;f<D(a,b);f++){var g=v(a,b,f);e(a,g,d,c)}if(20==c||30==c)for(f=0;f<l(a,b);f++)g=N(a,b,f),e(a,g,d,c)}}function A(a){for(var b=a.Ka,d=0;d<b.length;d+=3){var f=b[d+1];c(a,b[d])&&c(a,f)||(b.splice(d,3),d-=3)}}function q(a){for(var b=[],d=a.ga,c=0;c<d.length;c+=2){var f=d[c];D(a,f)||b.push(f)}return b}function P(a){var b=a.ga;a=a.Ka;for(var d=[],c=[],f=[],e=0;e<b.length;e++)f[b[2*e]]=e,d.push(e,b[2*e+1]);
for(e=0;e<a.length;e+=3)c.push(f[a[e]],f[a[e+1]],a[e+2]);return{ga:d,Ka:c}}function O(a,b,d){if(d.Ij==d.Ym){for(var c=0,f=0;c<d.Ym;c++)-1!=d.Uk[c]&&(a[f]=c,b[f]=d.Uk[c],f++);return!0}if(d.Ym>d.Ir||d.wn>d.xn||d.Fs>d.Hs||d.Es>d.Gs)return!1;for(var f=c=-1,e=!1;!e&&I(d,n,c,f);)if(c=n[0],f=n[1],u(d,c,f)){var g;g=d;e={};e.Zu=g.Zu;e.$u=g.$u;e.kH=g.kH;e.iz=g.iz;e.Ym=g.Ym;e.Ir=g.Ir;e.order=g.order;e.Ij=e.nB=g.Ij;e.Es=g.Es;e.Fs=g.Fs;e.wn=g.wn;e.Gs=g.Gs;e.Hs=g.Hs;e.xn=g.xn;e.Mt=-1;e.Uk=g.Uk;e.vo=g.vo;e.Vo=g.Vo;
e.Wo=g.Wo;e.qp=g.qp;e.rp=g.rp;e.jC=g.jC;g.jC[0]+=1;var e=g=e,h=c,k=f,K=e.Zu,x=e.$u,m=e.Ym,q=e.Ir,A=e.Uk,y=e.vo,H=e.Vo,p=e.Wo,E=e.qp,z=e.rp;J(h<m);J(k<q);J(e.Ij<m);J(e.Ij<q);m=++e.Ij;e.Mt=h;H[h]||(H[h]=m,e.Es++,E[h]&&e.wn++);E[h]||(E[h]=m,e.Fs++,H[h]&&e.wn++);p[k]||(p[k]=m,e.Gs++,z[k]&&e.xn++);z[k]||(z[k]=m,e.Hs++,p[k]&&e.xn++);A[h]=k;y[k]=h;for(A=0;A<l(K,h);A++)y=N(K,h,A),H[y]||(H[y]=m,e.Es++,E[y]&&e.wn++);for(A=0;A<D(K,h);A++)y=v(K,h,A),E[y]||(E[y]=m,e.Fs++,H[y]&&e.wn++);for(A=0;A<l(x,k);A++)y=N(x,
k,A),p[y]||(p[y]=m,e.Gs++,z[y]&&e.xn++);for(A=0;A<D(x,k);A++)y=v(x,k,A),z[y]||(z[y]=m,e.Hs++,p[y]&&e.xn++);e=O(a,b,g);J(1>=g.Ij-g.nB);J(-1!=g.Mt);y=g.Zu;h=g.$u;k=g.Ij;K=g.Mt;x=g.Uk;H=g.vo;m=g.Vo;p=g.Wo;q=g.qp;E=g.rp;if(g.nB<k){m[K]==k&&(m[K]=0);for(z=0;z<l(y,K);z++)A=N(y,K,z),m[A]==k&&(m[A]=0);q[K]==k&&(q[K]=0);for(z=0;z<D(y,K);z++)A=v(y,K,z),q[A]==k&&(q[A]=0);y=x[K];p[y]==k&&(p[y]=0);for(z=0;z<l(h,y);z++)A=N(h,y,z),p[A]==k&&(p[A]=0);E[y]==k&&(E[y]=0);for(z=0;z<D(h,y);z++)A=v(h,y,z),E[A]==k&&(E[A]=
0);x[K]=-1;H[y]=-1;g.Ij=g.nB;g.Mt=-1}}return e}function I(a,b,d,c){-1==d&&(d=0);-1==c?c=0:c++;var e=a.wn,f=a.xn,g=a.Fs,h=a.Hs,k=a.Es,l=a.Gs,n=a.Ij,x=a.Ym,m=a.Ir,q=a.Uk,G=a.vo,v=a.Vo,A=a.Wo,u=a.qp,y=a.rp;if(e>n&&f>n)for(;d<x&&(-1!=q[d]||0==u[d]||0==v[d]);)d++,c=0;else if(g>n&&h>n)for(;d<x&&(-1!=q[d]||0==u[d]);)d++,c=0;else if(k>n&&l>n)for(;d<x&&(-1!=q[d]||0==v[d]);)d++,c=0;else if(0==d&&0!=a.order){for(v=0;v<x&&-1!=q[d=a.order[v]];)v++;v==x&&(d=x)}else for(;d<x&&-1!=q[d];)d++,c=0;if(e>n&&f>n)for(;c<
m&&(-1!=G[c]||0==y[c]||0==A[c]);)c++;else if(g>n&&h>n)for(;c<m&&(-1!=G[c]||0==y[c]);)c++;else if(k>n&&l>n)for(;c<m&&(-1!=G[c]||0==A[c]);)c++;else for(;c<m&&-1!=G[c];)c++;return d<x&&c<m?(b[0]=d,b[1]=c,!0):!1}function u(a,b,d){var c=a.Zu,e=a.$u,f=a.Ir,g=a.Uk,h=a.vo,k=a.Vo,n=a.Wo,m=a.qp,q=a.rp;J(b<a.Ym);J(d<f);J(-1==g[b]);J(-1==h[d]);if(!(0,a.kH)(x(c,b),x(e,d)))return!1;for(var A=f=0,u=0,y=0,H=0,p=0,z=0;z<D(c,b);z++){var C=v(c,b,z);if(-1!=g[C]){var Z=g[C];if(!E(e,d,Z)||!U(a.iz,c,b,C,e,d,Z))return!1}else k[C]&&
u++,m[C]&&f++,k[C]||m[C]||H++}for(z=0;z<l(c,b);z++)if(C=N(c,b,z),-1!=g[C]){if(Z=g[C],!E(e,Z,d)||!U(a.iz,c,C,b,e,Z,d))return!1}else k[C]&&u++,m[C]&&f++,k[C]||m[C]||H++;for(z=0;z<D(e,d);z++)if(Z=v(e,d,z),-1!=h[Z]){if(C=h[Z],!E(c,b,C))return!1}else n[Z]&&y++,q[Z]&&A++,n[Z]||q[Z]||p++;for(z=0;z<l(e,d);z++)if(Z=N(e,d,z),-1!=h[Z]){if(C=h[Z],!E(c,C,b))return!1}else n[Z]&&y++,q[Z]&&A++,n[Z]||q[Z]||p++;return u<=y&&f<=A&&H<=p}function J(a){a||H.K("Assertion failed")}function x(a,b){for(var d=a.ga,c=0;c<d.length;c+=
2)if(d[c]==b)return d[c+1];return null}function D(a,b){for(var d=a.Ka,c=0,e=0;e<d.length;e+=3)d[e]==b&&c++;return c}function l(a,b){for(var d=a.Ka,c=0,e=0;e<d.length;e+=3)d[e+1]==b&&c++;return c}function v(a,b,d){a=a.Ka;for(var c=0,e=0;e<a.length;e+=3)if(a[e]==b){if(c==d)return a[e+1];c++}return-1}function N(a,b,d){a=a.Ka;for(var c=0,e=0;e<a.length;e+=3)if(a[e+1]==b){if(c==d)return a[e];c++}return-1}function E(a,b,d){a=a.Ka;for(var c=0;c<a.length;c+=3)if(a[c]==b&&a[c+1]==d)return!0;return!1}function U(a,
b,d,c,e,g,h){for(var f=L(b,d,c),r=L(e,g,h),k=0;k<f;k++){for(var l=!1,B=0;B<r;B++)if(a(y(b,d,c,k),y(e,g,h,B))){l=!0;break}if(!l)return!1}return!0}function L(a,b,d){var c=0;a=a.Ka;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==d&&c++;return c}function y(a,b,d,c){a=a.Ka;for(var e=0,f=0;f<a.length;f+=3)if(a[f]==b&&a[f+1]==d){if(e==c)return a[f+2];e++}return null}var H=t("__util"),n=[-1,-1];a.bE=-1;a.V6=10;a.cm=20;a.A8=30;a.create=function(){for(var a=arguments,b=[],d=[],c=0;c<a.length;c++){var e=a[c];switch(e.length){case 2:b.push(e[0],
e[1]);break;case 3:d.push(e[0],e[1],e[2]);break;default:H.K("Wrong graph constructor params")}}return{ga:b,Ka:d}};a.clone=function(a,b,d){if(b)for(var c=Array(a.ga.length),e=0;e<a.ga.length;e+=2)c[e]=a.ga[e],c[e+1]=b(a.ga[e+1]);else c=H.Y(a.ga);if(d)for(b=Array(a.Ka.length),e=0;e<a.Ka.length;e+=3)b[e]=a.Ka[e],b[e+1]=a.Ka[e+1],b[e+2]=d(a.Ka[e+2]);else b=H.Y(a.Ka);return a={ga:c,Ka:b}};a.j$=function(a,b){for(var d=[],c=[],e=0;e<a.length;e++)d.push(a[e][0],a[e][1]);for(e=0;e<b.length;e++)c.push(b[e][0],
b[e][1],b[e][2]);return{ga:d,Ka:c}};a.Ii=p;a.aca=c;a.Zc=b;a.Dg=k;a.jn=g;a.ij=function(a,b,d,c){E(a,b,d)||H.K("Edge not found");a=a.Ka;for(var e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==d&&a[e+2][0]==c[0]&&a[e+2][1]==c[1]){a.splice(e,3);break}};a.Z=function(a,b){if(-1==m(a,b)){var d=M(a);p(a,d,b);return d}H.K("Non-unique attribute")};a.i3=function(a,b,d,c,e){a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&a[f+2]==c&&(a[f+2]=e)};a.UK=function(a,c,d,e){d=d||[];e=e||[];for(var f={},g=0;g<a.ga.length;g+=
2){var h=a.ga[g],k=M(c);p(c,k,a.ga[g+1]);f[h]=k}for(g=0;g<a.Ka.length;g+=3){var k=f[a.Ka[g]],l=f[a.Ka[g+1]],h=a.Ka[g+2];b(c,k,l,h)}for(g=0;g<d.length;g+=3)k=f[d[g]],a=d[g+1],h=d[g+2],b(c,k,a,h);for(g=0;g<e.length;g+=3)d=e[g],l=f[e[g+1]],h=e[g+2],b(c,d,l,h)};a.hl=M;a.zl=m;a.I=function(a,c,d,e){c=m(a,c);d=m(a,d);-1!=c&&-1!=d?b(a,c,d,e):H.K("Attributes not found")};a.ja=function(a,b){for(var d=a.ga,c=0;c<d.length&&!b(d[c],d[c+1]);c+=2);};a.yi=function(a,b){for(var d=a.Ka,c=0;c<d.length&&!b(d[c],d[c+
1],d[c+2]);c+=3);};a.Xl=function(a,b,d){for(var c=a.Ka,e=0;e<c.length;e+=3)if(c[e+1]==b){var f=c[e];if(d(f,x(a,f),c[e+2]))break}};a.Bn=function(a,b,d){for(var c=a.Ka,e=0;e<c.length;e+=3)if(c[e]==b){var f=c[e+1];if(d(f,x(a,f),c[e+2]))break}};a.TI=z;a.h5=function(a){a=z(a).ga;for(var b=[],d=0;d<a.length;d+=2)b.push(a[d+1]);return b};a.Eca=function(){};a.un=function(a,b,d){c(a,b)||H.K("No such node");var f={};C(a,f);e(a,b,f,d);b=[];for(var g in f)f[g]&&(g=Number(g),b.push(g,x(a,g)));a={ga:b,Ka:a.Ka.slice(0)};
A(a);return a};a.NE=A;a.n0=function(a){for(var b=[],d=a.ga,c=0;c<d.length;c+=2){var e=d[c];l(a,e)||b.push(e)}return b};a.cv=q;a.match=function(a,b,d,c){var e={};e.Zu=P(a);e.$u=P(b);e.kH=d||function(a,b){return a==b};e.iz=c||function(a,b){return a==b};c=a.ga.length/2;var f=b.ga.length/2;e.Ym=c;e.Ir=f;e.order=0;e.Ij=e.nB=0;e.wn=e.Es=e.Fs=0;e.xn=e.Gs=e.Hs=0;e.Mt=-1;e.Uk=Array(c);e.vo=Array(f);e.Vo=Array(c);e.Wo=Array(f);e.qp=Array(c);e.rp=Array(f);e.jC=[1];for(d=0;d<c;d++)e.Uk[d]=-1,e.Vo[d]=0,e.qp[d]=
0;for(d=0;d<f;d++)e.vo[d]=-1,e.Wo[d]=0,e.rp[d]=0;f=Array(c);c=Array(c);if(O(f,c,e)){for(d=0;d<f.length;d++)f[d]=a.ga[2*f[d]],c[d]=b.ga[2*c[d]];return[f,c]}return null};a.j0=function(a,b){for(var d=a.ga,c=1;c<d.length;c+=2)if(d[c]==b)return d[c-1];return null};a.lb=x;a.th=D;a.Xj=l;a.Zh=v;a.kh=N;a.Waa=L;a.ld=y;a.replace=function(a,b,d){for(var c=a.Ka,e=M(a),f=0;f<b.length;f++){var g=b[f];k(a,g);for(var h=0;h<c.length;h+=3)c[h]==g&&(c[h]=e),c[h+1]==g&&(c[h+1]=e),c[h]==c[h+1]&&(c.splice(h,3),h-=3)}p(a,
e,d)};a.X2=function(a,b,d,c,e){E(a,b,d)||H.K("Edge not found");a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&(a[f]=c,a[f+1]=e)};a.PZ=function(a,b){function d(a,b){if(-1!=k.indexOf(a)){var c=k.slice(k.indexOf(a));if(-1!=e[c[c.length-1]].indexOf(c[0])){l.push([a,c[c.length-1]]);return}}k.push(a);for(c=0;c<b.length;c++)b[c]in e&&d(b[c],e[b[c]])}b||(b=q(a)[0]);var c=a.Ka;if(c.length&&-1!=c.indexOf(b)){for(var e={},f=0,h=0;h<c.length;h+=3)c[h+1]in e?e[c[h+1]].push(c[h]):e[c[h+1]]=[c[h]],f++;var k=
[],l=[];d(b,e[b]);for(h=0;h<l.length;h++)for(var n=f=0;n<c.length;n+=3)l[h][1]==c[n+1]&&l[h][0]==c[n]&&g(a,c[n],c[n+1],f),f++}};a.PM=function(a,b,d){var c=a.ga;a=a.Ka;var e;e="digraph debug {\n    node [shape=box];\n";for(var f=0;f<c.length;f+=2){var g=c[f],h=c[f+1],h=b?b(g,h):String(g);e+="    ";e+=String(g)+' [label="'+h.replace(/\"/g,'\\"')+'"];\n'}for(f=0;f<a.length;f+=3)b=a[f],c=a[f+1],h=a[f+2],e+="    ",e+=String(b)+" -> "+String(c),d&&(e+=' [label="'+d(b,c,h)+'"]'),e+=";\n";return e+"}"}};b4w.module.__nodemat=function(a,t){function p(a,b,d,f,h){var k="";ta.Ya()&&(k=ta.R().uuid);k=O(b,f,k,h);if(k in Ea)return Ea[k];var B={Da:null,id:k,ZL:!0};d||(Ga={},Qa=0);if("SHADOW"!=f&&"COLOR_ID"!=f){b=V.create();for(var n=a.nodes,w=0;w<n.length;w++)if(null==K(b,n[w],0,f,h))return Ea[k]=null,B;if(d&&-1==r(a,b,"GROUP_OUTPUT","group"))return B;w=ya(b);h=d?a.links:a.links.slice();if(!Q(b,h,w))return B;if(d)return B.Da=b,B;for(w=0;w<h.length;w++){d=h[w];for(var n=v(d.from_node,b),x=v(d.to_node,b),m=
0;m<n.length;m++)for(var y=0;y<x.length;y++){var H=n[m],ia=x[y],Aa=V.lb(b,H),E=V.lb(b,ia);if(!F(b,H,ia,Aa,E,d))return Ea[k]=null,B}}l(b);w=!1;h=-1;"GLOW"==f?h=r(a,b,"B4W_GLOW_OUTPUT","material",!0):(h=r(a,b,"OUTPUT","material",!1,!0),-1==h&&(h=r(a,b,"OUTPUT_MATERIAL","material",!1,!0)),-1==h&&(h=r(a,b,"OUTPUT_WORLD","material",!1,!0),w=!0));-1==h&&(b=u(),h=0);N(b);a=V.un(b,h,V.cm);w?(e(a),A(a,f),q(a),P(a)):(c(a),g(a));J(a);U(a);G(a);D(a,f);Y(a)}else f=p(a,b,d,"MAIN",h),f=V.clone(f.Da,function(a){var b=
Pa.nu(a);b.inputs=Pa.Y(a.inputs);b.outputs=Pa.Y(a.outputs);return b}),h=r(a,f,"OUTPUT","material",!1,!0),-1==h&&(h=r(a,f,"OUTPUT_MATERIAL","material",!1,!0)),I(f,h),a=V.un(f,h,V.cm),J(a);B.Da=a;return Ea[k]=B}function c(a){var d=[];V.ja(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||d.push({rf:a,node:b})});for(var c=0;c<d.length;++c){var e=d[c].rf,f=d[c].node,g=V.hl(a);V.Ii(a,g,f.data.Q1);var h=V.hl(a);V.Ii(a,h,f.data.S1);V.Zc(a,g,h,[4,2]);for(var k={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},r=V.Xj(a,e),l=[],B=[],F=[],n={},w=0;w<r;w++){var K=V.kh(a,e,w);K in n||(n[K]=0);var x=V.ld(a,K,e,n[K]++);l.push([K,e,x]);var m=k[x[1]];if(m)switch(m[0]){case "MATERIAL_END":B.push([K,h,[x[0],m[1]]]);break;case "LIGHTING_APPLY":F.push([K,[x[0],m[1]]])}else B.push([K,g,x])}b(a,f.data.value,g,h,F);for(w=0;w<l.length;w++)V.ij(a,l[w][0],l[w][1],l[w][2]);for(w=0;w<B.length;w++)V.Zc(a,B[w][0],B[w][1],B[w][2]);f=V.th(a,e);g=[];k=[];r={};for(w=
0;w<f;w++)l=V.Zh(a,e,w),l in r||(r[l]=0),x=V.ld(a,e,l,r[l]++),g.push([e,l,x]),k.push([h,l,x]);for(w=0;w<g.length;w++)V.ij(a,g[w][0],g[w][1],g[w][2]);for(w=0;w<k.length;w++)V.Zc(a,k[w][0],k[w][1],k[w][2]);V.Dg(a,e)}}function b(a,b,d,c,e){var f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=K(a,f,0,null,null),h=g;k(a,d,g,"E");k(a,d,g,"A");k(a,d,g,"D");g=ta.R();g=w.xc(g,"LAMP",w.Vc);if(!b.Nc)for(var r,l,B,F=0;F<g.length;F++){B=g[F].xd;f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};r=K(a,f,0,null,
null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};l=K(a,f,0,null,null);k(a,h,l,"color");k(a,h,l,"specular");k(a,r,l,"ldir");k(a,d,l,"normal");k(a,d,l,"D");k(a,d,l,"S");k(a,r,l,"lcolorint");k(a,d,r,"shadow_factor");h="SPECULAR_"+b.Xf;f={name:h,type:h,use_tangent_shading:b.xf};h=K(a,f,0,null,null);k(a,r,h,"ldir");k(a,r,h,"lfac");k(a,d,h,"normal");k(a,h,l,"sfactor");k(a,r,h,"norm_fac");k(a,d,h,"sp_params");h="HEMI"==B.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+b.Jf;f={name:h,type:h,use_tangent_shading:b.xf};
B=K(a,f,0,null,null);k(a,r,B,"ldir");k(a,r,B,"lfac");k(a,d,B,"normal");k(a,r,B,"norm_fac");k(a,B,l,"lfactor");"DIFFUSE_LAMBERT"!=h&&k(a,d,B,"dif_params");for(r=0;r<e.length;r++)V.Zc(a,e[r][0],l,e[r][1]);h=l}k(a,h,c,"color");k(a,h,c,"specular")}function k(a,b,d,c){for(var e=V.lb(a,b),f=-1,g=V.lb(a,d).inputs,h=0;h<g.length;h++)if(c==g[h].identifier){f=h;break}if(-1!=f){for(var k=-1,e=e.outputs,h=0;h<e.length;h++)if(c==e[h].identifier){k=h;break}-1!=k&&(V.Zc(a,b,d,[k,f]),e[k].Va=!0,g[f].Va=!0)}}function g(a){var b=
[];V.ja(a,function(a,d){"OUTPUT_MATERIAL"==d.type&&b.push({rf:a,node:d})});for(var d=0;d<b.length;++d){var c=b[d].rf,e=b[d].node,f=!1,g=!1,h=V.hl(a);V.Ii(a,h,e.data.q2);for(var k=V.Xj(a,c),r=[],l=[],B={},F=0;F<k;F++){var w=V.kh(a,c,F);w in B||(B[w]=0);var n=V.ld(a,w,c,B[w]++);r.push([w,c,n]);switch(n[1]){case 0:f=!0;l.push([w,h,n]);break;case 2:var g=!0,K=V.hl(a);V.Ii(a,K,e.data.xZ);l.push([w,K,[n[0],0]])}}for(F=0;F<r.length;F++)V.ij(a,r[F][0],r[F][1],r[F][2]);for(F=0;F<l.length;F++)V.Zc(a,l[F][0],
l[F][1],l[F][2]);V.Dg(a,c);f?(g&&M(a,h,K),C(a)):(c=V.lb(a,h),a.ga=[0,c],a.Ka=[])}}function M(a,b,d){b=V.un(a,b,V.cm);var c=z(b);if(c.length){d=V.un(a,d,V.cm);d=V.clone(d,qa,ia);V.ja(d,function(a,b){b.name="displacement%join%"+b.name});V.UK(d,b,[],[]);var e=-1;V.ja(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return e=a,1});for(d=0;d<c.length;d++){var f=c[d],g=V.lb(b,f);k(b,e,f,"Normal");m(g)}}a.ga=b.ga;a.Ka=b.Ka}function m(a){a=a.jb;for(var b=0;b<a.length;b++){var d=a[b];"USE_NORMAL_IN"==d[0]&&
(d[1]=1)}}function z(a){var b=[];V.ja(a,function(a,d){for(var c=!1,e=d.inputs,f=0;f<e.length;f++)if("Normal"==e[f].identifier){c=!e[f].Va;break}c&&b.push(a)});return b}function C(a){var b=[];V.ja(a,function(a,d){"OUTPUT_SURFACE"==d.type&&b.push({rf:a,node:d})});var d=[];b.length&&V.ja(a,function(a,b){"MIX_SHADER"==b.type&&d.push({rf:a,node:b})});for(var c=0;c<b.length;++c){var e=b[c].rf,f=b[c].node,g=V.hl(a);V.Ii(a,g,f.data.VW);var k=V.hl(a);V.Ii(a,k,f.data.WW);V.Zc(a,g,k,[4,2]);for(var r=V.Xj(a,
e),l=[],B=[],F={},w=0;w<r;w++){var n=V.kh(a,e,w),K=V.lb(a,n);n in F||(F[n]=0);var x=V.ld(a,n,e,F[n]++);l.push([n,e,x]);B.push([n,g,x]);if("BSDF_GLOSSY"==K.type||"BSDF_DIFFUSE"==K.type||"MIX_SHADER"==K.type||"EMISSION"==K.type||"BSDF_TRANSPARENT"==K.type)for(B.push([n,g,[1,1]]),B.push([n,g,[2,2]]),B.push([n,g,[3,3]]),B.push([n,g,[4,4]]),B.push([n,g,[5,5]]),B.push([n,g,[6,6]]),B.push([n,g,[7,7]]),B.push([n,g,[8,8]]),B.push([n,g,[9,9]]),B.push([n,g,[10,10]]),n=0;n<d.length;++n)for(var K=d[n].rf,x=V.Xj(a,
K),m=0;m<x;m++){var q=V.kh(a,K,m),v=V.lb(a,q),A=V.ld(a,q,K,0);0==A[1]||"BSDF_GLOSSY"!=v.type&&"BSDF_DIFFUSE"!=v.type&&"MIX_SHADER"!=v.type&&"EMISSION"!=v.type&&"BSDF_TRANSPARENT"!=v.type||(v=1==A[1]?3:13,B.push([q,K,[1,v]]),B.push([q,K,[2,v+1]]),B.push([q,K,[3,v+2]]),B.push([q,K,[4,v+3]]),B.push([q,K,[5,v+4]]),B.push([q,K,[6,v+5]]),B.push([q,K,[7,v+6]]),B.push([q,K,[8,v+7]]),B.push([q,K,[9,v+8]]),B.push([q,K,[10,v+9]]))}}h(a,f.data.value,g,k);B.push([k,e,[0,0]]);for(w=0;w<l.length;w++)V.ij(a,l[w][0],
l[w][1],l[w][2]);for(w=0;w<B.length;w++)V.Zc(a,B[w][0],B[w][1],B[w][2])}}function h(a,b,d,c){var e=[],f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=K(a,f,0,null,null),h=g;k(a,d,g,"E");k(a,d,g,"A");k(a,d,g,"D");for(var g=ta.R(),g=w.xc(g,"LAMP",w.Vc),r,l,B=0;B<g.length;B++){f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};r=K(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};l=K(a,f,0,null,null);k(a,h,l,"color");k(a,h,l,"specular");k(a,r,l,"ldir");k(a,d,l,"normal");k(a,d,l,"D");
k(a,d,l,"S");k(a,r,l,"lcolorint");k(a,d,r,"shadow_factor");h=b.XW;f={name:h,type:h};h=K(a,f,0,null,null);k(a,r,h,"ldir");k(a,r,h,"lfac");k(a,d,h,"normal");k(a,r,h,"norm_fac");k(a,d,h,"bsdf_params");k(a,h,l,"lfactor");k(a,h,l,"sfactor");for(h=0;h<e.length;h++)V.Zc(a,e[h][0],l,e[h][1]);h=l}k(a,d,c,"bsdf_params");k(a,d,c,"d_color");k(a,d,c,"s_color");k(a,d,c,"e_color");k(a,d,c,"emission");k(a,d,c,"a_color");k(a,d,c,"alpha");k(a,h,c,"color");k(a,h,c,"specular")}function e(a){var b=[];V.ja(a,function(a,
d){"OUTPUT_WORLD"==d.type&&b.push({rf:a,node:d})});for(var d=0;d<b.length;++d){var c=b[d].rf,e=b[d].node,f=V.hl(a);V.Ii(a,f,e.data.r2);for(var e=V.Xj(a,c),g=[],h=[],k={},r=0;r<e;r++){var l=V.kh(a,c,r);l in k||(k[l]=0);var B=V.ld(a,l,c,k[l]++);g.push([l,c,B]);switch(B[1]){case 0:h.push([l,f,B])}}for(r=0;r<g.length;r++)V.ij(a,g[r][0],g[r][1],g[r][2]);for(r=0;r<h.length;r++)V.Zc(a,h[r][0],h[r][1],h[r][2]);V.Dg(a,c)}}function A(a,b){var d=[];V.ja(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||
d.push({rf:a,node:b})});if(d.length)for(var c={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},e=0;e<d.length;e++){var f=d[e].rf,g=d[e].node;c.name=g.name;c.fac=g.inputs[0].Qa;c.fac_is_linked=g.inputs[0].Va;c.color1_is_linked=g.inputs[1].Va;c.color2_is_linked=g.inputs[2].Va;switch(g.type){case "ADD_SHADER":c.type="ADD_WORLD_RGB";break;case "MIX_SHADER":c.type="MIX_WORLD_RGB"}for(var g=K(a,c,0,b,null),h=V.Xj(a,f),r=[],k=[],l={},B=0;B<h;B++){var F=V.kh(a,f,B);F in l||(l[F]=0);var w=V.ld(a,F,
f,l[F]++);r.push([F,f,w]);k.push([F,g,w])}for(B=0;B<r.length;B++)V.ij(a,r[B][0],r[B][1],r[B][2]);for(B=0;B<k.length;B++)V.Zc(a,k[B][0],k[B][1],k[B][2]);h=V.th(a,f);r=[];k=[];l={};for(B=0;B<h;B++)F=V.Zh(a,f,B),F in l||(l[F]=0),w=V.ld(a,f,F,l[F]++),r.push([f,F,w]),k.push([g,F,w]);for(B=0;B<r.length;B++)V.ij(a,r[B][0],r[B][1],r[B][2]);for(B=0;B<k.length;B++)V.Zc(a,k[B][0],k[B][1],k[B][2]);V.Dg(a,f)}}function q(a){var b=-1,d=[],c=[],e="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
V.ja(a,function(a,c){switch(e.indexOf(c.type)){case -1:d.push({rf:a,node:c});break;case 0:b=a}});for(var f=0;f<d.length;f++)for(var g=d[f].rf,h=V.th(a,g),r={},k=0;k<h;k++){var l=V.Zh(a,g,k);l in r||(r[l]=0);var B=V.ld(a,g,l,r[l]++);c.push([g,l,B])}for(f=0;f<c.length;f++)V.ij(a,c[f][0],c[f][1],c[f][2]);c.length&&(c=V.un(a,b,V.cm),a.ga=c.ga,a.Ka=c.Ka)}function P(a){var b=-1,d=[],c=[];V.ja(a,function(a,c){switch(c.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var e={rf:a,node:c};d.push(e);break;case "OUTPUT_WORLD_SURFACE":b=
a,e={rf:a,node:c},d.push(e)}});for(var e=0;e<d.length;e++)for(var f=d[e].rf,g=d[e].node,h=V.Xj(a,f),r={},k=0;k<h;k++){var l=V.kh(a,f,k),B=V.lb(a,l);l in r||(r[l]=0);var F=V.ld(a,l,f,r[l]++);"OUTPUT_WORLD_SURFACE"!=g.type&&0==F[1]||"ADD_WORLD_RGB"==B.type||"MIX_WORLD_RGB"==B.type||"BACKGROUND"==B.type||c.push([l,f,F])}for(e=0;e<c.length;e++)V.ij(a,c[e][0],c[e][1],c[e][2]);c.length&&(c=V.un(a,b,V.cm),a.ga=c.ga,a.Ka=c.Ka)}function O(a,b,d,c){a+=d;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+=
"00";default:a+="10"}c&&c.nJ&&(a+=c.nJ);c&&c.mJ&&(a+=c.mJ);return a}function I(a,b){V.yi(a,function(d,c,e){var f=V.lb(a,c);c==b&&"Color"==f.inputs[e[1]].identifier&&V.ij(a,d,c,e)})}function u(){var a=V.create();V.Ii(a,0,{data:null,jb:[],nb:[],inputs:[{Qa:new Float32Array([0,0,0]),identifier:"Color",Va:!1,name:"Color"},{Qa:1,identifier:"Alpha",Va:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",yf:[]});return a}function J(a){V.ja(a,function(b,d){for(var c=d.inputs,e=d.outputs,f=0;f<c.length;f++)x(a,c[f],
b,f,1);for(f=0;f<e.length;f++)x(a,e[f],b,f,0)})}function x(a,b,d,c,e){if(b.Va){var f=!0;V.yi(a,function(a,b,g){if(!e&&a==d&&g[0]==c||e&&b==d&&g[1]==c)f=!1});f&&(b.Va=!1)}}function D(a,b){var d=[];V.yi(a,function(c,e,f){var g=V.lb(a,c),h=V.lb(a,e),g=Pa.Yi(g.outputs[f[0]].Qa),h=Pa.Yi(h.inputs[f[1]].Qa);if(g!=h){var r,k={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},l={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};g&&!h?r=ha("vector_to_scalar","B4W_VECTOSCAL",
[k],[l]):!g&&h&&(r=ha("scalar_to_vector","B4W_SCALTOVEC",[l],[k]));K(a,r,0,b,null);d.push([c,e,a.ga[a.ga.length-2],f])}});for(var c=0;c<d.length;++c)V.ij(a,d[c][0],d[c][1],d[c][3]),V.Zc(a,d[c][0],d[c][2],[d[c][3][0],0]),V.Zc(a,d[c][2],d[c][1],[0,d[c][3][1]])}function l(a){var b=[];V.ja(a,function(d,c){switch(c.type){case "B4W_TRANSLUCENCY":V.yi(a,function(e,f,g){var h=V.lb(a,f);e==d&&"MATERIAL_EXT"==h.type&&"Translucency"==c.outputs[g[0]].name&&b.push(e,f,[g[0]+1,g[1]+1])})}});for(var d=0;d<b.length;d+=
3)V.Zc(a,b[d],b[d+1],b[d+2])}function v(a,b){var d=[];V.ja(b,function(b,c){c.name==a.name&&d.push(b)});if(d.length)return d;Pa.K("Node not found")}function N(a){var b=[];V.ja(a,function(a,d){"B4W_PARALLAX"!=d.type&&"REROUTE"!=d.type||b.push(a,d)});for(var d=0;d<b.length;d+=2){var c=b[d],e=b[d+1];if("B4W_PARALLAX"==e.type)E(a,c,e);else if("REROUTE"==e.type){for(var f=V.kh(a,c,0),g=V.th(a,c),h=[],r=[],k=[],l=0;l<g;l++){var B=V.Zh(a,c,l),F=r.indexOf(B),w=V.ld(a,c,B,0<=F?k[F]:0);if(w){var w=w[1],n=e.inputs[0].Qa,
w=V.lb(a,B).inputs[w];switch(typeof n){case "number":if("object"==typeof w.Qa)for(var K=w.Qa,w=0;w<K.length;w++)K[w]=n;else"number"==typeof w.Qa&&(w.Qa=n);break;case "object":if("object"==typeof w.Qa)for(K=w.Qa,w=0;w<K.length;w++)K[w]=n[w];else"number"==typeof w.Qa&&(w.Qa=.35*n[0]+.45*n[1]+.2*n[2])}}n=e.outputs;for(w=0;w<n.length;w++)n[w].Qa=e.inputs[0].Qa;-1!=F?k[F]+=1:(r.push(B),k.push(1),h.push(c,B))}if(-1!=f)for(e=V.ld(a,f,c,0)[0],l=0;l<r.length;l++)for(w=0;w<k[l];w++)g=V.ld(a,c,r[l],w)[1],V.Zc(a,
f,r[l],[e,g]);for(l=0;l<h.length;l+=2)V.jn(a,h[l],h[l+1],-1)}}}function E(a,b,d){var c;a:{c=a.Ka;for(var e=0;e<c.length;e+=3)if(c[e+1]==b&&1==c[e+2][1]){c=c[e];break a}c=-1}-1!=c&&(e=V.lb(a,c),d.data=e.data,V.jn(a,c,b,-1),0==V.th(a,c)&&(b=V.kh(a,c,0),-1!=b&&V.jn(a,b,c,-1),V.Dg(a,c)));d.inputs.splice(1,1)}function U(a){H(a);W(a);L(a)}function L(a){var b={};V.ja(a,function(a,d){if("GEOMETRY_UV"==d.type||"UVMAP"==d.type||"TEX_COORD_UV"==d.type){var c=d.data.value;c in b||(b[c]=[]);b[c].push(a,d)}});
for(var d in b){var c=b[d];if(2<c.length)for(var e=y(d),e=K(a,e,0,void 0,null),f=V.lb(a,e),g=0;g<c.length;g+=2){for(var h=c[g],r=c[g+1],k=[],l={},B=V.th(a,h),F=0;F<B;F++){var w=V.Zh(a,h,F);w in l||(l[w]=0);var n=V.ld(a,h,w,l[w]);l[w]++;k.push(h,w,n);n=n.splice(0,n.length);switch(r.type){case "GEOMETRY_UV":n[0]=0;f.outputs[0].Va=!0;break;case "UVMAP":case "TEX_COORD_UV":n[0]=1,f.outputs[1].Va=!0}V.Zc(a,e,w,n)}for(F=0;F<k.length;F+=3)V.jn(a,k[F],k[F+1],0);V.Dg(a,h)}}}function y(a){var b=ha("merged_uv",
"UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function H(a){var b=[];V.ja(a,function(a,d){"GEOMETRY_VC"!=d.type&&"GEOMETRY_NO"!=d.type&&"GEOMETRY_FB"!=d.type&&"GEOMETRY_VW"!=d.type&&"GEOMETRY_GL"!=d.type&&"GEOMETRY_LO"!=d.type&&"GEOMETRY_OR"!=d.type&&"GEOMETRY_BF"!=d.type&&"GEOMETRY_IN"!=d.type||b.push(a,d)});for(var c=[],e=0;e<b.length;e+=2){for(var f=b[e],
g=b[e+1],h=!0,r=0;r<c.length;r++){var k=c[r];if(d(g,k.ah)){for(var h=[],r=V.th(a,f),l=0;l<r;l++){var B=V.Zh(a,f,l),F=V.ld(a,f,B,0);h.push(f,B,F);V.Zc(a,k.id,B,F)}for(l=0;l<h.length;l+=3)V.jn(a,h[l],h[l+1],0);V.Dg(a,f);h=!1;break}}h&&(k={id:f,ah:g},c.push(k))}}function n(a){for(var b={},d=0;d<a.ga.length;d+=2){var c=a.ga[d];b[c]={Rt:{},cP:!1}}for(d=0;d<a.Ka.length;d+=3)b[a.Ka[d+1]].Rt[a.Ka[d]]=!0;for(c in b)f(c,b);for(c in b)b[c]=Object.keys(b[c].Rt).map(function(a){return parseInt(a,10)});return b}
function f(a,b){var d=b[a];if(!d.cP){var c=Pa.Y(d),e;for(e in d.Rt){f(e,b);var d=b[e],g;for(g in d.Rt)c.Rt[g]=!0}c.cP=!0;b[a]=c}}function W(a){var b=[];V.ja(a,function(a,d){"TEXTURE_COLOR"!=d.type&&"TEXTURE_NORMAL"!=d.type||b.push(a,d)});if(b.length){for(var c=n(a),e=[],f=0;f<b.length;f+=2){for(var g=b[f],h=b[f+1],r=!0,k=0;k<e.length;k++){var l=e[k];if(!(3<=l.Gr.length||!d(h,l.ah)||-1<c[g].indexOf(l.id)||-1<c[l.id].indexOf(g))){for(var B=!1,F=0;F<l.Gr.length;F++){var w=l.Gr[F].id;if(-1<c[g].indexOf(w)||
-1<c[w].indexOf(g)){B=!0;break}}if(!B){for(var k=[],w=V.Xj(a,g),K={},F=0;F<w;F++)B=V.kh(a,g,F),B in K||(K[B]=0),r=V.ld(a,B,g,K[B]++),k.push(B,g,r);for(var w=[],K=V.th(a,g),x={},F=0;F<K;F++)B=V.Zh(a,g,F),B in x||(x[B]=0),r=V.ld(a,g,B,x[B]++),w.push(g,B,r);r=k.concat(w);for(F=0;F<r.length;F+=3)V.jn(a,r[F],r[F+1],0);V.Dg(a,g);F={id:g,ah:h,HZ:k,IZ:w};l.Gr.push(F);r=!1;break}}}r&&(l={id:g,ah:h,Gr:[]},e.push(l))}for(f=0;f<e.length;f++){l=e[f];c=l.Gr.length;for(k=0;k<c;k++){h=l.Gr[k];F=h.ah;g=h.HZ;h=h.IZ;
l.ah.inputs[k+1].Va=F.inputs[0].Va;l.ah.inputs[k+1].Qa=F.inputs[0].Qa;l.ah.outputs[2*(k+1)].Va=F.outputs[0].Va;l.ah.outputs[2*(k+1)].Qa=F.outputs[0].Qa;l.ah.outputs[2*(k+1)+1].Va=F.outputs[1].Va;l.ah.outputs[2*(k+1)+1].Qa=F.outputs[1].Qa;for(F=0;F<g.length;F+=3)B=g[F],r=g[F+2],r[1]+=k+1,V.Zc(a,B,l.id,r);for(F=0;F<h.length;F+=3)B=h[F+1],r=h[F+2],r[0]+=2*(k+1),V.Zc(a,l.id,B,r);l.ah.jb.push(["USE_uv"+(k+2),1])}V.Dg(a,l.id);V.Ii(a,l.id,l.ah)}}}function d(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":for(var d=a.jb,c=-1,e=0;e<d.length;e++){var f=d[e];if("USE_NORMAL_IN"==f[0]){c=f[1];break}}d=b.jb;f=-1;for(e=0;e<d.length;e++){var g=d[e];if("USE_NORMAL_IN"==g[0]){f=g[1];break}}return c===f;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.my==b.data.my&&a.data.value.Uo==b.data.value.Uo;case "VALUE":case "RGB":return a.Rf==
b.Rf;default:return!1}}function G(a){var b=[],d=[];V.ja(a,function(a,c){"GEOMETRY_VC"==c.type&&b.push(a,c);"GEOMETRY_VW"==c.type&&d.push(a,c)});B(a,b);S(a,d)}function B(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],e=b[d+1],f=!1,g=[],h=[],k=[[],[],[]],r=V.th(a,c),l=0;l<r;l++){var B=V.Zh(a,c,l);if("SEPRGB"!=V.lb(a,B).type){f=!1;break}g.push(c,B);for(var F={},w=V.th(a,B),f=0;f<w;f++){var n=V.Zh(a,B,f);n in F||(F[n]=0);var K=V.ld(a,B,n,F[n]++);g.push(B,n);k[K[0]].push(c,n,K)}h.push(B);f=!0}if(f){for(l=
c=r=0;l<k.length;l++)k[l].length&&(r++,c|=1<<2-l);if(r){e.type+=r;e.outputs=[];for(l=0;l<k.length;l++)if(k[l].length)for(e.outputs.push({Qa:0,identifier:"RGB"[l],Va:!0,name:"RGB"[l]}),f=0;f<k[l].length;f+=3)k[l][f+2][0]=Pa.cs(c,l);for(l=0;l<g.length;l+=2)V.jn(a,g[l],g[l+1],0);for(l=0;l<h.length;l++)V.Dg(a,h[l]);for(l=0;l<k.length;l++)for(f=0;f<k[l].length;f+=3)V.Zc(a,k[l][f],k[l][f+1],k[l][f+2])}}}}function S(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],e=!0,f=[],g=V.th(a,c),h=0;h<g;h++){var k=
V.Zh(a,c,h);if("B4W_REFLECT"==V.lb(a,k).type){var l=V.ld(a,c,k,0),r=V.ld(a,c,k,1);l&&1==l[1]||r&&1==r[1]?e=!1:f.push(c,k)}else e=!1}for(h=0;h<f.length;h+=2)g=a,l=f[h],k=f[h+1],r=V.lb(g,k),r.type+="_WORLD",V.jn(g,l,k,0),r.inputs.splice(0,1),l=V.kh(g,k,0),l!=V.bE&&(V.ld(g,l,k,0)[1]=0);e&&V.Dg(a,c)}}function r(a,b,d,c,e,f){a=a.nodes;for(var g=null,h=0;h<a.length;h++){var k=a[h];e?"GROUP"==k.type&&k.node_tree_name==d&&(g=k):k.type==d&&(g=k)}return g?v(g,b)[0]:(f||Da.error('No "'+d+'" node in node '+c),
-1)}function ha(a,b,d,c){return{name:a,type:b,inputs:d,outputs:c}}function qa(a){var b={name:"",Rf:"",type:"",yf:[],inputs:[],outputs:[],nb:[],data:null,jb:[]};b.name=a.name;b.Rf=a.Rf;b.type=a.type;for(var d=b.yf,c=a.yf,e=0;e<c.length;e++)d.push(za(c[e]));d=b.nb;c=a.nb;for(e=0;e<c.length;e++)d.push(za(c[e]));d=b.inputs;c=a.inputs;for(e=0;e<c.length;e++)d.push(na(c[e]));d=b.outputs;c=a.outputs;for(e=0;e<c.length;e++)d.push(na(c[e]));d=b.jb;c=a.jb;for(e=0;e<c.length;e++)d.push(c[e].slice());b.data=
a.data;return b}function K(a,b,d,c,e){var f=b.name,g=b.name,h=b.type,k=[],l=[],r=[],B=[],F=null,w="uv_layer"in b?b.uv_layer||e&&e.mJ||"":"",n="color_layer"in b?b.color_layer||e&&e.nJ||"":"",x=[];switch(h){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "ATTRIBUTE":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":l=
X(b);r=fa(b);Da.warn(h+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":l=X(b);r=fa(b);break;case "MIX_SHADER":l.push(da(b,"Fac"));var m=da(b,"Shader"),r=m.Va;l.push(m);(m=da(b,"Shader_001"))||(m=da(b,"Shader.001"));var q=m.Va;l.push(m);l.push(R("d_color1","d_color1",[0,0,0],r));l.push(R("d_roughness1","d_roughness1",0,r));l.push(R("s_color1","s_color1",[0,0,0],r));l.push(R("s_roughness1","s_roughness1",0,r));l.push(R("metalness1","metalness1",0,r));l.push(R("normal1",
"normal1",[0,0,0],r));l.push(R("e_color1","e_color1",[0,0,0],r));l.push(R("emission1","emission1",0,r));l.push(R("a_color1","a_color1",[0,0,0],r));l.push(R("alpha1","alpha1",1,r));l.push(R("d_color2","d_color2",[0,0,0],q));l.push(R("d_roughness2","d_roughness2",0,q));l.push(R("s_color2","s_color2",[0,0,0],q));l.push(R("s_roughness2","s_roughness2",0,q));l.push(R("metalness2","metalness2",0,q));l.push(R("normal2","normal2",[0,0,0],q));l.push(R("e_color2","e_color2",[0,0,0],q));l.push(R("emission2",
"emission2",0,q));l.push(R("a_color2","a_color2",[0,0,0],q));l.push(R("alpha2","alpha2",1,q));r=Z(b,"Shader");m=r.Va;r=[r,R("d_color","d_color",[0,0,0],m),R("d_roughness","d_roughness",0,m),R("s_color","s_color",[0,0,0],m),R("s_roughness","s_roughness",0,m),R("metalness","metalness",0,m),R("normal","normal",[0,0,0],m),R("e_color","e_color",[0,0,0],m),R("emission","emission",0,m),R("a_color","a_color",[0,0,0],m),R("alpha","alpha",1,m)];break;case "OBJECT_INFO":l=X(b);r=[];m=Z(b,"Location");q=Z(b,"Object Index");
w=Z(b,"Material Index");n=Z(b,"Random");r.push(m);r.push(q);r.push(w);r.push(n);x.push(["USE_LOCATION_OUT",m.Va|0]);x.push(["USE_OBJ_IND_OUT",q.Va|0]);x.push(["USE_MAT_IND_OUT",w.Va|0]);x.push(["USE_RANDOM_OUT",n.Va|0]);break;case "UVMAP":w||(h="EMPTY_UV");"EMPTY_UV"!=h&&(F=aa("param_"+h+"_a"),m=aa("param_"+h+"_v"),k.push(ba(F)),k.push(ba(m)),B.push(ba(m)),F={name:F,value:w});r=fa(b);break;case "UV_MERGED":F=aa("param_UV_MERGED_a");m=aa("param_UV_MERGED_v");k.push(ba(F));k.push(ba(m));r.push(Z(b,
"UV_geom"));r.push(Z(b,"UV_cycles"));B.push(ba(m));F={name:F,value:w};break;case "CAMERA":l=[];r=fa(b);break;case "COMBRGB":case "COMBHSV":l=X(b);r=fa(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==h?(xa(b,0,0)&&x.push(["READ_R",1]),xa(b,1,0)&&x.push(["READ_G",1]),xa(b,2,0)&&x.push(["READ_B",1]),xa(b,3,0)&&x.push(["READ_A",1])):(xa(b,0,-1)&&x.push(["READ_R",1]),xa(b,1,-1)&&x.push(["READ_G",1]),xa(b,2,-1)&&x.push(["READ_B",1]));l=X(b);r=fa(b);F={value:b};break;case "PARTICLE_INFO":l=X(b);
r=fa(b);for(q=0;q<b.outputs.length;q++){var w=b.outputs[q],n=w.identifier,v=ba("v_param_PART_INFO_"+n.replace(" ",""));if(w.is_linked)switch(n){case "Size":x.push(["PART_INFO_SIZE",ua.fa(1)]);break;case "Age":x.push(["PART_INFO_AGE",ua.fa(1)]);break;case "Lifetime":x.push(["PART_INFO_LT",ua.fa(1)]);break;case "Location":x.push(["PART_INFO_LOC",ua.fa(1)]);break;case "Index":F=m=ba("a_param_PART_INFO_"+w.identifier.replace(" ",""));x.push(["PART_INFO_IND",ua.fa(1)]);break;case "Velocity":x.push(["PART_INFO_VEL",
ua.fa(1)]);break;case "Angular Velocity":x.push(["PART_INFO_A_VEL",ua.fa(1)])}"Age"!=n&&"Lifetime"!=n&&"Size"!=n&&(k.push(v),B.push(v))}m&&k.push(m);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!ka(b))return!0;h=ca(b,d);if(!h)return Da.error("Geometry output is not supported"),null;switch(h){case "GEOMETRY_UV":w||(h="EMPTY_UV");"EMPTY_UV"!=h&&(F=aa("param_GEOMETRY_UV_a"),m=aa("param_GEOMETRY_UV_v"),k.push(ba(F)),k.push(ba(m)),B.push(ba(m)),F={name:F,value:w});r.push(Z(b,"UV"));break;case "GEOMETRY_VC":n||
(h="EMPTY_VC");"EMPTY_VC"!=h&&(F=aa("param_GEOMETRY_VC_a"),m=aa("param_GEOMETRY_VC_v"),k.push(ba(F)),k.push(ba(m)),B.push(ba(m)),F={name:F,value:n});r.push(Z(b,"Vertex Color"));break;case "GEOMETRY_NO":l.push(R("Normal","Normal",[0,0,0],!1));x.push(["USE_NORMAL_IN",0]);r.push(Z(b,"Normal"));break;case "GEOMETRY_TRN":h="GEOMETRY_NO";l.push(R("Normal","Normal",[0,0,0],!1));r.push(Z(b,"True Normal"));x.push(["USE_NORMAL_IN",0]);Da.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":r.push(Z(b,
"Front/Back"));break;case "GEOMETRY_VW":r.push(Z(b,"View"));break;case "GEOMETRY_GL":r.push(Z(b,"Global")||Z(b,"Position"));break;case "GEOMETRY_LO":r.push(Z(b,"Local"));break;case "GEOMETRY_OR":m=aa("param_GEOMETRY_OR_v");k.push(ba(m));r.push(Z(b,"Orco"));B.push(ba(m));break;case "GEOMETRY_IN":r.push(Z(b,"Incoming"));break;case "GEOMETRY_BF":r.push(Z(b,"Backfacing"))}break;case "TEX_COORD":if(!ka(b))return!0;h=ea(b,d);switch(h){case "TEX_COORD_UV":w||(h="EMPTY_UV");"EMPTY_UV"!=h&&(F=aa("param_TEX_COORD_UV_a"),
m=aa("param_TEX_COORD_UV_v"),k.push(ba(F)),k.push(ba(m)),B.push(ba(m)),F={name:F,value:w});r.push(Z(b,"UV"));break;case "TEX_COORD_NO":r.push(Z(b,"Normal"));break;case "TEX_COORD_GE":m=aa("param_TEX_COORD_GE_v");k.push(ba(m));r.push(Z(b,"Generated"));B.push(ba(m));break;case "TEX_COORD_OB":r.push(Z(b,"Object"));break;case "TEX_COORD_CA":r.push(Z(b,"Camera"));break;case "TEX_COORD_WI":r.push(Z(b,"Window"));break;case "TEX_COORD_RE":r.push(Z(b,"Reflection"))}break;case "GROUP":m=b.node_tree_name;switch(m){case "B4W_LINEAR_TO_SRGB":if(!pa(b,
[1],[1])){F=ja(b,c,e);break}h="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!pa(b,[1],[1])){F=ja(b,c,e);break}h="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!pa(b,[1],[1])){F=ja(b,c,e);break}h="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!pa(b,[1,1],[1])){F=ja(b,c,e);break}h="B4W_REFLECT";break;case "B4W_REFRACTION":if(!pa(b,[1,0],[1])){F=ja(b,c,e);break}h="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!pa(b,[1,1,0,0,0],[1])){F=ja(b,c,e);break}q=aa("param_B4W_PARALLAX_texture");
B.push(ba(q));h="B4W_PARALLAX";break;case "B4W_CLAMP":if(!pa(b,[1],[1])){F=ja(b,c,e);break}h="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!pa(b,[0,0,0,0,0],[0])){F=ja(b,c,e);break}h="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!pa(b,[],[0])){F=ja(b,c,e);break}h="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!pa(b,[0,0,0],[0])){F=ja(b,c,e);break}h="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":h="B4W_GLOW_OUTPUT";break;default:F=ja(b,c,e)}l=X(b);r=fa(b);"B4W_TRANSLUCENCY"==m&&(m=R("TranslucencyParams","TranslucencyParams",
[0,0,0,0]),m.Va=r[0].Va,r.push(m));break;case "LAMP":(m=b.lamp)?(m.uuid in Ga?x.push(["LAMP_INDEX",String(Ga[m.uuid])]):(Ga[m.uuid]=Qa,x.push(["LAMP_INDEX",String(Qa++)])),F=Ga):(Da.error("There is no lamp in node: "+b.name),x.push(["LAMP_INDEX",-1]));r.push(Z(b,"Color"));r.push(Z(b,"Light Vector"));r.push(Z(b,"Distance"));r.push(Z(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":l=[R("E","E",[0,0,0],!0),R("A","A",[0,0,0],!0),R("D","D",[0,0,0],!0)];r=[R("color","color",[0,0,0],!0),R("specular",
"specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":r=[R("E","E",[0,0,0],!0),R("A","A",[0,0,0],!0),R("D","D",[0,0,0],!0),R("S","S",[0,0,0],!0),R("normal","normal",[0,0,0],!0),R("dif_params","dif_params",[0,0],!0),R("sp_params","sp_params",[0,0],!0),R("shadow_factor","shadow_factor",0,!0),R("translucency_color","translucency_color",0,!0),R("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":l=[R("color","color",[0,0,0],!0),R("specular","specular",[0,0,0],!0)];break;
case "LIGHTING_LAMP":l=[R("shadow_factor","shadow_factor",0,!0)];r=[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("lcolorint","lcolorint",[0,0,0],!0),R("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":l=[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("normal","normal",[0,0,0],!0),R("norm_fac","norm_fac",0,!0)];r=[R("lfactor","lfactor",0,!0)];x.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":l=
[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("normal","normal",[0,0,0],!0),R("norm_fac","norm_fac",0,!0),R("dif_params","dif_params",[0,0],!0)];r=[R("lfactor","lfactor",0,!0)];x.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":l=[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("normal","normal",[0,0,0],!0),R("norm_fac","norm_fac",0,!0),R("sp_params","sp_params",[0,0],!0)];r=[R("sfactor","sfactor",0,
!0)];x.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":l=[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("normal","normal",[0,0,0],!0),R("norm_fac","norm_fac",0,!0),R("sp_params","sp_params",[0,0],!0)];r=[R("sfactor","sfactor",0,!0)];x.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":l=[R("ldir","ldir",[0,0,0],!0),R("lfac","lfac",[0,0],!0),R("normal","normal",[0,0,0],!0),R("norm_fac","norm_fac",0,!0),
R("bsdf_params","bsdf_params",[0,0,0,0],!0)];r=[R("lfactor","lfactor",0,!0),R("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":l=[R("color","color",[0,0,0,0],!0),R("specular","specular",[0,0,0],!0),R("lfactor","lfactor",0,!0),R("sfactor","sfactor",0,!0),R("ldir","ldir",[0,0,0],!0),R("normal","normal",[0,0,0],!0),R("translucency_params","translucency_params",[0,0,0,0],!0),R("D","D",[0,0,0],!0),R("S","S",[0,0,0],!0),R("lcolorint","lcolorint",[0,0,0],!0),R("translucency_color","translucency_color",
0,!0)];r=[R("color","color",[0,0,0,0],!0),R("specular","specular",[0,0,0],!0)];break;case "NORMAL":l=X(b);r=fa(b);m=Z(b,"Normal");B.push(ba(aa("param_NORMAL_Normal"),m.Qa,3));break;case "MAPPING":m=b.vector_type;h="MAPPING";l.push(da(b,"Vector"));r.push(Z(b,"Vector"));var q=Pa.Rh(b.rotation),w=Pa.Rh(b.scale),n=Pa.Rh(b.translation),v=Ya.create(),A=Pa.QZ(q,Ya.create());if("TEXTURE"==m||"NORMAL"==m)w[0]=w[0]||1,w[1]=w[1]||1,w[2]=w[2]||1;Ya.multiply(A,new Float32Array([w[0],0,0,0,w[1],0,0,0,w[2]]),v);
v=Pa.P1(v,Fa.create());switch(m){case "POINT":v[12]=n[0];v[13]=n[1];v[14]=n[2];break;case "TEXTURE":v[12]=n[0];v[13]=n[1];v[14]=n[2];v=Fa.invert(v,v);break;case "NORMAL":Fa.invert(v,v),Fa.transpose(v,v)}switch(m){case "NORMAL":x.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":x.push(["MAPPING_TRS_MATRIX_DEF",1]);x.push(["MAPPING_TRS_MATRIX",ua.fa(v,16)]);break;case "POINT":0!==cb.length(q)?(x.push(["MAPPING_TRS_MATRIX_DEF",1]),x.push(["MAPPING_TRS_MATRIX",ua.fa(v,16)])):(0!==cb.sqrDist(w,Pa.Lt)&&(x.push(["MAPPING_SCALE_DEF",
1]),x.push(["MAPPING_SCALE",ua.fa(w,3)])),0!==cb.length(n)&&(x.push(["MAPPING_TRANS_DEF",1]),x.push(["MAPPING_TRANS",ua.fa(n,3)])));break;case "VECTOR":0!==cb.length(q)?(x.push(["MAPPING_TRS_MATRIX_DEF",1]),x.push(["MAPPING_TRS_MATRIX",ua.fa(v,16)])):0!==cb.sqrDist(w,Pa.Lt)&&(x.push(["MAPPING_SCALE_DEF",1]),x.push(["MAPPING_SCALE",ua.fa(w,3)]))}b.use_min&&(x.push(["MAPPING_MIN_CLIP_DEF",1]),x.push(["MAPPING_MIN_CLIP",ua.fa(b.min,3)]));b.use_max&&(x.push(["MAPPING_MAX_CLIP_DEF",1]),x.push(["MAPPING_MAX_CLIP",
ua.fa(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var F=[],m=[],q=[],w=[R("E","E",[0,0,0],!0),R("A","A",[0,0,0],!0),R("D","D",[0,0,0],!0),R("S","S",[0,0,0],!0),R("normal","normal",[0,0,0],!0),R("dif_params","dif_params",[0,0],!0),R("sp_params","sp_params",[0,0],!0),R("shadow_factor","shadow_factor",0,!0)],n=[R("color","color",[0,0,0],!0),R("specular","specular",[0,0,0],!0),R("normal","normal",[0,0,0],!0)],v=[Z(b,"Color"),Z(b,"Alpha"),Z(b,"Normal")],A=[],u=da(b,"Color");u.Qa.splice(3);q.push(u);
l.push(u);u=da(b,"Spec");u.Qa.splice(3);q.push(u);l.push(u);(u=da(b,"DiffuseIntensity"))||(u=da(b,"Refl"));u.Qa=b.diffuse_intensity;q.push(u);l.push(u);var y=da(b,"Normal");y.Qa.splice(3);q.push(y);l.push(y);"MATERIAL_EXT"==h?((u=da(b,"Emit"))||(u=R("Emit","Emit",0)),q.push(u),l.push(u),(u=da(b,"Translucency"))?(u.Qa=0,u.name="Translucency",u.identifier="Translucency"):u=R("Translucency","Translucency",0),l.push(u),(u=da(b,"Translucency"))?(u.Qa=[0,0,0,0],u.name="TranslucencyParams",u.identifier=
"TranslucencyParams"):u=R("TranslucencyParams","TranslucencyParams",[0,0,0,0]),l.push(u),r=da(b,"Reflectivity"),u=da(b,"Ray Mirror"),r?(u=r,r="Reflectivity"):u?r="Ray Mirror":(u=r,r="Reflectivity"),u||(u=R(r,r,0)),l.push(u),n.push(u),(u=da(b,"SpecTra"))||(u=R("SpecTra","SpecTra",0)),l.push(u),n.push(u),(u=da(b,"Alpha"))||(u=R("Alpha","Alpha",b.alpha)),l.push(u),n.push(u),v.push(Z(b,"Diffuse")),v.push(Z(b,"Spec")),F.push(["MATERIAL_EXT",1]),m.push(["MATERIAL_EXT",1])):(q.push(R("emit_intensity","emit_intensity",
0)),n.push(R("reflect_factor","reflect_factor",0)),n.push(R("specular_alpha","specular_alpha",0)),n.push(R("alpha_in","alpha_in",0)),v.push(R("diffuse_out","diffuse_out",0)),v.push(R("spec_out","spec_out",0)),F.push(["MATERIAL_EXT",0]),m.push(["MATERIAL_EXT",0]));A.push(ba(aa("param_MATERIAL_alpha"),b.alpha));A.push(ba(aa("param_MATERIAL_spec_alpha"),b.specular_alpha));r=v;F.push(["USE_MATERIAL_NORMAL",y.Va|0]);b.use_diffuse&&(F.push(["USE_MATERIAL_DIFFUSE",1]),m.push(["USE_MATERIAL_DIFFUSE",1]));
b.use_specular&&m.push(["USE_MATERIAL_SPECULAR",1]);var u=[],D=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":y=b.specular_hardness;break;case "WARDISO":y=b.specular_slope;break;case "TOON":y=b.specular_toon_size;D=b.specular_toon_smooth;break;case "BLINN":y=b.specular_ior;D=b.specular_hardness;break;default:Da.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),y=b.specular_hardness}var H,ia;switch(b.diffuse_shader){case "LAMBERT":ia=H=0;break;case "OREN_NAYAR":H=
b.roughness;ia=0;break;case "FRESNEL":H=b.diffuse_fresnel;ia=b.diffuse_fresnel_factor;break;case "MINNAERT":H=b.darkness;ia=0;break;case "TOON":H=b.diffuse_toon_size;ia=b.diffuse_toon_smooth;break;default:Da.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),ia=H=0}u.push(ba(aa("param_MATERIAL_diffuse"),[H,ia],2));u.push(ba(aa("param_MATERIAL_spec"),[b.specular_intensity,y,D],3));F.push(["SHADELESS_MAT",b.use_shadeless?1:0]);y={name:b.name,value:{Xf:b.specular_shader,
Jf:b.diffuse_shader,Nc:b.use_shadeless,xf:b.use_tangent_shading}};F={name:b.name,value:{Xf:b.specular_shader,Jf:b.diffuse_shader,Nc:b.use_shadeless,xf:b.use_tangent_shading},Q1:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:q,outputs:w,nb:u,data:y,jb:F,yf:[]},S1:{name:"material_end",type:"MATERIAL_END",inputs:n,outputs:v,nb:A,data:y,jb:m,yf:[]}};break;case "BSDF_DIFFUSE":l=X(b);x.push(["USE_NORMAL_IN",l[2].Va|0]);r=Z(b,"BSDF");q=r.Va;r=[r,R("d_color","d_color",[0,0,0],q),R("d_roughness","d_roughness",
0,q),R("s_color","s_color",[0,0,0],q),R("s_roughness","s_roughness",0,q),R("metalness","metalness",0,q),R("normal","normal",[0,0,0],q),R("e_color","e_color",[0,0,0],q),R("emisson","emisson",0,q),R("a_color","a_color",[0,0,0],q),R("alpha","alpha",1,q)];break;case "BSDF_GLOSSY":l=X(b);x.push(["USE_NORMAL_IN",l[2].Va|0]);r=Z(b,"BSDF");q=r.Va;r=[r,R("d_color","d_color",[0,0,0],q),R("d_roughness","d_roughness",0,q),R("s_color","s_color",[0,0,0],q),R("s_roughness","s_roughness",0,q),R("metalness","metalness",
1,q),R("normal","normal",[0,0,0],q),R("e_color","e_color",[0,0,0],q),R("emisson","emisson",0,q),R("a_color","a_color",[0,0,0],q),R("alpha","alpha",1,q)];break;case "BSDF_TRANSPARENT":l=X(b);r=Z(b,"BSDF");q=r.Va;r=[r,R("d_color","d_color",[0,0,0],q),R("d_roughness","d_roughness",0,q),R("s_color","s_color",[0,0,0],q),R("s_roughness","s_roughness",0,q),R("metalness","metalness",0,q),R("normal","normal",[0,0,0],q),R("e_color","e_color",[0,0,0],q),R("emisson","emisson",0,q),R("a_color","a_color",[0,0,
0],q),R("alpha","alpha",1,q)];break;case "EMISSION":l=X(b);r=Z(b,"Emission");m=r.Va;r=[r,R("d_color","d_color",[0,0,0],m),R("d_roughness","d_roughness",0,m),R("s_color","s_color",[0,0,0],m),R("s_roughness","s_roughness",0,m),R("metalness","metalness",1,m),R("normal","normal",[0,0,0],m),R("e_color","e_color",[0,0,0],m),R("emisson","emisson",1,m),R("a_color","a_color",[0,0,0],q),R("alpha","alpha",1,q)];break;case "MATH":switch(b.operation){case "ADD":h="MATH_ADD";break;case "SUBTRACT":h="MATH_SUBTRACT";
break;case "MULTIPLY":h="MATH_MULTIPLY";break;case "DIVIDE":h="MATH_DIVIDE";break;case "SINE":h="MATH_SINE";break;case "COSINE":h="MATH_COSINE";break;case "TANGENT":h="MATH_TANGENT";break;case "ARCSINE":h="MATH_ARCSINE";break;case "ARCCOSINE":h="MATH_ARCCOSINE";break;case "ARCTANGENT":h="MATH_ARCTANGENT";break;case "POWER":h="MATH_POWER";break;case "LOGARITHM":h="MATH_LOGARITHM";break;case "MINIMUM":h="MATH_MINIMUM";break;case "MAXIMUM":h="MATH_MAXIMUM";break;case "ROUND":h="MATH_ROUND";break;case "LESS_THAN":h=
"MATH_LESS_THAN";break;case "GREATER_THAN":h="MATH_GREATER_THAN";break;case "MODULO":h="MATH_MODULO";break;case "ABSOLUTE":h="MATH_ABSOLUTE";break;default:return Da.error("Unsupported MATH operation: "+b.operation),null}x.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);l=X(b);r=fa(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":h="MIX_RGB_MIX";break;case "ADD":h="MIX_RGB_ADD";break;case "MULTIPLY":h="MIX_RGB_MULTIPLY";break;case "SUBTRACT":h="MIX_RGB_SUBTRACT";break;case "SCREEN":h="MIX_RGB_SCREEN";
break;case "DIVIDE":h="MIX_RGB_DIVIDE";break;case "DIFFERENCE":h="MIX_RGB_DIFFERENCE";break;case "DARKEN":h="MIX_RGB_DARKEN";break;case "LIGHTEN":h="MIX_RGB_LIGHTEN";break;case "OVERLAY":h="MIX_RGB_OVERLAY";break;case "DODGE":h="MIX_RGB_DODGE";break;case "BURN":h="MIX_RGB_BURN";break;case "HUE":h="MIX_RGB_HUE";break;case "SATURATION":h="MIX_RGB_SATURATION";break;case "VALUE":h="MIX_RGB_VALUE";break;case "COLOR":h="MIX_RGB_COLOR";break;case "SOFT_LIGHT":h="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":h=
"MIX_RGB_LINEAR_LIGHT";break;default:return Da.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}x.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);l=X(b);r=fa(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":l=[R("Factor","Factor",b.fac,b.fac_is_linked),R("Color1","Color1",[0,0,0],b.color1_is_linked),R("Color2","Color1",[0,0,0],b.color2_is_linked)];r=[R("Color","Color",[0,0,0],!0)];break;case "OUTPUT":l=X(b);r=[];break;case "OUTPUT_MATERIAL":l=X(b);r=[];F=da(b,"Surface");m=F.Va;F={name:"output_surface",
type:"OUTPUT_SURFACE",inputs:[F],outputs:[],nb:[],data:{value:{XW:"BSDF_COMPUTE"},VW:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[F,R("d_color","d_color",[0,0,0],m),R("d_roughness","d_roughness",0,m),R("s_color","s_color",[0,0,0],m),R("s_roughness","s_roughness",0,m),R("metalness","metalness",0,m),R("normal","normal",[0,0,0],m),R("e_color","e_color",[0,0,0],m),R("emission","emission",0,m),R("a_color","a_color",[0,0,0],m),R("alpha","alpha",0,m)],outputs:[R("E","E",[0,0,0],!0),R("A","A",[0,0,0],!0),
R("D","D",[0,0,0],!0),R("S","S",[0,0,0],!0),R("normal","normal",[0,0,0],!0),R("bsdf_params","bsdf_params",[0,0,0,0],!0),R("shadow_factor","shadow_factor",0,!0),R("d_color","d_color",[0,0,0],!0),R("s_color","s_color",[0,0,0],!0),R("e_color","e_color",[0,0,0],!0),R("emission","emission",0,!0),R("a_color","a_color",[0,0,0],!0),R("alpha","alpha",0,!0)],nb:[],data:null,jb:[],yf:[]},WW:{name:"bsdf_end",type:"BSDF_END",inputs:[R("color","color",[0,0,0],!0),R("specular","specular",[0,0,0],!0),R("normal",
"normal",[0,0,0],!0),R("bsdf_params","bsdf_params",[0,0,0,0],!0),R("d_color","d_color",[0,0,0],!0),R("s_color","s_color",[0,0,0],!0),R("e_color","e_color",[0,0,0],!0),R("emission","emission",0,!0),R("a_color","a_color",[0,0,0],!0),R("alpha","alpha",0,!0)],outputs:[R("color","color",[0,0,0],m)],nb:[],data:null,jb:[],yf:[]}},jb:[],yf:[]};F={name:b.name,q2:F,xZ:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[R("Height","Height",0,!0)],outputs:[R("Normal","Normal",[0,0,0],!1)],nb:[],data:null,
jb:[],yf:[]}};break;case "OUTPUT_WORLD":l=X(b);r=fa(b);F=da(b,"Surface");F={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[F],outputs:[],nb:[],data:null,jb:[],yf:[]};F={name:b.name,r2:F};break;case "RGB":m=b.name;m={name:"-1",value:m};B.push(m);r.push(Z(b,"Color"));break;case "SEPRGB":case "SEPHSV":l=X(b);r=fa(b);break;case "TEX_ENVIRONMENT":(m=b.image)?(h="TEXTURE_ENVIRONMENT_"+b.projection,"NONE"==b.color_space?x.push(["NON_COLOR",1]):x.push(["NON_COLOR",0]),l.push(da(b,"Vector")),
x.push(["USE_VECTOR_IN",l[0].Va|0]),r.push(Z(b,"Color")),q=aa("param_TEXTURE_texture"),B.push(ba(q)),F=Ia.xm(Ia.Di,!1),F.repeat=!0,F.source="IMAGE",Ha.nE&&(F.anisotropic_filtering=16),Ia.RK(F,m),F={au:b.name,my:"",name:q,value:F}):h="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(m=b.image){h="TEXTURE_COLOR";"NONE"==b.color_space?x.push(["NON_COLOR",1]):x.push(["NON_COLOR",0]);x.push(["CONVERT_UV",0]);for(q=0;4>q;++q)q?(u=R("Vector"+q,"Vector"+q,[0,0,0],!1),w=R("Color"+q,"Color"+q,[0,0,0],!1),n=R("Alpha"+
q,"Alpha"+q,0,!1)):(u=da(b,"Vector"),w=Z(b,"Color"),n=Z(b,"Alpha")),l.push(u),r.push(w),r.push(n);q=aa("param_TEXTURE_texture");B.push(ba(q));F=Ia.xm(Ia.Di,!1);F.repeat="REPEAT"==b.extension;F.source="IMAGE";Ia.RK(F,m);F={au:b.name,my:"",name:q,value:F}}else h="TEXTURE_EMPTY";break;case "TEXTURE":h=wa(b);if("TEXTURE_EMPTY"==h)r.push(Z(b,"Color")),r.push(Z(b,"Normal")),r.push(Z(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==h)l.push(da(b,"Vector")),r.push(Z(b,"Color")),r.push(Z(b,"Value"));else{if("TEXTURE_NORMAL"==
h&&"ENVIRONMENT_MAP"==b.texture.type)return Da.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;"TEXTURE_COLOR"==h&&(m=!1,q=b.texture.image,!q||"Non-Color"!=q.colorspace_settings_name&&"Non-Colour Data"!=q.colorspace_settings_name||(m=!0),x.push(["NON_COLOR",Number(m)]),x.push(["CONVERT_UV",1]));for(q=0;4>q;++q)m="TEXTURE_COLOR"==h?"Color":"Normal",q?(u=R("Vector"+q,"Vector"+q,[0,0,0],!1),w=R(m+q,m+q,[0,0,0],!1),n=R("Value"+q,"Value"+q,0,!1)):(u=da(b,"Vector"),w=Z(b,m),n=Z(b,"Value")),
l.push(u),r.push(w),r.push(n)}"TEXTURE_EMPTY"!=h&&(q=aa("param_TEXTURE_texture"),B.push(ba(q)),F=b.texture.J,F={au:b.texture.name,my:b.texture.uuid,name:q,value:F});break;case "VALTORGB":l=X(b);r=fa(b);F={value:b};m=b.color_ramp.interpolation;"CONSTANT"!=m&&"LINEAR"!=m&&Da.warn("Color Ramp node is not fully supported.");break;case "VALUE":h="VALUE";m=b.name;m={name:"-1",value:m};B.push(m);r.push(Z(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":h="VECT_MATH_ADD";break;case "SUBTRACT":h=
"VECT_MATH_SUBTRACT";break;case "AVERAGE":h="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":h="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":h="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":h="VECT_MATH_NORMALIZE";break;default:return Da.error("Unsupported VECT_MATH operation: "+b.operation),null}l=X(b);r=fa(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":x.push(["VECTOR_TYPE",ua.fa(0)]);break;case "VECTOR":x.push(["VECTOR_TYPE",ua.fa(1)]);break;case "NORMAL":x.push(["VECTOR_TYPE",
ua.fa(2)]);break;default:return Da.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}l=b.convert_from;r=b.convert_to;if("WORLD"==l)if("WORLD"==r)l=0;else if("OBJECT"==r)l=1;else if("CAMERA"==r)l=2;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==l)if("WORLD"==r)l=3;else if("OBJECT"==r)l=4;else if("CAMERA"==r)l=5;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==l)if("WORLD"==r)l=
6;else if("OBJECT"==r)l=7;else if("CAMERA"==r)l=8;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return Da.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;x.push(["CONVERT_TYPE",ua.fa(l)]);l=X(b);r=fa(b);break;case "NORMAL_MAP":switch(b.space){case "TANGENT":m=0;break;case "OBJECT":m=1;break;case "WORLD":m=2;break;case "BLENDER_OBJECT":m=3;break;case "BLENDER_WORLD":m=4;break;default:return Da.error("Unsupported NORMAL_MAP space: "+b.space),
null}x.push(["SPACE",ua.fa(m)]);l.push(da(b,"Strength"));l.push(da(b,"Color"));l.push(R("Normal","Normal",[0,0,0],!1));x.push(["USE_NORMAL_IN",0]);r.push(Z(b,"Normal"));break;case "FRESNEL":y=da(b,"Normal");l.push(da(b,"IOR"));l.push(y);r.push(Z(b,"Fac"));x.push(["USE_FRESNEL_NORMAL",y.Va|0]);break;case "LAYER_WEIGHT":y=da(b,"Normal");l.push(da(b,"Blend"));l.push(y);r=fa(b);x.push(["USE_NORMAL_IN",y.Va|0]);break;case "BUMP":y=da(b,"Normal");x.push(["INVERT",b.invert?1:0]);x.push(["USE_NORMAL_IN",
y.Va|0]);l=X(b);r=fa(b);break;case "BACKGROUND":l=X(b);r=fa(b);break;default:l=X(b),r=fa(b)}g={name:f,Rf:g,type:h,yf:k,inputs:l,outputs:r,nb:B,data:F,jb:x};f=V.hl(a);V.Ii(a,f,g);if(!(g="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{g=b.outputs;for(k=h=0;k<g.length;k++)if(g[k].is_linked&&h++>d){g=!0;break a}g=!1}g=!g}return g||null!=K(a,b,++d,c,e)?f:null}function pa(a,b,d){for(var c=a.inputs,e=a.outputs,f=a.node_tree_name,g=0;g<b.length;g++){var h=c[g],r=b[g];if(!h||h.default_value instanceof
Array!=r)return Da.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1}for(g=0;g<d.length;g++)if(b=e[g],c=d[g],!b||b.default_value instanceof Array!=c)return Da.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1;return!0}function ja(a,b,d){var c=a.node_group.node_tree,e={},f;for(f in c)if("links"==f||"nodes"==f){e[f]=[];for(var g=0;g<c[f].length;g++){e[f][g]={};for(var h in c[f][g])if("links"==
f){e[f][g][h]={};for(var r in c[f][g][h])e[f][g][h][r]=ma(c[f][g][h][r])}else e[f][g][h]=ma(c[f][g][h])}}else e[f]=ma(c[f]);g=a.node_tree_name;if("B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==g)c=ha("Group input","GROUP_INPUT",[],a.inputs),f=ha("Group output","GROUP_OUTPUT",a.outputs,[]),g="B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==g&&(Ha.quality==Oa.im||Ha.mN)?{from_node:c,from_socket:c.outputs[1],to_node:f,to_socket:f.inputs[0]}:{from_node:c,from_socket:c.outputs[0],to_node:f,to_socket:f.inputs[0]},
e.nodes=[c,f],e.links=[g];c=a.name;f=e.nodes;g=e.links;for(h=0;h<f.length;h++)f[h].name=sa(f[h].type,c,f[h].name);for(h=0;h<g.length;h++)g[h].from_node.name=sa(g[h].from_node.type,c,g[h].from_node.name),g[h].to_node.name=sa(g[h].to_node.type,c,g[h].to_node.name);return{h2:p(e,a.node_group.uuid,!0,b,d).Da,i2:e.links}}function ma(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?Pa.nu(a):a}function aa(a){Na[a]||(Na[a]=0);var b=a+"_"+Na[a],b=b.replace(/ /g,"_").replace(/\//g,"_");Na[a]++;
return b}function ka(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function ca(a,b){for(var d=a.outputs,c=0,e=0;e<d.length;e++){var f=d[e];if(f.is_linked&&!(c++<b))switch(f.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";
case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function ea(a,b){for(var d=a.outputs,c=0,e=0;e<d.length;e++){var f=d[e];if(f.is_linked&&!(c++<b))switch(f.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}
function wa(a){if(!a.texture||!a.texture.J)return"TEXTURE_EMPTY";for(var b=a.outputs,d=!1,c=!1,e=!1,f=0;f<b.length;f++){var g=b[f];if(g.is_linked)switch(g.identifier){case "Color":d=!0;break;case "Normal":c=!0;break;case "Value":e=!0;break;default:Pa.K("Unknown texture output")}}if(d)return c&&Da.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(c)return"TEXTURE_NORMAL";if(e)return"ENVIRONMENT_MAP"==
a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function da(a,b){for(var d=a.inputs,c=0;c<d.length;c++){var e=d[c];if(e.identifier==b)return Ja(e)}return null}function Z(a,b){for(var d=a.outputs,c=0;c<d.length;c++){var e=d[c];if(e.identifier==b)return Ja(e)}return null}function Ja(a){var b=a.name,d=a.identifier,c=a.is_linked;a=a.default_value;a=Pa.Yi(a)?a.slice(0):a;return{name:b,identifier:d,Va:c,Qa:a}}function R(a,b,d,c){return{name:a,identifier:b,Va:c,Qa:d}}function na(a){return R(a.name,
a.identifier,a.Qa,a.Va)}function X(a){for(var b=[],d=0;d<a.inputs.length;d++){var c=Ja(a.inputs[d]);c.Qa.length&&c.Qa.splice(3);b.push(c)}return b}function fa(a){for(var b=[],d=0;d<a.outputs.length;d++){var c=Ja(a.outputs[d]);b.push(c)}return b}function ba(a,b,d){b=null===b||void 0===b?null:ua.fa(b,d);return{name:a,value:b}}function za(a){return{name:a.name,value:a.value}}function ia(a){return a.slice()}function F(a,b,d,c,e,f){var g=[],h=f.from_socket.identifier;f=f.to_socket.identifier;var r=c.outputs;
for(c=0;c<r.length;c++)if(r[c].identifier==h){g.push(c);break}e=e.inputs;for(c=0;c<e.length;c++)if(e[c].identifier==f){g.push(c);break}2==g.length&&V.Zc(a,b,d,g);return!0}function sa(a,b,d){return"GROUP_INPUT"==a?b+"*GI*"+d:"GROUP_OUTPUT"==a?b+"*GO*"+d:b+"%join%"+d}function ya(a){var b=[];V.ja(a,function(a,d){"GROUP"==d.type&&b.push(d)});return b}function Q(a,b,d){for(var c=0;c<d.length;c++){var e=d[c].data.h2,f=d[c].data.i2;if(!e)return!1;V.ja(e,function(b,d){V.Ii(a,V.hl(a),d)});for(e=0;e<f.length;e++)b.push(f[e]);
la(d[c],b,a)}return!0}function va(a,b,d,c,e,f){switch(a.type){case "GROUP":a.name==b&&c.push(d);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||e.push(d);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||f.push(d)}}function Ua(a,b,d){for(var c=[],e=0;e<d.length;e++){for(var f=d[e],g=null,h=0;h<b.length;h++)if(f.from_socket.identifier==b[h].to_socket.identifier){g=b[h];break}g?(f.from_node=g.from_node,f.from_socket=g.from_socket):c.push(f)}for(e=0;e<b.length;e++)a.splice(a.indexOf(b[e]),1);return c}
function Ba(a,b){if(b.length)for(var d=b[0].from_node.name,c=0;c<a.length;c++)a[c].from_node.name==d&&b.push(a[c])}function Aa(a,b,d,c){for(var e=0;e<c.length;e++){for(var f=c[e],g,h=0;h<d.inputs.length;h++)if(f.from_socket.identifier==d.inputs[h].identifier){g=d.inputs[h].Qa;break}for(var h=f,r=b,l=g,k=v(h.to_node,r),F=0;F<k.length;F++)for(var B=V.lb(r,k[F]),w=0;w<B.inputs.length;w++){var n=B.inputs[w];if(n.identifier==h.to_socket.identifier){B=n.Qa instanceof Object?0:1;if((l instanceof Object?
0:1)==B)n.Qa=l;else switch(B){case 0:n=n.Qa;n[0]=n[1]=n[2]=l;break;case 1:n.Qa=(l[0]+l[1]+l[2])/3}break}}f=a.indexOf(f);-1!=f&&a.splice(f,1)}}function la(a,b,d){for(var c=a.name,e=[],f=[],g=[],h=[],r=0;r<b.length;r++){var l=b[r];va(l.from_node,c,l,e,g,h);va(l.to_node,c,l,f,g,h)}f=Ua(b,f,g);e=Ua(b,h,e);Ba(b,f);Aa(b,d,a,f);if(e.length){var k;V.ja(d,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(c+"*GO*")||(k=b)});Aa(b,d,k,e)}}function Y(a){var b=[],d=[];V.ja(a,function(a,c){switch(c.type){case "VALTORGB":b.push(c);
break;case "CURVE_VEC":case "CURVE_RGB":d.push(c)}});var c=0,e=a=null,f=b.length+d.length;if(b.length){a=Ia.WZ(b,Ia.AT);for(var g=0;g<b.length;g++)b[g].jb.push(["NODE_TEX_ROW",ua.fa((c+.5)/f)]),c++}if(d.length)for(e=Ia.$Z(d,Ia.AJ),g=0;g<d.length;g++)d[g].jb.push(["NODE_TEX_ROW",ua.fa((c+.5)/f)]),c++;g=null;a&&e?(g=new Uint8Array(a.length+e.length),g.set(a),g.set(e,a.length)):a?g=a:g=e;a=g?Ia.sM(g,Ia.AJ):null;for(g=0;g<b.length;g++)b[g].data.Xa=a;for(g=0;g<d.length;g++)d[g].data.Xa=a}function xa(a,
b,d){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<d+.01&&a[0][1]<d+.01&&.99<a[1][0]&&.99<a[1][1]?!1:!0}var Oa=t("__config"),ra=t("__debug"),V=t("__graph"),Ya=t("__mat3"),Fa=t("__mat4"),w=t("__objects"),Da=t("__print"),ua=t("__shaders"),ta=t("__scenes"),Pa=t("__util"),cb=t("__vec3"),Ia=t("__textures"),Na={},Ea={},Ma={},Ga={},Qa=0,Ha=Oa.L;a.F8=0;a.tK=1;a.sK=2;a.rK=3;a.E8=4;a.qK=5;a.pK=6;a.oK=7;a.D8=8;a.CU=0;a.BU=1;a.l8=2;a.AU=3;a.k8=4;a.Rz=function(a){return Ea[a]};a.GX=function(a){delete Ea[a]};
a.kM=function(a,b,d,c){return p(a,b,!1,d,c)};a.cF=function(a,d){var c=ta.R(),c=O(a,"MAIN",c.uuid);if(c in Ma)return Ma[c];var e=V.create(),f={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},g=K(e,f,0,null,null),f={name:"LIGHTING_END",type:"LIGHTING_END"},f=K(e,f,0,null,null);b(e,d,g,f,[[g,[8,10]],[g,[9,6]]]);J(e);return Ma[c]=e};a.su=function(a){var b=[],d={};Na={};var c=V.TI(a);V.ja(c,function(a,c){var e;e=[];for(var f=[],g=[],h=[],r=[],l=[],k=0;k<c.inputs.length;k++){var F=c.inputs[k];if(F.Va)e.push(null),
f.push(null);else{e.push(aa("in_"+c.type+"_"+F.identifier.replace(/\./g,"")));var B=ua.fa(F.Qa,0);Ha.xI&&(0<=c.type.indexOf("MIX_RGB_")&&("Color1"==F.identifier||"Color2"==F.identifier||"Fac"==F.identifier)||0<=c.type.indexOf("MATH_")&&("Value"==F.identifier||"Value_001"==F.identifier||"Value.001"==F.identifier)||0<=c.type.indexOf("VECT_MATH_")&&("Vector_001"==F.identifier||"Vector.001"==F.identifier)||0<=c.type.indexOf("LIGHTING_APPLY")||0<=c.type.indexOf("MATERIAL_END")||0<=c.type.indexOf("MATERIAL_BEGIN"))&&
(F=B,F=F.replace(/(,)/g,"$1 "),F=F.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),F=F.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),B=F=F.replace(/\s+/g,""));f.push(B)}}for(k=0;k<c.outputs.length;k++)F=c.outputs[k],F.Va?g.push(null):g.push(aa("out_"+c.type+"_"+F.identifier.replace(/\./g,"")));for(k=0;k<c.nb.length;k++)F=c.nb[k],h.push(F.name),r.push(F.value);for(k=0;k<c.yf.length;k++)l.push(c.yf[k].name);e={id:c.type,inputs:e,wG:f,outputs:g,nb:h,Vr:r,yf:l,jb:JSON.parse(JSON.stringify(c.jb))};
b.push(e);d[a]=e});V.yi(c,function(a,b,e){var f=V.lb(c,a),g=f.outputs[e[0]];a=d[a].outputs;b=d[b].inputs;f=a[e[0]]||aa("out_"+f.type+"_"+g.identifier.replace(/\./g,""));a[e[0]]=f;b[e[1]]=f});return b};a.NL=function(a){if(a.se)for(var b=0;b<a.se.nodes.length;b++){var c=a.se.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};a.pda=function(a,b,c){Da.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+ra.j2(a)+"\n=============================================================")};
a.Ja=function(){for(var a in Ea)delete Ea[a];for(a in Ma)delete Ma[a];for(var b in Ga)delete Ga[b];Qa=0};a.i0=function(a){var b=-1;V.ja(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}};b4w.module.__debug=function(a,t){function p(a,b,d){var e=[],f;for(f in a)1<l.kl(a[f])&&e.push([f,a[f]]);e.sort(function(a,b){var c=l.kl(a[1]),d=l.kl(b[1]);return d!=c?d-c:a<b?-1:b<a?1:0});if(e.length){I.groupCollapsed(b+" "+d);I.Pd("Property different variants (>1) | Property name");for(a=0;a<e.length;a++)I.groupCollapsed(l.kl(e[a][1]),e[a][0]),c(e[a][1]);I.groupEnd()}}function c(a){I.Pd("Batches count for this property value | Property value");var b=[],c;for(c in a)b.push([c,a[c]]);b.sort(function(a,
b){return b[1]!=a[1]?b[1]-a[1]:a[0]<b[0]?-1:b[0]<a[0]?1:0});for(a=0;a<b.length;a++)I.Pd(b[a][1],b[a][0]);I.groupEnd()}function b(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function k(){var a=q.VF();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function g(){var b=n;return b&&b.debug_view_mode==a.pt}function M(a,b,c){var d=q.VF(),e=0;if(d)for(c&&d.endQuery(),c=0;c<a.length;c++){var f=a[c],g=d.zN(f),h=E.getParameter(d.yN());g&&
!h&&(e=d.AN(f)/1E6,b&&(e=l.Tc(e,b,1,10)),a.splice(c,1),c--)}else e=performance.now()-a.pop(),b&&(e=l.Tc(e,b,1,10));return e}function m(a,b){z(a)||l.K("Structure assertion failed: invalid first object value");z(b)||l.K("Structure assertion failed: invalid second object value");C(a,b)||l.K("Structure assertion failed: incompatible types");if(!(null==a||null==b||"object"!=typeof a||l.zG(a)||a instanceof Array)){for(var c in a)z(a[c])||l.K("Structure assertion failed: invalid value for key in the first object: "+
c),c in b||l.K("Structure assertion failed: missing key in the first object: "+c);for(c in b)z(b[c])||l.K("Structure assertion failed: invalid value for key in the second object: "+c),c in a||l.K("Structure assertion failed: missing key in the second object: "+c),C(a[c],b[c])||l.K("Structure assertion failed: incompatible types for key "+c)}}function z(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function C(a,b){if(typeof a!=typeof b)return!1;if(null!=a&&null!=b&&"object"==
typeof a){var c=a instanceof Array,d=b instanceof Array;if(c&&!d||!c&&d)return!1;c=l.zG(a);d=l.zG(b);if(c&&!d||!c&&d)return!1}return!0}var h=t("__batch"),e=t("__compat"),A=t("__config"),q=t("__extensions"),P=t("__graph"),O=t("__objects"),I=t("__print"),u=t("__scenes"),J=t("__subscene"),x=t("__textures"),D=t("__time"),l=t("__util"),v=A.L,N={},E=null,U={},L=[],y=-1,H=-1,n=null,f=null,W=!1,d={};a.fx=0;a.WD=1;a.gx=2;a.VD=3;a.ex=4;a.UD=5;a.TD=6;a.pt=7;a.wh=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),
c=0;c<b.length;c++){var d=b[c];d in a&&(N[a[d]]=d)}E=a};a.J3=function(a){n=a};a.Vaa=function(){return n};a.e_=function(a,b,c,e,f){d[a]||(d[a]={u4:b,hg:{}});c in d[a].hg||(d[a].hg[c]=e);f&&(d[a].hg[c]=0)};a.CL=function(){var a=0,b;for(b in d)for(var c in d[b].hg)a+=d[b].hg[c];return a};a.SR=function(){var a={},b;for(b in d)for(var c in d[b].hg){var e=d[b].hg[c];if(e){var f=d[b].u4;f in a||(a[f]={VI:0,hg:{}});c in a[f].hg||(a[f].hg[c]=0);a[f].hg[c]+=e;a[f].VI+=e}}for(f in a){I.groupCollapsed(f,a[f].VI);
for(c in a[f].hg)I.Pd(c,a[f].hg[c]);I.groupEnd()}};a.tQ=function(){for(var a={},b="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),c=0,d=0,e=O.xc(u.Ui(),"MESH",O.Vc),f=0;f<e.length;f++)for(var g=0;g<e[f].T.length;g++)for(var l=0;l<e[f].T[g].da.length;l++){var k=h.LX(e[f].T[g].da[l]),n=k.qb.Lg+"/"+k.qb.gf;k["shaders_info.directives"]=k.qb.Oi;k["shaders_info.node_elements"]=k.qb.Qf;delete k.qb;for(var m=0;m<b.length;m++)delete k[b[m]];
if(e[f].ea)d++;else{c++;k.type in a||(a[k.type]={});n in a[k.type]||(a[k.type][n]={});for(var x in k)x in a[k.type][n]||(a[k.type][n][x]={}),m=JSON.stringify(k[x]),m in a[k.type][n][x]||(a[k.type][n][x][m]=0),a[k.type][n][x][m]++}}I.group("Batches statistics:");I.Pd("STATIC/DYNAMIC count:",c+"/"+d);I.group("STATIC batches diversity:");for(var q in a)for(n in a[q])p(a[q][n],q,n);I.groupEnd();I.groupEnd()};a.IE=function(a){if(v.gl_debug){var b=E.getError();b!=E.NO_ERROR&&(b in N?l.K("GL Error: "+b+
", gl."+N[b]+" ("+a+")"):l.K("Unknown GL error: "+b+" ("+a+")"))}};a.rX=function(){if(v.gl_debug||v.ML)switch(E.checkFramebufferStatus(E.FRAMEBUFFER)){case E.FRAMEBUFFER_COMPLETE:break;case E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:I.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:I.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:I.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");
break;case E.FRAMEBUFFER_UNSUPPORTED:I.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case E.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:I.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");break;default:I.error("FRAMEBUFFER CHECK FAILED")}};a.vX=function(){if(-1!=y)return y;var a=E.createFramebuffer();E.bindFramebuffer(E.FRAMEBUFFER,a);var b=x.xm(x.Xn,!1);x.resize(b,1,1);E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,b.zb,b.Jb,0);E.checkFramebufferStatus(E.FRAMEBUFFER)!=
E.FRAMEBUFFER_COMPLETE?(y=!0,I.warn("depth-only issue was found")):y=!1;E.bindFramebuffer(E.FRAMEBUFFER,null);E.deleteFramebuffer(a);return y};a.BX=function(){if(1==v.oc)return!1;if(-1!=H)return H;E.bindRenderbuffer(E.RENDERBUFFER,E.createRenderbuffer());E.renderbufferStorageMultisample(E.RENDERBUFFER,v.oc,E.RGBA8,1,1);var a=E.getRenderbufferParameter(E.RENDERBUFFER,E.RENDERBUFFER_SAMPLES);a!=v.oc?(H=!0,I.warn("multisample issue was found: requested "+v.oc+", got "+a),E.getError()==E.INVALID_OPERATION&&
I.warn("the error from multisample issue detected, ignoring")):H=!1;E.bindRenderbuffer(E.RENDERBUFFER,null);return H};a.yX=function(){return e.KE("Firefox")&&E.getError()==E.OUT_OF_MEMORY?(I.warn("Firefox/old GPUs cubemap issue was found."),!0):!1};a.JQ=function(a,c,d){v.gl_debug&&(d=b(d),I.error("shader compilation failed:\n"+d+"\n"+E.getShaderInfoLog(a)+" ("+c+")"))};a.k3=function(a,c,d,e){v.gl_debug&&(d=b(d),e=b(e),I.error("shader linking failed:\n"+d+"\n\n\n"+e+"\n"+E.getProgramInfoLog(a)+" ("+
c+")"))};a.PH=function(a){if(v.show_hud_debug_info||a.type==J.Dt)a.Iu||a.zm.push(k())};a.f3=function(a){"MAIN"==a.type&&g()&&a.zm.push(k())};a.QH=function(a){if((v.show_hud_debug_info||a.type==J.Dt)&&!a.Iu){var b=M(a.zm,a.ng,!0);b&&(a.ng=b)}};a.g3=function(a){if("MAIN"==a.type&&g()){var b=M(a.zm,a.ng,!0);b&&(a.ng=b)}};a.eP=g;a.P2=function(a){var b=M(a.zm,a.ng,!1);b&&(a.ng=b)};a.kaa=function(a){U[a]=a in U?U[a]+1:1};a.update=function(){for(var a in U)I.log(a,U[a]),U[a]=0};a.rz=function(){for(var a=
[performance.now()],b=0;b<arguments.length;b++){var c=arguments[b];if(l.Yi(c))for(var d=0;d<c.length;d++)a.push(c[d]);else a.push(arguments[b])}L.push(a)};a.Pb=function(){for(var a=1,b=0;b<L.length;b++){var c=L[b];c[1]==arguments[0]&&a++}c=[a];for(b=0;b<arguments.length;b++)if(a=arguments[b],l.Yi(a))for(var d=0;d<a.length;d++)c.push(a[d]);else c.push(arguments[b]);L.push(c)};var G=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];a.uQ=function(a){a||(a=1);for(var b=
0,c={},d=Math.max(0,performance.now()-1E3*a),e=0;e<L.length;e++){var f=L[e];a=f[0];if(!(a<d)){var g=String(f[1]);c[g]||(c[g]=G[b++%G.length]);a=["%c"+(a/1E3).toFixed(6),c[g],g];for(g=2;g<f.length;g++)a.push(f[g]);I.log.apply(this,a)}}L.splice(0)};a.CH=function(a){a||(a=1);for(var b={},c=Math.max(0,performance.now()-1E3*a),d=0;d<L.length;d++){var e=L[d];a=e[0];if(!(a<c))for(var f=2;f<e.length;f++){var g=String(e[1]);3<e.length&&(g+="_"+String(f-2));b[g]||(b[g]=g+"\n");b[g]+=String(a)+" "+e[f]+"\n"}}a=
"";for(g in b)a+=b[g]+"\n\n";I.log(a);L.splice(0)};a.O9=function(a){function b(a){return-1<c.indexOf(a)?!0:!1}var c=navigator.userAgent.toLowerCase();switch(a.toLowerCase()){case "chrome":return b("mozilla")&&b("applewebkit")&&b("chrome");case "firefox":return b("mozilla")&&b("gecko")&&b("firefox");case "msie":return b("mozilla")&&b("trident")&&b("msie");case "opera":return b("opera")&&b("presto");case "safari":return b("mozilla")&&b("applewebkit")&&b("safari")&&!b("chrome");default:return!1}};a.LL=
function(a){if(l.Yi(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};a.x9=function(a,b){a.constructor!=b&&l.K("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+b+">")};a.z9=m;a.A9=function(a){W?m(a,f):W=!0;f=null!=a&&"object"==typeof a?l.nu(a):a};a.iN=function(a,b,c,d,e){(a=a||null)||l.K("Stage load callback is undefined");b=b||5E3;c=c||0;d=d||100;100<d&&l.K("Max percentage must be less than 100");0>c&&l.K("Min percentage must be greater than 0");
c>d&&l.K("Max percentage must be greater than min percentage");var f=D.Hi(c,d,b,function(b){b=b.toFixed();a(b);100==b&&(D.Sk(f),e&&e())})};a.j2=function(a){return P.PM(a,function(a,b){var c=b.type+"("+b.name+")",d=b.inputs,c=c+"\n\nINPUTS:";if(d.length)for(var e=0;e<d.length;e++)c+="\n"+d[e].identifier+": ",c=d[e].Va?c+"linked":c+d[e].Qa;else c+="\n---";d=b.outputs;c+="\n\nOUTPUTS:";if(d.length)for(e=0;e<d.length;e++)c+="\n"+d[e].identifier+": ",c=d[e].Va?c+("linked(default "+d[e].Qa+")"):c+"not used";
else c+="\n---";e="";switch(b.type){case "GEOMETRY_UV":e="\nuv_layer: "+b.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":e="\ntexture: "+b.data.value.name+"\n("+b.data.value.nr+")"}""==e&&(e="\n---");return c+"\n\nDATA:"+e},function(b,c,d){b=P.lb(a,b);c=P.lb(a,c);return b.outputs[d[0]].identifier+"\n==>\n"+c.inputs[d[1]].identifier})};a.Mz=function(){return E};a.Ja=function(){n=null;d={}};a.reset=function(){E=null}};b4w.module.__compat=function(a,t){function p(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function c(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function b(){return!window.ActiveXObject&&"ActiveXObject"in window}var k=t("__config"),g=t("__debug"),M=t("__extensions"),
m=t("__print"),z=t("__renderer"),C="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");a.fK=256;var h=k.eo,e=k.L,A=k.Ao,q=k.context,P=k.Ni,O=k.ra,I=k.N,u=k.Ke;a.uZ=function(a){a.getError()==a.INVALID_ENUM&&m.warn("Possible Tegra invalid enum issue detected, ignoring")};a.tR=function(t,x){function D(a){x&&m.warn(a)}P.T1=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
P.TG=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS);P.XG=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);P.WA=t.getParameter(t.MAX_VARYING_VECTORS);P.YG=t.getParameter(t.MAX_VERTEX_ATTRIBS);P.OP=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);P.XA=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS);P.ph=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE);P.UG=t.getParameter(t.MAX_RENDERBUFFER_SIZE);P.nc=t.getParameter(t.MAX_TEXTURE_SIZE);P.ZG=t.getParameter(t.MAX_VIEWPORT_DIMS);var l=M.Uz();if(l){var v=t.getParameter(l.UNMASKED_VENDOR_WEBGL),
N=t.getParameter(l.UNMASKED_RENDERER_WEBGL);-1<v.indexOf("Qualcomm")&&-1<N.indexOf("330")&&(p("Chrome")||p("Firefox"))&&(D("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),e.Mb=!1,e.SL=!0)}P.Vq=e.Mb?24:16;e.Mb&&!A.enabled&&(e.ru=!0);e.Mb?(e.oc=Math.min(e.oc,t.getParameter(t.MAX_SAMPLES)),p("Firefox")&&(D("Firefox and WebGL 2 detected, applying framebuffer hack."),e.ML=!0),p("Windows")&&p("Chrome")&&(D("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),
e.oc=1)):e.oc=1;p("Firefox")&&"NONE"!==e.stereo&&(D("Firefox and Stereo rendering detected, disable texture reusage"),e.jN=!0);if(e.Mb&&g.BX()||p("Firefox"))D("Firefox detected, disabling multisample"),e.oc=1;p("Mac OS X")&&p("Chrome/60")&&(D("macOS and Chrome 60 detected, disabling multisample"),e.oc=1);z.M3();var E=!!M.R_();p("Firefox/28.0")&&(p("Linux")||p("Macintosh"))&&(D("Firefox 28 detected, applying depth hack"),E=!1);p("Windows Phone")||(p("iPad")||p("iPhone")?(D("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),
q.alpha||(e.background_color[3]=1),e.vA=!0,e.iT=!0,e.smaa=!1,e.ssao=!1,e.vG=!0,M.eO()&&u.EB&&(e.so="pvr")):p("Mac OS X")&&p("Safari")&&!p("Chrome")&&(D("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),e.TQ=!0,O.hL=!0,O.WL=!0));p("Windows")&&(p("Chrome/40")||p("Firefox/33")||p("Firefox/34")||p("Firefox/35")||p("Firefox/36"))&&(D("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),
e.PE=!0);p("Chrome")&&!c()&&k.aP()&&(D('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),e.TL=!0);p("Mac OS X")&&(e.TA=!0,D("OS X detected, applying shadows hack."));c()&&(D("Mobile detected, applying various hacks for video textures."),e.is_mobile_device=!0,p("iPad")||p("iPhone")||p("Windows Phone")||(D("Mobile (not iOS) detected, disable playback rate for video textures."),O.VM=!0));p("iPad")&&(D('iPad detected, use "autoplay" hack for video textures.'),
e.VO=!0);(p("Firefox/35.0")||p("Firefox/36.0"))&&p("Windows")&&(D("Windows/Firefox 35/36 detected, applying shadows slink hack"),e.QR=!0);if(p("iPhone")||b())D("iPhone or IE11 detected. Enable sequential video fallback for video textures."),e.kw=!0;10>P.WA&&(D("Not enough varyings, disable shadows on blend objects"),e.wF=!0);p("Windows Phone")&&(D("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),e.debug_view=!1,e.glow_materials=!1,
e.ssao=!1,e.smaa=!1,e.shadows=!1,e.reflections=!1,e.refractions=!1,e.xQ=!1);if(p("UCBrowser")||p("Chrome")&&p("Nexus")&&e.is_mobile_device)D("Mobile Nexus Chrome or UCBrowser detected, disable workers."),I.Op=!1;p("Firefox")&&(D("Firefox detected, disabling workers"),I.Op=!1);if(b()||p("Edge"))D("IE11 or Edge detected, disabling workers"),I.Op=!1;p("Chrome")&&p("Linux")&&(D("Chrome and Linux detected, disabling wasm physics."),I.Pw=!1);if(l){v=t.getParameter(l.UNMASKED_VENDOR_WEBGL);N=t.getParameter(l.UNMASKED_RENDERER_WEBGL);
l=/\b4\d{2}\b/;p("Chrome")&&-1<N.indexOf("Mali-T720")&&(D('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),e.JP=!0);-1<N.indexOf("AMD")&&p("Windows")&&p("Firefox")&&(D("AMD, Windows and Firefox detected, disabling depth textures."),E=!1);-1<v.indexOf("ARM")&&l.test(N)&&(D("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),E=!1,h.oN=!0,e.IP=!0);-1<v.indexOf("ARM")&&-1<N.indexOf("Mali-T604")&&(D("ARM Mali-T604 detected, disabling shadows."),
e.shadows=!1);-1<v.indexOf("ARM")&&-1<N.indexOf("Mali-T760")&&(D("ARM Mali-T760 detected, disabling SSAO."),e.ssao=!1,e.oC=!0,e.Mb&&(e.oc=1,D("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<v.indexOf("ARM")&&-1<N.indexOf("Mali-T720")&&(D("ARM Mali-T720 detected, disabling depth textures."),E=!1,e.Mb&&(e.oc=1,D("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));-1<v.indexOf("Qualcomm")&&-1<N.indexOf("Adreno")&&(D("Qualcomm Adreno detected, applying shader constants hack."),
e.xI=!0,-1<N.indexOf("420")&&(D("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),P.nc=Math.min(P.nc,4096),P.ph=Math.min(P.ph,4096)),p("Chrome")&&(N.match(/4../)||N.match(/5../))&&(D("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),e.oc=1));-1<v.indexOf("NVIDIA")&&-1<N.indexOf("Tegra 3")&&(D("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),e.mN=!0);p("Windows")&&p("Chrome")&&!p("Edge")&&(N.match(/NVIDIA GeForce 8..0/)||
N.match(/NVIDIA GeForce 9..0/)||N.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(D("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),P.ph=a.fK,e.ew=!0);-1<N.indexOf("PowerVR")&&-1<N.indexOf("SGX")&&(D("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),e.ew=!0,e.oC=!0,e.shadows=!1);p("Windows")&&-1<N.indexOf("Direct3D9")&&(D("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),
e.MM=!0,e.ew=!0,e.OQ=!0);v="";for(l=0;l<C.length;l++)if(-1<N.indexOf(C[l])){v=C[l];break}v&&(D("Architecture "+v+" detected. Blending between frames and shadows on blend objects will be disabled."),e.oC=!0,e.wF=!0)}0==P.OP&&(D("Vertex textures are not allowed. Disabling vertex textures"),e.Ux=!1);E||(e.Qu=!1,e.kd=!1,e.water_dynamic=!1,e.Wf=!1,e.mC=!1,e.smaa=!1,e.ssao=!1,e.gw=!0);e.VS=!!M.hO()||"pvr"==e.so;e.Yy=E;if(t.getShaderPrecisionFormat)var J=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);
t.getShaderPrecisionFormat&&0!==J.precision||(e.precision="mediump");if(b()&&p("Touch")||p("Edge"))D("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),e.rA=!0;if(b()||p("Edge"))e.QO=!0,e.PO=!0,e.ew=!0;c()&&p("Firefox")&&(m.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),e.aH=!0,P.nc=Math.min(P.nc,4096),P.ph=Math.min(P.ph,4096));N=!!M.QF();e.nE=N;N=!!M.oO();e.WC=N};
a.KE=p;a.Am=c;a.uW=function(){p("Firefox/35.0")&&p("Windows")&&(m.warn("Windows/Firefox 35 detected, forcing context's alpha"),k.context.alpha=!0)};a.cp=b};b4w.module.__renderer=function(a,t){function p(a){for(var c=a.H,h=a.kb,l=null,k=O.Wb(c.D,f),m=0;m<h.length;m++){var x=h[m];if(x.lc){var B=x.Gb,v=x.Ua;if(B.jk!=l){E.useProgram(B.jk);for(var l=a,u=c,A=B,y=A.zS,D=y.length;D--;){var H=y[D];H.fr(E,H.pf,l,u)}if(A.Kr&&!A.iB)for(A.yH.length||g(A),A=A.yH,y=A.length;y--;)H=A[y],H.fr(E,H.pf,l,u);l=B.jk}x.gg?(E.enable(E.SAMPLE_ALPHA_TO_COVERAGE),a.Bb||E.enable(E.BLEND)):(E.disable(E.SAMPLE_ALPHA_TO_COVERAGE),a.Bb||E.disable(E.BLEND));for(x=0;x<v.length;x++)if(y=
v[x],y.lc){A=y.sh;u=y.Ha;C.f3(u);C.eP()&&"DEBUG_VIEW"==u.type&&(u.Eu=I.Tc(M.HW(u.Sq),u.Eu,1,15));if(G.alpha_sort&&u.cg){var H=A,y=y.tA,D=k,p=u.Pa;if(J.dist(D,y.xT)>G.alpha_sort_threshold*Math.min(y.KW,1)||H.Tu)e.x5(p,y,H.D,D),J.copy(D,y.xT),H.Tu=!1}for(var H=a,y=u,D=B,z=D.AS,L=z.length;L--;)p=z[L],p.fr(E,p.pf,A,y);if(D.Kr&&!D.iB){D.Lv.length||g(D);z=D.Lv;for(L=z.length;L--;)p=z[L],p.fr(E,p.pf,A,y);D.Kr=!1}E.depthMask(y.Za);y.Na?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE);p=y.wa;z=E;for(L=0;L<p.length;L++){var R=
p[L];z.activeTexture(z.TEXTURE0+L);z.bindTexture(R.zb,R.Jb);R.Zf&&z.generateMipmap(R.zb)}if(H.type==q.Ie||H.type==q.gm){A=H;D=D.Dn;z=A.H.cc;p=z.Jb;z=z.zb;L=A.Oh;for(R=0;6>R;R++){var t=b(R);G.PE?(E.bindTexture(E.TEXTURE_CUBE_MAP,p),E.texImage2D(t,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,N)):(E.uniformMatrix4fv(D.u_cube_view_matrix,!1,L[R]),E.uniform4fv(D.u_sky_tex_fac,A.rs),E.uniform3fv(D.u_sky_tex_color,A.ps),E.uniform1f(D.u_sky_tex_dvar,A.qs),E.uniform3fv(D.u_horizon_color,A.re),E.uniform3fv(D.u_zenith_color,
A.De),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,t,p,0),n(y,0));if(A.Jr&&5!=R){var t=A,W=R,fa=d;G.PE?fa.set(N):(E.readPixels(191,191,1,1,E.RGBA,E.UNSIGNED_BYTE,fa),255!=fa[0]&&255!=fa[1]&&255!=fa[2]||E.readPixels(191,220,1,1,E.RGBA,E.UNSIGNED_BYTE,fa));var U=fa[0],za=fa[1],fa=fa[2],U=U/255,za=za/255,fa=fa/255;4===W?(t.mg[3]=U,t.mg[7]=za,t.mg[11]=fa):(t.mg[4*W]=U,t.mg[4*W+1]=za,t.mg[4*W+2]=fa)}}G.WC&&(E.bindTexture(z,p),E.generateMipmap(z),E.texParameteri(z,E.TEXTURE_MIN_FILTER,P.Vn));
H.ym+=6}else if(H.type==q.vq){A=y;y=D.Dn;p=H.H.cc;D=p.Jb;z=p.zb;p=H.Oh;G.WC&&(E.activeTexture(E.TEXTURE7),E.bindTexture(z,D),E.generateMipmap(z),E.texParameteri(z,E.TEXTURE_MIN_FILTER,P.Vn));for(z=0;5>z;++z)for(E.viewport(0,0,128*Math.pow(.5,z),128*Math.pow(.5,z)),L=z/4,R=0;6>R;R++)t=b(R),E.uniformMatrix4fv(y.u_cube_view_matrix,!1,p[R]),E.uniform1f(y.u_roughness,L),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,t,D,z),n(A,0);H.ym+=30}else n(y,A.rD),H.ym++;C.g3(u);C.eP()&&"MAIN"==u.type&&
M.IW(u.id,u.ng)}}}}function c(a){if(a){var b=(a.wb?E.COLOR_BUFFER_BIT:0)|(a.Db?E.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case q.Fe:a=v;break;case q.$d:a=x;break;case q.Wg:a=D;break;case q.Bf:case q.zi:case q.Vp:a=l;break;case q.Ci:case q.Ht:case q.Hx:a=v;break;default:a=G.background_color}}else b=E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT,a=G.background_color;E.colorMask(!0,!0,!0,!0);E.depthMask(!0);E.clearColor(a[0],a[1],a[2],a[3]);E.clear(b)}function b(a){switch(a){case 0:return E.TEXTURE_CUBE_MAP_POSITIVE_X;
case 1:return E.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return E.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return E.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return E.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return E.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function k(a){var b=h.iG(),c=a.Tt,d=a.Pa,e=d.cd;a.ag.length=0;var f=1,g;for(g in e)f=Math.max(f,e[g].frames);for(e=0;e<f;e++){g=b.createVertexArray();H(g);d.di&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,d.di);for(var l=0;l<d.Wd.length;l++){E.bindBuffer(E.ARRAY_BUFFER,d.Wd[l].Zl);for(var k=
0;k<c.length;k++){var n=c[k];n.uD==d.Wd[l].type&&(E.enableVertexAttribArray(n.pf),E.vertexAttribPointer(n.pf,n.Sc,n.ir,n.ir==E.FLOAT?!1:!0,0,n.fy+n.yz*e),L(n.pf,n.Eo))}}H(null);a.ag.push(g)}}function g(a){var b=a.Dn,c=a.AS,d=a.Lv,e=a.zS,g=a.yH;c.length=0;d.length=0;e.length=0;g.length=0;for(var h in b){var l=!1,k=null,n=null;switch(h){case "u_proj_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Ib)};l=!0;break;case "u_view_refl_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.bt)};l=!0;
break;case "u_view_tsr":case "u_view_tsr_frag":k=function(a,b,c,d){d.Kc?a.uniformMatrix3fv(b,!1,d.Yv):a.uniformMatrix3fv(b,!1,d.Ng)};l=!0;break;case "u_view_tsr_inverse":k=function(a,b,c,d){d.Kc?a.uniformMatrix3fv(b,!1,d.KB):a.uniformMatrix3fv(b,!1,d.xD)};l=!0;break;case "u_shadow_cast_billboard_view_tsr":k=function(a,b,c,d){a.uniformMatrix3fv(b,!1,d.ow)};l=!0;break;case "u_view_proj_prev":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.EH)};l=!0;break;case "u_view_proj_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,
!1,d.Mg)};l=!0;break;case "u_view_proj_inverse":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.wD)};l=!0;break;case "u_sky_vp_inverse":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.ui)};l=!0;break;case "u_camera_eye":case "u_camera_eye_frag":k=function(a,b,c,d){a.uniform3fv(b,O.Wb(d.D,f))};l=!0;break;case "u_camera_quat":k=function(a,b,c,d){a.uniform4fv(b,O.Eb(d.D,W))};l=!0;break;case "u_view_max_depth":k=function(a,b,c,d){a.uniform1f(b,d.far)};l=!0;break;case "u_camera_range":k=function(a,b,c,d){a.uniform2f(b,
d.near,d.far)};l=!0;break;case "u_csm_center_dists":k=function(a,b,c,d){a.uniform4fv(b,d.Py)};break;case "u_height":k=function(a,b,c,d){a.uniform1f(b,d.height)};l=!0;break;case "u_pcf_blur_radii":k=function(a,b,c,d){a.uniform4fv(b,d.Yr)};break;case "u_dof_dist":k=function(a,b,c,d){d.dof_on?a.uniform1f(b,d.dof_distance):a.uniform1f(b,0)};l=!0;break;case "u_dof_front_start":k=function(a,b,c,d){a.uniform1f(b,d.dof_front_start)};l=!0;break;case "u_dof_front_end":k=function(a,b,c,d){a.uniform1f(b,d.dof_front_end)};
l=!0;break;case "u_dof_rear_start":k=function(a,b,c,d){a.uniform1f(b,d.dof_rear_start)};l=!0;break;case "u_dof_rear_end":k=function(a,b,c,d){a.uniform1f(b,d.dof_rear_end)};l=!0;break;case "u_dof_bokeh_intensity":k=function(a,b,c,d){a.uniform1f(b,d.dof_bokeh_intensity)};l=!0;break;case "u_camera_direction":k=function(a,b,c,d){a.uniform3fv(b,d.direction)};l=!0;break;case "u_cam_water_depth":k=function(a,b,c){a.uniform1f(b,c.eu)};l=!0;break;case "u_fog_color_density":k=function(a,b,c){a.uniform4fv(b,
c.pe)};break;case "u_fog_params":k=function(a,b,c){a.uniform4fv(b,c.tg)};break;case "u_underwater_fog_color_density":k=function(a,b,c){a.uniform4fv(b,c.pj)};break;case "u_bloom_key":k=function(a,b,c){a.uniform1f(b,c.Iq)};break;case "u_average_lum_val":k=function(a,b,c){a.uniform1f(b,c.average_luminance)};break;case "u_mipmap_1x1":k=function(a,b,c){a.uniform1f(b,c.HA)};break;case "u_bloom_edge_lum":k=function(a,b,c){a.uniform1f(b,c.Hq)};break;case "u_time":k=function(a,b,c){a.uniform1f(b,c.time)};
l=!0;break;case "u_wind":k=function(a,b,c){a.uniform3fv(b,c.qj)};l=!0;break;case "u_sky_tex_dvar":k=function(a,b,c){a.uniform1f(b,c.qs)};break;case "u_sky_tex_fac":k=function(a,b,c){a.uniform4fv(b,c.rs)};break;case "u_sky_tex_color":k=function(a,b,c){a.uniform3fv(b,c.ps)};break;case "u_horizon_color":k=function(a,b,c){a.uniform3fv(b,c.re)};break;case "u_zenith_color":k=function(a,b,c){a.uniform3fv(b,c.De)};break;case "u_environment_energy":k=function(a,b,c){a.uniform1f(b,c.ih)};break;case "u_bsdf_cube_sky_dim":k=
function(a,b,c){a.uniform1f(b,c.ny)};l=!0;break;case "u_sky_color":k=function(a,b,c){a.uniform3fv(b,c.pn)};break;case "u_rayleigh_brightness":k=function(a,b,c){a.uniform1f(b,c.rayleigh_brightness)};break;case "u_mie_brightness":k=function(a,b,c){a.uniform1f(b,c.mie_brightness)};break;case "u_spot_brightness":k=function(a,b,c){a.uniform1f(b,c.spot_brightness)};break;case "u_scatter_strength":k=function(a,b,c){a.uniform1f(b,c.scatter_strength)};break;case "u_rayleigh_strength":k=function(a,b,c){a.uniform1f(b,
c.rayleigh_strength)};break;case "u_mie_strength":k=function(a,b,c){a.uniform1f(b,c.mie_strength)};break;case "u_rayleigh_collection_power":k=function(a,b,c){a.uniform1f(b,c.rayleigh_collection_power)};break;case "u_mie_collection_power":k=function(a,b,c){a.uniform1f(b,c.mie_collection_power)};break;case "u_mie_distribution":k=function(a,b,c){a.uniform1f(b,c.mie_distribution)};break;case "u_light_positions":k=function(a,b,c){a.uniform4fv(b,c.ip)};break;case "u_light_directions":k=function(a,b,c){a.uniform3fv(b,
c.xv)};break;case "u_light_color_intensities":k=function(a,b,c){a.uniform4fv(b,c.hp)};break;case "u_sun_quaternion":k=function(a,b,c){a.uniform4fv(b,c.TC)};break;case "u_sun_intensity":k=function(a,b,c){a.uniform3fv(b,c.SC)};break;case "u_sun_direction":k=function(a,b,c){a.uniform3fv(b,c.RC)};break;case "u_debug_view_mode":k=function(a,b,c){a.uniform1i(b,c.debug_view_mode)};break;case "u_debug_colors_seed":k=function(a,b,c){a.uniform1f(b,c.debug_colors_seed)};break;case "u_debug_render_time_threshold":k=
function(a,b,c){a.uniform1f(b,c.Vy)};break;case "u_subpixel_jitter":k=function(a,b,c){a.uniform2fv(b,c.IG)};l=!0;break;case "u_subsample_indices":k=function(a,b,c){a.uniform4fv(b,c.h1)};l=!0;break;case "u_radial_blur_step":k=function(a,b,c){a.uniform1f(b,c.as)};break;case "u_god_rays_intensity":k=function(a,b,c){a.uniform1f(b,c.god_rays_intensity)};break;case "u_ssao_radius_increase":k=function(a,b,c){a.uniform1f(b,c.As)};break;case "u_ssao_blur_discard_value":k=function(a,b,c){a.uniform1f(b,c.ws)};
l=!0;break;case "u_ssao_influence":k=function(a,b,c){a.uniform1f(b,c.zs)};break;case "u_ssao_dist_factor":k=function(a,b,c){a.uniform1f(b,c.xs)};break;case "u_texel_size":k=function(a,b,c){a.uniform2fv(b,c.Aw)};l=!0;break;case "u_normal_offset":k=function(a,b,c){a.uniform1f(b,c.self_shadow_normal_offset)};break;case "u_v_light_ts":k=function(a,b,c){a.uniform4fv(b,c.Us)};l=!0;break;case "u_v_light_r":k=function(a,b,c){a.uniform4fv(b,c.Ts)};l=!0;break;case "u_v_light_tsr":k=function(a,b,c){a.uniformMatrix3fv(b,
!1,c.Qw)};l=!0;break;case "u_p_light_matrix0":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Cl[0])};l=!0;break;case "u_p_light_matrix1":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Cl[1])};l=!0;break;case "u_p_light_matrix2":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Cl[2])};l=!0;break;case "u_p_light_matrix3":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Cl[3])};l=!0;break;case "u_outline_color":k=function(a,b,c){a.uniform3fv(b,c.dj)};break;case "u_draw_outline":k=function(a,b,c){a.uniform1f(b,c.Ju)};
l=!0;break;case "u_glow_mask_small_coeff":k=function(a,b,c){a.uniform1f(b,c.small_glow_mask_coeff)};l=!0;break;case "u_glow_mask_large_coeff":k=function(a,b,c){a.uniform1f(b,c.large_glow_mask_coeff)};l=!0;break;case "u_brightness":k=function(a,b,c){a.uniform1f(b,c.brightness)};break;case "u_contrast":k=function(a,b,c){a.uniform1f(b,c.contrast)};break;case "u_exposure":k=function(a,b,c){a.uniform1f(b,c.exposure)};break;case "u_saturation":k=function(a,b,c){a.uniform1f(b,c.saturation)};break;case "u_enable_hmd_stereo":k=
function(a,b,c){a.uniform1i(b,c.enable_hmd_stereo)};break;case "u_distortion_params":k=function(a,b,c){a.uniform4fv(b,c.Yk)};break;case "u_chromatic_aberration_coefs":k=function(a,b,c){a.uniform4fv(b,c.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":k=function(a,b,c){a.uniform1f(b,c.aB)};l=!0;break;case "u_motion_blur_decay_threshold":k=function(a,b,c){a.uniform1f(b,c.mb_decay_threshold)};l=!0;break;case "u_model_tsr":n=function(a,b,c){a.uniformMatrix3fv(b,!1,c.D)};l=!0;break;case "u_model_tsr_inverse":n=
function(a,b,c){a.uniformMatrix3fv(b,!1,c.GD)};l=!0;break;case "u_transb":n=function(a,b,c){a.uniform4fv(b,c.Ce)};l=!0;break;case "u_transa":n=function(a,b,c){a.uniform4fv(b,c.wf)};l=!0;break;case "u_arm_rel_trans":n=function(a,b,c){a.uniform4fv(b,c.Qt)};l=!0;break;case "u_arm_rel_quat":n=function(a,b,c){a.uniform4fv(b,c.Pt)};l=!0;break;case "u_quat":n=function(a,b,c){a.uniform4fv(b,O.Eb(c.D,W))};l=!0;break;case "u_quatsb":n=function(a,b,c){a.uniform4fv(b,c.ve)};l=!0;break;case "u_quatsa":n=function(a,
b,c){a.uniform4fv(b,c.sf)};l=!0;break;case "u_frame_factor":n=function(a,b,c){a.uniform1f(b,c.ug)};l=!0;break;case "au_center_pos":n=function(a,b,c){a.uniform3fv(b,c.sy)};l=!0;break;case "au_wind_bending_amp":n=function(a,b,c){a.uniform1f(b,c.Og)};l=!0;break;case "au_wind_bending_freq":n=function(a,b,c){a.uniform1f(b,c.Pg)};l=!0;break;case "au_detail_bending_freq":n=function(a,b,c){a.uniform1f(b,c.qg)};l=!0;break;case "au_detail_bending_amp":n=function(a,b,c){a.uniform1f(b,c.pg)};l=!0;break;case "au_branch_bending_amp":n=
function(a,b,c){a.uniform1f(b,c.kg)};l=!0;break;case "u_node_values":n=function(a,b,c,d){a.uniform4fv(b,d.bj)};l=!0;break;case "u_node_rgbs":n=function(a,b,c,d){a.uniform3fv(b,d.Re)};l=!0;break;case "u_lod_coverage":n=function(a,b,c,d){a.uniform1f(b,d.Um.Gf)};l=!0;break;case "u_lod_cmp_logic":n=function(a,b,c,d){a.uniform1f(b,d.Um.xy)};l=!0;break;case "u_diffuse_color":n=function(a,b,c,d){a.uniform4fv(b,d.jd)};l=!0;break;case "u_diffuse_intensity":n=function(a,b,c,d){a.uniform1f(b,d.rg)};l=!0;break;
case "u_diffuse_params":n=function(a,b,c,d){a.uniform2fv(b,d.ce)};l=!0;break;case "u_emit":n=function(a,b,c,d){a.uniform1f(b,d.ef)};l=!0;break;case "u_ambient":n=function(a,b,c,d){a.uniform1f(b,d.Ze)};l=!0;break;case "u_specular_color":n=function(a,b,c,d){a.uniform3fv(b,d.Fg)};l=!0;break;case "u_specular_alpha":n=function(a,b,c,d){a.uniform1f(b,d.Eg)};l=!0;break;case "u_specular_params":n=function(a,b,c,d){a.uniform3fv(b,d.rn)};l=!0;break;case "u_reflect_factor":n=function(a,b,c,d){a.uniform1f(b,
d.ri)};l=!0;break;case "u_mirror_factor":n=function(a,b,c,d){a.uniform1f(b,d.lp)};l=!0;break;case "u_grass_map_dim":n=function(a,b,c,d){a.uniform3fv(b,d.Md)};l=!0;break;case "u_grass_size":n=function(a,b,c,d){a.uniform1f(b,d.ll)};l=!0;break;case "u_scale_threshold":n=function(a,b,c,d){a.uniform1f(b,d.bA)};l=!0;break;case "u_cube_fog":n=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.mg)};break;case "u_jitter_amp":n=function(a,b,c,d){a.uniform1f(b,d.DA)};l=!0;break;case "u_jitter_freq":n=function(a,b,
c,d){a.uniform1f(b,d.EA)};l=!0;break;case "u_wireframe_edge_color":n=function(a,b,c,d){a.uniform3fv(b,d.wireframe_edge_color)};break;case "u_cluster_id":n=function(a,b,c,d){a.uniform1f(b,d.ou)};l=!0;break;case "u_batch_debug_id_color":n=function(a,b,c,d){a.uniform1f(b,d.Uy)};l=!0;break;case "u_batch_debug_main_render_time":n=function(a,b,c,d){a.uniform1f(b,d.Eu)};l=!0;break;case "u_refr_bump":n=function(a,b,c,d){a.uniform1f(b,d.si)};l=!0;break;case "u_line_width":n=function(a,b,c,d){a.uniform1f(b,
d.zv)};l=!0;break;case "u_lamp_light_positions":n=function(a,b,c,d){a.uniform3fv(b,d.Cr)};break;case "u_lamp_light_directions":n=function(a,b,c,d){a.uniform3fv(b,d.tv)};break;case "u_lamp_light_color_intensities":n=function(a,b,c,d){a.uniform3fv(b,d.sv)};break;case "u_halo_size":n=function(a,b,c,d){a.uniform1f(b,d.lA)};l=!0;break;case "u_halo_hardness":n=function(a,b,c,d){a.uniform1f(b,d.iA)};l=!0;break;case "u_halo_rings_color":n=function(a,b,c,d){a.uniform3fv(b,d.kA)};l=!0;break;case "u_halo_lines_color":n=
function(a,b,c,d){a.uniform3fv(b,d.jA)};l=!0;break;case "u_halo_stars_blend":n=function(a,b,c,d){a.uniform1f(b,d.mA)};l=!0;break;case "u_halo_stars_height":n=function(a,b,c,d){a.uniform1f(b,d.nA)};l=!0;break;case "u_fresnel_params":n=function(a,b,c,d){a.uniform2fv(b,d.Lo)};l=!0;break;case "u_texture_scale":n=function(a,b,c,d){a.uniform3fv(b,d.wi)};l=!0;break;case "u_parallax_scale":n=function(a,b,c,d){a.uniform1f(b,d.Ur)};l=!0;break;case "u_color_id":n=function(a,b,c){a.uniform3fv(b,c.sm)};l=!0;break;
case "u_diffuse_color_factor":n=function(a,b,c,d){a.uniform1f(b,d.Co)};l=!0;break;case "u_alpha_factor":n=function(a,b,c,d){a.uniform1f(b,d.Gk)};l=!0;break;case "u_specular_color_factor":n=function(a,b,c,d){a.uniform1f(b,d.ss)};l=!0;break;case "u_normal_factor":n=function(a,b,c,d){a.uniform1f(b,d.Pr)};l=!0;break;case "u_normalmap0_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Al[0])};l=!0;break;case "u_normalmap1_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Al[1])};l=!0;break;case "u_normalmap2_scale":n=
function(a,b,c,d){a.uniform2fv(b,d.Al[2])};l=!0;break;case "u_normalmap3_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Al[3])};l=!0;break;case "u_foam_factor":n=function(a,b,c,d){a.uniform1f(b,d.Qi)};l=!0;break;case "u_foam_uv_freq":n=function(a,b,c,d){a.uniform2fv(b,d.wz)};l=!0;break;case "u_foam_mag":n=function(a,b,c,d){a.uniform2fv(b,d.vz)};l=!0;break;case "u_foam_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Ru)};l=!0;break;case "u_water_norm_uv_velocity":n=function(a,b,c,d){a.uniform1f(b,d.et)};
l=!0;break;case "u_shallow_water_col":n=function(a,b,c,d){a.uniform3fv(b,d.gs)};l=!0;break;case "u_shore_water_col":n=function(a,b,c,d){a.uniform3fv(b,d.ks)};l=!0;break;case "u_water_shallow_col_fac":n=function(a,b,c,d){a.uniform1f(b,d.hs)};l=!0;break;case "u_water_shore_col_fac":n=function(a,b,c,d){a.uniform1f(b,d.ls)};l=!0;break;case "u_p_length":n=function(a,b,c,d){a.uniform1f(b,d.Ra.ZC)};l=!0;break;case "u_p_cyclic":n=function(a,b,c,d){a.uniform1i(b,d.Ra.be)};l=!0;break;case "u_p_max_lifetime":n=
function(a,b,c,d){a.uniform1f(b,d.Ra.KA)};l=!0;break;case "u_p_fade_in":n=function(a,b,c,d){a.uniform1f(b,d.Ra.cl)};l=!0;break;case "u_p_fade_out":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Kf)};l=!0;break;case "u_p_size":n=function(a,b,c,d){a.uniform1f(b,d.Ra.size)};l=!0;break;case "u_p_alpha_start":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Wx)};l=!0;break;case "u_p_alpha_end":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Vx)};l=!0;break;case "u_p_nfactor":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Lr)};l=!0;break;
case "u_p_gravity":n=function(a,b,c,d){a.uniform1f(b,d.Ra.cA)};l=!0;break;case "u_p_mass":n=function(a,b,c,d){a.uniform1f(b,d.Ra.hi)};l=!0;break;case "u_p_color_ramp":n=function(a,b,c,d){a.uniform4fv(b,d.Ra.Ay)};l=!0;break;case "u_p_wind_fac":n=function(a,b,c,d){a.uniform1f(b,d.Ra.FD)};l=!0;break;case "u_p_time":n=function(a,b,c,d){a.uniform1f(b,d.Ra.time)};l=!0;break;case "u_p_tilt":n=function(a,b,c,d){a.uniform1f(b,d.Ra.XC)};l=!0;break;case "u_p_tilt_rand":n=function(a,b,c,d){a.uniform1f(b,d.Ra.YC)};
l=!0;break;case "u_position":n=function(a,b,c,d){a.uniform3fv(b,d.bo)};l=!0;break;case "u_va_frame_factor":n=function(a,b,c){a.uniform1f(b,c.sD)};l=!0;break;case "u_refl_plane":n=function(a,b,c){a.uniform4fv(b,c.Kc)};l=!0;break;case "u_outline_intensity":n=function(a,b,c){a.uniform1f(b,c.fk)};l=!0;break;case "u_obj_info":n=function(a,b,c,d){a.uniform3fv(b,d.Rr)},l=!0}n&&(n={name:h,fr:n,pf:b[h]},l?c.push(n):d.push(n));k&&(n={name:h,fr:k,pf:b[h]},l?e.push(n):g.push(n))}if(d.length||g.length){a=a.zH;
for(var m in a)delete a[m];for(m=0;m<d.length;m++)n=d[m],a[n.name]=n;for(m=0;m<g.length;m++)n=g[m],a[n.name]=n}else a.iB=!0}var M=t("__batch"),m=t("__camera"),z=t("__config"),C=t("__debug"),h=t("__extensions"),e=t("__geometry"),A=t("__quat"),q=t("__subscene"),P=t("__textures"),O=t("__tsr"),I=t("__util"),u=t("__version"),J=t("__vec3"),x=[1,0,0,1],D=[1,1,1,1],l=[0,0,0,1],v=[0,0,0,0],N=new Uint8Array([91.8,142.8,.96*255,255]),E=null,U=null,L=null,y=null,H=null,n=null,f=new Float32Array(3),W=A.create(),
d=new Uint8Array(4),G=z.L;a.wh=function(a){var b=G.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);E=a};a.$k=function(a){if(a.lc&&!a.Io)if(a.type==q.Gx){C.PH(a);var d=a.H;E.bindFramebuffer(E.READ_FRAMEBUFFER,d.Uu);E.bindFramebuffer(E.DRAW_FRAMEBUFFER,d.Lf);var e=0;d.cc&&(e|=E.COLOR_BUFFER_BIT);d.og&&(e|=E.DEPTH_BUFFER_BIT);
E.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,e,E.NEAREST);C.QH(a);C.IE("draw resolve")}else if(a.type==q.OD)C.PH(a),d=a.H,E.bindFramebuffer(E.FRAMEBUFFER,d.Uu),E.bindTexture(E.TEXTURE_2D,d.cc.Jb),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),C.QH(a),C.IE("draw copy");else{C.PH(a);d=a.H;E.bindFramebuffer(E.FRAMEBUFFER,d.Lf);a.St&&(e=d.cc,E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,e.zb,e.Jb,0));E.viewport(0,0,d.width,d.height);a.type!=q.Zd&&a.type!=q.dg&&
c(a);a.Bb?E.enable(E.BLEND):E.disable(E.BLEND);a.rd?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST);switch(a.type){case q.$d:E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(a.self_shadow_polygon_offset,a.self_shadow_polygon_offset);E.cullFace(E.BACK);break;case q.Ge:case q.Vg:E.disable(E.POLYGON_OFFSET_FILL);E.cullFace(E.FRONT);break;case q.Bi:E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(-4,-4);E.cullFace(E.BACK);break;case q.Fe:if(1<G.oc||G.u3){E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(-2,
-2);break}default:E.disable(E.POLYGON_OFFSET_FILL),E.cullFace(E.BACK)}if(a.type==q.Zd||a.type==q.dg)for(var d=a.H,e=d.cc.Jb,f=0;6>f;f++){var g=b(f);d.pc=a.Oh[f];O.Wh(d.pc,d.Ng);m.fX(d);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,g,e,0);c(a);for(var g=a.kb,h=0;h<g.length;h++)for(var l=0;l<g[h].Ua.length;l++){var k=g[h].Ua[l];k.lc=k.zF[f]}p(a)}else p(a);C.QH(a);C.IE("draw subscene: "+q.QC(a))}};a.clear=function(a){E.bindFramebuffer(E.FRAMEBUFFER,a.H.Lf);c(a)};a.dL=function(a){var b=a.Tt;
b.length=0;var c=a.Pa,d=c.cd,f=a.Gb.attributes,g;for(g in f){var h=d[g],l=e.Zz(g),n=e.d0(g),m=e.qO(g);b.push({uD:l,ir:n,pf:f[g],fy:h.offset*m,yz:1<h.frames?h.length*m:0,Sc:h.Sc,Eo:h.Eo})}if("DEBUG"==u.type())for(g in d)l=e.Zz(g),b=e.x3(c.Wd,l),b=c.Wd[b],h=a.qb.Lg+" | "+a.qb.gf,l=d[g].length*d[g].frames*e.qO(g),C.e_(b.oZ,h,g,l,g in f);G.lE&&k(a)};a.DW=k;a.IX=function(a){for(var b=h.iG(),c=0;c<a.ag.length;c++)b.deleteVertexArray(a.ag[c]);a.ag.length=0};a.KX=function(a){for(var b=[],c=0;c<a.length;c++){var d=
a[c];b.push({uD:d.uD,ir:d.ir,pf:d.pf,fy:d.fy,yz:d.yz,Sc:d.Sc,Eo:d.Eo})}return b};a.BW=g;a.gL=function(a){var b=a.Gb,c=a.wa;a=a.Ig;E.useProgram(b.jk);for(var d=0;d<c.length;d++)E.uniform1i(b.Dn[a[d]],d)};a.JB=function(a,b,c,d,e,f){E.bindFramebuffer(E.FRAMEBUFFER,a);E.readPixels(b,c,d,e,E.RGBA,E.UNSIGNED_BYTE,f);E.bindFramebuffer(E.FRAMEBUFFER,null);return f};a.u5=function(a){var b=a.Gb;b.iB||(E.useProgram(b.jk),b.Lv.length||g(b),b=b.zH.u_cube_fog,b.fr(E,b.pf,null,a))};a.e3=function(a,b){var c=E.createFramebuffer();
E.bindFramebuffer(E.FRAMEBUFFER,c);if(P.xr(a)){var d=a.bg;E.framebufferRenderbuffer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.RENDERBUFFER,d)}else if(P.zr(a)){var e=a,d=e.Jb,e=e.zb==E.TEXTURE_CUBE_MAP?E.TEXTURE_CUBE_MAP_NEGATIVE_Z:e.zb;E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,e,d,0)}P.xr(b)?(d=b.bg,E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,d)):P.zr(b)&&(e=b,d=e.Jb,e=e.zb,E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,e,d,0));C.rX();E.bindFramebuffer(E.FRAMEBUFFER,
null);return c};a.d3=function(a,b,c,d,e){null==a?(E.bindFramebuffer(E.FRAMEBUFFER,a),E.viewport(0,0,d,e),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)):(P.xr(b)?E.deleteRenderbuffer(b.bg):P.zr(b)&&E.deleteTexture(b.Jb),P.xr(c)?E.deleteRenderbuffer(c.bg):P.zr(c)&&E.deleteTexture(c.Jb),E.deleteFramebuffer(a))};a.tca=function(){};a.CZ=function(a,b,c,d,e,f){a=a.Jb;E.viewport(0,0,c,c);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,b,a,0);b=M.Ly("FLIP_CUBEMAP_COORDS");a=b.Gb;E.activeTexture(E.TEXTURE0);
E.bindTexture(E.TEXTURE_2D,e);var g=e=0;c!=d&&(e=1/(6*d),g=1/(4*d));E.uniform1i(a.Dn.u_tex_number,f);E.uniform2fv(a.Dn.u_delta,[e,g]);E.useProgram(a.jk);n(b,0);E.bindTexture(E.TEXTURE_2D,null)};a.DZ=function(a,b,c,d,e){E.bindFramebuffer(E.FRAMEBUFFER,d);d=a.Jb;a=a.zb;E.bindTexture(a,d);E.viewport(0,0,b,c);E.texImage2D(a,0,E.RGBA,b,c,0,E.RGBA,E.UNSIGNED_BYTE,null);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,a,d,0);b=M.Ly("NONE");c=b.Gb;E.activeTexture(E.TEXTURE0);E.bindTexture(a,e);E.useProgram(c.jk);
n(b,0);E.bindFramebuffer(E.FRAMEBUFFER,null);E.bindTexture(a,null)};a.Ja=function(){};a.M3=function(){var a=h.g0(),b=h.iG();G.QK=a?!0:!1;G.lE=b?!0:!1;a?(U=function(b,c,d,e){a.drawElementsInstanced(E.TRIANGLES,b,c,d,e)},L=function(b,c){a.vertexAttribDivisor(b,c)},y=function(b,c,d){a.drawArraysInstanced(E.TRIANGLES,b,c,d)}):(U=function(a,b,c){E.drawElements(E.TRIANGLES,a,b,c)},L=function(){},y=function(a,b){E.drawArrays(E.TRIANGLES,a,b)});b?(H=function(a){b.bindVertexArray(a)},n=function(a,b){var c=
a.Pa;H(a.ag[b]);c.di?U(c.count,c.So,0,c.Xo):y(0,c.count,c.Xo);H(null)}):n=function(a,b){for(var c=a.Pa,d=a.Tt,e=0;e<c.Wd.length;e++){E.bindBuffer(E.ARRAY_BUFFER,c.Wd[e].Zl);for(var f=0;f<d.length;f++){var g=d[f];g.uD==c.Wd[e].type&&(E.enableVertexAttribArray(g.pf),E.vertexAttribPointer(g.pf,g.Sc,g.ir,g.ir==E.FLOAT?!1:!0,0,g.fy+g.yz*b),L(g.pf,g.Eo))}}c.di?(E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,c.di),U(c.count,c.So,0,c.Xo)):y(0,c.count,c.Xo);for(e=0;e<d.length;e++)g=d[e],E.disableVertexAttribArray(g.pf)}};
a.reset=function(){H=y=L=U=E=null}};b4w.module.__geometry=function(a,t){function p(){return{length:0,frames:1,Sc:0,offset:0,Eo:0}}function c(a,b){for(var c=b.a_tbn,d=b.a_position,e=d.length,f=1;f<a.Fb.length;f++)for(var g=a.Fb[f].hv,h=a.Fb[f].jh.a_position,l=0;l<e;l++)d[l]+=g*h[l];d=aa.Pz(c);for(f=0;f<d;f++){e=aa.identity(wa);for(l=1;l<a.Fb.length;l++)if(h=a.Fb[l].jh.a_tbn,g=a.Fb[l].hv)h=aa.Po(h,f,da),g=aa.slerp(aa.identity(Z),h,g,da),aa.fB(g,e,e);l=aa.Po(c,f,da);l=aa.fB(e,l,da);aa.mk(c,l,f)}}function b(a){return 65536<a.hb?pa.NN()?
!1:!0:!1}function k(a){return 0<a.Ga.length?!0:!1}function g(a,b,c){if(!k(a))return a;c||ja.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.hb*(b||1)+", will use drawArrays","color: #aa0");b=a.Ga;c=a.hb;var d=a.Ea,e=a.sa,f;for(f in d){var g=d[f],h=l(g,c);d[f]=M(b,g,h)}for(d=0;d<e.length;d++){var r=e[d];for(f in r)g=r[f],h=l(g,c),r[f]=M(b,g,h)}for(d=0;d<a.Fb.length;d++){f=a.Fb[d].jh;for(var F in f)g=f[F],h=l(g,c),f[F]=M(b,g,h)}a.hb=b.length;a.Ga=new Uint16Array(0);return a}
function M(a,b,c){if(0==b.length)return new Float32Array(0);for(var d=new Float32Array(a.length*c),e=0;e<a.length;e++)for(var f=a[e],g=0;g<c;g++)d[c*e+g]=b[c*f+g];return d}function m(){return{kf:null,Uc:n(),So:0,count:0,cd:{},usage:0,Rq:0,Tq:0,Wd:[],di:null,Fb:null,Xo:1,Mh:!0}}function z(a,b,c,d){if("a_normal"==b)return d=aa.er(d),z(a,"a_tbn",c,d);var e=a.cd,g=e[b],h=S(b);if(g)c&&g.Sc!=c&&ca.K('invalid num_comp for "'+b+'"'),r(a.Uc,b,d,g.offset);else{g=W(a.Uc,h);-1==g&&(a.Uc.push(f(h,0)),g=a.Uc.length-
1);var h=a.Uc[g].In,l=new h.constructor(h.length+d.length);l.set(h);a.Uc[g].In=l;r(a.Uc,b,d,h.length);b=e[b]=p();b.Sc=c;b.offset=h.length;b.length=d.length}A(a);return a}function C(a,b){if("a_normal"==b){for(var c=C(a,"a_tbn"),d=aa.Pz(c),e=new Float32Array(3*d),f=0;f<d;f++){var g=aa.k0(c,f,Ja);e.set(g,3*f)}return e}if(c=a.cd[b])return d=S(b),ha(b,G(a.Uc,d).subarray(c.offset,c.offset+c.length),new Float32Array(c.length));ca.K("extract_array_float() failed; invalid name: "+b)}function h(b,c){var d;
switch(c){case a.Zp:case a.nt:d=ba.STATIC_DRAW;break;case a.dx:d=ba.DYNAMIC_DRAW;break;default:ca.K("Wrong draw_mode")}b.usage=d}function e(a,b,c){function d(a,b){e[a]||(e[a]=0);e[a]+=b}var e={},f;for(f in a[0]){var g=a[0][f],h=S(f);d(h,g.length*a.length)}for(f in b)g=b[f],h=S(f),d(h,g.length);if(c){a=c.Ew.length;h=S("a_part_ts");d(h,4*a);h=S("a_part_r");d(h,4*a);b=c.Xr;for(f in b)h=S(f),d(h,b[f].Sc*a);c=c.PC;for(f in c)h=S(f),d(h,a)}return e}function A(a){a.kf?(a.di||(a.di=ba.createBuffer()),ba.bindBuffer(ba.ELEMENT_ARRAY_BUFFER,
a.di),ba.bufferData(ba.ELEMENT_ARRAY_BUFFER,a.kf,a.usage),a.Rq=a.kf.byteLength):a.Rq=0;for(var b=a.Tq=0;b<a.Uc.length;b++){var c=a.Uc[b].type,d=W(a.Wd,c);-1==d&&(a.Wd.push({Zl:null,type:c,oZ:ca.GS()}),d=a.Wd.length-1);c=a.Wd[d];c.Zl||(c.Zl=ba.createBuffer());ba.bindBuffer(ba.ARRAY_BUFFER,c.Zl);ba.bufferData(ba.ARRAY_BUFFER,a.Uc[b].In,a.usage);a.Tq+=a.Uc[b].In.byteLength}}function q(a,b){a.Ca=K.Kq(a.Ca,b);a.Kb=K.zE(a.Kb,b);a.Bc=K.ly(a.Bc,b);a.Id=K.AE(a.Id,b)}function P(a){for(var b=a[0],c=a[0],d=H("JOIN_"+
a.length+"_SUBMESHES"),e=0,f=0;f<a.length;f++)e+=a[f].Ga.length;d.Ga=new Uint32Array(e);var g=e=0;if(0<a[0].Fb.length)for(var h=0;h<a[0].Fb.length;h++){for(f=0;f<a.length;f++)e+=a[f].Fb[h].jh.a_position.length,g+=aa.Pz(a[f].Fb[h].jh.a_tbn);f={a_position:new Float32Array(e),a_tbn:aa.create(g)};d.Fb.push({hv:a[0].Fb[h].hv,jh:f})}for(f=e=0;f<a.length;f++)e+=a[f].hb;d.hb=e;for(var k in c.Ea){for(f=e=0;f<a.length;f++)e+=a[f].Ea[k].length;d.Ea[k]=new Float32Array(e)}for(k in c.sa[0]){for(f=e=0;f<a.length;f++)e+=
a[f].sa[0][k].length;for(f=0;f<c.sa.length;f++)d.sa[f]=d.sa[f]||{},d.sa[f][k]=new Float32Array(e)}f=d.Cd;f.Ca=K.wy(b.Cd.Ca);g=e=0;h=[];for(c=0;c<a.length;c++){var r=a[c],n=r.Ga,m=r.hb,x=r.Ea;k=r.Cd.Bc;K.oz(f.Ca,r.Cd.Ca);K.TZ(f.Bc,k);K.GF(r.Cd.Id,h);for(k=0;k<n.length;k++)d.Ga[e+k]=n[k]+g;var e=e+n.length,q;for(q in x){var n=x[q],v=g*l(n,m);d.Ea[q].set(n,v)}for(k=0;k<r.sa.length;k++){var x=r.sa[k],u=d.sa[k];for(q in x)n=x[q],v=g*l(n,m),u[q].set(n,v)}g+=m}f.Kb=K.Fy(ca.Rh(h),!0);if(0<d.Fb.length)for(c=
0;c<d.Fb.length;c++)for(q=d.Fb[c].jh,k=e=f=0;k<a.length;k++)g=a[k].Fb[c].jh,q.a_position.set(g.a_position,f),q.a_tbn.set(g.a_tbn,e),f+=g.a_position.length,e+=g.a_tbn.length;a[0].Nf&&(d.Nf={Ew:b.Nf.Ew,II:b.Nf.II,bS:!0,PC:b.Nf.PC,Xr:b.Nf.Xr,hz:b.Nf.hz});return d}function O(a,b,c){b=b.Cd;for(var d=K.Hf(),e=K.My(),f=[],g=0;g<c.length;g++)K.Kq(a.Cd.Ca,c[g],d),K.oz(b.Ca,d),K.AE(a.Cd.Id,c[g],e),K.GF(e,f);b.Kb=K.Fy(ca.Rh(f),!0);b.Id=K.aY(b.Kb);b.Bc=K.Hy(b.Kb)}function I(a,b,c,d,e,f){var h=a.submeshes[b],
l=h.base_length,k=H("SUBMESH_"+a.name+"_"+a.materials[b].name);k.hb=l;var r=!1;if(x(c,"a_texcoord")){var n=null,F=a.materials[b];b=a.submeshes[b];if(F.Ah.length)switch(F=F.Ah[0],F.texture_coords){case "UV":n=J(b,F.uv_layer||a.active_uv_name,a.name);break;case "ORCO":for(var m=a.b4w_boundings.bb_src,n=new Float32Array(2*b.base_length),F=(m.max_x+m.min_x)/2,q=(m.max_y+m.min_y)/2,v=m.max_x-m.min_x,m=m.max_y-m.min_y,A=0,B=0;B<b.position.length;B+=3)n[A++]=(b.position[B]-F)/v+.5,n[A++]=(b.position[B+1]-
q)/m+.5}null===n&&(n=new Float32Array(2*b.base_length));b=n}else b=new Float32Array(0);if(x(c,"a_orco_tex_coord")){for(var n=a.b4w_boundings.bb_src,F=new Float32Array(3*h.base_length),q=h.position,v=n.max_x-n.min_x,m=n.max_y-n.min_y,A=n.max_z-n.min_z,y=B=0;y<q.length;y+=3)v?F[B++]=ca.pa(parseFloat(((q[y]-n.min_x)/v).toFixed(5)),0,1):F[B++]=.5,m?F[B++]=ca.pa(parseFloat(((q[y+1]-n.min_y)/m).toFixed(5)),0,1):F[B++]=.5,A?F[B++]=ca.pa(parseFloat(((q[y+2]-n.min_z)/A).toFixed(5)),0,1):F[B++]=.5;n=F}else n=
new Float32Array(0);F=h.group;if(x(c,"a_influence")&&d){q=new Float32Array(4*l);v=F.length/l;m=new Float32Array(v);for(A=0;A<v;A++){m[A]=-1;for(var w in d)if(B=d[w],B.jT===A){m[A]=B.rF;break}}y=3<v?v:4;d=new Float32Array(y);w=new Uint32Array(y);for(var A=new Float32Array(4),B=new Float32Array(y),y=new Uint32Array(y),G=new Float32Array(4),p=0;p<l;p++)d.set(B),w.set(y),A.set(G),q.set(D(F,v,p,l,m,d,w,A),4*p)}else q=new Float32Array(0);d=q;e=e?ca.Y(e):{};e.a_color={Oo:!0};e.a_color.src=x(c,"a_color")&&
a.active_vcol_name?[{name:a.active_vcol_name,gi:7}]:[];k.Ea.a_texcoord=b;k.Ea.a_influence=d;k.Ea.a_orco_tex_coord=n;d=k.Ea;w=h.vertex_colors;b=h.color;n=a.name;F=[];for(q=0;q<w.length;q++)F.push(w[q].name);for(var E in e)if(q=e[E].src,q.length){for(m=v=0;m<q.length;m++)v+=ca.Bp(q[m].gi);d[E]=new Float32Array(v*l);for(m=A=0;m<q.length;m++){var z=q[m].name,B=q[m].gi,y=ca.PQ(B),G=F.indexOf(z);if(-1==G)ja.warn('vertex color "'+z+'" for mesh "'+n+'" not found'),p=7;else{for(var p=w[G].mask,ia,C=ia=0;C<
G;C++)ia+=ca.Bp(w[C].mask);ia*=l}C=ca.Bp(p);(B&p)!==B&&ja.error("Wrong color extraction from "+z+" to "+E+' for the mesh "'+n+'".');for(z=0;z<l;z++)for(var L=0;3>L;L++)if(y[L]){var R=ca.cs(p,L);d[E][z*v+(A+ca.cs(B,L))]=-1==G?0:b[ia+z*C+R]}A+=C}}else d[E]=new Float32Array(0);E=a.name;ia=k.Ea;if(f)for(var Z in f)ia[f[Z]]=J(h,Z,E);k.Ga=new Uint32Array(h.indices);Z=h.position.length/l/3;E=x(c,"a_tbn")&&h.tbn.length?!0:!1;ia=x(c,"a_shade_tangs")&&h.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&(r=
!0);for(e=0;e<Z;e++){f=u(h,l,E,ia,e);if(r)if(d={},d.name=a.b4w_shape_keys[e].name,k.Fb.push(d),e){d.jh=f;d.hv=a.b4w_shape_keys[e].value;continue}else d.jh=u(h,l,E,ia,e),d.hv=1;k.sa.push(f)}if(1<Z&&!r){a=k.sa[0];f={};for(var N in a)f[N]=new Float32Array(a[N]);k.sa.push(f)}x(c,"a_polyindex")&&(g(k,1,!0),k.Ea.a_polyindex=U(k));h=h.boundings;c=k.Cd;c.Ca=K.Hf();c.Ca.max_x=h.bb.max_x;c.Ca.max_y=h.bb.max_y;c.Ca.max_z=h.bb.max_z;c.Ca.min_x=h.bb.min_x;c.Ca.min_y=h.bb.min_y;c.Ca.min_z=h.bb.min_z;N=h.rbb;a=
h.caxis_x;l=h.caxis_y;r=h.caxis_z;f=h.be_ax;c.Kb=K.tE(a,l,r,h.be_cen);ea.scale(c.Kb.ab,f[0],c.Kb.ab);ea.scale(c.Kb.eb,f[1],c.Kb.eb);ea.scale(c.Kb.fb,f[2],c.Kb.fb);c.Bc=K.Hy(c.Kb);ea.copy(N.rbb_c,c.Id.V);ea.copy(a,c.Id.ab);ea.copy(l,c.Id.eb);ea.copy(r,c.Id.fb);h=N.rbb_s;ea.scale(c.Id.ab,h[0],c.Id.ab);ea.scale(c.Id.eb,h[1],c.Id.eb);ea.scale(c.Id.fb,h[2],c.Id.fb);return k}function u(a,b,c,d,e){var f={},g=new Float32Array(3*b),h=aa.create(c?b:0),l=e*b*3;g.set(a.position.subarray(l,l+3*b),0);c&&aa.copy(a.tbn,
e*b,b,h);d&&(c=new Float32Array(3*b),c.set(a.shade_tangs.subarray(0,3*b),0),f.a_shade_tangs=c);f.a_position=g;f.a_tbn=h;return f}function J(a,b,c){var d=2*a.base_length,e=a.uv_layers.indexOf(b);if(-1==e)return ja.warn('uv layer "'+b+'" for mesh "'+c+'" not found'),new Float32Array(d);b=e*d;return a.texcoord.subarray(b,b+d)}function x(a,b){return-1<a.indexOf(b)?!0:!1}function D(b,c,d,e,f,g,h,l){for(var k=!0,r=0;r<c;r++){var n=b[r*e+d];if(-1!==n){var F=f[r];-1!==F&&(g[r]=n,h[r]=F,k=!1)}}if(k)return l;
v(g,h,a.eE,!1);for(r=b=0;4>r;r++)b+=g[r];if(.01>b)return l;for(r=0;4>r;r++)g[r]/=b;if(.01>Math.abs(g[0]-1))l[0]=h[0]+1;else for(r=0;4>r;r++)l[r]=h[r]+g[r];return l}function l(a,b){if(0==b)return 0;var c=a.length,d=c/b;d!=Math.floor(d)&&ca.K("Array size mismatch during geometry calculation: array length="+c+", base length="+b);return d}function v(b,c,d,e){for(var f=b.length,g=f,h=!1,l=e?-1:1;1<g||h;){1<g&&(g=Math.floor(g/1.247330950103979));for(var h=!1,k=0;g+k<f;k++)if(d==a.eE?0>l*(b[k]-b[k+g]):b[k]<
b[k+g]&&e)h=b[k],b[k]=b[k+g],b[k+g]=h,h=c[k],c[k]=c[k+g],c[k+g]=h,h=!0}}function N(a,b,c){var d=[],e=[];ea.subtract(b,a,d);ea.subtract(c,a,e);ea.normalize(d,d);ea.normalize(e,e);a=ca.pa(ea.dot(d,e),-1,1);return Math.acos(a)}function E(a,b){var c=[];if(k(b))for(var d=b.Ga,e=d.length/3,f=0;f<e;f++){var g=new Float32Array(9),h=d[3*f];g[0]=a[3*h];g[1]=a[3*h+1];g[2]=a[3*h+2];h=d[3*f+1];g[3]=a[3*h];g[4]=a[3*h+1];g[5]=a[3*h+2];h=d[3*f+2];g[6]=a[3*h];g[7]=a[3*h+1];g[8]=a[3*h+2];c[f]=g}else for(f=0;f<a.length;f++)g=
new Float32Array(9),g[0]=a[9*f],g[1]=a[9*f+1],g[2]=a[9*f+2],g[3]=a[9*f+3],g[4]=a[9*f+4],g[5]=a[9*f+5],g[6]=a[9*f+6],g[7]=a[9*f+7],g[8]=a[9*f+8],c[f]=g;return c}function U(a){for(var b=new Float32Array(a.hb),c=0;c<a.hb;c++)b[c]=c%3/2;return b}function L(a,b,c){var d=ea.dist(a,b);a=ea.dist(a,c);b=ea.dist(b,c);c=(d+a+b)/2;return c*(c-d)*(c-a)*(c-b)}function y(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),c=new Float32Array(8*a),d=0;d<a;d++)c.set(b,8*d);return c}function H(a){return{name:a,hb:0,Ga:null,
sa:[],Ea:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},Fb:[],Cd:{Ca:K.Hf(),Kb:K.xu(),Bc:K.Gy(),Id:K.My()},Nf:null}}function n(a){var b=[],c;for(c in a)b.push(f(c,a[c]));return b}function f(a,b){return{In:new (B(a))(b),type:a}}function W(a,b){for(var c=0;c<a.length;c++)if(a[c].type==b)return c;return-1}function d(a,b){var c=W(a,b);return-1==c?null:a[c].Zl}function G(a,b){var c=W(a,b);return-1==c?null:a[c].In}function B(a){switch(a){case "float":return Float32Array;
case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function S(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}
function r(a,b,c,d){var e=S(b);qa(b,c,a[W(a,e)].In.subarray(d))}function ha(a,b,c){switch(S(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=ca.RR(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=ca.CS(b[a])}return c}function qa(a,b,c){switch(S(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=ca.br(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=ca.DS(b[a])}return c}var K=t("__boundings"),pa=t("__extensions"),ja=t("__print"),
ma=t("__quat"),aa=t("__tbn"),ka=t("__tsr"),ca=t("__util"),ea=t("__vec3"),wa=aa.create(),da=aa.create(),Z=aa.create(),Ja=new Float32Array(3),R=new Float32Array(3),na=new Float32Array(3),X=ma.create(),fa=new Float32Array(8);a.nt=10;a.dx=20;a.eE=0;a.y8=1;a.Zp=a.nt;var ba=null;a.wq="float";a.B8="short";a.C8="unsigned_byte";a.wh=function(a){ba=a};a.kS=function(a,d,f){b(a)&&g(a);var k=a.Ga,F=a.hb,x=a.sa,q={},v;for(v in a.Ea)v in f&&!f[v].Oo||(q[v]=a.Ea[v]);f=m();0<a.Fb.length&&c(a,x[0]);v=a.Nf;if(k.length){var K=
k.length;if(65536>=F)var k=new Uint16Array(k),u=ba.UNSIGNED_SHORT;else k=new Uint32Array(k),u=ba.UNSIGNED_INT}else K=F,k=null;for(var B=e(x,q,v),B=n(B),y={},D=0;D<B.length;D++)y[B[D].type]=0;var H={},G;for(G in q){var E=q[G],z=E.length;if(z){var C=S(G),D=H[G]=p();D.length=z;D.Sc=l(E,F);D.offset=y[C];r(B,G,E,y[C]);y[C]+=z}}q=x.length;for(G in x[0])if(E=x[0][G],C=S(G),z=E.length,E=l(E,F),z)for(D=H[G]=p(),D.length=z,D.frames=q,D.Sc=E,D.offset=y[C],1<q&&(D=H[G+"_next"]=p(),D.length=z,D.frames=q,D.Sc=
E,D.offset=y[C]+z),D=0;D<q;D++)E=x[D][G],C=S(G),r(B,G,E,y[C]),y[C]+=z;if(v){x=v.Ew;G=v.II;var q=v.Xr,z=v.PC,C=v.bS,F={a_part_ts:{data:[],Sc:4},a_part_r:{data:[],Sc:4}},w;for(w in q)F[w]={data:[],Sc:q[w].Sc};for(w in z)F[w]={data:[],Sc:1};for(E=0;E<x.length;E++){D=x[E];C&&G&&!v.hz&&(D=ka.multiply(G,x[E],fa));!C&&v.hz&&ea.subtract(x[E],G,x[E]);F.a_part_ts.data.push(D[0],D[1],D[2],D[3]);F.a_part_r.data.push(D[4],D[5],D[6],D[7]);for(w in q)for(var D=q[w].Sc,ia=0;ia<D;ia++)F[w].data.push(q[w].data[E*D+
ia]);for(w in z)F[w].data.push(z[w][0])}for(w in F)x=S(w),r(B,w,F[w].data,y[x]),G=p(),G.Sc=F[w].Sc,G.offset=y[x],G.Eo=1,G.length=F[w].data.length,H[w]=G,y[x]+=G.length;f.Xo=v.Ew.length}f.count=K;f.kf=k;f.Uc=B;f.So=u;f.cd=H;h(f,d);A(f);f.Fb=a.Fb;return f};a.X4=c;a.d1=b;a.c1=k;a.OC=g;a.z5=function(a,b,c){h(a,b);a.count=c.length;a.kf=c;a.So=c instanceof Uint16Array?ba.UNSIGNED_SHORT:ba.UNSIGNED_INT};a.y5=z;a.fN=C;a.Wca=function(a){a.usage=ba.STATIC_DRAW};a.M1=function(a){a.usage=ba.DYNAMIC_DRAW};a.LS=
A;a.Hw=function(a,b,c,d){ba.bindBuffer(ba.ARRAY_BUFFER,a.Wd[W(a.Wd,b)].Zl);ba.bufferSubData(ba.ARRAY_BUFFER,ca.yk*d,c)};a.FX=function(a){a.di&&ba.deleteBuffer(a.di);for(var b=0;b<a.Wd.length;b++)a.Wd[b].Zl&&ba.deleteBuffer(a.Wd[b].Zl);a.Wd.length=0};a.FO=function(a,b){return a.submeshes[b].base_length?!1:!0};a.KI=function(a,b){for(var c=0;c<a.sa.length;c++){var d=a.sa[c].a_position;ka.An(d,b,d,0);d=a.sa[c].a_tbn;aa.RP(d,b,d);(d=a.sa[c].a_shade_tangs)&&0<d.length&&ka.cJ(d,b,d,0)}(c=a.Ea.au_center_pos)&&
c.length&&ka.An(c,b,c,0);q(a.Cd,b)};a.W4=function(a,b){var c=a.Ea.au_center_pos;if(c&&c.length){var d=new Float32Array(c);ka.An(d,b,d,0);for(var e=0;e<a.sa.length;e++)for(var f=0;f<d.length;f++)a.sa[e].a_position[f]+=d[f]-c[f];c.set(d)}else ca.K('Attribute "au_center_pos" is missing in particle submesh');q(a.Cd,b)};a.SW=q;a.V4=function(a,b){var c=a.hb,d;for(d in b){var e=b[d].length;a.Ea[d]=new Float32Array(e*c);for(var f=0;f<c;f++)for(var g=0;g<e;g++)a.Ea[d][f*e+g]=b[d][g]}};a.jS=P;a.O1=function(a,
b,c){if(!a.hb)return H("EMPTY");var d=c.length;65536<a.hb*d&&!pa.NN()&&g(a,d);var e=a.Ga,f=a.hb,h=a.Ea,k=a.sa,r;for(r in b){var n=b[r].length,F=n*f;h[r]=new Float32Array(F);for(var m=0;m<f;m++)for(F=0;F<n;F++)h[r][m*n+F]=b[r][F]}b=H("CLONE_"+d+"_SUBMESHES");b.hb=f*d;b.Ga=new Uint32Array(e.length*d);for(m=0;m<d;m++)for(n=e.length*m,r=f*m,F=0;F<e.length;F++)b.Ga[n+F]=e[F]+r;for(var x in h)for(e=h[x],F=e.length*d,n=l(e,f),b.Ea[x]=new Float32Array(F),m=0;m<d;m++)r=f*n*m,b.Ea[x].set(e,r);for(x in k[0])for(m=
0;m<k.length;m++)for(e=k[m][x],F=e.length*d,n=l(e,f),b.sa[m]=b.sa[m]||{},b.sa[m][x]=new Float32Array(F),F=0;F<d;F++)switch(h=c[F],r=f*n*F,x){case "a_position":ka.An(e,h,b.sa[m][x],r);break;case "a_tbn":ka.m5(e,h,b.sa[m][x],r);break;case "a_shade_tangs":ka.dJ(e,h,b.sa[m][x],r);break;default:ca.K("Wrong attribute name: "+x)}O(a,b,c);return b};a.AL=O;a.qz=I;a.YZ=function(a){var b=a.hb,c=a.sa[0].a_position,d=new Float32Array(12*b);a=new Uint32Array(4*a.Ga.length);for(var e=new Float32Array(4*b),f=0;f<
b;f++){d[12*f]=c[3*f];d[12*f+1]=c[3*f+1];d[12*f+2]=c[3*f+2];d[12*f+3]=c[3*f];d[12*f+4]=c[3*f+1];d[12*f+5]=c[3*f+2];d[12*f+6]=c[3*f];d[12*f+7]=c[3*f+1];d[12*f+8]=c[3*f+2];d[12*f+9]=c[3*f];d[12*f+10]=c[3*f+1];d[12*f+11]=c[3*f+2];a[6*f]=4*f+2;a[6*f+1]=4*f+1;a[6*f+2]=4*f;a[6*f+3]=4*f+2;a[6*f+4]=4*f;a[6*f+5]=4*f+3;var g=Math.random();e[4*f]=g;e[4*f+1]=g;e[4*f+2]=g;e[4*f+3]=g}c=H("HALO");c.sa[0]={};c.hb=4*b;c.sa[0].a_position=d;c.Ea.a_halo_bb_vertex=y(b);c.Ea.a_random_vals=e;c.Ga=a;return c};a.y0=x;a.hN=
function(a,b,c){for(var d=[],e=0;e<a.submeshes.length;e++){var f=I(a,e,b,null,c,null);f.hb&&d.push(f)}return d.length?1==d.length?d[0]:P(d):H("EMPTY")};a.x5=function(a,b,c,d){var e=a.kf,f=C(a,"a_position"),g=b.X1,h=b.Y1;b=b.yZ;for(var l=e,k=l.length/3,r=0;r<k;r++){var n=l[3*r],m=l[3*r+1],F=l[3*r+2],x=f[3*n+1],q=f[3*n+2],v=f[3*m+1],K=f[3*m+2],w=f[3*F+1],u=f[3*F+2];g[3*r]=(f[3*n]+f[3*m]+f[3*F])/3;g[3*r+1]=(x+v+w)/3;g[3*r+2]=(q+K+u)/3}ka.An(g,c,h);c=h.length/3;for(f=0;f<c;f++)g=h[3*f]-d[0],l=h[3*f+1]-
d[1],k=h[3*f+2]-d[2],b[f]=g*g+l*l+k*k;d=e;e=b.length;if(!(2>e))for(h=e,f=!1;1<h||f;)for(1<h&&(h=Math.floor(h/1.247330950103979)),f=!1,c=0;h+c<e;c++)0>b[c]-b[c+h]&&(f=b[c],b[c]=b[c+h],b[c+h]=f,f=d,g=c,l=c+h,k=f[3*g],r=f[3*g+1],n=f[3*g+2],f[3*g]=f[3*l],f[3*g+1]=f[3*l+1],f[3*g+2]=f[3*l+2],f[3*l]=k,f[3*l+1]=r,f[3*l+2]=n,f=!0);e=d;ba.bindBuffer(ba.ELEMENT_ARRAY_BUFFER,a.di);ba.bufferData(ba.ELEMENT_ARRAY_BUFFER,e,ba.DYNAMIC_DRAW)};a.D4=v;a.cX=function(a,b,c){for(var d=b.length/3,e=a.length/3,f=[],g=Array(3),
h=Array(3),l=Array(3),k=0;k<e;k++){for(var r=a[3*k],n=a[3*k+1],m=a[3*k+2],x=0;3>x;x++)g[x]=b[3*r+x],h[x]=b[3*n+x],l[x]=b[3*m+x];if(c)var x=N(g,h,l),F=N(h,l,g),q=Math.PI-x-F;else q=F=x=1;var v=f,K;K=g;var w=l,u=[],A=[],B=[];ea.subtract(h,K,u);ea.subtract(w,K,A);ea.cross(u,A,B);ea.normalize(B,B);K=B;for(w=0;3>w;w++)u=3*n+w,A=3*m+w,v[3*r+w]=x*K[w],v[u]=F*K[w],v[A]=q*K[w]}if(c)for(var y in c)for(k=c[y],a=0;3>a;a++){b=3*k[0]+a;for(e=1;e<k.length;e++)g=3*k[e]+a,f[b]+=f[g];for(e=1;e<k.length;e++)g=3*k[e]+
a,f[g]=f[b]}for(k=0;k<d;k++){c=k;y=f;a=new Float32Array(3);for(b=0;3>b;b++)e=3*c+b,a[b]=y[e];ea.normalize(a,a);for(b=0;3>b;b++)e=3*c+b,y[e]=a[b]}return f};a.eX=function(a,b,c){for(var d={},e=b.length/3,f=0;f<e;f++){var g=String(b[3*f])+String(b[3*f+1])+String(b[3*f+2]);d[g]=[]}b=a.length;for(f=0;f<b;f++)e=a[f],g=String(c[3*e])+String(c[3*e+1])+String(c[3*e+2]),g in d&&d[g].push(e);return d};a.OF=function(a,b,c,d){var e;e=E(a.sa[0].a_position,a);if(c){var f;f=a.sa[0].a_tbn;for(var g=aa.Pz(f),h=new Float32Array(3*
g),l=0;l<g;l++){var k=aa.Eb(f,l,X),k=ea.transformQuat(ca.Ee,k,Ja);h[3*l]=k[0];h[3*l+1]=k[1];h[3*l+2]=k[2]}f=E(h,a)}h=e.length;l=new Float32Array(h);g=Ja;for(a=0;a<h;a++){var r=e[a];g.set(r.subarray(0,3));R.set(r.subarray(3,6));na.set(r.subarray(6));l[a]=Math.sqrt(L(g,R,na))}g=new Float32Array(h);g[0]=l[0];for(a=1;a<h;a++)g[a]=g[a-1]+l[a];h=g[l.length-1];l=[];for(a=0;a<b;a++){var k=h*ca.pi(d),k=ca.hy(g,k,0,g.length-1),r=c?f[k]:e[k],n=d;(k=Ja)||(k=new Float32Array(3));var m=r[0],x=r[1],F=r[2],q=r[3],
v=r[4],K=r[5],w=r[6],u=r[7],r=r[8],A=ca.pi(n),n=ca.pi(n);1<A+n&&(A=1-A,n=1-n);var B=1-A-n;k[0]=B*m+A*q+n*w;k[1]=B*x+A*v+n*u;k[2]=B*F+A*K+n*r;c?(l[a]=new Float32Array(4),ea.normalize(k,k),k=ma.rotationTo(ca.Ee,k,X),l[a][0]=k[0],l[a][1]=k[1],l[a][2]=k[2],l[a][3]=k[3]):(l[a]=new Float32Array(3),l[a][0]=k[0],l[a][1]=k[1],l[a][2]=k[2])}return l};a.pz=U;a.ffa=L;a.qN=y;a.UQ=function(a,b,c){a=a.sa[0].a_position;for(var d=0;d<a.length;d+=3)a[d]=(a[d]-c[0])*b[0]+c[0],a[d+1]=(a[d+1]-c[1])*b[1]+c[1],a[d+2]=(a[d+
2]-c[2])*b[2]+c[2]};a.YK=function(a,b,c){var e=a.T[0].da;a=a.A.yh;for(var f=1;f<a.length;f++)a[f].name==b&&(a[f].value=c);for(f=0;f<e.length;f++)if(!e[f].Uh&&e[f].$f&&!e[f].Xk){b=e[f].Pa;c=S("a_position");var g=G(b.Uc,c);ba.bindBuffer(ba.ARRAY_BUFFER,d(b.Wd,c));var h=b.cd.a_position;c=e[f];var l=a;if(h){for(var k=h.offset,h=h.length+k,r=c.Pa.Fb[0].jh.a_position,n=k;n<h;n++)g[n]=r[n-k];for(n=1;n<c.Pa.Fb.length;n++){var r=c.Pa.Fb[n].jh.a_position,m=l[n].value;if(m)for(var x=k;x<h;x++)g[x]+=m*r[x-k]}ba.bufferSubData(ba.ARRAY_BUFFER,
ca.yk*k,g.subarray(k))}g=S("a_tbn");c=G(b.Uc,g);ba.bindBuffer(ba.ARRAY_BUFFER,d(b.Wd,g));l=b.cd.a_tbn;b=c;c=a;if(l){g=l.offset;l=l.length+g;k=e[f].Pa.Fb;h=k[0].jh.a_tbn;n=aa.identity(wa);for(r=g;r<l;r+=aa.mK){for(var m=aa.identity(Z),x=(r-g)/aa.mK,F=1;F<k.length;F++){var q=c[F].value;if(q){var v=aa.Po(k[F].jh.a_tbn,x,da),q=aa.slerp(n,v,q,da);aa.fB(q,n,m)}}x=aa.Po(h,x,da);m=aa.fB(m,x,da);b[r]=ca.br(m[0]);b[r+1]=ca.br(m[1]);b[r+2]=ca.br(m[2]);b[r+3]=ca.br(m[3])}ba.bufferSubData(ba.ARRAY_BUFFER,ca.yk*
g,b.subarray(g))}}};a.JE=function(a){return a.A.$f};a.Dba=function(a){var b=[];if(a.A)for(var c=1;c<a.A.yh.length;c++)b.push(a.A.yh[c].name);return b};a.Cba=function(a,b){if(a.A)for(var c=1;c<a.A.yh.length;c++)if(b==a.A.yh[c].name)return a.A.yh[c].value;return 0};a.D0=function(a,b){var c=a.A.yh;if(c)for(var d=1;d<c.length;d++)if(c[d].name==b)return!0;return!1};a.nG=function(a){return a&&a.A&&a.A.df?!0:!1};a.BZ=function(b,c){var d=b.Pa;if(d){for(var e=c.length/3/2,f=new Float32Array(12*e),g=new Float32Array(12*
e),h=new Uint16Array(6*e),l=0;l<e;l++){var k=6*l,m=6*l+3,x=c[k],q=c[k+1],k=c[k+2],v=c[m],K=c[m+1],m=c[m+2],u=v-x,B=K-q,y=m-k;f[12*l]=x;f[12*l+1]=q;f[12*l+2]=k;g[12*l]=u;g[12*l+1]=B;g[12*l+2]=y;f[12*l+3]=v;f[12*l+4]=K;f[12*l+5]=m;g[12*l+3]=-u;g[12*l+4]=-B;g[12*l+5]=-y;f[12*l+6]=x;f[12*l+7]=q;f[12*l+8]=k;g[12*l+6]=-u;g[12*l+7]=-B;g[12*l+8]=-y;f[12*l+9]=v;f[12*l+10]=K;f[12*l+11]=m;g[12*l+9]=u;g[12*l+10]=B;g[12*l+11]=y;h[6*l]=4*l;h[6*l+1]=4*l+1;h[6*l+2]=4*l+2;h[6*l+3]=4*l;h[6*l+4]=4*l+3;h[6*l+5]=4*l+
1}var l=0,D;for(D in d.cd)e=d.cd[D],l+=f.length/3*e.Sc;e={};e["float"]=l;l=d.Uc=n(e);a.z5(d,b.Mj,h);h=0;for(D in d.cd)switch(e=d.cd[D],D){case "a_position":r(l,D,f,h);e.offset=h;e.length=f.length;h+=e.length;break;case "a_direction":r(l,D,g,h);e.offset=h;e.length=g.length;h+=e.length;break;default:e.offset=h,e.length=f.length/3*e.Sc,x=new Float32Array(e.length),r(l,D,x,h),h+=e.length}A(d)}};a.MX=function(a){if(a){var b=m();if(a.kf)switch(a.So){case ba.UNSIGNED_SHORT:b.kf=new Uint16Array(a.kf);break;
case ba.UNSIGNED_INT:b.kf=new Uint32Array(a.kf)}else b.kf=null;for(var c=b,d=a.Uc,e=[],f=0;f<d.length;f++){var g=d[f].In,h=d[f].type;e.push({In:new g.constructor(g),type:h})}c.Uc=e;b.So=a.So;b.count=a.count;b.cd=ca.Y(a.cd);b.usage=a.usage;b.Rq=a.Rq;b.Tq=a.Tq;b.di=null;b.tA=ca.Y(a.tA);b.Fb=ca.Y(a.Fb);b.Xo=a.Xo;b.Mh=a.Mh}else b=null;return b};a.fi=H;a.PX=function(a){var b=H(a.name);b.hb=a.hb;b.Ga=ca.Y(a.Ga);b.sa=ca.Y(a.sa);b.Ea=ca.Y(a.Ea);b.Fb=ca.Y(a.Fb);K.Hj(a.Cd.Ca,b.Cd.Ca);K.Nq(a.Cd.Kb,b.Cd.Kb);
K.um(a.Cd.Bc,b.Cd.Bc);K.VX(a.Cd.Id,b.Cd.Id);b.Nf=ca.Y(a.Nf);return b};a.reset=function(){ba=null};a.Bca=n;a.x3=W;a.Lba=d;a.hG=G;a.Taa=B;a.Zz=S;a.qO=function(a){switch(S(a)){case "float":return ca.yk;case "short":return ca.Ft;case "unsigned_byte":return ca.LD;default:return ca.yk}};a.d0=function(a){switch(S(a)){case "float":return ba.FLOAT;case "short":return ba.SHORT;case "unsigned_byte":return ba.UNSIGNED_BYTE;default:return ba.FLOAT}};a.eT=r;a.pfa=function(a,b){switch(S(a)){case "short":return ca.RR(b);
case "unsigned_byte":return ca.CS(b)}return b};a.ofa=function(a,b){switch(S(a)){case "short":return ca.br(b);case "unsigned_byte":return ca.DS(b)}return b};a.w9=ha;a.u9=qa};b4w.module.__subscene=function(a,t){function p(a,b){a.Qr=b;a.xv=new Float32Array(3*b);a.ip=new Float32Array(4*b);a.hp=new Float32Array(4*b)}function c(a){a={type:a,Hb:"",Io:!1,Bb:!1,tB:!1,St:!1,Jr:!1,ym:0,ng:0,zm:[],debug_view_mode:0,debug_colors_seed:0,Vy:1,Iu:!1,time:0,H:null,Oh:null,zo:[],kb:[],rb:[],xi:[],qj:new Float32Array(3),Md:new Float32Array(3),pe:new Float32Array(4),tg:new Float32Array(4),mg:new Float32Array(16),qs:0,ih:0,Qr:0,xv:null,ip:null,hp:null,vP:null,re:new Float32Array(3),De:new Float32Array(3),
rs:new Float32Array(4),SC:new Float32Array(3),RC:new Float32Array([0,0,1]),TC:new Float32Array(4),ps:new Float32Array(3),sC:"",ny:0,sp:0,Ju:0,bp:!1,dj:new Float32Array(3),oj:!1,eu:0,pj:new Float32Array(4),wk:0,fh:!1,Pk:0,ry:new Float32Array(2),Ok:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,pn:new Float32Array(3),
ys:!1,us:!1,ws:0,As:0,zs:0,xs:0,Gp:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Wm:0,as:0,sn:0,Cu:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,Us:null,Ts:null,Qw:null,Cl:null,mc:!1,Cz:"",Iq:0,Fq:0,Hq:0,$n:!0,average_luminance:0,$t:0,Pu:0,mb_decay_threshold:0,mb_factor:0,aB:0,Sv:"",yy:"",IG:new Float32Array(2),HA:0,jy:2,Gq:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,Aw:new Float32Array(2),
Lb:new Float32Array(2),Yk:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,xh:0,Ev:!0,rC:!1,zC:!1,vC:!1,wC:!1,yC:!1,xC:!1,qC:"",Kp:!1,Lp:!1,Mp:!1,lc:!0,enqueue:!0,wb:!0,Db:!0,rd:!0,Wa:!0,uf:1};a.Lb[0]=1;a.Lb[1]=1;a.Yk[2]=.5;a.Yk[3]=.5;a.Gp=8;return a}function b(a,b){return a==b?0:a>b?1:-1}function k(a,c){return b(a.gg,c.gg)||b(a.ol,c.ol)||b(a.Rd,c.Rd)||b(a.Gb.DO,c.Gb.DO)||b(a.Nn,c.Nn)}var g=t("__camera"),M=t("__config"),m=t("__util"),z=t("__boundings"),C=M.zd;
a.Nb=0;a.Gd=1;a.Fh=2;a.Ge=3;a.Zd=4;a.Vg=5;a.dg=6;a.Fe=7;a.$d=8;a.Wg=9;a.zk=10;a.rc=11;a.qt=13;a.Gx=14;a.Bf=15;a.zi=16;a.Bi=17;a.Vp=18;a.BJ=19;a.Jx=20;a.fE=21;a.uJ=22;a.Ht=23;a.Hx=24;a.dE=25;a.Ix=26;a.ND=27;a.uj=28;a.MD=29;a.ot=30;a.Ci=31;a.uq=32;a.rq=33;a.qx=34;a.Ie=35;a.OD=36;a.Gh=37;a.LUMINANCE=38;a.xJ=39;a.Bx=40;a.jt=41;a.OV=42;a.jm=43;a.Dt=44;a.lK=45;a.gm=46;a.vq=47;a.yJ=48;a.$Y=function(a,b,k,m){var e=c(8);e.Cu=a;e.self_shadow_polygon_offset=k.self_shadow_polygon_offset;e.xh=b;switch(k.Zi[b]){case "SPOT":case "POINT":e.H=
g.ad(g.fd);g.pR(e.H,k.$R[b],k.mu[b],k.lu[b]);break;default:e.H=g.ad(g.Ck)}p(e,m);return e};a.QX=function(a){var b=c(a.type);b.Hb=a.Hb;b.Io=a.Io;b.lc=a.lc;b.enqueue=a.enqueue;b.wb=a.wb;b.Db=a.Db;b.rd=a.rd;b.Bb=a.Bb;b.tB=a.tB;b.St=a.St;b.Jr=a.Jr;b.Wa=a.Wa;b.ym=0;b.ng=0;b.zm=[];b.debug_view_mode=a.debug_view_mode;b.debug_colors_seed=a.debug_colors_seed;b.Vy=a.Vy;b.Iu=a.Iu;b.time=a.time;b.H=g.hd(a.H,!0);b.Oh=m.Y(a.Oh);b.zo=m.Y(a.zo);b.kb=m.Y(a.kb);b.rb=m.Y(a.rb);b.xi=m.Y(a.xi);b.qj.set(a.qj);b.Md.set(a.Md);
b.pe.set(a.pe);b.tg.set(a.tg);b.mg.set(a.mg);b.qs=a.qs;b.ih=a.ih;b.Qr=a.Qr;b.xv=m.Y(a.xv);b.ip=m.Y(a.ip);b.hp=m.Y(a.hp);b.vP=m.Y(a.vP);b.re.set(a.re);b.De.set(a.De);b.rs.set(a.rs);b.SC.set(a.SC);b.RC.set(a.RC);b.TC.set(a.TC);b.ps.set(a.ps);b.sC=a.sC;b.ny=a.ny;b.sp=a.sp;b.Ju=a.Ju;b.bp=a.bp;b.dj.set(a.dj);b.oj=a.oj;b.eu=a.eu;b.pj.set(a.pj);b.wk=a.wk;b.fh=a.fh;b.Pk=a.Pk;b.ry.set(a.ry);b.Ok=a.Ok;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.mie_brightness=
a.mie_brightness;b.rayleigh_brightness=a.rayleigh_brightness;b.spot_brightness=a.spot_brightness;b.mie_strength=a.mie_strength;b.rayleigh_strength=a.rayleigh_strength;b.scatter_strength=a.scatter_strength;b.mie_collection_power=a.mie_collection_power;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_distribution=a.mie_distribution;b.pn.set(a.pn);b.ys=a.ys;b.us=a.us;b.ws=a.ws;b.As=a.As;b.zs=a.zs;b.xs=a.xs;b.Gp=a.Gp;b.ssao_only=a.ssao_only;b.ssao_white=a.ssao_white;b.brightness=a.brightness;
b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;b.god_rays_intensity=a.god_rays_intensity;b.Wm=a.Wm;b.as=a.as;b.sn=a.sn;b.Cu=a.Cu;b.self_shadow_polygon_offset=a.self_shadow_polygon_offset;b.self_shadow_normal_offset=a.self_shadow_normal_offset;b.Us=m.Y(a.Us);b.Ts=m.Y(a.Ts);b.Qw=m.Y(a.Qw);b.Cl=m.Y(a.Cl);b.mc=a.mc;b.Cz=a.Cz;b.Iq=a.Iq;b.Fq=a.Fq;b.Hq=a.Hq;b.$n=a.$n;b.average_luminance=a.average_luminance;b.$t=a.$t;b.Pu=a.Pu;b.mb_decay_threshold=a.mb_decay_threshold;b.mb_factor=a.mb_factor;
b.aB=a.aB;b.Sv=a.Sv;b.yy=a.yy;b.IG.set(a.IG);b.HA=a.HA;b.jy=a.jy;b.Gq=a.Gq;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.uf=a.uf;b.Aw.set(a.Aw);b.Lb.set(a.Lb);b.Yk.set(a.Yk);b.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);b.enable_hmd_stereo=a.enable_hmd_stereo;b.xh=a.xh;b.Ev=a.Ev;b.rC=a.rC;b.zC=a.zC;b.vC=a.vC;b.wC=a.wC;b.yC=a.yC;b.xC=a.xC;
b.qC=a.qC;b.Kp=a.Kp;b.Lp=a.Lp;b.Mp=a.Mp;return b};a.RY=function(){var a=c(10);a.H=g.ad(g.Ei);return a};a.bd=function(a){var b=c(11);b.wb=!1;b.Db=!1;b.rd=!1;b.mc=!0;b.H=g.ad(g.Ac);b.Sv=a;switch(a){case "NONE":b.Lb[0]=1;b.Lb[1]=1;break;case "GRAYSCALE":b.Lb[0]=1;b.Lb[1]=1;break;case "X_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_BLUR":b.Lb[0]=0;b.Lb[1]=1;break;case "X_GLOW_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_GLOW_BLUR":b.Lb[0]=0;b.Lb[1]=1;break;case "X_BLOOM_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_BLOOM_BLUR":b.Lb[0]=
0;b.Lb[1]=1;break;case "X_DOF_BLUR":b.Lb[0]=1;b.Lb[1]=1;break;case "Y_DOF_BLUR":b.Lb[0]=1;b.Lb[1]=1;break;case "X_ALPHA_BLUR":b.Lb[0]=1;b.Lb[1]=0;b.uf=3;break;case "Y_ALPHA_BLUR":b.Lb[0]=0;b.Lb[1]=1;b.uf=3;break;case "X_EXTEND":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_EXTEND":b.Lb[0]=0;b.Lb[1]=1;break;default:m.K("Wrong postprocessing effect: "+a)}return b};a.PY=function(a,b){var e=c(13);e.wb=!1;e.Db=!1;e.rd=!1;e.small_glow_mask_coeff=b.Uj.small_glow_mask_coeff;e.large_glow_mask_coeff=b.Uj.large_glow_mask_coeff;
e.small_glow_mask_width=b.Uj.small_glow_mask_width;e.large_glow_mask_width=b.Uj.large_glow_mask_width;e.H=a;e.mc=!0;return e};a.yo=function(a,b,g,k,z,C,t,u,J){var e=c(a);0==a?(e.wb=!0,e.Db=g,e.Bb=!1):1==a?(e.wb=!1,e.Db=!1,e.Bb=!0):2==a?(e.wb=!1,e.Db=!0,e.Bb=!0):3==a||4==a?(e.wb=!0,e.Db=!0,e.Bb=!1):5==a||6==a?(e.wb=!1,e.Db=!1,e.Bb=!0):7==a?(e.wb=!0,e.Db=!1,e.Bb=!0):m.K("wrong main subscene type");e.Bb&&u&&(e.self_shadow_normal_offset=u.self_shadow_normal_offset);e.H=b;if(a=t.Ep)e.rs.set([a.tL,a.KO,
a.wT,a.vT]),e.ps.set(a.color),e.qs=a.Qa;e.re.set(t.re);e.De.set(t.De);e.ih=t.ih;e.pe=C.pe;e.tg=C.tg;k&&(k.pe&&e.pj.set(k.pe),e.wk=k.wk,k.fh&&J&&(e.fh=!0,e.Pk=k.lX,e.Ok=k.kX,e.ry.set(k.mX)));p(e,z);return e};a.Au=function(){var a=c(14);a.mc=!0;a.H=g.ad(g.Ac);return a};a.BM=function(a,b,g){var e=c(15);b&&(e.type=16,e.wb=!1,e.Db=!0);e.enqueue=!1;e.H=a;p(e,g);return e};a.NY=function(a){var b=c(17);b.lc=!1;b.wb=!1;b.Db=!1;b.H=a;return b};a.IY=function(a){var b=c(18);b.wb=!0;b.Db=!1;b.H=a;return b};a.aZ=
function(a,b){var e=c(9);e.H=a;p(e,b);return e};a.OY=function(a){var b=c(19);b.wb=!1;b.Db=!1;b.H=a;b.mc=!0;return b};a.cZ=function(a,b,g){var e=c(20);e.wb=!1;e.Db=!1;e.rd=!1;e.H=a;e.pe=b.pe;e.pj.set(b.pe);e.As=g.radius_increase;e.ys=g.G0;e.zs=g.influence;e.xs=g.dist_factor;e.Gp=g.v3;e.mc=!0;return e};a.dZ=function(a,b){var e=c(21);e.wb=!1;e.Db=!1;e.rd=!1;e.H=a;e.us=b.RW;e.ws=b.blur_discard_value;e.mc=!0;return e};a.HY=function(a){var b=c(22);b.wb=!1;b.Db=!1;b.rd=!1;b.uf=1/a.bs;b.Cz=a.JK;b.H=g.ad(g.Ac);
b.mc=!0;return b};a.jF=function(a,b){var e=c(a);e.wb=23==a||24==a?!0:!1;e.Db=!1;e.rd=!1;e.uf=1/b.bs;e.H=g.ad(g.Ac);23==a&&(e.h1=new Float32Array(4));e.mc=!0;return e};a.MY=function(a,b,k,m){var e=c(27);e.wb=!1;e.Db=!1;e.rd=!1;e.H=g.ad(g.Ac);e.brightness=a;e.contrast=b;e.exposure=k;e.saturation=m;e.mc=!0;return e};a.VY=function(a,b){var e=c(28);e.wb=!1;e.Db=!1;e.rd=!1;e.H=g.ad(g.Ac);e.St=!0;e.mb_decay_threshold=a;e.mb_factor=b;e.mc=!0;return e};a.gF=function(a,b){var e=c(29);e.wb=!1;e.Db=!1;e.rd=!1;
e.H=a;e.uf=e.H.dof_power;e.yy=b;e.mc=!0;return e};a.CM=function(a){var b=c(30);b.wb=!1;b.Db=!1;b.rd=!1;b.H=a;b.uf=b.H.dof_power;b.mc=!0;return b};a.XY=function(a,b){var e=c(31);e.rd=!1;e.H=a;p(e,b);return e};a.WY=function(a){var b=c(32);C.outlining_overview_mode?b.dj.set(C.dj):b.dj.set(a.dj);b.sp=a.sp;b.Pu=5;b.$t=3;b.rd=!1;b.H=g.ad(g.Ac);b.mc=!0;return b};a.iF=function(a,b,g,k,m,z,C){var e=c(33);e.wb=!1;e.Db=!1;e.rd=!1;e.re=new Float32Array([1,1,1]);e.De=new Float32Array([1,1,1]);e.ih=1;e.tB=k;e.oj=
b;e.as=m;e.Wm=g;e.sn=C;e.H=a;p(e,z);return e};a.QY=function(a,b){var e=c(34);e.wb=!1;e.Db=!1;e.rd=!1;e.H=g.ad(g.Ac);e.god_rays_intensity=a;p(e,b);e.mc=!0;return e};a.bZ=function(a,b,k,q){var e=c(35);e.enqueue=!1;e.wb=!1;e.Db=!1;e.rd=!1;var h=g.ad(g.Ac);h.width=q;h.height=q;e.H=h;e.Oh=m.MF();p(e,b);e.re=new Float32Array([1,1,1]);e.De=new Float32Array([1,1,1]);e.ih=1;e.pn.set(k.pn);e.procedural_skydome=k.procedural_skydome;e.use_as_environment_lighting=k.use_as_environment_lighting;e.rayleigh_brightness=
k.rayleigh_brightness;e.mie_brightness=k.mie_brightness;e.spot_brightness=k.spot_brightness;e.scatter_strength=k.scatter_strength;e.rayleigh_strength=k.rayleigh_strength;e.mie_strength=k.mie_strength;e.rayleigh_collection_power=k.rayleigh_collection_power;e.mie_collection_power=k.mie_collection_power;e.mie_distribution=k.mie_distribution;if(a){e.re.set(a.re);e.De.set(a.De);e.ih=a.ih;if(b=a.Ep)e.rs.set([b.tL,b.KO,b.wT,b.vT]),e.ps.set(b.color),e.qs=b.Qa,e.rC=b.invert,e.zC=b.aT,e.vC=b.WS,e.wC=b.XS,e.yC=
b.ZS,e.xC=b.YS,e.qC=b.uL;e.Kp=a.Kp;e.Lp=a.Lp;e.Mp=a.Mp;e.sC=a.Qe}return e};a.SY=function(a,b){var e=c(46);e.enqueue=!1;e.wb=!1;e.Db=!1;e.rd=!1;var h=g.ad(g.Ac);h.width=b;h.height=b;e.H=h;e.Oh=m.MF();p(e,a);return e};a.ZY=function(a){var b=c(47);b.enqueue=!1;b.wb=!1;b.Db=!1;b.rd=!1;var h=g.ad(g.Ac);h.width=128;h.height=128;b.H=h;b.Oh=m.MF();p(b,a);return b};a.LY=function(){var a=c(48);a.enqueue=!1;a.wb=!1;a.Db=!1;a.rd=!1;var b=g.ad(g.Ac);b.width=512;b.height=512;a.H=b;return a};a.hF=function(){var a=
c(36);a.wb=!1;a.Db=!1;a.H=g.ad(g.Ac);a.mc=!0;return a};a.eZ=function(a,b){var e=c(37);e.wb=!1;e.Db=!1;e.Hb=a?"HMD":b?"ANAGLYPH":"SIDEBYSIDE";e.H=g.ad(g.Ac);e.mc=!0;return e};a.TY=function(){var a=c(38);a.wb=!1;a.Db=!1;a.H=g.ad(g.Ac);a.mc=!0;return a};a.JY=function(){var a=c(39);a.wb=!1;a.Db=!1;a.H=g.ad(g.Ac);a.mc=!0;return a};a.zY=function(){var a=c(45);a.wb=!1;a.Db=!1;a.H=g.ad(g.Ac);a.mc=!0;return a};a.UY=function(a,b,g,k){var e=c(40);e.wb=!1;e.Db=!1;e.Iq=a;e.Hq=b;e.H=k;p(e,g);e.mc=!0;return e};
a.KY=function(a){var b=c(41);b.wb=!1;b.Db=!1;b.H=g.ad(g.Ac);b.Fq=a;b.jy=5;b.mc=!0;return b};a.l$=function(a){var b=c(42);b.wb=!1;b.Db=!1;b.H=a;b.mc=!0;return b};a.DM=function(){var a=c(43);a.enqueue=!1;return a};a.YY=function(){var a=c(44);a.mc=!0;return a};a.QC=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";
case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.Sv.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";
case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";
case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};a.pd=function(a,b){for(var c=b.Ha,e=c.Gb,g=c.gg,k=0;k<a.kb.length;k++){var h=a.kb[k].Ua,m=h.indexOf(b);if(-1!=m&&(h.splice(m,1),!h.length)){a.kb.splice(k,1);break}}k=a.Bb?c.Rd:0;a:{h=a.kb;for(m=0;m<h.length;m++){var p=h[m];if(p.Gb==e&&p.gg==g&&p.Rd==k&&p.ol==c.ol){h=p;break a}}h=null}h?h.Ua.push(b):(a.kb.push({Gb:e,Ua:[b],
gg:g,Rd:k,ol:c.ol,lc:!0,Nn:Infinity}),a.Ev=!0)};a.Yj=function(a,b,c){b={lc:!0,zF:[!0,!0,!0,!0,!0,!0],sh:b,Ha:a,Zw:c||null,tA:null,Nn:Infinity};a.cg&&a.Pa.kf&&(c=a.Pa.kf,b.tA={X1:new Float32Array(c.length),Y1:new Float32Array(c.length),yZ:new Float32Array(c.length/3),xT:new Float32Array(3),KW:z.bX(a.Cb.Ef)});return b};a.C4=function(a){a.kb.sort(k);a.Ev=!1}};b4w.module.__textures=function(a,t){function p(){ia||(ia=Q.createFramebuffer());return ia}function c(){za||(za=Q.createTexture());return za}function b(){return{type:0,source:"",tw:"",width:0,height:0,tu:1,anisotropic_filtering:0,Ol:1024,Cm:!1,Lh:null,zb:0,Jb:null,bg:null,Qm:!1,dt:-1,sb:null,Sw:"",Xm:0,Ri:0,Ia:0,tc:0,Fm:0,ji:!1,jj:1,Zf:!1,QP:0,ie:null,jw:0,iw:0,Jl:-1,lw:!1,ln:-1,Tw:!1,jJ:!1,Yl:!1,Hn:!1,repeat:!0,To:"",nr:"",Uo:"",tG:"",sG:"",Km:""}}function k(a,b,c){a.Uo=b.uuid;a.nr=b.filepath;a.tG=
b.source;a.sG=b.name;a.To=ca.Bl(c+b.filepath);a.Km=b.Hh;-1==F.wa.indexOf(a)&&(F.wa.push(a),F.Er.push(!1))}function g(a,b,c){var d=-1<b.indexOf(".pvr");a.Km=-1<b.indexOf(".dds")?"dds":d?"pvr":"";a.nr=b;a.To=c;a.Uo=ca.Ez();F.wa.push(a);F.Er.push(!0)}function M(c,d,e){var f=b();f.type=c;f.source="NONE";f.Zf=e;if(c==a.Mx||c==a.Kx||c==a.Nx||c==a.Lx)f.bg=Q.createRenderbuffer();else{var g=Q.TEXTURE_2D,l=Q.createTexture();Q.bindTexture(g,l);Q.texParameteri(g,Q.TEXTURE_MAG_FILTER,Q.LINEAR);e?Q.texParameteri(g,
Q.TEXTURE_MIN_FILTER,va[na.Sl]):Q.texParameteri(g,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(g,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(g,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);e=u(f);var k=J(f),h=D(f);Q.texImage2D(g,0,k,1,1,0,e,h,c==a.Xn?null:new Uint8Array([204,204,204,255]));na.ru&&d&&Q.texParameterf(g,Q.TEXTURE_COMPARE_MODE,Q.COMPARE_REF_TO_TEXTURE);Q.bindTexture(g,null);f.zb=g;f.Jb=l}return f}function m(a){var b=a.zb;Q.bindTexture(b,a.Jb);var c=u(a),d=J(a),e=D(a),f=a.Lh.canvas;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,
!0);Q.texImage2D(b,0,d,c,e,f);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1);a.Cm&&Q.generateMipmap(b);Q.bindTexture(b,null);a.width=f.width;a.height=f.height}function z(a){var b=a.zb;Q.bindTexture(b,a.Jb);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);4!=a.sb.length?a.ji?e(a,a.sb,a.width*a.jj,a.height*a.jj,!1):Q.texImage2D(b,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,a.sb):Q.texImage2D(b,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,a.sb);Q.bindTexture(b,null)}function C(a){var b=a.zb;Q.bindTexture(b,a.Jb);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,
!0);a.ji?e(a,a.ie[a.Jl],a.width*a.jj,a.height*a.jj,!1):Q.texImage2D(b,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,a.ie[a.Jl]);Q.bindTexture(b,null)}function h(){ba||(ba=document.createElement("canvas"));return ba}function e(a,b,d,e,f){f||(q(Q.TEXTURE_2D),Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,b));Q.bindTexture(Q.TEXTURE_2D,null);b=p();f=c();ea.DZ(a,d,e,b,f)}function A(a,b,c){for(var d=0;6>d;d++){var e=Ua[d],f=Ba[d],g=h();g.width=c;g.height=c;var l=g.getContext("2d");l.translate(c/2,c/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==
e?(l.rotate(Math.PI/2),l.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==e?(l.rotate(Math.PI/2),l.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==e||"TEXTURE_CUBE_MAP_POSITIVE_Z"==e?l.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=e&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=e||l.scale(-1,1);l.drawImage(a,f[0]*b,f[1]*b,b,b,-c/2,-c/2,c,c);na.MM?Q.texImage2D(Q[e],0,Q.RGBA,c,c,0,Q.RGBA,Q.UNSIGNED_BYTE,new Uint8Array(l.getImageData(0,0,c,c).data.buffer)):Q.texImage2D(Q[e],0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,g)}}function q(a){Q.bindTexture(a,
null);var b=c();Q.bindTexture(a,b);Q.texParameteri(a,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(a,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);Q.texParameteri(a,Q.TEXTURE_MAG_FILTER,Q.LINEAR);Q.texParameteri(a,Q.TEXTURE_MIN_FILTER,Q.LINEAR)}function P(a,b,d){var f=a.source,g=a.Jb,l=a.zb,k=a.Km,r=a.nr,n;Q.bindTexture(l,g);a.repeat?(Q.texParameteri(l,Q.TEXTURE_WRAP_S,Q.REPEAT),Q.texParameteri(l,Q.TEXTURE_WRAP_T,Q.REPEAT)):(Q.texParameteri(l,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(l,Q.TEXTURE_WRAP_T,
Q.CLAMP_TO_EDGE));a.Qm||"NODE_TEX"==f?Q.texParameteri(l,Q.TEXTURE_MIN_FILTER,Q.LINEAR):Q.texParameteri(l,Q.TEXTURE_MIN_FILTER,va[na.Sl]);a.anisotropic_filtering&&Q.texParameterf(l,ma.QF().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(n=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==f)if(n)Q.texImage2D(l,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(k){n=pa.yO(b,k);d=ca.ju(n.width)||ca.ju(n.height);if(n.width>X.nc||n.height>X.nc){aa.error('Image "'+
r+'" has unsupported size: '+n.width+"x"+n.height+". Max available: "+X.nc+"x"+X.nc+".");return}f=n.width;n=n.height;if(d||"pvr"==k)a.ji=!0,q(l),f=I(f*a.jj),n=I(n*a.jj);"dds"==k?pa.c6(Q,ma.hO(),b,!0):"pvr"==k&&pa.d6(Q,ma.eO(),b);a.ji&&(e(a,null,f,n,!0),Q.bindTexture(l,g),Q.generateMipmap(l));a.width=f;a.height=n;a.tu=pa.N_(b,k)}else{Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);a.Qm?na.kw?(f=b[0].width,n=b[0].height):(f=b.videoWidth,n=b.videoHeight):(f=b.width,n=b.height);a.width=f;a.height=n;if(f>X.nc||
n>X.nc)aa.warn('Image "'+r+'" has unsupported size: '+f+"x"+n+". Max available: "+X.nc+"x"+X.nc+". Reduced image size will be used."),a.jj=Math.min(X.nc/f,X.nc/n),a.ji=!0;a.Qm&&(d in ya||(ya[d]={}),ya[d][a.Sw]=a,na.kw?(a.ie=b,a.jw=b.length,a.Ri=a.iw*a.Xm/b.length,b=b[0]):(a.sb=b,a.sb.loop=a.Yl,a.Ri=b.duration?a.Xm/b.duration:ka.ee(),fa.VM||(b.playbackRate=ka.ee()/a.Ri,fa.WL&&2<b.playbackRate&&(b.playbackRate=2)),O(a)));f=I(a.width*a.jj);n=I(a.height*a.jj);a.ji||na.OQ?(r=h(),k=r.getContext("2d"),r.width=
f,r.height=n,k.drawImage(b,0,0,a.width,a.height,0,0,f,n),na.MM?Q.texImage2D(l,0,Q.RGBA,f,n,0,Q.RGBA,Q.UNSIGNED_BYTE,new Uint8Array(k.getImageData(0,0,f,n).data.buffer)):Q.texImage2D(l,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,r)):na.Mb||!ca.ju(a.width)&&!ca.ju(a.height)?Q.texImage2D(l,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,b):(e(a,b,f,n,!1),a.ji=!0);a.width=f;a.height=n;a.Qm||(Q.bindTexture(l,g),Q.generateMipmap(l))}else if("ENVIRONMENT_MAP"==f)if(n){for(g=0;6>g;g++)Q.texImage2D(Q["TEXTURE_CUBE_MAP_"+Ua[g]],0,Q.RGBA,
1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){aa.error('Cubemap Image "'+r+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}g=b.width/3;g>X.ph?(aa.warn('Cubemap Image "'+r+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*X.ph+"x"+2*X.ph+". Reduced image size will be used."),r=I(X.ph/g*g),a.ji=!0):(r=I(g),!na.Mb&&(3*r>X.nc||
2*r>X.nc)&&(a.ji=!0));if(a.ji||na.ew)A(b,g,r);else{k=b;f=r;q(Q.TEXTURE_2D);Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,k);Q.bindTexture(Q.TEXTURE_2D,null);for(k=0;6>k;k++)Q.texImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,Q.RGBA,f,f,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(a.zb,null);k=p();Q.bindFramebuffer(Q.FRAMEBUFFER,k);n=c();for(k=0;6>k;k++)ea.CZ(a,Q[Ua[k]],f,g,n,k);Q.bindFramebuffer(Q.FRAMEBUFFER,null);Q.bindTexture(a.zb,a.Jb);Q.texParameteri(a.zb,Q.TEXTURE_MIN_FILTER,va[na.Sl]);
Q.texParameteri(a.zb,Q.TEXTURE_MAG_FILTER,Q.LINEAR)}ja.yX()&&(aa.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),A(b,g,qa.fK));a.width=3*r;a.height=2*r;Q.generateMipmap(l)}else"NODE_TEX"==f&&(Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1),Q.texImage2D(l,0,Q.RGBA,b.width,b.height,0,Q.RGBA,Q.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);Q.bindTexture(l,null)}function O(a){a.sb.oncanplay=function(){U(a)&&z(a)}}function I(a){return ca.ju(a)?ca.pa(Math.pow(2,(a|
0).toString(2).length),2,X.nc):a}function u(b){var c;switch(b.type){case a.Di:c=Q.RGBA;break;case a.Ox:c=Q.RGB;break;case a.Jt:c=Q.RGBA;break;case a.Kt:c=Q.RGB;break;case a.Xn:c=Q.DEPTH_COMPONENT;break;default:ca.K("Wrong texture type")}return c}function J(b){var c;switch(b.type){case a.Di:c=na.Mb?Q.RGBA8:Q.RGBA;break;case a.Ox:c=na.Mb?Q.RGB8:Q.RGB;break;case a.Jt:c=na.Mb?Q.RGBA8:Q.RGBA;break;case a.Kt:c=na.Mb?Q.RGB8:Q.RGB;break;case a.Xn:c=na.Mb?x(X.Vq):Q.DEPTH_COMPONENT;break;default:ca.K("Wrong texture type")}return c}
function x(a){switch(a){case 16:a=Q.DEPTH_COMPONENT16;break;case 24:a=Q.DEPTH_COMPONENT24;break;case 32:a=Q.DEPTH_COMPONENT32F;break;default:a=Q.DEPTH_COMPONENT24}return a}function D(b){var c;switch(b.type){case a.Di:c=Q.UNSIGNED_BYTE;break;case a.Ox:c=Q.UNSIGNED_BYTE;break;case a.Jt:c=Q.FLOAT;break;case a.Kt:c=Q.FLOAT;break;case a.Xn:c=Q.UNSIGNED_INT;break;default:ca.K("Wrong texture type")}return c}function l(a){a.sb?a.sb.play():a.ie&&(a.lw=!0);a.Tw=!1}function v(a){a.sb?a.sb.pause():a.ie&&(a.lw=
!1);a.Tw=!0}function N(a){a.sb?a.sb.currentTime=a.tc/a.Ri:a.ie&&(a.Jl=L(a,a.tc),C(a))}function E(a){return a.sb?!a.sb.paused:a.ie?a.lw:!1}function U(a){return a.sb||a.ie?a.sb?2<=a.sb.readyState:!0:0}function L(a,b){return Math.round(b*a.jw/a.Xm)}function y(a,b){if(da.ea(a))return n(a,b);for(var c=a.Bv,d=0;d<c.length;d++){var e=n(c[d],b);if(e)return e}return null}function H(a,b,c){if(da.ea(a))f(a,b,c);else{a=a.Bv;for(var d=0;d<a.length;d++)f(a[d],b,c)}}function n(a,b){var c=a.T;if(c.length)for(var c=
c[0].da,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type||"SKY"==e.type)for(var f=0;f<e.wa.length;f++)if(e.jg[f]==b)return e.wa[f]}return null}function f(a,b,c){a=a.T;if(a.length){a=a[0].da;for(var d=0;d<a.length;d++){var e=a[d];if("MAIN"==e.type)for(var f=0;f<e.wa.length;f++)if(e.jg[f]==b){var g=e.wa[f];e.wa[f]=c;S(g)}}}}function W(a,b){var c=a.T;if(c.length)for(var c=c[0].da,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type)for(var f=0;f<e.wa.length;f++){var g=e.wa[f],l=e.jg[f];-1==b.indexOf(l)&&
"NODE_TEX"!=g.source&&b.push(l)}}}function d(a,b,c){var d=a.elements;a=a.interpolation;for(var e=0;e<b;e++){var f=e/(b-1),g=G(d,f,!0),l=B(d,f,!0);if(g&&l)if("CONSTANT"==a)c.push.apply(c,g.color);else{var k=c,h=g,r=l;h==r?k.push.apply(k,h.color):(k.push(Z.MA(r.color[0],r.position,h.color[0],h.position,f)),k.push(Z.MA(r.color[1],r.position,h.color[1],h.position,f)),k.push(Z.MA(r.color[2],r.position,h.color[2],h.position,f)),k.push(Z.MA(r.color[3],r.position,h.color[3],h.position,f)))}l&&!g&&c.push.apply(c,
l.color);g&&!l&&c.push.apply(c,g.color)}}function G(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?b-a[e].position:b-a[e][1][0];0<=f&&(d?f<=(c?b-d.position:b-a[e][1][0])&&(d=a[e]):d=a[e])}return d}function B(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?a[e].position-b:a[e][1][0]-b;0<=f&&(d?f<=(c?d.position-b:d[1][0]-b)&&(d=a[e]):d=a[e])}return d}function S(a){var b;if(!(b=na.enable_texture_cache))a:{b=wa.Qj("ALL",wa.Vc);for(var c=0;c<b.length;c++){var d=b[c];if(r(d,a)){b=!0;break a}for(var d=
d.Bv,e=0;e<d.length;e++)if(r(d[e],a)){b=!0;break a}}b=!1}b||(a.Jb&&Q.deleteTexture(a.Jb),a=F.wa.indexOf(a),-1!=a&&(F.wa.splice(a,1),F.Er.splice(a,1)))}function r(a,b){for(var c=0;c<a.T.length;c++)for(var d=a.T[c].da,e=0;e<d.length;e++)for(var f=d[e].wa,g=0;g<f.length;g++)if(f[g]==b)return!0}function ha(a,b){for(var c=0;c<F.wa.length;c++){var d=F.wa[c];if(d.To==a&&d.type==b.type&&d.source==b.source&&d.repeat==b.repeat&&d.anisotropic_filtering==b.anisotropic_filtering&&d.Hn==b.Hn)return d}return null}
var qa=t("__compat"),K=t("__config"),pa=t("__texcomp"),ja=t("__debug"),ma=t("__extensions"),aa=t("__print"),ka=t("__time"),ca=t("__util"),ea=t("__renderer"),wa=t("__objects"),da=t("__obj_util"),Z=t("__curve"),Ja=t("__vec3"),R=t("__scenes"),na=K.L,X=K.Ni,fa=K.ra,ba=null,za=null,ia=null;a.Cf=0;a.U=0;a.NV=0;a.LV=0;a.MV=0;a.Vn=0;a.Di=10;a.Ox=20;a.Jt=30;a.Kt=40;a.Xn=50;a.Mx=60;a.Kx=70;a.Nx=80;a.Lx=90;a.AJ=128;a.AT=128;a.jK=128;var F={wa:[],Er:[]},sa={},ya={},Q=null,va,Ua="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),
Ba=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.wh=function(b){va=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.Cf=b.NEAREST;a.U=b.LINEAR;a.NV=b.NEAREST_MIPMAP_NEAREST;a.LV=b.LINEAR_MIPMAP_NEAREST;a.MV=b.NEAREST_MIPMAP_LINEAR;a.Vn=b.LINEAR_MIPMAP_LINEAR;Q=b};a.Qaa=function(a,b){return b in sa&&a in sa[b]?sa[b][a].Lh:null};a.ifa=function(a,b){return b in sa&&a in sa[b]?(m(sa[b][a]),!0):!1};a.RK=k;a.xm=M;a.iY=function(c,d){var e=Q.createTexture(),f=Q.TEXTURE_CUBE_MAP;
Q.bindTexture(f,e);Q.texParameteri(f,Q.TEXTURE_MAG_FILTER,Q.LINEAR);d?Q.texParameteri(f,Q.TEXTURE_MIN_FILTER,va[na.Sl]):Q.texParameteri(f,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(f,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(f,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);for(var g=0;6>g;g++)Q.texImage2D(Q[Ua[g]],0,Q.RGBA,c,c,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(f,null);f=b();f.type=a.Di;f.source="NONE";f.width=3*c;f.height=2*c;f.tu=1;f.Zf=d;f.Jb=e;f.zb=Q.TEXTURE_CUBE_MAP;return f};a.XB=function(a,
b){var c=a.zb;Q.bindTexture(c,a.Jb);for(var d=0;6>d;d++)Q.texImage2D(Q[Ua[d]],0,Q.RGBA,b,b,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(c,null);a.width=3*b;a.height=2*b};a.hI=function(a,b,c){var d=a.zb;Q.bindTexture(d,a.Jb);b&&Q.texParameteri(d,Q.TEXTURE_MIN_FILTER,b);c&&Q.texParameteri(d,Q.TEXTURE_MAG_FILTER,c);Q.bindTexture(d,null)};a.resize=function(b,c,d){c=Math.max(c,1);d=Math.max(d,1);if(b.width!=c||b.height!=d){switch(b.type){case a.Mx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorage(Q.RENDERBUFFER,
Q.RGB565,c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Kx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorage(Q.RENDERBUFFER,x(X.Vq),c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Nx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorageMultisample(Q.RENDERBUFFER,na.oc,Q.RGBA8,c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Lx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorageMultisample(Q.RENDERBUFFER,na.oc,x(X.Vq),c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,
null);break;default:var e=b.zb;Q.bindTexture(e,b.Jb);var f=u(b),g=J(b),l=D(b);b.Zf&&(na.Mb||(d=Math.max(c,d),c=I(d),d=I(d)),b.QP=Math.round(Math.log(Math.max(c,d))/Math.log(2)+.5));Q.texImage2D(e,0,g,c,d,0,f,l,null);Q.bindTexture(e,null)}c>X.nc||d>X.nc?ca.K('Slink texture "'+b.type+'" has unsupported size: '+c+"x"+d+". Max available: "+X.nc+"x"+X.nc+"."):(b.width=c,b.height=d)}};a.fZ=function(c,d,e,f,g){var l=c.type;if("BLEND"==l)return null;var h=c.image,r=b();r.type=a.Di;r.width=1;r.height=1;if(na.nE){var n=
c.b4w_anisotropic_filtering;"DEFAULT"===n&&(n=d);"OFF"!==n&&na.anisotropic_filtering&&(r.anisotropic_filtering=parseFloat(n.split("x")[0]))}if("REPEAT"!=c.extension||c.b4w_shore_dist_map)r.repeat=!1;if(h){"IMAGE"==l&&"MOVIE"==h.source&&(r.Qm=!0,r.Sw=c.name,r.Ia=c.frame_start,r.tc=c.frame_offset,r.Fm=c.frame_duration,r.jJ=c.use_auto_refresh,r.Yl=c.use_cyclic,r.Xm=c.movie_length,r.Hn=c.b4w_nla_video,0!=r.tc&&aa.warn('Frame offset for texture "'+c.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));
r.source=l;d=ca.Bl(g+h.filepath);if(d=ha(d,r))return d;k(r,h,g)}d=new Uint8Array([204,204,204,255]);switch(l){case "IMAGE":g=Q.createTexture();h=Q.TEXTURE_2D;Q.bindTexture(h,g);Q.texImage2D(h,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d);break;case "NONE":if("NONE"==c.b4w_source_type)return null;g=Q.createTexture();h=Q.TEXTURE_2D;r.source=c.b4w_source_type;if("SCENE"==r.source){if(!c.b4w_source_id)return null;f=ca.Od("name",c.b4w_source_id,e);if(!f)return null;r.tw=c.b4w_source_id;r.Ol=c.b4w_source_size;
f.Yg=f.Yg||[];f.Yg.push(r);Q.bindTexture(h,g);Q.texImage2D(h,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d)}else"CANVAS"==r.source&&(e=c.b4w_source_id,d=c.b4w_source_size,r.tw=e,r.Cm=c.b4w_enable_canvas_mipmapping,c=document.createElement("canvas"),c.width=d,c.height=d,r.Lh=c.getContext("2d"),f in sa||(sa[f]={}),sa[f][e]=r,Q.bindTexture(h,g));break;case "ENVIRONMENT_MAP":g=Q.createTexture();h=Q.TEXTURE_CUBE_MAP;Q.bindTexture(h,g);c="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");
for(f=0;6>f;f++)Q.texImage2D(Q["TEXTURE_CUBE_MAP_"+c[f]],0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d);break;default:return aa.error('texture "'+c.name+'" has unsupported type "'+l+'"'),null}r.Jb=g;r.zb=h;"NONE"==l?(r.Cm?Q.texParameteri(h,Q.TEXTURE_MIN_FILTER,va[na.Sl]):Q.texParameteri(h,Q.TEXTURE_MIN_FILTER,Q.LINEAR),r.anisotropic_filtering&&Q.texParameterf(h,ma.QF().TEXTURE_MAX_ANISOTROPY_EXT,r.anisotropic_filtering),"CANVAS"==r.source&&m(r)):(Q.generateMipmap(h),Q.bindTexture(h,null));return r};a.mfa=
m;a.RS=z;a.QS=C;a.Iw=P;a.CE=I;a.zr=function(a){return a&&(a.Jb||a.bg)?!0:!1};a.xr=function(a){return a&&a.bg?!0:!1};a.Fca=function(b){return b.type==a.Jt||b.type==a.Kt?!0:!1};a.q0=function(b){var c=0;switch(b.type){case a.Di:case a.Ox:c=4;break;case a.Jt:case a.Kt:c=16;break;case a.Xn:c=3;break;case a.Mx:case a.Kx:c=2;break;case a.Nx:c=4*na.oc;break;case a.Lx:c=3*na.oc}return c};a.Ja=function(){if(!na.kw)for(var a in ya)for(var b in ya[a])ya[a][b].sb.pause(),ya[a][b].sb.src="",ya[a][b].sb.load();
F.wa.length=0;F.Er.length=0;sa={};ya={}};a.pause=function(){for(var a in ya)for(var b in ya[a]){var c=ya[a][b];E(c)&&v(c)}};a.reset=function(){for(var a in ya)for(var b in ya[a])N(ya[a][b])};a.play=function(a){for(var b in ya)for(var c in ya[b]){var d=ya[b][c];a&&!d.Tw||l(d)}};a.Qba=function(a,b){return b in ya&&a in ya[b]?ya[b][a]:null};a.ufa=function(a){return a.Hn};a.oQ=l;a.xH=v;a.NQ=N;a.Q3=function(a,b,c){c in ya&&a in ya[c]&&(a=ya[c][a],a.sb?a.sb.currentTime=b/a.Ri:a.ie&&(a.Jl=b,C(a)))};a.nT=
E;a.oT=U;a.kT=function(a){return a.sb||a.ie?a.sb?Math.round(a.sb.currentTime*a.Ri):a.Jl:0};a.mT=function(a){return a.sb||a.ie?a.sb?a.tc:L(a,a.tc):0};a.p6=function(a){if(!a.sb&&!a.ie)return 0;var b=Math.min(a.Fm,a.Xm-a.tc);return a.sb?a.tc+b:L(a,a.tc+b)};a.SB=function(a,b){return Math.round(b*a.iw*(ka.ee()/a.Ri))};a.lT=function(a){return Math.min(a.Fm,a.Xm-a.tc)};a.o6=L;a.Raa=function(a,b){var c=y(a,b);return c&&"CANVAS"==c.source?c.Lh:null};a.p0=y;a.k4=H;a.Iba=function(a){var b=[];if(da.ea(a))W(a,
b);else{a=a.Bv;for(var c=0;c<a.length;c++)W(a[c],b)}return b};a.w4=function(a){for(var c={},d=0;d<a.length;d++){for(var e=a[d].wa,f=a[d].Ig,g=[],l=[],k=0;k<e.length;k++){var h=e[k],r=f[k];if("CANVAS"==h.source)if(r in c)h=c[r];else{var n=e[k],h=b();h.source="CANVAS";h.width=n.width;h.height=n.height;h.Cm=n.Cm;h.type=n.type;n=document.createElement("canvas");n.width=h.width;n.height=h.height;h.Lh=n.getContext("2d");h.zb=Q.TEXTURE_2D;h.Jb=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,h.Jb);h.Cm?Q.texParameteri(Q.TEXTURE_2D,
Q.TEXTURE_MIN_FILTER,va[na.Sl]):Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR);Q.bindTexture(Q.TEXTURE_2D,null);n=h;n.Lh.drawImage(e[k].Lh.canvas,0,0);m(n);c[r]=h}g.push(h);l.push(r)}a[d].wa=g}};a.WZ=function(a,b){for(var c=[],e=0;e<a.length;e++)d(a[e].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return ca.pa(255*a,0,255)}))};a.$W=d;a.$Z=function(a,b){for(var c=new Float32Array(3),d=new Float32Array(3),
e=[],f=0;f<a.length;f++){for(var g=a[f].data.value,l=[],k=g.curve_mapping.curves_data,h=g.curve_mapping.curve_extend,r=g.curve_mapping.curves_handle_types,g=0;g<k.length;g++){for(var n=h[g],m=k[g],x=[],F=r[g],q=0;q<m.length;q++)x.push([new Float32Array(3),new Float32Array(m[q].concat(0)),new Float32Array(3)]);Z.DE(x[0],null,x[1],F[0],F[0]);for(q=1;q<x.length-1;q++)Z.DE(x[q],x[q-1],x[q+1],F[q],F[q]);Z.DE(x[x.length-1],x[x.length-2],null,F[x.length-1],F[x.length-1]);if(2<x.length){if("AUTO"==F[0]){Ja.subtract(x[0][2],
x[0][1],c);q=Ja.length(c);Ja.copy(x[1][0],d);d[0]<x[0][1][0]&&(d[0]=x[0][1][0]);Ja.subtract(d,x[0][1],d);var v=Ja.length(d);1E-8<v&&(Ja.scale(d,q/v,d),Ja.add(x[0][1],d,x[0][2]),Ja.subtract(x[0][1],d,x[0][0]))}m=x.length-1;"AUTO"==F[0]&&(Ja.subtract(x[m][0],x[m][1],c),q=Ja.length(c),Ja.copy(x[m-1][2],d),d[0]>x[m][1][0]&&(d[0]=x[m][1][0]),Ja.subtract(d,x[m][1],d),v=Ja.length(d),1E-8<v&&(Ja.scale(d,q/v,d),Ja.add(x[m][1],d,x[m][0]),Ja.subtract(x[m][1],d,x[m][2])))}for(m=0;m<x.length-1;m++)Z.WX(x[m][1],
x[m][2],x[m+1][0],x[m+1][1]);m=[];3>=k.length?(q=Math.round(-b/2),F=Math.round(b/2)):(q=0,F=b);for(;q<F;q++){var v=q/(F-1),K=G(x,v,!1),u=B(x,v,!1);K&&u?m.push(Z.pL(v,K[1],K[2],u[0],u[1],.001)):u&&!K?"EXTRAPOLATED"==n?(v=u[1][0]==u[2][0]?u[1][1]:Z.wP(v,u[1],u[2]),m.push(v)):m.push(u[1][1]):K&&!u&&("EXTRAPOLATED"==n?(v=K[0][0]==K[1][0]?K[1][1]:Z.wP(v,K[0],K[1]),m.push(v)):m.push(K[1][1]))}l.push(m)}e.push(l)}c=[];for(q=0;q<e.length;q++)for(l=e[q],g=0;g<l[0].length;g++)3>=l.length?(d=ca.pa(127.5*(l[0][g]+
1),0,255),f=ca.pa(127.5*(l[1][g]+1),0,255),k=ca.pa(127.5*(l[2][g]+1),0,255),m=255):(d=ca.pa(255*l[0][g],0,255),f=ca.pa(255*l[1][g],0,255),k=ca.pa(255*l[2][g],0,255),m=ca.pa(255*l[3][g],0,255)),c.push(d,f,k,m);return new Uint8Array(c)};a.sM=function(b,c){var d=M(a.Di,!1);d.source="NODE_TEX";d.repeat=!1;P(d,{width:c,height:b.length/(4*c),data:b});return d};a.J9=function(a,c,d,e,f){var l=ca.Bl(f);if("WORLD"!=a.type){var k=ha(l,c);if(!k){k=b();k.type=c.type;k.anisotropic_filtering=c.anisotropic_filtering;
k.source=c.source;k.tw=c.tw;k.width=c.width;k.height=c.height;k.tu=c.tu;k.Ol=c.Ol;k.Cm=c.Cm;k.Lh=c.Lh;k.zb=c.zb;k.Jb=c.Jb;k.bg=c.bg;k.Qm=c.Qm;k.dt=c.dt;k.sb=c.sb;k.Sw=c.Sw;k.Xm=c.Xm;k.Ri=c.Ri;k.Ia=c.Ia;k.tc=c.tc;k.Fm=c.Fm;k.ji=c.ji;k.jj=c.jj;k.ie=c.ie;k.jw=c.jw;k.iw=c.iw;k.Jl=c.Jl;k.lw=c.lw;k.ln=c.ln;k.Tw=c.Tw;k.jJ=c.jJ;k.Yl=c.Yl;k.Hn=c.Hn;k.repeat=c.repeat;k.nr=c.nr;k.To=c.To;k.Uo=c.Uo;k.tG=c.tG;k.sG=c.sG;k.Km=c.Km;var h=k;Q.bindTexture(c.zb,c.Jb);var r=Q.getTexParameter(c.zb,Q.TEXTURE_MAG_FILTER),
n=Q.getTexParameter(c.zb,Q.TEXTURE_MIN_FILTER),m=Q.getTexParameter(c.zb,Q.TEXTURE_WRAP_S);c=Q.getTexParameter(c.zb,Q.TEXTURE_WRAP_T);h.Jb=Q.createTexture();Q.bindTexture(h.zb,h.Jb);Q.texParameteri(h.zb,Q.TEXTURE_MAG_FILTER,r);Q.texParameteri(h.zb,Q.TEXTURE_MIN_FILTER,n);Q.texParameteri(h.zb,Q.TEXTURE_WRAP_S,m);Q.texParameteri(h.zb,Q.TEXTURE_WRAP_T,c);Q.bindTexture(h.zb,null);g(k,f,l);P(k,e,0)}H(a,d,k)}else k=c,g(k,f,l),P(k,e,0),R.D5(a,k),R.kD(a)};a.$L=S;a.hf=function(a){return a.texture.J};a.o3=function(){Q=
null};a.WN=function(){return F.wa};a.K_=function(a){a=F.wa.indexOf(a);return-1==a?!1:F.Er[a]};a.F3=function(a){a=F.wa.indexOf(a);-1!=a&&(F.Er[a]=!0)}};b4w.module.__texcomp=function(a,t){function p(a,b,c,q){var e=new Int32Array(c,0,31),h,A,u,p,x,D;if(542327876!=e[0])return g.error("Invalid magic number in DDS header"),0;if(!e[20]&4)return g.error("Unsupported format, must contain a FourCC code"),0;h=e[21];switch(h){case m:A=8;u=b?b.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case z:A=16;u=b?b.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case C:A=16;u=b?b.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return g.error("Unsupported FourCC code:",k(h)),null}D=
1;e[2]&131072&&!1!==q&&(D=Math.max(1,e[7]));p=e[4];x=e[3];e=e[1]+4;if(b)for(h=0;h<D;++h)q=Math.max(4,p)/4*Math.max(4,x)/4*A,b=new Uint8Array(c,e,q),a.compressedTexImage2D(a.TEXTURE_2D,h,u,p,x,0,b),e+=q,p=Math.max(.5*p,1),x=Math.max(.5*x,1);else if(h==m){c=b=new Uint16Array(c);A=e/2;u=p;e=new Uint16Array(4);b=new Uint16Array(u*x);for(var l,v,N,E,t,L,y=u/4,H=x/4,n=0;n<H;n++)for(var f=0;f<y;f++)h=A+4*(n*y+f),e[0]=c[h],e[1]=c[h+1],l=e[0]&31,v=e[0]&2016,N=e[0]&63488,E=e[1]&31,t=e[1]&2016,L=e[1]&63488,
e[2]=5*l+3*E>>3|5*v+3*t>>3&2016|5*N+3*L>>3&63488,e[3]=5*E+3*l>>3|5*t+3*v>>3&2016|5*L+3*N>>3&63488,l=c[h+2],v=4*n*u+4*f,b[v]=e[l&3],b[v+1]=e[l>>2&3],b[v+2]=e[l>>4&3],b[v+3]=e[l>>6&3],v+=u,b[v]=e[l>>8&3],b[v+1]=e[l>>10&3],b[v+2]=e[l>>12&3],b[v+3]=e[l>>14],l=c[h+3],v+=u,b[v]=e[l&3],b[v+1]=e[l>>2&3],b[v+2]=e[l>>4&3],b[v+3]=e[l>>6&3],v+=u,b[v]=e[l>>8&3],b[v+1]=e[l>>10&3],b[v+2]=e[l>>12&3],b[v+3]=e[l>>14];a.texImage2D(a.TEXTURE_2D,0,a.RGB,p,x,0,a.RGB,a.UNSIGNED_SHORT_5_6_5,b);q&&a.generateMipmap(a.TEXTURE_2D)}else return g.error("No manual decoder for",
k(h),"and no native support"),0;return D}function c(a,b,c,g,k){var e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";e.onload=function(){if(200==e.status){a.bindTexture(a.TEXTURE_2D,g);var c=p(a,b,e.response,!0);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<c?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}k&&k(g)};e.send(null)}function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}
function k(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var g=t("__print"),M=t("__util"),m=b("DXT1"),z=b("DXT3"),C=b("DXT5");a.c6=p;a.d6=function(a,b,c){var e=new Uint32Array(c,0,13);if(55727696==e[0]){var g=e[7],k=e[6],h=e[11],m=52+e[12];switch(e[2]){case 0:var A=2,x=1;break;case 1:A=2;x=3;break;case 2:A=4;x=0;break;case 3:A=4;x=2;break;default:M.K("Unsupported PVR V3 format.")}}else if(559044176==e[11]){g=e[2];k=e[1];h=e[3];m=e[0];h++;var D=e[4]&255,e=0<e[10];25==D?(A=4,x=e?
2:0):24==D?(A=2,x=e?3:1):M.K("Unsupported PVR V2 format.")}else M.K("Unsupported PVR version.");D=2==A?8:4;e=4;switch(x){case 0:var l=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:l=b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:l=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:l=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=D*e*A/8;for(A=0;A<h;A++){var x=Math.max(g>>A,1),v=Math.max(k>>A,1),p=x/D,E=v/e;2>p&&(p=2);2>E&&(E=2);p=p*E*b;E=new Uint8Array(c,m,p);a.compressedTexImage2D(a.TEXTURE_2D,A,l,x,v,0,E);
m+=p}};a.yO=function(a,b){switch(b){case "dds":var c=new Int32Array(a,0,31);return{width:c[4],height:c[3]};case "pvr":c=new Uint32Array(a,0,13);if(55727696==c[0])var e=c[7],c=c[6];else e=c[2],c=c[1];return{width:e,height:c}}};a.N_=function(a,b){var c=1;if("dds"==b){var e=new Int32Array(a,0,31),h=e[21];switch(h){case m:c=6;break;case z:case C:c=4;break;default:g.error("Unsupported FourCC code:",k(h))}}else if("pvr"==b)if(e=new Uint32Array(a,0,13),55727696==e[0])switch(e[2]){case 0:c=12;break;case 1:c=
16;break;case 2:c=6;break;case 3:c=8}else h=e[4]&255,e=0<e[10],25==h?c=e?8:6:24==h&&(c=e?16:12);return c};a.Tca=function(a,b,g,k){var e=a.createTexture();c(a,b,g,e,k);return e}};b4w.module.__time=function(a,t){function p(){return-1!==c.eo.zz?c.eo.zz:C}var c=t("__config"),b=0,k=0,g=[],M=0,m=0,z=[],C=-1,h=0;a.FR=function(a){b=a;k=performance.now();for(a=0;a<g.length;a++){var c=g[a];b>c.DF&&(g.splice(a,1),a--,c.callback())}for(a=0;a<z.length;a++){var c=z[a],e=1-(c.DF-b)/c.duration,e=Math.min(e,1);c.callback(c.from+e*(c.to-c.from));1==e&&(z.splice(a,1),a--)}};a.Ro=function(){return b};a.L3=function(a){h=a};a.Q_=function(){return h};a.bC=function(a,c){var e;M++;e=M;g.push({id:e,
callback:a,DF:b+(performance.now()-k+c)/1E3});return e};a.Mq=function(a){for(var b=0;b<g.length;b++)if(g[b].id==a){g.splice(b,1);break}};a.Sk=function(a){for(var b=z.length;b--;)if(z[b].id==a){z.splice(b,1);break}};a.Hi=function(a,c,g,k){g/=1E3;var e;m++;e=m;z.push({id:e,callback:k,from:a,to:c,DF:b+g,duration:g});k(a);return e};a.reset=function(){k=b=0;g.length=0;m=M=z.length=0};a.ee=p;a.S3=function(a){C=a};a.Lz=function(a){return a*p()}};b4w.module.__objects=function(a,t){function p(a){var b=a.T;a=a.A;for(var c=0;c<b.length;c++){var d=b[c].vb;d.J.outline&&a.fk&&ja.l3(d)}}function c(a){a.A.fk=0;a=sa.indexOf(a);-1!=a&&sa.splice(a,1)}function b(a){if(a.$q)for(var b=a.T,c=0;c<b.length;c++)ja.KS(b[c].vb,a)}function k(a,b){for(var c=a.T,d=b.T,e=0;e<c.length;e++){for(var f=!1,l=0;l<d.length;l++)if(c[e].vb==d[l].vb){f=!0;break}f||g(b,c[e].vb)&&S.Yx(b,c[e].vb)}}function g(a,b){return!b.IK&&"SPEAKER"==a.type||!b.TV&&"LAMP"==a.type?!1:!0}function M(a){var b=
a.b4w_do_not_batch,c=a.b4w_collision,d=a.b4w_vehicle,e=a.b4w_floating,f=a.b4w_character,g=r.A0(a),l=G.xL(a),k=0<a.data.b4w_shape_keys.length,h=a.b4w_dynamic_geometry,n=m(a);if(!(b=N.wL(a)||b||c||d||k||e||g||f||l||h))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(c=a.materials[b],c.ma.$j||c.Zj||C(c.se)){b=!0;break a}b=!1}return b||n}function m(a){var b=!1,c=a.constraints.length;if(c){for(var d=null,c=c-1;0<=c;c--){var e=a.constraints[c];if("LOCKED_TRACK"!=e.type||"REFLECTION PLANE"!=e.name){d=e;break}}if(!d||
!d.target)return!1;a=d.target;d=a.type;if(a.parent)return d=a.parent.type,"MESH"==d?b=b||M(a.parent):"EMPTY"==d?b=b||z(a.parent):b=!0,b;"MESH"==d?b=b||M(a):"EMPTY"==d?b=b||z(a):b=!0}return b}function z(a){var b=G.xL(a),c=a.b4w_do_not_batch,d=!!a.b4w_anchor,e=m(a);return N.wL(a)||b||c||d||e}function C(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var c=a[b];if("VECT_TRANSFORM"==c.type){var d=c.convert_from,e=c.convert_to,f=c.outputs[0];if(!(!f.is_linked||"WORLD"==d&&"CAMERA"==e||"CAMERA"==
d&&"WORLD"==e||"OBJECT"==d&&"OBJECT"==e))return!0}if("NORMAL_MAP"==c.type&&(d=c.space,f=c.outputs[0],f.is_linked&&("OBJECT"==d||"BLENDER_OBJECT"==d))||"TEX_COORD"==c.type&&c.outputs[3].is_linked||"OBJECT_INFO"==c.type&&(f=c.outputs[1],d=c.outputs[3],c.outputs[0].is_linked||f.is_linked||d.is_linked))return!0}return!1}function h(a){if(P(a,ba.ALL,!1,-1)){for(var b=1,c;;){c="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!P(a+c,ba.ALL,!1,-1))break;b++}qa.error('Object "'+a+'" already exists. Name was replaced by "'+
a+c+'".');return c}return""}function e(a,b,c){b=ba[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(f.A.Me==c||-1==c)for(var g=f.T,l=0;l<g.length;l++)g[l].vb==a&&d.push(f)}return d}function A(a,b){var c=ba[a]||[];if(-1==b)return c;for(var d=[],e=0;e<c.length;e++){var f=c[e];f.A.Me==b&&d.push(f)}return d}function q(a,b,c,d){for(var e=0;e<a.T.length;e++)for(var f=a.T[e].da,g=0;g<f.length;g++){var l=f[g];l.Pa&&(l.Pa.Mh=b);l.Mh=b;l.Gb&&(l.Gb.Mh=c);""!==l.Qe&&(l=B.Rz(l.Qe))&&(l.ZL=d)}}function P(a,
b,c,d,e){for(var f=null,g=0;g<b.length;g++){var l=b[g];if(!((c?l.Rf:l.name)!=a||l.A.Me!=d&&-1!=d||e&&l.Pm||(f=l,S.Rj(f))))break}return f}function O(a){ba.ALL.push(a);ba[a.type]||(ba[a.type]=[]);ba[a.type].push(a);var b=a.A.te;if(null!=b)for(var c=0;c<F.length;c++){var d=F[c];d.A.te==b&&d.$v.push(a)}}function I(a,b,c){if(!b.nl)return!0;a=a.Um;if(a.Lj!=a.Gf)if(a.Nw){var d=da.sign(a.Lj-a.Gf);a.Gf+=d*ca.Q_()/.4;a.Gf=da.pa(a.Gf,0,1)}else a.Gf=a.Lj;d="STATIC"==b.type?b.Av:Z.add(b.$e.V,b.UA,ya);c=Z.dist(d,
c);0==a.mr?(d=Math.max(b.nh-a.lr/2,0),b=b.mh+a.kr/2):-1==a.mr?(d=b.nh+a.lr/2,b=b.mh+a.kr/2):(d=Math.max(b.nh-a.lr/2,0),b=Math.max(b.mh-a.kr/2,0));a.mr=c<d?-1:c<b?0:1;a.Lj=c<d||c>b?0:1;a.xy=a.Lj?1:-1;Math.abs(c-a.BB)>X.lod_leap_smooth_threshold&&(0==a.Gf||1==a.Gf)&&(a.Gf=a.Lj);a.BB=c;return!!a.Lj||0!=a.Gf}function u(a,b){q(a,!0,!1,!0);for(var c=A("ALL",-1),d=0;d<c.length;d++){var e=c[d];e!=a&&q(e,!1,!1,!1)}ja.HQ(a,b);for(d=0;d<a.T.length;d++)for(e=a.T[d].da.length-1;0<=e;e--){var f=a.T[d].da[e];0!=
f.Dc.length&&-1==f.Dc.indexOf(b)||S.VQ(a.T[d],e)}ha.Aa(a)&&ha.Ap(a);for(d=0;d<c.length;d++)c[d]!=a&&q(c[d],!0,!0,!0);N.sZ(a,b);c=a.Yn.Oa;a.Yn.Oa=a;return c}function J(a,b){a.Yn.Oa=b;q(a,!0,!0,!0)}function x(a,b,c,d){var e=c.oh.Tr.indexOf(d);b=a.Ec[a.oh.Tr.indexOf(b)];c.Ec[e]=b;a=b.name;b.name=d;for(d=0;d<c.Ec.length;d++)c.oh.Yo[d]=d!=e;return a}function D(a,b,c,d){for(var e=0;e<c.Ec.length;e++)c.oh.Yo[e]=!1;a.Ec[a.oh.Tr.indexOf(b)].name=d}function l(a,b,c,d,e){for(var g=1;g<a.A.yh.length;g++)f.YK(a,
a.A.yh[g].name,a.A.yh[g].value);if(N.WO(a))for(g=0;g<a.Ba.length;g++){var l=a.Ba[g];if(l)switch(l.type){case N.QU:N.ZB(a,N.KN(a,g),g);break;case N.OU:if(l.Or)for(var k=l.Or.length-1;0<=k;k--)-1!=l.Or[k].Dc.indexOf(b)&&l.Or.splice(k,1)}}d&&E.HG(a,b,function(b){if(b.Ra){var c=b.Ra.name;if(d[c]){var e=b.Ra.Oq!=d[c].Oq;b.Ra=r.fM(d[c]);e&&r.N3(a,c,b.Ra.Oq)}}},"PARTICLES");e&&(g=E.Em(a,b))&&(g.jd.set(e.jd),g.rg=e.rg,g.Co=e.Co,g.ce.set(e.ce),g.Fg.set(e.Fg),g.ss=e.ss,g.rn.set(e.rn),g.Eg=e.Eg,g.ef=e.ef,g.Ze=
e.Ze,g.Gk=e.Gk,g.lp=e.lp,g.Pr=e.Pr,g.ri=e.ri,g.si=e.si,g.Lo.set(e.Lo),g.Ur=e.Ur,g.wi.set(e.wi),g.gs.set(e.gs),g.hs=e.hs,g.ks.set(e.ks),g.ls=e.ls,g.Qi=e.Qi,g.et=e.et,g.bj=e.bj.slice(),g.Re=e.Re.slice());E.HG(a,b,function(b){for(var d=0;d<b.jg.length;d++){var e=b.jg[d],f=b.wa[d];if("IMAGE"==f.source||"ENVIRONMENT"==f.source){var g=ka.p0(c,e);g&&f.To!=g.To&&ka.k4(a,e,g)}}})}function v(a,b){for(var c=a[b],d=b+1;d<a.length;d++)c+="%join%"+a[d];return c}var N=t("__animation"),E=t("__batch"),U=t("__boundings"),
L=t("__camera"),y=t("__config"),H=t("__constraints"),n=t("__container"),f=t("__geometry"),W=t("__lights"),d=t("__material"),G=t("__nla"),B=t("__nodemat"),S=t("__obj_util"),r=t("__particles"),ha=t("__physics"),qa=t("__print"),K=t("__primitives"),pa=t("__quat"),ja=t("__scenes"),ma=t("__subscene"),aa=t("__sfx"),ka=t("__textures"),ca=t("__time"),ea=t("__transform"),wa=t("__tsr"),da=t("__util"),Z=t("__vec3"),Ja=t("__armature"),R=t("__anchors"),na=t("__renderer"),X=y.L,fa=y.zd,ba={ALL:[]},za=0,ia=0,F=[],
sa=[],ya=new Float32Array(3),Q=new Float32Array(4);a.YD=0;a.XD=1;a.ke=2;a.Vc=-1;a.update=function(a){for(var b=0;b<sa.length;b++){var d=sa[b],e=d,f=a,g=0,l=e.hQ;0==l.$C&&(l.$C=f);f-=l.$C;if(l.MH&&f/l.uh>=l.MH)c(e);else{f%=l.uh;if(f<l.sH)switch(l=f/(l.sH/5),f=Math.floor(l),f){case 0:g=(l-f)/2;break;case 1:g=(l-f)/2+.5;break;case 2:g=1;break;case 3:g=1-(l-f)/2;break;case 4:g=.5-(l-f)/2}e.A.fk=g}d.A.fk&&p(d)}if(a=ba.ARMATURE)for(b=0;b<a.length;b++)d=a[b],d.jH&&(ea.W(d),d.jH=!1)};a.nI=function(a,b){a.A.fk=
b;p(a)};a.Dq=function(a,b,c,d){var e=a.hQ;e.$C=0;e.sH=b;e.uh=c;e.MH=d;-1==sa.indexOf(a)&&sa.push(a)};a.ku=c;a.wM=function(a,b){var c=S.zu(b?"%meta_world%"+a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==c.type)for(var d=0;d<a.data.materials.length;d++)c.Ec.push(a.data.materials[d]);for(d=0;d<a.le.length;d++)S.Yx(c,a.le[d]);a.Oa=c;if(b)c.dd=a.uuid,c.Pm=!1,c.Bo=a.zq,c.ea=a.Ek,c.A=S.Qq(c.type),c.Lw=a.b4w_use_default_animation,c.co=N.mE(a.b4w_anim_behavior);else{c.dd=
a.uuid;c.Pm=!1;c.Bo=a.zq;c.ea=a.Ek;c.mv=a.HK||!1;c.wg=a.b4w_vehicle;c.ml=a.b4w_character;c.ap=a.b4w_floating;c.Ps=a.b4w_collision;c.Tb=a.b4w_collision_id;c.Dy=a.b4w_correct_bounding_offset;d=a.game;c.Sd={Mv:d.physics_type,uk:d.use_ghost,bT:d.use_sleep,hi:d.mass,gT:d.velocity_min,fT:d.velocity_max,NM:d.damping,QQ:d.rotation_damping,D1:d.lock_location_x,E1:d.lock_location_y,F1:d.lock_location_z,G1:d.lock_rotation_x,H1:d.lock_rotation_y,I1:d.lock_rotation_z,Fj:d.collision_margin,Ej:d.collision_group,
Gj:d.collision_mask,kJ:d.use_collision_bounds,zy:d.collision_bounds_type,Kw:d.use_collision_compound};if(d=a.b4w_vehicle_settings)c.Kg={name:d.name,Cg:d.part,Z4:d.suspension_rest_length,LI:d.suspension_compression,NI:d.suspension_stiffness,MI:d.suspension_damping,tJ:d.wheel_friction,XH:d.roll_influence,WG:d.max_suspension_travel_cm,Su:d.force_max,cu:d.brake_max,Cs:d.steering_max,Fr:d.max_speed_angle,Gu:d.delta_tach_angle,vw:d.speed_ratio,ww:d.steering_ratio,lv:d.inverse_control,Go:d.floating_factor,
Rp:d.water_lin_damp,Sp:d.water_rot_damp,mS:d.synchronize_position};if(d=a.b4w_floating_settings)c.cr={name:d.name,Cg:d.part,Go:d.floating_factor,Rp:d.water_lin_damp,Sp:d.water_rot_damp,mS:d.synchronize_position};if(d=a.b4w_character_settings)c.JL={v6:d.walk_speed,t3:d.run_speed,S4:d.step_height,j1:d.jump_strength,y6:d.waterline};for(d=0;d<a.constraints.length;d++){var e=a.constraints[d];"RIGID_BODY_JOINT"==e.type&&c.AH.push({target:e.target.Oa,B2:e.pivot_type,C2:e.pivot_x,D2:e.pivot_y,E2:e.pivot_z,
ab:e.axis_x,eb:e.axis_y,fb:e.axis_z,i6:e.use_limit_x,j6:e.use_limit_y,k6:e.use_limit_z,e6:e.use_angular_limit_x,f6:e.use_angular_limit_y,g6:e.use_angular_limit_z,t1:e.limit_max_x,u1:e.limit_max_y,w1:e.limit_max_z,x1:e.limit_min_x,y1:e.limit_min_y,z1:e.limit_min_z,n1:e.limit_angle_max_x,o1:e.limit_angle_max_y,p1:e.limit_angle_max_z,q1:e.limit_angle_min_x,r1:e.limit_angle_min_y,s1:e.limit_angle_min_z})}d=c.A=S.Qq("MESH"===c.type?c.ea?"DYNAMIC":"STATIC":c.type);a.parent?(c.parent=a.parent.Oa,"BONE"==
a.parent_type&&"ARMATURE"==a.parent.type&&(c.Jv=a.parent_bone),a.pinverse_tsr&&(c.xB=wa.create(),wa.copy(a.pinverse_tsr,c.xB))):a.dg_parent&&(c.parent=a.dg_parent.Oa,c.fn=!0);var e=a.location,f=a.scale[0];da.IH(a.rotation_quaternion,Q);ea.je(c,e);ea.Ll(c,Q);ea.Ve(c,f);c.Lw=a.b4w_use_default_animation;c.co=N.mE(a.b4w_anim_behavior);a.b4w_object_tags&&(c.ZA={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});c.Sy=a.b4w_custom_prop;a.b4w_viewport_alignment&&
(c.yD={XV:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});d.ci=a.b4w_hidden_on_load;d.IO=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":Ja.Ms(a,c);e=d.eh;f=N.dX(e);a.b4w_animation_mixing?(d.ve=new Float32Array(f.Zb),d.sf=new Float32Array(f.Zb),d.Ce=new Float32Array(f.trans),d.wf=new Float32Array(f.trans)):(d.ve=f.Zb,d.sf=f.Zb,d.Ce=f.trans,d.wf=f.trans);for(var g in e){var l=e[g];1==l.ty.length&&Ja.w5(l,!0,f.trans,f.Zb)}d.Qv=f;d.ug=0;d.Ik=a.b4w_animation_mixing;
break;case "MESH":d.Lk=E.JW(a.data.b4w_boundings.bb);c.$O=a.data.is_boundings_overridden;d.cf=a.b4w_do_not_render;d.kn=fa.outlining_overview_mode||a.b4w_selectable;d.pB=a.b4w_selectable;d.zd=fa.outlining_overview_mode||a.b4w_outlining;d.oB=a.b4w_outlining;d.qB=fa.outlining_overview_mode||a.b4w_outline_on_select;d.Kh=a.b4w_billboard;d.Xt=a.b4w_pres_glob_orientation;d.Zt="BASIC";d.Yt="SPHERICAL"==a.b4w_billboard_geometry;g=d.ek;g.an=a.b4w_outline_settings.outline_duration;g.bn=a.b4w_outline_settings.outline_period;
g.cn=a.b4w_outline_settings.outline_relapses;d.kn&&(d.sm=da.rN(za),za++);for(g=0;g<a.data.b4w_vertex_anim.length;g++)e=a.data.b4w_vertex_anim[g],c.Fd.push({name:e.name,Ia:e.frame_start,ub:e.frame_end,C9:e.averaging,D9:e.averaging_interval,YV:e.allow_nla});c.A.Fd=c.Fd.length?!0:!1;"MESH"!=a.type&&da.K("Wrong object type: "+a.name);g=c.A;if(a.data.b4w_shape_keys.length)for(g.$f=!0,e=0;e<a.data.b4w_shape_keys.length;e++)f={},f.value=a.data.b4w_shape_keys[e].value,f.name=a.data.b4w_shape_keys[e].name,
g.yh.push(f);else g.$f=!1;d.Vf=a.b4w_shadow_cast;d.ze=a.b4w_shadow_receive;d.tf=a.b4w_shadow_cast_only&&d.Vf;d.Te=a.b4w_reflexible;d.xe=a.b4w_reflexible_only&&d.Te;d.we=a.b4w_reflective;d.hj=a.b4w_reflection_type;if(!d.we)for(g=c.Ec,e=0;e<g.length;e++)f=g[e],!f.Ch||-1==f.se.Rx.indexOf("BSDF_GLOSSY")&&-1==f.se.Rx.indexOf("BSDF_DIFFUSE")||(c.A.we=!0,c.A.hj="CUBE");d.fh=a.b4w_caustics;if(d.zf=a.b4w_wind_bending)d.Up=a.b4w_wind_bending_angle,g=E.sT(da.bf(a.b4w_wind_bending_angle),d.Lk,a.scale[0]),d.Og=
g,d.Pg=a.b4w_wind_bending_freq,d.qg=a.b4w_detail_bending_freq,d.pg=a.b4w_detail_bending_amp,d.kg=a.b4w_branch_bending_amp,d.vl=a.b4w_main_bend_stiffness_col,g=a.b4w_detail_bend_colors,d.If.LG=g.leaves_stiffness_col,d.If.KG=g.leaves_phase_col,d.If.tH=g.overall_stiffness_col;d.df=a.b4w_dynamic_geometry;if(d.df)for(c.Yn=a,g=0;g<c.Ec.length;g++)c.oh.Tr.push(c.Ec[g].name),c.oh.Yo.push(!1);g=c.Ec[0];d.Vh=g.Sd.Vh;d.Qh=g.Sd.Qh;d.nh=0;d.mh=S.$D;d.gk=a.pass_index;break;case "LINE":d.Ca=U.Hf();d.Kb=U.xu();d.Ki=
U.Hf();d.nm=U.xu();break;case "CAMERA":L.jX(a,c);L.zW(c);break;case "LAMP":W.k1(a,c);break;case "SPEAKER":c.ra=aa.AY();d=!1;for(g=0;g<c.T.length;g++)if(c.T[g].vb.od){d=!0;break}d&&aa.Ms(a,c);break;case "EMPTY":g=U.Hf(),d.Ca=g,g=U.Gy(),d.Bc=g,a.field&&(c.$q={type:a.field.type,gS:a.field.strength}),a.b4w_anchor&&(c.anchor={type:a.b4w_anchor.type,Wq:a.b4w_anchor.detect_visibility,Bm:a.b4w_anchor.element_id,V1:a.b4w_anchor.max_width})}}O(c);return c};a.N5=function(a,b){var c=b.A;if("MESH"==b.type){var d=
N.DN(a);if(d){var e=d.Oa,f=e.A.Qv,g=b.A,l=a.data;b.ay=e;l=l.vertex_groups;if(l.length){var e=e.A.eh,h=0,r={},n;for(n in e){var m=da.Od("name",n,l);m&&(r[n]={jT:m.index,zj:e[n].zj,rF:h++})}g.Aj=r;n=h;l=N.XN();g.$i=n;n>2*l?(g.Rm=!1,qa.error('too many bones for "'+a.name+'" / '+g.$i+" bones (max "+l+" with blending, "+2*l+" without blending). Skinning will be disabled.")):g.Rm=!0}f=N.ZZ(f.trans,f.Zb,c.Aj);d.b4w_animation_mixing?(c.ve=new Float32Array(f.Zb),c.sf=new Float32Array(f.Zb),c.Ce=new Float32Array(f.trans),
c.wf=new Float32Array(f.trans)):(c.ve=f.Zb,c.sf=f.Zb,c.Ce=f.trans,c.wf=f.trans);c.Qt=new Float32Array(4);c.Pt=pa.create();c.Qv=f;c.ug=0}if(c.we)if(c=b.A,"CUBE"==c.hj)c.Le=ia++;else if("PLANE"==c.hj){a:{d=a.constraints;for(f=0;f<d.length;f++)if(g=d[f],"LOCKED_TRACK"==g.type&&"REFLECTION PLANE"==g.name){if(g.target&&g.target.Oa){d=g.target.Oa;break a}qa.warn('Reflection plane target for object: "'+b.name+"\" is not present on the scene. Using object's Z-axis.")}d=null}d||(d=da.Gw("%reflection%"),d=
S.zu(d,"EMPTY"),f=S.Qq("EMPTY"),d.A=f,k(b,d),H.SK(d,b,[0,0,0],null,1),O(d));f=null;for(g=0;g<F.length;g++)if(F[g]==d){f=g;break}null==f&&(f=F.length,F.push(d));d.A.te=f;c.te=f;d.$v.push(b)}}};a.E5=b;a.i$=k;a.tX=g;a.O5=function(a){for(var b=0;b<a.length;b++){var c=a[b];!c.A||"DYNAMIC"!=c.A.type&&"CAMERA"!=c.A.type||ea.W(c);c.Lw&&N.k2(c)&&(N.WK(c),c.Ba.length&&N.play(c,null,N.Gt))}};a.yL=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Ek||a.parent&&a.parent.Ek)return!0;switch(a.type){case "MESH":return M(a);
case "EMPTY":return z(a);default:return!0}};a.Qo=function(a){return da.Y(a.ZA)};a.bv=function(a){return a.Sy};a.Ja=function(){ia=za=0;F.length=0;sa.length=0;ba={ALL:[]}};a.copy=function(a,b,c){var e=S.Rj(a),e=e?S.sN(e.name,b):b,g=h(e);b=S.zu(e+g,a.type,b+g);b.Pm=a.Pm;b.Yn=a.Yn;b.oh.Tr=S.vu(a.oh.Tr);b.oh.Yo=S.vu(a.oh.Yo);b.ea=a.ea;b.mv=a.mv;b.Lw=a.Lw;b.Bo=a.Bo;b.A=S.QE(a.A);b.A.nl=!1;b.ZA=S.wu(a.ZA);b.Sy=S.wu(a.Sy);k(a,b);b.Aq=S.vu(a.Aq);b.parent=S.vu(a.parent);b.fn=a.fn;b.Jv=a.Jv;b.Fd=S.vu(a.Fd);
b.co=a.co;!a.N||a.wg||a.ml||a.ap||(b.Ps=a.Ps,b.N=null);b.Tb=a.Tb;b.Dy=a.Dy;b.Sd=S.wu(a.Sd);e=[];for(g=0;g<a.T.length;g++){var l=b.T[g],r=a.T[g].da;if(c){for(var n=l.da,m=0;m<r.length;m++)if(!r[m].Uh){var x=S.wu(r[m]);x.Pa=f.MX(r[m].Pa);S.$g(b,l.vb,x);e.push(r[m].Pa)}for(m=0;m<r.length;m++)if(r[m].Uh){x=S.wu(r[m]);S.$g(b,l.vb,x);for(var F=0;F<e.length;F++)e[F]==r[m].Pa&&(x.Pa=n[F].Pa)}for(m=0;m<n.length;m++)n[m].Pa&&f.LS(n[m].Pa),X.lE&&n[m].Pa&&na.DW(n[m]),n[m].$m=E.B_(n[m],b.A,b.dd),E.r5(n[m]);ka.w4(n)}else for(m=
0;m<r.length;m++)S.$g(b,l.vb,r[m])}for(e=0;e<a.Ec.length;e++)b.Ec.push(d.NX(a.Ec[e]));S.bI(b,!1);O(b);b.A.AG=!0;b.A.xA=c;b.A.sm=da.rN(za);za++;return b};a.EN=function(a,b){var c=[],d=a.animation_data,e=a.data?a.data.animation_data:null;d&&d.action&&(d=d.action,(d.J.type==N.PU||d.J.type==N.LU&&"ARMATURE"==a.type||d.J.type==N.NU&&"LAMP"==a.type||d.J.type==N.MU&&b)&&c.push(N.RO(null,d)));e&&e.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&c.push(N.RO(null,e.action));"MESH"==a.type&&c.push.apply(c,N.I_(a));
b&&c.push.apply(c,N.J_(a));return c};a.gJ=function(a){for(var b=a.A,c=null,d=a.T[0].da,e=0;e<d.length;e++){var g=d[e],l=a.T[0].dh[e];if(g.Pa&&l.ig&&l.Ef){var k=f.Zz("a_position");if(k=f.hG(g.Pa.Uc,k)){var h=g.Pa.cd.a_position.offset,r=g.Pa.cd.a_position.length+h;E.I5(g,k.subarray(h,r));S.TS(g,b.D,l);"MAIN"==g.type&&(c?U.oz(c,g.Cb.Ef):c=U.wy(g.Cb.Ef))}}}c=c||U.Hf();if(b.Kh)S.OS(a,c);else{l=[];for(e=0;e<d.length;e++)if(g=d[e],"MAIN"==g.type&&(k=f.Zz("a_position"),k=f.hG(g.Pa.Uc,k)))g=d[e].Pa.cd,h=g.a_position.offset,
r=g.a_position.length+h,l.push(k.subarray(h,r));S.U5(a,c,l)}if(X.debug_view)for(e=0;e<d.length;e++)if("DEBUG_VIEW"===d[e].type&&d[e].Xk){a=b.Kb;b=K.NF(1,a.V);f.UQ(b,[a.ab[0],a.eb[1],a.fb[2]],a.V);f.OC(b,1,!0);b.Ea.a_polyindex=f.pz(b);E.q5(d[e],b);break}};a.xc=e;a.jO=function(a,b,c){b=ba[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(!(f.A.Me!=c&&-1!=c||f.Pm))for(var g=f.T,l=0;l<g.length;l++)g[l].vb==a&&d.push(f)}return d};a.Qj=A;a.Jz=function(a){var b=ba.MESH;if(b)for(var c=0;c<b.length;c++){var d=
b[c];if(ha.CO(d))for(var e=d.T,f=0;f<e.length;f++)if(e[f].vb==a)return d}return null};a.Sr=q;a.Vz=function(){var a=[],b=ba.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.kn&&!d.Pm&&a.push(d)}return a};a.aO=function(){var a=[],b=ba.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.zd&&!d.Pm&&a.push(d)}return a};a.ud=function(b,c,d,e){var f=null,g=ba.ALL;switch(b){case a.YD:f=P(c,g,!0,d,e);break;case a.XD:a:{for(b=0;b<g.length;b++)if(f=g[b],f.Rf==d&&(f.A.Me==e||-1==e)){var l=S.Rj(f);if(l&&
l.Rf==c)break a}f=null}break;case a.ke:a:{for(e=0;e<g.length;e++){b=g[e];for(var f=c.length-1,l=b,k=!0;0<=f&&k;)k=l&&l.Rf==c[f]&&(l.A.Me==d||-1==d),l&&(l=S.Rj(l)),f--;if(k&&!l){f=b;break a}}f=null}}return f};a.$z=function(a,b){return P("%meta_world%"+a,ba.WORLD,!0,b)};a.Wba=function(a){return a.Rf.replace("%meta_world%","")};a.vp=function(b,c){var d=ja.Ui();if(!d)return qa.error("No active scene"),null;var f=ja.dc(d,ma.Gh);f&&f.enable_hmd_stereo&&(f=n.Xh(),b=f.clientHeight/2,c=f.clientWidth/2);if(f=
R.y2(b,c))return f;f=ja.A2(d,b,c);if(!f)return null;for(var d=e(d,"MESH",-1),g=0;g<d.length;g++){var l=d[g].A,k=l.sm;if(k&&3>Math.abs(255*k[0]-f[0])&&3>Math.abs(255*k[1]-f[1])&&3>Math.abs(255*k[2]-f[2]))return l.zd&&l.qB&&(fa.outlining_overview_mode?a.Dq(d[g],fa.an,fa.bn,fa.cn):(f=l.ek,a.Dq(d[g],f.an,f.bn,f.cn))),d[g]}return null};a.IR=function(a,c){for(var d=e(a,"EMPTY",-1),f=0;f<d.length;f++){var g=d[f];if(g.$q&&"WIND"===g.$q.type){var l=g;break}}if(!l)return qa.error("There is no wind on the scene"),
0;"number"==typeof c.wind_dir&&(d=da.bf(c.wind_dir),Z.set(Math.sin(d),-Math.cos(d),0,ya),da.vF(ya,da.ic,Q),ea.Ll(l,Q));"number"==typeof c.wind_strength&&(l.$q.gS=c.wind_strength);b(l)};a.Ap=function(a){H.uX(a)&&H.remove(a);var b=ba.ALL,c=ba[a.type],d=b.indexOf(a);a=c.indexOf(a);-1!=d&&b.splice(d,1);-1!=a&&c.splice(a,1)};a.l2=O;a.jda=function(a){return ba[a.type]&&-1<ba[a.type].indexOf(a)};a.J5=function(a,b){if(a.A.nl){var c=a.A,d=b.J;if(c.nl)for(var e=ea.Ne(b.Dk,ya),f=0;f<a.T.length;f++)if(a.T[f].vb==
b)for(var g=0;g<a.T[f].da.length;g++){var l=a.T[f].da[g],k=l.Um,h="SHADOW"==l.type&&"RECEIVE"==l.Hb&&!X.fw;X.lod_smooth_transitions&&!h&&(h=d.J1,"ALL"==h||"NON-OPAQUE"==h&&(l.Bb||l.Fk))&&(k.Nw=!0);I(l,c,e);k.Gf=k.Lj;k.lr=Math.min(d.BP,.6*c.tl);k.kr=Math.min(d.BP,.6*c.ul)}}};a.K5=I;a.U3=function(a){var b=a.A,c=b.Og,d=b.Pg,e=b.qg,g=b.pg,l=b.kg;a=a.T;for(b=0;b<a.length;b++)for(var k=a[b].da,h=0;h<k.length;h++){var r=k[h].Pa,n=r.cd,m=n.au_wind_bending_amp,x=n.au_wind_bending_freq,F=n.au_detail_bending_amp,
q=n.au_detail_bending_freq,n=n.au_branch_bending_amp;if(x){var v=Array.apply(null,Array(x.length)).map(function(){return d});f.Hw(r,f.wq,new Float32Array(v),x.offset)}m&&(v=Array.apply(null,Array(m.length)).map(function(){return c}),f.Hw(r,f.wq,new Float32Array(v),m.offset));F&&(v=Array.apply(null,Array(F.length)).map(function(){return g}),f.Hw(r,f.wq,new Float32Array(v),F.offset));q&&(v=Array.apply(null,Array(q.length)).map(function(){return e}),f.Hw(r,f.wq,new Float32Array(v),q.offset));n&&(v=Array.apply(null,
Array(n.length)).map(function(){return l}),f.Hw(r,f.wq,new Float32Array(v),n.offset))}};a.M0=function(a,b,c,d){if(a.A.df&&c.A.df){var f=E.Em(a,b),g=null;E.HG(c,d,function(a){g||(g={});a.Ra&&(g[a.Ra.name]=a.Ra)},"PARTICLES");for(var k=u(c,d),h=x(a,b,c,d),r=ja.R(),n=0;n<c.T.length;n++){var m=c.T[n].vb;ja.es(m);var F=e(m,"LAMP",0),w=c.T[n].da;c.T[n].da=[];c.T[n].dh=[];E.wN(m,[c.Yn],F,[]);E.Iy(c,ja.Nz(m),m);ja.eL(m,[c]);ja.mm(m,c,!1,!0);for(F=0;F<w.length;F++)S.$g(c,m,w[F])}D(a,b,c,h);J(c,k);l(c,d,a,
g,f);ja.es(r)}};a.dF=function(a){a=a||"";a+=h(a);a=S.zu(a,"LINE");a.A=S.Qq("EMPTY");a.ea=!0;E.vN(ja.Ui(),[a]);ja.mm(ja.Ui(),a);O(a);return a};a.A_=function(a,b){var c=b.A,d=U.wy(c.Lk);c.Kh?S.OS(b,d):S.T5(b,d,a.data.b4w_boundings)};a.mI=function(a,b,c,d){for(var e=S.pl(a),f=0;f<a.T.length;f++)for(var g=a.T[f].da,l=0;l<g.length;l++){var k=g[l];if(e||-1!=k.Dc.indexOf(b))k.bj[c]=d}e&&ja.kD(a)};a.lI=function(a,b,c,d,e,f){for(var g=S.pl(a),l=0;l<a.T.length;l++)for(var k=a.T[l].da,h=0;h<k.length;h++){var r=
k[h];if(g||-1!=r.Dc.indexOf(b))r.Re[3*c]=d,r.Re[3*c+1]=e,r.Re[3*c+2]=f}g&&ja.kD(a)};a.$N=function(a,b){return a.bj[b]};a.ZN=function(a,b,c){c[0]=a.Re[3*b];c[1]=a.Re[3*b+1];c[2]=a.Re[3*b+2];return c};a.$F=function(a,b){for(var c=v(b,1),d=0;d<a.length;d+=3)if(a[d]==c)return 4*a[d+1]+a[d+2];return null};a.ZF=function(a,b,c){b=v(b,c);for(c=0;c<a.length;c+=2)if(a[c]==b)return a[c+1];return null}};b4w.module.__animation=function(a,t){function p(a,b){var c=a.Ba[b];c&&c.uz&&c.Ou&&(c.Ou=!1,c.uz(a,b))}function c(a,b,c){c=a.Ba[c];c.type=30;var d=b.Ia,e=b.ub-d+1;c.start=d;c.length=e;c.gh=d;c.Jk=b.name;for(e=d=0;e<a.Fd.length;e++){var f=a.Fd[e];if(f==b)break;else d+=f.ub-f.Ia+1}c.dT=d}function b(a,b){a.type=50;a.Jk=b.name;a.start=b.Ia;a.length=b.ub-a.start;b.be||(a.length+=b.wv)}function k(a,b){var c={type:null,Jk:null,iE:null,NK:0,LK:null,Rk:new Int8Array(8),Zb:null,trans:null,Mk:null,Nk:null,BI:[],
play:!1,behavior:20,gh:0,start:0,length:0,bJ:0,JH:0,Ou:!1,dT:null,speed:1,volume:null,pitch:null,color:null,al:null,De:null,re:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Ho:null,ZP:[],mi:[],YP:[],li:[],Or:null};if(!a.Ba.length)for(var d=0;8>d;d++)a.Ba.push(null);a.Ba[b]=c}function g(a){return a.replace(/_B4W_BAKED$/,"")}function M(a,b){return{op:a,action:b}}function m(a,b,c){if(a.animation_data){var d=a.animation_data.action;d&&60==d.J.type&&b.push(M(c,d))}a=a.nodes;for(d=
0;d<a.length;d++){var e=a[d];if(e.node_group){var f=e.node_group.node_tree;if(f){var g=c.slice();g.push(e.name);m(f,b,g)}}}}function z(a){return aa.mf(a)&&a.A.Fd?!0:!1}function C(a,b,c){var d=a.Ba;if(-1==c)for(c=0;8>c;c++){var f=d[c];f&&(f.gh=b,e(a,0,c,!0))}else if(f=d[c])f.gh=b,e(a,0,c,!0)}function h(a,b,c){if(-1==b)for(b=0;8>b;b++){var d=a[b];d&&c(d)}else(d=a[b])&&c(d)}function e(a,b,c,d){x(a,b,c,d);p(a,c);a.A.Ik&&(E(a,b),l(a,b))}function A(a,b,c,d){var e=c.frame_range;if(e[0]>e[1])return ea.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"'),!1;var f=c.J,g=a.Ba[d];g.Jk=c.name;g.iE=e;g.NK=f.lQ;g.LK=f.qL;g.Rk.set(f.Rk);g.start=e[0];g.length=e[1]-e[0];g.gh=e[0];switch(f.type){case 10:if(aa.rr(a)){g.type=10;var l=q(a,b,c);l||(l=U(c,a.A.eh),P(a,b,c,l));g.trans=l.trans;g.Zb=l.Zb;g.Mk=l.Mk;g.Nk=l.Nk;O(a,d,c,l)}break;case 40:aa.Sm(a)&&(g.volume=f.nb.volume||null,g.pitch=f.nb.pitch||null,g.type=40);break;case 70:aa.ur(a)&&(g.color=f.nb.color||null,g.al=f.nb.energy||null,g.type=70);break;case 60:if("MESH"==
a.type||"WORLD"==a.type){g.type=60;var e=aa.pl(a),k=[],h=[],r=[],n=[],m=[];c=c.J;var x=b?b[0]:null;for(l in c.nb){var F;F=b;var w=l.match(/"(.*?)"/)[1];if(F&&1<F.length){for(var v=F[1],K=2;K<F.length;K++)v=v+"%join%"+F[K];v+="%join%"+w}else v=w;F=v;for(w=0;w<a.T.length;w++)for(v=a.T[w].da,K=0;K<v.length;K++){var B=v[K];if(e||!x||-1!=B.Dc.indexOf(x)){var y=B.li,D;D=l;var H=F,G=c,A=h,p=k,E=B.mi;if(E){for(var z=!1,C=0;C<E.length;C+=3)H==E[C]&&(p.push(4*E[C+1]+E[C+2]),A.push(new Float32Array(G.nb[D])),
z=!0);D=z}else D=!1;H=l;G=F;A=c;p=n;E=r;if(y){z=!1;for(C=0;C<y.length;C+=2)G==y[C]&&(E.push(y[C+1]),p.push(new Float32Array(A.nb[H])),z=!0);y=z}else y=!1;(D||y)&&m.push(B)}}}g.mi=k;g.ZP=h;g.li=r;g.YP=n;g.Or=m}break;case 20:if(l=f.nb.tsr)g.type=20,e=q(a,b,c),e||(e=J(c,l),P(a,b,c,e)),g.trans=e.trans,g.Zb=e.Zb,ka.mH(a)&&ka.b6(a,g.trans[0],g.Zb[0]);else return ea.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:aa.pl(a)&&(g.al=f.nb["light_settings.environment_energy"]||
null,g.re=f.nb.horizon_color||null,g.De=f.nb.zenith_color||null,g.fog_intensity=f.nb["mist_settings.intensity"]||null,g.fog_depth=f.nb["mist_settings.depth"]||null,g.fog_start=f.nb["mist_settings.start"]||null,g.fog_height=f.nb["mist_settings.height"]||null,g.Ho=f.nb.b4w_fog_color||null,g.type=80)}aa.rr(a)&&10!=f.type&&u(a,d);return!0}function q(a,b,c){a=a.Aq;b=b?b.join("%join%"):null;for(var d=0;d<a.length;d+=3)if(c==a[d]&&b==a[d+1])return a[d+2];return null}function P(a,b,c,d){a.Aq.push(c,b?b.join("%join%"):
null,d)}function O(a,b,c,d){var e=a.A,f=e.os,g=a.Ba[b],l=g.BI,k;a:{k=e.nC;for(var h=0;h<k.length;h+=2)if(c==k[h]){k=k[h+1];break a}k=null}if(k)g.BI=k;else{for(g=0;g<f.length;g++){k=f[g].Aj;for(var h=[],r=[],n=d.trans,m=d.Zb,x=0;x<n.length;x++){var F=y(n[x],m[x],k);h.push(F.trans);r.push(F.Zb)}l.push({trans:h,Zb:r})}e.nC.push(c,l)}e.Ik&&(c=e.ko,b>c[1]?(d=c[1],c[1]=b,c[0]=d):b>c[0]&&b<c[1]&&(c[0]=b),I(a))}function I(a){var b=a.A.ko;if(-1!=b[0]&&-1!=b[1]){var c=a.Ba;a=c[b[1]].gh;var d=Math.floor(a),
e=a-d,b=c[b[0]];a=b.gh;d=Math.floor(a);b.gh=d+e}}function u(a,b){var c=a.A.ko,d=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(var e=a.Ba;0<=d;d--){var f=e[d];if(f&&10==f.type)if(d>c[1])c[1]=d;else{d>c[0]&&(c[1]=d);break}}}function J(a,b){for(var c=a.J.lH,d=[],e=[],f=0;f<c;f++)d.push(b.subarray(8*f,8*f+4)),e.push(b.subarray(8*f+4,8*f+8));return{trans:d,Zb:e}}function x(a,b,c,d){if((c=a.Ba[c])&&null!=c.type&&(c.play||d)){var e=a.A,f=c.gh,g=c.start,l=c.length,f=f+c.speed*b*na.ee(),k=c.type,h=c.speed;if(0<=h&&f>=
g+l||0>h&&f<g)switch(d||(c.Ou=!0),c.behavior){case 10:0<=h?f=(f-g)%l+g:f=g+l-1E-6;break;case 20:0<=h?f=g:f=g+l-1E-6;c.play=!1;break;case 30:0<=h?f=g+l-1E-6:f=g,c.play=!1}c.gh=f;switch(k){case 10:if(!e.Ik){d=D(c);b=d[0];var r=d[1];d=d[2];e.ve=c.Zb[b];e.sf=c.Zb[r];e.Ce=c.trans[b];e.wf=c.trans[r];e.ug=d;d=e.os;c=c.BI;for(var n=0;n<d.length;n++){var m=d[n],x=c[n];m.ve=x.Zb[b];m.sf=x.Zb[r];m.Ce=x.trans[b];m.wf=x.trans[r];m.ug=e.ug}X.W(a)}break;case 20:d=D(c);var e=ya,r=d[0],n=d[1],m=d[2],x=c.trans,F=x[r][1],
f=x[r][2],g=x[n][1],l=x[n][2];e[0]=(1-m)*x[r][0]+m*x[n][0];e[1]=(1-m)*F+m*g;e[2]=(1-m)*f+m*l;r=la;f=d[0];n=d[1];m=d[2];x=c.Zb;F=Y;F[0]=x[f][0];F[1]=x[f][1];F[2]=x[f][2];F[3]=x[f][3];f=xa;f[0]=x[n][0];f[1]=x[n][1];f[2]=x[n][2];f[3]=x[n][3];wa.slerp(F,f,m,r);n=d[2];m=c.trans;d=(1-n)*m[d[0]][3]+n*m[d[1]][3];a.parent&&a.xB&&(n=ra,fa.ti(e,d,r,n),fa.multiply(a.xB,n,n),fa.Wb(n,e),fa.Eb(n,r),d=fa.fe(n));c.bJ&&(n=Q,X.Ne(a,n),ba.AC(e,n,b,c.bJ,e));c.JH&&(n=Y,X.Sj(a,n),ba.VR(r,n,b,c.JH,r));f=c.Rk;f[0]&&X.dC(a,
e);f[1]&&X.aC(a,r);f[2]&&X.sI(a,d);X.W(a);ca.$(a);break;case 30:d=c.gh-c.start;0>d&&(d=0);d>=c.length&&(d=c.length);a=Math.floor(d);b=a+1;d-=a;10!=c.behavior&&b==c.length&&(b=--a,d=1);c=c.dT;sa[0]=a+c;sa[1]=b+c;sa[2]=d;d=sa;e.rD=d[0];e.sD=d[2];break;case 40:d=D(c);b=d[0];e=d[1];d=d[2];c.volume&&Ja.wI(a,(1-d)*c.volume[b]+d*c.volume[e]);c.pitch&&Ja.BH(a,(1-d)*c.pitch[b]+d*c.pitch[e]);break;case 50:b=10==c.behavior?(f-g)/na.ee():f/na.ee();ka.l4(a,c.Jk,b);break;case 60:d=D(c);b=d[0];e=d[1];d=d[2];F=c.ZP;
f=c.mi;r=c.YP;n=c.li;m=c.Or;for(c=0;c<f.length;c++)for(g=F[c],x=f[c],l=(1-d)*g[b]+d*g[e],g=0;g<m.length;g++)m[g].bj[x]=l;for(c=0;c<n.length;c++)for(F=r[c],x=n[c],F=za.lerp(F.subarray(3*b,3*b+3),F.subarray(3*e,3*e+3),d,ya),g=0;g<m.length;g++)m[g].Re[3*x]=F[0],m[g].Re[3*x+1]=F[1],m[g].Re[3*x+2]=F[2];aa.pl(a)&&Z.kD(a);break;case 70:d=D(c);b=d[0];e=d[1];d=d[2];f=c.Rk;(l=c.al)&&f[0]&&ma.X3(a.xd,(1-d)*l[b]+d*l[e]);(c=c.color)&&f[1]&&(ya[0]=(1-d)*c[3*b]+d*c[3*e],ya[1]=(1-d)*c[3*b+1]+d*c[3*e+1],ya[2]=(1-
d)*c[3*b+2]+d*c[3*e+2],ma.W3(a.xd,ya));g=a.T;for(c=0;c<g.length;c++)Z.G5(a,g[c].vb);break;case 80:d=D(c);b=d[0];e=d[1];d=d[2];f=c.Rk;g=a.T;h=Z.dc(g[0].vb,R.Nb);l=c.al;l=f[0]?(1-d)*l[b]+d*l[e]:h.al;k=c.re;f[1]?(ya[0]=(1-d)*k[3*b]+d*k[3*e],ya[1]=(1-d)*k[3*b+1]+d*k[3*e+1],ya[2]=(1-d)*k[3*b+2]+d*k[3*e+2],k=ya):k=h.re;var v=c.De;f[2]?(Q[0]=(1-d)*v[3*b]+d*v[3*e],Q[1]=(1-d)*v[3*b+1]+d*v[3*e+1],Q[2]=(1-d)*v[3*b+2]+d*v[3*e+2],h=Q):h=h.De;v=c.fog_intensity;f[3]&&(r=(1-d)*v[b]+d*v[e]);v=c.fog_depth;f[4]&&(n=
(1-d)*v[b]+d*v[e]);v=c.fog_start;f[5]&&(m=(1-d)*v[b]+d*v[e]);v=c.fog_height;f[6]&&(x=(1-d)*v[b]+d*v[e]);c=c.Ho;f[7]&&(la[0]=(1-d)*c[3*b]+d*c[3*e],la[1]=(1-d)*c[3*b+1]+d*c[3*e+1],la[2]=(1-d)*c[3*b+2]+d*c[3*e+2],F=la);for(c=0;c<g.length;c++)b=a.T[c].vb,(f[0]||f[1]||f[2])&&Z.gI(b,l,k,h),f[3]&&Z.mR(b,r),f[4]&&Z.kR(b,n),f[5]&&Z.nR(b,m),f[6]&&Z.lR(b,x),f[7]&&Z.iI(b,F);break;default:ba.K("Unknown animation type:"+k)}}}function D(a){var b=a.iE[0],c=a.iE[1]-b,b=a.gh-b;0>b&&(b=0);b>=c&&(b=c);b/=a.NK;c=Math.floor(b);
a=a.LK[c]?b-c:0;b=Math.ceil(c+a);sa[0]=c;sa[1]=b;sa[2]=a;return sa}function l(a,b){var c=a.A,d=c.Gi,e=c.ko,f=e[0],e=e[1];if(-1!=e){if(-1!=f){var g=a.Ba[f];if(g.play||0==b||c.aj){var l=D(g),k=l[0],h=l[1];c.ug=l[2];var l=g.Zb[k],r=g.Zb[h],n=g.trans[k],m=g.trans[h]}else d=1}else d=1;e=a.Ba[e];if(e.play||0==b||c.aj){var f=D(e),x=f[0],F=f[1];c.ug=f[2]}else if(-1!=f&&g.play)d=0;else return;var f=e.Zb[x],q=e.Zb[F],w=e.trans[x],K=e.trans[F];if(1!=d||c.aj)if(0!=d||c.aj){d=c.eh;if(c.aj&&!c.zn&&!c.gn){c.zn=
new Float32Array(c.Ce.length);c.gn=new Float32Array(c.ve.length);for(var B in d)l=d[B],l.Wr||N(c,l)}for(B in d)l=d[B],l.Wr||v(c,l,g,e,k,h,x,F)}else c.ve.set(l),c.sf.set(r),c.Ce.set(n),c.wf.set(m);else c.ve.set(f),c.sf.set(q),c.Ce.set(w),c.wf.set(K);X.W(a);pa.Y5(a)}}function v(a,b,c,d,e,f,g,l){var k=b.Wr,h=a.Gi,r=la,n=Y,m=va,x=Ua,F=xa,q=Oa,K=Ba,w=Aa,B=4*b.zj,u=d.Mk[g],y=d.Nk[g],D=d.Mk[l],H=d.Nk[l];if(!a.aj)var G=c.Mk[e],A=c.Nk[e],p=c.Mk[f],E=c.Nk[f];for(var z=0;4>z;z++)n[z]=u[B+z],x[z]=y[B+z],q[z]=
D[B+z],w[z]=H[B+z],a.aj?(r[z]=a.gn[B+z],m[z]=a.zn[B+z],F[z]=a.gn[B+z],K[z]=a.zn[B+z]):(r[z]=G[B+z],m[z]=A[B+z],F[z]=p[B+z],K[z]=E[B+z]);wa.slerp(r,n,h,r);ba.iy(m,x,h,m);fa.mn(m,ra);fa.Gc(r,ra);k&&fa.multiply(k.iD,ra,ra);fa.copy(ra,b.iD);fa.multiply(ra,b.fJ,ra);fa.hr(ra,m);fa.Eb(ra,r);wa.slerp(F,q,h,F);ba.iy(K,w,h,K);fa.mn(K,ra);fa.Gc(F,ra);k&&fa.multiply(k.hD,ra,ra);fa.copy(ra,b.hD);fa.multiply(ra,b.fJ,ra);fa.hr(ra,K);fa.Eb(ra,F);for(z=0;4>z;z++)a.ve[B+z]=r[z],a.Ce[B+z]=m[z],a.sf[B+z]=F[z],a.wf[B+
z]=K[z];b=b.Zy;for(z=0;z<b.length;z++)v(a,b[z],c,d,e,f,g,l)}function N(a,b){for(var c=4*b.zj,d=b.Wr,e=a.Gi,f=va,g=la,l=Ua,k=Y,h=0;4>h;h++)f[h]=a.Ce[c+h],g[h]=a.ve[c+h],l[h]=a.wf[c+h],k[h]=a.sf[c+h];fa.mn(f,ra);fa.Gc(g,ra);fa.multiply(ra,b.nj,ra);fa.copy(ra,b.iD);d&&(fa.invert(d.iD,V),fa.multiply(V,ra,ra));fa.hr(ra,f);fa.Eb(ra,g);fa.mn(l,ra);fa.Gc(k,ra);fa.multiply(ra,b.nj,ra);fa.copy(ra,b.hD);d&&(fa.invert(d.hD,V),fa.multiply(V,ra,ra));fa.hr(ra,l);fa.Eb(ra,k);wa.slerp(g,k,e,g);ba.iy(f,l,e,f);for(h=
0;4>h;h++)a.gn[c+h]=g[h],a.zn[c+h]=f[h];c=b.Zy;for(h=0;h<c.length;h++)N(a,c[h])}function E(a,b){var c=a.A,d=c.Gi,e=c.Cq;if(0!=e){!c.aj||c.zn||c.gn||(d=c.Gi=0);var d=c.Bq-d,f=e*b;ba.sign(d)==ba.sign(e)&&Math.abs(f)<Math.abs(d)?c.Gi+=f:(c.Gi=c.Bq,c.Cq=0,c.Hk&&(c.Hk(),c.Hk=null),c.aj&&(c.zn=null,c.gn=null,c.aj=!1))}}function U(a,b){for(var c=[],d=[],e=[],f=[],g=a.J.lH,l=0;l<g;l++){for(var k in b){var h=b[k],r=h.Fw,n=a.J.yE[k];n?fa.copy(n.subarray(8*l,8*l+8),r):fa.identity(r);h.fD=!1}h=L(b);c.push(h.trans);
d.push(h.Zb);e.push(h.Nk);f.push(h.Mk)}return{trans:c,Zb:d,Nk:e,Mk:f}}function L(a){var b=[],c=[],d=[],e=[],f=new Float32Array(4),g=new Float32Array(4),l;for(l in a){var k=a[l],h=f,r=g,n=k.ty,m=n[n.length-1],x=m.eJ;m.fD||fa.identity(x);for(m=n.length-1;0<=m;m--){var F=n[m],v=F.eJ;if(F.fD)x=v;else{var q=F.nj,K=F.Fw;fa.invert(q,ra);fa.multiply(K,ra,ra);fa.multiply(q,ra,ra);fa.multiply(x,ra,v);x=v;F.fD=!0}}n=F.eJ;h[0]=n[0];h[1]=n[1];h[2]=n[2];h[3]=n[3];r[0]=n[4];r[1]=n[5];r[2]=n[6];r[3]=n[7];wa.normalize(r,
r);h=k.zj;fa.multiply(k.eD,k.Fw,ra);for(k=0;4>k;k++)r=4*h+k,b[r]=f[k],c[r]=g[k],d[r]=ra[k],e[r]=ra[k+4]}return{trans:b,Zb:c,Nk:d,Mk:e}}function y(a,b,c){var d=[],e=[],f;for(f in c)for(var g=c[f],l=g.zj,g=g.rF,k=0;4>k;k++){var h=4*g+k,r=4*l+k;d[h]=a[r];e[h]=b[r]}d=new Float32Array(d);e=new Float32Array(e);return{trans:d,Zb:e}}function H(a){var b=a.J,c;if(b.yE)c=10;else if(b.nb)if("volume"in b.nb||"pitch"in b.nb)c=40;else{var d;a:{if(d=a.J.nb)for(var e in d)if(-1!=e.indexOf("nodes")){d=!0;break a}d=
!1}if(d)c=60;else{var f;a:{if(a.J.nb){d=a.fcurves;for(f in d)if("color"==f&&!d[f][3]){f=!0;break a}if("energy"==f){f=!0;break a}}f=!1}if(f)c=70;else if(f=a.J.nb,"light_settings.environment_energy"in f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)c=80;else{a:{if(a.J.nb)for(c in a=a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:
0}}}else c=0;b.type=c}function n(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function f(a,b){b[0]=b[1]=0;for(var c in a)"energy"==c?b[0]=1:"color"==c&&(b[1]=1)}function W(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:
"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function d(a,b,c,e,f,g,l){var k=a+(b-a)/2,h=G(k,e,f,g,l)-c;return.02>Math.abs(h)?k:0<h?d(a,k,c,e,f,g,l):d(k,b,c,e,f,g,l)}function G(a,b,c,d,e){var f=1-a;return b*f*f*f+3*c*f*f*a+3*d*f*a*a+e*a*a*a}function B(a,b){k(a,b);-1==Ya.indexOf(a)&&Ya.push(a)}function S(a,b){X.W(a);ca.$(a);e(a,0,b,!0)}function r(a,d,e,f){f=f||0;if(aa.mf(a)){var g=ha(a,e);if(g)return B(a,f),c(a,g,f),S(a,f),!0;if((g=qa(a,e))&&"EMITTER"==g.sB){B(a,f);d=g.name;e=f;for(var g=
a.T,l=0;l<g.length;l++)for(var k=g[l].da,h=0;h<k.length;h++){var r=k[h].Ra;r&&r.name==d&&b(a.Ba[e],r)}S(a,f);return!0}}if(g=ba.Od("name",e,Fa)||ba.Od("name",e+"_B4W_BAKED",Fa)){B(a,f);if(A(a,d,g,f))return S(a,f),!0;a.Ba[f]=null}ea.error('Unsupported object: "'+a.name+'" or animation name: "'+e+'"');return!1}function ha(a,b){for(var c=0;c<a.Fd.length;c++){var d=a.Fd[c];if(d.name===b)return d}return null}function qa(a,b){for(var c=a.T,d=0;d<c.length;d++)for(var e=c[d].da,f=0;f<e.length;f++){var g=e[f].Ra;
if(g&&g.name===b)return g}return null}function K(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}var pa=t("__armature"),ja=t("__config"),ma=t("__lights"),aa=t("__obj_util"),ka=t("__particles"),ca=t("__physics"),ea=t("__print"),wa=t("__quat"),da=t("__reformer"),Z=t("__scenes"),Ja=t("__sfx"),R=t("__subscene"),na=t("__time"),X=t("__transform"),fa=t("__tsr"),ba=t("__util"),za=t("__vec3"),ia=ja.eo,F=ja.Ni;a.j8=1E-6;a.n8=0;a.LU=10;a.PU=20;a.p8=30;
a.o8=40;a.QU=50;a.OU=60;a.NU=70;a.MU=80;a.q8=0;a.r8=1;a.s8=2;a.t8=3;a.u8=4;a.v8=5;a.w8=6;a.x8=7;a.Gt=-1;a.D6=10;a.E6=20;a.yT=30;var sa=Array(3),ya=new Float32Array(3),Q=new Float32Array(3),va=new Float32Array(4),Ua=new Float32Array(4),Ba=new Float32Array(4),Aa=new Float32Array(4),la=new Float32Array(4),Y=new Float32Array(4),xa=new Float32Array(4),Oa=new Float32Array(4),ra=fa.create(),V=fa.create(),Ya=[],Fa=[];a.XN=function(){return ba.trunc((F.XA-50)/4)};a.vaa=function(a){return a/na.ee()};a.update=
function(a){for(var b=0;b<Ya.length;b++){for(var c=Ya[b],d=0;8>d;d++)x(c,a,d);c.A.Ik&&(E(c,a),l(c,a))}for(b=0;b<Ya.length;b++)for(c=Ya[b],d=0;8>d&&c.Ba.length;d++)p(c,d)};a.D_=function(){return Fa};a.Jaa=function(a){var b=[];if(z(a))for(var c=0;c<a.Fd.length;c++)b.push(a.Fd[c].name);for(var d=[],c=0;c<Fa.length;c++){var e=Fa[c],f=e.J;20==f.type?d.push(e):60!=e.J.type||"MESH"!=a.type&&"WORLD"!=a.type?10==f.type&&"ARMATURE"==a.type?d.push(e):40==f.type&&"SPEAKER"==a.type?d.push(e):80==f.type&&"WORLD"==
a.type&&d.push(e):d.push(e)}for(c=0;c<d.length;c++)b.push(g(d[c].name));if(ka.mH(a)&&ka.dQ(a))for(a=a.T,c=0;c<a.length;c++)for(d=a[c].da,e=0;e<d.length;e++)(f=d[e].Ra)&&b.push(f.name);return b};a.iS=g;a.Laa=function(a,b){var c=a.Ba[b];return c?c.type:0};a.WK=function(a){for(var d=0,e=a.T,f=0;f<e.length;f++)for(var g=e[f].da,l=0;l<g.length;l++){var k=g[l].Ra;k&&"EMITTER"==k.sB&&!g[l].Uh&&(B(a,d),b(a.Ba[d],k),S(a,d),k.be?a.Ba[d].behavior=10:a.Ba[d].behavior=a.co,d++)}e=a.Bo.slice();for(f=0;f<e.length;f++)l=
e[f],g=l.op,l=l.action,B(a,d),A(a,g,l,d)?(S(a,d),a.Ba[d].behavior=a.co,d++):a.Ba[d]=null;z(a)&&(B(a,d),c(a,a.Fd[0],d),S(a,d),a.Ba[d].behavior=a.co)};a.mE=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:ba.K("Wrong animation behavior")}};a.I_=function(a){var b=[];a=a.data.materials;for(var c=0;c<a.length;c++){var d=a[c],e=d.se;e&&m(e,b,[d.name])}return b};a.J_=function(a){var b=[],c=a.node_tree;c&&m(c,b,[a.name]);return b};a.RO=M;a.play=
function(a,b,c){h(a.Ba,c,function(a){a.play=!0;b?a.uz=b:a.uz=null;a.Ou=!1});a.A.Ik&&I(a)};a.stop=function(a,b){h(a.Ba,b,function(a){a.play=!1;a.uz=null;a.Ou=!1})};a.ov=function(a,b){var c=a.Ba;if(-1==b)for(var d=0;8>d;d++){if(c[d]&&c[d].play)return!0}else if(c=c[b])return c.play;return!1};a.ZB=C;a.O3=function(a,b){b=b||0;h(a.Ba,b,function(c){C(a,c.start,b)})};a.KN=function(a,b){var c=a.Ba[b];return c&&c.gh?c.gh:0};a.BG=function(a,b){var c=a.Ba[b];return c&&10==c.behavior};a.eI=function(a,b,c){h(a.Ba,
c,function(a){a.behavior=b})};a.Oaa=function(a,b){var c=a.Ba[b];return c&&c.behavior};a.s9=function(a,b,c,d){h(a.Ba,d,function(a){a.bJ=b||0;a.JH=c||0})};a.vda=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.Ba[c]=null;else a.Ba[b]=null;a.A.Ik&&u(a,b)};a.jfa=e;a.k2=function(a){if("ARMATURE"==a.type||a.ay||"WORLD"==a.type)return!0;for(var b=0;b<a.Bo.length;b++){var c=a.Bo[b].action.J.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return ka.mH(a)&&
ka.dQ(a)||"MESH"==a.type&&a.Fd.length?!0:!1};a.wL=function(a){if(K(a))return!0;if(a.zq)for(var b=0;b<a.zq.length;b++){var c=a.zq[b].action.J.type;if(20==c||60==c&&"MESH"==a.type)return!0}return ka.UW(a)&&ka.TW(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};a.WO=function(a){return!!a.Ba.length};a.N0=function(a,b,c,d,e){if(c=c?ba.Od("uuid",c,Fa):ba.Od("name",d,Fa)||ba.Od("name",d+"_B4W_BAKED",Fa))if(k(a,e),-1==Ya.indexOf(a)&&Ya.push(a),d=c.frame_range,d[0]>d[1])ea.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"');else switch(d=c.J,d.type){case 10:aa.rr(a)&&(d=q(a,b,c),d||(d=U(c,a.A.eh),P(a,b,c,d)),O(a,e,c,d));break;case 20:(e=d.nb.tsr)?(d=q(a,b,c),d||(d=J(c,e),P(a,b,c,d))):ea.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"')}};a.sZ=function(a,b){for(var c=a.Aq,d=[],e=0;e<c.length;e+=3)(60!=c[e].J.type||null!==c[e+1]&&c[e+1].split("%join%")[0]!=b)&&d.push(c[e],c[e+1],c[e+2]);a.Aq=d};a.dX=L;a.ZZ=y;a.aW=function(a){function b(a,
b){for(var c=0;c<b;c++){var d=a.subarray(8*c+4,8*c+8);wa.normalize(d,d)}}function c(a,b){if(-1<a.indexOf("location"))var c=0,d=b;else-1<a.indexOf("rotation_quaternion")?(c=4,d=0==b?3:b-1):-1<a.indexOf("scale")?(c=3,d=0):(c=0,d=b);return c+d}function d(a,b,c,d,f){if(-1<c.search(e)){a=b;c=c.split('"')[1];var l=g}else 8==f?(c="tsr",l=g):1<f?l=new Float32Array(f):l=0;if(!a[c]){f=a;b=c;if("object"==typeof l&&l.length)for(var k=l.length,h=new Float32Array(d*k),r=0;r<d;r++)for(var n=0;n<k;n++)h[r*k+n]=l[n];
else if("number"==typeof l)for(h=new Float32Array(d),r=0;r<d;r++)h[r]=l;else ba.K("Wrong storage default value");f[b]=h}return a[c]}var e=new RegExp(/pose.bones\[\".+\"\]/g),g=fa.create(),l=a.J={type:0,lH:0,lQ:0,nb:null,yE:null,qL:null,Rk:new Int8Array(8)};l.lQ=1/ia.Jo;var k=a.fcurves,h={},r={},m=0,x;for(x in k){var F=k[x],v;for(v in F){var q=F[v],K=q.Xg;da.oX(q,a);q=q.num_channels;m||(m=K.length);for(var q=d(h,r,x,m,q),B=q.length/m,u=c(x,v|0),y=0;y<m;y++)q[y*B+u]=K[y]}}if(ba.kl(h)){for(var D in h)"tsr"==
D&&b(h[D],m);l.nb=h}if(ba.kl(r)){for(var G in r)b(r[G],m);l.yE=r}l.lH=m;l.qL=a.RV;"tsr"in h&&n(k,l.Rk);("color"in h||"energy"in h)&&f(k,l.Rk);("light_settings.environment_energy"in h||"horizon_color"in h||"zenith_color"in h||"mist_settings.intensity"in h||"mist_settings.depth"in h||"mist_settings.start"in h||"mist_settings.height"in h||"b4w_fog_color"in h)&&W(k,l.Rk);H(a);Fa.push(a)};a.F_=function(a,b){return(b-a)*ia.Jo+1};a.wW=function(a,b,c,e,f,g){var l=new Float32Array(2),k=new Float32Array(2),
h=new Float32Array(2),r=new Float32Array(2),n=b[1],m=b[2],x=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var F=0,v=0,q=null;f<=g;f++)if(f<n)for(var K=0;K<ia.Jo;K++)c[F++]=m;else if(f>x)for(K=0;K<ia.Jo;K++)c[F++]=a;else{var B=b[v],u=3;0===B&&(u+=2);0===q&&(u+=2);var y=2===B?0:1;if(b[v+1]==b[v+u+1])q=B,v+=u;else{K=0;f==b[v+1]&&(y&&(e[F]=1),c[F]=b[v+2],F++,K++);if(f==x)for(;K<ia.Jo;K++)c[F++]=a;else for(l[0]=b[v+1],l[1]=b[v+2],0!==B?(k[0]=0,k[1]=0):0===q?(k[0]=b[v+5],k[1]=b[v+6]):(k[0]=b[v+
3],k[1]=b[v+4]),0!==B?(h[0]=0,h[1]=0):(h[0]=b[v+u+3],h[1]=b[v+u+4]),r[0]=b[v+u+1],r[1]=b[v+u+2];K<ia.Jo;K++){var D=f+K/ia.Jo;switch(B){case 0:var H,w,A,z=l,p=k,E=h,C=r,L=[],R=[];L[0]=z[0]-p[0];L[1]=z[1]-p[1];R[0]=C[0]-E[0];R[1]=C[1]-E[1];H=C[0]-z[0];A=Math.abs(L[0]);w=Math.abs(R[0]);A+w&&A+w>H&&(H/=A+w,p[0]=z[0]-H*L[0],p[1]=z[1]-H*L[1],E[0]=C[0]-H*R[0],E[1]=C[1]-H*R[1]);y&&(e[F]=1);c[F]=G(d(0,1,D,l[0],k[0],h[0],r[0]),l[1],k[1],h[1],r[1]);F++;break;case 1:y&&(e[F]=1);z=l[0];p=l[1];E=(r[1]-p)/(r[0]-
z);c[F]=E*D+(p-E*z);F++;break;case 2:y&&(e[F]=1);c[F]=b[v+2];F++;break;default:ba.K("Unknown keyframe interpolation mode: "+B)}}f+1==b[v+u+1]&&(q=B,v+=u)}}};a.apply=r;a.tW=function(a,b,c,d){d=d||0;var e=ba.Od("uuid",c,Fa);if(e){B(a,d);if(A(a,b,e,d)){S(a,d);return}a.Ba[d]=null}ea.error('Unsupported object: "'+a.name+'" or animation uuid: "'+c+'"')};a.nfa=function(a,b){var c=ba.Od("name",b,Fa)||ba.Od("name",b+"_B4W_BAKED",Fa);if(c){if(0==c.J.type)return!1}else if(!(qa(a,b)||aa.mf(a)&&ha(a,b)))return!1;
return!0};a.Eba=function(a,b){for(var c=a.Ba,d=0;d<c.length;d++){var e=c[d];if(e&&g(e.Jk)==g(b))return d}return-1};a.Haa=function(a,b){var c=a.Ba[b];return c&&c.Jk?g(c.Jk):null};a.remove=function(a){a.Ba.length=0;a=Ya.indexOf(a);-1!=a&&Ya.splice(a,1)};a.Y2=function(a){for(var b=Fa.length-1;0<=b;b--)Fa[b].SV==a&&Fa.splice(b,1)};a.t9=function(a,b){if(!a.Ba.length)return r(a,null,b,0)?0:-1;for(var c=0;c<a.Ba.length;c++)if(!a.Ba[c])return r(a,null,b,c)?c:-1};a.pea=function(a,b,c,d){a=a.A;a.Cq=(b-a.Gi)/
c;a.Bq=b;a.Hk&&a.Hk();a.Hk=d};a.Yca=function(a,b,c,d){a=a.A;a.ko[1]=b;a.Cq=1/c;a.Bq=1;a.Hk&&a.Hk();a.Hk=d;a.zn=null;a.gn=null;a.aj=!0};a.rea=function(a,b,c){h(a.Ba,c,function(a){a.speed=b})};a.Fba=function(a,b){return a.Ba[b].speed};a.Kaa=function(a,b){return a.Ba[b].start};a.Iaa=function(a,b){return a.Ba[b].length};a.Ja=function(){Ya.length=0;Fa.length=0};a.d_=function(a){var b=(a[0]||a[1]||a[2]).Xg.length,c=la,d=ya,e=!!a[0];e||(a[0]={Xg:new Float32Array(b),num_channels:8});var f=!!a[1];f||(a[1]=
{Xg:new Float32Array(b),num_channels:8});var g=!!a[2];g||(a[2]={Xg:new Float32Array(b),num_channels:8});a[3]={Xg:new Float32Array(b),num_channels:8};for(var l=0;l<b;l++)d[0]=e?a[0].Xg[l]:0,d[1]=f?a[1].Xg[l]:0,d[2]=g?a[2].Xg[l]:0,ba.bl(d,c),a[0].Xg[l]=c[3],a[1].Xg[l]=c[0],a[2].Xg[l]=c[1],a[3].Xg[l]=c[2]};a.DN=K;a.z4=function(a,b){for(var c=7,d=0,e=0;e<Fa.length;e++){var f=Fa[e];if(f.name==b){d=f.J.type;break}}0==d&&(ha(a,b)?d=30:(e=qa(a,b))&&"EMITTER"==e.sB&&(d=50));for(e=0;8>e;e++)if(f=a.Ba[e]){if(f.type==
d)return e}else e<c&&(c=e);return c}};b4w.module.__armature=function(a,t){function p(a){a=a.A;for(var b=a.os,c=a.YA,e=0;e<b.length;e++){for(var g=b[e],k=c[e],h=0;h<k.length;h+=2)for(var m=k[h],l=k[h+1],v=0;4>v;v++)g.ve[m+v]=a.ve[l+v],g.sf[m+v]=a.sf[l+v],g.Ce[m+v]=a.Ce[l+v],g.wf[m+v]=a.wf[l+v];g.ug=a.ug}}function c(a,b,e,g){var h=a.BS,m=a.nj,x=a.gD,q=a.Wr;q?(q=q.gD,b?k.multiply(q,h,x):(b=C,k.invert(q,b),k.multiply(b,x,h))):b?k.copy(h,x):k.copy(x,h);h=z;k.invert(m,h);k.multiply(x,h,h);m=a.zj;e[4*m]=h[0];e[4*m+1]=h[1];e[4*m+2]=h[2];e[4*
m+3]=h[3];g[4*m]=h[4];g[4*m+1]=h[5];g[4*m+2]=h[6];g[4*m+3]=h[7];a=a.Zy;for(m=0;m<a.length;m++)x=a[m],x.Cc||c(x,!0,e,g)}var b=t("__util"),k=t("__tsr"),g=t("__quat"),M=t("__mat4"),m=t("__vec3"),z=k.create(),C=k.create(),h=new Float32Array(4),e=new Float32Array(4),A=new Float32Array(4);a.Ms=function(a,c){for(var e=a.data.bones,g=a.pose.bones,h={},q=0;q<g.length;q++){var x=g[q],D=x.bone,l=D.name,v=h[l]={zj:0,jT:-1,Wr:null,Zy:[],ty:[],Cc:null,eD:k.create(),BS:k.create(),nj:k.create(),fJ:k.create(),gD:k.create(),
iD:k.create(),hD:k.create(),Fw:k.create(),eJ:k.create(),fD:!1,pS:new Float32Array(3)},l=new Float32Array(D.matrix_local),A=new Float32Array(16);M.invert(l,A);var x=new Float32Array(x.matrix_basis),p=v.pS;m.subtract(b.Rh(D.tail_local),b.Rh(D.head_local),p);b.m6(p,A,p);k.Wh(l,v.nj);k.Wh(x,v.Fw);k.copy(v.nj,v.gD);k.invert(v.nj,v.fJ)}for(q=0;q<e.length;q++){l=e[q].name;x=b.Od("name",l,g);v=h[l];D=x.parent_recursive;v.ty.push(v);for(A=0;A<D.length;A++)x=D[A],x=x.name,x=h[x],v.ty.push(x);D.length?(x=D[0],
x=x.name,x=h[x],v.Wr=x,k.invert(x.nj,z),k.multiply(z,v.nj,v.eD),x.Zy.push(v)):k.copy(v.nj,v.eD);v.zj=q;v.name=l;k.multiply(v.eD,v.Fw,v.BS)}c.A.eh=h};a.SF=function(a,b,c){var m=a.A,q=m.ug;b=m.eh[b];var p=b.zj;a=b.nj;var x=m.Ce,D=m.wf,l=m.ve,m=m.sf,v=x[4*p+1],N=x[4*p+2],E=x[4*p+3],t=D[4*p+1],L=D[4*p+2],y=D[4*p+3];h[0]=(1-q)*x[4*p]+q*D[4*p];h[1]=(1-q)*v+q*t;h[2]=(1-q)*N+q*L;h[3]=(1-q)*E+q*y;e[0]=l[4*p];e[1]=l[4*p+1];e[2]=l[4*p+2];e[3]=l[4*p+3];A[0]=m[4*p];A[1]=m[4*p+1];A[2]=m[4*p+2];A[3]=m[4*p+3];g.slerp(e,
A,q,e);q=z;k.mn(h,q);k.Gc(e,q);p=C;k.translate(a,b.pS,p);k.multiply(q,p,q);k.copy(q,c)};a.E3=function(a,b,e){var g=a.A;b=g.eh[b];var h=g.Ce,m=g.ve;k.copy(e,b.gD);c(b,!1,h,m);g.ug=0;p(a)};a.Y5=p;a.w5=c;a.N9=function(a,b){return b in a.A.eh}};b4w.module.__lights=function(a,t){function p(a){k.scale(a.color,a.al,a.qu)}var c=t("__tsr"),b=t("__util"),k=t("__vec3"),g=new Float32Array(3);a.k1=function(a,m){var z=a.data,C=m.xd={name:"",type:z.type,sQ:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),qu:new Float32Array(3),rZ:0,lJ:!1,ts:0,HC:0,mu:.1,lu:30,xN:!1,WP:!1,GZ:!1,Jp:!0,Np:!0,al:1,distance:25,qaa:"INVERSE_SQUARE"};C.name=m.name;C.Jp=z.use_diffuse;C.Np=z.use_specular;var h=c.la(m.A.D),h=b.Jc(h,b.ic,g);k.normalize(h,
h);C.direction.set(h);C.color[0]=z.color[0];C.color[1]=z.color[1];C.color[2]=z.color[2];C.al=C.rZ=z.energy;p(C);C.distance=z.distance;C.lJ=z.use_sphere;C.mu=z.clip_start;C.lu=z.clip_end;if("POINT"===C.type||"SPOT"===C.type)C.distance=z.distance;"SPOT"===C.type?(C.HC=z.spot_blend,C.ts=z.spot_size):"POINT"===C.type&&(C.ts=Math.PI/2);C.xN=z.b4w_generate_shadows;C.GZ=z.b4w_dynamic_intensity};a.W3=function(a,b){a.color[0]=b[0];a.color[1]=b[1];a.color[2]=b[2];p(a)};a.Uda=function(a,b){a.HC=b};a.Tda=function(a,
b){a.distance=b};a.Vda=function(a,b){a.ts=b};a.X3=function(a,b){a.al=b;p(a)};a.H5=function(a){var g=a.xd;if(g){a=c.la(a.A.D);b.Jc(a,b.ic,g.direction);k.normalize(g.direction,g.direction);if("SUN"==g.type){a=Math.acos(k.dot(g.sQ,b.Lt));var p=Math.acos(k.dot(g.direction,b.Lt));g.WP=Math.floor(a/.025)!=Math.floor(p/.025)?!0:!1}k.copy(g.direction,g.sQ)}}};b4w.module.__obj_util=function(a,t){function p(a){a={type:a,Me:0,D:P.wo(),GD:P.wo(),pivot:new Float32Array(3),Hc:new Float32Array(3),Lm:0,Mm:0,AG:!1,xA:!1,sm:null,fk:0,yn:!1,We:I.create(),use_panning:!1,xb:0,Ys:1,Xs:1,Zs:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,oe:!1,dof_object:null,yc:null,ib:null,Ub:null,he:null,ge:null,Se:null,Nj:!0,ek:{an:1,bn:1,cn:0},Le:-1,te:-1,Kc:new Float32Array(4),Vh:0,Qh:0,nl:!1,Av:new Float32Array(3),
UA:new Float32Array(3),nh:0,mh:Infinity,tl:0,ul:0,cf:!1,Vf:!1,ze:!1,tf:!1,Te:!1,xe:!1,we:!1,hj:"",zf:!1,df:!1,kd:!1,ci:!1,IO:!1,kn:!1,pB:!1,zd:!1,oB:!1,qB:!1,Om:!1,Br:!1,Tu:!1,Up:0,Og:0,Pg:0,qg:0,pg:0,kg:0,vl:"",If:{LG:"",KG:"",tH:""},jo:!1,sy:new Float32Array(3),Kh:!1,Xt:!1,Zt:"",Yt:!1,ug:0,rD:0,sD:0,$i:0,Ko:!1,Fd:!1,$f:!1,yh:[],Rm:!1,Ik:!1,Gi:1,Cq:0,Bq:1,Hk:null,aj:!1,ko:new Int8Array([-1,-1]),os:[],YA:[],nC:[],ve:null,sf:null,Ce:null,wf:null,zn:null,gn:null,eh:null,Aj:null,Qv:null,Qt:null,Pt:null,
Lk:A.Hf(),Ca:A.Hf(),Ki:A.Hf(),Bc:A.Gy(),$e:A.Gy(),Kb:A.xu(),nm:A.xu(),Id:A.My(),lL:A.My(),Wt:A.Q0(),Ut:A.O0(),Vt:A.P0(),gk:0};I.copy(O.ic,a.We);return a}function c(a){return{vb:a,wA:!1,da:[],dh:[],hk:[],Wk:null,yI:[],yv:0,eQ:!1,oa:[],PR:[]}}function b(a){if(!(a instanceof Object))return a;var c=null,e=null,g=null,k=null,h=null,m=null;a.wa&&(c=a.wa,a.wa=null);a.Ig&&(e=a.Ig,a.Ig=null);a.jg&&(g=a.jg,a.jg=null);a.Fb&&(k=a.Fb,a.Fb=null);a.Gb&&(h=a.Gb,a.Gb=null);a.ag&&(m=a.ag,a.ag=null);var x;x=a.constructor;
switch(x){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:x=new x(a);break;case Array:x=new x(a.length);for(var q=0;q<a.length;q++)x[q]=b(a[q]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:x=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:x=null;break;case Function:x=a;break;default:for(q in x=new x,a)x[q]=b(a[q])}c&&(x.wa=c,a.wa=
c);e&&(x.Ig=e,a.Ig=e);g&&(x.jg=g,a.jg=g);k&&(x.Fb=k,a.Fb=k);h&&(x.Gb=h,a.Gb=h);m&&(x.ag=O.wm(),a.ag=m);return x}function k(a,b){A.Hj(b,a.Ca);A.Kq(a.Ca,a.D,a.Ki)}function g(a,b,c){a.Bc=A.zL(b,c);A.ly(a.Bc,a.D,a.$e)}function M(a,b,c,e,g,k){a.Kb=A.tE(b,c,e,k);I.scale(a.Kb.ab,g[0],a.Kb.ab);I.scale(a.Kb.eb,g[1],a.Kb.eb);I.scale(a.Kb.fb,g[2],a.Kb.fb);A.zE(a.Kb,a.D,a.nm)}function m(a,b,c,e){a.Wt=A.oL(b,e);a.Ut=A.mL(c,e);a.Vt=A.nL(b,e)}function z(a,b,c,e,g,k){a.Id=A.p3(k,b,c,e,g);A.AE(a.Id,a.D,a.lL)}function C(a,
b,c){A.Kq(a.Cb.Ef,b,c.Ef);a.Gn&&A.zE(a.Cb.ig,b,c.ig);A.ly(a.Cb.Ff,b,c.Ff)}function h(a,b){for(var c=a.T,e=0;e<c.length;e++){var g=c[e];if(g.vb==b)return g}return null}function e(a){return a.fn?a.parent:a.parent?e(a.parent):null}var A=t("__boundings"),q=t("__config"),P=t("__tsr"),O=t("__util"),I=t("__vec3"),u=t("__vec4"),J=q.L;a.$D=Infinity;a.Qq=p;a.QE=function(a){var b=p(a.type);b.Me=a.Me;P.copy(a.D,b.D);P.copy(a.GD,b.GD);I.copy(a.pivot,b.pivot);I.copy(a.Hc,b.Hc);b.Lm=a.Lm;b.Mm=a.Mm;b.AG=a.AG;b.xA=
a.xA;a.sm&&(b.sm=I.clone(a.sm));b.fk=a.fk;b.yn=a.yn;I.copy(a.We,b.We);b.use_panning=a.use_panning;b.xb=a.xb;b.Ys=a.Ys;b.Xs=a.Xs;b.Zs=a.Zs;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.oe=a.oe;b.dof_object=a.dof_object;b.yc=O.Y(a.yc);b.ib=O.Y(a.ib);b.Ub=O.Y(a.Ub);b.he=O.Y(a.he);b.ge=O.Y(a.ge);
b.Se=a.Se;b.Nj=a.Nj;b.ek.an=a.ek.an;b.ek.bn=a.ek.bn;b.ek.cn=a.ek.cn;b.Le=a.Le;b.te=a.te;b.Kc=a.Kc;b.Vh=a.Vh;b.Qh=a.Qh;b.nl=a.nl;I.copy(a.Av,b.Av);I.copy(a.UA,b.UA);b.nh=a.nh;b.mh=a.mh;b.tl=a.tl;b.ul=a.ul;b.cf=a.cf;b.Vf=a.Vf;b.ze=a.ze;b.tf=a.tf;b.Te=a.Te;b.xe=a.xe;b.we=a.we;b.hj=a.hj;b.zf=a.zf;b.df=a.df;b.kd=a.kd;b.ci=a.ci;b.kn=a.kn;b.pB=a.pB;b.zd=a.zd;b.oB=a.oB;b.qB=a.qB;b.Om=a.Om;b.Br=a.Br;b.Tu=a.Tu;b.Up=a.Up;b.Og=a.Og;b.Pg=a.Pg;b.qg=a.qg;b.pg=a.pg;b.kg=a.kg;b.vl=a.vl;b.If=a.If;b.jo=a.jo;I.copy(a.sy,
b.sy);b.Kh=a.Kh;b.Xt=a.Xt;b.Zt=a.Zt;b.Yt=a.Yt;b.ug=a.ug;b.rD=a.rD;b.sD=a.sD;b.$i=a.$i;b.Ko=a.Ko;b.Fd=a.Fd;b.$f=a.$f;b.yh=O.Y(a.yh);b.Rm=a.Rm;b.Ik=a.Ik;b.Gi=a.Gi;b.Cq=a.Cq;b.Bq=a.Bq;b.ko.set(a.ko);b.os=O.Y(a.os);b.YA=O.Y(a.YA);b.nC=O.Y(a.nC);b.ve=O.Y(a.ve);b.sf=O.Y(a.sf);b.Ce=O.Y(a.Ce);b.wf=O.Y(a.wf);b.eh=O.Y(a.eh);b.Aj=O.Y(a.Aj);b.Qv=O.Y(a.Qv);b.Qt=O.Y(a.Qt);b.Pt=O.Y(a.Pt);A.Hj(a.Lk,b.Lk);A.Hj(a.Ca,b.Ca);A.Hj(a.Ki,b.Ki);A.um(a.Bc,b.Bc);A.um(a.$e,b.$e);A.Nq(a.Kb,b.Kb);A.Nq(a.nm,b.nm);A.SX(a.Ut,b.Ut);
A.UX(a.Wt,b.Wt);A.TX(a.Vt,b.Vt);b.gk=a.gk;return b};a.zu=function(a,b,c){c||(c=a);return{name:a,dd:O.Ez(),Rf:c,type:b,Ec:[],Pm:!0,Yn:null,oh:{Tr:[],Yo:[]},ea:!1,mv:!1,Lw:!1,$O:!1,A:null,Cc:null,ra:null,xd:null,ay:null,anchor:null,$q:null,ZA:null,Sy:null,T:[],Fd:[],af:O.wm(),VE:O.wm(),Ba:[],$v:[],Pf:[],Aq:[],kj:null,Dp:[],parent:null,fn:!1,Jv:"",yD:null,xB:null,Ps:!1,Tb:"",Dy:"AUTO",wg:!1,ml:!1,ap:!1,wE:!1,N:null,S:null,Th:null,Kg:null,cr:null,JL:null,AH:[],Sd:{Mv:"NO_COLLISION",uk:!1,bT:!1,hi:0,gT:0,
fT:0,NM:0,QQ:0,D1:!1,E1:!1,F1:!1,G1:!1,H1:!1,I1:!1,Fj:0,Ej:0,Gj:0,kJ:!1,zy:"BOX",Kw:!1},hQ:{$C:0,sH:0,uh:0,MH:0},co:0,Bo:[],jH:!1,VP:!1,Bv:[]}};a.Aca=c;a.vu=function(a){return a instanceof Array?a.slice():a};a.wu=b;a.ea=function(a){return a.ea};a.Zo=function(a){return"MESH"==a.type&&a.ea};a.Yx=function(a,b){a.T.push(c(b))};a.$g=function(a,b,c){var e=a.A;a=h(a,b);a.da.push(c);b=A.SO();C(c,e.D,b);a.dh.push(b)};a.OS=function(a,b){var c=a.A,e=Math.max(Math.abs(b.max_x),Math.abs(b.min_x)),h=Math.max(Math.abs(b.max_y),
Math.abs(b.min_y)),q=Math.max(Math.abs(b.max_z),Math.abs(b.min_z)),q=Math.sqrt(e*e+h*h+q*q),e=Math.sqrt(e*e+h*h),h=A.Hf();h.max_x=h.max_y=h.max_z=q;h.min_x=h.min_y=h.min_z=-q;k(c,h);g(c,q,[0,0,0]);M(c,[1,0,0],[0,1,0],[0,0,1],[q,q,q],[0,0,0]);a.ea?m(c,e,e,h):z(c,[1,0,0],[0,1,0],[0,0,1],[q,q,q],[0,0,0])};a.T5=function(a,b,c){var e=a.A,l=c.bs_rad,h=c.bc_rad,q=c.bs_cen,x=c.be_cen,y=c.caxis_x,u=c.caxis_y,n=c.caxis_z,f=c.be_ax,p=c.rbb.rbb_c;c=c.rbb.rbb_s;k(e,b);g(e,l,q);b=a.ea;M(e,b?y:[1,0,0],b?u:[0,1,
0],b?n:[0,0,1],f,x);a.ea?m(e,h,h,e.Ca):z(e,y,u,n,c,p)};a.U5=function(a,b,c){for(var e=a.A,l=b.max_x-b.min_x,h=b.max_y-b.min_y,q=b.max_z-b.min_z,x=(b.max_x+b.min_x)/2,y=(b.max_y+b.min_y)/2,u=(b.max_z+b.min_z)/2,n=x,f=u,p=Math.max(l,Math.max(h,q))/2,d=Math.max(l,q)/2,A=[x/(l?l:1),y/(h?h:1),u/(q?q:1)],B=.5,D=0;D<c.length;D++)for(var r=c[D],C=0;C<r.length;C+=3){var t=r[C],K=r[C+1],O=r[C+2],I=Math.sqrt((x-t)*(x-t)+(y-K)*(y-K)+(u-O)*(u-O));if(I>p)var P=x-p*(t-x)/I,J=y-p*(K-y)/I,I=u-p*(O-u)/I,x=(P+t)/2,
y=(J+K)/2,u=(I+O)/2,p=Math.sqrt((x-t)*(x-t)+(y-K)*(y-K)+(u-O)*(u-O));J=Math.sqrt((n-t)*(n-t)+(f-O)*(f-O));J>d&&(P=n-d*(t-n)/J,I=f-d*(O-f)/J,n=(P+t)/2,f=(I+O)/2,d=Math.sqrt((n-t)*(n-t)+(f-O)*(f-O)));t/=l?l:1;K/=h?h:1;O/=q?q:1;I=Math.sqrt((A[0]-t)*(A[0]-t)+(A[1]-K)*(A[1]-K)+(A[2]-O)*(A[2]-O));I>B&&(P=A[0]-B*(t-A[0])/I,J=A[1]-B*(K-A[1])/I,I=A[2]-B*(O-A[2])/I,A[0]=(P+t)/2,A[1]=(J+K)/2,A[2]=(I+O)/2,B=Math.sqrt((A[0]-t)*(A[0]-t)+(A[1]-K)*(A[1]-K)+(A[2]-O)*(A[2]-O)))}c=l?l*A[0]:b.max_x;n=h?h*A[1]:b.max_y;
A=q?q*A[2]:b.max_z;l*=B;h*=B;q*=B;k(e,b);g(e,p,[x,y,u]);M(e,[1,0,0],[0,1,0],[0,0,1],[l,h,q],[c,n,A]);a.ea?m(e,d,d,e.Ca):z(e,[(e.Ca.max_x-e.Ca.min_x)/2,0,0],[0,(e.Ca.max_y-e.Ca.min_y)/2,0],[0,0,(e.Ca.max_z-e.Ca.min_z)/2],[1,1,1],[(e.Ca.max_x+e.Ca.min_x)/2,(e.Ca.max_y+e.Ca.min_y)/2,(e.Ca.max_z+e.Ca.min_z)/2])};a.TS=C;a.uda=function(a,b){for(var c=a.T,e=0;e<c.length;e++)if(c[e].vb==b){c.splice(e,1);break}};a.La=h;a.NS=function(a,b){for(var c=0;c<a.length;c++)u.copy(b,a[c].A.Kc)};a.bI=function(a,b,c){for(var e=
0;e<a.T.length;e++){var g=a.T[e];c&&g.vb!=c||(g.wA=b)}};a.VQ=function(a,b){a.da.splice(b,1);a.dh.splice(b,1)};a.Wz=function(a,b){for(var c=[],e=b?J.NP-1:J.NP,g=0;g<a.length;g++){var k=a[g];k.xd.xN&&c.length<e&&c.push(k)}return c.length?c:a[0]?[a[0]]:[]};a.Z1=function(a,b){P.identity(b.D);b.sm=null;a.A=b};a.OL=function(a,b){if(b.b4w_enable_soft_particles&&0<b.b4w_particles_softness){var c=b.material-1,e=a.Ec;if(0<=c&&c<e.length&&("ADD"==e[c].tb||"ALPHA"==e[c].tb||"ALPHA_SORT"==e[c].tb))return!0}return!1};
a.AX=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=a[b].da,e=0;e<c.length;e++)for(var g=c[e].qb.Oi,k=0;k<g.length;k++){var h=g[k];if("USE_MODEL_TSR_INVERSE"==h[0]&&"1"==h[1])return!0}return!1};a.sN=function(a,b){return a+"*"+b};a.bO=function(a){return a.fn?null:a.parent};a.Rj=e;a.UF=function(a,b){for(var c=[],g=0;g<b.length;g++){var k=b[g];e(k)==a&&c.push(k)}return c};a.aG=function(a){return a.A.Me};a.mf=function(a){return"MESH"===a.type};a.rr=function(a){return"ARMATURE"===a.type};a.Sm=
function(a){return"SPEAKER"===a.type};a.mb=function(a){return"CAMERA"===a.type};a.ur=function(a){return"LAMP"===a.type};a.sr=function(a){return"EMPTY"===a.type};a.nv=function(a){return"LINE"===a.type};a.pl=function(a){return"WORLD"===a.type}};b4w.module.__particles=function(a,t){function p(){A.K("_rand() undefined")}function c(a,b){return{name:a,sB:b,time:0,CB:-1,Rs:!1,Oq:1,Ia:0,ub:0,ZC:0,wv:0,KA:0,be:0,hi:0,Lr:0,cA:0,cl:0,Kf:0,FD:0,size:0,Wx:0,Vx:0,By:0,Ay:new Float32Array(16),gB:!1,positions:null,Rv:null,UC:null,zw:null,Uq:null,Fu:null,hh:null,rB:null,XC:0,YC:0}}function b(a,b,c,g,k,h){var l=a.Uq,m=a.hh,q=a.time;a=a.CB;for(var v=0;v<l.length;v+=4){var n=l[v];if(q>a&&q>=n&&n>a||q<a&&(n>a||q>=n))for(n=0;8>n;n++)m[8*v+n]=g[n],I[n]=g[n];
else for(n=0;8>n;n++)I[n]=m[8*v+n];n=u;n[0]=b[3*v];n[1]=b[3*v+1];n[2]=b[3*v+2];e.Mc(n,I,n);k[3*v]=n[0];k[3*v+1]=n[1];k[3*v+2]=n[2];var f=z.Po(c,v,O);z.RP(f,I,f);z.mk(h,f,v);for(n=1;4>n;n++)k[3*(v+n)]=k[3*v],k[3*(v+n)+1]=k[3*v+1],k[3*(v+n)+2]=k[3*v+2],z.mk(h,f,v+n)}}function k(a){a?(A.O4(a),p=function(){return A.V2()}):p=function(){return Math.random()}}var g=t("__config"),M=t("__batch"),m=t("__geometry"),z=t("__tbn"),C=t("__textures"),h=t("__time"),e=t("__tsr"),A=t("__util"),q=t("__vec3"),P=g.L,O=
z.create(),I=new Float32Array(8),u=new Float32Array(3),J=[];a.fM=function(a){var b=c(a.name,a.type);b.time=a.time;b.CB=a.CB;b.Rs=a.Rs;b.Oq=a.Oq;b.Ia=a.Ia;b.ub=a.ub;b.ZC=a.ZC;b.wv=a.wv;b.KA=a.KA;b.be=a.be;b.hi=a.hi;b.Lr=a.Lr;b.cA=a.cA;b.cl=a.cl;b.Kf=a.Kf;b.FD=a.FD;b.size=a.size;b.Wx=a.Wx;b.Vx=a.Vx;b.By=a.By;b.Ay.set(a.Ay);b.gB=a.gB;b.positions=A.Y(a.positions);b.Rv=A.Y(a.Rv);b.UC=A.Y(a.UC);b.zw=A.Y(a.zw);b.Uq=A.Y(a.Uq);b.Fu=A.Y(a.Fu);b.hh=A.Y(a.hh);b.rB=A.Y(a.rB);b.XC=a.XC;b.YC=a.YC;return b};a.update=
function(){for(var a=0;a<J.length;a++)for(var c=J[a],e=c.T,g=0;g<e.length;g++)for(var k=c,h=e[g].da,m=0;m<h.length;m++){var q=h[m],u=q.Ra;u&&u.Rs&&!q.Uh&&(b(u,u.positions,u.UC,k.A.D,u.Rv,u.zw),u.gB=!0)}};a.mH=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=a[b].da,e=0;e<c.length;e++)if(c[e].Ra)return!0;return!1};a.fda=function(a,b){for(var c=a.T,e=0;e<c.length;e++)for(var g=c[e].da,k=0;k<g.length;k++){var h=g[k].Ra;if(h&&h.name==b)return!0}return!1};a.dQ=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=
a[b].da,e=0;e<c.length;e++){var g=c[e].Ra;if(g&&"EMITTER"==g.sB)return!0}return!1};a.UW=function(a){return 0<a.particle_systems.length};a.TW=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};a.A0=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};a.uY=function(a,b,e){var g=a.Ra=c(b.name,b.settings.type);g.Ia=b.settings.frame_start;
g.ub=b.settings.frame_end;g.ZC=(g.ub-g.Ia)/h.ee();g.wv=b.settings.lifetime;g.KA=g.wv/h.ee();g.be=b.settings.b4w_cyclic?1:0;g.hi=b.settings.mass;g.Lr=b.settings.normal_factor;g.cA=9.81*b.settings.effector_weights.gravity;g.cl=b.settings.b4w_fade_in/h.ee();g.Kf=b.settings.b4w_fade_out/h.ee();g.FD=b.settings.effector_weights.wind;g.Rs="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var k,l,m;a.fv?(k=e.jr.size,l=e.jr.gv,30>l?(l=.5,m=.9):40>l?(l=.1,m=1):50>l?(l=0,m=.8):(l=0,m=.5)):(k=b.settings.particle_size,
m=l=1);g.size=k;g.Wx=l;g.Vx=m;e.Ch&&"BILLBOARD"==b.settings.render_type&&(M.Uf(a,"NODES",1),M.Uf(a,"PARTICLE_BATCH",1),a.Vj=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&P.Ux&&(b=b[0].texture,k=[],C.$W(b.color_ramp,C.jK,k),k=new Uint8Array(k.map(function(a){return A.pa(255*a,0,255)})),k=C.sM(k,C.jK),M.Ji(a,k,"u_color_ramp_tex",b.name),M.Uf(a,"USE_COLOR_RAMP",1));e=e.Ah;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(e[0]&&
"STRAND"==e[0].texture_coords&&e[0].texture&&"BLEND"==e[0].texture.type&&e[0].texture.use_color_ramp){e=e[0].texture.color_ramp.elements;b=Math.min(4*e.length,a.length);for(k=0;k<b;k+=4)l=e[k/4],a[k]=l.position,a[k+1]=l.color[0],a[k+2]=l.color[1],a[k+3]=l.color[2];g.By=e.length}g.Ay.set(a)};a.v_=function(a,c,e,g){var l=a.Ra,v=g.D;g=e.settings.count;var u=e.settings.frame_start/h.ee(),x=e.settings.frame_end/h.ee(),y=e.settings.lifetime/h.ee(),H=e.settings.lifetime_random,n=e.settings.emit_from,f=e.settings.factor_random;
if(e.settings.use_rotations)var C=e.settings.angular_velocity_mode,d=e.settings.angular_velocity_factor;else C="NONE",d=0;var G=e.settings.b4w_randomize_emission,B=e.settings.b4w_cyclic;l.XC=e.settings.billboard_tilt;l.YC=e.settings.billboard_tilt_random;k(e.seed);var t;c=m.hN(c,["a_position","a_tbn"],null);switch(n){case "VERT":var r=c.sa[0].a_position;t=c.sa[0].a_tbn;e=r.length/3;c=[];for(n=0;n<g;n++){var D=Math.round((e-1)*p());c.push(D);c.push(D);c.push(D);c.push(D)}e=[];for(n=0;n<c.length;n++)e.push(r[3*
c[n]]),e.push(r[3*c[n]+1]),e.push(r[3*c[n]+2]);r=new Float32Array(e);e=z.create(c.length);for(n=0;n<c.length;n++)D=z.Po(t,c[n],O),z.mk(e,D,n);t=e;break;case "FACE":r=[];t=[];A.uA(0,t);e=m.OF(c,g,!1,t);A.uA(0,t);c=m.OF(c,g,!0,t);t=z.create(4*e.length);for(n=0;n<e.length;n++)r.push(e[n][0],e[n][1],e[n][2]),r.push(e[n][0],e[n][1],e[n][2]),r.push(e[n][0],e[n][1],e[n][2]),r.push(e[n][0],e[n][1],e[n][2]),z.mk(t,c[n],4*n),z.mk(t,c[n],4*n+1),z.mk(t,c[n],4*n+2),z.mk(t,c[n],4*n+3);r=new Float32Array(r);break;
case "VOLUME":A.K("Particle emission from volume is not supported");break;default:A.K("Wrong emit from option")}t=[r,t];r=t[0];t=t[1];l.positions=new Float32Array(r);l.UC=new Float32Array(t);l.Rv=new Float32Array(r.length);l.zw=new Float32Array(t.length);c=[];x=(x-u)/g;for(e=0;e<g;e++)n=G?x*e+10*x*(.5-p()):x*e,B||(n+=u),c.push(n),c.push(n),c.push(n),c.push(n);u=new Float32Array(c);l.Uq=new Float32Array(u);l.Fu=new Float32Array(u);if(l.Rs){l.hh=new Float32Array(8*u.length);for(G=0;G<8*u.length;G++)for(B=
0;8>B;B++)l.hh[8*G+B]=v[B];b(l,r,t,v,r,t)}v=m.fi("EMITTER_PARTICLES");G=A.Jj();G.a_position=r;G.a_tbn=t;v.sa[0]=G;a.Mj=m.dx;a=[];for(G=0;G<g;G++)a.push(4*G,4*G+2,4*G+1,4*G,4*G+3,4*G+2);a=new Uint16Array(a);v.Ga=a;v.Ea.a_p_bb_vertex=m.qN(g);v.hb=r.length/3;a=[];H=y*H;for(G=0;G<g;G++)B=H*p(),a.push(y-B),a.push(y-B),a.push(y-B),a.push(y-B);y=v.Ea;H=[];for(G=0;G<g;G++)B=Math.random(),H.push(a[4*G],u[4*G],B),H.push(a[4*G+1],u[4*G+1],B),H.push(a[4*G+2],u[4*G+2],B),H.push(a[4*G+3],u[4*G+3],B);H=new Float32Array(H);
y.a_p_data=H;y=v.Ea;H=[];for(a=0;a<g;a++){u=[p()-.5,p()-.5,p()-.5];q.normalize(u,u);H.push(f*u[0]);H.push(f*u[1]);H.push(f*u[2]);switch(C){case "NONE":H.push(0);break;case "SPIN":case "VELOCITY":H.push(d);break;case "RAND":H.push(2*d*(p()-.5));break;default:A.K("Undefined velocity factor")}u=H.slice(-4);for(G=0;12>G;G++)H.push(u[G%4])}g=new Float32Array(H);y.a_p_vels=g;l.rB=new Float32Array(v.Ea.a_p_data);return v};a.l4=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var l=
g[k].Ra;l&&l.name==b&&!g[k].Uh&&(l.CB=l.time,l.time=c)}};a.M2=function(a){for(var b=a.hb,c=a.sa[0].a_position,e=[],g=[],k=0;k<b;k++)g.push(c[3*k]),e.push(c[3*k+1]),g.push(c[3*k+2]);e=new Float32Array(e);g=new Float32Array(g);a.Ea.a_lf_dist=e;a.Ea.a_lf_bb_vertex=g;return a};a.oea=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var l=g[k].Ra;l&&l.name==b&&(l.size=c)}};a.aea=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var l=
g[k].Ra;l&&l.name==b&&(l.Lr=c)}};a.iba=function(a,b){for(var c=a.T,e=0;e<c.length;e++)for(var g=c[e].da,k=0;k<g.length;k++){var h=g[k].Ra;if(h&&h.name==b)return h.Lr}return 0};a.N3=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var l=g[k],h=l.Ra;if(h&&h.name==b){h.Oq=c;var q=h.Uq;if(1==c)var u=q;else if(0==c)for(var u=h.Fu,n=0;n<u.length;n+=4)u[n]=1E4,u[n+1]=u[n],u[n+2]=u[n],u[n+3]=u[n];else for(var f=4/c,u=h.Fu,x=0,n=0;n<u.length;n+=4)n>=x?(u[n]=q[n],x+=f):
u[n]=1E4,u[n+1]=u[n],u[n+2]=u[n],u[n+3]=u[n];l=l.Pa;if(l.cd.a_p_data){h=h.rB;for(n=0;n<h.length;n+=3)h[n+1]=u[Math.round(n/3)];m.y5(l,"a_p_data",3,h)}}}};a.b6=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var l=g[k].Ra;if(l&&l.Rs)for(var h=0;h<8*l.Uq.length;h++)l.hh[8*h]=b[0],l.hh[8*h+1]=b[1],l.hh[8*h+2]=b[2],l.hh[8*h+3]=b[3],l.hh[8*h+4]=c[0],l.hh[8*h+5]=c[1],l.hh[8*h+6]=c[2],l.hh[8*h+7]=c[3]}};a.S5=function(a,b,c){a.Ea.a_tbn=z.create(4*c);z.identity(a.Ea.a_tbn);
if(b.Kv){for(var e=[],g=0;g<c;g++)e.push(g,g,g,g);a.Ea[b.Kv.name]=new Float32Array(e)}};a.Q5=function(a){-1==J.indexOf(a)&&J.push(a)};a.a3=function(a){a=J.indexOf(a);-1!=a&&J.splice(a,1)};a.Ja=function(){J.length=0}};b4w.module.__physics=function(a,t){function p(a,b){for(var c=a.af,d=0;d<c.length;d++)c[d].Sd.Kw&&b.push(c[d]),p(c[d],b)}function c(a,b,c){for(var d=a.Pc.Ua,e=0;e<d.length;e++)for(var f=d[e].N,g=0;g<f.lg.length;g++){var k=f.lg[g];"ANY"!=k.Tb&&c!=k.Tb||x(k,a,b)}}function b(a,b,c){if(d.wA(a))switch(b){case d.QT:var e=k(a);e.Pc.tT=!0;d.xa(a,d.pV,Date.now()-performance.now(),ka.max_fps,ka.BE?ca.nN:0);break;case d.RT:B.Pd("URANIUM:",c.slice(1));break;case d.MT:B.error(c);break;case d.NT:W.rz.apply(this,
c.slice(1));break;case d.NJ:if(a=g(c.na)){var f=a;a=c.trans;e=c.quat;b=c.bk;var l=c.wj,h=f.N;h.Ry=c.time;c=K.fe(f.A.D);K.ti(a,c,e,h.mF);ja.copy(b,h.bk);ja.copy(l,h.wj)}break;case d.LJ:(a=g(c.GE))&&K.ti(c.trans,1,c.quat,a.S.Tv[c.HH]);break;case d.OT:if(e=g(c[1]))a=c[4],e=e.Th.ky[c[2]],qa.je(e,c[3]),qa.Ll(e,a),qa.W(e);break;case d.UT:if(a=g(c[1]))a.S.speed=c[2];break;case d.JJ:e=k(a);M(e,c.lo,c.mo,c.result,null,null,0);break;case d.KJ:e=k(a);M(e,c.lo,c.mo,c.result,c.ro,c.coll_norm,c.coll_dist);break;
case d.KT:if(a=g(c[1]))a=a.N,a.qo&&a.qo(c[2]);break;case d.ZD:case d.MJ:e=k(a);if(a=e.Pc.hn[c.id])e=g(c.Jq),b==d.ZD?(b=a.callback,b(a.id,c.hit_fract,e,c.hit_time)):(b=c.hit_fract,l=c.hit_time,h=c.hit_pos,f=a.callback,h?f(a.id,b,e,l,h,c.hit_norm):f(a.id,b,e,l));break;case d.TT:v(c.id);break;case d.ST:a=da.indexOf(a);B.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+" ms");break;case d.PT:wa=c[1];break;
case d.LT:a=da.indexOf(a);B.log("Worker: #"+String(a));B.log(c[1]);break;default:B.error("Wrong message: "+b)}}function k(a){for(var b=0;b<da.length;b++)if(da[b]==a)return Z[b]}function g(a){return Ja[a]||null}function M(a,b,c,d,e,f,k){a=a.Pc.Ua;for(var l=0;l<a.length;l++)for(var h=a[l].N,r=0;r<h.lg.length;r++){for(var n=h.lg[r],F=n.en,q=!1,K=0;K<F.length;K++){var B=F[K];if(B[0]===b&&B[1]===c){n.Iv[K]=d;q=!0;break}}q&&(F=m(n),e&&n.xE!=b&&(q=e,K=f,B=k,q[0]+=K[0]*B,q[1]+=K[1]*B,q[2]+=K[2]*B,K[0]*=-1,
K[1]*=-1,K[2]*=-1),n.callback(F,F?n.xE==b?g(c):g(b):null,e,f,k))}}function m(a){a=a.Iv;for(var b=!1,c=0;c<a.length;c++)b=b||a[c];return b}function z(){X.body++;return X.body}function C(a){var b=na.indexOf(a);return-1==b?(na.push(a),na.length-1):b}function h(a,b){return{na:a,type:b,hi:0,zA:!1,on:!0,wg:!1,ml:!1,a1:!1,Cy:null,Tb:"",pu:0,f$:{},lg:[],qo:null,Ry:0,mF:new Float32Array([0,0,0,1,0,0,0,1]),bk:new Float32Array(3),wj:new Float32Array(3),qy:new Float32Array(3),du:new Float32Array(4),Cv:null}}
function e(a,b){switch(a){case "BOX":var c=b.Ca;break;case "CYLINDER":c=b.Wt;break;case "CONE":c=b.Vt;break;case "SPHERE":c=b.Bc;break;case "CAPSULE":c=b.Ut}return c}function A(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);"object"===typeof a.V&&(b.center=
a.V);"number"===typeof a.pb&&(b.radius=a.pb);"number"===typeof a.height&&(b.height=a.height);return b}function q(a,b,c,e,f){var g=K.X(a.A.D),k=K.invert(b.A.D,za),l=new Float32Array(3);K.Mc(g,k,l);switch(b.S.type){case 10:b=b.Kg;a=a.A.Ca;d.xa(f,d.TU,c,l,b.Z4,b.XH,(a.max_z-a.min_z)/2,e);break;case 20:d.xa(f,d.SU,c,l,a.wE)}}function P(a){return a.N&&a.N.Cy}function O(a,b,c,e,f,g,k,l,h,r){var n;X.Cc++;n=X.Cc.toString(16);var m=b.N.na;d.xa(I(m),d.$U,n,a,l,m,c,e,f.N.na,g,k,h,r);b.N.Cy=n}function I(a){for(var b=
0;b<Z.length;b++)for(var c=Z[b].Pc.Ua,d=0;d<c.length;d++)if(c[d].N.na==a)return da[b];return null}function u(a){var b=a.N;if(b=b?0===b.hi?!0:!0===b.zA?!0:!1===b.on?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=K.Wb(a.A.D,fa),c=K.Eb(a.A.D,ba),b=b[0]!=a.N.qy[0]||b[1]!=a.N.qy[1]||b[2]!=a.N.qy[2]||c[0]!=a.N.du[0]||c[1]!=a.N.du[1]||c[2]!=a.N.du[2]||c[3]!=a.N.du[3];if(b){var b=a.N,e=a.A,c=d.YN(d.Ct);c.na=b.na;var f=K.Wb(e.D,c.trans),e=K.Eb(e.D,c.quat);ja.copy(f,b.qy);S.copy(e,b.du);"DYNAMIC"==
b.type&&S.identity(c.quat);d.xa(I(b.na),d.Ct)}a=a.af;for(b=0;b<a.length;b++)u(a[b])}function J(a,b,c,d,e){e=e||new Float32Array(3);a=K.la(a.A.D);e[0]=b;e[1]=c;e[2]=d;ja.transformQuat(e,a,e)}function x(a,b,c){var e=a.en,f=a.Iv,g=a.xE,k=[],l=a.Tb;k||pa.K("At least one destination required");for(var h=0;h<b.Pc.Ua.length;h++){var r=b.Pc.Ua[h];if("ANY"==l||r.N.Tb==l&&"NAVMESH"!=r.N.type)r=r.N.na,k&&-1==k.indexOf(r)&&k.push(r)}for(b=0;b<k.length;b++)l=k[b],g<l&&!D(e,g,l)?(e.push([g,l]),f.push(!1)):g>l&&
!D(e,l,g)&&(e.push([l,g]),f.push(!1));d.xa(c,d.RU,g);d.xa(c,d.ZU,e,a.Cj)}function D(a,b,c){for(var d=0;d<a.length;d++)if(a[d][0]==b&&a[d][1]==c)return!0;return!1}function l(a){a.N&&a.N.qo&&(a=a.N,d.xa(I(a.na),d.lV,a.na),a.qo=null)}function v(a){var b=E(a),c=N(a).Pc;c.hn[a]&&(delete c.hn[a],c.LH.splice(c.LH.indexOf,1),d.xa(b,d.uV,a))}function N(a){for(var b=0;b<Z.length;b++){var c=Z[b];if(c.Pc.hn[a])return c}return null}function E(a){for(var b=0;b<Z.length;b++)if(Z[b].Pc.hn[a])return da[b];return null}
function U(a,b,c){if(b.Ds){a=a.N.na;var e=b.Zq*b.Su,f=b.bu*b.cu,g=-b.Bs*b.Cs*2*Math.PI/b.ww;b.lv&&(g*=-1);switch(b.type){case 10:d.xa(c,d.JV,a,e,f,g);break;case 20:d.xa(c,d.IV,a,e,f,g)}}}function L(a){return a.wg&&"CHASSIS"==a.Kg.Cg}function y(a){return a.wg&&"HULL"==a.Kg.Cg}function H(a){return"NAVMESH"==a.Sd.Mv}function n(a){return a.ap&&"MAIN_BODY"==a.cr.Cg}var f=t("__config"),W=t("__debug"),d=t("__ipc"),G=t("__obj_util"),B=t("__print"),S=t("__quat"),r=t("__scenes"),ha=t("__subscene"),qa=t("__transform"),
K=t("__tsr"),pa=t("__util"),ja=t("__vec3"),ma=t("__version"),aa=t("__navmesh"),ka=f.N,ca=f.L,ea=f.Ke,wa=0,da=[],Z=[],Ja={},R=[],na=["ANY"],X={body:0,Cc:0,DQ:0},fa=new Float32Array(3),ba=new Float32Array(4),za=K.create(),ia=K.create();a.U0=function(a){a.Pc={tT:!1,Ua:[],hn:{},LH:[]};var c=ka.Jw;ea.prevent_caching&&(c+="?v="+ma.get_build_version());B.log("%cLOAD PHYSICS","color: #0a0",ka.Op?"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+ka.max_fps);B.log("%cPHYSICS PATH","color: #0a0",
c);var e=d.hZ(c,!ka.Op);d.EW(e,b);da.push(e);Z.push(a);ka.ping&&setInterval(function(){d.xa(e,d.rV,performance.now())},1E3)};a.DX=function(a){return a.Pc?a.Pc.tT:!0};a.Ja=function(){for(var a=0;a<da.length;a++)d.terminate(da[a]);da.length=0;Z.length=0;Ja={};R.length=0;na=["ANY"];for(var b in X)X[b]=0};a.mm=function(a,b){if(b.Pc){var f;a:{for(var g=0;g<Z.length;g++)if(Z[g]==b){f=da[g];break a}f=void 0}var k=[];a.Sd.Kw&&p(a,k);var l=b.Pc.Ua;if(L(a)||y(a)||a.ml||n(a)||a.Ps){var r=H(a),m;if(r){var u=
z(),v=h(u,"NAVMESH"),F=G.La(a,b).da;v.Cv=null;for(var x=0;x<F.length;x++){var E=F[x];if("PHYSICS"==E.type){v.Cv=aa.f2(E.Pa);break}}m=v}else{var t=f,D=a.A,ha=a.Sd,w=ha.Mv,N=z();if("CAMERA"==a.type)var I=ha.kJ?ha.zy:"BOX",qa=e(I,D),ja=.5,J=0;else if("EMPTY"==a.type)I="EMPTY",qa=null,J=ja=0;else{var I=ha.kJ?ha.zy:"BOX",qa=e(I,D),W=K.fe(D.D);if(1!=W){var X=qa;switch(I){case "BOX":X.min_x*=W;X.max_x*=W;X.min_y*=W;X.max_y*=W;X.min_z*=W;X.max_z*=W;break;case "CYLINDER":case "CONE":case "CAPSULE":X.height*=
W;X.pb*=W;break;case "SPHERE":X.pb*=W}}ja=D.Vh;J=D.Qh}var sa=K.X(D.D),ka=K.la(D.D),fa=ha.uk,M=ha.bT,na=ha.hi,ma=ha.gT,ca=ha.fT,ea=ha.NM,T=ha.QQ,wa=a.Tb,Va=C(wa),Wa=ha.Fj,La=ha.Ej,ab=ha.Gj,ub=D.Bc.pb,pb=A(qa),Ca=a.Dy,Ta;var Xb=I;if(k.length){var Za=[],Fb={};Fb.quat=new Float32Array([0,0,0,1]);Fb.trans=new Float32Array(3);Fb.worker_bounding=pb;Fb.bounding_type=Xb;Za.push(Fb);var mb=K.invert(D.D,za),qb=ba,ic=K.la(D.D);S.invert(ic,qb);for(var jc=0;jc<k.length;jc++){var gb={},fb=k[jc],Sa=fb.Sd.zy,Jb=new Float32Array(4),
Yb=new Float32Array(3),Bc=K.X(fb.A.D),kc=K.la(fb.A.D);K.Mc(Bc,mb,Yb);S.multiply(qb,kc,Jb);gb.trans=Yb;gb.quat=Jb;gb.bounding_type=Sa;gb.worker_bounding=A(e(Sa,fb.A));Za.push(gb)}Ta=Za}else Ta=[];d.xa(t,d.WU,N,sa,ka,w,fa,M,na,ma,ca,ea,T,Va,Wa,La,ab,I,pb,ub,ja,J,Ta,Ca);Ja[N]=a;R.push(a);var Nb=h(N,"BOUNDING");Nb.type=w;Nb.hi=na;Nb.zA=fa;Nb.Tb=wa;Nb.pu=Va;m=Nb}var vb=m;a.N=vb;var $a={Ha:null,N:vb};r||(l.push($a),c(b,f,vb.Tb))}else for(var zb=G.La(a,b).da,Sb=0;Sb<zb.length;Sb++){var rb=zb[Sb],Cc;if(Cc=
"PHYSICS"==rb.type){var uc;a:{for(var vc=b.Pc.Ua,wc=0;wc<vc.length;wc++){var lc=vc[wc].Ha;if(lc&&lc.id==rb.id){uc=!0;break a}}uc=!1}Cc=!uc}if(Cc)if(rb.Be.hb)if(rb.oj&&b.J.Xd){var wb=rb,id=b,Kc=f,bb=id.J.Xd;d.xa(Kc,d.eV,bb.wk);if(wb.x6){var Ab={};Ab.dst_noise_scale0=wb.dst_noise_scale0;Ab.dst_noise_scale1=wb.dst_noise_scale1;Ab.dst_noise_freq0=wb.dst_noise_freq0;Ab.dst_noise_freq1=wb.dst_noise_freq1;Ab.dir_min_shore_fac=wb.dir_min_shore_fac;Ab.dir_freq=wb.dir_freq;Ab.dir_noise_scale=wb.dir_noise_scale;
Ab.dir_noise_freq=wb.dir_noise_freq;Ab.dir_min_noise_fac=wb.dir_min_noise_fac;Ab.dst_min_fac=wb.dst_min_fac;Ab.waves_hor_fac=wb.waves_hor_fac;var jb=bb.waves_height,Tb=bb.waves_length;bb.nn?d.xa(Kc,d.gK,Ab,bb.ns[0],bb.ns[1],bb.ms[0],bb.ms[1],bb.VG,jb,Tb,bb.AI,id.J.zI):d.xa(Kc,d.gK,Ab,0,0,0,0,0,jb,Tb,0,null)}}else{var sb;if(rb.uk){var Dc=a,mc=rb,ac=f,$c=z(),Lc=mc.Be,Uc=Lc.sa[0].a_position,jd=Lc.Ga||null,kd=mc.Tb,ad=C(kd),Ec=mc.Fj,Zb=mc.Ej,bd=mc.Gj,Vc=K.X(Dc.A.D);d.xa(ac,d.bV,$c,Uc,jd,Vc,ad,Ec,Zb,bd);
var cd=h($c,"STATIC_MESH");cd.zA=!0;cd.Tb=kd;cd.pu=ad;sb=cd}else{var Bb=a,Gb=rb,xb=f,nb=z(),Kb=Gb.Be,ld=Kb.sa[0].a_position,Mc=Kb.Ga||null,hb=K.X(Bb.A.D),Nc=Gb.Vh,bc=Gb.Qh,Fc=Gb.Tb,cc=C(Fc);d.xa(xb,d.dV,nb,ld,Mc,hb,Nc,bc,cc,Gb.Fj,Gb.Ej,Gb.Gj);var Wc=h(nb,"STATIC_MESH");Wc.Tb=Fc;Wc.pu=cc;sb=Wc}vb=sb;a.N=vb;$a={Ha:rb,N:vb};l.push($a);c(b,f,vb.Tb)}else B.error("Object "+a.name+" has collision material with no assigned vertices")}if(L(a)||y(a)){var Ub=f,Ob=a.N.na;L(a)?(a.S.type=10,d.xa(Ub,d.XU,Ob,a.S.LI,
a.S.NI,a.S.MI,a.S.tJ,a.S.WG)):y(a)&&(a.S.type=20,d.xa(Ub,d.VU,Ob,a.S.Go,a.S.Rp,a.S.Sp));if(a.S.xp){var Cb=a.S.xp;switch(a.S.type){case 10:q(Cb[0],a,Ob,!0,Ub);q(Cb[1],a,Ob,!0,Ub);q(Cb[2],a,Ob,!1,Ub);q(Cb[3],a,Ob,!1,Ub);break;case 20:for(var xc=0;xc<Cb.length;xc++)q(Cb[xc],a,Ob,!1,Ub)}}U(a,a.S,f)}else if(a.ml){var kb=f,Gc=a.A,nc=a.N,Oc=Gc.Ca.max_z-Gc.Ca.min_z,Hb=nc.na,Lb=a.JL,yc=Lb.v6,oc=Lb.t3,tb=Lb.S4,Pb=Lb.j1,yb=Lb.y6,Db=pa.vZ(a);d.xa(kb,d.YU,Hb,Db,Oc,yc,oc,tb,Pb,yb);nc.ml=!0}else if(n(a)){var Ra=
f,pc=a.N.na;d.xa(Ra,d.aV,pc,a.Th.Go,a.Th.Rp,a.Th.Sp);if(a.Th.ky)for(var Qb=a.Th.ky,dc=0;dc<Qb.length;dc++){var db=Qb[dc],Vb=K.X(db.A.D),zc=K.invert(a.A.D,za),ib=new Float32Array(3);K.Mc(Vb,zc,ib);d.xa(Ra,d.UU,pc,ib,db.wE)}a.N.a1=!0}for(Sb=0;Sb<R.length;Sb++){var Pc=R[Sb];if(Pc.N){var Hc=Pc;if(!P(Hc))for(var qc=0;qc<Hc.AH.length;qc++){var Rb=Hc.AH[qc],Qc=Rb.target,dd=Rb.B2;if(Qc.N){var ed=new Float32Array([Rb.C2,Rb.D2,Rb.E2]),Ib=pa.bl(new Float32Array([Rb.ab,Rb.eb,Rb.fb]),new Float32Array(4));"HINGE"==
dd&&S.rotateY(Ib,Math.PI/2,Ib);var Ac=K.identity(za),Ac=K.Ad(ed,Ac),Ac=K.Gc(Ib,Ac),Ad=K.multiply(Hc.A.D,Ac,za),ec=K.invert(Qc.A.D,ia),eb=K.multiply(ec,Ad,ec),fc=K.X(eb),Wb=K.la(eb),Xa=Rb,lb={};lb.use_limit_x=Xa.i6;lb.use_limit_y=Xa.j6;lb.use_limit_z=Xa.k6;lb.use_angular_limit_x=Xa.e6;lb.use_angular_limit_y=Xa.f6;lb.use_angular_limit_z=Xa.g6;lb.limit_max_x=Xa.t1;lb.limit_min_x=Xa.x1;lb.limit_max_y=Xa.u1;lb.limit_min_y=Xa.y1;lb.limit_max_z=Xa.w1;lb.limit_min_z=Xa.z1;lb.limit_angle_max_x=Xa.n1;lb.limit_angle_min_x=
Xa.q1;lb.limit_angle_max_y=Xa.o1;lb.limit_angle_min_y=Xa.r1;lb.limit_angle_max_z=Xa.p1;lb.limit_angle_min_z=Xa.s1;O(dd,Hc,ed,Ib,Qc,fc,Wb,lb,null,null)}}}}}};a.g_=g;a.update=function(a,b){for(var c=0;c<da.length;c++){var e=da[c],f=a;e&&d.fP(e)&&d.xa(e,d.KV,f,b);for(var g=0;g<R.length;g++){var k=R[g],l=k.N;if(l.on&&l.Ry){var h=d.fP(e)?f-l.Ry:performance.now()/1E3-l.Ry,h=Math.min(h,10/ka.max_fps),h=h-1/ka.max_fps;ca.g2&&(h=0);var n=za;K.W0(l.mF,h,l.bk,l.wj,za);qa.nk(k,n);qa.W(k);u(k);if(k.S)for(var l=
k,h=l.S.xp,n=l.A.D,m=za,q=0;q<h.length;q++){var B=h[q];K.multiply(n,l.S.Tv[q],m);qa.nk(B,m);qa.W(B)}k.S&&k.S.Ds&&(m=k,h=m.S,l=h.Ds)&&(q=m.S.cS,K.multiply(m.A.D,m.S.dS,l.A.D),n=fa,K.Ud(q,m.A.D,n),m=ba,S.setAxisAngle(n,-h.Bs*h.Cs*2*Math.PI,m),h=K.la(l.A.D),S.multiply(m,h,h),qa.W(l));k.S&&k.S.EI&&(m=k,h=m.S,l=h.EI)&&(q=m.S.YR,K.multiply(m.A.D,m.S.ZR,l.A.D),n=fa,K.Ud(q,m.A.D,n),m=ba,q=Math.abs(h.speed)*h.vw,q>h.Fr&&(q=h.Fr),S.setAxisAngle(n,-q,m),h=K.la(l.A.D),S.multiply(m,h,h),S.normalize(h,h),qa.W(l));
k.S&&k.S.OI&&(n=k,l=n.S,k=l.OI)&&(m=n.S.nS,K.multiply(n.A.D,n.S.oS,k.A.D),h=fa,K.Ud(m,n.A.D,h),n=ba,S.setAxisAngle(h,-Math.abs(l.Zq)*l.Gu,n),l=K.la(k.A.D),S.multiply(n,l,l),S.normalize(l,l),qa.W(k))}}d.K2(e);e=Z[c];(f=e.J.Xd)&&0<f.waves_height&&(e=r.dc(e,ha.Nb),f=ja.length(e.qj)||1,d.xa(da[c],d.HV,e.time*f))}};a.C_=function(){return Z[0]};a.pause=function(){for(var a=0;a<da.length;a++)d.xa(da[a],d.qV)};a.resume=function(){for(var a=0;a<da.length;a++)d.xa(da[a],d.vV)};a.bN=function(a){(a=a.N)||pa.K("No object physics");
if(!a.on){var b=a.na,c=I(b);a.on=!0;d.xa(c,d.oV,b)}};a.xF=function(a){(a=a.N)||pa.K("No object physics");if(a.on){var b=a.na,c=I(b);a.on=!1;d.xa(c,d.nV,b)}};a.QB=function(a){return!!a.Pc};a.Aa=function(a){return!!a.N};a.EO=function(a){return(a=a.N)&&a.on&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.hi&&0==a.zA?!0:!1};a.pG=function(a){return(a=a.N)&&a.on?!0:!1};a.jI=function(a,b,c,e){a=a.N.na;d.xa(I(a),d.GV,a,b,c,e)};a.z0=P;a.VK=O;a.bM=function(a){a=a.N;d.xa(I(a.na),d.tV,a.Cy);a.Cy=null};a.wQ=function(b,
c,d,e,f,g){c=K.ti(c,1,d,za);f=K.ti(f,1,g,ia);K.invert(c,c);K.multiply(f,c,c);qa.Im(e,f);K.multiply(f,c,c);qa.nk(b,c);qa.W(b);e=K.X(b.A.D);f=K.la(b.A.D);a.cC(b,e,f)};a.cC=function(a,b,c){var e=a.N,f=d.YN(d.Ct),g=K.Wb(a.A.D,f.trans);a=K.Eb(a.A.D,f.quat);K.ti(g,1,a,e.mF);f.na=e.na;ja.copy(b,f.trans);S.copy(c,f.quat);d.xa(I(e.na),d.Ct)};a.$=u;a.$K=function(a,b,c,e){var f=fa;J(a,b,c,e,f);a=a.N.na;b=Math.abs(0);c=Math.abs(0);e=Math.abs(0);var g=Math.abs(f[0]),k=Math.abs(f[1]),l=Math.abs(f[2]);f[0]=g?f[0]/
g*Math.max(g,b):0;f[1]=k?f[1]/k*Math.max(k,c):0;f[2]=l?f[2]/l*Math.max(l,e):0;d.xa(I(a),d.iK,a,f[0],f[1],f[2])};a.aL=function(a,b,c,e){a=a.N.na;d.xa(I(a),d.iK,a,b,c,e)};a.qE=function(a,b,c,e,f){var g=fa;f?(g[0]=b,g[1]=c,g[2]=e):J(a,b,c,e,g);a=a.N.na;d.xa(I(a),d.fV,a,g[0],g[1],g[2])};a.ZK=function(a,b,c,e){var f=fa;J(a,b,c,e,f);a=a.N.na;d.xa(I(a),d.hV,a,f[0],f[1],f[2])};a.YQ=function(a,b,c,e){a=a.N.na;d.xa(I(a),d.wV,a,b,c,e)};a.fI=function(a,b,c){a=a.N.na;d.xa(I(a),d.zV,a,b,c)};a.UB=function(a,b){var c=
a.N.na;d.xa(I(c),d.AV,c,b)};a.eR=function(a,b){var c=a.N.na;d.xa(I(c),d.FV,c,b)};a.dR=function(a,b){var c=a.N.na;d.xa(I(c),d.CV,c,b)};a.aR=function(a,b){var c=a.N.na;d.xa(I(c),d.xV,c,b)};a.HL=function(a){a=a.N.na;d.xa(I(a),d.jV,a)};a.IL=function(a,b,c){a=a.N.na;d.xa(I(a),d.kV,a,b,c)};a.bR=function(a,b,c){a=a.N.na;d.xa(I(a),d.BV,a,b,c)};a.VB=function(a,b){var c=a.N.na;d.xa(I(c),d.yV,c,b)};a.cR=function(a,b){var c=a.N.na;d.xa(I(c),d.EV,c,b)};a.WB=function(a,b){var c=a.N.na;d.xa(I(c),d.DV,c,b)};a.oE=
function(a,b,c,d){var e=a.N;if(!e.Cv){for(var f=e.na,g=0;g<e.lg.length;g++)if(a=e.lg[g],a.Tb==b&&a.callback==c)return;a={xE:f,Cj:d||!1,Tb:b,callback:c,en:[],Iv:[]};e.lg.push(a);b=I(f);x(a,k(b),b)}};a.NH=function(a,b,c){a=a.N;for(var e=I(a.na),f=k(e),g=0;g<a.lg.length;g++){var l=a.lg[g];if(l.Tb==b&&l.callback==c){if(m(l)){var h=ja.set(0,0,0,fa);l.callback(!1,null,h,h,0)}a.lg.splice(g,1);g--;for(var h=e,l=l.en,r=f.Pc.Ua,n=0;n<r.length;n++)for(var q=r[n].N,K=0;K<q.lg.length;K++)for(var B=q.lg[K],u=0;u<
B.en.length;u++)for(var v=B.en[u],y=0;y<l.length;y++){var A=l[y];v[0]==A[0]&&v[1]==A[1]&&(l.splice(y,1),y--)}l.length&&d.xa(h,d.hK,l)}}};a.pE=function(a,b){a.N&&a.N.qo&&l(a);var c=a.N;d.xa(I(c.na),d.gV,c.na);c.qo=b};a.OE=l;a.Xx=function(a,b,c,e,f,g,l,h,r){var n;X.DQ++;n=X.DQ;a={id:n,na:a?a.N.na:0,from:new Float32Array(b),to:new Float32Array(c),Tb:e,pu:C(e),jL:g,ZW:l,Cj:h,sA:r,callback:f};b=I(a.na)||da[0];c=k(b).Pc;c.hn[n]=a;c.LH.push(a);d.xa(b,d.cV,a.id,a.na,a.from,a.to,a.pu,a.jL,a.ZW,a.Cj,a.sA);
return n};a.OH=v;a.GL=function(a,b,c){var e=E(a),f=N(a).Pc.hn[a];f&&!f.jL&&(f.from.set(b),f.to.set(c),d.xa(e,d.iV,a,b,c))};a.iP=function(a){return N(a).Pc.hn[a]?!0:!1};a.Ws=function(a,b){var c=a.S;c.Zq=b;U(a,c,I(a.N.na))};a.Vs=function(a,b){var c=a.S;c.Bs=b;U(a,c,I(a.N.na))};a.oJ=function(a,b){var c=a.S;c.bu=b;U(a,c,I(a.N.na))};a.xg=L;a.yg=y;a.Lca=H;a.$0=function(a){if(!a.wg)return!1;a=a.Kg.Cg;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};
a.Z0=function(a){return a.wg?"BOB"==a.Kg.Cg?!0:!1:!1};a.b1=function(a){return a.ap?"BOB"==a.cr.Cg?!0:!1:!1};a.kP=function(a){return a.wg&&"STEERING_WHEEL"==a.Kg.Cg?!0:!1};a.jP=function(a){return a.wg&&"SPEEDOMETER"==a.Kg.Cg?!0:!1};a.lP=function(a){return a.wg&&"TACHOMETER"==a.Kg.Cg?!0:!1};a.rO=function(a){return a.S.speed};a.A6=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.CO=function(a){return a.N&&
a.N.ml};a.Hca=n;a.$_=function(){return wa};a.pZ=function(){for(var a=0;a<da.length;a++)d.xa(da[a],d.mV)};a.Ap=function(a){var b=a.N.na;if("BOUNDING"==a.N.type){var c=R.indexOf(a);-1==c&&B.error("Object "+a.name+" doesn't have bounding physics");delete Ja[b];R.splice(c,1)}for(var c=I(b),e=k(c),f=e.Pc.Ua,g=[],h=0;h<f.length;h++)for(var r=f[h].N,n=0;n<r.lg.length;n++)for(var q=r.lg[n],K=0;K<q.en.length;K++){var u=q.en[K],v=q.Iv[K];if(u[0]==b||u[1]==b)q.en.splice(K,1),q.Iv.splice(K,1),K--,v&&!m(q)&&(v=
ja.set(0,0,0,fa),q.callback(!1,null,v,v,0)),g.push(u)}g.length&&d.xa(c,d.hK,g);a.N&&a.N.qo&&l(a);a=e.Pc.Ua;for(e=0;e<a.length;e++)a[e].N.na==b&&(a.splice(e,1),e--);d.xa(c,d.sV,b)};a.B0=function(a){var b=a.Sd;return a.wg||a.ap||a.ml||a.Ps&&!b.uk&&0<b.hi&&("DYNAMIC"==b.Mv||"RIGID_BODY"==b.Mv)}};b4w.module.__ipc=function(a,t){function p(a,b,c){for(var g=0;g<A.length;g+=2)A[g+1]==a&&(e[g+Number(!b)]=c)}function c(a){for(var b=0;b<a.length;b++){var c=a[b],e=0,g;for(g in c){var k=c[g];switch(k.constructor){case Float32Array:e+=k.length;break;case Number:e+=1}}--e;c.len=e}}var b=!0;a.QT=0;a.JJ=1;a.KJ=2;a.KT=3;a.MT=4;a.NT=5;a.OT=6;a.RT=7;a.LJ=8;a.ZD=9;a.MJ=10;a.TT=11;a.NJ=12;a.UT=13;a.ST=14;a.PT=15;a.LT=16;var k=a.JJ,g=a.KJ,M=a.LJ,m=a.ZD,z=a.MJ,C=a.NJ;a.pV=100;a.RU=101;a.SU=102;a.TU=103;a.UU=
104;a.WU=105;a.VU=106;a.XU=107;a.YU=108;a.ZU=109;a.$U=110;a.aV=111;a.bV=112;a.dV=113;a.eV=114;a.sV=115;a.fV=116;a.gV=117;a.hV=118;a.jV=119;a.kV=120;a.lV=121;a.nV=122;a.oV=123;a.qV=124;a.cV=125;a.uV=126;a.iV=127;a.hK=128;a.tV=129;a.vV=130;a.xV=131;a.yV=132;a.zV=133;a.AV=134;a.BV=135;a.CV=136;a.EV=137;a.FV=138;a.GV=139;a.iK=140;a.Ct=141;a.HV=142;a.gK=143;a.IV=144;a.JV=145;a.rV=146;a.mV=147;a.KV=148;a.wV=149;a.DV=150;var h=a.Ct,e=b4w.worker_listeners,A=b4w.worker_namespaces,q={qh:C,na:0,time:0,trans:new Float32Array(3),
quat:new Float32Array(4),bk:new Float32Array(3),wj:new Float32Array(3),len:0},P={qh:M,GE:0,HH:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},O={qh:m,id:0,Jq:0,hit_fract:0,hit_time:0,len:0},I={qh:z,id:0,Jq:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},u={qh:k,lo:0,mo:0,result:0,len:0},J={qh:g,lo:0,mo:0,result:0,ro:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},x={qh:h,na:0,trans:new Float32Array(3),quat:new Float32Array(4),
len:0},D=[q,P,O,I,u,J,x];a.hZ=function(a,c){var g={AA:a?!0:!1,$l:null,Bj:[],Sh:""};if(c){var k=t("__util"),l=t("__container");g.$l={addEventListener:function(a,b){"message"!=a&&k.K("Wrong web worker event");p(g.Sh,g.AA,b)},removeEventListener:function(a){"message"!=a&&k.K("Wrong web worker event");p(g.Sh,g.AA,null)},postMessage:function(a){var b;a:{for(b=0;b<A.length;b+=2)if(A[b+1]==g.Sh){b=e[b+Number(!!g.AA)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<A.length;a+=2)if(A[a+1]==
g.Sh){e.splice(a,2);A.splice(a,2);break}}};if(g.AA){var h=b4w.get_namespace(t),m=k.Gw(h+"_worker");A.push(h);A.push(m);e.push(null);e.push(null);g.Sh=m;(l=l.i_(a))?b?l.addEventListener("load",function(){b4w.require("__bindings",g.Sh)},!1):(b4w.Ja("__bindings",g.Sh),b4w.Ja("__ipc",g.Sh),b4w.require("__bindings",g.Sh)):(l=document.createElement("script"),l.src=a,l.defer="defer",l.async="async",l.addEventListener("load",function(){b=!1;b4w.require("__bindings",g.Sh)},!1),document.head.appendChild(l))}else g.Sh=
b4w.get_namespace(t)}else a?g.$l=new Worker(a):g.$l=self;return g};a.EW=function(a,b){function e(c){if(c.constructor==ArrayBuffer)c=new Float32Array(c);else if(c[0].constructor==ArrayBuffer){for(var l=0;l<c.length;l++)e(c[l]);return}l=c[0]|0;switch(l){case C:var v=q;v.na=c[1]|0;v.time=c[2];v.trans[0]=c[3];v.trans[1]=c[4];v.trans[2]=c[5];v.quat[0]=c[6];v.quat[1]=c[7];v.quat[2]=c[8];v.quat[3]=c[9];v.bk[0]=c[10];v.bk[1]=c[11];v.bk[2]=c[12];v.wj[0]=c[13];v.wj[1]=c[14];v.wj[2]=c[15];break;case M:v=P;v.GE=
c[1]|0;v.HH=c[2]|0;v.trans[0]=c[3];v.trans[1]=c[4];v.trans[2]=c[5];v.quat[0]=c[6];v.quat[1]=c[7];v.quat[2]=c[8];v.quat[3]=c[9];break;case m:v=O;v.id=c[1]|0;v.Jq=c[2]|0;v.hit_fract=c[3];v.hit_time=c[4];break;case z:v=I;v.id=c[1]|0;v.Jq=c[2]|0;v.hit_fract=c[3];v.hit_time=c[4];v.hit_pos[0]=c[5];v.hit_pos[1]=c[6];v.hit_pos[2]=c[7];v.hit_norm[0]=c[8];v.hit_norm[1]=c[9];v.hit_norm[2]=c[10];break;case k:v=u;v.lo=c[1]|0;v.mo=c[2]|0;v.result=!!c[3];break;case g:v=J;v.lo=c[1]|0;v.mo=c[2]|0;v.result=!!c[3];
v.ro[0]=c[4];v.ro[1]=c[5];v.ro[2]=c[6];v.coll_norm[0]=c[7];v.coll_norm[1]=c[8];v.coll_norm[2]=c[9];v.coll_dist=c[10];break;case h:v=x;v.na=c[1]|0;v.trans[0]=c[2];v.trans[1]=c[3];v.trans[2]=c[4];v.quat[0]=c[5];v.quat[1]=c[6];v.quat[2]=c[7];v.quat[3]=c[8];break;default:v=c}b(a,l,v)}c(D);a.$l.addEventListener("message",function(a){e(a.data)},!1)};a.Ja=function(){};a.xa=function(a,b){if(a)switch(b){case C:var c=q,e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.na;e[2]=c.time;e[3]=c.trans[0];e[4]=c.trans[1];
e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];e[10]=c.bk[0];e[11]=c.bk[1];e[12]=c.bk[2];e[13]=c.wj[0];e[14]=c.wj[1];e[15]=c.wj[2];a.Bj.push(e.buffer);break;case M:c=P;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.GE;e[2]=c.HH;e[3]=c.trans[0];e[4]=c.trans[1];e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];a.Bj.push(e.buffer);break;case m:c=O;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.id;e[2]=c.Jq;e[3]=c.hit_fract;e[4]=c.hit_time;a.Bj.push(e.buffer);
break;case z:c=I;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.id;e[2]=c.Jq;e[3]=c.hit_fract;e[4]=c.hit_time;e[5]=c.hit_pos[0];e[6]=c.hit_pos[1];e[7]=c.hit_pos[2];e[8]=c.hit_norm[0];e[9]=c.hit_norm[1];e[10]=c.hit_norm[2];a.Bj.push(e.buffer);break;case k:c=u;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.lo;e[2]=c.mo;e[3]=c.result;a.Bj.push(e.buffer);break;case g:c=J;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.lo;e[2]=c.mo;e[3]=c.result;e[4]=c.ro[0];e[5]=c.ro[1];e[6]=c.ro[2];e[7]=c.coll_norm[0];e[8]=c.coll_norm[1];
e[9]=c.coll_norm[2];e[10]=c.coll_dist;a.Bj.push(e.buffer);break;case h:c=x;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.na;e[2]=c.trans[0];e[3]=c.trans[1];e[4]=c.trans[2];e[5]=c.quat[0];e[6]=c.quat[1];e[7]=c.quat[2];e[8]=c.quat[3];a.Bj.push(e.buffer);break;default:e=[];for(c=1;c<arguments.length;c++)e.push(arguments[c]);a.$l.postMessage(e)}};a.K2=function(a){a&&a.Bj.length&&(a.$l.postMessage(a.Bj),a.Bj.length=0)};a.YN=function(a){switch(a){case C:return q;case M:return P;case m:return O;case z:return I;
case k:return u;case g:return J;case h:return x;default:return null}};a.terminate=function(a){a.$l.terminate();a.$l=null};a.wA=function(a){return!!a.$l};a.fP=function(a){return!!a.Sh}};b4w.module.__scenes=function(a,t){function p(){gb||(gb=c(Sa));return gb}function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.Yg||!c.Yg.length)return c}return null}function b(){fb||Wa.K("No active scene available");return fb}function k(a,b,c){if(!g(a,b,c))return null;c=a.b4w_shadow_settings;var d={};c.csm_resolution>Ta.nc?(d.csm_resolution=Ta.nc,Ga.error("Shadow map texture has unsupported size. Changed to "+Ta.nc+".")):d.csm_resolution=c.csm_resolution;Ca.shadow_blur_samples=Ca.shadow_blur_samples?
Ca.shadow_blur_samples:c.blur_samples;d.B4=c.soft_shadows;a=Ia.Wz(b,Ca.ssao&&a.b4w_enable_ssao);d.self_shadow_polygon_offset=c.self_shadow_polygon_offset;d.self_shadow_normal_offset=c.self_shadow_normal_offset;d.enable_csm=c.b4w_enable_csm&&1==a.length;c.b4w_enable_csm&&1<c.csm_num&&1<a.length&&Ga.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");d.Zi=[];d.$R=[];d.mu=[];d.lu=[];for(b=0;b<a.length;b++)d.Zi.push(a[b].xd.type),d.$R.push(a[b].xd.ts),d.mu.push(a[b].xd.mu),
d.lu.push(a[b].xd.lu),"SPOT"!=d.Zi[b]&&"POINT"!=d.Zi[b]||!d.enable_csm||(Ga.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),d.enable_csm=!1);d.enable_csm?(d.csm_num=c.csm_num,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=c.fade_last_cascade,d.blend_between_cascades=c.blend_between_cascades):
(d.csm_num=1,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=!1,d.blend_between_cascades=!1);return d}function g(a,b,c){if(0!=b.length&&Ca.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var d=!1,e=!1;a=Ca.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<c.length;b++){var f=
c[b];f.b4w_shadow_cast&&(d=!0);f.b4w_shadow_receive&&(e=!0);if((a||d)&&e)return!0}return!1}function M(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].xd.type)return!0;return!1}function m(a){if(!Ca.Wf)return!1;a=da(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.ma.$j&&c.ma.Wf)return!0}return!1}function z(a){for(var b=0;b<a.length;b++)for(var c=a[b].particle_systems,d=0;d<c.length;d++)if(Ia.OL(a[b].Oa,c[d].settings))return!0;return!1}function C(a){for(var b=da(a),c=[],d=0;d<b.length;d++){var e=b[d];if(e.ma.$j){for(var f=
{},g=0;g<a.length;g++)for(var k=a[g],l=k.Oa.Ec,h=0;h<l.length;h++)l[h]==e&&(f.wk=k.location[2]);f.pe=new Float32Array(4);f.pe.set(e.ma.Ho);f.pe[3]=e.ma.xz;e.ma.ea?(f.Ku=!0,f.waves_height=e.ma.waves_height,f.waves_length=e.ma.waves_length,f.dst_noise_scale0=e.ma.dst_noise_scale0,f.dst_noise_scale1=e.ma.dst_noise_scale1,f.dst_noise_freq0=e.ma.dst_noise_freq0,f.dst_noise_freq1=e.ma.dst_noise_freq1,f.dir_min_shore_fac=e.ma.dir_min_shore_fac,f.dir_freq=e.ma.dir_freq,f.dir_noise_scale=e.ma.dir_noise_scale,
f.dir_noise_freq=e.ma.dir_noise_freq,f.dir_min_noise_fac=e.ma.dir_min_noise_fac,f.dst_min_fac=e.ma.dst_min_fac,f.waves_hor_fac=e.ma.waves_hor_fac):(f.Ku=!1,f.waves_height=0,f.waves_length=0);f.fh=e.ma.kz;f.lX=e.ma.Pk;f.kX=e.ma.Ok;f.mX=new Float32Array([.3,.7]);f.nn=null;e=e.Ah;for(g=0;g<e.length;g++)k=e[g].texture,!0===k.b4w_shore_dist_map&&"FILE"==k.image.source&&(f.nn=k.image,f.AI=k.image.size[0],f.VG=k.b4w_max_shore_dist,k=k.b4w_shore_boundings,f.ms=[(k[0]+k[1])/2,(k[2]+k[3])/2],f.ns=[k[0]-k[1],
k[2]-k[3]]);c.push(f)}}if(0<c.length){f=c[0];if(!f.Ku)for(d=0;d<c.length;d++)c[d].Ku&&(f=c[d]);return f}return null}function h(a){function b(a){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d];"GROUP"==e.type&&e.node_group&&b(e.node_group.node_tree);"GROUP"==e.type&&"B4W_REFRACTION"==e.node_tree_name&&(c.refractions=!0);"BSDF_TRANSPARENT"==e.type&&(c.refractions=!0)}}}var c={refractions:!1};a=da(a);for(var d=0;d<a.length;d++){var e=a[d];e.ep&&(c.refractions=!0);e.se&&b(e.se)}return c}function e(a,
b,c){if(Ca.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var d=0,e=!1,f=!1,g=0;g<b.length;g++){var k=b[g];k.A.we&&"CUBE"==k.A.hj&&d++;if(k.$v.length){for(var l=null,h=0;h<a.length;h++)if(a[h]==k){l=h;break}null==l&&a.push(k)}}for(g=0;g<c.length;g++){b=c[g];b.b4w_reflexible&&(e=!0);a:if(b.b4w_reflexible){b=b.Oa.Ec;for(k=0;k<b.length;k++)if(l=b[k].tb,"OPAQUE"!=l&&"CLIP"!=l&&"ALPHA_ANTIALIASING"!=l){b=!0;break a}b=!1}else b=void 0;b&&(f=!0)}return{FQ:a,aQ:d,
Wk:[],kF:[],hk:[],yB:[],oG:e,BO:f}}function A(a,b){var c=a.b4w_sky_settings,d={};d.IQ=c.render_sky||c.procedural_skydome;d.procedural_skydome=c.procedural_skydome;d.use_as_environment_lighting=c.use_as_environment_lighting;d.pn=c.color;d.rayleigh_brightness=c.rayleigh_brightness;d.mie_brightness=c.mie_brightness;d.spot_brightness=c.spot_brightness;d.scatter_strength=c.scatter_strength;d.rayleigh_strength=c.rayleigh_strength;d.mie_strength=c.mie_strength;d.rayleigh_collection_power=c.rayleigh_collection_power;
d.mie_collection_power=c.mie_collection_power;d.mie_distribution=c.mie_distribution;d.Te=c.reflexible;d.xe=c.reflexible_only;!b&&c.procedural_skydome&&Ga.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return d}function q(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.G0=a.hemisphere;b.RW=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;b.dist_factor=a.dist_factor;b.v3=a.samples;return b}function P(a){if(!Ca.bloom||
!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function O(a){var b={};a=a.b4w_motion_blur_settings;b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function I(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b}function u(a){var b=
{};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.Wm=a.max_ray_length;b.sn=a.steps_per_pass;return b}function J(a){var b={};b.dj=a.b4w_outline_color;b.sp=a.b4w_outline_factor;return b}function x(a){var b={};a=a.b4w_glow_settings;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b}function D(a,b){var c=a.light_settings,d={};d.ih=c.environment_energy;
d.Mw=c.use_environment_light;d.AF=c.environment_color;d.re=a.horizon_color.slice(0);d.De=a.zenith_color.slice(0);d.Lp=a.use_sky_paper;d.Kp=a.use_sky_blend;d.Mp=a.use_sky_real;d.uC=null;d.Ep=null;d.mz=null;d.Qe="";b.render_sky&&a.use_nodes&&a.node_tree&&(c=ta.kM(a.node_tree,a.uuid,"MAIN",null),d.Qe=c.id);c=!0;if(d.Mw&&"SKY_TEXTURE"==d.AF&&(!b.procedural_skydome||!b.use_as_environment_lighting)){for(var e=null,f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_environment_lighting&&
!a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];break}e?d.mz=e:c=!1}for(f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];e.texture.image&&(c=!0,d.uC=e,f=Math.min(Ta.ph,Ka.CE(e.texture.image.size[0]/3)),d.Ep={sS:f,tL:e.blend_factor,KO:e.horizon_factor,wT:e.zenith_up_factor,vT:e.zenith_down_factor,color:e.color,Qa:e.default_value,invert:e.invert,aT:e.use_rgb_to_intensity,uL:e.blend_type,WS:e.use_map_blend,XS:e.use_map_horizon,
ZS:e.use_map_zenith_up,YS:e.use_map_zenith_down});break}d.Mw=d.Mw?c:!1;return d}function l(a){var b=a.fog_settings,c={};c.h6=b.use_fog;c.intensity=b.intensity;c.depth=b.depth;c.start=b.start;c.height=b.height;c.c_=b.falloff;c.color=b.use_custom_color?b.color.slice(0):a.horizon_color.slice(0);a=c.color;c.pe=new Float32Array([a[0],a[1],a[2],1/c.depth]);c.tg=new Float32Array([c.intensity,c.depth,c.start,c.height]);return c}function v(a,b){if(!Ca.kd)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;
case "ON":return!0}for(var c=!1,d=!1,e=0;e<b.length;e++){for(var f=b[e],g=f.Oa.Ec,k=0;k<g.length;k++)g[k].qk.yr&&(c=!0);f=f.particle_systems;for(k=0;k<f.length;k++)g=f[k].settings,"HAIR"==g.type&&g.b4w_dynamic_grass&&(d=!0);if(c&&d)return!0}return!1}function N(a,b){if(Xb.outlining_overview_mode)return!0;if(Ca.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.A.kn)return!0;return!1}else return!1}function E(a,
b){if(Xb.outlining_overview_mode)return!0;if(Ca.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.A.zd)return!0;return!1}else return!1}function U(a,b){if(Ca.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)for(var d=b[c].Oa.Ec,e=0;e<d.length;e++)if(ta.NL(d[e]))return!0;return!1}else return!1}function L(a,b){if(Ca.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return b.refractions}else return!1}function y(a){for(var b=0;b<a.length;b++)for(var c=a[b].Oa.Ec,d=0;d<c.length;d++){var e=c[d];if(e.Fl&&"OPAQUE"!=e.tb&&"CLIP"!=e.tb&&"ALPHA_ANTIALIASING"!=e.tb)return!0}return!1}function H(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++){var d=b[c].Oa;if(d.anchor&&d.anchor.Wq)return!0}return!1}}function n(a,b){for(var c=X(a,[T.Nb,T.Gd,T.Fe]),d=0;d<c.length;d++)c[d].ny=
b}function f(a,b,c,e,f,g){for(var k=b.A,l=Ia.La(b,f),h=l.da,r=0;r<h.length;r++){var n=h[r];if(!(n.tf||n.xe||"MAIN"!=n.type&&"NODES_GLOW"!=n.type&&"PARTICLES"!=n.type&&"LINE"!=n.type)&&("OPAQUE"==n.Hb&&"OPAQUE"==e||"BLEND"==n.Hb&&"BLEND"==e||"XRAY"==n.Hb&&"XRAY"==e||"NODES_GLOW"==n.type&&"GLOW"==e)){if(!g&&(d(n,a,b,c,e,f),!Y.Dd(n)))if("DEBUG"===ub.type())Y.$x(n,"error.glslv","error.glslf"),Y.Dd(n);else continue;var m=T.Yj(n,k,l.dh[r]);T.pd(a,m);ga.uo(c,a,n);B(n)}}}function W(a){a.Um.Nw&&Y.Uf(a,"USE_LOD_SMOOTHING",
1)}function d(a,b,c,d,e,f){var g=c.A,k=f.J,l=Ia.La(c,f),h="NO_SHADOWS";c=X(f,[T.$d]);if(c.length&&a.ze){switch(e){case "OPAQUE":h="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":h="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":h="NO_SHADOWS";break;case "SHADOW":h="SHADOW_MASK_GENERATION";break;default:Wa.K("Wrong subscene type")}for(var r=0;r<c.length;r++)Y.fL(a,f.J.Bd)}r="NO_SOFT_SHADOWS";if(k.Bd&&k.Bd.B4)switch(Ca.shadow_blur_samples){case "16x":r="POISSON_X_16";
break;case "8x":r="POISSON_X_8";break;case "4x":r="POISSON_X_4"}c=a.qb;oa.ya(c,"SHADOW_USAGE",h);oa.ya(c,"POISSON_DISK_NUM",r);W(a);a.kd&&(r=ga.Vb(d,T.zk))&&S(a,r,g);G(c,b.H);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.Vj){e=b.Qr;oa.ya(c,"NUM_LIGHTS",e);oa.ya(c,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);oa.ya(c,"REFLECTION_PASS","REFL_PASS_NONE");oa.ya(c,"SSAO_ONLY",0);if(e=k.Xd)oa.ya(c,"WATER_EFFECTS",1),oa.ya(c,"WAVES_HEIGHT",oa.fa(e.waves_height)),oa.ya(c,"WAVES_LENGTH",oa.fa(e.waves_length)),oa.ya(c,
"WATER_LEVEL",oa.fa(e.wk));if(b.fh&&a.fh){oa.ya(c,"CAUSTICS",1);if(r=k.Bd){g=r.Zi;for(r=h=0;r<g.length;r++)"SUN"==g[r]&&(h=r);oa.ya(c,"SUN_NUM",h)}oa.ya(c,"CAUST_SCALE",oa.fa(b.Pk));oa.ya(c,"CAUST_SPEED",oa.fa(b.ry,2));oa.ya(c,"CAUST_BRIGHT",oa.fa(b.Ok))}b=l.Wk;g=l.hk;l=ga.Vb(d,T.Ie);if(-1!==a.Ig.indexOf("u_mirrormap"))oa.ya(c,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.we&&b)k.gj.oG?(Y.Ji(a,b.H.cc,"u_cube_reflection"),oa.ya(c,"REFLECTION_TYPE","REFL_CUBE")):(b.Io=!0,r=ga.Vb(d,T.gm),g=ga.Vb(d,T.vq),
r&&g?(Y.Ji(a,r.H.cc,"u_cube_irradiance"),Y.Ji(a,g.H.cc,"u_cube_r_convolution"),oa.ya(c,"REFLECTION_TYPE","REFL_PBR")):(b=(l=ga.Vb(d,T.Ie))?l.H.cc:b.H.cc,Y.Ji(a,b,"u_cube_reflection"),oa.ya(c,"REFLECTION_TYPE","REFL_CUBE")));else if(a.we&&g)for(r=0;r<g.length;r++)b=g[r].H.cc,Y.Ji(a,b,"u_plane_reflection"),oa.ya(c,"REFLECTION_TYPE","REFL_PLANE");else oa.ya(c,"REFLECTION_TYPE","REFL_NONE");l?a.fz?(b=l.H.cc,Y.Ji(a,b,"u_sky")):l.procedural_skydome&&(a.mg=l.mg,oa.ya(c,"PROCEDURAL_FOG",1)):oa.ya(c,"PROCEDURAL_FOG",
0);b=k.Mn;b.Mw&&(oa.ya(c,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.AF?(b.mz?(l=b.mz.texture,b=Ka.hf(b.mz),Y.Ji(a,b,"u_sky_texture",l.name)):l&&(b=l.H.cc,Y.Ji(a,b,"u_sky_texture")),oa.ya(c,"SKY_TEXTURE",1)):"SKY_COLOR"==b.AF&&oa.ya(c,"SKY_COLOR",1));b=k.uT;b.h6&&(oa.ya(c,"USE_FOG",1),oa.ya(c,"FOG_TYPE",b.c_));a.Dl&&a.Bb?(Ca.Yy&&oa.ya(c,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.Vj||"NODES_GLOW"==a.type?(oa.ya(c,"REFRACTIVE",1),k.refractions?oa.ya(c,"USE_REFRACTION",1):oa.ya(c,"USE_REFRACTION",
0)):k.refractions?oa.ya(c,"REFRACTIVE",1):oa.ya(c,"REFRACTIVE",0),(k.LP.refractions||k.refractions)&&oa.ya(c,"HAS_REFRACT_TEXTURE",1)):(oa.ya(c,"REFRACTIVE",0),oa.ya(c,"USE_REFRACTION",0),oa.ya(c,"USE_REFRACTION_CORRECTION",0));a.oj&&(Ca.Wf&&a.Ww&&ga.Vb(d,T.BJ)?oa.ya(c,"SHORE_SMOOTHING",1):oa.ya(c,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?oa.ya(c,"DYNAMIC",1):oa.ya(c,"DYNAMIC",0));"PARTICLES"==a.type&&oa.ya(c,"COLOR_RAMP_LENGTH",a.Ra.By);if(!a.Uh)for(a=a.wa,d=0;d<a.length;d++)if(b=a[d],
"SCENE"==b.source)for(k=0;k<Sa.length;k++)for(c=Sa[k],e=Sa[k].Yg,l=0;l<e.length;l++)e[l]==b&&Fa.I(Jb,c,f,null)}}function G(a,b){b.type==Oa.Ye||b.type==Oa.Ei||b.type==Oa.Ck?oa.ya(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):oa.ya(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function B(a){8<a.wa.length&&Ga.warn(a.type,"too many textures used - "+a.wa.length+' (max 8), materials "'+a.Dc.join(", ")+'"')}function S(a,b,c){a.Md=b.Md;var d=b.Md[0],e=b.Md[1],f=b.Md[2];c=c.Ca;c=Math.max(c.max_x-c.min_x,c.max_y-c.min_y);f=0==f?
c:Math.max(f,c);b.Md[2]=f;b=b.H;Oa.qR(b,f/2,f/2,-e,-d);Oa.Kl(b,!1);d=a.ll||0;d=0==d?c:Math.max(d,c);a.ll=d}function r(a,b,c,e,f,g){for(var k=b.A,l=Ia.La(b,f),h=l.da,r=0;r<h.length;r++){var n=h[r];if(("MAIN"==n.type||"PARTICLES"==n.type||"LINE"==n.type)&&"REFLECT"==n.Hb&&n.Bb==e){if(a.type==T.Ge||a.type==T.Vg){var m;a:{var q=f.J.gj.hk;for(m=0;m<q.length;m++)for(var K=0;K<q[m].length;K++)if(q[m][K]==a)break a;q=f.J.gj.yB;for(m=0;m<q.length;m++)for(K=0;K<q[m].length;K++)if(q[m][K]==a)break a;m=null}if(m==
k.te)continue}else if(m=la(f,a),m==k.Le)continue;if(!g&&(d(n,a,b,c,"REFLECT",f),m=n.qb,oa.ya(m,"WATER_EFFECTS",0),a.type==T.Ge||a.type==T.Vg?oa.ya(m,"REFLECTION_PASS","REFL_PASS_PLANE"):oa.ya(m,"REFLECTION_PASS","REFL_PASS_CUBE"),oa.ya(m,"TEXTURE_NORM",0),!Y.Dd(n)))if("DEBUG"===ub.type())Y.$x(n,"error.glslv","error.glslf"),Y.Dd(n);else continue;m=T.Yj(n,k,l.dh[r]);T.pd(a,m);ga.uo(c,a,n);B(n)}}}function ha(a){ca(a);var b=fa(a,T.Nb),c=!0,d=a.J.Bd;Fa.ja(a.J.Da,function(e,f){f.type===T.$d&&(K(f,a,b.H,
d,c),c=!1)})}function qa(a){Fa.ja(a.J.Da,function(a,b){b.type===T.uq&&(b.Ju=1)})}function K(a,b,c,d,e){if(0!=a.kb.length){var f=a.H;Va.copy(c.D,f.D);Va.copy(c.Ng,f.ow);if("SUN"===d.Zi[a.xh]||"HEMI"===d.Zi[a.xh]){var g=c.D,k=Cc;xa.C6(k);for(var l=0;l<a.kb.length;l++)for(var h=a.kb[l].Ua,r=0;r<h.length;r++){var n=h[r].Ha,m=h[r].sh;if(n.kd){var q=Va.Eb(g,vb),K=La.transformQuat(Wa.qc,q,Nb),q=-K[0],K=K[1],v=Va.Wb(g,Nb),q=v[0]-n.ll*(1+q)/2,K=v[1]-n.ll*(1-K)/2,m=xa.Kq(n.Cb.Ef,m.D,uc),m=m.max_z-m.min_z,v=
uc;v.min_x=q;v.min_y=K;v.min_z=n.Md[0]-m;v.max_x=q+n.ll;v.max_y=K+n.ll;v.max_z=n.Md[1]+m}else v=m.Ki;l||r?xa.oz(k,v):xa.Hj(v,k)}g=xa.gN(k,Sb);Wa.$r(g,f.pc,g);if(d.enable_csm){b=La.copy(c.Kj[a.Cu],kc);d=ua.invert(c.pc,zb);Wa.$r(b,d,b);Wa.$r(b,f.pc,b);a=c.Du[a.Cu];if(e)for(vc=0,wc=-Infinity,e=2;e<g.length;e+=3)vc=Math.min(vc,g[e]),wc=Math.max(wc,g[e]);e=Cc;e.max_x=b[0]+a;e.max_y=b[1]+a;e.max_z=wc;e.min_x=b[0]-a;e.min_y=b[1]-a;e.min_z=vc}else{c=e=Cc;d=rb;d.set(g);g=Yb/9;k=ua.identity(zb);ua.rotate(k,
g,Wa.qc,k);h=l=-1;for(r=0;10>r;r++){n=xa.sE(d,0,d.length,uc);m=(n.max_x-n.min_x)*(n.max_y-n.min_y);if(-1==l||.1<l-m)l=m,h=r,xa.Hj(n,c);Wa.$r(d,k,d)}c=h*g;0<c&&(d=ua.identity(zb),ua.rotate(d,c,Wa.qc,d),ua.multiply(d,f.pc,f.pc),Va.Wh(f.pc,f.Ng));c=e.max_x-e.min_x;d=e.max_y-e.min_y;c&&d&&(g=Math.abs(c-d)/2,2<c/d?(e.max_y+=g,e.min_y-=g):2<d/c&&(e.max_x+=g,e.min_x-=g));e.max_x+=.005;e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;pa(a,b.J.Da)}Oa.T3(f,e.min_x,e.max_x,e.min_y,e.max_y,
-e.max_z,-e.min_z);Oa.Kl(f,!1)}else"SPOT"!==d.Zi[a.xh]&&"POINT"!==d.Zi[a.xh]||Oa.Kl(f,!1)}}function pa(a,b){for(var c=a.H,d=ga.l0(b,a),e=0;e<d.length;e++){var f=d[e];if(f.type==T.Nb||f.type==T.Wg||f.type==T.Gd||f.type==T.Fh)if(Ca.TA)f.Qw.set(c.Ng,9*a.xh);else{var g=Va.X(c.Ng),k=Va.fe(c.Ng),l=Va.la(c.Ng);ab.set(g[0],g[1],g[2],k,$a);f.Us.set($a,4*a.xh);f.Ts.set(l,4*a.xh)}}}function ja(a,b,c,e,f){for(var g=b.A,k=Ia.La(b,e),l=k.da,h=0;h<l.length;h++){var r=l[h];if("COLOR_ID"==r.type&&(a.type==T.Bf&&"COLOR_ID"==
r.Hb||a.type==T.zi&&"COLOR_ID_XRAY"==r.Hb)){if(!f&&(d(r,a,b,c,"COLOR_ID",e),Y.Uf(r,"USE_OUTLINE",0),!Y.Dd(r)))continue;r=T.Yj(r,g,k.dh[h]);T.pd(a,r)}}}function ma(a,b){aa(a,b);for(var c=0;c<a.af.length;c++)a.af[c].parent==a&&ma(a.af[c],b)}function aa(a,b){a.A.ci=b;if(Ia.ur(a))for(var c=0;c<a.T.length;c++)for(var d=a.T[c],e=X(d.vb,mb),f=0;f<e.length;f++){var g=e[f],k=a.A,l=a.xd,h=d.yv,r=l.Jp&&!k.ci?1:0;g.ip[4*h+3]=r;r=l.Np&&!k.ci?1:0;g.hp[4*h+3]=r;g.Wa=!0}}function ka(a,b){for(var c=X(b,mb),d=a.xd,
e=a.A,f=Ia.La(a,b),g=Va.X(e.D),e=Va.la(e.D),k=0;k<c.length;k++){var l=c[k],h=l,r=a.A,n=a.xd,m=f.yv,q=Va.X(a.A.D),v=n.qu;h.xv.set(n.direction,3*m);$a[0]=q[0];$a[1]=q[1];$a[2]=q[2];$a[3]=n.Jp&&!r.ci?1:0;h.ip.set($a,4*m);$a[0]=v[0];$a[1]=v[1];$a[2]=v[2];$a[3]=n.Np&&!r.ci?1:0;h.hp.set($a,4*m);h.Wa=!0;switch(d.type){case "SUN":l.TC.set(e);l.SC=d.qu;La.copy(d.direction,l.RC);l.type==T.Ie&&l.procedural_skydome&&(l.Jr=d.WP,wa(b,l));break;case "HEMI":case "POINT":case "SPOT":break;default:Ga.error("Unknown light type: "+
d.type+'".')}l=l.kb;for(h=0;h<l.length;h++)for(r=l[h].Ua,n=0;n<r.length;n++)m=r[n].Ha,m.gp&&Y.V3(m,a)}c=fa(b,T.Nb).H;f=f.yI;d=b.J.Bd;for(k=0;k<f.length;k++)l=f[k],Oa.vI(l.H,g,e),K(l,b,c,d,!0),pa(l,b.J.Da)}function ca(a){var b=Pa.xc(a,"LAMP",Pa.Vc),b=Ia.Wz(b,Ca.ssao&&a.b4w_enable_ssao);if(b.length)for(var c=0;c<b.length;c++)for(var d=b[c],e=d.A,f=Va.Wb(e.D,kc),e=Va.Eb(e.D,vb),g=0;g<d.T.length;g++){var k=d.T[g],l=k.yI;if(k.vb==a)for(k=0;k<l.length;k++)Oa.vI(l[k].H,f,e)}}function ea(a){var b=fa(a,T.Ie);
b&&wa(a,b)}function wa(a,b){Ea.wp(b);Ha.$k(b);if(b.Jr)for(var c=X(a,qb),d=0;d<c.length;d++)for(var e=c[d].kb,f=0;f<e.length;f++)for(var g=e[f].Ua,k=0;k<g.length;k++){var l=g[k];l.lc&&(l=l.Ha,Y.qX(l)&&Ha.u5(l))}if(c=fa(a,T.gm))Ea.wp(c),Ha.$k(c);if(c=fa(a,T.vq))Ea.wp(c),Ha.$k(c);if(c=fa(a,T.yJ))Ea.wp(c),Ha.$k(c)}function da(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].Oa.Ec,e=0;e<d.length;e++){var f=d[e];-1==b.indexOf(f)&&b.push(f)}return b}function Z(a,b,c,d){V.gP()&&(b*=window.devicePixelRatio,
c*=window.devicePixelRatio);var e=p();e&&(e=e.J,b*=e.bs,c*=e.bs);b*=a.Ml;c*=a.Nl;d[0]=Math.floor(b);d[1]=Math.floor(c);return d}function Ja(a,b,c){a=Z(a,b,c,Bc);return a[0]>Ta.nc||a[1]>Ta.nc?(Ga.warn("Texture size exceeds platform limits, downscaling"),Math.min(Ta.nc/a[0],Ta.nc/a[0])):1}function R(a,b,c){for(var d=a.J,e=Ia.La(a.Dk,a).oa,f=0!=c?b/c:1,g=0;g<e.length;g++){var k=e[g];Oa.D3(k,f);Oa.Kl(k,!1);d.Bd&&Oa.hJ(k,d.Bd)}if(d.Bd){d.hB=!0;d=X(a,[T.Wg]);for(g=0;g<d.length;g++)d[g].Wa=!0;d=X(a,[T.Gd]);
for(g=0;g<d.length;g++)d[g].Wa=!0}na(a,b,c)}function na(a,b,c){var d=a.J.Da,e=Infinity;ga.Ks(d,function(a){a.Ip&&(e=Math.min(e,Ja(a,b,c)))});ga.Ks(d,function(f,g,k,l){if(f.Ip){var h,r;l&&l.type==T.jm||k.mc&&!f.Zx?(h=b*f.Ml,r=c*f.Nl):(r=Z(f,b,c,Bc),h=r[0]*e,r=r[1]*e);if(g)for(g=0;g<k.rb.length;g++)k.rb[g]==f&&Ka.resize(f.Xa,h,r);else switch(Ka.zr(f.Xa)&&(Ka.resize(f.Xa,h,r),f.Xa.Zf&&(l.HA=f.Xa.QP)),f=k.H,f.width=h,f.height=r,k.type){case T.ot:za(a,{dof_power:k.H.dof_power});break;case T.qt:F(a,{small_glow_mask_width:k.small_glow_mask_width,
large_glow_mask_width:k.large_glow_mask_width});break;case T.jt:ia(a,{blur:k.Fq});break;case T.lK:f.width=f.cc.width;f.height=f.cc.height;break;case T.uq:k=ga.sd(d,k,T.rc);f=ga.sd(d,k,T.rc);r=ga.sd(d,f,T.rc);g=ga.sd(d,r,T.rc);ga.ye(k,1/h,1/h);ga.ye(f,1/h,1/h);ga.ye(r,1/h,1/h);ga.ye(g,1/h,1/h);break;default:ga.ye(k,1/h,1/r)}}})}function X(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];a.J.Da&&Fa.ja(a.J.Da,function(a,b){b.type==e&&c.push(b)})}return c}function fa(a,b){return ga.Vb(a.J.Da,b)}function ba(a){var b=
p();b&&Fa.ja(b.J.Da,function(b,c){var d=c.H;d&&d.type==Oa.Df&&(c.Io=a)})}function za(a,b){var c=X(a,[T.ot]);if(!c.length)return Ga.error("DOF is not enabled on the scene. Check camera settings"),0;for(var d=0;d<c.length;d++){var e=c[d],f=b,g=a,k=e.H.dof_bokeh,l=k?X(g,[T.MD]):[],g=g.J.Da;if("boolean"==typeof f.dof_on&&(e.H.dof_on=f.dof_on,k))for(var h=0;h<l.length;h++)l[h].H.dof_on=f.dof_on;if("number"==typeof f.dof_distance&&(e.H.dof_distance=f.dof_distance,k))for(h=0;h<l.length;h++)l[h].H.dof_distance=
f.dof_distance;if("number"==typeof f.dof_front_start&&(e.H.dof_front_start=f.dof_front_start,k))for(h=0;h<l.length;h++)l[h].H.dof_front_start=f.dof_front_start;if("number"==typeof f.dof_front_end&&(e.H.dof_front_end=f.dof_front_end,k))for(h=0;h<l.length;h++)l[h].H.dof_front_end=f.dof_front_end;if("number"==typeof f.dof_rear_start&&(e.H.dof_rear_start=f.dof_rear_start,k))for(h=0;h<l.length;h++)l[h].H.dof_rear_start=f.dof_rear_start;if("number"==typeof f.dof_rear_end&&(e.H.dof_rear_end=f.dof_rear_end,
k))for(h=0;h<l.length;h++)l[h].H.dof_rear_end=f.dof_rear_end;"number"==typeof f.dof_bokeh_intensity&&(e.H.dof_bokeh_intensity=f.dof_bokeh_intensity,k&&(l=ga.Oz(g,e,T.rc),l[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity,l[1].H.dof_bokeh_intensity=f.dof_bokeh_intensity,l[0]=ga.sd(g,l[0],T.rc),l[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity));if("number"==typeof f.dof_power)if(k){f=f.dof_power;e.H.dof_power=f;var f=f/2,k=e.H.width,h=e.H.height,r=[1/k,0],n=[1/k*.5,1/h*.866],m=[-1/k*.5,1/h*.866],l=ga.Oz(g,
e,T.rc);ga.Td(l[0],f);ga.ye(l[0],m[0],m[1]);ga.Td(l[1],f);ga.ye(l[1],n[0],n[1]);l[0]=ga.sd(g,l[0],T.rc);ga.Td(l[0],f);ga.ye(l[0],r[0],r[1]);e.H.oe&&(l[0]=ga.sd(g,l[0],T.MD),l[0]=ga.sd(g,l[0],T.rc),ga.ye(l[0],1/k,1/h),l[0]=ga.sd(g,l[0],T.rc),ga.ye(l[0],1/k,1/h))}else e.H.dof_power=f.dof_power,l=ga.sd(g,e,T.rc),g=ga.sd(g,l,T.rc),ga.Td(l,e.H.dof_power),ga.ye(l,1/e.H.width,1/e.H.height),ga.Td(g,e.H.dof_power),ga.ye(g,1/e.H.width,1/e.H.height)}}function ia(a,b){var c=X(a,[T.Bx]),d=X(a,[T.jt]);if(!c.length||
!d.length)return Ga.error("Bloom is not enabled on the scene"),0;if("number"==typeof b.key)for(var e=0;e<c.length;e++)c[e].Iq=b.key,c[e].Wa=!0;if("number"==typeof b.edge_lum)for(e=0;e<c.length;e++)c[e].Hq=b.edge_lum,c[e].Wa=!0;if("number"==typeof b.blur)for(e=0;e<d.length;e++){d[e].Fq=b.blur;for(var f=a.J.Da,g=d[e].H.width/.5,k=d[e].H.height/.5,l=ga.Oz(f,d[e],T.rc),h=0;h<l.length;++h){var r=l[h],n=ga.sd(f,r,T.rc),m=g*r.Gq,q=k*r.Gq;ga.Td(r,b.blur);ga.ye(r,1/m,1/q);ga.Td(n,b.blur);ga.ye(n,1/m,1/q)}}if("number"==
typeof b.average_luminance)for(e=0;e<c.length;e++)c[e].$n||(c[e].average_luminance=b.average_luminance,c[e].Wa=!0)}function F(a,b){var c=X(a,[T.qt]);if(!c.length)return Ga.error("Glow is not enabled on the scene"),null;for(var d=0;d<c.length;d++){for(var e=c[d],f=b,g=a.J.Da,k=ga.f0(g,e),l=0;l<k.length;++l){var h=k[l];if(h.type==T.rc&&"GLOW_MASK_LARGE"==h.Hb)var r=h;if(h.type==T.rc&&"GLOW_MASK_SMALL"==h.Hb)var n=h}k=ga.sd(g,r,T.rc);g=ga.sd(g,n,T.rc);"number"==typeof f.small_glow_mask_coeff&&(e.small_glow_mask_coeff=
f.small_glow_mask_coeff,e.Wa=!0);"number"==typeof f.large_glow_mask_coeff&&(e.large_glow_mask_coeff=f.large_glow_mask_coeff,e.Wa=!0);"number"==typeof f.small_glow_mask_width&&(e.small_glow_mask_width=f.small_glow_mask_width,ga.Td(n,f.small_glow_mask_width),ga.ye(n,1/e.H.width,1/e.H.height),n.Wa=!0,ga.Td(g,f.small_glow_mask_width),ga.ye(g,1/e.H.width,1/e.H.height),g.Wa=!0);"number"==typeof f.large_glow_mask_width&&(e.large_glow_mask_width=f.large_glow_mask_width,ga.Td(r,f.large_glow_mask_width),ga.ye(r,
1/e.H.width,1/e.H.height),r.Wa=!0,ga.Td(k,f.large_glow_mask_width),ga.ye(k,1/e.H.width,1/e.H.height),k.Wa=!0)}}function sa(a,b,c){var d=a.J,e=d.Xd;if(!e.Ku)return e.wk;var f=e.waves_height,g=e.waves_length,k=e.wk,l=La.length(d.qj)||1;a=fa(a,T.Nb).time;a*=l;l=Bc;l[0]=20/g*(b-.25*a);l[1]=20/g*(c-.25*a);var h=Wa.FL(l);l[0]=17/g*(c+.1*a);l[1]=17/g*(b+.1*a);var l=h+Wa.FL(l)-1,r=e.dst_noise_scale0,h=e.dst_noise_scale1,n=e.dst_noise_freq0,m=e.dst_noise_freq1,q=Bc;q[0]=r*(b+n*a);q[1]=r*(c+n*a);r=Wa.CI(q);
q[0]=h*(c-m*a);q[1]=h*(b-m*a);h=f*r*Wa.CI(q);e.nn?(m=(b-e.ms[0])/e.ns[0],q=(e.ms[1]+c)/e.ns[1],m+=.5,q+=.5,1<m||0>m||1<q||0>q?b=h:(d=Wa.BN(d.zI,e.AI,m,q),m=e.dir_noise_scale,q=e.dir_noise_freq,r=Math.sqrt(d),n=Math.max(r,e.dst_min_fac),b=f*Math.max(d,e.dir_min_shore_fac)*Math.sin(r/(g/e.VG/Math.PI)+e.dir_freq*a)*Math.max(Wa.CI([m/g*(b+q*a),m/g*(c+q*a)]),e.dir_min_noise_fac)*(1-n)+h*n,l*=d)):b=h;return k+(b+.05*l)}function ya(a,b){a.bp&&a.type==T.rc&&b.lc!=a.lc&&(a.lc=b.lc);b.lc||a.type!=T.uq||(a.Ju=
0)}function Q(a,b,c,d){var e=Fa.lb(a,b);Oa.TB(e.H,c,d);e.St=!0;Fa.Bn(a,b,function(b,e,f){f.active&&f.from==c&&ga.CX(f)&&va(a,b,f.to,d)});Fa.Xl(a,b,function(b,e,f){f.active&&f.from==c&&f.from==f.to&&Q(a,b,c,d)})}function va(a,b,c,d){a=Fa.lb(a,b).kb;for(b=0;b<a.length;b++)for(var e=a[b].Ua,f=0;f<e.length;f++)Y.j3(e[f].Ha,d,c)}function Ua(a){for(var b=X(a,[T.zk]),c=0;c<b.length;c++){var d=b[c],e=d.H,f=a.Dk.A,g=Va.Wb(f.D,kc),k=Nb;k[0]=0;k[1]=0;k[2]=-d.Md[2]/2;d=Va.Eb(f.D,vb);La.transformQuat(k,d,k);k[0]+=
g[0];k[1]+=g[1];k[2]=0;Qa.identity(d);Oa.vI(e,k,d)}}function Ba(a,b){Fa.ja(a,function(c,d){if(d.type==T.uj){d.rb[0]&&d.xi[0]||Wa.K("Wrong MOTION_BLUR subscene");var e=d.rb[0],f=d.xi[0];d.xi[0]=d.H.cc;Fa.Bn(a,c,function(b,c,d){d.active&&va(a,b,d.to,f)});Q(a,c,e.from,f);va(a,c,e.to,d.xi[0]);d.aB=Math.exp(-b/d.mb_factor)}})}function Aa(a){return a.J.qj}function la(a,b){if(!a.J.gj)return null;for(var c=a.J.gj.Wk,d=0;d<c.length;d++)if(c[d]==b)return d;c=a.J.gj.kF;for(d=0;d<c.length;d++)if(c[d]==b)return d;
return null}var Y=t("__batch"),xa=t("__boundings"),Oa=t("__camera"),ra=t("__config"),V=t("__container"),Ya=t("__debug"),Fa=t("__graph"),w=t("__hud"),Da=t("__input"),ua=t("__mat4"),ta=t("__nodemat"),Pa=t("__objects"),cb=t("__textures"),Ia=t("__obj_util"),Na=t("__physics"),Ea=t("__prerender"),Ma=t("__primitives"),Ga=t("__print"),Qa=t("__quat"),Ha=t("__renderer"),ga=t("__scenegraph"),Mb=t("__sfx"),oa=t("__shaders"),T=t("__subscene"),Ka=t("__textures"),Va=t("__tsr"),Wa=t("__util"),La=t("__vec3"),ab=t("__vec4"),
ub=t("__version"),pb=ra.Ao,Ca=ra.L,Ta=ra.Ni,Xb=ra.zd,Za=ra.ds,Fb=[T.zk,T.$d,T.Nb,T.Gd,T.Fh,T.Fe,T.Ge,T.Zd,T.Vg,T.dg,T.Bf,T.zi,T.Wg,T.Ci,T.Bi];a.m8=Fb;var mb=[T.Nb,T.Gd,T.Fh,T.Fe,T.Ge,T.Zd,T.rq,T.qx,T.Ie,T.Vg,T.dg,T.Bx,T.Wg,T.$d,T.Bf,T.zi,T.Ci],qb=[T.Nb,T.Jx,T.Gd,T.Fh,T.Fe,T.Ge,T.Zd,T.Vg,T.dg],ic=[T.$d,T.Nb,T.Gd,T.Fh,T.Fe,T.Ge,T.Zd,T.Vg,T.dg,T.Bf,T.zi,T.Wg,T.rq,T.Ci,T.Bi],jc=[T.Nb,T.Gd,T.Fh,T.Fe,T.Ge,T.Zd,T.Vg,T.dg],gb=null,fb=null,Sa=[],Jb=null,Yb=Math.PI/2,Bc=new Float32Array(2),kc=new Float32Array(3),
Nb=new Float32Array(3),vb=new Float32Array(4),$a=new Float32Array(4),zb=new Float32Array(16),Sb=new Float32Array(24),rb=new Float32Array(24),Cc=xa.Hf(),uc=xa.Hf(),vc=0,wc=-Infinity,lc=new Uint8Array(4);a.k$=function(){return{}};a.es=function(a){fb=a;Mb.C3(a)};a.O2=function(a,b){var c=a.J,d=ga.yY(c.Da);if(a==b){R(a,V.tO(),V.sO());for(var e=0;e<d.length;e++)a.J.yp.push(d[e])}else for(e=a.Yg[0],R(a,e.Ol,e.Ol),e=0;e<d.length;e++)b.J.yp.push(d[e]);d=X(a,ic);for(e=0;e<d.length;e++)d[e].qj.set(c.qj);for(e=
0;e<c.yp.length;e++)c.yp[e].type==T.$d&&Ha.$k(c.yp[e])};a.Ui=p;a.sz=c;a.R=b;a.Ya=function(){return fb?!0:!1};a.Hm=function(a){return a.Dk};a.av=function(){return Sa};a.Tz=function(){if(1==Sa.length)return Sa;for(var a=0;a<Sa.length;a++){var b=Sa[a].J.Da;Fa.ja(b,function(b,c){for(var d=c.kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){for(var k=f[g],l=k.Ha.wa,h=k.Ha.jg,r=null,n=0;n<l.length;n++)if("SCENE"==l[n].source&&l[n].tw==Sa[a].name&&c.type!=T.OD){Ga.error('Texture-scene loop detected. A scene is rendered to texture "'+
h[n]+'" yet this texture belongs to the same scene.');r=k.Ha;break}if(r)for(l=r.wa,r.wa=[],r.Ig=[],Y.t5(r,null),Y.Dd(r),T.pd(c,k),n=0;n<l.length;n++)cb.$L(l[n])}})}for(var c=[],a=0;a<Sa.length;a++)if(b=Sa[a],!b.Yg.length){b=Fa.zl(Jb,b);Fa.PZ(Jb,b);b=Fa.un(Jb,b,Fa.cm);b=Fa.TI(b);Fa.ja(b,function(a,b){c.push(b)});break}return c};a.gW=function(a,b,c,d,f){a.Yg=a.Yg||[];a.Ta=null;var g=a.J,r=Ia.La(a.Dk,a),n=a.Dk.A;g.at=[];var K=a.world;g.l1=c.length;g.vn=M(c);g.tC=A(K,g.vn);g.Mn=D(K,g.tC);g.uT=l(K);if(K=
!a.Yg.length)a:{if("HMD"==Ca.stereo){if(r.oa[0].type!=Oa.fd){Ga.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ca.stereo="NONE";K=!1;break a}if(!Da.Dj(Da.Sb)){Ga.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Ca.stereo="NONE";K=!1;break a}}K="HMD"==Ca.stereo}g.oA=K;if(K=!a.Yg.length)r.oa[0].type!=Oa.fd&&"ANAGLYPH"==Ca.stereo?(Ga.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ca.stereo="NONE",K=!1):K="ANAGLYPH"==
Ca.stereo;g.anaglyph_use=K;if(K=!a.Yg.length)r.oa[0].type!=Oa.fd&&"SIDEBYSIDE"==Ca.stereo?(Ga.warn("Side-by-side stereo is disabled for the non-perspective camera"),Ca.stereo="NONE",K=!1):K="SIDEBYSIDE"==Ca.stereo;g.pw=K;g.ZV=!g.anaglyph_use&&!g.pw&&H(a,f);g.gj=e(a,b,d);g.QW=P(a);g.W1=O(a);g.nX=I(a);g.v0=u(a);g.o2=J(a);g.Uj=x(a);g.dof=Ca.dof&&(0<n.dof_distance||n.dof_object);g.motion_blur=Ca.motion_blur&&a.b4w_enable_motion_blur;g.compositing=Ca.compositing&&a.b4w_enable_color_correction;g.antialiasing=
Ca.antialiasing&&1==Ca.oc&&"NONE"!=a.b4w_antialiasing_quality;g.ssao=Ca.ssao&&a.b4w_enable_ssao;g.god_rays=Ca.god_rays&&a.b4w_enable_god_rays&&g.vn;g.tZ=Ca.Yy;g.aA=a.b4w_glow_settings.render_glow_over_blend;g.P4=q(a);f=h(d);g.LP=f;g.refractions=L(a,f);g.Bd=k(a,c,d);g.Xd=C(d);g.sj=y(d);g.A4=z(d);g.Wf=m(d);g.kd=v(a,d);g.RX=N(a,d);g.outline=E(a,d);g.glow_materials=U(a,d);g.J1=a.b4w_lod_smooth_type;g.BP=a.b4w_lod_hyst_interval;switch(Ca.reflection_quality?Ca.reflection_quality:a.b4w_reflection_quality){case "LOW":g.Ph=
Za.JM;g.fj=Za.mQ;break;case "MEDIUM":g.Ph=Za.lZ;g.fj=Za.G2;break;case "HIGH":g.Ph=Za.kZ;g.fj=Za.F2;break;default:g.Ph=Za.JM,g.fj=Za.mQ}V.gP()?(Ga.log("%cENABLE HIDPI MODE","color: #00a"),g.JK="AA_QUALITY_LOW",g.bs=1,Ca.oc=1):1<Ca.oc?(Ga.log("%cENABLE MSAA RENDERING: "+Ca.oc+"x","color: #00a"),g.bs=1):(g.JK="AA_QUALITY_"+a.b4w_antialiasing_quality,g.bs=Ca.quality===ra.Un?1.33:1);c=a.Yg.sort(function(a,b){return b.Ol-a.Ol});g.Da=ga.xY(g,r,n,c);g.yp=[];g.hB=!1;g.hH=!1;g.iH=!1;g.qj=new Float32Array(3);
Sa.push(a);Jb||(Jb=Fa.create());Fa.Z(Jb,a);for(g=0;g<b.length;g++)Ia.bI(b[g],!0,a);a=V.qe();V.resize(a.clientWidth,a.clientHeight,!0)};a.hW=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d].J;e&&e.Qm&&(e.dt=c,a.J.at.push(b[d]))}};a.Nz=function(a){return a.J.Da};a.tN=function(a,b){Fa.ja(b,function(c,d){var e=null;switch(d.type){case T.rc:e=Y.Ly(d.Sv);break;case T.Jx:e=Y.EY(d);break;case T.fE:e=Y.FY(d);break;case T.BJ:e=Y.kY();break;case T.rq:e=Y.oY(d.tB,d.oj,d.sn);break;case T.qx:e=Y.pY();break;
case T.uj:e=Y.sY();break;case T.MD:e=Y.dY(d.yy);break;case T.ot:var e=Y.lY(d),f=d.H.dof_power;if(d.H.dof_bokeh){var f=f/2,g=ga.Oz(b,d,T.rc);ga.Td(g[0],f);ga.Td(g[1],f);g[0]=ga.sd(b,g[0],T.rc);ga.Td(g[0],f)}else{var g=ga.sd(b,d,T.rc),k=ga.sd(b,g,T.rc);ga.Td(g,f);ga.Td(k,f)}break;case T.uq:var e=Y.tY(),f=ga.sd(b,d,T.rc),g=ga.sd(b,f,T.rc),k=ga.sd(b,g,T.rc),l=ga.sd(b,k,T.rc);ga.Td(g,d.$t);ga.Td(f,d.$t);ga.Td(l,d.Pu*d.sp);ga.Td(k,d.Pu*d.sp);break;case T.qt:e=Y.nY();break;case T.ND:e=Y.eY();break;case T.uJ:e=
Y.ZX(d);break;case T.dE:case T.Hx:case T.Ht:case T.Ix:e=Y.CY(d.type);break;case T.Gh:e=Y.GY(d.Hb);break;case T.Ie:e=Y.hY(a,d);break;case T.gm:e=Y.fY();break;case T.vq:e=Y.gY();break;case T.yJ:e=Y.cY();break;case T.LUMINANCE:e=Y.qY();break;case T.xJ:e=Y.$X();break;case T.Bx:e=Y.rY(d.$n);break;case T.jt:e=Y.bY(d.jy);break;case T.lK:e=Y.Ly("NONE");break;case T.OV:e=Y.gZ();break;case T.Vp:e=Y.YX();break;case T.Dt:e=Y.vY()}e&&(f=T.Yj(e,Ia.Qq("NONE")),T.pd(d,f),ga.uo(b,d,e),B(e))})};a.mm=function(a,b,c,
e){switch(b.type){case "MESH":case "LINE":case "WORLD":var g=a.J.Da,k=b.A;!ga.Vb(g,T.$d)&&k.ze&&(k.ze=!1);k=X(a,Fb);(c||e)&&Na.mm(b,a);for(e=0;e<k.length;e++){var l=k[e],h=b,n=g,m=a,q=c;switch(l.type){case T.Nb:f(l,h,n,"OPAQUE",m,q);break;case T.Gd:f(l,h,n,"BLEND",m,q);break;case T.Fh:f(l,h,n,"XRAY",m,q);break;case T.Fe:f(l,h,n,"GLOW",m,q);break;case T.Ge:case T.Zd:r(l,h,n,!1,m,q);break;case T.Vg:case T.dg:r(l,h,n,!0,m,q);break;case T.Wg:for(var v=Ia.La(h,m),u=v.da,y=0;y<u.length;y++){var A=u[y];
if("SHADOW"==A.type&&"RECEIVE"==A.Hb&&A.ze){if(!q&&(d(A,l,h,n,"SHADOW",m),!Y.Dd(A)))continue;var x=T.Yj(A,h.A,v.dh[y]);T.pd(l,x);ga.uo(n,l,A);B(A)}}break;case T.$d:v=!1;u=h.A;h=Ia.La(h,m);y=h.da;A=ga.Vb(n,T.zk);for(x=0;x<y.length;x++){var p=y[x];if("SHADOW"==p.type&&"CAST"==p.Hb){v=!0;if(!q){W(p);var z=l.Qr;Y.Uf(p,"NUM_LIGHTS",z);Y.Uf(p,"NUM_LFACTORS",z%2?Math.floor(z/2)+1:z/2);G(p.qb,l.H);oa.ya(p.qb,"SHADOW_USAGE","SHADOW_CASTING");p.kd&&A&&S(p,A,u);Y.Uf(p,"SHADOW_TEX_RES",oa.fa(m.J.Bd.csm_resolution));
if(!Y.Dd(p))continue}p.kd&&(m.J.Bd.FZ=!0);z=T.Yj(p,u,h.dh[x]);T.pd(l,z);ga.uo(n,l,p);B(p)}}v&&(h=m.J.Bd,q=ga.Vb(n,T.Nb),K(l,m,q.H,h,!0));break;case T.Bf:ja(l,h,n,m,q);break;case T.zi:ja(l,h,n,m,q);break;case T.Ci:v=h.A;u=Ia.La(h,m);y=u.da;for(A=0;A<y.length;A++)if(x=y[A],"COLOR_ID"==x.type&&"OUTLINE"==x.Hb){if(!q&&(d(x,l,h,n,"COLOR_ID",m),Y.Uf(x,"USE_OUTLINE",1),!Y.Dd(x)))continue;x=T.Yj(x,v,u.dh[A]);T.pd(l,x)}break;case T.zk:n=h.A;h=Ia.La(h,m);m=h.da;for(v=0;v<m.length;v++)if(u=m[v],"GRASS_MAP"==
u.type){if(!q&&!Y.Dd(u))if("DEBUG"===ub.type())Y.$x(u,"error.glslv","error.glslf"),Y.Dd(u);else continue;u=T.Yj(u,n,h.dh[v]);T.pd(l,u);u=l.H;p=n.Ki;y=l.Md[0];A=l.Md[1];x=l.Md[2];0==y&&0==A?(y=p.min_z,A=p.max_z):(y=Math.min(y,p.min_z),A=Math.max(A,p.max_z));p=1E-4*(A-y);y-=p;A+=p;l.Md[0]=y;l.Md[1]=A;Oa.qR(u,x/2,x/2,-A,-y);Oa.Kl(u,!1)}break;case T.Bi:for(v=h.A,h=Ia.La(h,m),m=h.da,u=0;u<m.length;u++)if(y=m[u],"DEBUG_VIEW"==y.type){if(!q&&(y.kd&&(A=ga.Vb(n,T.zk))&&S(y,A,v),!Y.Dd(y)))if("DEBUG"===ub.type())Y.$x(y,
"error.glslv","error.glslf"),Y.Dd(y);else break;A=T.Yj(y,v,h.dh[u]);T.pd(l,A);ga.uo(n,l,y);B(y)}}}break;case "LAMP":ka(b,a)}c=Ia.La(b,a);g=c.da;for(k=0;k<g.length;k++)null==g[k].Gb&&"PHYSICS"!=g[k].type&&(Ia.VQ(c,k),k--);Ia.bI(b,!0,a)};a.R0=function(a,b){if(a&&a.J&&a.J.Da){var c=a.J.Da,d=ga.Vb(a.J.Da,T.Ie);if(d){var e=null;ga.Ks(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.Ie&&d.type==T.jm)return e=a.Xa,!0});if(e){var f=Za.Qy,g=Y.G_(b,a);if(g&&g.Vj)g=ta.i0(ta.Rz(g.Qe).Da),-1!=g&&(f=cb.CE(g/
2));else if(g=a.J.Mn.Ep)f=g.sS;f=Math.min(f,Ta.ph);d.H.width=f;d.H.height=f;Ka.XB(e,f);n(a,f);if(d=ga.Vb(a.J.Da,T.gm)){d.H.width=f;d.H.height=f;var k=null;ga.Ks(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.gm&&d.type==T.Nb)return k=a.Xa,!0});k&&Ka.XB(k,f)}if(f=ga.Vb(a.J.Da,T.vq)){f.H.width=128;f.H.height=128;var l=null;ga.Ks(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.vq&&d.type==T.Nb)return l=a.Xa,!0});l&&Ka.XB(l,128)}}}}};a.D5=function(a,b){for(var c=a.T,d=0;d<c.length;d++){var e=
c[d].vb,f=e.J.Da,g=ga.Vb(e.J.Da,T.Ie);if(g){var k=null;ga.Ks(f,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.Ie&&d.type==T.gm)return k=a.Xa,!0});k&&(f=cb.CE(b.height/2),f=Math.min(f,Ta.ph),g.H.width=f,g.H.height=f,Ka.XB(k,f),n(e,f))}}};a.cI=function(a){a.J.hB=!0};a.X5=function(a,b){Fa.ja(b,function(b,c){c.type===T.$d&&(Va.copy(a.D,c.H.D),Va.copy(a.Ng,c.H.ow))})};a.lfa=pa;a.O_=function(a,b){for(var c=a.J.Bd,d=new Float32Array(c.csm_num),e=0;e<c.csm_num;e++)d[e]=Oa.jZ(c,b,e);return d};a.iu=ma;a.po=
aa;a.CG=function(a){return a.A.ci};a.HQ=function(a,b){for(var c=0;c<a.T.length;c++)for(var d=X(a.T[c].vb,Fb),e=0;e<d.length;e++)for(var f=d[e].kb,g=0;g<f.length;g++)for(var k=f[g].Ua,l=k.length-1;0<=l;l--){var h=k[l];if(h.sh==a.A)if(h.Ha){if("undefined"==typeof b||-1!=h.Ha.Dc.indexOf(b)||0==h.Ha.Dc.length)Y.aM(h.Ha),k.splice(l,1)}else k.splice(l,1)}};a.G5=function(a,b){for(var c=a.xd,d=Ia.La(a,b).yv,e=X(b,mb),f=0;f<e.length;f++){var g=e[f];g.hp.set(c.qu,4*d);g.Wa=!0}};a.F5=ka;a.kD=function(a){a=a.T;
for(var b=0;b<a.length;b++)ea(a[b].vb)};a.lD=ea;a.Z5=wa;a.Ja=function(){for(var a=0;a<Sa.length;a++){var b=Sa[a];Fa.ja(b.J.Da,function(a,b){if(b.type!=T.jm){var c=b.H;Ha.d3(c.Lf,c.cc,c.og,c.width,c.height);for(var c=b.kb,d=0;d<c.length;d++)for(var e=c[d].Ua,f=0;f<e.length;f++){var g=e[f].Ha;g&&Y.aM(g)}}});b.J.Da=null;b.J.yp=[]}fb=gb=null;Sa.length=0;Jb=null};a.HP=function(a,b,c){a=Oa.XZ(a,a.near,a.far,null,!0);var d=Ma.w_(a);a=Ia.Qq("DYNAMIC");a.Ki=a.Ca={max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,
max_z:1E12,min_z:-1E12};a.$e=a.Bc=xa.LW();var e=a.$e.pb;a.nm=a.Kb=xa.tE([e,0,0],[0,e,0],[0,0,e],a.$e.V);c=Y.BY(d,c);c.Zk=!0;c=T.Yj(c,a);T.pd(b,c)};a.zba=function(a){return[a.frame_start,a.frame_end]};a.JR=function(a,b,c){V.s4(a,b,c);fb&&R(fb,a,b)};a.zh=X;a.dc=fa;a.b3=function(){ba(!1)};a.c3=function(){ba(!0)};a.ON=function(a){a=fa(a,T.Nb);var b=a.re,c=a.De,d=[],e=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];e[0]=c[0];e[1]=c[1];e[2]=c[2];return[a.ih,d,e]};a.gI=function(a,b,c,d){for(var e=X(a,mb),f=0;f<e.length;f++){var g=
e[f];g.re.set(c);g.De.set(d);g.ih=b;g.Wa=!0}(b=ga.Vb(a.J.Da,T.Ie))&&wa(a,b)};a.lO=function(a){if((a=fa(a,T.Ie))&&a.procedural_skydome){var b={};b.color=Array(3);La.copy(a.pn,b.color);b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;
b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;return b}return null};a.Y_=function(a){return X(a,qb)[0].tg[0]};a.W_=function(a){return X(a,qb)[0].tg[1]};a.Z_=function(a){return X(a,qb)[0].tg[2]};a.X_=function(a){return X(a,qb)[0].tg[3]};a.mR=function(a,b){for(var c=X(a,qb),d=0;d<c.length;d++){var e=c[d];e.tg[0]=b;e.Wa=!0}};a.kR=function(a,b){for(var c=X(a,qb),d=0;d<c.length;d++){var e=c[d];e.tg[1]=b;e.Wa=
!0}};a.nR=function(a,b){for(var c=X(a,qb),d=0;d<c.length;d++){var e=c[d];e.tg[2]=b;e.Wa=!0}};a.lR=function(a,b){for(var c=X(a,qb),d=0;d<c.length;d++){var e=c[d];e.tg[3]=b;e.Wa=!0}};a.RN=function(a,b){var c=b||[],d=X(a,qb)[0].pe;c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];return c};a.iI=function(a,b){for(var c=X(a,qb),d=0;d<c.length;d++){var e=c[d];e.pe.set(b);e.Wa=!0}};a.mO=function(a){var b=fa(a,T.Jx),c=fa(a,T.fE);a=fa(a,T.Nb);if(!b)return null;var d={};d.quality=b.Gp;d.use_hemisphere=b.ys;d.use_blur_depth=
c.us;d.blur_discard_value=c.ws;d.radius_increase=b.As;d.influence=b.zs;d.dist_factor=b.xs;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};a.LN=function(a){a=fa(a,T.ot);if(!a)return null;var b={};b.dof_on=a.H.dof_on;b.dof_distance=a.H.dof_distance;b.dof_front_start=a.H.dof_front_start;b.dof_front_end=a.H.dof_front_end;b.dof_rear_start=a.H.dof_rear_start;b.dof_rear_end=a.H.dof_rear_end;b.dof_power=a.H.dof_power;b.dof_bokeh=a.H.dof_bokeh;b.dof_bokeh_intensity=a.H.dof_bokeh_intensity;b.dof_object=
a.H.dof_object;return b};a.iR=za;a.VN=function(a){var b=X(a,[T.rq]);a=fa(a,T.qx);if(!b||!a)return null;var c={};c.god_rays_max_ray_length=b[0].Wm;c.god_rays_intensity=a.god_rays_intensity;c.god_rays_steps=Y.H_(b[0].kb[0].Ua[0].Ha)[1];return c};a.sR=function(a,b){var c=X(a,[T.rq]),d=X(a,[T.qx]);if(!c.length||!d.length)return Ga.error("God Rays are not enabled on the scene"),0;if("number"==typeof b.god_rays_intensity)for(var e=0;e<d.length;e++)d[e].god_rays_intensity=b.god_rays_intensity;if("number"==
typeof b.god_rays_max_ray_length)for(var f=b.god_rays_max_ray_length,e=0;e<c.length;e++)c[e].Wm=f,c[e].as=f/c[e].sn/(e+1),c[e].Wa=!0;if("number"==typeof b.god_rays_steps)for(var g=oa.fa(b.god_rays_steps,1),f=c[0].Wm,e=0;e<c.length;e++){c[e].sn=g;c[e].as=f/g/(e+1);c[e].Wa=!0;var k=c[e].kb[0].Ua[0],l=k.Ha;Y.Uf(l,"STEPS_PER_PASS",g);Y.Dd(l);T.pd(c[e],k)}for(e=0;e<d.length;e++)d.Wa=!0};a.CN=function(a){var b=fa(a,T.Bx);a=fa(a,T.jt);if(!b||!a)return null;var c={};c.key=b.Iq;c.edge_lum=b.Hq;c.blur=a.Fq;
c.adaptive=b.$n;c.average_luminance=b.average_luminance;return c};a.ZQ=ia;a.UN=function(a){a=fa(a,T.qt);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};a.rR=F;a.zO=function(a){var b=Aa(a);a=La.length(b);if(0==a)return null;var b=Wa.IB(Math.atan2(b[0],-b[1])),c={};c.wind_dir=b;c.wind_strength=a;return c};a.w3=function(a){a.J.hH=
!0};a.xO=sa;a.wO=function(a,b){var c=a.J.Xd,d=fa(a,T.Nb);d&&c&&(b.waves_height=c.waves_height,b.waves_length=c.waves_length,b.water_fog_density=d.pj[3],c=b.water_fog_color=[],c[0]=d.pj[0],c[1]=d.pj[1],c[2]=d.pj[2])};a.HR=function(a,b){var c=a.J.Xd;if(!c)return Ga.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof b.dst_noise_scale0&&(c.dst_noise_scale0=b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&(c.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&
(c.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(c.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(c.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(c.dir_freq=b.dir_freq);"number"==typeof b.dir_noise_scale&&(c.dir_noise_scale=b.dir_noise_scale);"number"==typeof b.dir_noise_freq&&(c.dir_noise_freq=b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&(c.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&
(c.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(c.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(c.Ku=b.water_dynamic);for(var d=X(a,jc),e=0;e<d.length;e++){var f=d[e];"number"==typeof b.water_fog_density&&c.pe&&(f.pj[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&c.pe&&f.pj.set(b.water_fog_color);f.Wa=!0}};a.kO=function(a,b,c){var d=a.J.Xd;if(!d.nn)return 100;var e=d.VG;a=d.wk;var f=(b[0]-d.ms[0])/d.ns[0],g=(d.ms[1]+b[1])/d.ns[1],f=f+.5,g=g+.5;if(!(1<
f||0>f||1<g||0>g))return d=e*Wa.BN(fb.J.zI,d.AI,f,g),b=(a-b[2])*c,b=Math.sqrt(d*d+b*b)};a.update=function(a,c){for(var d=b().Dk.A,e=0;e<Sa.length;e++){var f=Sa[e],g=f.J.Da,k=f.J;if(k.Xd)var l=Va.X(d.D),h=l[2]-sa(f,l[0],l[1]);for(l=0;l<k.at.length;l++){var r=k.at[l].J,n=r.sb,m=r.ie;if(!(f.b4w_use_nla&&r.Hn||!n&&!m)&&Ka.nT(r)){var q=Ka.kT(r),K=Ka.mT(r);n&&Ca.is_mobile_device&&(K-=5);var v=Ka.p6(r);q>=v&&r.Yl||q<K?(Ka.NQ(r),m&&(r.ln=Ka.SB(r,a))):q>=v&&!r.Yl?Ka.xH(r):Ka.oT(r)&&(n?Ka.RS(r):(n=Ka.SB(r,
a),n!=r.ln&&(Ka.QS(r),r.Jl++),r.ln=n))}}Fa.ja(g,function(b,c){-1<ic.indexOf(c.type)&&(c.time=a);k.Xd&&(c.eu=h)})}for(e=0;e<Sa.length;e++)if(f=Sa[e],k=f.J,g=k.Da,d=k.yp,d.length)for(k.hB&&(ha(f),k.hB=!1),k.hH&&(Ua(f),k.hH=!1),k.iH&&(qa(f),k.iH=!1),k.motion_blur&&Ba(g,c),f=ga.Vb(g,T.Ci),l=0;l<d.length;l++)g=d[l],Ea.wp(g),f&&ya(g,f),Ha.$k(g);Ca.show_hud_debug_info&&w.x4(Sa,c)};a.l3=function(a){a.J.iH=!0};a.PF=function(a){var b=[];Fa.ja(a.J.Da,function(a,c){b.push(c)});return b};a.FN=function(){var a=
fa(fb,T.Gd),b=fb;return a||b.J.Xd?a.eu:null};a.PS=function(a){Fa.ja(a.J.Da,function(a,b){b.Wa=!0})};a.I3=function(a,c){a.debug_view_mode=c;a.lc=c!=Ya.fx;a.Bb=c==Ya.gx;a.Wa=!0;for(var d=b(),e=0;e<jc.length;e++)for(var f=X(d,[jc[e]]),g=0;g<f.length;g++)f[g].Iu=c==Ya.pt};a.H3=function(a,b){a.debug_colors_seed=b;a.Wa=!0};a.e4=function(a,b){a.Vy=b;a.Wa=!0};a.p4=function(a,b){for(var c=a.kb,d=0;d<c.length;d++)for(var e=c[d].Ua,f=0;f<e.length;f++){var g=e[f].Ha;La.copy(b,g.wireframe_edge_color);g.Gb.Kr=
!0}};a.KS=function(a,b){var c=b.$q,d=a.J.qj;if(c&&"WIND"==c.type&&d){var e=Va.la(b.A.D);La.transformQuat(Wa.ic,e,d);La.normalize(d,d);La.scale(d,c.gS,d);c=X(a,ic);for(e=0;e<c.length;e++)c[e].qj.set(d);return!0}return!1};a.A2=function(a,b,c){var d=fa(a,T.Bf);if(d){var e=pb.enabled&&(pb.xw===T.Bf||pb.xw===T.zi);if(e)var f=V.fu(b,c,Bc,d.H);else{var g=V.Xh();Oa.G3(d.H,b,c,g.clientWidth,g.clientHeight)}Ea.wp(d);d.lc&&Ha.$k(d);(a=fa(a,T.zi))?(ua.copy(d.H.Ib,a.H.Ib),ua.copy(d.H.Mg,a.H.Mg),Wa.FF(a.H.Mg,a.H.Mo),
Ea.wp(a),a.lc&&Ha.$k(a),b=a.H):b=d.H;if(d.lc||a&&a.lc)return e?(f[1]=b.height-f[1],Ha.JB(b.Lf,f[0],f[1],1,1,lc)):Ha.JB(a?a.H.Lf:d.H.Lf,0,0,1,1,lc)}else Ga.error("Object Selection is not available on the scene");return null};a.yR=function(a){for(var c=b(),c=X(c,[T.uq]),d=0;d<c.length;d++){var e=c[d];e.dj.set(a);e.Wa=!0}};a.Uba=Aa;a.Qo=function(a){var b={title:"",description:""};a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};a.bv=function(a){return a.b4w_custom_prop};
a.JS=function(a,b){var c=kc;La.negate(b,c);for(var d=0;6>d;d++){var e=a.Oh[d],f=a.zo[d],g=a.H;ua.translate(Wa.JT[d],c,e);ua.multiply(g.Ib,e,g.Mg);Wa.FF(g.Mg,f)}};a.MS=function(a,b,c){Wa.j5(b,c,Wa.ic,a.H.Kc)};a.eL=function(a,b,c){var d=a.J.gj;if(d&&b)for(var e=0;e<b.length;e++){var f=b[e],g=Ia.La(f,a);if(-1!=f.A.te){var k=d.hk,l=d.yB,f=f.A.te;l.length&&f<l.length?g.hk=l[f]:k.length&&f<k.length&&(g.hk=k[f])}else-1!=f.A.Le&&(k=d.Wk,l=d.kF,f=f.A.Le,l.length?g.Wk=l[f]:k.length&&(g.Wk=k[f]))}if(c)for(b=
Ia.Wz(c,Ca.ssao&&a.b4w_enable_ssao),c=a.J.Bd,e=0;e<b.length;e++)if(g=Ia.La(b[e],a),c)for(d=X(a,[T.$d]),f=0;f<d.length;f++)e==d[f].xh&&g.yI.push(d[f])};a.KP=function(a,b){return a.timeline_markers[b]};a.fs=function(a){var c=b();if(c=fa(c,T.Gh))a.distortion_coefs&&(c.Yk[0]=a.distortion_coefs[0],c.Yk[1]=a.distortion_coefs[1],c.Wa=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=
a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.Wa=!0),a.base_line_factor&&(c.Yk[2]=a.base_line_factor,c.Wa=!0),a.inter_lens_factor&&(c.Yk[3]=a.inter_lens_factor,c.Wa=!0),null!=a.enable_hmd_stereo&&(c.enable_hmd_stereo=a.enable_hmd_stereo,c.Wa=!0)};a.eB=function(b,c){for(var d=Sa,e=0;e<d.length;e++)ga.c2(a.Nz(d[e]),b,c)};a.hfa=function(a){for(var b=Pa.xc(a,"LAMP",Pa.Vc),c=X(a,Fb),d=0;d<c.length;d++)for(var e=c[d],f=e.kb,g=0;g<f.length;g++)for(var k=
f[g].Ua,l=0;l<k.length;l++){var h=k[l],r=h.Ha;"MAIN"==r.type&&(Y.s5(r,b,a),Y.Dd(r),T.pd(e,h))}};a.qda=function(a){for(var b=0;b<Sa.length;b++)Fa.ja(Sa[b].J.Da,function(b,c){for(var d=c.kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var k=f[g];k.Ha==a&&T.pd(c,k)}})}};b4w.module.__hud=function(a,t){function p(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=0;a.shadowColor=null}function c(a){b(' SCENE "'+a.name+'"');b(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(a.J){var c=0,e=0,g=0;m.ja(a.J.Da,function(a,k){if(k.type!=z.jm){for(var h=Math.round(k.H.width)+"x"+Math.round(k.H.height),m=0,q=0;q<k.kb.length;q++)m+=k.kb[q].Ua.length;q=k.ym;if(k.type==z.Zd||k.type==z.dg)m*=6;var l=k.lc&&!k.Io,v=l?k.ng:0;k.enqueue||
(k.ng=0);var u=l?" (\u2713)":" (\u2715)",A=z.QC(k);b(u,A,k.Qr,h,q,"of",m,"  ",v.toFixed(3));k.ym=0;c+=m;l&&(e+=q,g+=v)}});return[c,e,g]}b("No INFO")}function b(){for(var a=80+20*e[0],b=arguments[0],c=1;c<arguments.length;c++){for(var g="",k=0;k<C[c]-String(arguments[c]).length;k++)g+=" ";b+=g+arguments[c]}e[0]++;h.fillText(b,30,a)}function k(a,b,c){b=a.Oc*b;c.x=a.x+b;c.y=a.y;c.Oc=a.Oc-2*b;c.ec=a.ec}function g(a){return a.x+a.Oc/2}function M(a){var b=h,c={x:0,y:0,Oc:0,ec:0},e=b.canvas.width,b=b.canvas.height;
c.x=0;c.y=0;c.Oc=e;c.ec=b;k(c,.01,c);e=.02*c.ec;c.x=c.x;c.y+=e;c.Oc=c.Oc;c.ec=c.ec-2*e;e=c.Oc/8;c.x+=e*a;c.y=c.y;c.Oc=e;c.ec=c.ec;k(c,.02,c);return c}var m=t("__graph"),z=t("__subscene"),C=[5,30,4,10,5,3,5],h=null,e=[0,0];a.Mf=function(a){a=a.getContext("2d");p(a);return h=a};a.Ip=function(){h&&p(h)};a.reset=function(){var a=h;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),e[0]=0,e[1]=0)};a.x4=function(a,g){var k=h;
if(k){k.textAlign="left";k.fillStyle="rgba(0,255,0,255)";b(" FPS",(1/g).toFixed(2));e[0]++;for(var m=k=0,q=0,u=0;u<a.length;u++){var p=c(a[u]),k=k+p[0],m=m+p[1],q=q+p[2];e[0]++}b(" ----------------------------------------------------------------");b("    ","TOTAL ACTIVE","","",m,"of",k,"  ",q.toFixed(3))}};a.print=function(){var a=h;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",b.apply(Math,arguments))};a.pQ=function(a,b,c,e,k,m,p){var q=h;if(q){b=M(b);var u=b.ec/5;b.x=b.x;b.y+=4*u;b.Oc=
b.Oc;b.ec=u;q.textAlign="center";q.fillStyle="#00FF00";h.fillText(a,g(b),b.y-10);q.strokeStyle="#00FF00";q.lineWidth=.5;q.beginPath();q.moveTo(b.x,b.y);q.lineTo(b.x+b.Oc,b.y);q.lineTo(b.x+b.Oc,b.y+b.ec);q.lineTo(b.x,b.y+b.ec);q.closePath();q.stroke();if(!m&&!p)for(m=1E6,p=-1E6,a=0;a<c.length;a++)m=Math.min(m,c[a]),p=Math.max(p,c[a]);q.textAlign="right";h.fillText(String(m),b.x-10,b.y+b.ec);h.fillText(String(p),b.x-10,b.y);q.textAlign="center";h.fillText(String(e),b.x,b.y+b.ec+15);h.fillText(String(k),
b.x+b.Oc,b.y+b.ec+15);q.strokeStyle="#FF0000";q.lineWidth=1.5;q.beginPath();e=b.Oc/(c.length-1);p=b.ec/(p-m);for(a=0;a<c.length;a++)k=b.x+e*a,u=b.y+b.ec-(c[a]-m)*p,a?q.lineTo(k,u):q.moveTo(k,u);q.stroke()}};a.YM=function(a,b,c,e,k,m,p){var q=h;if(q)for(q.textAlign="center",q.fillStyle="#00FF00",q.font="bold 12px Courier",c=M(c),h.fillText(b?"["+a+"]":a,g(c),c.y),0<=m&&h.fillText(m?"[M]":"[ ]",g(c)-15,c.y+30),0<=p&&h.fillText(p?"[S]":"[ ]",g(c)+15,c.y+30),a={x:0,y:0,Oc:0,ec:0},b=0;b<e.length;b++){m=
e[b];var u="VOLUME"==m[0];if(u){p=c.y+350;var l=c.Oc,v=a;v.x=c.x;v.y=p;v.Oc=l;v.ec=250}else{p=c.y+50+50*b;var l=c.Oc,v=c.ec,A=a;A.x=c.x;A.y=p;A.Oc=l;A.ec=v}p=q;var l=a,A=b==k,z=m[0],v=m[1],C=m[2],t=m[3],y=(t-C)/m[4],y=1>y?Math.floor(1/y-1E-5).toFixed(0).length:0;m=m[5]?Math.log(v/C)/Math.log(t/C):(v-C)/(t-C);p.textAlign="center";A?p.fillText("["+z+"]",g(l),l.y):p.fillText(z,g(l),l.y);p.strokeStyle="#00FF00";p.lineWidth=u?3:1;u?(p.textAlign="right",p.fillText(t.toFixed(y),g(l)-10,l.y+15),p.textAlign=
"right",p.fillText(C.toFixed(y),g(l)-10,l.y+l.ec-15)):(p.textAlign="right",p.fillText(C.toFixed(y),l.x+28,l.y+15),p.textAlign="left",p.fillText(t.toFixed(y),l.x+l.Oc-28,l.y+15));p.beginPath();if(u){var H=l.y+15+(l.ec-30)*(1-m);p.moveTo(g(l),l.y+15);p.lineTo(g(l),l.y+l.ec-15);p.moveTo(g(l)-5,l.y+15);p.lineTo(g(l)+5,l.y+15);p.moveTo(g(l)-5,l.y+l.ec-15);p.lineTo(g(l)+5,l.y+l.ec-15);p.moveTo(g(l)-5,H);p.lineTo(g(l)+5,H)}else{var n=l.x+30+(l.Oc-60)*m;p.moveTo(l.x+30,l.y+15);p.lineTo(l.x+l.Oc-30,l.y+15);
p.moveTo(l.x+30,l.y+15-5);p.lineTo(l.x+30,l.y+15+5);p.moveTo(l.x+l.Oc-30,l.y+15-5);p.lineTo(l.x+l.Oc-30,l.y+15+5);p.moveTo(n,l.y+15-5);p.lineTo(n,l.y+15+5)}p.stroke();"EQ_Q"==z?(m=Math.log(1+1/(2*v*v)+Math.sqrt((2+1/(v*v))*(2+1/(v*v))/4-1))/Math.log(2),u?(p.textAlign="left",p.fillText(v.toFixed(y),g(l)+10,H),p.textAlign="left",p.fillText("("+m.toFixed(y+1)+")",g(l)+10,H+10)):(p.textAlign="right",p.fillText(v.toFixed(y),n,l.y+30),p.textAlign="left",p.fillText("("+m.toFixed(y+1)+")",n,l.y+30))):u?(p.textAlign=
"left",p.fillText(v.toFixed(y),g(l)+10,H)):(p.textAlign="center",p.fillText(v.toFixed(y),n,l.y+30))}}};b4w.module.__input=function(a,t){function p(a){var b=B.Am();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&G())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function c(a,b){if(!p(a))return null;var c={type:a,vh:!1,ni:[],cj:[],wl:[],Pe:[],xl:[],yl:[],rv:[],oP:[],ql:[],Wl:[],Ul:[],Tl:[],element:b,ik:!0,vc:[],dB:new Float32Array(2),b2:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),aw:null,Tp:null,xk:null,Yd:null,orientation:pa.create(),position:ma.create(),
Si:window.VRFrameData?new VRFrameData:null,GI:K.create(),el:new Float32Array(4),fl:new Float32Array(4),Wi:0,xj:0,hw:0,Ln:0,Wj:0,yj:0,No:[],Gm:[0,0,0,0,0,0,0,0,0,0,0,0],pN:[0,0,0,0,0,0,0,0,0,0,0,0],Dz:[]};c.el[0]=c.el[1]=c.el[2]=c.el[3]=Math.PI/4;c.fl[0]=c.fl[1]=c.fl[2]=c.fl[3]=Math.PI/4;30==a||40==a||50==a?(c.vh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.ik=!1)):10==a?c.vh=!0:20==a&&k(c);return c}function b(b,d){10==b||20==b?d=window:d||(40==b?d=document:d=S.qe());for(var e=
0;e<za.length;e++)if(za[e].type==b&&za[e].element==d)return za[e];e=c(b,d);60!=b&&70!=b&&80!=b&&90!=b||e.Dz.push(a.bq,a.cq,a.lq,a.mq,a.nq,a.oq,a.Rn,a.Sn,a.pq,a.qq,a.eq,a.fq,a.gq,a.hq,a.iq,a.jq,a.kq,a.hx,a.ix,a.jx,a.kx,a.lx,a.mx,a.nx,a.ox,a.px,a.dm,a.Pn,a.em,a.Qn,a.$p,a.aq,a.tt,a.ut,a.vt,a.wt,a.rt,a.st);e&&za.push(e);return e}function k(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.Yd=b[0],a.vh=!0,a.Yd.getFrameData(a.Si),a.aw&&a.aw())},function(){qa.va("WebVR displays are not found.");
a.vh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(b){z(a,b);b.length&&(a.vh=!0);a.aw&&a.aw()},function(){qa.va("WebVR devices are not found.");a.vh=!1}),M(a,ca.webvr)):(g(a),a.vh=!0))}function g(a){var b=ca.nonwebvr;a.Ln=b.Ln;a.Wj=b.Wj;a.yj=b.yj;M(a,b);a.Wi=b.Wi;a.xj=b.xj;a.hw=b.hw;m(a)}function M(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=
b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function m(a){var b=Math.atan(a.Wi/2/a.hw*ca.nonwebvr.XM);b&&(a.el[0]=a.fl[0]=Math.min(b,Math.PI/3));b&&(a.el[1]=a.fl[3]=Math.min(b,Math.PI/3));b&&(a.el[2]=a.fl[2]=Math.min(b,Math.PI/3));b&&(a.el[3]=a.fl[1]=Math.min(b,Math.PI/3))}function z(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&
(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Tp=d;a.xk=c}function C(a,b,c){switch(a.type){case 20:var d=e(a,0);if(d&1){var f="left"==b?a.el:a.fl;aa.copy(f,c)}else if(f=a.Yd||a.Tp)f=f.getEyeParameters(b),(f=f.fieldOfView||f.currentFieldOfView)?(c[0]=ja.bf(f.upDegrees),c[1]=ja.bf(f.rightDegrees),c[2]=ja.bf(f.downDegrees),c[3]=ja.bf(f.leftDegrees)):d&16&&(d=da,"left"==b?ha.copy(a.Si.leftProjectionMatrix,
d):ha.copy(a.Si.rightProjectionMatrix,d),c[0]=Math.atan(-R[1]/R[2]),c[1]=Math.atan(-R[0]/R[2]),c[2]=Math.atan(R[1]/R[2]),c[3]=Math.atan(R[0]/R[2]));break;default:qa.error("fov is undefined for device: ",a.type)}return c}function h(a,b,c){switch(a.type){case 20:a.Yd&&("left"==b?ha.copy(a.Si.leftProjectionMatrix,c):"right"==b?ha.copy(a.Si.rightProjectionMatrix,c):qa.error("Unknown type of eye: ",b));break;default:qa.error("Projection matrix is undefined for device: ",a.type)}return c}function e(a,b){switch(b){case 0:var c=
0;navigator.getVRDisplays&&(c|=8,a.Si&&(c|=16));navigator.getVRDevices&&(c=ka.is_mobile_device?c|4:c|2);return c||1;case 23:var d=a.Yd||a.Tp;return d?(c=d.getEyeParameters("left"),d=d.getEyeParameters("right"),a.Yd?d.offset[0]-c.offset[0]:d.eyeTranslation.x-c.eyeTranslation.x):a.Wi}}function A(a,c){if(a){for(var d=0;d<a.buttons.length;d++)c.No[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)c.Gm[d]=a.axes[d];if(d=a.pose){var e=b(20).GI;d.position&&K.Mc(d.position,
e,c.position);d.orientation&&K.xS(d.orientation,e,c.orientation)}}}function q(a){for(var b=0;b<a.No;b++)a.No[b]=0;for(b=0;b<a.Gm.length;b++)a.pN[b]=a.Gm[b],a.Gm[b]=0;a.position.set(ja.gE);a.orientation.set(ja.Fx)}function P(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function O(a){return null===a}function I(a,b,c,d){switch(b){case 130:c&&P(a.ni,c);if(d||a.cj.every(O)&&a.ni.every(O))a.ni.length=0,a.cj.length=0,b=a.vc.indexOf(141),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("deviceorientation",
J,!1));break;case 140:c&&P(a.cj,c);if(d||a.cj.every(O)&&a.ni.every(O))a.ni.length=0,a.cj.length=0,b=a.vc.indexOf(141),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("deviceorientation",J,!1));break;case 50:c&&P(a.wl,c);if(d||a.wl.every(O))a.wl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousedown",v,!1));break;case 40:c&&P(a.Pe,c);if(d||a.Pe.every(O))a.Pe.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousemove",D,!1));
break;case 41:c&&P(a.Pe,c);if(d||a.Pe.every(O))a.Pe.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousemove",l,!1));break;case 60:c&&P(a.xl,c);if(d||a.xl.every(O))a.xl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mouseout",N,!1),a.element.removeEventListener("mouseup",E,!1));break;case 70:c&&P(a.yl,c);if(d||a.yl.every(O))a.yl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("wheel",U,!1));break;
case 90:c&&P(a.rv,c);if(d||a.rv.every(O))a.rv.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("keydown",L,!1));break;case 80:c&&P(a.ql,c);if(d||a.ql.every(O))a.ql.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("keyup",y,!1));break;case 100:c&&P(a.Wl,c);if(d||a.Wl.every(O))a.Wl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchstart",H,!1));break;case 110:c&&P(a.Ul,c);if(d||a.Ul.every(O))a.Ul.length=
0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchmove",n,!1));break;case 120:if(c&&P(a.Tl,c),d||a.Tl.every(O))a.Tl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchend",f,!1))}}function u(a,b){ja.pH(a,ja.hE,b);if("orientation"in window)var c=ja.bf(window.orientation);else"orientation"in window.screen?c=ja.bf(window.screen.orientation.angle):c=0;c=pa.setAxisAngle(ja.qc,c,Ja);pa.multiply(b,c,b);return b}function J(a){var c=R;null===
a.alpha||null===a.beta||null===a.gamma?c[0]=c[1]=c[2]=0:(c[0]=ja.bf(a.alpha),c[1]=ja.bf(a.beta),c[2]=ja.bf(a.gamma));a=b(10,a.currentTarget);for(var d=0;d<a.cj.length;d++){var e=a.cj[d];e&&(ma.copy(c,X),e(X))}if(a.ni.length)for(c=u(c,Z),d=0;d<a.ni.length;d++)if(e=a.ni[d])pa.copy(c,fa),e(fa);for(d=0;d<a.ni.length;d++)a.ni[d]||a.ni.splice(d,1);for(d=0;d<a.cj.length;d++)a.cj[d]||a.cj.splice(d,1)}function x(a,b){switch(a.type){case 30:a.dB[0]=b.clientX,a.dB[1]=b.clientY,a.b2=b.which}}function D(a){if(!ba||
!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);x(c,a);for(var d=0;d<c.Pe.length;d++){var e=c.Pe[d];e&&(na[0]=a.clientX,na[1]=a.clientY,e(na))}c.ik&&a.preventDefault();for(d=0;d<c.Pe.length;d++)c.Pe[d]||c.Pe.splice(d,1)}}function l(a){if(!ba||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);x(c,a);for(var d=0;d<c.Pe.length;d++){var e=c.Pe[d];if(e){if("number"==typeof a.movementX)var f=
a.movementX,g=a.movementY;else"number"==typeof a.webkitMovementX?(f=a.webkitMovementX,g=a.webkitMovementY):"number"==typeof a.mozMovementX?(f=a.mozMovementX,g=a.mozMovementY):g=f=0;na[0]=f;na[1]=g;e(na)}}c.ik&&a.preventDefault();for(d=0;d<c.Pe.length;d++)c.Pe[d]||c.Pe.splice(d,1)}}function v(a){if(!ba||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);x(c,a);for(var d=0;d<c.wl.length;d++){var e=c.wl[d];e&&e(a.which)}c.ik&&(window.frameElement&&
window.frameElement.focus(),a.preventDefault());for(d=0;d<c.wl.length;d++)c.wl[d]||c.wl.splice(d,1)}}function N(a){!S.bP(a.relatedTarget)&&a.which&&E(a)}function E(a){if(!ba||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);x(c,a);for(var d=0;d<c.xl.length;d++){var e=c.xl[d];e&&e(a.which)}c.ik&&a.preventDefault();for(d=0;d<c.xl.length;d++)c.xl[d]||c.xl.splice(d,1)}}function U(a){for(var c=b(30,a.currentTarget),d=0;d<c.yl.length;d++){var e=
c.yl[d];if(e){var f;f=a;var g=0;f.wheelDelta?f.wheelDelta%120?g=ja.sign(f.wheelDelta):g=f.wheelDelta/120:f.deltaY&&(g=f.deltaY%3?-ja.sign(f.deltaY):-f.deltaY/3);f=ja.pa(100*g,-2E3,2E3);e(f)}}c.ik&&a.preventDefault();for(d=0;d<c.yl.length;d++)c.yl[d]||c.yl.splice(d,1)}function L(a){for(var c=b(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?c.oP:c.rv,e=0;e<d.length;e++){var f=d[e];f?f(a.keyCode):d.splice(e--,1)}c.ik&&a.preventDefault()}function y(a){for(var c=b(40,a.currentTarget),d=0;d<c.ql.length;d++){var e=
c.ql[d];e&&e(a.keyCode)}c.ik&&a.preventDefault();for(d=0;d<c.ql.length;d++)c.ql[d]||c.ql.splice(d,1)}function H(a){for(var c=b(50,a.currentTarget),d=0;d<c.Wl.length;d++){var e=c.Wl[d];e&&e(a.targetTouches)}for(d=0;d<c.Wl.length;d++)c.Wl[d]||c.Wl.splice(d,1)}function n(a){for(var c=b(50,a.currentTarget),d=0;d<c.Ul.length;d++){var e=c.Ul[d];e&&e(a.targetTouches)}c.ik&&a.preventDefault();for(d=0;d<c.Ul.length;d++)c.Ul[d]||c.Ul.splice(d,1)}function f(a){for(var c=b(50,a.currentTarget),d=0;d<c.Tl.length;d++){var e=
c.Tl[d];e&&e(a.targetTouches)}for(d=0;d<c.Tl.length;d++)c.Tl[d]||c.Tl.splice(d,1)}function W(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function d(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",
b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function G(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var B=t("__compat"),S=t("__container"),
r=t("__config"),ha=t("__mat4"),qa=t("__print"),K=t("__tsr"),pa=t("__quat"),ja=t("__util"),ma=t("__vec3"),aa=t("__vec4"),ka=r.L,ca=r.JO,ea=K.create(),wa=K.create(),da=ha.create();a.tj=10;a.Sb=20;a.Wc=30;a.mt=40;a.Tg=50;a.cx=60;a.QD=70;a.RD=80;a.SD=90;a.tq=2;a.Ak=4;a.fm=1;a.Tn=8;a.Ax=16;a.Ug=0;a.vx=10;a.wx=20;a.GJ=21;a.HJ=22;a.xt=23;a.ux=24;a.sx=25;a.yx=26;a.zx=27;a.xx=28;a.tx=29;a.Y6=30;a.Z6=31;a.vj=40;a.XJ=41;a.hm=50;a.At=60;a.Bt=70;a.zt=80;a.yt=90;a.OJ=91;a.km=100;a.It=110;a.Wn=120;a.rx=130;a.sq=
140;a.bq=300;a.cq=301;a.lq=302;a.mq=303;a.nq=304;a.oq=305;a.Rn=306;a.Sn=307;a.pq=308;a.qq=309;a.eq=310;a.fq=311;a.gq=312;a.hq=313;a.iq=314;a.jq=315;a.kq=316;a.hx=317;a.ix=318;a.jx=319;a.kx=320;a.lx=321;a.mx=322;a.nx=323;a.ox=324;a.px=325;a.EJ=300;a.FJ=301;a.CJ=302;a.DJ=303;a.dm=326;a.Pn=327;a.em=328;a.Qn=329;a.$p=330;a.aq=331;a.tt=332;a.ut=333;a.vt=334;a.wt=335;a.rt=336;a.st=337;var Z=pa.create(),Ja=pa.create(),R=ma.create(),na=new Float32Array(2),X=ma.create(),fa=pa.create(),ba="ontouchstart"in document.documentElement,
za=[];a.Dj=p;a.Mf=function(){if("HMD"==ka.stereo||"NONE"==ka.stereo&&ka.is_mobile_device){var a=b(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.Yd=b.display;a.vh=!0;a.Yd.getFrameData(a.Si)})}};a.ba=b;a.m3=k;a.yw=function(a,b){a.ik=b};a.TH=function(a){switch(a.type){case 20:if(a.vh)if(a.Yd)a.Yd.resetPose();else if(a.xk)for(var b=0;b<a.xk.length;b++)a.xk[b].resetSensor();break;default:qa.error("reset_device() is undefined for device: ",a.type)}};a.$h=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:ma.copy(ja.Fx,
c);if(a.Yd)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.xk)for(b=0;b<a.xk.length;b++){var d=a.xk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:qa.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:ma.copy(ja.Lt,c);if(a.Yd)c[0]=a.position[0],c[1]=
a.position[1],c[2]=a.position[2];else if(a.xk)for(b=0;b<a.xk.length;b++)d=a.xk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:qa.error("position is undefined for device: ",a.type),a=c}return a;case 21:return C(a,"left",c);case 22:return C(a,"right",c);case 30:return h(a,"left",c);case 31:return h(a,"right",c);case 40:case 41:return c[0]=a.dB[0],c[1]=a.dB[1],c}};a.vg=e;a.lk=function(a,
b,c){switch(a.type){case 20:if(e(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.Wi=c;m(a);break;case 25:a.xj=c;m(a);break;case 26:a.hw=c;m(a);break;case 27:a.Ln=c;m(a);break;case 28:a.Wj=c;m(a);break;case 29:a.yj=c,m(a)}break;case 60:case 70:case 80:case 90:a.Dz[b]=c}};a.c0=function(a,b){var c=b-300;return c<a.No.length?a.No[a.Dz[c]-300]:!1};a.b0=function(a,b){return b-326<a.Gm.length?a.Gm[a.Dz[b-300]-326]:0};a.YF=function(a,b){b.set(a.position);
return b};a.XF=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<za.length;b++){var c=za[b];switch(c.type){case 60:q(c);A(a[0],c);break;case 70:q(c);A(a[1],c);break;case 80:q(c);A(a[2],c);break;case 90:q(c);A(a[3],c);break;case 20:if(c.Yd){var d=c.Yd;if(c.Si&&d.getFrameData(c.Si)){var e=c.Si.pose,f=ja.SG(c.Si.leftViewMatrix,R);c.Wi=2*ma.length(f)}else e=d.getPose();
e&&(f=pa.setAxisAngle(ja.Af,Math.PI/2,Z),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=K.Wh(d.stageParameters.sittingToStandingTransform,ea),K.identity(wa),f=K.Gc(f,wa),d=K.multiply(f,d,c.GI)):(K.identity(ea),d=K.Gc(f,c.GI)),e.orientation&&K.xS(e.orientation,d,c.orientation),e.position&&K.Mc(e.position,d,c.position))}}}};a.Hd=function(a,b,c){switch(b){case 130:a.ni.push(c);b=141;break;case 140:a.cj.push(c);b=141;break;case 50:a.wl.push(c);break;case 40:case 41:a.Pe.push(c);break;
case 60:a.xl.push(c);break;case 70:a.yl.push(c);break;case 90:a.rv.push(c);break;case 91:a.oP.push(c);b=90;break;case 80:a.ql.push(c);break;case 100:a.Wl.push(c);break;case 110:a.Ul.push(c);break;case 120:a.Tl.push(c)}if(-1==a.vc.indexOf(b)&&(a.vc.push(b),a.vh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",v,!1);break;case 40:a.element.addEventListener("mousemove",D,!1);break;case 41:a.element.addEventListener("mousemove",l,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||
(a.element!=window&&a.element.addEventListener("mouseout",N,!1),a.element.addEventListener("mouseup",E,!1));break;case 70:a.element.addEventListener("wheel",U,!1);break;case 90:a.element.addEventListener("keydown",L,!1);break;case 80:a.element.addEventListener("keyup",y,!1);break;case 100:a.element.addEventListener("touchstart",H,!1);break;case 110:a.element.addEventListener("touchmove",n,!1);break;case 120:a.element.addEventListener("touchend",f,!1);break;case 141:a.element.addEventListener("deviceorientation",
J,!1)}};a.ne=function(a,b,c){I(a,b,c,!1)};a.x0=u;a.Ja=function(){for(var a=0;a<za.length;a++)for(var b=za[a],c=0;c<b.vc.length;c++)I(b,b.vc[c],null,!0);za.length=0};a.cG=function(a){a=b(W(a));for(var c=0;c<a.No.length;c++)if(a.No[c])return c+300;return-1};a.Qz=function(a){a=b(W(a));for(var c=0;c<a.Gm.length;c++)if(a.pN[c]-a.Gm[c])return c+326;return-1};a.Kz=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;
return 0};a.u0=function(){var a=b(20);return a&&a.Yd};a.WV=function(a){a.element.addEventListener("mousedown",function(){a.value||d(a)},!1)};a.Ih=function(a,b){ka.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.LB=function(a,b){ka.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.Lq=G};b4w.module.__prerender=function(a,t){function p(a,b){return a.Nn-b.Nn}function c(a,b){var c=a.sh;c.Br=!1;if(c.ci)return!1;var e=b.H,g=b.type==z.$d?e.PA:C.Wb(e.D,q),m=a.Ha;if(!M.K5(m,c,g))return!1;c.Br=!0;if(b.type==z.Bi)m=b.debug_view_mode==k.ex?m.Xk:!m.Xk;else{if(!(c=b.type==z.Ci&&0==c.fk)&&(c=!m.Zk&&a.Zw)){var e=e.Mo,p=a.Zw.Ff,c=a.Zw.ig,g=p.V;if(h.J4(g,e,p.pb))c=!0;else if(m.Gn)var m=c.ab,p=c.eb,l=c.fb,g=c.V,c=h.KZ(g,e,m,p,l);else c=!1}m=c?!1:!0}return m}function b(a){var b=a.Ra;if(b&&b.gB){a=a.Pa;
g.M1(a);var c=a.cd;g.eT(a.Uc,"a_position",b.Rv,c.a_position.offset);g.eT(a.Uc,"a_tbn",b.zw,c.a_tbn.offset);g.LS(a)}}var k=t("__debug"),g=t("__geometry"),M=t("__objects"),m=t("__renderer"),z=t("__subscene"),C=t("__tsr"),h=t("__util"),e=t("__vec3"),A=[z.Nb,z.Gd,z.Ge,z.Zd,z.Vg,z.dg,z.Fe,z.Fh,z.$d,z.Wg,z.Ci,z.Bi,z.Bf,z.zi],q=new Float32Array(3);a.wp=function(a){if(-1<A.indexOf(a.type)){for(var g=!1,k=a.type==z.Zd||a.type==z.dg,h=a.kb,t=0;t<h.length;t++){for(var x=h[t],D=x.Ua,l=!1,v=0;v<D.length;v++){var N=
D[v],E=N.Ha;if(k)for(var P=0;6>P;P++)a.H.Mo=a.zo[P],N.zF[P]=c(N,a),N.zF[P]&&(l=g=!0,b(E));else N.lc=c(N,a),N.lc&&(l=g=!0,b(E));a.Wa&&(E.Gb.Kr=!0);N.lc?(E=C.Wb(a.H.D,q),N.Zw?(P=N.Zw.Ff,E=e.squaredDistance(P.V,E)+P.pb*P.pb):E=Infinity,N.Nn=E):N.Nn=Infinity}D.sort(p);0<D.length&&(h.Nn=D[0]);x.lc=l}a.Wa=!1;switch(a.type){case z.Bi:break;default:a.type==z.Nb||a.type==z.Wg||a.type==z.Fe||a.type==z.Ge||a.type==z.Zd||g?a.lc=!0:(a.lc&&m.clear(a),a.lc=!1)}}else if(a.Wa){h=a.kb;for(t=0;t<h.length;t++)for(D=
h[t].Ua,v=0;v<D.length;v++)N=D[v],E=N.Ha,E.Gb.Kr=!0;a.Wa=!1}a.Ev&&z.C4(a)}};b4w.module.__primitives=function(a,t){function p(a,b,c,g){for(var e=[],k=[],h=[],q=a*b,p=2*c/(a-1),A=2*g/(b-1),C=0;C<a;C++)for(var l=-c+C*p,v=0;v<b;v++)if(k.push(l,-g+v*A,0),h.push(C/(a-1),v/(b-1)),C&&v){var t=C*b+v,E=t-1,U=(C-1)*b+v,L=U-1;e.push(t,E,U);e.push(E,L,U)}a=z.Jj();a.a_position=new Float32Array(k);a.a_tbn=m.create(q);q=M.fi("GRID_PLANE");q.sa[0]=a;q.Ea.a_texcoord=new Float32Array(h);q.Ga=new Uint32Array(e);q.hb=k.length/3;return q}function c(a){var b=a.length;b%4&&z.K("Wrong array");for(var c=
[],g=[],h=0;h<b;h+=4){var p=a[h+1],C=a[h+2],u=a[h+3];k(a[h],g);k(p,g);k(C,g);k(u,g);c.push(h,h+1,h+2);c.push(h,h+2,h+3)}a=z.Jj();a.a_position=new Float32Array(g);a.a_tbn=m.create(b/4);b=M.fi("FROM_QUADS");b.sa[0]=a;b.Ga=new Uint32Array(c);b.hb=g.length/3;return b}function b(a,b){var c=3*b;return[a[c],a[c+1],a[c+2]]}function k(a,b){b.push(a[0],a[1],a[2])}var g=t("__config"),M=t("__geometry"),m=t("__tbn"),z=t("__util"),C=g.L;a.z_=function(){var a=M.fi("LINE"),b=z.Jj();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.sa[0]=b;a.Ga=new Uint32Array(1);a.hb=1;return a};a.Fz=function(){var a=p(2,2,1,1);a.name="PLANE";return a};a.Faa=p;a.u_=function(a,b,c){function e(a,b){return 1==a%2&&(0==b||b==u-1)||1==b%2&&(0==a||a==h-1)?!0:!1}var g=c/=Math.pow(2,a-1),k=c,h=b+1,u=b+1;b=[];c=[];for(var p=0,x=0,A=0,l=-1,v=[],t=0;t<a;t++){for(var E=2*g/(h-1),U=2*k/(u-1),L=[],y=[],H=0,n=0;n<h;n++){for(var f=-g+n*E,W=[],d=0;d<u;d++){var G=-k+d*U;if(f>-x&&f<x&&G>-A&&G<A)W.push(-1),H++;else{for(var B=
null,S=0;S<v.length;S+=3)if(f==v[S]&&G==v[S+1]){B=v[S+2];break}S=null!==B?B:l+1;e(n,d)?(W.push(-2),H++):(null==B&&(d&&d!=u-1&&n&&n!=h-1?B=E:(B=t==a-1?E:2*E,L.push(f,G,S)),c.push(f,G,B),p++,l++),W.push(S));if(n&&d)if(1==n)if(e(n-1,d)){if(1<d){var G=S-1,B=y[n-1][d+1],r=B-1;b.push(r,G,S)}else B=y[n-1][d+1],r=B-1;b.push(B,r,S)}else e(n,d)||(G=S-1,B=y[n-1][d],b.push(B,G,S));else if(n==h-1){if(!e(n,d))if(d==u-1)G=S-1,B=y[n-1][d-1],r=y[n-2][d],b.push(B,G,S),b.push(r,B,S);else{var G=S-1,B=y[n-1][d],r=B-1,
ha=B+1;b.push(r,G,S);b.push(B,r,S);b.push(ha,B,S);2==d&&(ha=y[n-2][d-2],b.push(r,ha,G))}}else 1==d?e(n,d-1)?(G=y[n-1][d],B=y[n-1][d-1],b.push(G,B,S)):(G=W[d-1],B=y[n-1][d],r=y[n-2][d-1],b.push(B,G,S),b.push(B,r,G)):d==u-1?e(n,d)||(G=W[d-1],B=y[n-1][d-1],r=y[n-2][d],b.push(B,G,S),b.push(r,B,S)):-1!=y[n-1][d]&&-1!=y[n-1][d-1]&&-1!=W[d-1]?(G=W[d-1],B=y[n-1][d],r=y[n-1][d-1],b.push(B,G,S),b.push(B,r,G),d==u-2&&e(n,d+1)&&(ha=y[n-1][d+1],b.push(ha,B,S))):d==u-2&&e(n,d+1)&&(B=y[n-1][d],ha=y[n-1][d+1],b.push(ha,
B,S))}}y.push(W)}v=L;x=g;A=k;g*=2;k*=2}2E4>x&&(a=-(2*x)/(h-1),c.push(-2E4,-2E4,a),c.push(-2E4,2E4,a),c.push(-x,-A,a),c.push(-x,A,a),c.push(2E4,-2E4,a),c.push(2E4,2E4,a),c.push(x,-A,a),c.push(x,A,a),S=l+1,b.push(S+1,S+2,S+3,S+1,S+0,S+2,S+2,S+4,S+6,S+2,S+0,S+4,S+1,S+7,S+5,S+1,S+3,S+7,S+7,S+4,S+5,S+6,S+4,S+7),p+=8);a=z.Jj();a.a_position=new Float32Array(c);a.a_tbn=m.create(p);m.gH(a.a_tbn,[.707,0,0,.707],a.a_tbn);g=M.fi("MULTIGRID_PLANE");g.sa[0]=a;g.Ga=new Uint32Array(b);g.hb=c.length/3;C.rT&&(M.OC(g,
1,!0),a.a_polyindex=M.pz(g));return g};a.Eaa=function(a){var b=a.length;b%3&&z.K("Wrong array");for(var c=[],g=[],h=0;h<b;h+=3){var m=a[h+1],p=a[h+2];k(a[h],g);k(m,g);k(p,g);c.push(h,h+1,h+2)}a=z.Jj();a.a_position=new Float32Array(g);b=M.fi("FROM_TRIANGLES");b.sa[0]=a;b.Ga=new Uint32Array(c);b.hb=g.length/3;return b};a.Daa=c;a.w_=function(a){a=z.n6(a);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);
b.push(a[4],a[5],a[6],a[7]);a=c(b);a.name="FRUSTUM";return a};a.Ld=function(){var a=M.fi("FULLSCREEN_TRI"),b=z.Jj();b.a_position=new Float32Array([0,0,1,0,0,1]);a.sa[0]=b;a.Ga=new Uint32Array([0,1,2]);a.hb=3;return a};a.x_=function(){var a=M.fi("FULLSCREEN_QUAD"),b=z.Jj();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.sa[0]=b;a.Ga=new Uint32Array([0,2,1,1,2,3]);a.hb=4;return a};a.t_=function(){var a=M.fi("BILLBOARD"),b=z.Jj();b.a_bb_vertex=M.qN(1);a.sa[0]=b;a.Ga=new Uint32Array([0,2,1,0,3,
2]);a.hb=4;return a};a.NF=function(a,c){var e=M.fi("UV_SPHERE"),g,h,p=[],z=[],u=[];for(h=0;8>=h;h++)for(g=0;16>=g;g++){var C=g/16,x=h/8;z.push(-a*Math.cos(2*C*Math.PI)*Math.sin(x*Math.PI)+c[0],a*Math.cos(x*Math.PI)+c[1],a*Math.sin(2*C*Math.PI)*Math.sin(x*Math.PI)+c[2])}for(h=C=0;8>h;h++)for(g=0;16>g;g++){var x=b(z,17*h+g+1),t=b(z,17*h+g),l=b(z,17*(h+1)+g),v=b(z,17*(h+1)+g+1);Math.abs(x[1])==a+c[1]?(k(x,p),k(l,p),k(v,p),u.push(C,C+1,C+2),C+=3):Math.abs(l[1])==a+c[1]?(k(x,p),k(t,p),k(l,p),u.push(C,
C+1,C+2),C+=3):(k(x,p),k(t,p),k(l,p),k(v,p),u.push(C,C+1,C+2),u.push(C,C+2,C+3),C+=4)}g={};g.a_position=p;z=M.eX(u,z,p);z=M.cX(u,p,z);g.a_tbn=m.er(z);e.sa[0]=g;e.Ga=u;e.hb=p.length/3;return e};a.uN=function(a){var b=M.fi("INDEX"),c=z.Jj();c.a_index=new Float32Array(3*a);for(var g=new Uint16Array(3*a),k=0;k<3*a;k++)c.a_index[k]=k,g[k]=k;b.sa[0]=c;b.Ga=g;b.hb=3*a;return b}};b4w.module.__scenegraph=function(a,t){function p(a,b){var c=[];n.yi(a,function(b,d,e){-1<c.indexOf(e)?n.i3(a,b,d,e,J(e)):c.push(e)});n.ja(a,function(a,e){for(var f=0;f<e.rb.length;f++){var g=e.rb[f];b||e.type!=d.Ge&&e.type!=d.Zd&&e.type!=d.Fh||(g.Ed=!0);-1<c.indexOf(g)?e.rb[f]=J(g):c.push(g)}})}function c(a,c){n.ja(a,function(b,e){e.type==d.uJ&&n.Xl(a,b,function(a,b){if(b.type==d.uj)for(var c=0;c<b.rb.length;c++){var e=b.rb[c];e.ha=G.U;e.ka=G.U}});c||n.Xl(a,b,function(a,b,c){"DEPTH"==c.from&&(c.Ed=
!0)})});n.ja(a,function(c){var d={};b(a,c,d);for(var e in d){c=d[e];for(var f=c[0],g=0;g<c.length;g++)if(c[g].ha==G.U){f=c[g];break}for(var k=c[0],g=0;g<c.length;g++)if(c[g].ka==G.U){k=c[g];break}for(var l=c[0],g=0;g<c.length;g++)if(!c[g].Ed){l=c[g];break}for(g=0;g<c.length;g++)c[g].ha=f.ha,c[g].ka=k.ka,c[g].Ed=l.Ed}})}function b(a,c,e){n.Xl(a,c,function(c,d,f){f.active&&f.from==f.to&&(e[f.from]=e[f.from]||[],-1==e[f.from].indexOf(f)&&e[f.from].push(f),b(a,c,e))});n.Bn(a,c,function(a,b,c){c.active&&
(e[c.from]=e[c.from]||[],-1==e[c.from].indexOf(c)&&e[c.from].push(c))});c=n.lb(a,c);if(c.type==d.uj)for(var f=0;f<c.rb.length;f++){var g=c.rb[f];e[g.from].push(g)}}function k(a){var b=[d.uj,d.dE,d.Ix,d.Ge,d.Zd,d.Dt];r.Mb||b.push(d.xJ);var c=n.TI(a),e=[];n.ja(c,function(a,d){for(var f=0;f<d.rb.length;f++){var k=d.rb[f];-1<b.indexOf(d.type)&&(k.En=!0);var l=C(e,k,g(k));k.Xa=l;d.xi[f]=l}for(f=0;f<d.xi.length;f++)l=d.xi[f],z(e,l);n.Bn(c,a,function(f,k,l){if(!l.Xa){if(-1<b.indexOf(d.type))l.En=!0;else if((f=
M(c,a,l.from))&&l.active&&!l.Xa){m(e,f);l.Xa=f;return}f=C(e,l,g(l));l.Xa=f}});n.Xl(c,a,function(a,b,c){z(e,c.Xa)});n.Bn(c,a,function(a,b,c){c.Xa&&"NONE"==c.to&&z(e,c.Xa)})})}function g(a){var b=a.to,c=a.active,d=a.Xa;a.to="";a.active=!1;a.Xa=null;var e=B.BL(a);a.to=b;a.active=c;a.Xa=d;return e}function M(a,b,c){var d=null;n.Xl(a,b,function(a,b,e){if(e.active&&e.from==e.to&&e.from==c&&e.Xa)return d=e.Xa,!0});n.Bn(a,b,function(a,b,e){if(e.active&&e.from==c&&e.Xa)return d=e.Xa,!0});return d}function m(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.SI===b&&d.Zv++}}function z(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.SI===b&&d.Zv&&d.Zv--}}function C(a,b,c){if(b.tp)return m(a,b.tp.Xa),b.tp.Xa;if(b.En)return h(b);for(var d=null,e=0;e<a.length;e++){var f=a[e];if(f.id==c&&0===f.Zv){d=f;break}}if(d&&!r.jN)return d.Zv++,d.SI;b=h(b);a.push({id:c,Zv:1,SI:b});return b}function h(a){var b=a.Ml*a.size,c=a.Nl*a.size,d=a.oD,e=a.Zf;switch(a.from){case "COLOR":return a.Ed?(d=G.xm(a.rh?G.Nx:G.Mx,d,e),G.resize(d,
b,c)):(d=G.xm(G.Di,d,e),G.resize(d,b,c),G.hI(d,a.ha,a.ka)),d;case "DEPTH":return a.Ed?(d=G.xm(a.rh?G.Lx:G.Kx,d,e),G.resize(d,b,c)):(d=G.xm(G.Xn,d,e),G.resize(d,b,c),G.hI(d,a.ha,a.ka)),d;case "CUBEMAP":return d=G.iY(b,e);case "SCREEN":case "NONE":return null;default:B.K("Wrong slink param: "+a.from)}}function e(a,b){var c=!1;n.yi(a,function(d,e,f){if(f&&(d=n.lb(a,d),e=n.lb(a,e),b(f,!1,d,e)))return c=!0});c||n.ja(a,function(a,c){for(var d=0;d<c.rb.length;d++)if(b(c.rb[d],!0,c,null))return!0})}function A(a){n.ja(a,
function(b,c){if(c.type!=d.jm){var e=c.H;n.Bn(a,b,function(a,b,c){c.Xa&&c.active&&c.Xa&&(L.TB(e,c.from,c.Xa),c.from==c.to&&b.H&&L.TB(b.H,c.from,c.Xa))});for(var g=0;g<c.rb.length;g++){var k=c.rb[g];k.active&&k.from==k.to&&L.TB(e,k.from,c.xi[g])}!e.cc&&!e.og||e.Lf||(e.Lf=f.e3(e.cc,e.og))}});n.ja(a,function(b,c){if(c.type==d.Gx||c.type==d.OD){var e=l(a,c);c.H.Uu=e[0].H.Lf}})}function q(a){var b=null,c=0;n.ja(a,function(a,d){if(d.type==S.xw){if(c==S.Y4)return b=d,!0;c++}});return b}function P(a,b){var c=
n.zl(a,b),e=d.bd("NONE"),f=n.Z(a,e),g=n.cv(a)[0];n.yi(a,function(b,c){c==g&&n.X2(a,b,g,b,f)});var k=O(b,a);n.yi(a,function(f,g,l){if(f==c){if(k){f=d.Au();n.Z(a,f);g=u("COLOR","RESOLVE",1,1,1,!0,!0);g.rh=!0;g.Ed=!0;var h=u("DEPTH","RESOLVE",1,1,1,!0,!0);h.rh=!0;h.Ed=!0;n.I(a,b,f,g);n.I(a,b,f,h);b=f}n.I(a,b,e,u(S.y4,"u_color",l.size,l.Ml,l.Nl,l.Ip,l.Zx));return!0}});n.Zc(a,f,g,u("SCREEN","NONE",.5,.5,.5,!0,!0))}function O(a,b){var c=!1,d=n.zl(b,a);n.th(b,d)&&(c=n.Zh(b,d,0),d=n.ld(b,d,c,0),"COLOR"==
d.from&&"COLOR"==d.to||"DEPTH"==d.from&&"DEPTH"==d.to?(d=n.lb(b,c),c=O(d,b)):c="RESOLVE"==d.to);return c}function I(a,b,c,e){var f=c.oa,g=b.oA,k=b.anaglyph_use,l=b.gj.hk,h=b.gj.yB;b=n.un(a,n.j0(a,e),n.cm);var m=[],q=[],v=[];b=n.clone(b,function(b){var e;if(-1<qa.indexOf(b.type))q.push(b),e=b;else{e=d.QX(b);if(e.type==d.Ge)for(var k=0;k<l.length;k++)if(l[k][0]==b){l[k]=[b,e];e.H.Kc=b.H.Kc;c.oa.push(e.H);break}if(b.type==d.Vg)for(k=0;k<l.length;k++){if(h[k][0]==b){h[k]=[b,e];e.H=l[k][1].H;break}}else-1<
f.indexOf(b.H)&&(g?(L.VA(b.H,L.eg),L.VA(e.H,L.Df),e.Io=!0):(L.VA(b.H,L.Yc),L.VA(e.H,L.gd)),f.push(e.H));var r=n.zl(a,b);n.Xl(a,r,function(a,b,c){-1<qa.indexOf(b.type)&&m.push([b,e,c])});if(b.type!==d.uj)for(k=0;k<b.rb.length;k++)e.rb[k].tp=b.rb[k];b=!0;for(k=0;k<n.Xj(a,r);k++){var B=n.kh(a,r,k),B=n.lb(a,B);-1==qa.indexOf(B.type)&&(b=!1)}b&&v.push(e)}return e},function(a){var b=J(a,!0);b.tp=a;return b});for(var B=0;B<q.length;B++)n.Dg(b,n.zl(b,q[B]));n.NE(b);k=d.eZ(g,k);B=n.Z(a,k);if(r.vA)var K=d.bd("NONE"),
y=u("COLOR","u_color",1,1,1,!0,!0);else K=d.hF(),y=u("COLOR","COPY",1,1,1,!0,!0);y.ha=G.U;y.ka=G.U;n.Z(a,K);n.I(a,e,K,y);var p=u("COLOR","u_sampler_left",1,1,1,!0,!0);p.En=!0;p.ha=G.U;p.ka=G.U;n.I(a,K,k,p);if(!e.mc){if(r.vA)var p=d.bd("NONE"),z=u("COLOR","u_color",1,1,1,!0,!0);else p=d.hF(),z=u("COLOR","COPY",1,1,1,!0,!0);n.Z(b,p);z.tp=y;var x=n.cv(b)[0],x=n.lb(b,x);n.I(b,x,p,z)}p=u("COLOR","u_sampler_right",1,1,1,!0,!0);e.mc&&(p.tp=y);p.ha=G.U;p.ka=G.U;n.UK(b,a,[n.cv(b)[0],B,p]);for(B=0;B<m.length;B++)n.I(a,
m[B][0],m[B][1],m[B][2]);e=u("SCREEN","NONE",0,0,0,!1,!1);for(B=0;B<v.length;B++)n.I(a,K,v[B],e);n.yi(a,function(b,c,e){n.lb(a,b).type===d.uj&&(e.tp=null)});return k}function u(a,b,c,d,e,f,g){return{from:a,to:b,size:c,Ml:d,Nl:e,Ip:f,Zx:g,active:!0,Xa:null,rh:!1,Ed:!1,ha:G.Cf,ka:G.Cf,En:!1,oD:!1,Zf:!1}}function J(a,b){var c=u(a.from,a.to,a.size,a.Ml,a.Nl,a.Ip,a.Zx);c.active=a.active;!b&&a.Xa&&B.K("Failed to clone slink with attached texture");c.Xa=a.Xa;c.rh=a.rh;c.Ed=a.Ed;c.ha=a.ha;c.ka=a.ka;c.En=
a.En;c.oD=a.oD;c.Zf=a.Zf;return c}function x(a,b,c){if(b.type==c)return!0;b=v(a,b);for(var d=0;d<b.length;d++)if(x(a,b[d],c))return!0;return!1}function D(a,b,c){if(b.type==c)return!0;b=l(a,b);for(var d=0;d<b.length;d++)if(D(a,b[d],c))return!0;return!1}function l(a,b){var c=n.zl(a,b);c==n.bE&&B.K("Subscene not in graph");for(var d=[],e=n.Xj(a,c),f=0;f<e;f++){var g=n.kh(a,c,f);g!=c&&d.push(n.lb(a,g))}return d}function v(a,b){var c=n.zl(a,b);c==n.bE&&B.K("Subscene not in graph");for(var d=[],e=n.th(a,
c),f=0;f<e;f++){var g=n.Zh(a,c,f);g!=c&&d.push(n.lb(a,g))}return d}function N(a){var b=[],c=[];e(a,function(a){a.Xa&&-1==b.indexOf(a.Xa)&&(b.push(a.Xa),c.push(a.Xa,b.length-1))});return c}function E(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.Ip){var d=a.Ml,e=a.Nl;Math.round(d)!=d&&(d=d.toFixed(2));Math.round(e)!=e&&(e=e.toFixed(2));c=c+((1==d?"":d)+"Sx"+((1==e?"":e)+"S"))+(a.Zx?" FACT":" VIEW")}else d=a.Ml,e=a.Nl,c+=a.size*d+"x"+a.size*e;if("SCREEN"!=a.from){c+=" ";if(a.Ed)c+=
"RR";else{var d=a.ha,e=a.ka,f="";d==G.U?f+="L":d==G.Cf&&(f+="N");e==G.U?f+="L":e==G.Cf&&(f+="N");c+=f}for(d=0;d<b.length;d+=2)b[d]==a.Xa&&(c+=" "+b[d+1])}return c+")\\n"}var U=t("__batch"),L=t("__camera"),y=t("__config"),H=t("__debug"),n=t("__graph"),f=t("__renderer"),W=t("__shaders"),d=t("__subscene"),G=t("__textures"),B=t("__util"),S=y.Ao,r=y.L,ha=y.ds,qa=[d.zk,d.$d,d.Zd,d.dg];a.CX=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;
default:return!0}};a.Ks=e;a.xY=function(a,b,e,f){function g(c){var e=L.hd(Ea,!0);b.oa.push(e);e=d.yo(c,e,!1,W,E,Y,la,xa,a.vn);n.Z(h,e);c==d.Fh?(n.I(h,m[0],e,u("COLOR","COLOR",1,1,1,!0,!0)),e.rb.push(u("DEPTH","DEPTH",1,1,1,!0,!0))):(c=ta&&m[0].type==d.Gx?$a:m[0],n.I(h,$a,e,Ia),n.I(h,c,e,cb));Ma&&(n.I(h,Ma,e,Qa),n.I(h,Ma,e,Ha));for(c=0;c<K.length;c++)n.I(h,K[c],e,z[c]);bb&&n.I(h,bb,e,Ab);if(x.length){var f=x.length;for(c=0;c<f;c++)n.I(h,x[c],e,C[c])}if(t.length)for(c=0;c<t.length;c++)n.I(h,t[c],e,
D[c]);lc&&n.I(h,lc,e,id);return e}var h=n.create(),m=[],y=[],K=[],z=[],x=[],C=[],t=[],D=[],O=[],E=a.l1,W=a.Xd,qa=a.Wf,N=a.A4,F=a.ssao,M=a.god_rays,pa=a.gj,ja=a.LP,U=a.QW,ma=a.motion_blur,Ba=a.compositing,Aa=a.antialiasing,la=a.Mn,Y=a.uT,xa=a.Bd,Oa=a.W1,ra=a.nX,V=a.v0,Ya=a.o2,Fa=a.dof,w=a.tZ,Da=a.refractions,ua=!!f.length,ta=1<r.oc;r.fw=r.fw&&!!xa&&!(ta&&F);var Pa=r.fw,cb=u("COLOR","COLOR",1,1,1,!0,!0),Ia=u("DEPTH","DEPTH",1,1,1,!0,!0);if(ta){var Na=J(Ia);cb.rh=!0;cb.Ed=!0;Ia.rh=!0;Ia.Ed=!0}var Ea=
b.oa[0];if(a.kd){var Ma=d.RY();n.Z(h,Ma);var Ga=ha.ev;Ma.H.width=Ga;Ma.H.height=Ga;var Qa=u("DEPTH","u_grass_map_depth",Ga,1,1,!1,!1);r.Mb||(Qa.ha=G.U,Qa.ka=G.U);var Ha=u("COLOR","u_grass_map_color",Ga,1,1,!1,!1);Ha.ha=G.U;Ha.ka=G.U}else Ha=Qa=Ma=null;if(xa){L.hJ(Ea,xa);for(var ga=0;ga<xa.Zi.length;ga++)for(var Mb=xa.csm_num,oa=0;oa<Mb;oa++){var T=d.$Y(oa,ga,xa,E);n.Z(h,T);K.push(T);var Ga=xa.csm_resolution,Ka=T.H;b.PR.push(Ka);Ka.width=Ga;Ka.height=Ga;T.wb=!0;var Va=0<ga?ga:oa;if(r.gw){z.push(u("COLOR",
"u_shadow_map"+Va,Ga,1,1,!1,!1));var Wa=u("DEPTH","DEPTH",Ga,1,1,!1,!1);Wa.Ed=!0;T.rb.push(Wa)}else{var La=u("DEPTH","u_shadow_map"+Va,Ga,1,1,!1,!1);r.ru&&(La.ha=G.U,La.ka=G.U,La.oD=!0);z.push(La);(H.vX()||r.QR)&&T.rb.push(u("COLOR","COLOR",Ga,1,1,!1,!1))}Ma&&(n.I(h,Ma,T,Qa),n.I(h,Ma,T,Ha))}}if(pa&&pa.aQ&&!ua)for(oa=0;oa<pa.aQ;oa++){Ka=L.ad(L.fd);Ka.width=a.Ph;Ka.height=a.Ph;L.pR(Ka,Math.PI/2,.1,100);L.Kl(Ka,!1);var ab=d.yo(d.Zd,Ka,!1,W,E,Y,la,null,a.vn);ab.Oh=B.y_();for(ga=0;6>ga;ga++)ab.zo.push(L.mY());
n.Z(h,ab);var ub=u("CUBEMAP","u_cube_reflection",a.Ph,1,1,!1,!1);ub.ha=G.U;ub.ka=G.U;D.push(ub);if(!pa.oG){var pb=u("CUBEMAP","u_sky_reflection",a.Ph,1,1,!1);pb.Zf=!0;pb.ha=G.Vn;pb.ka=G.U;O.push(pb)}Ma&&(n.I(h,Ma,ab,Qa),n.I(h,Ma,ab,Ha));if(pa.BO){var Ca=d.yo(d.dg,Ka,!1,W,E,Y,la,null,a.vn);Ca.Oh=ab.Oh;Ca.zo=ab.zo;n.Z(h,Ca);var Ta=u("DEPTH","DEPTH",a.Ph,1,1,!1,!1),Xb=u("COLOR","COLOR",a.Ph,1,1,!1,!1);n.I(h,ab,Ca,Ta);n.I(h,ab,Ca,Xb);t.push(Ca);pa.kF.push(Ca);Ma&&(n.I(h,Ma,Ca,Qa),n.I(h,Ma,Ca,Ha))}else{var Za=
u("DEPTH","DEPTH",a.Ph,1,1,!1,!1);ab.rb.push(Za);t.push(ab)}pa.Wk.push(ab)}if(pa&&0<pa.FQ.length&&!ua)for(ga=0;ga<pa.FQ.length;ga++)Ka=L.hd(Ea,!0),Ka.Kc=new Float32Array(4),b.oa.push(Ka),ab=d.yo(d.Ge,Ka,!1,W,E,Y,la,null,a.vn),n.Z(h,ab),ub=u("COLOR","u_plane_reflection",1,a.fj,a.fj,!0,!0),ub.ha=G.U,ub.ka=G.U,C.push(ub),Ma&&(n.I(h,Ma,ab,Qa),n.I(h,Ma,ab,Ha)),pa.BO?(Ca=d.yo(d.Vg,Ka,!1,W,E,Y,la,null,a.vn),n.Z(h,Ca),Ta=u("DEPTH","DEPTH",1,a.fj,a.fj,!0,!0),Xb=u("COLOR","COLOR",1,a.fj,a.fj,!0,!0),Xb.ha=G.Cf,
Xb.ka=G.Cf,n.I(h,ab,Ca,Ta),n.I(h,ab,Ca,Xb),pa.yB.push([Ca]),x.push(Ca),Ma&&(n.I(h,Ma,Ca,Qa),n.I(h,Ma,Ca,Ha))):(Za=u("DEPTH","DEPTH",1,a.fj,a.fj,!0,!0),ab.rb.push(Za),x.push(ab)),pa.hk.push([ab]);if(xa){var Fb=L.hd(Ea,!0);b.oa.push(Fb);var mb=d.aZ(Fb,E);n.Z(h,mb);mb.self_shadow_normal_offset=xa.self_shadow_normal_offset;for(oa=0;oa<K.length;oa++)T=K[oa],n.I(h,T,mb,z[oa]);if(Pa){if(La=u("DEPTH","DEPTH",1,1,1,!0,!0),ta){La.rh=!0;La.Ed=!0;var qb=d.Au();n.Z(h,qb);var ic=u("COLOR","RESOLVE",1,1,1,!0,!0);
ic.rh=!0;ic.Ed=!0;var jc=u("DEPTH","RESOLVE",1,1,1,!0,!0);jc.rh=!0;jc.Ed=!0;n.I(h,mb,qb,ic);n.I(h,mb,qb,jc)}}else ta?La=u("DEPTH","DEPTH",1,1,1,!0,!0):r.gw?(La=u("DEPTH","DEPTH",1,1,1,!0,!0),La.Ed=!0):La=Ia;if(F){var gb=u("COLOR","u_color",1,1,1,!0,!0),fb=u("DEPTH","u_depth",1,1,1,!0,!0),Sa=L.hd(Ea,!0);b.oa.push(Sa);var Jb=a.P4,Yb=d.cZ(Sa,Y,Jb);n.Z(h,Yb);var Bc=u("COLOR","u_ssao_mask",1,1,1,!0,!0);n.I(h,mb,Yb,gb);n.I(h,mb,Yb,fb);var kc=L.hd(Ea,!0);b.oa.push(kc);var Nb=d.dZ(kc,Jb);n.Z(h,Nb);var vb=
u("COLOR","u_shadow_mask",1,1,1,!0,!0);n.I(h,Yb,Nb,Bc);n.I(h,mb,Nb,fb)}Ma&&(n.I(h,Ma,mb,Qa),n.I(h,Ma,mb,Ha))}else mb=null;var $a=d.yo(d.Nb,Ea,!Pa,W,E,Y,la,null,a.vn);n.Z(h,$a);xa&&(Pa?n.I(h,mb,$a,La):mb.rb.push(La));if(ta){var zb=d.Au();n.Z(h,zb);y.push(zb);var Sb=u("COLOR","RESOLVE",1,1,1,!0,!0);Sb.rh=!0;Sb.Ed=!0;var rb=u("DEPTH","RESOLVE",1,1,1,!0,!0);rb.rh=!0;rb.Ed=!0;n.I(h,$a,zb,Sb);n.I(h,$a,zb,rb)}else y.push($a);mb&&(Bc?n.I(h,Nb,$a,vb):n.I(h,Pa&&ta?qb:mb,$a,u("COLOR","u_shadow_mask",1,1,1,!0,
!0)));Ma&&(n.I(h,Ma,$a,Qa),n.I(h,Ma,$a,Ha));if(x.length)for(var Cc=x.length,ga=0;ga<Cc;ga++)n.I(h,x[ga],$a,C[ga]);if(t.length)for(ga=0;ga<t.length;ga++)n.I(h,t[ga],$a,D[ga]);m=y;y=[];if(!ua&&a.RX){var uc=S.enabled&&(S.xw===d.Bf||S.xw===d.zi),Ka=L.hd(Ea,!0);uc||(Ka.width=Ka.height=1);b.oa.push(Ka);var vc=d.BM(Ka,!1,E);n.Z(h,vc);if(a.sj){Ka=L.hd(Ea,!0);uc||(Ka.width=Ka.height=1);b.oa.push(Ka);var wc=d.BM(Ka,!0,E);n.Z(h,wc);n.I(h,vc,wc,u("COLOR","COLOR",1,1,1,uc,!0));n.I(h,vc,wc,u("DEPTH","DEPTH",1,
1,1,uc,!0))}}else vc=null;if(!ja.refractions&&!Da||ua)lc=null;else{if(ta)lc=zb;else{if(r.vA)var lc=d.bd("NONE"),wb=u("COLOR","u_color",1,1,1,!0,!0);else lc=d.hF(),wb=u("COLOR","COPY",1,1,1,!0,!0);n.Z(h,lc);n.I(h,m[0],lc,wb)}var id=u("COLOR","u_refractmap",1,1,1,!0,!0)}if(w&&(Da||qa||N)){var Kc=L.hd(Ea,!0);b.oa.push(Kc);var bb=d.OY(Kc);n.Z(h,bb);n.I(h,ta?zb:$a,bb,u("DEPTH","u_depth",1,1,1,!0,!0));var Ab=u("COLOR","u_scene_depth",1,1,1,!0,!0);Ab.ha=G.Cf;Ab.ka=G.Cf}else bb=null;if(a.aA){var jb=g(d.Gd);
y.push(jb);m=y;y=[]}if(a.glow_materials){var Tb=L.hd(Ea,!0);b.oa.push(Tb);var sb=d.yo(d.Fe,Tb,!1,W,E,Y,la);n.Z(h,sb);bb&&n.I(h,bb,sb,Ab);lc&&n.I(h,lc,sb,id);Ma&&(n.I(h,Ma,sb,Qa),n.I(h,Ma,sb,Ha));if(x.length)for(Cc=x.length,ga=0;ga<Cc;ga++)n.I(h,x[ga],sb,C[ga]);if(t.length)for(ga=0;ga<t.length;ga++)n.I(h,t[ga],sb,D[ga]);a.aA&&n.I(h,sb,jb,u("SCREEN","NONE",0,0,0,!1,!1));n.I(h,ta?zb:$a,sb,ta?Na:Ia);var Dc=d.bd("X_GLOW_BLUR");Dc.Hb="GLOW_MASK_SMALL";Dc.uf=a.Uj.small_glow_mask_width;var mc=u("COLOR","u_color",
1,1,1,!0,!0);mc.ha=G.U;mc.ka=G.U;n.Z(h,Dc);n.I(h,sb,Dc,mc);var ac=d.bd("Y_GLOW_BLUR");ac.Hb="GLOW_MASK_SMALL";ac.uf=a.Uj.small_glow_mask_width;var $c=u("COLOR","u_color",1,.5,.5,!0,!0);$c.ha=G.U;$c.ka=G.U;n.Z(h,ac);n.I(h,Dc,ac,$c);var Lc=d.bd("X_GLOW_BLUR");Lc.Hb="GLOW_MASK_LARGE";Lc.uf=a.Uj.large_glow_mask_width;var Uc=u("COLOR","u_color",1,.5,.5,!0,!0);Uc.ha=G.U;Uc.ka=G.U;n.Z(h,Lc);n.I(h,ac,Lc,Uc);var jd=d.bd("Y_GLOW_BLUR");jd.Hb="GLOW_MASK_LARGE";jd.uf=a.Uj.large_glow_mask_width;var kd=u("COLOR",
"u_color",1,.25,.25,!0,!0);kd.ha=G.U;kd.ka=G.U;n.Z(h,jd);n.I(h,Lc,jd,kd);var ad=L.hd(Ea,!0);b.oa.push(ad);var Ec=d.PY(ad,a);n.Z(h,Ec);var Zb=u("COLOR","u_src_color",1,1,1,!0,!0);Zb.ha=G.U;Zb.ka=G.U;if(a.aA)if(ta){var bd=d.Au();n.Z(h,bd);n.I(h,jb,bd,Sb);n.I(h,jb,bd,rb);n.I(h,bd,Ec,Zb)}else n.I(h,jb,Ec,Zb);else n.I(h,ta?zb:$a,Ec,Zb);var Vc=u("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);Vc.ha=G.U;Vc.ka=G.U;n.I(h,ac,Ec,Vc);var cd=u("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);cd.ha=G.U;cd.ka=G.U;n.I(h,
jd,Ec,cd);m=[Ec];y=[]}a.aA||(jb=g(d.Gd),y.push(jb),m=y,y=[]);if(r.debug_view){Ka=L.hd(Ea,!0);b.oa.push(Ka);var Bb=d.NY(Ka);y.push(Bb);n.Z(h,Bb);n.I(h,m[0],Bb,cb);n.I(h,m[0],Bb,Ia);Ma&&(n.I(h,Ma,Bb,Qa),n.I(h,Ma,Bb,Ha));H.J3(Bb);m=y;y=[]}if(ta){var Gb=d.Au();n.Z(h,Gb);y.push(Gb);n.I(h,m[0],Gb,Sb);n.I(h,m[0],Gb,rb);m=y;y=[]}var xb=m.slice(0);if(!ua&&a.ZV){Ka=L.hd(Ea,!0);b.oa.push(Ka);var nb=d.IY(Ka);n.Z(h,nb);n.I(h,m[0],nb,ta?Na:Ia)}if(M&&w&&!ua){var Kb=V.Wm,ld=V.intensity,Mc=V.sn,hb=m[0],Nc=W?!0:!1,
bc=u("DEPTH","u_input",1,1,1,!0,!0),Fc=u("COLOR","u_input",1,.25,.25,!0,!0);Fc.ha=G.U;Fc.ka=G.U;var cc=Kb/Mc,Wc=L.hd(Ea,!0);b.oa.push(Wc);var Ub=d.iF(Wc,Nc,Kb,!0,cc,E,Mc);n.Z(h,Ub);n.I(h,hb,Ub,bc);var cc=Kb/Mc*.5,Ob=L.hd(Ea,!0);b.oa.push(Ob);var Cb=d.iF(Ob,Nc,Kb,!1,cc,E,Mc);n.Z(h,Cb);n.I(h,Ub,Cb,Fc);var cc=Kb/Mc*.25,xc=L.hd(Ea,!0);b.oa.push(xc);var kb=d.iF(xc,Nc,Kb,!1,cc,E,Mc);n.Z(h,kb);n.I(h,Cb,kb,Fc);var Gc=d.QY(ld,E);y.push(Gc);n.Z(h,Gc);var nc=u("COLOR","u_main",1,1,1,!0,!0);nc.ha=G.U;nc.ka=G.U;
n.I(h,hb,Gc,nc);var Oc=u("COLOR","u_god_rays",1,1,1,!0,!0);Oc.ha=G.U;Oc.ka=G.U;n.I(h,kb,Gc,Oc);m=y;y=[]}if(U&&!ua){var hb=m[0],Hb=d.TY();n.Z(h,Hb);nc=u("COLOR","u_input",1,1,1,!0,!0);nc.ha=G.U;nc.ka=G.U;n.I(h,hb,Hb,nc);var Lb=U.key,yc=U.edge_lum,oc=L.hd(Ea,!0);b.oa.push(oc);var tb=d.UY(Lb,yc,E,oc);n.Z(h,tb);var Pb=u("COLOR","u_luminance",1,.25,.25,!0,!0);Pb.ha=G.U;Pb.ka=G.U;if(U.adaptive){var yb=d.JY();n.Z(h,yb);yb.H.width=1;yb.H.height=1;var Db=u("COLOR","u_input",1,.25,.25,!0,!0);Db.Zf=!0;Db.ha=
G.Vn;Db.ka=G.U;if(r.Mb)Pb.Zf=!0,Pb.ha=G.Vn,n.I(h,Hb,yb,Db);else{var Ra=d.zY(),pc=u("COLOR","u_color",1,.25,.25,!0,!0);n.Z(h,Ra);n.I(h,Hb,Ra,pc);n.I(h,Ra,yb,Db)}n.I(h,yb,tb,u("COLOR","u_average_lum",1,1,1,!1,!1));tb.$n=!0}else tb.$n=!1,tb.average_luminance=U.average_luminance;n.I(h,hb,tb,u("COLOR","u_main",1,1,1,!0,!0));n.I(h,Hb,tb,Pb);for(var Qb=tb,dc=1,db=[],oa=0;5>oa;oa++)Dc=d.bd("X_BLOOM_BLUR"),Dc.uf=a.Uj.small_glow_mask_width,mc=u("COLOR","u_color",1,dc,dc,!0,!0),mc.ha=G.U,mc.ka=G.U,n.Z(h,Dc),
n.I(h,Qb,Dc,mc),dc/=2,ac=d.bd("Y_BLOOM_BLUR"),ac.uf=a.Uj.small_glow_mask_width,$c=u("COLOR","u_color",1,dc,dc,!0,!0),$c.ha=G.U,$c.ka=G.U,n.Z(h,ac),n.I(h,Dc,ac,$c),Qb=ac,ac.Gq=dc,Dc.Gq=dc,db.push(ac,dc);var Vb=d.KY(U.blur);n.Z(h,Vb);for(oa=0;oa<db.length;oa+=2){var ac=db[oa],zc=db[oa+1],Vc=u("COLOR","u_bloom_level_"+(oa/2).toString(),1,zc,zc,!0,!0);Vc.ha=G.U;Vc.ka=G.U;n.I(h,ac,Vb,Vc)}n.I(h,hb,Vb,u("COLOR","u_main",1,1,1,!0,!0));y.push(Vb);m=y;y=[]}if(Fa&&w&&!ua){var hb=m[0],ib=L.hd(Ea,!0);b.oa.push(ib);
if(e.dof_bokeh){var Pc=u("COLOR","u_color",1,1,1,!0,!0);Pc.ha=G.U;Pc.ka=G.U;var Hc=u("DEPTH","u_depth",1,1,1,!0,!0),qc=u("COLOR","u_color",1,.5,.5,!0,!0);qc.ha=G.Cf;qc.ka=G.Cf;var Rb=u("COLOR","u_color",1,.5,.5,!0,!0);Rb.ha=G.Cf;Rb.ka=G.Cf;var Qc=u("COLOR","u_blurred1",1,.5,.5,!0,!0);Qc.ha=G.U;Qc.ka=G.U;var dd=u("COLOR","u_blurred2",1,.5,.5,!0,!0);dd.ha=G.U;dd.ka=G.U;var ed=xb[0];if(e.oe){var Ib=L.hd(Ea,!0);b.oa.push(Ib);var Ac=d.gF(Ib,"COC_FOREGROUND");Ib.dof_distance=e.dof_distance;Ib.dof_object=
e.dof_object;Ib.dof_front_start=e.dof_front_start;Ib.dof_front_end=e.dof_front_end;Ib.dof_rear_start=e.dof_rear_start;Ib.dof_rear_end=e.dof_rear_end;Ib.dof_power=e.dof_power;Ib.dof_bokeh=e.dof_bokeh;Ib.dof_bokeh_intensity=e.dof_bokeh_intensity;Ib.oe=e.oe;Ib.dof_on=!0;n.Z(h,Ac);n.I(h,hb,Ac,Pc);n.I(h,ed,Ac,Hc);var Ad=d.bd("X_ALPHA_BLUR");n.Z(h,Ad);n.I(h,Ac,Ad,qc);var ec=d.bd("Y_ALPHA_BLUR");n.Z(h,ec);n.I(h,Ad,ec,Rb);var eb=L.hd(Ea,!0),fc=d.gF(eb,"COC_COMBINE");b.oa.push(eb);eb.dof_distance=e.dof_distance;
eb.dof_object=e.dof_object;eb.dof_front_start=e.dof_front_start;eb.dof_front_end=e.dof_front_end;eb.dof_rear_start=e.dof_rear_start;eb.dof_rear_end=e.dof_rear_end;eb.dof_power=e.dof_power;eb.dof_bokeh=e.dof_bokeh;eb.dof_bokeh_intensity=e.dof_bokeh_intensity;eb.oe=e.oe;eb.dof_on=!0;n.Z(h,fc);n.I(h,hb,fc,Pc);n.I(h,ed,fc,Hc);n.I(h,ec,fc,u("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else eb=L.hd(Ea,!0),b.oa.push(eb),fc=d.gF(eb,"COC_ALL"),eb.dof_distance=e.dof_distance,eb.dof_object=e.dof_object,eb.dof_front_start=
e.dof_front_start,eb.dof_front_end=e.dof_front_end,eb.dof_rear_start=e.dof_rear_start,eb.dof_rear_end=e.dof_rear_end,eb.dof_power=e.dof_power,eb.dof_bokeh=e.dof_bokeh,eb.dof_bokeh_intensity=e.dof_bokeh_intensity,eb.oe=e.oe,eb.dof_on=!0,n.Z(h,fc),n.I(h,hb,fc,Pc),n.I(h,ed,fc,Hc);var Wb=d.bd("X_DOF_BLUR");Wb.H.dof_bokeh_intensity=e.dof_bokeh_intensity;n.Z(h,Wb);n.I(h,fc,Wb,qc);var Xa=d.bd("Y_DOF_BLUR");Xa.H.dof_bokeh_intensity=e.dof_bokeh_intensity;n.Z(h,Xa);n.I(h,Wb,Xa,Rb);var lb=d.bd("Y_DOF_BLUR");
lb.H.dof_bokeh_intensity=e.dof_bokeh_intensity;n.Z(h,lb);n.I(h,Wb,lb,Rb);var gc=d.CM(ib);ib.dof_distance=e.dof_distance;ib.dof_object=e.dof_object;ib.dof_front_start=e.dof_front_start;ib.dof_front_end=e.dof_front_end;ib.dof_rear_start=e.dof_rear_start;ib.dof_rear_end=e.dof_rear_end;ib.dof_power=e.dof_power;ib.dof_bokeh=e.dof_bokeh;ib.dof_bokeh_intensity=e.dof_bokeh_intensity;ib.oe=e.oe;ib.dof_on=!0;y.push(gc);n.Z(h,gc);n.I(h,hb,gc,u("COLOR","u_sharp",1,1,1,!0,!0));n.I(h,Xa,gc,Qc);n.I(h,lb,gc,dd)}else{var Xc=
u("COLOR","u_color",1,1,1,!0,!0);Xc.ha=G.U;Xc.ka=G.U;var hc=u("COLOR","u_color",1,1,1,!0,!0);hc.ha=G.U;hc.ka=G.U;Wb=d.bd("X_BLUR");n.Z(h,Wb);n.I(h,hb,Wb,Xc);var Yc=d.bd("Y_BLUR");n.Z(h,Yc);n.I(h,Wb,Yc,hc);var Zd=xb[0],gc=d.CM(ib);ib.dof_distance=e.dof_distance;ib.dof_object=e.dof_object;ib.dof_front_start=e.dof_front_start;ib.dof_front_end=e.dof_front_end;ib.dof_rear_start=e.dof_rear_start;ib.dof_rear_end=e.dof_rear_end;ib.dof_power=e.dof_power;ib.dof_bokeh=e.dof_bokeh;ib.dof_bokeh_intensity=e.dof_bokeh_intensity;
ib.oe=e.oe;ib.dof_on=!0;y.push(gc);n.Z(h,gc);n.I(h,hb,gc,u("COLOR","u_sharp",1,1,1,!0,!0));n.I(h,Yc,gc,u("COLOR","u_blurred",1,1,1,!0,!0));n.I(h,Zd,gc,u("DEPTH","u_depth",1,1,1,!0,!0))}m=y;y=[]}if(a.sj){var fd=g(d.Fh);y.push(fd);m=y;y=[]}if(ma&&!ua){var Ld=m[0],md=d.VY(Oa.mb_decay_threshold,Oa.mb_factor);y.push(md);n.Z(h,md);n.I(h,Ld,md,u("COLOR","u_mb_tex_curr",1,1,1,!0,!0));md.rb.push(u("COLOR","u_mb_tex_accum",1,1,1,!0,!0));m=y;y=[]}if(!ua&&a.outline){var hb=m[0],Md=L.hd(Ea,!0);b.oa.push(Md);var Qd=
d.XY(Md,E);n.Z(h,Qd);var ud=d.bd("X_EXTEND"),$d=u("COLOR","u_color",1,1,1,!0,!0),$b=u("COLOR","u_outline_mask",1,1,1,!0,!0);$b.ha=G.U;$b.ka=G.U;ud.bp=!0;n.Z(h,ud);n.I(h,Qd,ud,$d);var td=u("COLOR","u_color",1,.5,.5,!0,!0);td.ha=G.U;td.ka=G.U;var Bd=d.bd("Y_EXTEND");Bd.bp=!0;n.Z(h,Bd);n.I(h,ud,Bd,td);Wb=d.bd("X_BLUR");Wb.bp=!0;n.Z(h,Wb);n.I(h,Bd,Wb,td);var Rd=u("COLOR","u_color",1,.25,.25,!0,!0);Rd.ha=G.U;Rd.ka=G.U;var Cd=u("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);Cd.ha=G.U;Cd.ka=G.U;Yc=d.bd("Y_BLUR");
Yc.bp=!0;n.Z(h,Yc);n.I(h,Wb,Yc,Rd);var rc=d.WY(Ya);n.Z(h,rc);var Dd=u("COLOR","u_outline_src",1,1,1,!0,!0);Dd.ha=G.U;Dd.ka=G.U;n.I(h,hb,rc,Dd);n.I(h,Qd,rc,$b);n.I(h,Yc,rc,Cd);y.push(rc);m=y;y=[]}p(h,w);if((a.anaglyph_use||a.oA||a.pw)&&!ua){var Sd=I(h,a,b,m[0]);y.push(Sd);m=y;y=[]}if(Ba&&!ua){var hb=m[0],nd=d.MY(ra.brightness,ra.contrast,ra.exposure,ra.saturation),vd=u("COLOR","u_color",1,1,1,!0,!0);vd.ha=G.U;vd.ka=G.U;(a.anaglyph_use||a.oA||a.pw)&&!ua&&(vd.En=!0);n.Z(h,nd);n.I(h,hb,nd,vd);y.push(nd);
m=y;y=[]}if(!m[0].mc||m[0].type==d.uj||m[0].type==d.Gx){var wd=d.bd("NONE");n.Z(h,wd);var Ed=u("COLOR","u_color",1,1,1,!0,!0);Ed.ha=G.U;Ed.ka=G.U;n.I(h,m[0],wd,Ed);y.push(wd);m=y;y=[]}if(Aa){hb=m[0];if(r.smaa){var od=u("COLOR","u_color",1,1,1,!0,!1);od.ha=G.U;od.ka=G.U;var Fd=d.jF(d.Hx,a);n.Z(h,Fd);n.I(h,hb,Fd,od);var pd=d.jF(d.Ht,a);n.Z(h,pd);n.I(h,Fd,pd,od);var Td=u("COLOR","u_search_tex",1,1,1,!1,!1),sc=u("COLOR","u_area_tex",1,1,1,!1,!1);Td.ha=G.U;Td.ka=G.U;sc.ha=G.U;sc.ka=G.U;pd.rb.push(Td);
pd.rb.push(sc);var xd=d.jF(d.Ix,a);n.Z(h,xd);n.I(h,hb,xd,od);var Gd=u("COLOR","u_blend",1,1,1,!0,!1);Gd.ha=G.U;Gd.ka=G.U;n.I(h,pd,xd,Gd);y.push(xd)}else{var tc=d.HY(a);n.Z(h,tc);var ob=u("COLOR","u_color",1,1,1,!0,!1);ob.ha=G.U;ob.ka=G.U;(a.anaglyph_use||a.oA||a.pw)&&!ua&&(ob.En=!0);n.I(h,hb,tc,ob);y.push(tc)}m=y;y=[]}y.push(m[0]);vc&&(wc?y.push(wc):y.push(vc));nb&&y.push(nb);Ga=1;if(a.tC.IQ){var Xd=a.tC,Nd=a.Mn,yd=Nd.Ep,Ga=yd?yd.sS:Ga,Hd=d.bZ(Nd,E,Xd,Ga);n.Z(h,Hd);y.push(Hd);if(O.length){var Rc=
d.SY(E,Ga);n.Z(h,Rc);n.I(h,Hd,Rc,O[0]);var Ic=u("CUBEMAP","u_irradiance",a.Ph,1,1,!1);Ic.Zf=!1;Ic.ha=G.U;Ic.ka=G.U;n.I(h,Rc,$a,Ic);jb&&n.I(h,Rc,jb,Ic);sb&&n.I(h,Rc,sb,Ic);fd&&n.I(h,Rc,fd,Ic);y.push(Rc);var Sc=d.ZY(E);n.Z(h,Sc);n.I(h,Hd,Sc,O[0]);var gd=u("CUBEMAP","u_cube_r_convolution",a.Ph,1,1,!1);gd.Zf=!1;gd.ha=G.Vn;gd.ka=G.U;n.I(h,Sc,$a,gd);jb&&n.I(h,Sc,jb,gd);sb&&n.I(h,Sc,sb,gd);fd&&n.I(h,Sc,fd,gd);var qd=d.LY();n.Z(h,qd);var rd=u("COLOR","u_brdf",512,1,1,!1);rd.ha=G.U;rd.ka=G.U;n.I(h,qd,$a,rd);
jb&&n.I(h,qd,jb,rd);sb&&n.I(h,qd,sb,rd);fd&&n.I(h,qd,fd,rd)}}var Jc=d.DM();n.Z(h,Jc);for(oa=0;oa<y.length;oa++){var Eb=y[oa];switch(Eb.type){case d.Bf:case d.zi:n.I(h,Eb,Jc,u("COLOR","NONE",1,1,1,uc,!1));n.I(h,Eb,Jc,u("DEPTH","NONE",1,1,1,uc,!1));break;case d.Ie:n.I(h,Eb,Jc,u("CUBEMAP","u_sky",Ga,1,1,!1));break;case d.gm:var Id=u("CUBEMAP","u_irradiance",Ga,1,1,!1);Id.Zf=!0;Id.ha=G.Cf;Id.ka=G.Cf;n.I(h,Rc,Jc,Id);break;case d.Vp:n.I(h,Eb,Jc,u("COLOR","NONE",1,1,1,!0,!1));break;default:if(ua){var hd=
f[0],zd=u("COLOR","OFFSCREEN",1,1,1,!0,!0);zd.Xa=hd;n.I(h,y[oa],Jc,zd);for(ga=1;ga<f.length;ga++){var Od=f[ga],Jd=d.bd("NONE");n.Z(h,Jd);n.I(h,y[oa],Jd,u("COLOR","SCALE",1,1,1,!0,!0));var sd=Od.Ol/hd.Ol,zd=u("COLOR","OFFSCREEN",1,sd,sd,!0,!0);zd.Xa=Od;n.I(h,Jd,Jc,zd)}}else n.I(h,y[oa],Jc,u("SCREEN","NONE",1,1,1,!0,!1))}}zb&&!v(h,zb).length&&(n.Dg(h,n.zl(h,zb)),n.NE(h));p(h,w);c(h,w);if(S.enabled){var Ud=q(h);Ud&&P(h,Ud)}k(h);A(h);xa&&n.ja(h,function(a,b){if(b.type==d.Wg||b.type==d.Gd||b.type==d.Fh){for(var c=
0,e=l(h,b),f=0,g=0;g<e.length;g++){var k=e[g];k.type==d.$d&&(f++,b.Cl=b.Cl||[],b.Cl[0<k.xh?k.xh:c]=k.H.Ib,c++)}b.Us&&b.Ts||(r.TA?b.Qw=new Float32Array(9*f):(b.Us=new Float32Array(4*f),b.Ts=new Float32Array(4*f)))}});if(!pa.oG)for(oa=0;oa<D.length;oa++)D[oa].active=!1;return h};a.c2=function(a,b,c){var e=[];n.ja(a,function(b,c){if(-1==qa.indexOf(c.type)&&c.rb.length&&x(a,c,d.Gh))for(var f=0;f<c.rb.length;f++){var g=c.rb[f];-1==e.indexOf(g)&&e.push(g)}});n.yi(a,function(b,c,f){b=n.lb(a,b);c=n.lb(a,
c);-1==qa.indexOf(b.type)&&x(a,c,d.Gh)&&-1==e.indexOf(f)&&e.push(f)});for(var f=0;f<e.length;f++)e[f].Ml*=b,e[f].Nl*=c};a.ye=function(a,b,c){var d=a.uf;a.Aw[0]=b*a.Lb[0]*d;a.Aw[1]=c*a.Lb[1]*d};a.Td=function(a,b){a.uf=b};a.wY=function(){var a=n.create(),b=d.YY(),c=L.ad(L.Ac);c.width=512;c.height=512;b.H=c;n.Z(a,b);b.rb.push(u("COLOR","u_color",512,1,1,!1,!1));c=d.DM();n.Z(a,c);n.I(a,b,c,u("COLOR","NONE",512,1,1,!1,!1));k(a);A(a);return a};a.h_=function(a){var b=null;n.ja(a,function(a,c){return c.H&&
null===c.H.Lf?(b=c,!0):!1});return b};a.sd=function(a,b,c){a=l(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};a.Oz=function(a,b,c){a=l(a,b);b=[];for(var d=0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};a.$ba=x;a.cca=D;a.f0=l;a.l0=v;a.Vb=function(a,b){var c=null;n.ja(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};a.nZ=function(a){var b="digraph scenegraph {\n",b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',
c=N(a);n.ja(a,function(a,e){var f=b+="    ",g=d.QC(e);if(e.H){for(var g=g+"\\n",k=0;k<c.length;k+=2){var h=e.H.cc;c[k]==h&&(g=G.xr(h)?g+("CR"+c[k+1]+" "):g+("C"+c[k+1]+" "))}for(k=0;k<c.length;k+=2)h=e.H.og,c[k]==h&&(g=G.xr(h)?g+("DR"+c[k+1]):g+("D"+c[k+1]))}e.rb.length&&(g+="\\n-----\\n");for(k=0;k<e.rb.length;k++)g+=E(e.rb[k],c);b=f+(String(a)+' [label="'+g+'" color="black" style="'+((e.type==d.jm?"dotted":e.enqueue?"solid":"dashed")+",bold")+'"];\n')});n.yi(a,function(a,d,e){b+="    ";b+=String(a)+
" -> "+String(d)+' [label="'+E(e,c)+'" style="'+(e.active?"solid":"dotted")+'"];\n'});return b+="}"};a.yY=function(a){a=n.h5(a);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.enqueue&&b.push(d)}return b};a.uo=function(a,b,c){var e=n.zl(a,b);n.Xl(a,e,function(a,b,e){if(e.active){switch(e.from){case "COLOR":case "CUBEMAP":var f=b.H.cc;break;case "DEPTH":f=b.H.og;break;case "SCREEN":f=null;break;case d.Zd:return;default:B.K("Wrong slink")}switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;
default:f||B.K("Connection of SCREEN is forbidden"),f.bg&&B.K("Batch texture can't use renderbuffer"),W.RL(c.Gb,e.to)&&U.Ji(c,f,e.to)}}});for(a=0;a<b.rb.length;a++){var e=b.rb[a],f=b.xi[a];switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;default:f.bg&&B.K("Batch texture can't use renderbuffer"),W.RL(c.Gb,e.to)&&U.Ji(c,f,e.to)}}}};b4w.module.__shaders=function(a,t){function p(){return{Lg:"",gf:"",Oi:[],Qf:[],status:0,by:0,VC:0}}function c(a){var b=p();b.Lg=a.Lg;b.gf=a.gf;b.Oi=H.Y(a.Oi);b.Qf=H.Y(a.Qf);b.status=a.status;b.by=a.by;b.VC=a.VC;return b}function b(a,b,c){var d=a.Oi;"string"==typeof c?(a=k(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function k(a,b){for(var c=a.Oi,d=0;d<c.length;d++)if(c[d][0]==b)return c[d];return!1}function g(a,b){var c=a+b;if(!(c in S)){var d=O(W.shaders_path,
a),e=O(W.shaders_path,b),d=u(d),e=u(e),f;for(f in e)d[f]=e[f];e=[];for(f in d)e.push([f,d[f]]);S[c]=e}return S[c]}function M(a,b){return a+b}function m(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(M,0)}function z(a,b){var c=P(a.type),d=P(b.type),e=a.io,f=b.io;return c>d?-1:c<d?1:e>f?-1:e<f?1:0}function C(a){if(n.Mb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=K}else b=pa;a=a.split(";").map(function(a){return(a=
a.match(b))&&{type:a[2],io:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return e(a,aa,f.WA)}function h(a,b,c){a=a.split(";");for(var d=[],f=0;f<a.length;f++){var g=a[f].match(qa);g&&d.push({type:g[2],io:g[4]?parseInt(g[4],10):1})}return e(d,b,c)}function e(a,b,c){function d(){for(var c=0;l<a.length;){var d=a[l];if(3!=P(d.type))break;c+=q(d.type)*d.io;l++}k=h+c;if(k>wa)return!1;A(b,h,c,0,3);return!0}function e(){for(var c=wa-k,d=c,e=c;l<a.length;){var f=a[l];if(2!=P(f.type))break;f=q(f.type)*
f.io;if(f<=d)d-=f;else if(f<=e)e-=f;else return!1;l++}e=c-e;A(b,k,c-d,0,2);A(b,wa-e,e,2,2);return!0}function f(){for(;l<a.length;){for(var d=a[l],d=q(d.type)*d.io,e=-1,f=c+1,g=-1,k=0;4>k;k++){var h=ma;h[0]=0;h[1]=1;var r;r=b;for(var n=k,m=d,v=h;ea<r.length&&15===r[ea];)ea++;for(;0<wa&&15===r[wa];)wa--;if(wa-ea<m)r=!1;else{for(var n=1<<n,B=0,y=-1,u=r.length+1,p=!1,x=ea;x<=wa;x++)x<wa&&!(r[x]&n)?p||(B=x,p=!0):(p&&(p=x-B,p>=m&&p<u&&(u=p,y=B)),p=!1);0>y?r=!1:(v[0]=y,v[1]=u,r=!0)}r&&h[1]<f&&(g=h[0],f=
h[1],e=k)}if(0>e)return!1;A(b,g,d,e,1);l++}return!0}if(!a.length)return!0;for(var g=0;g<c;g++)b[g]=0;wa=c;a.sort(z);var k=0,h=0,l=0;return function(){for(;l<a.length;){var c=a[l];if(4!=P(c.type))break;h+=q(c.type)*c.io;l++}if(h>wa)return!1;ea=h;A(b,0,h,0,4);return!0}()&&d()&&e()&&f()}function A(a,b,c,d,e){for(var f=0,g=0;g<e;g++)f|=1<<d+g;for(g=0;g<c;g++)a[b+g]|=f}function q(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function P(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function O(a,b){var c=a+b;if(G[c])return G[c];if(B){var d=B[b];if(!d)return null;d=t("__gpp_parser").kda.parse(d)}else if(d=t("shader_texts")[b],!d)return null;return G[c]=d}function I(a,b){for(var c={},d=b.Oi||[],e=0;e<d.length;e++)c[d[e][0]]=[d[e][1]];for(e=0;e<b.Qf.length;e++)c["USE_NODE_"+b.Qf[e].id]=["1"];n.Mb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],
c.GLSL_IN=["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],n.WC?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=n.ru&&!n.gw?["sampler2DShadow"]:["sampler2D"];for(var f in c)c[f][0].constructor!=String&&y.warn("Warning! The value of a directive '"+f+"' is not of type string.");return c}function u(a){function b(a){"var"==a.a?d[a.c]=a.b.join(""):"include"==a.a&&(a=O(W.shaders_path,
W.OR+a.F),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var e=0;e<a.length;e++)c(a[e],b,d);else if(a instanceof Object&&a){b&&b(a);for(e in a)c(a[e],b,d);d&&d(a)}}var d={};c(a,b);return d}function J(a,b,c){function d(b){b=b.f;for(var c=0;c<b.length;c++){var l=b[c];switch(l.a){case "cond":a:for(var l=l.f,n=0;n<l.length;n++){var u=l[n];switch(u.a){case "if":case "elif":if(e(u.j)){d(u.l);break a}break;case "else":d(u.l);break a;case "ifdef":u.c in q&&d(u.l);break;case "ifndef":u.c in q||d(u.l)}}break;
case "include":l=l.F;n=O(W.shaders_path,W.OR+l);B.push("include/"+l);d(n);B.pop();break;case "var":break;case "define":q[l.c]=l.b;break;case "error":H.K("Shader error: #error "+l.b.join(" "));break;case "line":break;case "pragma":m.push("#pragma "+l.c+" "+l.b.join(" "));break;case "undef":delete q[l.c];break;case "warning":y.warn("Shader warning: #warning "+l.b.join(" "));break;case "extension":l=h(l.b,q,v,!1);m.push("#extension "+l.join(" "));break;case "version":l=h(l.b,q,v,!1),m.push("#version "+
l.join(" "));case "#":break;case "node":p[l.c]=l;break;case "nodes_global":l=r;for(n=0;n<l.length;n++){var u=l[n],z=p[u.id];if(z)for(var K=0,A=0;A<z.B.length;A++){var t=z.B[A];if("node_param"==t.a){var Z;if("PARTICLE_INFO"==u.id&&t.g)if(1==q.PARTICLE_BATCH)switch(Z=!1,K){case 0:Z=N(u.jb,"PART_INFO_IND")||N(u.jb,"PART_INFO_AGE")||N(u.jb,"PART_INFO_LT")||N(u.jb,"PART_INFO_SIZE");break;case 1:Z=N(u.jb,"PART_INFO_LOC");break;case 2:Z=N(u.jb,"PART_INFO_VEL");break;case 3:Z=N(u.jb,"PART_INFO_A_VEL");break;
case 4:Z=N(u.jb,"PART_INFO_IND")}else Z=!1;else Z=!0;Z&&(t=t.i.join(" ")+" ","vert"==a?t+=u.yf[K]:"frag"==a&&(t+=u.nb[K],null!==u.Vr[K]&&(t+="="+u.Vr[K])),t+=";",k(g(t)));K++}}}break;case "nodes_main":l=r;for(n=0;n<l.length;n++)if(u=l[n],z=p[u.id]){K={};w=C=G=0;A=z;t=u;Z=A;for(var D={},R=0;R<Z.C.length;R++){var L=Z.C[R];D[L.c]=[L.b.join("")]}Z=D;for(D=0;D<t.jb.length;D++)R=t.jb[D][0],R in Z&&(Z[R]=[t.jb[D][1]]);for(D=R=0;D<A.B.length;D++)L=A.B[D],"node_out"==L.a&&(Z["USE_OUT_"+L.c]=[-1<x.indexOf(t.outputs[R])|
0],R++);A=Z;t=u;Z=z.B;D=K;R=A;for(L=0;L<Z.length;L++){var E=Z[L];switch(E.a){case "node_in":var ha=t.inputs[G];if(null!==t.wG[G]){if(("MATERIAL_BEGIN"==t.id&&3===G||!R.MATERIAL_EXT&&("MATERIAL_BEGIN"==t.id&&4===G||"MATERIAL_END"==t.id&&3===G||"MATERIAL_END"==t.id&&4===G||"MATERIAL_END"==t.id&&5===G)||"TEXTURE_COLOR"==t.id||"TEXTURE_NORMAL"==t.id)&&E.g){D[E.c]=t.wG[G];G++;continue}var S=E.i.join(" ")+" ",S=S+(ha+"="+t.wG[G]+";");k(g(S))}D[E.c]=ha;G++;break;case "node_out":ha=t.outputs[C];if(!E.g||
-1<x.indexOf(ha))S=E.i.join(" ")+" ",S+=ha+";",k(g(S)),D[E.c]=ha;C++;break;case "node_param":"vert"==a?ha=t.yf[w]:"frag"==a&&(ha=t.nb[w]),D[E.c]=ha,w++}}m.push("{");f(u,z.u,K,A);m.push("}")}break;case "txt":k(l.b);break;default:H.K("Unknown element type: "+l.a)}}}function e(a,b){var c;c=h(a,q,v,!0,b);for(var d=[],e=0;e<c.length;e++)if(c[e]instanceof Object)switch(c[e].a){case "conditional_expr":var f=d.pop(),g=d.pop();d.pop()?d.push(g):d.push(f);break;case "logical_or_expr":for(var g=d.pop(),k=0;k<
c[e].o-1;k++)f=d.pop(),g=g||f;d.push(g);break;case "logical_and_expr":g=d.pop();for(k=0;k<c[e].o-1;k++)f=d.pop(),g=g&&f;d.push(g);break;case "logical_bitor_expr":g=d.pop();for(k=0;k<c[e].o-1;k++)g|=d.pop();d.push(g);break;case "logical_bitxor_expr":g=d.pop();for(k=0;k<c[e].o-1;k++)g^=d.pop();d.push(g);break;case "logical_bitand_expr":g=d.pop();for(k=0;k<c[e].o-1;k++)g&=d.pop();d.push(g);break;case "equal_expr":f=d.pop();g=d.pop();d.push(g==f);break;case "non_equal_expr":f=d.pop();g=d.pop();d.push(g!=
f);break;case "le_expr":f=d.pop();g=d.pop();d.push(g<=f);break;case "ge_expr":f=d.pop();g=d.pop();d.push(g>=f);break;case "l_expr":f=d.pop();g=d.pop();d.push(g<f);break;case "g_expr":f=d.pop();g=d.pop();d.push(g>f);break;case "left_shift_expr":g=d.pop();f=d.pop();d.push(g<<f);break;case "right_shift_expr":g=d.pop();f=d.pop();d.push(g>>f);break;case "add_expr":g=d.pop();f=d.pop();d.push(g+f);break;case "sub_expr":g=d.pop();f=d.pop();d.push(g-f);break;case "mul_expr":g=d.pop();f=d.pop();d.push(g*f);
break;case "div_expr":g=d.pop();f=d.pop();d.push(g/f);break;case "mod_expr":g=d.pop();f=d.pop();d.push(g%f);break;case "pre_inc_expr":case "post_inc_expr":f=d.pop();d.push(++f);break;case "pre_dec_expr":case "post_dec_expr":f=d.pop();d.push(--f);break;case "positive_expr":f=d.pop();d.push(+f);break;case "negative_expr":f=d.pop();d.push(-f);break;case "one_compl_expr":f=d.pop();d.push(~f);break;case "logic_negative_expr":f=d.pop();d.push(!f);break;default:H.K("Unknown operation type: "+c[e].a)}else f=
c[e],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(f)?(d.push(0),0!=f.indexOf("USE_NODE_")&&(g=B[B.length-1],g in u||(u[g]=[]),-1==u[g].indexOf(f)&&(u[g].push(f),y.error("Undefined directive '"+f+"' in shader '"+g+"'. Should it be defined with #var/#node_var or #define?")))):d.push(parseFloat(c[e]));1==d.length?c=d[0]:(H.K("Incorrect expression: "+c.join(" ")),c=void 0);return c}function f(a,b,c,d){for(var g=0;g<b.length;g++){var h=b[g];switch(h.a){case "node_cond":a:for(var l=a,h=h.f,r=c,n=d,m=0;m<h.length;m++){var v=
h[m];switch(v.a){case "node_if":case "node_elif":if(e(v.j,n)){f(l,v.u,r,n);break a}break;case "node_else":f(l,v.u,r,n);break a;case "node_ifdef":(v.c in q||v.c in n)&&f(l,v.u,r,n);break;case "node_ifndef":v.c in q||v.c in n||f(l,v.u,r,n)}}break;case "txt":l=[];for(r=0;r<h.b.length;r++)n=h.b[r],n in c?l.push(c[n]):l.push(n);k(l,d)}}}function g(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function k(b,c){var d=b;if(!n.Mb&&"frag"==a){var e=d.join(" ");A&&(e.match(/[^;]*;/)?(e=e.replace(/[^;]*;/,
""),A=!1):e="");e=e.replace(/GLSL_OUT [^;]*;/g,"");e.match(/GLSL_OUT(?:$| [^;]*)/)&&(e=e.replace(/GLSL_OUT(?:$| [^;]*)/,""),A=!0);e=e.replace(/ {2,}/g," ");(e=e.trim())?d=e.split(" "):d=[]}b=d;b.length&&(d=h(b,q,v,!1,c),m.push(d.join(" ")))}function h(a,b,c,d,e){var f=[];l(a,b,c,d,f,e);return f}function l(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var k=a[g];if(f&&k in f)k=f[k];else if(k in b)k=b[k];else{e.push(k);continue}0==k.length&&d?e.push(0):l(k,b,c,d,e,f)}}var r=c.Qf,m=[],q=I(a,c),v={},B=[c[a]],
u={},p={},x=[],z;for(z in r)for(var K in r[z].inputs)x.push(r[z].inputs[K]);var A=!1;d(b);var G=0,C=0,w=0;return m.join("\n")}function x(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function D(a){Z.deleteProgram(a.jk);Z.deleteShader(a.zD);Z.deleteShader(a.Bz);delete d[a.t4]}function l(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return v(a);case 2:return"vec2("+v(a[0])+","+v(a[1])+")";case 3:return"vec3("+v(a[0])+","+v(a[1])+","+v(a[2])+")";case 4:return"vec4("+
v(a[0])+","+v(a[1])+","+v(a[2])+","+v(a[3])+")";case 9:return"mat3("+v(a[0])+","+v(a[1])+","+v(a[2])+","+v(a[3])+","+v(a[4])+","+v(a[5])+","+v(a[6])+","+v(a[7])+","+v(a[8])+")";case 16:return"mat4("+v(a[0])+","+v(a[1])+","+v(a[2])+","+v(a[3])+","+v(a[4])+","+v(a[5])+","+v(a[6])+","+v(a[7])+","+v(a[8])+","+v(a[9])+","+v(a[10])+","+v(a[11])+","+v(a[12])+","+v(a[13])+","+v(a[14])+","+v(a[15])+")";default:H.K("Wrong glsl value dimension")}}function v(a){return a%1?String(a):String(a)+".0"}function N(a,
b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var E=t("__assets"),U=t("__config"),L=t("__debug"),y=t("__print"),H=t("__util"),n=U.L,f=U.Ni,W=U.Sf,d={},G={},B=null,S={},r="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf irradiance_skybox.glslf r_convolution_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.nK=0;a.FT=1;a.ET=2;a.IT=4;a.HT=8;a.GT=16;a.BT=32;var ha=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,qa=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,K=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,pa=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
ja=/(?:\W|^)discard(\W|$)/,ma=new Int16Array(2),aa=null,ka=null,ca=null,ea=0,wa=0,da=[],Z=null,Ja=!1;a.wh=function(a){Z=a};a.V0=p;a.OX=c;a.ya=b;a.S_=k;a.K3=function(a){a.Oi=H.Y(g(a.Lg,a.gf));b(a,"PRECISION",U.L.precision);"highp"==U.L.precision?b(a,"EPSILON",l(1E-6)):b(a,"EPSILON",l(1E-4));b(a,"CONSTANTS_HACK",n.xI|0);b(a,"SRGB",n.srgb_type);b(a,"COMPARED_MODE",n.ru|0)};a.Sba=function(a){return a.Lg};a.aba=function(a){return a.gf};a.M_=function(a){var b=JSON.stringify(a.Lg)+JSON.stringify(a.gf)+JSON.stringify(a.Oi)+
JSON.stringify(a.Qf),e=d[b];if(e)return e;var g=a.gf,k=O(W.shaders_path,a.Lg),g=O(W.shaders_path,g);if(!k||!g)return null;var k=J("vert",k,a),g=J("frag",g,a),e=0,l=m(g,ha);a.VC=l;l>f.XG&&(e|=1);aa||(aa=new Uint32Array(f.WA));ka||(ka=new Uint32Array(f.TG));ca||(ca=new Uint32Array(f.XA));h(g,ka,f.TG)||(e|=2);h(k,ca,f.XA)||(e|=4);l=n.Mb?(k.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(k.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.by=l;l>f.YG&&(e|=
8);C(g)||(e|=16);a.status=e;if(0===a.status){var e=Z,r=x(e,k,e.VERTEX_SHADER),q=x(e,g,e.FRAGMENT_SHADER),l=e.createProgram();e.attachShader(l,r);e.attachShader(l,q);e.linkProgram(l);for(var r={zD:r,Bz:q,jk:l,attributes:{},Dn:{},Lv:H.wm(),yH:H.wm(),zH:{},Kr:!0,iB:!1,AS:H.wm(),zS:H.wm(),qb:c(a),t4:b,DO:!!g.match(ja),Mh:!0},v=e.getProgramParameter(l,e.ACTIVE_ATTRIBUTES),q=0;q<v;q++){var B=e.getActiveAttrib(l,q).name;r.attributes[B]=e.getAttribLocation(l,B)}v=e.getProgramParameter(l,e.ACTIVE_UNIFORMS);
for(q=0;q<v;q++)B=e.getActiveUniform(l,q).name.split("[0]").join(""),r.Dn[B]=e.getUniformLocation(l,B);d[b]=e=r;l=!Z.getShaderParameter(e.Bz,Z.COMPILE_STATUS);r=!Z.getShaderParameter(e.zD,Z.COMPILE_STATUS);q=!Z.getProgramParameter(e.jk,Z.LINK_STATUS);l?L.JQ(e.Bz,b,g):r?L.JQ(e.zD,b,k):q&&L.k3(e.jk,b,k,g);if(l||r||q)a.status|=32,e=null}else e=null;return e};a.C1=function(){Ja=!1;if(b4w.module_check("shader_texts"))Ja=!0;else{for(var a=[],b=E.KD,c=0;c<r.length;c++){var d=H.Bl(W.shaders_path+r[c]);a.push({id:r[c],
type:b,url:d})}b=function(a,b){B||(B={});B[b]=a};a.length?E.enqueue(a,b,function(){Ja=!0}):y.error("Shaders have not been found.")}};a.QL=function(){return Ja};a.p$=function(){return da};a.HN=function(){return d};a.Ja=function(){for(var a in d)D(d[a]);for(var b in G)delete G[b];for(var c in da)delete da[c];ca=ka=aa=null;S={}};a.HX=D;a.q$=function(a){var b=a.Oi;y.log("Shader: "+a.Lg+" "+a.gf+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)y.log("  "+b[a][0],b[a][1])};a.fa=l;a.RL=function(a,
b){return b in a.Dn?!0:!1};a.reset=function(){Z=null}};b4w.module.__assets=function(a,t){function p(){return P.aP()?t(P.Sf.py).data:null}function c(){var a={Sx:null,UV:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,e=new Int8Array(c),f=0;f<c;f++)e[f]=b.charCodeAt(f);return e.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Sx=c;a.readyState=1},send:function(){a.status=
404;a.readyState=4;var b=p();b&&a.Sx in b&&(a.status=200,b[a.Sx]&&(a.response=a.UV(b[a.Sx])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function b(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];20===e.state&&c++;if(c>=v.U1)break;if(10===e.state)switch(e.state=20,c++,e.type){case a.ht:case a.Wp:case a.gt:k(e,"arraybuffer");break;case a.bm:k(e,"json");break;case a.KD:k(e,"text");break;case a.ID:g(e);break;case a.Xp:M(e);break;case a.JD:m(e);break;
case a.ax:z(e);break;case a.$w:C(e);break;default:x.K("Wrong asset type: "+e.type)}}}function k(b,e){var d=b.url.split("?v=")[0];if(d in L)"json"==e?b.jc(x.Y(L[d]),b.id,b.type,b.url,b.Qb):b.jc(L[d],b.id,b.type,b.url,b.Qb);else{var f=p(),g=f&&b.url in f?new c:new XMLHttpRequest,f=null;if("GET"==b.kk)g.open("GET",b.url,!0);else if("POST"==b.kk)switch(g.open("POST",b.url,!0),b.type){case a.KD:f="text/plain";break;case a.bm:f="application/json"}if(b.dn)for(var k in b.dn)"Content-Type"==k?f=b.dn[k]:g.setRequestHeader(k,
b.dn[k]);f&&g.setRequestHeader("Content-Type",f);"text"==e?(g.overrideMimeType("text/plain"),g.responseType="text"):"json"==e?(g.overrideMimeType("application/json"),g.responseType="text"):g.responseType=e;g.onreadystatechange=function(){if(40!=b.state&&4==g.readyState){if(200==g.status||0==g.status){var c=g.response;if(!c||"arraybuffer"==e&&0==c.byteLength)u.error("empty responce when trying to get "+b.url),b.jc(null,b.id,b.type,b.url,b.Qb);else{switch(b.type){case a.ht:try{c=I.or(c,{to:"string"})}catch(ha){u.error(ha+
" (parsing gzipped file "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}case a.bm:try{c=JSON.parse(c,b.i1)}catch(ha){u.error(ha+" (parsing JSON "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}break;case a.gt:try{c=I.or(c).buffer}catch(ha){u.error(ha+" (parsing gzipped file "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}}b.lf&&(L[d]=b.type==a.bm||b.type==a.ht?x.Y(c):c);b.jc(c,b.id,b.type,b.url,b.Qb)}}else u.error(g.status+" when trying to get "+b.url),b.jc(null,b.id,b.type,b.url,
b.Qb);b.state=30}};g.addEventListener("progress",function(a){a.lengthComputable&&b.vQ(a.loaded/a.total)},!1);g.send(b.AB)}}function g(a){var b=a.url.split("?v=")[0];if(b in n)a.jc(n[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.kk&&x.K("Unsupported request type for audio buffer");var d=(b=p())&&a.url in b?new c:new XMLHttpRequest;d.open("GET",a.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=a.state&&4==d.readyState)if(200==d.status||0==d.status){var b=d.response;
b?J.qZ(b,function(b){a.jc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.lf&&(n[a.url.split("?v=")[0]]=b)},function(){u.error("failed to decode "+a.url);a.jc(null,a.id,a.type,a.url,a.Qb);a.state=30}):(u.error("empty responce when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else u.error(d.status+" when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30};d.send()}}function M(a){var b=a.url.split("?v=")[0];if(b in y)a.jc(y[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=
a.kk&&x.K("Unsupported request type for image element");var c=document.createElement("img");l.allow_cors&&(c.crossOrigin="Anonymous");c.onload=function(){40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(y[a.url.split("?v=")[0]]=c))};c.addEventListener("error",function(){40!=a.state&&(u.error("could not load image: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=p())&&a.url in b)if(b[a.url]){var f=e(a.url);c.src="data:"+f+";base64,"+b[a.url]}else O.cp()?(b=document.createEvent("CustomEvent"),
b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url}}function m(a){var b=a.url.split("?v=")[0];if(b in H)a.jc(H[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.kk&&x.K("Unsupported request type for audio element");var c=document.createElement("audio");l.allow_cors&&(c.crossOrigin="Anonymous");c.addEventListener("loadeddata",function(){40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(H[a.url.split("?v=")[0]]=c))},!1);c.addEventListener("error",
function(){40!=a.state&&(u.error("could not load sound: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);c.addEventListener("stalled",function(){40!=a.state&&(u.error("could not load sound: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=p())&&a.url in b)if(b[a.url]){var e=A(a.url);c.src="data:"+e+";base64,"+b[a.url];40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30)}else O.cp()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),
c.dispatchEvent(b);else c.src=a.url,l.is_mobile_device&&c.load();l.aH&&(c.autoplay=!0,c.pause());setTimeout(function(){c.VV=1},5E3)}}function z(a){function b(){40!=a.state&&(u.error("could not load video: "+a.url,a.Qb),a.jc(null,a.id,a.type,a.url),a.state=30)}var c=a.url.split("?v=")[0];if(c in y)a.jc(y[c],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.kk&&x.K("Unsupported request type for video element");var e=document.createElement("video");e.muted=!0;l.allow_cors&&(e.crossOrigin="Anonymous");
e.addEventListener("loadeddata",function(){e.removeEventListener("error",b,!1);40!=a.state&&(a.jc(e,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(y[a.url.split("?v=")[0]]=e))},!1);e.addEventListener("error",b,!1);if((c=p())&&a.url in c)if(c[a.url]){var f=q(a.url);e.src="data:"+f+";base64,"+c[a.url];40!=a.state&&e.addEventListener("loadeddata",function(){a.jc(e,a.id,a.type,a.url,a.Qb);a.state=30},!1)}else O.cp()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),
e.dispatchEvent(c);else e.src=a.url,l.is_mobile_device&&e.load();if(l.aH||l.VO)e.autoplay=!0,e.pause();setTimeout(function(){e.VV=1},1E4)}}function C(a){function b(b){a.jc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.lf&&(y[a.url.split("?v=")[0]]=b)}var d=a.url.split("?v=")[0];if(d in y)a.jc(y[d],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.kk&&x.K("Unsupported request type for seq video element");var e=(d=p())&&a.url in d?new c:new XMLHttpRequest;e.open("GET",a.url,!0);e.responseType="arraybuffer";
e.onreadystatechange=function(){if(40!=a.state&&4==e.readyState)if(200==e.status||0==e.status){var c=e.response;c?h(c,b):(u.error("empty responce when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else u.error(e.status+" when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30};e.addEventListener("progress",function(b){b.lengthComputable&&a.vQ(b.loaded/b.total)},!1);e.send()}}function h(a,b){for(var c=new Int32Array(a),e=new Int8Array(a),f=c[3],g={images:[],
vL:[],Ri:c[4]},k=20,h=0;h<f;h++){var l=c[k/4],n=new Blob([e.subarray(k+4,k+4+l)],{type:"image/jpg"}),m=document.createElement("img");m.src=window.URL.createObjectURL(n);g.images.push(m);g.vL.push(n);k+=l+8-l%4}m.onload=function(){for(var a=0;a<g.images.length;a++)window.URL.revokeObjectURL(g.images[a].src);delete g.vL;b(g)}}function e(a){var b="image";switch(x.WF(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function A(a){var b="audio";switch(x.WF(a).toLowerCase()){case "ogv":case "ogg":b+=
"/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function q(a){var b="video";switch(x.WF(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var P=t("__config"),O=t("__compat"),I=t("__pako_inflate"),u=t("__print"),J=t("__sfx"),x=t("__util"),D=t("__version"),l=P.L,v=P.Ke;a.Wp=10;a.gt=20;a.bm=30;a.ht=40;a.KD=50;a.ID=60;a.Xp=70;a.JD=80;a.ax=90;a.$w=100;var N=[],E=0,U={},L={},y=
{},H={},n={};a.GC=function(a){a=a.split(".");var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};a.Hba=function(a){if(U[a])return U[a];var b=v.prevent_caching?a+"?v="+D.get_build_version():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)x.K("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return U[a]=b;x.K("Error XHR: responce is empty, GET "+a)}};a.Ja=function(){for(var a=0;a<N.length;a++)N[a].state=
40;N=[];E=0;U={}};a.enqueue=function(a,c,d,e,g){for(var f=0;f<a.length;f++){var k=a[f],k={id:k.id,type:k.type,url:k.url,lf:k.lf,kk:k.kk?k.kk:"GET",dn:k.dn?k.dn:null,AB:k.AB?k.AB:null,Qb:k.Qb?k.Qb:null,state:10,jc:c||function(){},iQ:d||function(){},vQ:e||function(){},i1:g||null,jQ:E};if(v.prevent_caching){var h=p();h&&k.url in h||(k.url+="?v="+D.get_build_version())}N.push(k)}b(N);E++};a.update=function(){b(N);for(var a=N,c=0,d=!0,e=0;e<a.length;e++){var g=a[e];g.jQ===a[c].jQ?30!==g.state&&(d=!1):
(d&&(a[e-1].iQ(),d=e-c,a.splice(c,d),e-=d),c=e,d=30===a[e].state?!0:!1);e===a.length-1&&d&&(g=a[e],a.splice(c),g.iQ())}};a.zX=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};a.JX=function(){L={};y={};H={};n={}}};b4w.module.__pako_inflate=function(a){(function(a){var p;"undefined"!==typeof window?p=window:"undefined"!==typeof self?p=self:p=this;p.s2=a()})(function(){return function p(a,b,k){function c(g){if(!b[g]){if(!a[g]){if(M)return M(g,!0);var m=Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[g]={exports:{}};a[g][0].call(m.exports,function(b){var e=a[g][1][b];return c(e?e:b)},m,m.exports,p,a,b,k)}return b[g].exports}for(var M=!1,m=0;m<k.length;m++)c(k[m]);return c}({1:[function(a,
c,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g])}}return a};b.TR=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var k={ho:function(a,b,c,g,k){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+g),k);else for(var e=0;e<g;e++)a[k+e]=b[c+e]},kN:function(a){var b,c,g,k,e;b=g=0;for(c=a.length;b<c;b++)g+=a[b].length;e=new Uint8Array(g);b=g=0;for(c=a.length;b<c;b++)k=a[b],e.set(k,g),g+=k.length;return e}},g={ho:function(a,b,c,g,k){for(var e=0;e<g;e++)a[k+e]=b[c+e]},kN:function(a){return[].concat.apply([],a)}};b.B3=function(a){a?(b.On=Uint8Array,b.kt=Uint16Array,b.lt=Int32Array,b.assign(b,k)):(b.On=Array,b.kt=Array,b.lt=Array,b.assign(b,g))};b.B3(a)},{}],2:[function(a,c,b){function k(a,b){if(65537>
b&&(a.subarray&&m||!a.subarray&&p))return String.fromCharCode.apply(null,g.TR(a,b));for(var c="",k=0;k<b;k++)c+=String.fromCharCode(a[k]);return c}var g=a("./common"),p=!0,m=!0,z=new g.On(256);for(a=0;256>a;a++)z[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;z[254]=z[254]=1;b.U4=function(a){var b,c,k,m,p,z=a.length,C=0;for(m=0;m<z;m++)c=a.charCodeAt(m),55296===(c&64512)&&m+1<z&&(k=a.charCodeAt(m+1),56320===(k&64512)&&(c=65536+(c-55296<<10)+(k-56320),m++)),C+=128>c?1:2048>c?2:65536>c?3:4;b=new g.On(C);
for(m=p=0;p<C;m++)c=a.charCodeAt(m),55296===(c&64512)&&m+1<z&&(k=a.charCodeAt(m+1),56320===(k&64512)&&(c=65536+(c-55296<<10)+(k-56320),m++)),128>c?b[p++]=c:(2048>c?b[p++]=192|c>>>6:(65536>c?b[p++]=224|c>>>12:(b[p++]=240|c>>>18,b[p++]=128|c>>>12&63),b[p++]=128|c>>>6&63),b[p++]=128|c&63);return b};b.G9=function(a){return k(a,a.length)};b.PW=function(a){for(var b=new g.On(a.length),c=0,k=b.length;c<k;c++)b[c]=a.charCodeAt(c);return b};b.YW=function(a,b){var c,g,h,m,p=b||a.length,C=Array(2*p);for(c=g=
0;c<p;)if(h=a[c++],128>h)C[g++]=h;else if(m=z[h],4<m)C[g++]=65533,c+=m-1;else{for(h&=2===m?31:3===m?15:7;1<m&&c<p;)h=h<<6|a[c++]&63,m--;1<m?C[g++]=65533:65536>h?C[g++]=h:(h-=65536,C[g++]=55296|h>>10&1023,C[g++]=56320|h&1023)}return k(C,g)};b.l6=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||!c?b:c+z[a[c]]>b?c:b}},{"./common":1}],3:[function(a,c){c.exports=function(a,c,g,p){var b=a&65535|0;a=a>>>16&65535|0;for(var k;0!==g;){k=2E3<g?2E3:
g;g-=k;do b=b+c[p++]|0,a=a+b|0;while(--k);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(a,c){c.exports={FK:0,V8:1,GK:2,S8:3,Px:4,J8:5,Z8:6,xq:0,Qx:1,QV:2,O8:-1,X8:-2,K8:-3,PV:-5,U8:0,H8:1,G8:9,L8:-1,P8:1,T8:2,W8:3,Q8:4,M8:0,I8:0,Y8:1,a9:2,N8:8}},{}],5:[function(a,c){var b=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var m=0;8>m;m++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();c.exports=function(a,c,p,m){p=m+p;for(a^=-1;m<p;m++)a=a>>>8^b[(a^c[m])&255];return a^-1}},{}],6:[function(a,
c){c.exports=function(){this.n2=this.B6=this.time=this.text=0;this.de=null;this.EF=0;this.UE=this.name="";this.E0=0;this.done=!1}},{}],7:[function(a,c){c.exports=function(a,c){var b,k,m,p,C,h,e,A,q,P,O,I,u,J,x,D,l,v,N,E,U,L,y,H;b=a.state;k=a.Zm;y=a.input;m=k+(a.bh-5);p=a.qf;H=a.ej;C=p-(c-a.ae);h=p+(a.ae-257);e=b.ez;A=b.Rg;q=b.am;P=b.Qg;O=b.window;I=b.Jm;u=b.Jd;J=b.sl;x=b.Do;D=(1<<b.ak)-1;l=(1<<b.Xq)-1;a:do b:for(15>u&&(I+=y[k++]<<u,u+=8,I+=y[k++]<<u,u+=8),v=J[I&D];;){N=v>>>24;I>>>=N;u-=N;if(N=v>>>
16&255)if(N&16){E=v&65535;if(N&=15)u<N&&(I+=y[k++]<<u,u+=8),E+=I&(1<<N)-1,I>>>=N,u-=N;15>u&&(I+=y[k++]<<u,u+=8,I+=y[k++]<<u,u+=8);v=x[I&l];c:for(;;){N=v>>>24;I>>>=N;u-=N;N=v>>>16&255;if(N&16){v&=65535;N&=15;u<N&&(I+=y[k++]<<u,u+=8,u<N&&(I+=y[k++]<<u,u+=8));v+=I&(1<<N)-1;if(v>e){a.Pb="invalid distance too far back";b.mode=30;break a}I>>>=N;u-=N;N=p-C;if(v>N){N=v-N;if(N>q&&b.$H){a.Pb="invalid distance too far back";b.mode=30;break a}U=0;L=O;if(0===P){if(U+=A-N,N<E){E-=N;do H[p++]=O[U++];while(--N);
U=p-v;L=H}}else if(P<N){if(U+=A+P-N,N-=P,N<E){E-=N;do H[p++]=O[U++];while(--N);U=0;if(P<E){N=P;E-=N;do H[p++]=O[U++];while(--N);U=p-v;L=H}}}else if(U+=P-N,N<E){E-=N;do H[p++]=O[U++];while(--N);U=p-v;L=H}for(;2<E;)H[p++]=L[U++],H[p++]=L[U++],H[p++]=L[U++],E-=3;E&&(H[p++]=L[U++],1<E&&(H[p++]=L[U++]))}else{U=p-v;do H[p++]=H[U++],H[p++]=H[U++],H[p++]=H[U++],E-=3;while(2<E);E&&(H[p++]=H[U++],1<E&&(H[p++]=H[U++]))}}else if(N&64){a.Pb="invalid distance code";b.mode=30;break a}else{v=x[(v&65535)+(I&(1<<N)-
1)];continue c}break}}else if(N&64){N&32?b.mode=12:(a.Pb="invalid literal/length code",b.mode=30);break a}else{v=J[(v&65535)+(I&(1<<N)-1)];continue b}else H[p++]=v&65535;break}while(k<m&&p<h);E=u>>3;k-=E;u-=E<<3;a.Zm=k;a.qf=p;a.bh=k<m?5+(m-k):5-(k-m);a.ae=p<h?257+(h-p):257-(p-h);b.Jm=I&(1<<u)-1;b.Jd=u}},{}],8:[function(a,c,b){function k(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function g(){this.mode=0;this.GA=!1;this.rj=0;this.rG=!1;this.total=this.check=this.ez=this.td=0;
this.head=null;this.Qg=this.am=this.Rg=this.ft=0;this.window=null;this.de=this.offset=this.length=this.Jd=this.Jm=0;this.Do=this.sl=null;this.bi=this.Dv=this.Nr=this.UP=this.Xq=this.ak=0;this.next=null;this.nf=new e.kt(320);this.Yw=new e.kt(288);this.WM=this.uP=null;this.w6=this.back=this.$H=0}function p(a){var b;if(!a||!a.state)return-2;b=a.state;a.UI=a.Dw=b.total=0;a.Pb="";b.rj&&(a.ao=b.rj&1);b.mode=1;b.GA=0;b.rG=0;b.ez=32768;b.head=null;b.Jm=0;b.Jd=0;b.sl=b.uP=new e.lt(852);b.Do=b.WM=new e.lt(592);
b.$H=1;b.back=-1;return 0}function m(a){var b;if(!a||!a.state)return-2;b=a.state;b.Rg=0;b.am=0;b.Qg=0;return p(a)}function z(a,b){var c,e;if(!a||!a.state)return-2;e=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==e.window&&e.ft!==b&&(e.window=null);e.rj=c;e.ft=b;return m(a)}function C(a,b){var c;if(!a)return-2;c=new g;a.state=c;c.window=null;c=z(a,b);0!==c&&(a.state=null);return c}function h(a,b,c,g){var k=a.state;null===k.window&&(k.Rg=1<<k.ft,k.Qg=0,k.am=0,k.window=
new e.On(k.Rg));g>=k.Rg?(e.ho(k.window,b,c-k.Rg,k.Rg,0),k.Qg=0,k.am=k.Rg):(a=k.Rg-k.Qg,a>g&&(a=g),e.ho(k.window,b,c-g,a,k.Qg),(g-=a)?(e.ho(k.window,b,c-g,g,0),k.Qg=g,k.am=k.Rg):(k.Qg+=a,k.Qg===k.Rg&&(k.Qg=0),k.am<k.Rg&&(k.am+=a)));return 0}var e=a("../utils/common"),A=a("./adler32"),q=a("./crc32"),P=a("./inffast"),O=a("./inftrees"),I=!0,u,J;b.xca=m;b.yca=z;b.zca=p;b.vca=function(a){return C(a,15)};b.K0=C;b.or=function(a,b){var c,g,m,p,z,x,y,H,n,f,C,d,G,B,D,r,ha,qa,K=new e.On(4),M=[16,17,18,0,8,7,
9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.ej||!a.input&&0!==a.bh)return-2;c=a.state;12===c.mode&&(c.mode=13);z=a.qf;m=a.ej;y=a.ae;p=a.Zm;g=a.input;x=a.bh;H=c.Jm;n=c.Jd;f=x;C=y;qa=0;a:for(;;)switch(c.mode){case 1:if(0===c.rj){c.mode=13;break}for(;16>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if(c.rj&2&&35615===H){c.check=0;K[0]=H&255;K[1]=H>>>8&255;c.check=q(c.check,K,2,0);n=H=0;c.mode=2;break}c.td=0;c.head&&(c.head.done=!1);if(!(c.rj&1)||(((H&255)<<8)+(H>>8))%31){a.Pb="incorrect header check";
c.mode=30;break}if(8!==(H&15)){a.Pb="unknown compression method";c.mode=30;break}H>>>=4;n-=4;G=(H&15)+8;if(0===c.ft)c.ft=G;else if(G>c.ft){a.Pb="invalid window size";c.mode=30;break}c.ez=1<<G;a.ao=c.check=1;c.mode=H&512?10:12;n=H=0;break;case 2:for(;16>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.td=H;if(8!==(c.td&255)){a.Pb="unknown compression method";c.mode=30;break}if(c.td&57344){a.Pb="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=H>>8&1);c.td&512&&(K[0]=H&255,K[1]=H>>>8&255,
c.check=q(c.check,K,2,0));n=H=0;c.mode=3;case 3:for(;32>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.head&&(c.head.time=H);c.td&512&&(K[0]=H&255,K[1]=H>>>8&255,K[2]=H>>>16&255,K[3]=H>>>24&255,c.check=q(c.check,K,4,0));n=H=0;c.mode=4;case 4:for(;16>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.head&&(c.head.B6=H&255,c.head.n2=H>>8);c.td&512&&(K[0]=H&255,K[1]=H>>>8&255,c.check=q(c.check,K,2,0));n=H=0;c.mode=5;case 5:if(c.td&1024){for(;16>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.length=H;c.head&&
(c.head.EF=H);c.td&512&&(K[0]=H&255,K[1]=H>>>8&255,c.check=q(c.check,K,2,0));n=H=0}else c.head&&(c.head.de=null);c.mode=6;case 6:if(c.td&1024&&(d=c.length,d>x&&(d=x),d&&(c.head&&(G=c.head.EF-c.length,c.head.de||(c.head.de=Array(c.head.EF)),e.ho(c.head.de,g,p,d,G)),c.td&512&&(c.check=q(c.check,g,d,p)),x-=d,p+=d,c.length-=d),c.length))break a;c.length=0;c.mode=7;case 7:if(c.td&2048){if(0===x)break a;d=0;do G=g[p+d++],c.head&&G&&65536>c.length&&(c.head.name+=String.fromCharCode(G));while(G&&d<x);c.td&
512&&(c.check=q(c.check,g,d,p));x-=d;p+=d;if(G)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.td&4096){if(0===x)break a;d=0;do G=g[p+d++],c.head&&G&&65536>c.length&&(c.head.UE+=String.fromCharCode(G));while(G&&d<x);c.td&512&&(c.check=q(c.check,g,d,p));x-=d;p+=d;if(G)break a}else c.head&&(c.head.UE=null);c.mode=9;case 9:if(c.td&512){for(;16>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if(H!==(c.check&65535)){a.Pb="header crc mismatch";c.mode=30;break}n=H=0}c.head&&(c.head.E0=
c.td>>9&1,c.head.done=!0);a.ao=c.check=0;c.mode=12;break;case 10:for(;32>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}a.ao=c.check=k(H);n=H=0;c.mode=11;case 11:if(0===c.rG)return a.qf=z,a.ae=y,a.Zm=p,a.bh=x,c.Jm=H,c.Jd=n,2;a.ao=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.GA){H>>>=n&7;n-=n&7;c.mode=27;break}for(;3>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.GA=H&1;H>>>=1;--n;switch(H&3){case 0:c.mode=14;break;case 1:G=c;if(I){u=new e.lt(512);J=new e.lt(32);for(d=0;144>d;)G.nf[d++]=
8;for(;256>d;)G.nf[d++]=9;for(;280>d;)G.nf[d++]=7;for(;288>d;)G.nf[d++]=8;O(1,G.nf,0,288,u,0,G.Yw,{Jd:9});for(d=0;32>d;)G.nf[d++]=5;O(2,G.nf,0,32,J,0,G.Yw,{Jd:5});I=!1}G.sl=u;G.ak=9;G.Do=J;G.Xq=5;c.mode=20;if(6===b){H>>>=2;n-=2;break a}break;case 2:c.mode=17;break;case 3:a.Pb="invalid block type",c.mode=30}H>>>=2;n-=2;break;case 14:H>>>=n&7;for(n-=n&7;32>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if((H&65535)!==(H>>>16^65535)){a.Pb="invalid stored block lengths";c.mode=30;break}c.length=H&65535;n=
H=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(d=c.length){d>x&&(d=x);d>y&&(d=y);if(0===d)break a;e.ho(m,g,p,d,z);x-=d;p+=d;y-=d;z+=d;c.length-=d;break}c.mode=12;break;case 17:for(;14>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.Nr=(H&31)+257;H>>>=5;n-=5;c.Dv=(H&31)+1;H>>>=5;n-=5;c.UP=(H&15)+4;H>>>=4;n-=4;if(286<c.Nr||30<c.Dv){a.Pb="too many length or distance symbols";c.mode=30;break}c.bi=0;c.mode=18;case 18:for(;c.bi<c.UP;){for(;3>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.nf[M[c.bi++]]=
H&7;H>>>=3;n-=3}for(;19>c.bi;)c.nf[M[c.bi++]]=0;c.sl=c.uP;c.ak=7;d={Jd:c.ak};qa=O(0,c.nf,0,19,c.sl,0,c.Yw,d);c.ak=d.Jd;if(qa){a.Pb="invalid code lengths set";c.mode=30;break}c.bi=0;c.mode=19;case 19:for(;c.bi<c.Nr+c.Dv;){for(;;){D=c.sl[H&(1<<c.ak)-1];d=D>>>24;D&=65535;if(d<=n)break;if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if(16>D)H>>>=d,n-=d,c.nf[c.bi++]=D;else{if(16===D){for(G=d+2;n<G;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}H>>>=d;n-=d;if(0===c.bi){a.Pb="invalid bit length repeat";c.mode=30;break}G=
c.nf[c.bi-1];d=3+(H&3);H>>>=2;n-=2}else if(17===D){for(G=d+3;n<G;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}H>>>=d;n-=d;G=0;d=3+(H&7);H>>>=3;n-=3}else{for(G=d+7;n<G;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}H>>>=d;n-=d;G=0;d=11+(H&127);H>>>=7;n-=7}if(c.bi+d>c.Nr+c.Dv){a.Pb="invalid bit length repeat";c.mode=30;break}for(;d--;)c.nf[c.bi++]=G}}if(30===c.mode)break;if(0===c.nf[256]){a.Pb="invalid code -- missing end-of-block";c.mode=30;break}c.ak=9;d={Jd:c.ak};qa=O(1,c.nf,0,c.Nr,c.sl,0,c.Yw,d);c.ak=d.Jd;
if(qa){a.Pb="invalid literal/lengths set";c.mode=30;break}c.Xq=6;c.Do=c.WM;d={Jd:c.Xq};qa=O(2,c.nf,c.Nr,c.Dv,c.Do,0,c.Yw,d);c.Xq=d.Jd;if(qa){a.Pb="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=x&&258<=y){a.qf=z;a.ae=y;a.Zm=p;a.bh=x;c.Jm=H;c.Jd=n;P(a,C);z=a.qf;m=a.ej;y=a.ae;p=a.Zm;g=a.input;x=a.bh;H=c.Jm;n=c.Jd;12===c.mode&&(c.back=-1);break}for(c.back=0;;){D=c.sl[H&(1<<c.ak)-1];d=D>>>24;G=D>>>16&255;D&=65535;if(d<=n)break;if(0===x)break a;x--;H+=
g[p++]<<n;n+=8}if(G&&!(G&240)){B=d;r=G;for(ha=D;;){D=c.sl[ha+((H&(1<<B+r)-1)>>B)];d=D>>>24;G=D>>>16&255;D&=65535;if(B+d<=n)break;if(0===x)break a;x--;H+=g[p++]<<n;n+=8}H>>>=B;n-=B;c.back+=B}H>>>=d;n-=d;c.back+=d;c.length=D;if(!G){c.mode=26;break}if(G&32){c.back=-1;c.mode=12;break}if(G&64){a.Pb="invalid literal/length code";c.mode=30;break}c.de=G&15;c.mode=22;case 22:if(c.de){for(G=c.de;n<G;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.length+=H&(1<<c.de)-1;H>>>=c.de;n-=c.de;c.back+=c.de}c.w6=c.length;
c.mode=23;case 23:for(;;){D=c.Do[H&(1<<c.Xq)-1];d=D>>>24;G=D>>>16&255;D&=65535;if(d<=n)break;if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if(!(G&240)){B=d;r=G;for(ha=D;;){D=c.Do[ha+((H&(1<<B+r)-1)>>B)];d=D>>>24;G=D>>>16&255;D&=65535;if(B+d<=n)break;if(0===x)break a;x--;H+=g[p++]<<n;n+=8}H>>>=B;n-=B;c.back+=B}H>>>=d;n-=d;c.back+=d;if(G&64){a.Pb="invalid distance code";c.mode=30;break}c.offset=D;c.de=G&15;c.mode=24;case 24:if(c.de){for(G=c.de;n<G;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}c.offset+=H&(1<<c.de)-
1;H>>>=c.de;n-=c.de;c.back+=c.de}if(c.offset>c.ez){a.Pb="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===y)break a;d=C-y;if(c.offset>d){d=c.offset-d;if(d>c.am&&c.$H){a.Pb="invalid distance too far back";c.mode=30;break}d>c.Qg?(d-=c.Qg,G=c.Rg-d):G=c.Qg-d;d>c.length&&(d=c.length);B=c.window}else B=m,G=z-c.offset,d=c.length;d>y&&(d=y);y-=d;c.length-=d;do m[z++]=B[G++];while(--d);0===c.length&&(c.mode=21);break;case 26:if(0===y)break a;m[z++]=c.length;y--;c.mode=21;break;case 27:if(c.rj){for(;32>
n;){if(0===x)break a;x--;H|=g[p++]<<n;n+=8}C-=y;a.Dw+=C;c.total+=C;C&&(a.ao=c.check=c.td?q(c.check,m,C,z-C):A(c.check,m,C,z-C));C=y;if((c.td?H:k(H))!==c.check){a.Pb="incorrect data check";c.mode=30;break}n=H=0}c.mode=28;case 28:if(c.rj&&c.td){for(;32>n;){if(0===x)break a;x--;H+=g[p++]<<n;n+=8}if(H!==(c.total&4294967295)){a.Pb="incorrect length check";c.mode=30;break}n=H=0}c.mode=29;case 29:qa=1;break a;case 30:qa=-3;break a;case 31:return-4;default:return-2}a.qf=z;a.ae=y;a.Zm=p;a.bh=x;c.Jm=H;c.Jd=
n;if((c.Rg||C!==a.ae&&30>c.mode&&(27>c.mode||4!==b))&&h(a,a.ej,a.qf,C-a.ae))return c.mode=31,-4;f-=a.bh;C-=a.ae;a.UI+=f;a.Dw+=C;c.total+=C;c.rj&&C&&(a.ao=c.check=c.td?q(c.check,m,C,a.qf-C):A(c.check,m,C,a.qf-C));a.mZ=c.Jd+(c.GA?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===f&&0===C||4===b)&&0===qa&&(qa=-5);return qa};b.I0=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};b.J0=function(a,b){var c;a&&a.state&&(c=a.state,c.rj&2&&(c.head=
b,b.done=!1))};b.L0=function(a,b){var c=b.length,e,g;if(!a||!a.state)return-2;e=a.state;if(0!==e.rj&&11!==e.mode)return-2;if(11===e.mode&&(g=A(1,b,c,0),g!==e.check))return-3;if(h(a,b,c,c))return e.mode=31,-4;e.rG=1;return 0};b.uca="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,c){var b=a("../utils/common"),k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,
16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(a,c,h,e,A,q,P,O){var z=O.Jd,u,C,x,D,l,v,N,E,M,L,y,H,n,f=0,W,d=new b.kt(16);l=new b.kt(16);var G,B=0,S,r,ha;for(u=0;15>=u;u++)d[u]=0;for(C=0;C<e;C++)d[c[h+C]]++;D=z;for(x=15;1<=x&&0===
d[x];x--);D>x&&(D=x);if(!x)return A[q++]=20971520,A[q++]=20971520,O.Jd=1,0;for(z=1;z<x&&0===d[z];z++);D<z&&(D=z);for(u=v=1;15>=u;u++)if(v<<=1,v-=d[u],0>v)return-1;if(0<v&&(0===a||1!==x))return-1;l[1]=0;for(u=1;15>u;u++)l[u+1]=l[u]+d[u];for(C=0;C<e;C++)0!==c[h+C]&&(P[l[c[h+C]]++]=C);0===a?(n=G=P,W=19):1===a?(n=k,f-=257,G=g,B-=257,W=256):(n=p,G=m,W=-1);C=E=0;u=z;H=q;e=D;l=0;L=-1;N=1<<D;y=N-1;if(1===a&&852<N||2===a&&592<N)return 1;for(;;){S=u-l;P[C]<W?(r=0,ha=P[C]):P[C]>W?(r=G[B+P[C]],ha=n[f+P[C]]):
(r=96,ha=0);v=1<<u-l;z=M=1<<e;do M-=v,A[H+(E>>l)+M]=S<<24|r<<16|ha|0;while(M);for(v=1<<u-1;E&v;)v>>=1;v?(E&=v-1,E+=v):E=0;C++;if(!--d[u]){if(u===x)break;u=c[h+P[C]]}if(u>D&&(E&y)!==L){0===l&&(l=D);H+=z;e=u-l;for(v=1<<e;e+l<x;){v-=d[e+l];if(0>=v)break;e++;v<<=1}N+=1<<e;if(1===a&&852<N||2===a&&592<N)return 1;L=E&y;A[L]=D<<24|e<<16|H-q|0}}E&&(A[H+E]=u-l<<24|4194304);O.Jd=D;return 0}},{"../utils/common":1}],10:[function(a,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error",
"-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,c){c.exports=function(){this.input=null;this.UI=this.bh=this.Zm=0;this.ej=null;this.Dw=this.ae=this.qf=0;this.Pb="";this.state=null;this.mZ=2;this.ao=0}},{}],"/lib/inflate.js":[function(a,c,b){function k(a){if(!(this instanceof k))return new k(a);var b=this.options=m.assign({EX:16384,Xe:0,to:""},a||{});b.raw&&0<=b.Xe&&16>b.Xe&&(b.Xe=-b.Xe,b.Xe||(b.Xe=-15));!(0<=b.Xe&&16>b.Xe)||a&&a.Xe||
(b.Xe+=32);15<b.Xe&&48>b.Xe&&!(b.Xe&15)&&(b.Xe|=15);this.BF=0;this.Pb="";this.ended=!1;this.uy=[];this.Hp=new e;this.Hp.ae=0;a=p.K0(this.Hp,b.Xe);if(a!==C.xq)throw Error(h[a]);this.F0=new A;p.J0(this.Hp,this.F0)}function g(a,b){var c=new k(b);c.push(a,!0);if(c.BF)throw c.Pb||h[c.BF];return c.result}var p=a("./zlib/inflate"),m=a("./utils/common"),z=a("./utils/strings"),C=a("./zlib/constants"),h=a("./zlib/messages"),e=a("./zlib/zstream"),A=a("./zlib/gzheader"),q=Object.prototype.toString;k.prototype.push=
function(a,b){var c=this.Hp,e=this.options.EX,g=this.options.s$,k,h,l,v,A,E,O=!1;if(this.ended)return!1;h=b===~~b?b:!0===b?C.Px:C.FK;"string"===typeof a?c.input=z.PW(a):"[object ArrayBuffer]"===q.call(a)?c.input=new Uint8Array(a):c.input=a;c.Zm=0;c.bh=c.input.length;do{0===c.ae&&(c.ej=new m.On(e),c.qf=0,c.ae=e);k=p.or(c,C.FK);k===C.QV&&g&&("string"===typeof g?E=z.U4(g):"[object ArrayBuffer]"===q.call(g)?E=new Uint8Array(g):E=g,k=p.L0(this.Hp,E));k===C.PV&&!0===O&&(k=C.xq,O=!1);if(k!==C.Qx&&k!==C.xq)return this.oH(k),
this.ended=!0,!1;!c.qf||0!==c.ae&&k!==C.Qx&&(0!==c.bh||h!==C.Px&&h!==C.GK)||("string"===this.options.to?(l=z.l6(c.ej,c.qf),v=c.qf-l,A=z.YW(c.ej,l),c.qf=v,c.ae=e-v,v&&m.ho(c.ej,c.ej,l,v,0),this.gQ(A)):this.gQ(m.TR(c.ej,c.qf)));0===c.bh&&0===c.ae&&(O=!0)}while((0<c.bh||0===c.ae)&&k!==C.Qx);k===C.Qx&&(h=C.Px);if(h===C.Px)return k=p.I0(this.Hp),this.oH(k),this.ended=!0,k===C.xq;h===C.GK&&(this.oH(C.xq),c.ae=0);return!0};k.prototype.gQ=function(a){this.uy.push(a)};k.prototype.oH=function(a){a===C.xq&&
(this.result="string"===this.options.to?this.uy.join(""):m.kN(this.uy));this.uy=[];this.BF=a;this.Pb=this.Hp.Pb};b.b7=k;b.or=g;b.wca=function(a,b){b=b||{};b.raw=!0;return g(a,b)};b.gfa=g},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});a.or=window.s2.or};b4w.module.__sfx=function(a,t){function p(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(qa){return J.error('Unable to initialize AudioContext: "'+qa+'". The audio is disabled.'),null}if(b.createGain)return b;J.warn("deprecated WebAudio implementation");return null}J.warn("WebAudio is not supported");return null}function c(a,c,e){var f=a.ra;if("NONE"!=f.behavior){var k=f.loop,h=f.pitch;if(f.src&&(k||0<=e)){f.rE=Math.floor(5E4*Math.random());var l=W.currentTime+
c,l=Math.max(0,l);f.Gg=l;f.state=20;var r=d.od;"POSITIONAL"==f.behavior&&"none"==r.Hu&&(f.behavior="BACKGROUND_SOUND");b(a,d.od);if("POSITIONAL"==f.behavior||"BACKGROUND_SOUND"==f.behavior){c=W.createBufferSource();c.buffer=f.src;c.playbackRate.value=h;if(k){f.zc&&f.zc.disconnect();f.Ae&&f.Ae.disconnect();c.loop=!0;c.loopStart=f.FP;if(c.loopEnd=f.SA)e=W.createBufferSource(),e.buffer=f.src,e.playbackRate.value=h,f.Ae=e,e.connect(f.ue);c.start(l);f.duration=0}else k=c.buffer?c.buffer.duration:0,e>k?
(k=l+e+f.Kf,c.loop=!0,c.start(l),c.stop(k),f.duration=e):(c.loop=!1,c.start(l),f.duration=k);c.connect(f.ue);f.zc=c;g(f);M(f);m(f)}else"BACKGROUND_MUSIC"==f.behavior&&(D.Mq(f.uE),D.Mq(f.vE),e=function(){var b=a.ra,c=b.src;c&&(c.volume=1,c.loop=b.loop,b.zc=b.zc||W.createMediaElementSource(c),b.zc.connect(b.ue),20==b.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==c?e():f.uE=D.bC(e,1E3*c),k?f.duration=0:f.duration=I(a));z(f,l)}}}function b(a,b){var c=a.ra;if(!c.ue){var d=l.X(a.A.D),e=l.la(a.A.D);
if(U.$A){var f=W.createBiquadFilter();f.type="peaking"}else f=null;var g=W.createGain();switch(c.behavior){case "POSITIONAL":var k=W.createPanner();"string"!=typeof k.panningModel?(k.panningModel=k.EQUALPOWER,k.distanceModel=k.INVERSE_DISTANCE):(k.panningModel="equalpower",k.distanceModel=b.Hu);k.setPosition(d[0],d[1],d[2]);N.copy(d,c.JG);d=L;v.Jc(e,v.qc,d);k.setOrientation(d[0],d[1],d[2]);k.refDistance=c.dist_ref;k.maxDistance=c.dist_max;k.rolloffFactor=c.attenuation;k.coneInnerAngle=c.lM;k.coneOuterAngle=
c.mM;k.coneOuterGain=c.nM;var h=W.createGain();h.gain.value=O(c);f?(k.connect(f),f.connect(h)):k.connect(h);h.connect(g);c.ue=k;if(c.Qp){var r=W.createGain();g.connect(r);r.connect(b.ue)}else r=null,g.connect(b.ue);break;case "BACKGROUND_SOUND":k=null;h=W.createGain();h.gain.value=O(c);f?(c.ue=f,f.connect(h)):c.ue=h;h.connect(g);c.Qp?(r=W.createGain(),g.connect(r),r.connect(b.ue)):(r=null,g.connect(b.ue));break;case "BACKGROUND_MUSIC":r=k=null,h=W.createGain(),h.gain.value=O(c),f?(c.ue=f,f.connect(h)):
c.ue=h,h.connect(g),g.connect(b.ue)}c.uH=k;c.Pi=f;c.gr=h;c.Dm=g;c.KH=r}}function k(a){var b=a.ra;c(a,b.SM+b.TM*Math.random(),b.duration)}function g(a){var b=a.Ae||a.zc;v.Of(b.onended)&&(b.onended=function(){a.state=50})}function M(a){a.Qp&&a.KH.gain.cancelScheduledValues(a.Gg);a.Zr&&(a.zc.playbackRate.cancelScheduledValues(a.Gg),a.Ae&&a.Ae.playbackRate.cancelScheduledValues(a.Gg));a.Vw=a.Gg}function m(a){if(a.Qp||a.Zr){var b=a.KH,c=a.zc,d=c.buffer?c.buffer.duration:0;if(d){var e=a.Gg;B[0]=a.rE;for(var f=
0;5>f;){var g=a.pitch+a.Zr*v.pi(B);if(e>=a.Vw){if(a.Qp){var k=1-v.pa(a.Qp,0,1)*Math.random();b.gain.setValueAtTime(k,e)}a.Zr&&(c.playbackRate.setValueAtTime(g,e),a.Ae&&a.Ae.playbackRate.setValueAtTime(g,e));f++}e+=d/g}a.Vw=e-.001}}}function z(a,b){if(a.cl||a.Kf){var c=a.Dm;c.gain.cancelScheduledValues(b);a.cl?(c.gain.setValueAtTime(0,b),c.gain.linearRampToValueAtTime(1,b+a.cl)):c.gain.setValueAtTime(1,b);a.Kf&&!a.loop&&(c.gain.setValueAtTime(1,b+a.duration),c.gain.linearRampToValueAtTime(0,b+a.duration+
a.Kf))}}function C(a){"SPEAKER"!=a.type&&v.K("Wrong object type");var b=a.ra;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var c=b.Dm,d=W.currentTime;b.Kf&&(c.gain.setValueAtTime(c.gain.value,d),c.gain.linearRampToValueAtTime(0,d+b.Kf));"BACKGROUND_MUSIC"==b.behavior?b.src&&(D.Mq(b.uE),D.Mq(b.vE),b.vE=D.bC(function(){var b=a.ra.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Kf)):(c=b.zc,c.onended=function(){},b.duration<c.buffer.duration?b.Kf&&20==b.state?c.stop(d+b.Kf):
20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.Gg=0,b.wH=0,b.oy=0);b.state=30}}function h(a){a=a.ra;if(20==a.state){var b=W.currentTime;a.wH=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.Gg?a.oy=e(a,b):a.oy=0,a.zc.onended=function(){},a.zc.stop(0),a.zc.disconnect(),M(a));a.state=40}}function e(a,b){B[0]=a.rE;for(var c=a.zc.buffer.duration,d=a.Gg,e;d<b;)e=a.pitch+a.Zr*v.pi(B),d+=c/e;return(c/e-(d-b))*e}function A(a){var b=a.ra;if(40==b.state){var c=W.currentTime;b.Gg+=c-b.wH;
if("BACKGROUND_MUSIC"==b.behavior)b.src.play();else{a=a.ra;var d=W.createBufferSource();d.loop=a.zc.loop;d.loopStart=a.zc.loopStart;d.loopEnd=a.zc.loopEnd;d.buffer=a.zc.buffer;d.playbackRate.value=a.zc.playbackRate.value;d.connect(a.ue);a.zc=d;a.Ae&&(d=W.createBufferSource(),d.loop=a.Ae.loop,d.buffer=a.Ae.buffer,d.playbackRate.value=a.Ae.playbackRate.value,d.connect(a.ue),a.Ae=d);b.Vw=c;c=b.zc;g(b);c.start(b.Gg,b.oy);m(b)}z(b,b.Gg);b.state=20}}function q(a,b,c){var d;d=b.AZ;if(0<d){var e=b.I4;if(0!=
N.dot(a.vD,a.vD)||0!=N.dot(b.jp,b.jp)){var f=N.subtract(a.JG,b.ck,L),g=N.length(f);b=N.dot(f,b.jp)/g;f=N.dot(f,a.vD)/g;g=e/d;b=Math.min(-b,g);f=Math.min(-f,g);d=(e-d*b)/(e-d*f);isFinite(d)||(d=0);d=Math.min(d,16);d=Math.max(d,.125);d=v.Tc(d,a.sP,c,.3);a.zc.playbackRate.value=d;a.sP=d}}}function P(a){a=a.ra;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function O(a){return a.muted?0:a.volume}function I(a){a=a.ra;return(a=a.src)?a.duration:0}var u=t("__config"),J=t("__print"),x=
t("__quat"),D=t("__time"),l=t("__tsr"),v=t("__util"),N=t("__vec3"),E=u.L,U=u.ra,L=new Float32Array(3),y=new Float32Array(3),H=x.create(),n=[],f=[],W=null,d=null,G=[],B=[1],S=null;a.wJ=10;a.HD=20;a.vJ=30;a.AY=function(){return{dd:-1,Pj:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,lM:360,mM:360,nM:1,autoplay:!1,be:!1,loop:!1,FP:0,SA:0,SM:0,TM:0,Qp:0,Zr:0,cl:0,Kf:0,Gg:0,wH:0,oy:0,duration:0,Vw:0,rE:1,src:null,state:10,JG:new Float32Array(3),vD:new Float32Array(3),
lz:!1,sP:1,uE:-1,vE:-1,Fo:0,ue:null,zc:null,Ae:null,uH:null,Pi:null,gr:null,Dm:null,KH:null,Fn:0}};a.Mf=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(n.push("ogg"),n.push("ogv"),n.push("oga")),""!=a.canPlayType("audio/mpeg")&&n.push("mp3"),""!=a.canPlayType("audio/mp4")&&(n.push("mp4"),n.push("m4v"),n.push("m4a")),""!=a.canPlayType("audio/webm")&&n.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(f.push("ogv"),
f.push("ogg"),f.push("oga")),""!=b.canPlayType("video/mp4")&&(f.push("m4v"),f.push("mp4")),""!=b.canPlayType("video/webm")&&f.push("webm"),""!=b.canPlayType("video/mpeg")&&f.push("mp3"))};a.FW=function(a){U.rJ&&!W&&(W=p())&&J.log("%cINIT WEBAUDIO: "+W.sampleRate+"Hz","color: #00a");if(W){var b={ck:new Float32Array(3),jp:new Float32Array(3),Fn:0},c=W.createGain(),d=W.createGain();b.gr=c;b.Dm=d;c.connect(d);d.connect(W.destination);if(a.b4w_enable_dynamic_compressor){var d=W.createDynamicsCompressor(),
e=a.b4w_dynamic_compressor_settings;d.threshold.value=e.threshold;d.knee.value=e.knee;d.ratio.value=e.ratio;d.attack.value=e.attack;d.release.value=e.release;d.connect(c);b.uu=d;b.ue=d}else b.uu=null,b.ue=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.Hu="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.Hu="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.Hu="exponential";break;case "NONE":b.Hu="none";break;default:v.K("Wrong audio distance model")}b.AZ=a.audio_doppler_factor;
b.I4=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=O(b);b.Fo=0}else b=null;a.od=b};a.C3=function(a){d=a};a.tF=function(a){a||(a="ogg");return-1<n.indexOf(a)?a:-1<n.indexOf("m4a")?"m4a":-1<n.indexOf("oga")?"oga":""};a.uF=function(a){a||(a="webm");return-1<f.indexOf(a)?a:-1<f.indexOf("m4v")?"m4v":-1<f.indexOf("webm")?"webm":""};a.Ms=function(a,b){var c=a.data,d=b.ra;if(a.data.sound){d.dd=a.data.sound.uuid;d.Pj=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":d.behavior=
W?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var e;W?(window.MediaElementAudioSourceNode?e=!0:(J.warn("MediaElementAudioSourceNode not found"),e=!1),e=e&&!E.TL?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):e="NONE";d.behavior=e;break;default:v.K("Wrong speaker behavior")}c.sound||(d.behavior="NONE");d.lz=c.b4w_enable_doppler;d.muted=c.muted;d.volume=c.volume;d.pitch=c.pitch;d.attenuation=c.attenuation;d.dist_ref=c.distance_reference;d.dist_max=c.distance_max||1E4;d.lM=c.cone_angle_inner;d.mM=c.cone_angle_outer;
d.nM=c.cone_volume_outer;d.autoplay=c.b4w_auto_play;d.be=c.b4w_cyclic_play;d.loop=c.b4w_loop;d.FP=c.b4w_loop_start;d.SA=c.b4w_loop_end;d.SM=c.b4w_delay;d.TM=c.b4w_delay_random;d.Qp=c.b4w_volume_random;d.Zr=c.b4w_pitch_random;d.cl=c.b4w_fade_in;d.Kf=c.b4w_fade_out;G.push(b)}};a.XR=function(b){"SPEAKER"!=b.type&&v.K("Wrong object type");switch(b.ra.behavior){case "POSITIONAL":return a.HD;case "BACKGROUND_SOUND":return a.HD;case "BACKGROUND_MUSIC":return a.vJ;case "NONE":return a.wJ;default:v.K("Wrong speaker behavior")}};
a.a6=function(a,b){var c=a.ra;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:v.K("Wrong speaker behavior")}};a.nQ=function(){var a=W.createBufferSource();a.buffer=W.createBuffer(1,22050,22050);a.connect(W.destination);a.start(0)};a.qZ=function(a,b,c){W?W.decodeAudioData(a,b,c):c()};a.F4=function(a){C(a);a.ra=null;G.splice(G.indexOf(a),1)};a.Ja=function(){for(var a=0;a<G.length;a++){var b=G[a].ra;"BACKGROUND_MUSIC"==b.behavior?
(b=b.src)&&b.pause():(b.zc&&b.zc.disconnect(),b.Ae&&b.Ae.disconnect())}d&&d.od&&(a=d.od,a.ck[0]=0,a.ck[1]=0,a.ck[2]=0,a.jp[0]=0,a.jp[1]=0,a.jp[2]=0);d=null;G.splice(0);S=null};a.update=function(a){if(W&&G.length){for(var b=0;b<G.length;b++){var c=G[b],d=c.ra,e=d.zc,f=W.currentTime;!d.loop&&20==d.state&&d.duration&&d.Gg+d.duration<f&&("BACKGROUND_MUSIC"==d.behavior||e&&!v.Of(e.onended))&&(d.state=50);d.be&&50==d.state&&k(c);20==d.state&&3>d.Vw-f&&m(d)}S&&S.Pl.length&&(-1==S.active||a>S.PK+S.aN[S.active])&&
(b=S,-1<b.active&&C(b.Pl[b.active]),c=-1==b.active&&b.random?Math.round(Math.random()*(b.Pl.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.Pl.length-2))))%b.Pl.length:(b.active+1)%b.Pl.length,k(b.Pl[c]),b.active=c,b.PK=a)}};a.play=c;a.zB=k;a.stop=C;a.DG=function(a){return 20==a.ra.state};a.E4=h;a.G4=A;a.GP=function(a,b){var c=a.ra,d=c.Ae;if(P(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&d){var e=W.currentTime+b;c.zc.stop(e);d.start(e,c.SA)}};a.BH=function(a,b){var c=
a.ra;c.pitch=b;!P(a)||"POSITIONAL"!=c.behavior&&"BACKGROUND_SOUND"!=c.behavior||(c.zc.playbackRate.value=b,c.Ae&&(c.Ae.playbackRate.value=b),M(c),m(c))};a.cO=function(a){return a.ra.pitch};a.be=function(a,b){a.ra.be=!!b};a.Y0=function(a){return a.ra.autoplay};a.BG=function(a){return a.ra.be};a.B1=function(a,b,c,d,e){if(a=a.od){var f=L;f[0]=0;f[1]=0;f[2]=-1;N.transformQuat(f,c,f);y[0]=0;y[1]=1;y[2]=0;N.transformQuat(y,c,y);c=W.listener;c.setPosition(b[0],b[1],b[2]);c.setOrientation(f[0],f[1],f[2],
y[0],y[1],y[2]);if(d&&a.Fn!=e){if(a.Dr)a.Dr=!1,N.copy(b,a.ck);else for(c=a.jp,c[0]=(b[0]-a.ck[0])/d,c[1]=(b[1]-a.ck[1])/d,c[2]=(b[2]-a.ck[2])/d,N.copy(b,a.ck),b=0;b<G.length;b++)c=G[b],f=c.ra,P(c)&&"POSITIONAL"==f.behavior&&f.lz&&q(f,a,d);a.Fn=e}else N.copy(b,a.ck)}};a.Dr=function(){var a=d.od;a&&(a.Dr=!0)};a.H4=function(a,b,c){var e=a.ra;if(P(a)&&"POSITIONAL"==e.behavior){var f=l.Wb(a.A.D,L);a=l.Eb(a.A.D,H);var g=e.uH;g.setPosition(f[0],f[1],f[2]);v.Jc(a,v.qc,y);g.setOrientation(y[0],y[1],y[2]);
e.lz&&(a=e.JG,b&&e.Fn!=c?(e.hS?(N.copy(f,a),e.hS=!1):(g=e.vD,g[0]=(f[0]-a[0])/b,g[1]=(f[1]-a[1])/b,g[2]=(f[2]-a[2])/b,N.copy(f,a),q(e,d.od,b)),e.Fn=c):N.copy(f,a))}};a.DI=function(a){var b=a.ra;P(a)&&"POSITIONAL"==b.behavior&&b.lz&&(b.hS=!0)};a.fG=function(a){return a.ra.behavior};a.KL=function(){for(var a=0;a<G.length;a++)if(P(G[a]))return!0;return!1};a.Y3=function(a){var b=d.od;b&&(b.volume=a,W&&(b.gr.gain.value=O(b)))};a.h0=function(){var a=d.od;return a?a.volume:0};a.wI=function(a,b){var c=a.ra;
c.volume=b;P(a)&&(c.gr.gain.value=O(c))};a.uO=function(a){return a.ra.volume};a.Yb=function(a,b){a.ra.muted=!!b;P(a)&&(a.ra.gr.gain.value=O(a.ra))};a.hP=function(a){return a.ra.muted};a.e2=function(a){var b=d.od;b&&(b.muted=!!a,W&&(b.gr.gain.value=O(b)))};a.e1=function(){var a=d.od;return a?a.muted:!1};a.Xz=function(){return G};a.pause=function(){for(var a=0;a<G.length;a++)h(G[a])};a.resume=function(){for(var a=0;a<G.length;a++)A(G[a])};a.fR=function(a,b){if(a.od&&a.od.uu){var c=a.od.uu;c.threshold.value=
b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};a.IN=function(a){if(!a.od||!a.od.uu)return null;a=a.od.uu;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};a.ZM=function(a,b,c){if(P(a)){a=a.ra;var d=a.Dm,e=W.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(b,e+c);a.Fo=c}};a.ES=function(a){if(P(a)){a=a.ra;var b=a.Dm,c=W.currentTime;b.gain.setValueAtTime(b.gain.value,
c);b.gain.linearRampToValueAtTime(1,c+a.Fo);a.Fo=0}};a.EZ=function(a,b){if(W){var c=d.od,e=c.Dm,f=W.currentTime;e.gain.setValueAtTime(e.gain.value,f);e.gain.linearRampToValueAtTime(a,f+b);c.Fo=b}};a.o5=function(){if(W){var a=d.od,b=a.Dm,c=W.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.Fo);a.Fo=0}};a.XK=function(a,b,c){S={active:-1,PK:0,random:c,Pl:[],aN:[]};for(c=0;c<a.length;c++){var d=a[c],e=I(d);0==e?J.warn("Ignoring speaker with zero duration: "+d.name):
(C(d),d.ra.be=!1,S.Pl.push(d),S.aN.push(e+b))}};a.MN=I;a.dM=function(){if(S)for(var a=S.Pl,b=0;b<a.length;b++)C(a[b]);S=null};a.dO=function(a){return(a=a.ra)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};a.CR=function(a,b){var c=a.ra;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var d=c.uH;d&&(d.refDistance=c.dist_ref,d.maxDistance=c.dist_max,d.rolloffFactor=c.attenuation)}};a.jR=function(a,
b){var c=a.ra;c&&c.Pi&&(c.Pi.frequency.value=b.freq,c.Pi.Q.value=b.Q,c.Pi.gain.value=b.gain)};a.QN=function(a){return(a=a.ra)&&a.Pi?{freq:a.Pi.frequency.value,Q:a.Pi.Q.value,gain:a.Pi.gain.value}:null};a.PN=function(a,b,c,d){a=a.ra;if(!a||!a.Pi)return null;a.Pi.getFrequencyResponse(b,c,d)};a.reset=function(){n.length=0;f.length=0;W=null}};b4w.module.__version=function(a){var t=new Date(2017,9,20,18,35,3),p=[17,10];a.version=function(){return p};a.Rw=function(){for(var a="",b=0;b<p.length;b++)a=1==b?a+(10>p[b]?"0"+p[b]:p[b]):a+p[b],b!=p.length-1&&(a+=".");return a};a.type=function(){return"RELEASE"};a.OM=function(){return t};a.oF=function(){var a=t.getDate(),a=10>a?"0"+String(a):String(a),b=t.getMonth()+1,b=10>b?"0"+String(b):String(b),k=String(t.getFullYear()),g=t.getHours(),g=10>g?"0"+String(g):String(g),p=t.getMinutes(),p=10>p?"0"+
String(p):String(p),m=t.getSeconds(),m=10>m?"0"+String(m):String(m);return a+"."+b+"."+k+" "+g+":"+p+":"+m};a.get_build_version=function(){return"17_10_pre"}};b4w.module.shader_texts=function(a){a["anchors.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};a["anchors.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANCHOR_NUM",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
a["color_id.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_OUTLINE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},
{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",
";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE",{a:"logic_negative_expr",o:1}],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_color_id",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_outline_intensity",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",
f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["color_id.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},
{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",
c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],
l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",
j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",
{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:6},{a:"logical_and_expr",o:3},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",
o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"txt",b:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{a:"cond",f:[{a:"if",
j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};
a["debug_view.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIREFRAME_QUALITY",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DEBUG_SPHERE_DYNAMIC",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE_DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float aP ( ) { float aL = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIREFRAME_QUALITY",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{a:"elif",j:["WIREFRAME_QUALITY",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["return","aL",";","}"]}]}}]},{a:"txt",b:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["debug_view.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"DEBUG_VIEW_SPECIAL_SKYDOME",b:["0"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",
c:"BILLBOARD",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","aD",";"]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"include",F:"dynamic_grass.glslv"}]}}]},{a:"txt",
b:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_VIEW_SPECIAL_SKYDOME"],l:{a:"grp",f:[{a:"txt",b:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["error.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",
F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};a["error.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};a["grass_map.glslf"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["grass_map.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",
F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_grass_size",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","bd",";"]}]}},{a:"else",
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_size",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_color",";"]}]}}]}]}}]},{a:"txt",b:["gl_Position",
"=","f",";","}"]}]};a["halo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_sun_intensity",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"include",F:"color_util.glslf"},{a:"include",F:"halo_color.glslf"},{a:"txt",b:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};a["halo.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"include",F:"std.glsl"},
{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","be",";"]}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{a:"txt",b:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["irradiance_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; vec3 bt = vec3 ( 0.0 ) ; vec3 bu = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bv = vec3 ( 1.0 , 0.0 , 0.0 ) ; float bw = 0.025 ; float bx = 0.0 ; for ( float by = 0.0 ; by < 2.0 * M_PI ; by += bw ) { for ( float bz = 0.0 ; bz < 0.5 * M_PI ; bz += bw ) { vec3 bA = vec3 ( sin ( bz ) * cos ( by ) , sin ( bz ) * sin ( by ) , cos ( bz ) ) ; vec3 bB = bA . x * bv + bA . y * bu + bA . z * bq ; vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , bB ) . rgb ; bC ( bs ) ; bt += bs * cos ( bz ) * sin ( bz ) ; bx ++ ; } } bt = M_PI * bt * ( 1.0 / float ( bx ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bt , 1.0 ) ; }".split(" ")}]};
a["lens_flares.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["lens_flares.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_LIGHTS",
b:["0"]},{a:"define",c:"LIGHT_INDEX",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bD = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bD ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bF = vec2 ( a_lf_bb_vertex . x / bE , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bG = 1.9 ; bF *= ( 1.0 + bG * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bF , 0.999999 , 1.0 ) ; }".split(" ")}]};
a["line.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ALPHA",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["line.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bH = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bH . xyz /= bH . w ; vec4 bI = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bI . xyz /= bI . w ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bJ = ( bI - bH ) . xy ; bJ . x *= bE ; float bK = M_PI / 2.0 ; mat2 bL = mat2 ( cos ( bK ) , sin ( bK ) , - sin ( bK ) , cos ( bK ) ) ; bJ = bL * bJ ; bJ = normalize ( bJ ) ; vec2 bM = ( u_line_width / u_height ) * vec2 ( 1.0 / bE , 1.0 ) ; gl_Position = vec4 ( bH . xy + bJ . xy * bM / 2.0 , bH . z , 1.0 ) ; gl_Position *= bH . w ; }".split(" ")}]};
a["main.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},
{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",
b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["GLSL1","USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",
b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",
";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",
{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",
o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",
o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",
"USE_NODE_B4W_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bP = H ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{a:"txt",b:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["main.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",
b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],
l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]},
{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bU",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},
{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","N","=","u_view_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",
b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:["vec3","O","=","a_position",";"]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:14}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{a:"elif",j:["NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"vec3 bX = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 D = bX - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{a:"logical_or_expr",o:10}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS",
"BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"O = ( bV * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bV * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bV * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , bV ) ;".split(" ")}]}}]},{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO",
"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"bU = aw . aQ ;".split(" ")}]}},{a:"elif",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bU","=","a_color",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 bY = bV * vec4 ( aw . O , 1.0 ) ; bY . xyz = ap ( N , bY . xyz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["main_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},
{a:"var",c:"TEXTURE_SPEC_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"TEXTURE_COLOR0_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"TEXTURE_COLOR1_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_PLANE"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"TEXTURE_SPEC",b:["0"]},{a:"var",c:"ALPHA_AS_SPEC",b:["0"]},{a:"var",
c:"TEXTURE_STENCIL_ALPHA_MASK",b:["0"]},{a:"var",c:"TEXTURE_STENCIL_ALPHA_MASK_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",
b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"PARALLAX_LOD_DIST",b:["5.0"]},{a:"var",c:"PARALLAX_STEPS",b:["5.0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_colormap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC","ALPHA_AS_SPEC",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_specmap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",
";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},
{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_specular_color_factor",";"]}]}}]},{a:"txt",b:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_parallax_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bT",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"include",F:"mirror.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"lighting_nodes.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]},{a:"txt",b:"vec3 ca = normalize ( j ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"ca = ca ; else ca = - ca ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( ca , k . xyz ) * k . w ; mat3 cb = mat3 ( k . xyz , W , ca ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"vec2 cc = normalize ( _ ( N , j ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( bN < PARALLAX_LOD_DIST ) { float cd = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bN ) , 0.0 , 1.0 ) ; float ce = u_parallax_scale * cd ; vec3 cf = normalize ( bT * cb ) ; float cg = 1.0 / PARALLAX_STEPS ; vec2 ch = cf . xy * ce / ( PARALLAX_STEPS * cf . z ) ; float ci = 1.0 ; float cj ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec2","ck","=","cc",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:["vec2","ck","=","b_",";"]}]}}]},{a:"txt",b:"cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; for ( float cl = 1.0 ; cl <= PARALLAX_STEPS ; cl ++ ) { if ( cj < ci ) { ci -= cg ; ck -= ch ; cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; } } vec2 cm = ck + ch ; float cn = GLSL_TEXTURE ( u_normalmap0 , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; ck = cp * cm + ( 1.0 - cp ) * ck ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"b_ += ck - cc ;".split(" ")}]}}]},{a:"txt",b:["cc","=","ck",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"cc += ck - b_ ;".split(" ")}]}}]},{a:"txt",b:["b_","=","ck",";"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","cq",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO",
"TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cr = cq . rgb - 0.5 ; cr = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cr , u_normal_factor ) ; vec3 U = cb * cr ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","ca",";"]}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],
l:{a:"grp",f:[{a:"txt",b:"cc = normalize ( _ ( N , U ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cs = bU ; bC ( cs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 ct = vec4 ( cs , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["vec4","ct","=","u_diffuse_color",";"]}]}}]},{a:"txt",b:["float","cu","=","1.0",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , cc ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , b_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:["vec4","cw",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"bC ( cw . rgb ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"cv = mix ( cv , cw , cx . r ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cv . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; ct . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cu = cv . a ;".split(" ")}]}},
{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ; ct . a = cv . a ; cu = cv . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS"],l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec4 bP = cC ( cy ) ; vec3 cD = u_emit * ct . rgb ; vec3 cE = u_specular_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_AS_SPEC"],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = vec3 ( cu ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , cc ) . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , b_ ) . rgb ;".split(" ")}]}}]},{a:"txt",b:"bC ( cF . rgb ) ; cE = mix ( cE , cF , u_specular_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * cE ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , bP , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["aQ","+=","cJ",";"]}]}}]},{a:"txt",b:"float L = ct . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float t = max ( max ( cJ . r , cJ . g ) , cJ . b ) * u_specular_alpha ; L = ct . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 cM = - ( _ ( N , U ) ) . xy ; aQ = mix ( cN ( l , cM * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["node_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{a:"logical_or_expr",
o:9}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = - normalize ( bp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","D",";"]}]}}]},{a:"txt",b:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};a["particle_system.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",
c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},
{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES",
"NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",
{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"particles_nodes.glslf"},{a:"txt",b:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["particle_system.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",
b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",
c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_OUT",
"vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},
{a:"txt",b:["GLSL_OUT","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bf",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","j",";"]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["WORLD_SPACE",{a:"logic_negative_expr",o:1},"NODES","HALO_PARTICLES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"particles.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"particles_nodes.glslv"}]}}]},{a:"txt",b:"float cX ( vec2 cV , vec2 cW ) { return ( atan ( cW . y , cW . x ) - atan ( cV . y , cV . x ) ) ; } void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; cY pp ; pp = cZ ( ) ; float c_ ; mat3 bk = da ( ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 db = ( bV * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 db = pp . O ;".split(" ")}]}}]},
{a:"txt",b:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { c_ = pp . bK ; bk = bj ( db , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { c_ = cX ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bK ; bk [ 0 ] = db ; vec4 dc = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = dd ( dc , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { c_ = pp . bK ; bk [ 0 ] = db ; vec4 de = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = dd ( de , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { c_ = pp . bK ; bk [ 0 ] = db ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . df * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . df * u_p_size ) ; float dg = a_p_data [ 2 ] ; float dh = u_p_tilt * u_p_tilt_rand * ( 2.0 * dg - 1.0 ) ; float di = ( dh + u_p_tilt ) * M_PI ; vec4 dj = X ( TOWARD_VECTOR , di + c_ ) ; vec3 bo = ap ( bk , T ( dj , bn ) ) ; vec4 bY = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["bf","=","dg",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 dk = da ( ) ; dj = X ( TOWARD_VECTOR , c_ ) ; dk = dd ( dj , dk ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",
o:2},{a:"logical_and_expr",o:2},"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , dk ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",
"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"txt",b:"J ( pp . O , pp . dl , pp . dm , pp . dn , pp . df , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , dk ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["A","=","a_p_bb_vertex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cU = pp . L ;".split(" ")}]}}]},{a:"txt",b:"bU = pp . aQ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",
o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"gl_Position = f ; h = bo ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - bo ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["particle_system_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_sampler",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_diffuse_color_factor",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",
";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bf",";"]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",
b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"include",F:"halo_color.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",
j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bU ; float dp = 0.9 * length ( A ) ; float dq = smoothstep ( u_p_alpha_start , u_p_alpha_end , dp ) ; float L = bi . a * ( 1.0 - dq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4",
"ct","=","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_sampler , A ) ; bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"ct . a = cv . a ;".split(" ")}]}}]},{a:"txt",b:"ct . rgb *= bU ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cD = u_emit * ct . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logic_negative_expr",o:1},"SKY_COLOR",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( vec3 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cB = u_ambient * cA ; float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}}]},{a:"txt",
b:"float L = ct . a * cU ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["proc_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float dr = 0.99 ; const float ds = 1.8 ; const int dt = 8 ; float dy ( vec3 O , vec3 bD ) { float a = dot ( bD , bD ) ; float b = 2.0 * dot ( bD , O ) ; float du = dot ( O , O ) - 1.0 ; float dv = b * b - 4.0 * a * du ; float dw = sqrt ( dv ) ; float q = ( - b - dw ) / 2.0 ; float dx = du / q ; return dx ; } float dA ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float du = 1.0 + L * L ; float dz = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dz = max ( dz , 0.00001 ) ; return ( a / b ) * ( du / dz ) ; } float dF ( vec3 O , vec3 bD , float dB ) { float dC = dot ( bD , - O ) ; if ( dC < 0.0 ) { return 1.0 ; } vec3 dD = O + dC * bD ; if ( length ( dD ) < dB ) { return 0.0 ; } else if ( length ( dD ) >= dB ) { vec3 cW = normalize ( dD ) * dB - O ; float dE = acos ( dot ( normalize ( cW ) , bD ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dE * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dG ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bq = normalize ( bp ) ; vec3 dH = u_sun_direction ; float L = dot ( bq , dH ) ; float dI = dA ( L , - 0.01 ) * u_rayleigh_brightness * dH . z ; float dJ = dA ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dH . z ) ; float dK = smoothstep ( 0.0 , 100.0 , dA ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dL = vec3 ( 0.0 , 0.0 , dr ) ; float dM = dy ( dL , bq ) ; float dN = dM / float ( dt ) ; float dO = dF ( dL , bq , dr - 0.3 ) ; vec3 dP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dQ = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cl = 0 ; cl < dt ; cl ++ ) { float dR = dN * float ( cl ) ; vec3 O = dL + bq * dR ; float dS = dF ( O , dH , dr - 0.2 ) ; float dT = dy ( O , dH ) ; vec3 dU = dG ( dT , vec3 ( ds ) , u_scatter_strength ) * dS ; dP += dG ( sqrt ( dR ) , u_sky_color * dU , u_rayleigh_strength ) ; dQ += dG ( dR , dU , u_mie_strength ) ; } dP = dP * dO * pow ( dM , u_rayleigh_collection_power ) / float ( dt ) ; dQ = ( dQ * dO * pow ( dM , u_mie_collection_power ) ) / float ( dt ) ; vec3 aQ = vec3 ( dK * dQ + dJ * dQ + dI * dP ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
a["r_convolution_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } void main ( ) { vec3 ei = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 d_ = normalize ( bp ) ; vec3 ej = d_ ; vec3 ek = ej ; const int el = 1024 ; float em = 0.0 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , u_roughness ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; if ( eo > 0.0 ) { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , en ) . rgb ; bC ( bs ) ; ei += bs * eo ; em += eo ; } } ei = ei / em ; } else { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bp ) ) . rgb ; bC ( bs ) ; ei = bs ; } GLSL_OUT_FRAG_COLOR = vec4 ( ei , 1.0 ) ; }".split(" ")}]};
a["shadow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",
b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_VALUES",
b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE",
"CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE",
"SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2",
"NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",
b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"txt",b:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","NO_SHADOWS",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"txt",b:"float eq = ep ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = er ( eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = es ( i . z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["shadow.glslv"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",
b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"HAIR_BILLBOARD",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",
b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP",
"CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",
j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4",
"i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3",
"NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO",
"USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=",
"a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HAIR_BILLBOARD",{a:"logic_negative_expr",o:1},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","N",";"]}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , et , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ay","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eu = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; f . xy += eu ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["sky.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",
c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:["uniform","samplerCube","u_sky",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS",
"REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND","WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER","WO_SKYTEX",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:["GLSL_IN","vec3","bp",";"]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bs ; vec3 bq = normalize ( bp ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","ew","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( A . y ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec3 ez = vec3 ( A , 0.0 ) ; vec4 eA = GLSL_TEXTURE_CUBE ( u_sky , bq ) ; bC ( eA . rgb ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky , bq ) . rgb ; bC ( bs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float eC = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eD = vec3 ( 0.0 ) ; vec3 eE = mix ( u_underwater_fog_color_density . rgb , eD , min ( - bq . z , 1.0 ) ) ; eE *= min ( 1.0 - min ( 0.03 * eC , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eC - bq . z ) , 0.0 , 1.0 ) ; bs = mix ( bs , eE , aL ) ;".split(" ")}]}}]},
{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["sky.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",
o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bq = u_sky_vp_inverse * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};
a["skybox.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",
";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bq = u_cube_view_matrix * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};a["tex_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",
b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:"void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; float ew = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYPAPER"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) . xyz ; bC ( bs ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"float L = acos ( bq . z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec4 eA = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) ; bC ( eA . rgb ) ; vec3 ez = vec3 ( bp . xy , 0.0 ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bs","=","ex",";"]}]}}]}]}}]}]}}]},{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["water.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",
b:["0"]},{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"ABSORB",b:["6.0"]},{a:"var",c:"SSS_STRENGTH",b:["1.0"]},{a:"var",c:"SSS_WIDTH",b:["0.45"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",
c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.002"]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",
f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_cam_water_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_foam",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap1_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap2_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec3 bT ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 k ; GLSL_IN vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",
o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:3}],l:{a:"grp",
f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:"vec3 eP ( in vec2 eI , in vec3 U , in vec3 eJ , in vec3 eK , out float eL , in float eM ) { eL = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eN = eI . xy + U . xy * REFL_BUMP / m ; eL = u_reflect_factor ; vec3 eO ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eO = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"eO = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"txt",b:"} else { eO = GLSL_TEXTURE ( u_plane_reflection , eN ) . rgb ; bC ( eO ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eL = u_mirror_factor ; vec3 eO = eK * GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . rgb ; bC ( eO ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"eL = u_reflect_factor ; vec3 eO = eK * vec3 ( 0.3 , 0.5 , 1.0 ) ; bC ( eO ) ;".split(" ")}]}}]},{a:"txt",b:"eL = min ( eL * eM , 1.0 ) ; return eO ; }".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 cb = mat3 ( k , eF , j ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC",
"FOAM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bO = h . z ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( eG . x , - eG . y ) + 0.5 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eQ = vec3 ( 0.0 ) ; eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.3 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eI = l . xy / l . z ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 eI = vec2 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 eR = eI + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = max ( cR - m , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"float eT = eS ( cR , eR , eI ) ; float eU = max ( eT - m , 0.0 ) ; float eV = u_view_max_depth / ABSORB * eU ; float eW = min ( L * eV , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cS , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float cT = u_view_max_depth / ABSORB * cS ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cT , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["float","eW","=","L",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"if ( u_cam_water_depth < 0.0 ) eW = 0.0 ; vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eY = pow ( min ( eH . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ct = mix ( u_shallow_water_col , u_diffuse_color . rgb , eY ) ; eY = pow ( min ( eH . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ct = mix ( u_shore_water_col , ct , eY ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ct = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float eZ = max ( 1.0 - u_view_max_depth * cS , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float eZ = 1.0 - L ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float e_ = max ( bO / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],
l:{a:"grp",f:[{a:"txt",b:"vec3 fa = normalize ( vec3 ( eH . rg , 0.0 ) ) ; vec3 fb = normalize ( mix ( UP_VECTOR , fa , 0.8 ) ) ; float fc = 1.25 * max ( dot ( U , fb ) - 0.2 , 0.0 ) ; fc += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; eZ += fc * ( 1.0 - eH . b ) ; e_ *= ( 1.0 - 0.95 * pow ( eH . b , 0.1 ) ) ;".split(" ")}]}}]},{a:"txt",b:"eZ += e_ ; eZ = min ( u_foam_factor * eZ , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 fd = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + b_ * u_foam_scale ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec3 eK = cB + u_sun_intensity ; float eL ; vec3 eJ = reflect ( - D , U ) ; vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float fh = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; vec3 eO = eP ( eI , U , eJ , eK , eL , fh ) ; vec3 cy = u_diffuse_intensity * ct ; vec3 aQ ; vec3 cJ ; cK ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fi = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fi = clamp ( SSS_STRENGTH * fi , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fi ) ; aQ = mix ( aQ , u_shore_water_col , fi ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"aQ = mix ( eX , aQ , eW ) ;".split(" ")}]}}]},{a:"txt",
b:"aQ = mix ( aQ , eO , eL ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"float fj = mix ( fd . g , fd . r , max ( 4.0 * ( eZ - 0.75 ) , 0.0 ) ) ; fj = mix ( fd . b , fj , max ( 2.0 * eZ - 1.0 , 0.0 ) ) ; fj = mix ( 0.0 , fj , eZ ) ; aQ = mix ( aQ , eK , fj ) ;".split(" ")}]}}]},{a:"txt",b:["aQ","+=","cJ",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fk = m * u_view_max_depth ; float fl = 1.0 ; if ( u_cam_water_depth > 1.0 ) fl = 2.0 ; bR ( aQ , fk , D , fl ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"L = max ( L , cJ . r ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["L","+=","fj",";"]}]}}]}]}},{a:"elif",j:["SHORE_SMOOTHING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME",
1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fm = min ( min ( aO . x , aO . y ) , aO . z ) ; fm = clamp ( fm , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}},{a:"elif",j:["DEBUG_WIREFRAME",2,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fm = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fm = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["water.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",b:["0"]},
{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"MAX_SHORE_DIST",b:["100.0"]},{a:"var",c:"SHORE_MAP_SIZE_X",b:["1.0"]},{a:"var",c:"SHORE_MAP_SIZE_Y",b:["1.0"]},{a:"var",c:"SHORE_MAP_CENTER_X",b:["0.0"]},{a:"var",c:"SHORE_MAP_CENTER_Y",b:["0.0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"DST_NOISE_SCALE_0",b:["0.05"]},{a:"var",c:"DST_NOISE_SCALE_1",b:["0.03"]},{a:"var",c:"DST_NOISE_FREQ_0",b:["1.3"]},{a:"var",c:"DST_NOISE_FREQ_1",b:["1.0"]},{a:"var",c:"DIR_MIN_SHR_FAC",
b:["0.4"]},{a:"var",c:"DIR_FREQ",b:["0.5"]},{a:"var",c:"DIR_NOISE_SCALE",b:["0.05"]},{a:"var",c:"DIR_NOISE_FREQ",b:["0.07"]},{a:"var",c:"DIR_MIN_NOISE_FAC",b:["0.5"]},{a:"var",c:"DST_MIN_FAC",b:["0.2"]},{a:"var",c:"WAVES_HOR_FAC",b:["5.0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WAVES_LENGTH",b:["10.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",
c:"REFRACTIVE",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"procedural.glslf"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"DYNAMIC",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","a_tbn",";"]}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_polyindex",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec3 bT ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3",
"eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shore_dist_map",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 ft ( in vec2 fn ) { vec2 fo = 0.5 + vec2 ( ( fn . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fn . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 fp = GLSL_TEXTURE ( u_shore_dist_map , fo ) ; const vec2 fq = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fr = dot ( fp . ba , fq ) ; vec2 fs = normalize ( fp . rg * 2.0 - 1.0 ) ; return vec3 ( fs , fr ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",
f:[{a:"define",c:"SMALL_WAVES_FAC",b:["0.2"]},{a:"txt",b:"void fI ( inout vec3 fn , in float fu , in vec3 fp ) { float fw = fv ( DST_NOISE_SCALE_0 * ( fn . xy + DST_NOISE_FREQ_0 * fu ) ) * fv ( DST_NOISE_SCALE_1 * ( fn . yx - DST_NOISE_FREQ_1 * fu ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float fx = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fr = fp . b ; float fy = sqrt ( fr ) ; float fz = max ( fr , DIR_MIN_SHR_FAC ) * sin ( fy / fx + DIR_FREQ * fu ) ; float fA = max ( fv ( DIR_NOISE_SCALE * ( fn . xy + DIR_NOISE_FREQ * fu ) ) , DIR_MIN_NOISE_FAC ) ; fz *= fA ; float fB = WAVES_HEIGHT * mix ( fz , fw , max ( fy , DST_MIN_FAC ) ) ; vec2 fs = fp . rg ; float fC = WAVES_HOR_FAC * fz * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fr ) , 0.0 ) ; vec2 fD = fC * fs ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float fB = WAVES_HEIGHT * fw ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec2 fE = 1.0 * ( fn . xy - 0.3 * fu ) ; vec2 fF = 0.7 * ( fn . yx + 0.07 * fu ) ; float fH = fG ( fE ) . x + fG ( fF ) . x - 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"fn . xy += fD ; fH *= fr ;".split(" ")}]}}]},{a:"txt",b:"fB += SMALL_WAVES_FAC * fH ;".split(" ")}]}}]},{a:"txt",b:"fn . z += fB ; }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec3 O = a_position ; float fJ = abs ( O . z ) ; vec2 fK = u_camera_eye . xy - mod ( u_camera_eye . xy , fJ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],
l:{a:"grp",f:[{a:"txt",b:"O . z = WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O . z = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"O . xy += fK ; vec3 bX = O ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","a_texcoord",";"]}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bX = aw . O ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"eH = ft ( bX . xy ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fL = length ( u_wind ) ; if ( fL == 0.0 ) fL = 1.0 ; float fM = u_time ; fM *= fL ;".split(" ")},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"float fN = fJ ; vec3 fO = bX + vec3 ( fN , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , fN , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["eG","=","bX",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fO = bX + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 fQ = ft ( fO . xy ) ; vec3 fR = ft ( fP . xy ) ; fI ( fO , fM , fQ ) ; fI ( fP , fM , fR ) ; fI ( bX , fM , eH ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"fI ( fO , fM , vec3 ( 0.0 ) ) ; fI ( fP , fM , vec3 ( 0.0 ) ) ; fI ( bX , fM , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["GENERATED_MESH","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( a_position . z < 0.0 ) { bX . z = WATER_LEVEL - 1.0 ; fO . z = bX . z ; fP . z = bX . z ; }".split(" ")}]}}]},{a:"txt",b:"vec3 eg = normalize ( fO - bX ) ; vec3 V = normalize ( fP - bX ) ; j = normalize ( cross ( eg , V ) ) ; float fS = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fS , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{a:"elif",j:["GENERATED_MESH",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{a:"elif",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"k = V ; eF = cross ( j , k ) ;".split(" ")}]}}]},{a:"txt",b:"h = bX ; bT = u_camera_eye - bX ; vec4 bY = vec4 ( ap ( u_view_tsr , bX ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float fT = f . x ; float fU = f . y ; float fV = f . w ; l . x = ( fT + fV ) / 2.0 ; l . y = ( fU + fV ) / 2.0 ; l . z = fV ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["postprocessing/antialiasing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_FXAA_LIGHT"]},{a:"var",c:"AA_QUALITY",b:["AA_QUALITY_LOW"]},{a:"include",F:"precision_statement.glslf"},
{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_REDUCE_MIN",b:["(","1.0","/","128.0",")"]},{a:"define",c:"FXAA_REDUCE_MUL",b:["(","1.0","/","8.0",")"]},{a:"define",c:"FXAA_SPAN_MAX",b:["8.0"]},{a:"txt",b:"vec4 fX ( float x , float y ) { vec2 fW = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fW ) ; } vec4 gt ( ) { vec4 fY = fX ( - 1.0 , - 1.0 ) ; vec4 fZ = fX ( 1.0 , - 1.0 ) ; vec4 f_ = fX ( - 1.0 , 1.0 ) ; vec4 gc = fX ( 1.0 , 1.0 ) ; vec4 gd = fX ( 0.0 , 0.0 ) ; float gf = ge ( gd ) ; float gh = ge ( fY ) ; float gi = ge ( fZ ) ; float gj = ge ( f_ ) ; float gk = ge ( gc ) ; float gl = min ( gf , min ( min ( gh , gi ) , min ( gj , gk ) ) ) ; float gm = max ( gf , max ( max ( gh , gi ) , max ( gj , gk ) ) ) ; vec2 bD ; bD . x = - ( ( gh + gi ) - ( gj + gk ) ) ; bD . y = ( ( gh + gj ) - ( gi + gk ) ) ; float gn = max ( ( gh + gi + gj + gk ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float go = 1.0 / ( min ( abs ( bD . x ) , abs ( bD . y ) ) + gn ) ; bD = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bD * go ) ) * u_texel_size ; vec4 gp = 0.5 * ( GLSL_TEXTURE ( u_color , A + bD * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bD * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gq = gp * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bD * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bD * 0.5 ) ) ; float gs = ge ( gq ) ; if ( ( gs < gl ) || ( gs > gm ) ) return gp ; else return gq ; }".split(" ")}]}},
{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["1"]},{a:"include",F:"fxaa.glslf"},{a:"cond",f:[{a:"if",j:["AA_QUALITY","AA_QUALITY_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["39"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["1.00"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.063"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0312"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_MEDIUM",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["20"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.65"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0625"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.50"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",
b:["0.0833"]}]}}]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gt ( ) ;".split(" ")}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 gu = u_texel_size ; GLSL_OUT_FRAG_COLOR = gv ( A , u_color , gu , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},{a:"txt",
b:["}"]}]};a["postprocessing/bloom_combine.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"BLUR_PASS_NUM",b:["BLUR_PASS_5"]},{a:"txt",b:["uniform","sampler2D","u_main",";"]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_4",";"]}]}}]},
{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_main , A ) ; vec4 gx = vec4 ( 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gw + gx ; }".split(" ")}]};
a["postprocessing/coc.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"COC_TYPE",b:["COC_ALL"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_coc_fg",";"]}]}}]},{a:"txt",b:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gz = 0.0 ;".split(" ")},{a:"cond",
f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 gA = GLSL_TEXTURE ( u_coc_fg , A ) ; float gB = gA . a ;".split(" ")}]}}]},{a:"txt",b:"if ( eq < u_dof_dist ) gz = ( u_dof_dist - eq - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"else gz = ( eq - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{a:"txt",b:"gz = clamp ( gz , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gz = max ( gz , gB ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gz , gz ) ;".split(" ")}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
a["postprocessing/compositing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gC = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gC . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float ds = ge ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( ds ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gC . a ) ; }".split(" ")}]};
a["postprocessing/depth_pack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = er ( clamp ( gy ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
a["postprocessing/dof.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DOF_TYPE",b:["DOF_SIMPLE"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gD = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",
j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gz ; vec4 gE = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gF = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gG = min ( gE . rgba , gF . rgba ) ; gz = gG . a ; if ( gz > 0.0 ) { gG = vec4 ( gG . rgb / gz , gD . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gG , min ( gz * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gD ;".split(" ")}]}},{a:"elif",j:["DOF_TYPE","DOF_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gH ; if ( eq < u_dof_dist ) gH = ( u_dof_dist - eq ) / u_dof_front_end ; else gH = ( eq - u_dof_dist ) / u_dof_rear_end ; gH = clamp ( gH , 0.0 , 1.0 ) ; vec4 gI = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gI , gH ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","gD",";"]}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = gD ; }".split(" ")}]};a["postprocessing/glow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gJ = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gK = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gL = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gJ ; if ( gL . a != 0.0 ) { float gM = u_glow_mask_large_coeff * gL . a ; gM = clamp ( gM , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gL . rgb / gL . a , gM ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gM ) ; } if ( gK . a != 0.0 ) { float gN = u_glow_mask_small_coeff * gK . a ; gN = clamp ( gN , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gK . rgb / gK . a , gN ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gN ) ; } }".split(" ")}]};
a["postprocessing/god_rays.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"STEPS_PER_PASS",b:["10.0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"procedural.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN float gO ; GLSL_IN vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN vec4 gQ ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cS = ( gQ . xy - A ) ; float aM = length ( cS ) ; vec2 gR = u_radial_blur_step * cS / aM ; float gS = aM / u_radial_blur_step ; gR *= min ( gS , STEPS_PER_PASS ) / STEPS_PER_PASS ; gS = max ( gS , STEPS_PER_PASS ) ; vec2 gT = A ; float gU = 0.0 ; const int gV = int ( STEPS_PER_PASS ) ; int gW = int ( gS + 0.5 ) ; for ( int cl = 0 ; cl < gV ; cl += 1 ) { if ( cl <= gW ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_input , gT , u_camera_range ) ; gU += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , eq ) , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 gX = GLSL_TEXTURE ( u_input , gT ) ; gU += cQ ( gX ) ;".split(" ")}]}}]},{a:"txt",b:"} gT += gR ; }".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = A + gP ; float gY = fG ( vec2 ( 2.5 * ( b_ . x ) , 2.5 * ( b_ . y ) + 1.0 * u_time ) ) . x + 0.75 * fG ( vec2 ( 5.0 * ( b_ . x ) - 0.66 * u_time , 5.0 * ( b_ . y ) + 0.66 * u_time ) ) . x + 0.5 * fv ( vec2 ( 7.5 * ( b_ . x ) + 0.33 * u_time , 7.5 * ( b_ . y ) - 0.33 * u_time ) ) ; gY *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gO ; gU = max ( gY , gU ) ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_OUT_FRAG_COLOR = er ( gU / STEPS_PER_PASS ) ; }".split(" ")}]};a["postprocessing/god_rays.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{a:"txt",b:["GLSL_IN","vec2","a_bb_vertex",";"]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT float gO ; GLSL_OUT vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gQ ; void main ( ) { A = a_bb_vertex ; vec3 bD = normalize ( u_sun_direction ) ; gQ = u_view_proj_matrix * vec4 ( bD , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"if ( u_cam_water_depth < 0.0 ) { gO = 1.0 ; vec3 gZ = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 g_ = T ( u_camera_quat , gZ ) ; g_ = normalize ( g_ ) ; float ha = dot ( g_ , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hb = atan ( g_ . x , g_ . z ) ; gP = vec2 ( - hb , acos ( ha ) ) ; } else { gO = 0.0 ; }".split(" ")}]}}]},{a:"txt",b:"gQ . xy = 0.5 * ( gQ . xy / gQ . w + 1.0 ) ; gQ += 99999.0 * step ( gQ . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/god_rays_combine.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SAFARI_CANVAS_ALPHA_HACK",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hc = GLSL_TEXTURE ( u_main , A ) ; vec3 hd = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bC ( hc . rgb ) ; float he = cQ ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hf = hc . rgb + u_god_rays_intensity * vec3 ( he ) * hd ; aW ( hf ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SAFARI_CANVAS_ALPHA_HACK"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , max ( 0.01 , hc . a ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , hc . a ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["postprocessing/luminance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_input , A ) ; float hg = dot ( gw . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hg ) , 1.0 ) ; }".split(" ")}]};
a["postprocessing/luminance_av.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hh = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hh ) , 1.0 ) ; }".split(" ")}]};a["postprocessing/luminance_truncated.glslf"]={a:"grp",f:[{a:"version",
b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"ADAPTIVE_BLOOM",b:["0"]},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_average_lum_val",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM"],l:{a:"grp",f:[{a:"txt",b:"float hh = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","hh","=","u_average_lum_val",";"]}]}}]},{a:"txt",b:"float hi = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hj = hi / hh ; float hk = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( hk , hk + 1.2 , hj ) ; }".split(" ")}]};a["postprocessing/motion_blur.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hl = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hm = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hn = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hm - hn ) > u_motion_blur_decay_threshold ) { vec4 ho = ( 1.0 - u_motion_blur_exp ) * hm + u_motion_blur_exp * hn ; vec4 hp = ho - hn ; vec4 hq = hm - hn ; vec4 cS = min ( max ( abs ( hp ) , vec4 ( hl ) ) , abs ( hq ) ) * sign ( hp ) ; GLSL_OUT_FRAG_COLOR = hn + cS ; } else { GLSL_OUT_FRAG_COLOR = hm ; } }".split(" ")}]};
a["postprocessing/outline.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hr = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hr ; if ( u_draw_outline != 0.0 ) { vec4 hs = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 ht = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hu = ht . a - hs . a ; if ( hu != 0.0 ) { float hv = smoothstep ( 0.0 , 1.0 , ht . a ) ; if ( hs . a == 0.0 ) { vec3 hw = u_outline_color ; aW ( hw ) ; vec4 hx = vec4 ( clamp ( hw , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hr , hx , hv ) ; } } } }".split(" ")}]};
a["postprocessing/performance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cl = 0 ; cl < 10 ; cl ++ ) { vec2 hy = vec2 ( fract ( A * vec2 ( cl ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hy ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["postprocessing/postprocessing.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"POST_EFFECT",b:["POST_EFFECT_NONE"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{a:"elif",j:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 du = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( du . r + du . g + du . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; float gz ; float hB = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hz = aQ ; hA = aQ ; gz = aQ . a ; cS = gz * cS ; for ( int cl = 0 ; cl < 12 ; cl += 2 ) { fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; } hz /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , hB ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; aQ = GLSL_TEXTURE ( u_color , A ) ; hA = max ( hA , aQ ) ; hz = aQ ; hz . a = aQ . a * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , 0.5 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_EXTEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 cS = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{a:"elif",j:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float hC = u_delta [ 0 ] ; float hD = u_delta [ 1 ] ; float hE = 1.0 / 3.0 ; float hF = 0.5 ; vec2 hG = vec2 ( hE , hF ) ; if ( u_tex_number == 0 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , hF - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 b_ = A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 1.5 - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 b_ = A * hG + vec2 ( hE , 0.0 ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 b_ = A * hG + vec2 ( hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 3.0 * hF - b_ [ 1 ] ) ) ; } else { vec2 b_ = A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hF + hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/postprocessing.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/precompute_brdf.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"PRECISION",b:["highp"]},
{a:"txt",b:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } float hK ( float hH , float ec ) { float a = ec ; float hI = ( a * a ) / 2.0 ; float hJ = hH ; float dX = hH * ( 1.0 - hI ) + hI ; return hJ / dX ; } float hN ( vec3 d_ , vec3 ek , vec3 en , float ec ) { float hH = max ( dot ( d_ , ek ) , 0.0 ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; float hL = hK ( hH , ec ) ; float hM = hK ( eo , ec ) ; return hM * hL ; } vec2 hU ( float hH , float ec ) { vec3 ek ; ek . x = sqrt ( 1.0 - hH * hH ) ; ek . y = 0.0 ; ek . z = hH ; float cB = 0.0 ; float hO = 0.0 ; vec3 d_ = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int el = 1024 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , ec ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( en . z , 0.0 ) ; float hP = max ( ef . z , 0.0 ) ; float hQ = max ( dot ( ek , ef ) , 0.0 ) ; if ( eo > 0.0 ) { float hR = hN ( d_ , ek , en , ec ) ; float hS = ( hR * hQ ) / ( hP * hH ) ; float hT = pow ( 1.0 - hQ , 5.0 ) ; cB += ( 1.0 - hT ) * hS ; hO += hT * hS ; } } cB /= float ( el ) ; hO /= float ( el ) ; return vec2 ( cB , hO ) ; } void main ( ) { vec2 hV = hU ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hV , 0.0 , 1.0 ) ; }".split(" ")}]};
a["postprocessing/smaa.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"SMAA_REPROJECTION",b:["0"]},{a:"var",c:"SMAA_PREDICATION",b:["0"]},{a:"var",c:"SMAA_DISABLE_CORNER_DETECTION",b:["0"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_ULTRA"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:["uniform","sampler2D","u_color",";"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_prev",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_blend",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2},"SMAA_PREDICATION",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4",
"hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 hX ; GLSL_IN vec4 hY ; GLSL_IN vec4 hZ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","h_",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.15"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",
b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",
b:["8"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.05"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["16"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_DEPTH_THRESHOLD",l:{a:"grp",
f:[{a:"define",c:"SMAA_DEPTH_THRESHOLD",b:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS_DIAG",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_CORNER_ROUNDING",l:{a:"grp",f:[{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",l:{a:"grp",f:[{a:"define",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",
c:"SMAA_PREDICATION",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_THRESHOLD",b:["0.01"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_SCALE",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_STRENGTH",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_STRENGTH",b:["0.4"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION",
l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION_WEIGHT_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION_WEIGHT_SCALE",b:["30.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE",b:["16"]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE_DIAG",b:["20"]},{a:"define",c:"SMAA_AREATEX_PIXEL_SIZE",b:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},
{a:"define",c:"SMAA_AREATEX_SUBTEX_SIZE",b:["(","1.0","/","7.0",")"]},{a:"define",c:"SMAA_SEARCHTEX_SIZE",b:"vec2 ( 66.0 , 33.0 )".split(" ")},{a:"define",c:"SMAA_SEARCHTEX_PACKED_SIZE",b:"vec2 ( 64.0 , 16.0 )".split(" ")},{a:"define",c:"SMAA_CORNER_ROUNDING_NORM",b:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 id ( vec2 b_ , sampler2D ia ) { float p = GLSL_TEXTURE ( ia , b_ ) . r ; float ib = GLSL_TEXTURE ( ia , hX . xy ) . r ; float ic = GLSL_TEXTURE ( ia , hX . zw ) . r ; return vec3 ( p , ib , ic ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ii ( vec2 b_ , sampler2D ie ) { vec3 ig = id ( b_ , ie ) ; vec2 cS = abs ( ig . xx - ig . yz ) ; vec2 ih = step ( SMAA_PREDICATION_THRESHOLD , cS ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * ih ) ; }".split(" ")}]}}]},{a:"txt",b:"void im ( bvec2 ij , inout vec2 ik , vec2 il ) { if ( ij . x ) ik . x = il . x ; if ( ij . y ) ik . y = il . y ; } void im ( bvec4 ij , inout vec4 ik , vec4 il ) { im ( ij . xy , ik . xy , il . xy ) ; im ( ij . zw , ik . zw , il . zw ) ; } vec2 io ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 io ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iA ( vec2 b_ , sampler2D ip".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ie"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:"vec2 iq = ii ( b_ , ie ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iq = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{a:"txt",
b:"vec3 ir = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float en = dot ( GLSL_TEXTURE ( ip , b_ ) . rgb , ir ) ; float is = dot ( GLSL_TEXTURE ( ip , hX . xy ) . rgb , ir ) ; float it = dot ( GLSL_TEXTURE ( ip , hX . zw ) . rgb , ir ) ; vec4 cS ; cS . xy = abs ( en - vec2 ( is , it ) ) ; vec2 ih = step ( iq , cS . xy ) ; if ( dot ( ih , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iu = dot ( GLSL_TEXTURE ( ip , hY . xy ) . rgb , ir ) ; float iv = dot ( GLSL_TEXTURE ( ip , hY . zw ) . rgb , ir ) ; cS . zw = abs ( en - vec2 ( iu , iv ) ) ; vec2 iw = max ( cS . xy , cS . zw ) ; float ix = dot ( GLSL_TEXTURE ( ip , hZ . xy ) . rgb , ir ) ; float iy = dot ( GLSL_TEXTURE ( ip , hZ . zw ) . rgb , ir ) ; cS . zw = abs ( vec2 ( is , it ) - vec2 ( ix , iy ) ) ; iw = max ( iw . xy , cS . zw ) ; float iz = max ( iw . x , iw . y ) ; ih . xy *= step ( iz , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cS . xy ) ; return ih ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iC ( vec2 iB ) { iB . r = iB . r * abs ( 5.0 * iB . r - 5.0 * 0.75 ) ; return io ( iB ) ; } vec4 iC ( vec4 iB ) { iB . rb = iB . rb * abs ( 5.0 * iB . rb - 5.0 * 0.75 ) ; return io ( iB ) ; } vec2 iE ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz += t * vec3 ( bD , 1.0 ) ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iF ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; fW . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz = t * vec3 ( bD , 1.0 ) + fW . xyz ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; iB = iC ( iB ) ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iH ( sampler2D iG , vec2 aM , vec2 iB , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iB + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . x += 0.5 ; b_ . y += SMAA_AREATEX_SUBTEX_SIZE * fI ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } vec2 iM ( sampler2D iD , sampler2D iG , vec2 b_ , vec2 iB , vec4 iI ) { vec2 ir = vec2 ( 0.0 , 0.0 ) ; vec4 dz ; vec2 iJ ; if ( iB . r > 0.0 ) { dz . xz = iE ( iD , b_ , vec2 ( - 1.0 , 1.0 ) , iJ ) ; dz . x += float ( iJ . y > 0.9 ) ; } else dz . xz = vec2 ( 0.0 , 0.0 ) ; dz . yw = iE ( iD , b_ , vec2 ( 1.0 , - 1.0 ) , iJ ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x + 0.25 , dz . x , dz . y , - dz . y - 0.25 ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . xy = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; du . yxwz = iC ( du . xyzw ) ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0.0 , 0.0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . z ) ; } dz . xz = iF ( iD , b_ , vec2 ( - 1 , - 1 ) , iJ ) ; if ( GLSL_TEXTURE ( iD , b_ + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dz . yw = iF ( iD , b_ , vec2 ( 1 , 1 ) , iJ ) ; dz . y += float ( iJ . y > 0.9 ) ; } else dz . yw = vec2 ( 0.0 , 0.0 ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x , - dz . x , dz . y , dz . y ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . x = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; du . y = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0 , 0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . w ) . gr ; } return ir ; }".split(" ")}]}}]},
{a:"txt",b:"float iP ( sampler2D iN , vec2 iB , float fI ) { vec2 hG = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iO = SMAA_SEARCHTEX_SIZE * vec2 ( fI , 1.0 ) ; hG += vec2 ( - 1.0 , 1.0 ) ; iO += vec2 ( 0.5 , - 0.5 ) ; hG *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iO *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iN , hG * iB + iO , 0.0 ) . r ; } float iQ ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x > iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.0 ) + 3.25 ; return u_texel_size . x * fI + b_ . x ; } float iR ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x < iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.5 ) + 3.25 ; return - u_texel_size . x * fI + b_ . x ; } float iS ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y > iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fI + b_ . y ; } float iT ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y < iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fI + b_ . y ; } vec2 iW ( sampler2D iG , vec2 aM , float iU , float iV , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * io ( 4.0 * vec2 ( iU , iV ) ) + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . y = SMAA_AREATEX_SUBTEX_SIZE * fI + b_ . y ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } void iZ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:"} void i_ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jc ( vec2 b_ , vec2 ja , sampler2D iD , sampler2D iG , sampler2D iN , vec4 iI ) { vec4 ir = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iB = GLSL_TEXTURE ( iD , b_ ) . rg ; if ( iB . g > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"ir . rg = iM ( iD , iG , b_ , iB , iI ) ; if ( ir . r == - ir . g ) {".split(" ")}]}}]},
{a:"txt",b:"vec2 dz ; vec3 iK ; iK . x = iQ ( iD , iN , hX . xy , hZ . x ) ; iK . y = hY . y ; dz . x = iK . x ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . r ; iK . z = iR ( iD , iN , hX . zw , hZ . y ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . xx - ja . xx ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; ir . rg = iW ( iG , jb , iU , iV , iI . y ) ; iK . y = b_ . y ; iZ ( iD , ir . rg , iK . xyzy , dz ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"} else iB . r = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"} if ( iB . r > 0.0 ) { vec2 dz ; vec3 iK ; iK . y = iS ( iD , iN , hY . xy , hZ . z ) ; iK . x = hX . x ; dz . x = iK . y ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . g ; iK . z = iT ( iD , iN , hY . zw , hZ . w ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . yy - ja . yy ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; ir . ba = iW ( iG , jb , iU , iV , iI . x ) ; iK . x = b_ . x ; i_ ( iD , ir . ba , iK . xyxz , dz ) ; } return ir ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jl ( vec2 b_ , sampler2D ip , sampler2D jd".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:") { vec4 a ; a . x = GLSL_TEXTURE ( jd , hW . xy ) . a ; a . y = GLSL_TEXTURE ( jd , hW . zw ) . g ; a . wz = GLSL_TEXTURE ( jd , b_ ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( ip , b_ , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl = 2.0 * jg ( jf ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:"return aQ ; } else { bool cj = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jh = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 ji = a . yw ; im ( bvec4 ( cj , cj , cj , cj ) , jh , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; im ( bvec2 ( cj , cj ) , ji , a . xz ) ; ji /= dot ( ji , vec2 ( 1.0 , 1.0 ) ) ; vec4 jj = jh * vec4 ( u_texel_size , - u_texel_size ) + b_ . xyxy ; vec4 aQ = ji . x * GLSL_TEXTURE ( ip , jj . xy , 0.0 ) ; aQ += ji . y * GLSL_TEXTURE ( ip , jj . zw , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , jj . xy ) ; vec2 jk = 2.0 * jg ( jf ) - 1.0 ; vec2 dl = ji . x * jk ; jf = GLSL_TEXTURE ( je , jj . zw ) ; jk = 2.0 * jg ( jf ) - 1.0 ; dl += ji . y * jk ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}","}"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jq ( vec2 b_ , sampler2D jm , sampler2D jn".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl ; dl = 2.0 * jg ( jf ) - 1.0 ; vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ - dl ) ; float cS = abs ( jo . a * jo . a - jp . a * jp . a ) / 2.0 ; float cp = 0.5 * clamp ( 1.0 - sqrt ( cS ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( jo , jp , cp ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ ) ; return mix ( jo , jp , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( iA ( A , u_color".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","u_predication_tex"]}]}}]},{a:"txt",b:") , 0.0 , 0.0 ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jc ( A , h_ , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jl ( A , u_color , u_blend".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",";"]}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( jq ( A , u_color , u_color_prev".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};a["postprocessing/smaa.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",
b:["highp"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_LOW"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec4 hX ; GLSL_OUT vec4 hY ; GLSL_OUT vec4 hZ ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","h_",";"]}]}}]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["4"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["8"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["32"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jr ( vec2 b_ ) { hX = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; hZ = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + b_ . xyxy ; }".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void js ( vec2 b_ , out vec2 ja ) { ja = b_ / u_texel_size ; hX = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + b_ . xyxy ; hZ = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hX . xz , hY . yw ) ; }".split(" ")}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jt ( vec2 b_ ) { hW = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jr","(","A",")",";"]}]}},{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"js ( A , h_ ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jt","(","A",")",";"]}]}}]},{a:"txt",b:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/ssao.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_WHITE",b:["0"]},{a:"var",c:"SSAO_QUALITY",b:["SSAO_QUALITY_8"]},{a:"var",c:"SSAO_HEMISPHERE",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",
";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; } void main ( ) { vec3 gC = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_WHITE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gC , 1.0 ) ; return ;".split(" ")}]}}]},{a:"txt",b:"vec3 jv = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float eq = ju ( A ) ; float jw = eq * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_QUALITY","SSAO_QUALITY_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 8.0 ; const int jy = 1 ;".split(" ")}]}},
{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 16.0 ; const int jy = 2 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_24",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 24.0 ; const int jy = 3 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_32",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 32.0 ; const int jy = 4 ;".split(" ")}]}}]},{a:"txt",b:"float jz = u_ssao_radius_increase * 0.001 ; const float jA = 1.0 + 2.4 / jx ; float jB = 0.0 ; for ( int cl = 0 ; cl < jy ; cl ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jC = reflect ( normalize ( vec3 ( x , y , z ) ) , jv ) * ( jz *= jA ) ; vec3 jD = vec3 ( A , jw ) ; jD += vec3 ( jC . xy , jC . z * jw * 2.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jD . z -= 1.4 * ( jD . z - jw ) * step ( jw , jD . z ) ;".split(" ")}]}}]},{a:"txt",b:"float jE = ju ( jD . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jF = clamp ( ( jw - jE ) / jE , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB += mix ( 1.0 , jF , step ( jE , jD . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB += mix ( step ( jD . z , jE ) , 0.5 , jF ) ;".split(" ")}]}}]},
{a:"txt",b:"} jB = jB / jx ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + 0.6 * jB , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + jB , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"float jG = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * eq ) ; jB = mix ( 1.0 , jB , jG ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gC , jB ) ; }".split(" ")}]};a["postprocessing/ssao_blur.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},
{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_BLUR_DEPTH",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"}]}}]},{a:"txt",b:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",
b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { float jH = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jI = ju ( A ) ; float cp = 0.0 ; float jJ = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{a:"txt",b:"vec2 jK = vec2 ( - 2.0 ) ; for ( int cl = 0 ; cl < 4 ; ++ cl ) { for ( int jL = 0 ; jL < 4 ; ++ jL ) { vec2 fI = ( jK + vec2 ( float ( cl ) , float ( jL ) ) ) * u_texel_size ; float jM = GLSL_TEXTURE ( u_ssao_mask , A + fI ) . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jN = ju ( A + fI ) ; float jO = 1.0 - clamp ( abs ( jN - jI ) * jJ , 0.0 , 1.0 ) ; jH += jM * jO ; cp += jO ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["jH","+=","jM",";"]}]}}]},{a:"txt",b:["}","}"]},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / cp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / 16.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/stereo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANAGLYPH",b:["0"]},{a:"var",c:"SIDEBYSIDE",b:["0"]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"DISTOR_SCALE",b:["0.8"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["ANAGLYPH",{a:"logic_negative_expr",o:1},"SIDEBYSIDE",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void jX ( vec2 b_ , vec2 ao , float df , sampler2D jP ) { vec2 bz = ( b_ - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / df ; float jQ = bz . x * bz . x + bz . y * bz . y ; vec2 jR = bz * ( 1.0 + u_distortion_params [ 0 ] * jQ + u_distortion_params [ 1 ] * jQ * jQ ) ; vec2 jS = jR * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jT = jS * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jQ * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jU = jS + 0.5 ; vec2 jV = jS * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jQ * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jV , 0.0 , 1.0 ) != jV ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jW = GLSL_TEXTURE ( jP , jU ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jP , jT ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jW . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jP , jV ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jW . w ; } } else { jS += 0.5 ; if ( clamp ( jS , 0.0 , 1.0 ) != jS ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jP , jS ) ; } } }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ANAGLYPH"],l:{a:"grp",f:[{a:"txt",b:"vec4 jY = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jZ = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 j_ = vec3 ( jY [ 0 ] , jY [ 1 ] , jY [ 2 ] ) ; bC ( j_ ) ; vec3 ka = vec3 ( jZ [ 0 ] , jZ [ 1 ] , jZ [ 2 ] ) ; bC ( ka ) ; mat3 kb = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bv = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kb * j_ , 0.0 , 1.0 ) + clamp ( bv * ka , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jY [ 3 ] + jZ [ 3 ] ) ;".split(" ")}]}},
{a:"elif",j:["SIDEBYSIDE"],l:{a:"grp",f:[{a:"txt",b:"if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_left ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/velocity.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float eq = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kc = vec4 ( A * 2.0 - 1.0 , 2.0 * eq - 1.0 , 1.0 ) ; vec4 cy = u_view_proj_inverse * kc ; vec4 kd = cy / cy . w ; vec4 ke = u_view_proj_prev * kd ; ke /= ke . w ; vec2 dl = ( kc . xy - ke . xy ) / 4.0 + 0.5 ; dl = clamp ( dl , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = er ( dl ) ; }".split(" ")}]};
a["include/blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"BLENDING_GLSLF",b:[""]},{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; } vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; } vec3 kl ( vec3 ki , vec3 kj , float kk ) { return mix ( ki , kj , kk ) ; } vec3 km ( vec3 ki , vec3 kj , float kk ) { return kk * ki + kj ; } vec3 kn ( vec3 ki , vec3 kj , float kk ) { return kj - kk * ki ; } vec3 kp ( vec3 ki , vec3 kj , float kk ) { float ko = _1_0 - kk ; return ( vec3 ( ko ) + kk * ki ) * kj ; } vec3 kq ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return vec3 ( _1_0 ) - ( ko + kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) ; } vec3 kr ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return mix ( kj * ( ko + 2.0 * kk * ki ) , vec3 ( _1_0 ) - ( ko + 2.0 * kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) , step ( 0.5 , kj ) ) ; } vec3 ks ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , abs ( ki - kj ) , kk ) ; } vec3 kt ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , kj / ( ki + step ( ki , vec3 ( _0_0 ) ) ) , kk ) ; } vec3 ku ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , min ( ki , kj ) , kk ) ; } vec3 kv ( vec3 ki , vec3 kj , float kk ) { return max ( kk * ki , kj ) ; } vec3 kz ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . x , kx . yz ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kA ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . x , mix ( kw . y , kx . y , kk ) , kw . z ) ) ; } return ki ; } vec3 kB ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . xy , mix ( kw . z , kx . z , kk ) ) ) ; } vec3 kC ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . xy , kx . z ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kE ( vec3 ki , vec3 kj , float kk ) { vec3 kD = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kj ) * ( vec3 ( _1_0 ) - ki ) ; return mix ( ki , ( ( vec3 ( _1_0 ) - ki ) * kj * ki ) + ki * kD , kk ) ; } vec3 kF ( vec3 ki , vec3 kj , float kk ) { return ki + kk * ( 2.0 * kj - _1_0 ) ; } float kJ ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return ( ko + kk * kG ) * kH ; } float kK ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return _1_0 - ( ko + kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) ; } float kL ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return mix ( kH * ( ko + 2.0 * kk * kG ) , _1_0 - ( ko + 2.0 * kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) , step ( 0.5 , kH ) ) ; }".split(" ")}]}}]}]};
a["include/caustics.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"CAUSTICS_GLSLF",l:{a:"grp",f:[{a:"define",c:"CAUSTICS_GLSLF",b:[""]},{a:"var",c:"SUN_NUM",b:["0"]},{a:"var",c:"CAUST_SCALE",b:["0.25"]},{a:"var",c:"CAUST_SPEED",b:["vec2","(","0.0",")"]},{a:"var",c:"CAUST_BRIGHT",b:["0.5"]},{a:"include",F:"procedural.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"CAUSTICS_VIEW_DISTANCE",b:["100.0"]},{a:"txt",b:"void bQ ( inout vec3 aQ , float kM , float fu , vec4 bP , vec3 U , vec3 kN , vec3 kO , vec4 kP , vec3 bo , float bN ) { if ( bN > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kQ = bo + U ; kQ . xz = 10.0 * sin ( 0.1 * kQ . xz ) ; vec3 kS = T ( kR ( kP ) , kQ ) ; vec2 b_ = kS . xz ; vec3 kT = kN ; float kU = max ( dot ( U , kT ) , 0.0 ) ; float kV = 0.025 ; vec2 kW = CAUST_SPEED * fu ; b_ . s += 0.25 * sin ( dot ( bo + fu , vec3 ( 1.0 ) ) ) ; b_ . t += 0.35 * ( - sin ( dot ( bo - fu , vec3 ( - 0.7 ) ) ) ) ; b_ . st += 0.15 * cos ( 4.0 * kM - kW . x ) + 1.5 * sin ( kM - 0.3 * kW . y ) ; float hG = CAUST_SCALE * ( 1.0 + max ( 0.1 * kM , 0.0 ) ) ; vec3 kY = kX ( ( b_ / hG ) , kV ) ; kY *= CAUST_BRIGHT ; kY *= kY ; float kZ = min ( 0.25 * kM , - kM ) + 1.0 ; kZ = max ( kZ , 0.0 ) ; float k_ = bP [ SUN_NUM ] * kU ; float la = max ( sign ( kM ) , 0.0 ) ; k_ = k_ + max ( 0.5 * sign ( - U . y ) * la , 0.0 ) ; k_ = min ( k_ , 1.0 ) ; aQ += kO * kY * kZ * k_ ; }".split(" ")}]}}]}]};
a["include/color_util.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"COLOR_UTIL_GLSLF",l:{a:"grp",f:[{a:"define",c:"COLOR_UTIL_GLSLF",b:[""]},{a:"define",c:"PREMULTIPLY_ALPHA",b:["1"]},{a:"var",c:"SRGB",b:["SRGB_NONE"]},{a:"include",F:"std.glsl"},{a:"txt",b:"void bC ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{a:"txt",b:"} void bC ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( aQ . r ) ; bC ( aQ . g ) ; bC ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},
{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{a:"cond",f:[{a:"if",j:["PREMULTIPLY_ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aQ = aQ * L ;".split(" ")}]}}]},{a:"txt",b:"} float ge ( vec4 aQ ) { vec3 lb = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lc = dot ( aQ . rgb , lb ) ; return lc ; }".split(" ")}]}}]}]};a["include/coverage.glslf"]={a:"grp",
f:[{a:"cond",f:[{a:"ifndef",c:"COVERAGE_GLSLF",l:{a:"grp",f:[{a:"define",c:"COVERAGE_GLSLF",b:[""]},{a:"include",F:"procedural.glslf"},{a:"txt",b:"const float ld = 1000.0 ; bool C ( float L , float le ) { if ( le < 0.0 ) L = 1.0 - L ; float lf = floor ( L * ld ) ; float lh = floor ( lg ( gl_FragCoord . xy ) * ld ) ; if ( le > 0.0 ) return lh < lf ; else return lh >= lf ; }".split(" ")}]}}]}]};a["include/depth_fetch.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DEPTH_FETCH_GLSLF",l:{a:"grp",f:[{a:"define",
c:"DEPTH_FETCH_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float ep ( in float li , in vec2 lj ) { float dD = lj . x ; float lk = lj . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return lk * ( 1.0 - dD / li ) / ( lk - dD ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return ( li - dD ) / ( lk - dD ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float gy ( in sampler2D ll , in vec2 fW , in vec2 lj ) { float eq = GLSL_TEXTURE ( ll , fW ) . r ; float dD = lj . x ; float lk = lj . y ; float li = 2.0 * dD / ( dD + lk - ( 2.0 * eq - 1.0 ) * ( lk - dD ) ) ; return li ; }".split(" ")}]}}]}]}}]}]};a["include/dynamic_grass.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DYNAMIC_GRASS_GLSLV",l:{a:"grp",f:[{a:"define",
c:"DYNAMIC_GRASS_GLSLV",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"GRASS_TEXTURE_SIZE",b:["1024.0"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"vec2 lp ( vec3 O , float lm , vec2 ln ) { vec2 lo = vec2 ( ( O . x - ln . x ) / lm , ( O . y - ln . y ) / lm ) ; return fract ( lo ) ; } vec2 lq ( vec2 gT , float lm , vec2 ln ) { return vec2 ( gT . x * lm , gT . y * lm ) + ln ; } au lr ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"vec4 lB ( sampler2D ls , vec2 lt ) { float lu = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lv = GLSL_TEXTURE ( ls , lt ) ; vec4 lw = GLSL_TEXTURE ( ls , lt + vec2 ( lu , 0.0 ) ) ; vec4 lx = GLSL_TEXTURE ( ls , lt + vec2 ( 0.0 , lu ) ) ; vec4 ly = GLSL_TEXTURE ( ls , lt + vec2 ( lu , lu ) ) ; float a = fract ( lt . x * GRASS_TEXTURE_SIZE ) ; vec4 lz = mix ( lv , lw , a ) ; vec4 lA = mix ( lx , ly , a ) ; float b = fract ( lt . y * GRASS_TEXTURE_SIZE ) ; return mix ( lz , lA , b ) ; }".split(" ")}]}}]},
{a:"txt",b:"au aZ ( vec3 O , vec3 V , vec3 lC , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lD , sampler2D lE , vec3 lF , float lG , vec3 lH , vec4 lI , mat3 N , mat3 Z ) { vec3 lJ = T ( lI , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lK = - lJ . x ; float lL = lJ . y ; vec2 ln = vec2 ( lH . x - lG * ( 1.0 + lK ) / 2.0 , lH . y - lG * ( 1.0 - lL ) / 2.0 ) ; vec2 lM = lp ( ao , lG , ln ) ; float lN = lG / 2.0 ; vec2 lO = abs ( lq ( lM - vec2 ( 0.5 ) , lG , vec2 ( 0.0 ) ) ) ; float lP = lN * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lO ) > lP ) return lr ( ) ; float lQ = lG / lF . z ; vec2 lR = ( lM - vec2 ( 0.5 ) ) * lQ + vec2 ( 0.5 ) ; vec3 lS = lJ * ( lG / lF . z - 1.0 ) / 2.0 ; lR . x += lS . x ; lR . y += lS . y ; vec4 lT = GLSL_TEXTURE ( lE , lR ) ; float hG = lT . r ; if ( hG < u_scale_threshold ) return lr ( ) ; float lU = lF . y - lF . x ;".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( lB ( lD , lR ) ) . r * lU ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( GLSL_TEXTURE ( lD , lR ) ) . r * lU ;".split(" ")}]}}]},{a:"txt",b:"vec2 lV = O . xy - ao . xy ; ao . xy = lq ( lM , lG , ln ) ; ao . z = ci ; O . xy = ao . xy + lV ; O . z *= hG ; O . z += ci ; vec3 aQ = lT . gba ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"O -= ao ; mat3 lW = as ( lH , ao , N , Z ) ; au aw = av ( O , ao , V , lC , W , U , lW ) ; aw . ao = ao ; aw . aQ = aQ ; return lX ( aw ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return lX ( au ( O , ao , V , lC , W , U , aQ ) ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/environment.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"ENVIRONMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"ENVIRONMENT_GLSLF",b:[""]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"txt",b:"vec3 cz ( vec3 U ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["SKY_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{a:"elif",j:["SKY_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float lY = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , lY ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fog.glslf"]={a:"grp",f:[{a:"cond",
f:[{a:"ifndef",c:"FOG_GLSLF",l:{a:"grp",f:[{a:"define",c:"FOG_GLSLF",b:[""]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"FOG_TYPE",b:["QUADRATIC"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:"void mc ( inout vec3 aQ , in float lZ , in float ci , in vec4 l_ ) { float ma = clamp ( ( lZ - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FOG_TYPE","QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["ma","*=","ma",";"]}]}},{a:"elif",j:["FOG_TYPE","LINEAR",{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["FOG_TYPE","INVERSE_QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ma = sqrt ( ma ) ;".split(" ")}]}}]},{a:"txt",b:"if ( u_fog_params . w > 0.0 ) { if ( ci > u_fog_params . w ) ma = 0.0 ; else { float mb = ( u_fog_params . w - max ( ci , 0.0 ) ) / u_fog_params . w ; ma *= mb * mb ; } } l_ . a = 1.0 - ( 1.0 - ma ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , l_ . rgb , l_ . a ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 mh ( in mat4 md , in vec3 D ) { vec3 me = mix ( md [ 0 ] . rgb , md [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mf = mix ( md [ 2 ] . rgb , md [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mg = vec3 ( md [ 0 ] . a , md [ 1 ] . a , md [ 2 ] . a ) ; vec3 aQ = mix ( me , mf , abs ( D . y ) ) ; aQ = mix ( aQ , mg , abs ( D . z ) ) ; bC ( aQ ) ; return aQ ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"void mj ( inout float mi ) { mi -= 0.5 ; mi = 4.0 * ( mi * mi * mi ) + 0.5 ; } void mp ( inout vec3 aQ , in float lZ , in vec3 D , in float eC , in vec4 mk , in float fl ) { float ml = max ( D . z , 0.0 ) ; float mm = max ( lZ - max ( eC / ml , 0.0 ) , 0.0 ) ; float mn = mk . w * mm ; vec3 eD = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 mo = mk . rgb ; mn = min ( mn , 1.0 ) ; mj ( mn ) ; mn *= clamp ( 2.0 - fl , 0.0 , 1.0 ) ; vec3 eE = mix ( mo , eD , min ( ml , 1.0 ) ) ; eC = clamp ( - eC * 0.03 , 0.0 , 0.8 ) ; eE *= 1.0 - eC ; aQ = mix ( aQ , eE , mn ) ; }".split(" ")}]}}]},
{a:"txt",b:"void bR ( inout vec3 aQ , float lZ , vec3 D , float bO ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 md = mh ( u_cube_fog , D ) ; vec4 eE = vec4 ( md , u_fog_color_density . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","eE","=","u_fog_color_density",";"]}]}}]},{a:"txt",b:"mc ( aQ , lZ , h . z , eE ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"mp ( aQ , lZ , D , u_cam_water_depth , u_underwater_fog_color_density , bO ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fxaa.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSLF",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSLF",b:[""]},{a:"var",c:"FXAA_BLEND4WEB",b:["1"]},{a:"var",c:"FXAA_QUALITY_P12",b:["0.0"]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PS3",l:{a:"grp",f:[{a:"define",c:"FXAA_PS3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_360",l:{a:"grp",f:[{a:"define",c:"FXAA_360",b:["0"]}]}}]},
{a:"cond",f:[{a:"ifndef",c:"FXAA_360_OPT",l:{a:"grp",f:[{a:"define",c:"FXAA_360_OPT",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC",l:{a:"grp",f:[{a:"define",c:"FXAA_PC",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC_CONSOLE",l:{a:"grp",f:[{a:"define",c:"FXAA_PC_CONSOLE",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_120",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_120",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_130",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_130",b:["0"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_HLSL_3",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_4",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_4",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_5",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_5",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GREEN_AS_LUMA",l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_EARLY_EXIT",l:{a:"grp",f:[{a:"define",c:"FXAA_EARLY_EXIT",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_DISCARD",l:{a:"grp",f:[{a:"define",c:"FXAA_DISCARD",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"cond",f:[{a:"ifdef",c:"GL_EXT_gpu_shader4",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["FXAA_HLSL_5",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",
b:["1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["4.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",
b:["2.0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.125"]}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.25"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_QUALITY_PRESET",l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",10,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",
c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",11,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
12,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",13,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",
b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",14,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",15,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",
b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",20,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",21,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",
c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",22,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
23,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",24,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",25,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",26,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["9"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",27,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["10"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",28,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["11"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",29,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"cond",
f:[{a:"if",j:["FXAA_QUALITY_PRESET",39,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},
{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"include",F:"color_util.glslf"},{a:"txt",b:"float mq ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_BLEND4WEB",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 mr ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mt ( sampler2D t , vec2 p , vec2 ms , vec2 r ) { return GLSL_TEXTURE ( t , p + ( ms * r ) ) ; }".split(" ")}]}}]},
{a:"txt",b:"vec4 gv ( vec2 fn , sampler2D ia , vec2 mu , float mv , float mw , float mx ) { vec2 my ; my . x = fn . x ; my . y = fn . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 mz = mr ( ia , my ) ; float gf = ge ( mz ) ; float mA = ge ( mt ( ia , my , vec2 ( 0 , 1 ) , mu . xy ) ) ; float mB = ge ( mt ( ia , my , vec2 ( 1 , 0 ) , mu . xy ) ) ; float mC = ge ( mt ( ia , my , vec2 ( 0 , - 1 ) , mu . xy ) ) ; float mD = ge ( mt ( ia , my , vec2 ( - 1 , 0 ) , mu . xy ) ) ;".split(" ")}]}}]},
{a:"txt",b:"float mE = max ( mA , gf ) ; float mF = min ( mA , gf ) ; float mG = max ( mB , mE ) ; float mH = min ( mB , mF ) ; float mI = max ( mC , mD ) ; float mJ = min ( mC , mD ) ; float mK = max ( mI , mG ) ; float mL = min ( mJ , mH ) ; float mM = mK * mw ; float mN = mK - mL ; float mO = max ( mx , mM ) ; bool mP = mN < mO ; if ( mP ) return mz ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gh = ge ( mt ( ia , my , vec2 ( - 1 , - 1 ) , mu . xy ) ) ; float gk = ge ( mt ( ia , my , vec2 ( 1 , 1 ) , mu . xy ) ) ; float gi = ge ( mt ( ia , my , vec2 ( 1 , - 1 ) , mu . xy ) ) ; float gj = ge ( mt ( ia , my , vec2 ( - 1 , 1 ) , mu . xy ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[]}}]},{a:"txt",b:"float mQ = mC + mA ; float mR = mD + mB ; float mS = 1.0 / mN ; float mT = mQ + mR ; float mU = ( - 2.0 * gf ) + mQ ; float mV = ( - 2.0 * gf ) + mR ; float mW = gi + gk ; float mX = gh + gi ; float mY = ( - 2.0 * mB ) + mW ; float mZ = ( - 2.0 * mC ) + mX ; float m_ = gh + gj ; float na = gj + gk ; float nb = ( abs ( mU ) * 2.0 ) + abs ( mY ) ; float nc = ( abs ( mV ) * 2.0 ) + abs ( mZ ) ; float nd = ( - 2.0 * mD ) + m_ ; float ne = ( - 2.0 * mA ) + na ; float nf = abs ( nd ) + nb ; float ng = abs ( ne ) + nc ; float nh = m_ + mW ; float ni = mu . x ; bool nj = nf >= ng ; float nk = mT * 2.0 + nh ; if ( ! nj ) mC = mD ; if ( ! nj ) mA = mB ; if ( nj ) ni = mu . y ; float nl = ( nk * ( 1.0 / 12.0 ) ) - gf ; float nm = mC - gf ; float nn = mA - gf ; float no = mC + gf ; float np = mA + gf ; bool nq = abs ( nm ) >= abs ( nn ) ; float nr = max ( abs ( nm ) , abs ( nn ) ) ; if ( nq ) ni = - ni ; float ns = mq ( abs ( nl ) * mS ) ; vec2 nt ; nt . x = my . x ; nt . y = my . y ; vec2 nu ; nu . x = ( ! nj ) ? 0.0 : mu . x ; nu . y = ( nj ) ? 0.0 : mu . y ; if ( ! nj ) nt . x += ni * 0.5 ; if ( nj ) nt . y += ni * 0.5 ; vec2 nv ; nv . x = nt . x - nu . x * FXAA_QUALITY_P0 ; nv . y = nt . y - nu . y * FXAA_QUALITY_P0 ; vec2 nw ; nw . x = nt . x + nu . x * FXAA_QUALITY_P0 ; nw . y = nt . y + nu . y * FXAA_QUALITY_P0 ; float nx = ( ( - 2.0 ) * ns ) + 3.0 ; float ny = ge ( mr ( ia , nv ) ) ; float nz = ns * ns ; float nA = ge ( mr ( ia , nw ) ) ; if ( ! nq ) no = np ; float nB = nr * 1.0 / 4.0 ; float nC = gf - no * 0.5 ; float nD = nx * nz ; bool nE = nC < 0.0 ; ny -= no * 0.5 ; nA -= no * 0.5 ; bool nF = abs ( ny ) >= nB ; bool nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P1 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P1 ; bool nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P1 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P1 ; if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P2 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P2 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P2 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P2 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P3 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P3 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P3 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P3 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",4,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P4 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P4 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P4 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P4 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",5,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P5 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P5 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P5 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P5 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",6,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P6 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P6 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P6 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P6 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",7,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P7 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P7 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P7 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P7 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",8,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P8 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P8 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P8 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P8 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",9,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P9 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P9 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P9 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P9 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",10,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P10 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P10 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P10 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P10 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",11,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P11 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P11 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P11 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P11 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",12,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P12 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P12 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P12 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:"} float nI = my . x - nv . x ; float nJ = nw . x - my . x ; if ( ! nj ) nI = my . y - nv . y ; if ( ! nj ) nJ = nw . y - my . y ; bool nK = ( ny < 0.0 ) != nE ; float nL = ( nJ + nI ) ; bool nM = ( nA < 0.0 ) != nE ; float nN = 1.0 / nL ; bool nO = nI < nJ ; float nP = min ( nI , nJ ) ; bool nQ = nO ? nK : nM ; float nR = nD * nD ; float nS = ( nP * ( - nN ) ) + 0.5 ; float nT = nR * mv ; float nU = nQ ? nS : 0.0 ; float nV = max ( nU , nT ) ; if ( ! nj ) my . x += nV * ni ; if ( nj ) my . y += nV * ni ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_DISCARD",1,{a:"equal_expr",o:2},"FXAA_BLEND4WEB",1,{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return mr ( ia , my ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( mr ( ia , my ) . xyz , gf ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/halo_color.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"HALO_COLOR_GLSLF",l:{a:"grp",f:[{a:"define",c:"HALO_COLOR_GLSLF",b:[""]},{a:"var",c:"NUM_RINGS",b:["0"]},{a:"var",
c:"NUM_LINES",b:["0"]},{a:"var",c:"NUM_STARS",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_RINGS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_LINES ;".split(" ")}]}}]},{a:"txt",b:"float nX ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"void od ( inout float nY , in float nZ [ nW ] , in float n_ ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oa = 40.0 * nZ [ a ] ; float ob = 300.0 * ( nX ( oa ) - 0.005 ) ; float oc = oa ; float ma = abs ( oc * ( u_halo_size * ob - n_ ) ) ; nY += 1.0 - min ( ma , 1.0 ) ; } }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"void oi ( inout float oe , in float nZ [ nW ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float of = nZ [ a ] ; float og = of ; float oh = 1000.0 * ( nX ( of ) - 0.005 ) ; float ma = 20.0 * abs ( og * A . x + oh * A . y ) ; oe += 1.0 - min ( ma , 1.0 ) ; } oe *= aM ; }".split(" ")}]}}]},
{a:"txt",b:"void om ( inout float aM , in vec2 b_ ) { float oj , bK ; bK = atan ( b_ . y , b_ . x ) ; bK *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ok = cos ( bK ) ; float ol = sin ( bK ) ; bK = ( ok * b_ . x + ol * b_ . y ) * ( ok * b_ . y - ol * b_ . x ) ; oj = abs ( bK ) ; if ( oj < 1.0 ) { oj = ( 0.01 * u_halo_size ) / ( oj ) ; aM *= sqrt ( min ( oj , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float n_ = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float nZ [ nW ] ; for ( int cl = 0 ; cl < nW ; cl ++ ) { nZ [ cl ] = fract ( bf / float ( cl + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"float nY = 0.0 ; od ( nY , nZ , n_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"float oe = 0.0 ; oi ( oe , nZ , aM ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_STARS"],
l:{a:"grp",f:[{a:"txt",b:"om ( aM , A ) ;".split(" ")}]}}]},{a:"txt",b:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"nY *= aM ; aQ += u_halo_rings_color * nY ; aM += nY ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"oe *= L ; aQ += u_halo_lines_color * oe ; aM += oe ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float kZ = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( kZ , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 on = vec4 ( aQ , aM ) ; return on ; }".split(" ")}]}}]}]};a["include/lighting_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"LIGHTING_NODES_GLSLF",l:{a:"grp",
f:[{a:"define",c:"LIGHTING_NODES_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"node",c:"LIGHTING_BEGIN",C:[],B:[{a:"node_out",c:"oB",i:["vec3"],g:!1},{a:"node_out",c:"oC",i:["vec3"],g:!1},{a:"node_out",c:"oD",i:["vec3"],g:!1},{a:"node_out",c:"oE",i:["vec3"],g:!0},{a:"node_out",c:"oF",i:["vec3"],g:!0},{a:"node_out",c:"oG",i:["vec2"],g:!0},{a:"node_out",c:"oH",i:["vec2"],g:!0},{a:"node_out",c:"oI",i:["vec4"],g:!0},{a:"node_out",c:"oJ",i:["float"],g:!0},{a:"node_out",c:"oK",i:["vec4"],g:!0}],u:[{a:"txt",
b:"oB = oo ; oC = op ; oD = oq ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oE"],u:[{a:"txt",b:["oE","=","or",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oF"],u:[{a:"txt",b:["oF","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oH"],u:[{a:"txt",b:["oH","=","ov",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oG"],u:[{a:"txt",b:["oG","=","ow",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oI"],u:[{a:"txt",b:["oI","=","ox",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_oJ"],u:[{a:"txt",b:["oJ","=","oy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oK"],u:[{a:"txt",b:["oK","=","oz",";"]}]}]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",
c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE",
"POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; float oW = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oW *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oW *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{a:"txt",b:["oT","*=","oW",";"]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},
{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; pa = cross ( pe , B . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; pi = cross ( pe , B . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; pn = cross ( pe , B . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",
b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; pF = cross ( pe , B . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; pL = cross ( pe , B . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g != _0_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g != _0_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g != _0_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g != _0_0 ) { if ( qB < 1.0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( 1.0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = 0.0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"txt",b:"qR = qG + qO * qN * qI ; qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]},{a:"node",c:"LIGHTING_END",C:[],B:[{a:"node_in",c:"qS",i:["vec4"],g:!1},{a:"node_in",c:"qT",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = qS . rgb ; oA = qT ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void cK ( vec3 oo , vec3 op , vec3 oq , vec3 or , vec3 os , vec3 ot , vec3 ou , vec2 ov , vec2 ow , vec4 ox , float oy , vec4 oz , out vec3 E , out vec3 oA ) {".split(" ")},{a:"nodes_main"},{a:"txt",
b:["}"]}]}}]}]};a["include/math.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MATH_GLSLV",l:{a:"grp",f:[{a:"define",c:"MATH_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qU ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kQ ) { return kQ + 2.0 * cross ( q . xyz , cross ( q . xyz , kQ ) + q . w * kQ ) ; } vec4 kR ( in vec4 qV ) { return vec4 ( - qV . xyz , qV . w ) ; } vec4 qX ( in vec4 a , in vec4 b ) { vec4 qW ; qW . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qW . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qW . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qW . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qW ; } vec4 X ( in vec3 qY , in float qZ ) { vec4 qW ; qZ = qZ * 0.5 ; float s = sin ( qZ ) ; qW . x = s * qY [ 0 ] ; qW . y = s * qY [ 1 ] ; qW . z = s * qY [ 2 ] ; qW . w = cos ( qZ ) ; return qW ; } vec4 rd ( in vec3 bD , in vec3 q_ ) { vec4 qW ; float dz = dot ( q_ , bD ) ; vec3 rc = cross ( q_ , bD ) ; qW . xyz = rc . xyz ; qW . w = 1.0 + dz ; return normalize ( qW ) ; } vec3 rh ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf * re . w ; qW = T ( qV , qW ) ; qW += re . xyz ; return qW ; } vec3 ap ( mat3 ri , vec3 rf ) { vec3 qW = rf * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; qW += ri [ 0 ] ; return qW ; } vec3 rj ( vec4 re , vec4 qV , vec3 bD ) { vec3 qW = bD * re . w ; qW = T ( qV , qW ) ; return qW ; } vec3 _ ( mat3 ri , vec3 bD ) { vec3 qW = bD * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; return qW ; } vec3 rk ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf - re . xyz ; qW = T ( kR ( qV ) , qW ) ; qW /= re . w ; return qW ; } vec3 rl ( vec4 re , vec4 qV , vec3 bD ) { return T ( kR ( qV ) , bD ) / re . w ; } mat4 rm ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rn ( float bK ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 ro ( float bK ) { return mat4 ( cos ( bK ) , _0_0 , - sin ( bK ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bK ) , _0_0 , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rp ( float bK ) { return mat4 ( cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lX ( in au kQ ) { return au ( kQ . O , kQ . ao , normalize ( kQ . V ) , normalize ( kQ . aB ) , normalize ( kQ . W ) , normalize ( kQ . U ) , kQ . aQ ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 aC ( vec4 f ) { float fT = f . x ; float fU = f . y ; float fV = f . w ; vec3 rq ; rq . x = ( fT + fV ) / 2.0 ; rq . y = ( fU + fV ) / 2.0 ; rq . z = fV ; return rq ; }".split(" ")}]}}]},{a:"txt",b:"mat3 da ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 rs ; rs [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 3 ] = _0_0 ; rs [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 3 ] = _0_0 ; rs [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 3 ] = _0_0 ; rs [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rs [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rs [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rs [ 3 ] [ 3 ] = 1.0 ; return rs ; } mat3 aY ( in mat3 ri , in mat3 rt ) { mat3 qW ; vec3 rf = rt [ 0 ] ; vec4 re = vec4 ( ri [ 0 ] , ri [ 1 ] [ 0 ] ) ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW [ 0 ] = rh ( re , qV , rf ) ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] * rt [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = ri [ 1 ] [ 1 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 1 ] + ri [ 1 ] [ 2 ] * rt [ 2 ] [ 0 ] - ri [ 2 ] [ 0 ] * rt [ 1 ] [ 2 ] ; qW [ 1 ] [ 2 ] = ri [ 1 ] [ 2 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 2 ] + ri [ 2 ] [ 0 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 2 ] [ 0 ] ; qW [ 2 ] [ 0 ] = ri [ 2 ] [ 0 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 2 ] [ 0 ] + ri [ 1 ] [ 1 ] * rt [ 1 ] [ 2 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 1 ] ; qW [ 2 ] [ 1 ] = ri [ 2 ] [ 1 ] * rt [ 2 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 2 ] - ri [ 2 ] [ 0 ] * rt [ 2 ] [ 0 ] ; return qW ; } mat3 dd ( in vec4 qV , in mat3 ri ) { mat3 qW ; qW [ 0 ] = ri [ 0 ] ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = qV [ 0 ] ; qW [ 1 ] [ 2 ] = qV [ 1 ] ; qW [ 2 ] [ 0 ] = qV [ 2 ] ; qW [ 2 ] [ 1 ] = qV [ 3 ] ; return qW ; } vec4 R ( in vec4 ru ) { return normalize ( ru ) ; } vec4 R ( in vec4 ru , out float P , out float Q ) { vec4 qV = R ( ru ) ; P = length ( ru ) * M_PI ; Q = sign ( ru [ 3 ] ) ; return R ( ru ) ; }".split(" ")}]}}]}]};
a["include/mirror.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MIRROR_GLSLF",l:{a:"grp",f:[{a:"define",c:"MIRROR_GLSLF",b:[""]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:[""]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.1"]},{a:"txt",b:"float rv ( in vec3 D , vec3 eJ , float d_ , float fg ) { vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float r = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; return r ; } void cL ( inout vec3 rw , vec3 D , vec3 U , float rx , mat3 N ) { vec3 eJ = reflect ( - D , U ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( d_ != 0.0 ) r = rv ( D , eJ , d_ , fg ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_cube_reflection , eJ ) . xyz ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = vec3 ( 1.0 ) ; rx = 0.0 ;".split(" ")}]}}]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"bC ( eO . rgb ) ; rw = mix ( rw , eO , rx * r ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rU ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2},"USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 d_ = U ; vec3 ek = D ; vec3 ej = reflect ( - D , U ) ; float ec = sqrt ( rG ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rH = rD ( max ( dot ( d_ , ek ) , 0.0 ) , rC , ec ) ; vec3 rI = rH ; vec3 rJ = 1.0 - rI ; rJ *= 1.0 - rF ; vec3 bt = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 rK = bt * rw ; const float rL = 5.0 ; vec3 ei = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , ej , ec * rL ) . rgb ; vec2 rM = GLSL_TEXTURE ( u_brdf , vec2 ( max ( dot ( d_ , ek ) , 0.0 ) , ec ) ) . rg ; vec3 cJ = ei * ( rH * rM . x + rM . y ) ; vec3 rN = ( rJ * rK + cJ ) ; return rN ;".split(" ")}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float rO = max ( dot ( U , D ) , _0_0 ) ; float rP = rF + ( max ( _1_0 - rG , rF ) - rF ) * pow ( _1_0 - rO , 5.0 ) ; vec3 eJ = reflect ( - D , U ) ; float rQ = 2.0 / ( rG * rG ) - 2.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"txt",b:["float","rR","=","u_bsdf_cube_sky_dim",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float rR = float ( textureSize ( u_cube_reflection , 0 ) . x ) ;".split(" ")}]}}]},
{a:"txt",b:"float rS = log2 ( rR * sqrt ( 3.0 ) ) - _0_5 * log2 ( rQ + _1_0 ) ; vec3 eO = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , eJ , rS ) . xyz ; bC ( eO ) ; eO *= rE ; vec3 rT = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , U , 100.0 ) . xyz ; bC ( rT ) ; rT *= rw ; return rT + rP * eO ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ; bC ( eO ) ; eO *= rE ; return mix ( rw , eO , rF ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = rE ; return mix ( rw , eO , rF ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"HAS_REFRACT_TEXTURE",b:["0"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"IS_WORLD",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"mirror.glslf"},{a:"include",F:"shadow.glslf"},{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","rV",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"vec3 rY ( in vec3 rW , in float rX ) { vec3 eX = vec3 ( _0_0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"eX = cN ( l , rW . xy * rX ) ;".split(" ")}]}},
{a:"elif",j:["HAS_REFRACT_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"eX = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"txt",b:["return","eX",";","}"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float sd ( vec3 sa , vec3 sb , float sc ) { float du = abs ( dot ( sa , sb ) ) ; float g = sc * sc - _1_0 + du * du ; float dY ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cB = ( g - du ) / ( g + du ) ; float hO = ( du * ( g + du ) - _1_0 ) / ( du * ( g - du ) + _1_0 ) ; dY = _0_5 * cB * cB * ( _1_0 + hO * hO ) ; } else { dY = _1_0 ; } return dY ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1},{a:"node_param",c:"se",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sT = rZ ( se ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * rV - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",
C:[],B:[{a:"node_out",c:"sV",i:["vec3"],g:!1},{a:"node_param",c:"sf",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sV = max ( vec3 ( _0_0 ) , sf ) ; bC ( sV ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1},{a:"node_param",c:"sg",i:["GLSL_IN","float"],g:!1}],u:[{a:"txt",b:"sW = max ( _0_0 , sg ) ; bC ( sW ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1},{a:"node_param",c:"sh",
i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sX = max ( _0_0 , sh [ 0 ] ) ; sY = max ( _0_0 , sh [ 1 ] ) ; bC ( sX ) ; bC ( sY ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1},{a:"node_param",c:"si",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sZ = max ( _0_0 , si [ 0 ] ) ; s_ = max ( _0_0 , si [ 1 ] ) ; ta = max ( _0_0 , si [ 2 ] ) ; bC ( sZ ) ; bC ( s_ ) ; bC ( ta ) ;".split(" ")}]},
{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_BF",C:[],B:[{a:"node_out",c:"te",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",
b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg = sD . xyz ;".split(" ")}]},{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:["th","=","os",";"]}]},{a:"node",c:"GEOMETRY_IN",C:[],B:[{a:"node_out",c:"ti",i:["vec3"],g:!1}],u:[{a:"txt",b:["ti","=","ou",";"]}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},
{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],
g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["LAMP_INDEX",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = h - tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( - tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:"tF = vec3 ( _0_0 ) ; tG = 0.0 ;".split(" ")}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},
{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],
g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",
c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",
c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"float ux = clamp ( up [ 1 ] , _0_0 , _1_0 ) ; float rF = up [ 2 ] ; uw = um . rgb ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rU ( uq , ur , ou , uo , rF , ux , mat3 ( _0_0 ) ) ;".split(" ")}]},
{a:"node_elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rU ( uq , ur , ou , uo , rF , u_view_tsr_frag ) ;".split(" ")}]}]},{a:"txt",b:"uw += un ; uw = mix ( uw , us , ut ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",
b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) / M_PI ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ; vk = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd = vec3 ( _0_0 ) ; ve = _0_0 ; vh = vec3 ( _0_0 ) ; vj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},
{a:"node",c:"BSDF_GLOSSY",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",
c:"vB",i:["float"],g:!1},{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ; vD = _1_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu = vec3 ( _0_0 ) ; vv = _0_0 ; vA = vec3 ( _0_0 ) ; vC = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},
{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],
g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL = vec3 ( _0_0 ) ; vM = _0_0 ; vN = vec3 ( _0_0 ) ; vO = _0_0 ; vR = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",
c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",
c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],
g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],
g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wI = _1_0 ; wE = ot ; wu ; wv = vec3 ( _0_0 ) ; wA = _0_0 ; wB = vec3 ( _0_0 ) ; wC = _0_0 ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",
C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},
{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[{a:"node_var",c:"INVERT",b:["0"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",
c:"wW",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = wU ; float gH = wT ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["INVERT"],u:[{a:"txt",b:["aM","=","-","_1_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","U","=","wW",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","U","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( wV ) * w_ + dFdy ( wV ) * xa ; gH = max ( gH , _0_0 ) ; wX = normalize ( xb * U - aM * sign ( dv ) * xc ) ; wX = normalize ( gH * wX + ( _1_0 - gH ) * U ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wX","=","U",";"]}]}]}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = 0.1 ; vec3 U = ot ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( xd ) * w_ + dFdy ( xd ) * xa ; xe = normalize ( xb * U - aM * sign ( dv ) * xc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["xe","=","U",";"]}]}]}]},{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",
b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",
{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},
{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",
c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},
{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},
{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},
{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},
{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],
g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",
C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",
c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],
g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_param",c:"sk",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( sk ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( sk , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1},{a:"node_param",c:"sl",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",
b:"zG = vec3 ( sl , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["zI","=","rV",";"]}]},{a:"node_else",u:[{a:"txt",b:["zI","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",
j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:"zJ = ap ( u_model_tsr_inverse , os ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["zJ","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK . xy = sD . xy ; zK . z = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL . xy = l . xy / l . z ; zL . z = _0_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",
c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM = reflect ( - ou , ot ) ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1},{a:"node_param",c:"sm",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( sm , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",
c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1}],u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[{a:"node_var",c:"USE_LOCATION_OUT",
b:["0"]},{a:"node_var",c:"USE_OBJ_IND_OUT",b:["0"]},{a:"node_var",c:"USE_MAT_IND_OUT",b:["0"]},{a:"node_var",c:"USE_RANDOM_OUT",b:["0"]}],B:[{a:"node_out",c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_LOCATION_OUT"],u:[{a:"txt",b:"zZ = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OBJ_IND_OUT"],u:[{a:"txt",b:"z_ = u_obj_info . r ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MAT_IND_OUT"],u:[{a:"txt",b:"Aa = u_obj_info . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_RANDOM_OUT"],u:[{a:"txt",b:"Ab = u_obj_info . b ;".split(" ")}]}]}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LAYER_WEIGHT",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"Af",i:["float"],g:!1},{a:"node_in",c:"Ag",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:"vec3 cr = normalize ( Ag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ah"],u:[{a:"txt",b:"float sc = max ( _1_0 - Af , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"Ah = sd ( Aj , cr , sc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["Ah","=","_0_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ai"],u:[{a:"txt",b:"Ai = abs ( dot ( Aj , cr ) ) ; float ew = Af ; if ( ew != _0_5 ) { ew = clamp ( ew , _0_0 , 0.99999 ) ; ew = ( ew < _0_5 ) ? 2.0 * ew : _0_5 / ( _1_0 - ew ) ; Ai = pow ( Ai , ew ) ; } Ai = _1_0 - Ai ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["Ai","=","_0_0",";"]}]}]}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},
{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1},{a:"node_out",c:"Au",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Au = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",
c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",
b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dm",i:["float"],g:!1},{a:"node_in",c:"Dn",i:["vec3"],g:!1},{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dm , _0_0 , _1_0 ) ; Dp = mix ( Dn , Do , zD ) ;".split(" ")}]},{a:"node",c:"ADD_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dq",i:["float"],g:!1},{a:"node_in",c:"Dr",i:["vec3"],g:!1},{a:"node_in",
c:"Ds",i:["vec3"],g:!1},{a:"node_out",c:"Dt",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dq , _0_0 , _1_0 ) ; Dt = mix ( Dr , Dr + Ds , zD ) ;".split(" ")}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"OUTPUT_WORLD_SURFACE",C:[],B:[{a:"node_in",c:"Dx",
i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dx ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},
{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!1},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = cC ( DF ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},
{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],
u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"cL ( DR , ou , DN , DO , u_view_tsr_frag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"cL ( DR , ou , DN , DO , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",
c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],
u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oT *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],
g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pa",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( sb , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pi",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",
b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( sb , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pn",";"]},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( sb , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pF",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},
{a:"txt",b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( sb , pD ) + pG ; float pv = max ( dot ( sb , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],
g:!1},{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pL",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( sb , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qB < _1_0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( _1_0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT_CUBE",C:[],B:[{a:"node_in",c:"EC",i:["vec3"],g:!1},
{a:"node_out",c:"ED",i:["vec3"],g:!0},{a:"node_out",c:"EE",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec3 EF = vec3 ( EC . x , EC . y , EC . z ) ; vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , EF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = AH . xyz ; bC ( ED ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = AH . w ;".split(" ")}]}]}]},
{a:"node",c:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EG ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3",
"EI","=","ot",";"]}]}]},{a:"txt",b:"float dC = - atan ( EI . y , EI . x ) / ( 2.0 * M_PI ) + _0_5 ; float kQ = atan ( EI . z , sqrt ( EI . x * EI . x + EI . y * EI . y ) ) / M_PI + _0_5 ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dC , kQ ) ) ; EH = AH . xyz ; bC ( EH ) ;".split(" ")}]},{a:"node",c:"TEXTURE_ENVIRONMENT_MIRROR_BALL",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EJ",i:["vec3"],g:!1},{a:"node_out",c:"EK",i:["vec3"],g:!1},
{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EJ ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","EI","=","ot",";"]}]}]},{a:"txt",b:"EI . y -= _1_0 ; float EL = 2.0 * sqrt ( max ( - _0_5 * EI . y , _0_0 ) ) ; if ( EL > _0_0 ) EI /= EL ; float dC = _0_5 * ( EI . x + _1_0 ) ; float kQ = _0_5 * ( EI . z + _1_0 ) ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dC , kQ ) ) ; EK = AH . xyz ; bC ( EK ) ;".split(" ")}]},
{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",c:"NON_COLOR",b:["0"]},{a:"node_var",c:"CONVERT_UV",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],
g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EM . xy ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EN . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"node_cond",f:[{a:"node_if",
j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EO . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",
b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EP . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",
o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",
i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],
u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],
u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",
i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",
i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ; FC /= FD ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"FC = normalize ( FC ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",
i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"FRESNEL",C:[{a:"node_var",c:"USE_FRESNEL_NORMAL",b:["0"]}],B:[{a:"node_in",c:"FI",i:["float"],g:!1},{a:"node_in",c:"FJ",i:["vec3"],g:!1},{a:"node_out",c:"FK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_FRESNEL_NORMAL"],u:[{a:"txt",b:"vec3 cr = normalize ( FJ ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"txt",b:"float sc = max ( FI , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"FK = sd ( Aj , cr , sc ) ;".split(" ")}]},{a:"node",c:"BACKGROUND",C:[],B:[{a:"node_in",c:"FL",i:["vec3"],g:!1},{a:"node_in",c:"FM",i:["float"],g:!1},{a:"node_out",c:"FN",i:["vec3"],g:!1}],u:[{a:"txt",b:"FN = FL * FM ;".split(" ")}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},
{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"FS = reflect ( - ou . xyz , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],
u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gb = rY ( F_ , Ga ) ;".split(" ")}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",
c:"Ge",i:["float"],g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",
c:"B4W_SMOOTHSTEP",C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",
i:["float"],g:!1}],u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["IS_WORLD"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sv = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_GL"],l:{a:"grp",f:[{a:"txt",b:"vec3 os = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEX_COORD_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","ou",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","ou",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],
l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 sB = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , sB , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")}]}}]},
{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLV",b:[""]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2},"PARTICLE_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 rV ;".split(" ")}]}}]},{a:"node",c:"TEX_COORD_UV",
C:[],B:[{a:"node_param",c:"node_TEX_COORD_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sl",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sl","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_param",c:"node_UV_MERGED_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sk",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sk","=","node_UV_MERGED_var_a_uv",";"]}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_param",c:"node_UVMAP_var_a_uv",i:["GLSL_IN","vec2"],g:!1},
{a:"node_param",c:"sm",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sm","=","node_UVMAP_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_param",c:"node_GEOMETRY_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"se",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["se","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gu",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",
b:["Gu","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC1_var_a_vertex_color",i:["GLSL_IN","float"],g:!1},{a:"node_param",c:"Gv",i:["GLSL_OUT","float"],g:!1}],u:[{a:"txt",b:["Gv","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC2_var_a_vertex_color",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"Gw",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["Gw","=","node_GEOMETRY_VC2_var_a_vertex_color",
";"]}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC3_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gx",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",b:["Gx","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{a:"nodes_global"},{a:"txt",b:["void","J","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["rV","=","a_orco_tex_coord",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};
a["include/pack.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PACK_GLSLF",l:{a:"grp",f:[{a:"define",c:"PACK_GLSLF",b:[""]},{a:"txt",b:"vec4 er ( const in float il ) { vec4 fq = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 Gy = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( il * fq ) ; jB -= jB . xxyz * Gy ; return jB ; } float cQ ( const in vec4 Gz ) { float eq ; vec4 fq = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; eq = dot ( Gz , fq ) ; return eq ; } vec4 er ( const in vec2 rf ) { vec2 fq = vec2 ( _255_0 , _1_0 ) ; vec2 Gy = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( rf . xxyy * fq . xyxy ) ; jB -= jB . xxzz * Gy . xyxy ; if ( rf . r == _1_0 ) jB . rg = vec2 ( _0_0 , _1_0 ) ; if ( rf . g == _1_0 ) jB . ba = vec2 ( _0_0 , _1_0 ) ; return jB ; } vec2 jg ( const in vec4 GA ) { vec2 rf ; vec2 fq = vec2 ( _1_0 / _255_0 , _1_0 ) ; rf . r = dot ( GA . rg , fq ) ; rf . g = dot ( GA . ba , fq ) ; return rf ; }".split(" ")}]}}]}]};
a["include/particles.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"include",F:"math.glslv"},{a:"txt",b:"struct cY { float df ; vec3 O ; float L ; vec3 aQ ; float bK ; vec3 dl ; vec3 dm ; float dn ; } ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"void GE ( inout vec3 aQ , float GB , vec4 kb , vec4 bv ) { float GC = bv . x - kb . x ; float GD = ( GB - kb . x ) / GC ; aQ = mix ( aQ , bv . yzw , clamp ( GD , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 GH ( float t , float GF , vec4 GG [ COLOR_RAMP_LENGTH ] ) { float GB = t / GF ; vec3 aQ = GG [ 0 ] . yzw ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",1,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 0 ] , GG [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 1 ] , GG [ 2 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 2 ] , GG [ 3 ] ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}"]}]}}]},{a:"txt",b:"float GN ( float t , float GF , float GI , float GJ ) { float GK = max ( 0.01 , min ( GF , GI ) ) ; float GL = max ( 0.01 , min ( GF , GJ ) ) ; float GM = GF - GL ; float L = clamp ( t / GK , 0.0 , 1.0 ) - step ( GM , t ) * ( t - GM ) / GL ; return L ; } cY cZ ( ) { cY sp ; float t ; float GF = a_p_data [ 0 ] ; float GO = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - GO ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - GO ; } if ( t < 0.0 || t >= GF ) { sp . df = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= GF ) ) { vec4 S = R ( a_tbn ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WORLD_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 fn = a_position ; vec3 sb = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fn = ap ( u_model_tsr , a_position ) ; vec3 sb = _ ( u_model_tsr , bW ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 GP = u_p_nfactor * sb ; GP += a_p_vels . xyz ; GP . z -= u_p_gravity * t / 2.0 ; float GQ = max ( u_p_mass , EPSILON ) ; GP += ( u_p_wind_fac * u_wind / GQ ) * t / 2.0 ; sp . dn = t ; sp . dl = GP ; sp . dm = bW * a_p_vels . w ; sp . O = fn + GP * t ; sp . bK = a_p_vels . w * t ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:"sp . df = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . df = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"sp . aQ = GH ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"sp . L = GN ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};
a["include/particles_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"include",F:"environment.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1}],u:[{a:"txt",b:"sT = rZ ( A ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_out",c:"sV",
i:["vec3"],g:!1}],u:[{a:"txt",b:"sV = vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1}],u:[{a:"txt",b:["sW","=","_1_0",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1}],u:[{a:"txt",b:"sX = _1_0 ; sY = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1}],
u:[{a:"txt",b:"sZ = _1_0 ; s_ = _1_0 ; ta = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg [ 0 ] = sD [ 0 ] ; tg [ 1 ] = sD [ 1 ] ; tg [ 2 ] = sD [ 2 ] ;".split(" ")}]},
{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:"th = vec3 ( os . r , os . g , os . b ) ;".split(" ")}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},
{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = - h + tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",
j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",
c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",
C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",
c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; metalness_out = tU ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},
{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"uw = um . rgb + un ; uw = mix ( uw , us , ut ) ; I = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",
c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd ; ve ; vh ; vj ; vk ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},{a:"node",c:"BSDF_GLOSSY",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",c:"vB",i:["float"],g:!1},
{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu ; vv ; vA ; vC ; vD ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",
c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},
{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL ; vM ; vN ; vO ; vR ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},
{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},
{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},
{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],
g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wE = ot ; wu ; wv ; wA ; wB ; wC ; wH ; wI ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",
c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],
g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[],B:[{a:"node_in",c:"GV",i:["float"],g:!1},{a:"node_in",c:"GW",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",c:"GX",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"wX = GX ; GV ; GW ; wV ;".split(" ")}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"xe = ot ; xd ;".split(" ")}]},
{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],
u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},
{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",
j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_IMAGE",C:[],B:[{a:"node_in",c:"GY",i:["vec3"],g:!1},{a:"node_out",c:"GZ",i:["vec3"],g:!1},{a:"node_out",c:"G_",i:["float"],g:!1}],u:[{a:"txt",b:"GZ [ 0 ] = GZ [ 1 ] = GZ [ 2 ] = _0_0 ; G_ = _1_0 ; GY ;".split(" ")}]},{a:"node",c:"TEX_ENVIRONMENT",C:[],B:[{a:"node_in",c:"Ha",i:["vec3"],g:!1},{a:"node_out",c:"Hb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Hb [ 0 ] = Hb [ 1 ] = Hb [ 2 ] = _0_0 ; Ha ;".split(" ")}]},
{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},
{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],
g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],
g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],
g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},
{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},
{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",
c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],
g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},
{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( A ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1}],u:[{a:"txt",b:"zG = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],
g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"txt",b:"zI = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",b:"zJ [ 0 ] = zJ [ 1 ] = zJ [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK [ 0 ] = sD [ 0 ] ; zK [ 1 ] = sD [ 1 ] ; zK [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",
C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL [ 0 ] = zL [ 1 ] = zL [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM [ 0 ] = zM [ 1 ] = zM [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",
c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1},{a:"node_param",c:"GR",i:["GLSL_IN","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_IN","vec3"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PARTICLE_BATCH"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zO"],u:[{a:"txt",b:"zO = GR [ 0 ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zP"],u:[{a:"txt",b:"zP = GR [ 1 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zQ"],u:[{a:"txt",b:"zQ = GR [ 2 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zR"],u:[{a:"txt",b:["zR","=","GS",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zS"],u:[{a:"txt",b:"zS = GR [ 3 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zT"],u:[{a:"txt",b:["zT","=","GT",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zU"],
u:[{a:"txt",b:["zU","=","GU",";"]}]}]}]},{a:"node_else",u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]}]}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[],B:[{a:"node_out",
c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"txt",b:"z_ = _0_0 ; Aa = _0_0 ; Ab = _0_0 ; zZ = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",
c:"LAYER_WEIGHT",C:[],B:[{a:"node_in",c:"Hc",i:["float"],g:!1},{a:"node_in",c:"Hd",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"txt",b:"Ah = Ai = _0_0 ; Hd ; Hc ;".split(" ")}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},
{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Aq = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",
C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["0.0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",
c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",
c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",
c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!0},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",
o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = vec4 ( _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},
{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",
i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"txt",b:["DO",";"]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",
b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]}]},
{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , k . xyz ) ; pa = cross ( pe , k . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],
g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , k . xyz ) ; pi = cross ( pe , k . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",
c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , k . xyz ) ; pn = cross ( pe , k . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , k . xyz ) ; pF = cross ( pe , k . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , k . xyz ) ; pL = cross ( pe , k . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( k . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( k . xyz , pW ) ; pv = dot ( k . xyz , ou ) ; qj = dot ( k . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , k . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qz [ 0 ] < _1_0 || qz [ 1 ] == _0_0 ) qA = _0_0 ; else { if ( qz [ 1 ] < 100.0 ) qz [ 1 ] = sqrt ( _1_0 / qz [ 1 ] ) ; else qz [ 1 ] = 10.0 / qz [ 1 ] ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( k . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qz [ 0 ] , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qz [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT",C:[],B:[{a:"node_in",c:"He",i:["vec3"],g:!1},{a:"node_out",
c:"Hf",i:["vec3"],g:!0},{a:"node_out",c:"Hg",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , He ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hf"],u:[{a:"txt",b:"Hf = AH . xyz ; bC ( Hf ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hg"],u:[{a:"txt",b:"Hg = AH . w ;".split(" ")}]}]}]},{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",
c:"NON_COLOR",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],
g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",
b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},
{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",
c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",
b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},
{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",
i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",
i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 Hh = - ou . xyz ; FS = reflect ( Hh , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",
c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:["Gb","=","F_",";"]}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",c:"Ge",i:["float"],
g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",c:"B4W_SMOOTHSTEP",
C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",i:["float"],g:!1}],
u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},{a:"cond",f:[{a:"if",
j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/particles_nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLV",b:[""]},{a:"node",c:"TEX_COORD_UV",C:[],
B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UVMAP",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"PARTICLE_INFO",C:[{a:"node_var",c:"PART_INFO_SIZE",b:["0"]},{a:"node_var",c:"PART_INFO_AGE",b:["0"]},{a:"node_var",c:"PART_INFO_LT",b:["0"]},{a:"node_var",c:"PART_INFO_LOC",b:["0"]},{a:"node_var",c:"PART_INFO_IND",b:["0"]},{a:"node_var",c:"PART_INFO_VEL",
b:["0"]},{a:"node_var",c:"PART_INFO_A_VEL",b:["0"]}],B:[{a:"node_param",c:"GR",i:["GLSL_OUT","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"node_PARTICLE_INFO_var_a_p_indices",i:["GLSL_IN","float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_SIZE"],u:[{a:"txt",b:"GR [ 3 ] = Hm ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_AGE"],u:[{a:"txt",
b:"GR [ 1 ] = Hl ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LT"],u:[{a:"txt",b:"GR [ 2 ] = Ho ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LOC"],u:[{a:"txt",b:["GS","=","Hi",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_IND"],u:[{a:"txt",b:"GR [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_VEL"],u:[{a:"txt",b:["GT","=","Hj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_A_VEL"],u:[{a:"txt",
b:["GU","=","Hk",";"]}]}]}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 Hi , in vec3 Hj , in vec3 Hk , in float Hl , in float Hm , in vec2 Hn , in float Ho ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","Hn",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/precision_statement.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PRECISION_STATEMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"PRECISION_STATEMENT_GLSLF",
b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","float",";"]}]}}]}]};a["include/procedural.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PROCEDURAL_GLSLF",l:{a:"grp",f:[{a:"define",c:"PROCEDURAL_GLSLF",b:[""]},{a:"txt",b:"vec4 Hp ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Hp ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Hp ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Hq ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Hr ( vec4 x ) { return Hp ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},
{a:"define",c:"K",b:["0.142857142857"]},{a:"define",c:"K2",b:["0.0714285714285"]},{a:"define",c:"JITTER",b:["0.7"]},{a:"txt",b:"vec2 fG ( vec2 Hs ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 dz = Hz * Hz + HA * HA ;".split(" ")},
{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"txt",b:"dz . xy = min ( dz . xy , dz . zw ) ; dz . x = min ( dz . x , dz . y ) ; return dz . xx ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dz . xy = ( dz . x < dz . y ) ? dz . xy : dz . yx ; dz . xz = ( dz . x < dz . z ) ? dz . xz : dz . zx ; dz . xw = ( dz . x < dz . w ) ? dz . xw : dz . wx ; dz . y = min ( dz . y , dz . z ) ; dz . y = min ( dz . y , dz . w ) ; return sqrt ( dz . xy ) ;".split(" ")}]}}]},{a:"txt",b:"} vec3 kX ( vec2 Hs , float HB ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 HC = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HD = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HE = Hz * Hz + HA * HA ; HC . xy = min ( HC . xy , HC . zw ) ; HC . x = min ( HC . x , HC . y ) ; HD . xy = min ( HD . xy , HD . zw ) ; HD . x = min ( HD . x , HD . y ) ; HE . xy = min ( HE . xy , HE . zw ) ; HE . x = min ( HE . x , HE . y ) ; return vec3 ( HC . x , HD . x , HE . x ) ; } vec3 HF ( vec3 x ) { return Hp ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fv ( vec2 kQ ) { const vec4 HG = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cl = floor ( kQ + dot ( kQ , HG . yy ) ) ; vec2 HH = kQ - cl + dot ( cl , HG . xx ) ; vec2 HI ; HI = ( HH . x > HH . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 HJ = HH . xyxy + HG . xxzz ; HJ . xy -= HI ; cl = Hp ( cl ) ; vec3 p = HF ( HF ( cl . y + vec3 ( _0_0 , HI . y , _1_0 ) ) + cl . x + vec3 ( _0_0 , HI . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( HH , HH ) , dot ( HJ . xy , HJ . xy ) , dot ( HJ . zw , HJ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * HG . www ) - _1_0 ; vec3 cj = abs ( x ) - 0.5 ; vec3 Hx = floor ( x + 0.5 ) ; vec3 HK = x - Hx ; aA *= 1.79284291400159 - 0.85373472095314 * ( HK * HK + cj * cj ) ; vec3 g ; g . x = HK . x * HH . x + cj . x * HH . y ; g . yz = HK . yz * HJ . xz + cj . yz * HJ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 HN ( vec2 fW ) { float HC = dot ( fW , vec2 ( 12.9898 , 78.233 ) ) ; float HD = dot ( fW , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float HL = fract ( sin ( HC ) * 43758.5453 ) * 2.0 - _1_0 ; float HM = fract ( sin ( HD ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( HL , HM ) ; } float lg ( vec2 HO ) { return fract ( sin ( dot ( HO , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
a["include/refraction.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"REFRACTION_GLSLF",l:{a:"grp",f:[{a:"define",c:"REFRACTION_GLSLF",b:[""]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"float eS ( in float cR , inout vec2 eR , in vec2 eI ) { vec4 HP = GLSL_TEXTURE ( u_scene_depth , eR ) ; float eT = cQ ( HP ) ; if ( eT < m ) { eR = eI ; return cR ; } else { return eT ; } return cR ; }".split(" ")}]}}]},
{a:"txt",b:"vec3 cN ( in vec3 rq , in vec2 HQ ) { vec2 eI = rq . xy / rq . z ; vec2 eR = eI + HQ ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , rq ) ; float cR = cQ ( cP ) ; eS ( cR , eR , eI ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ; return eX ; }".split(" ")}]}}]}]}}]}]};a["include/scale_texcoord.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SCALE_TEXCOORD_GLSLV",
l:{a:"grp",f:[{a:"define",c:"SCALE_TEXCOORD_GLSLV",b:[""]},{a:"txt",b:"vec2 az ( vec2 b_ , vec3 HR ) { return ( b_ + 0.5 ) * HR . xy - 0.5 ; }".split(" ")}]}}]}]};a["include/shadow.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLF",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLF",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"CSM_FADE_LAST_CASCADE",b:["0"]},{a:"var",c:"CSM_BLEND_BETWEEN_CASCADES",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"COMPARED_MODE",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"procedural.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float HS = 0.1 ; const float HT = 0.1 ; const float HU = - 0.01 ; const float HV = 0.05 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","POISSON_X_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 HW = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 HX = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 HY = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 HZ = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 H_ = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Ia = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ib = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Ic = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{a:"elif",j:["POISSON_DISK_NUM","POISSON_X_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 HX = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 HY = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 HZ = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 H_ = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Ia = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ib = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Ic = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{a:"elif",j:["POISSON_DISK_NUM",
"POISSON_X_4",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.51808083 , 0.0 ) ; vec2 HX = vec2 ( 0.5741194 , 0.0 ) ; vec2 HY = vec2 ( - 0.68048857 , 0.0 ) ; vec2 HZ = vec2 ( 0.82934988 , 0.0 ) ; vec2 H_ = vec2 ( 0.70009436 , 0.0 ) ; vec2 Ia = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ib = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Ic = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"bool Ie ( vec2 iK , float Id ) { return all ( lessThanEqual ( iK , vec2 ( 1.0 + Id ) ) ) && all ( greaterThanEqual ( iK , vec2 ( 0.0 - Id ) ) ) ; } float Il ( float If , float Ig , mat2 Ih , vec3 Ii , float Ij , PRECISION GLSL_SMPLR2D_SHDW Ik ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iK , fI ; fI . x = If ; fI . y = Ig ; fI = Ih * fI ; iK = Ii . xy + fI * Ij / SHADOW_TEX_RES ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iK = Ii . xy ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"if ( ! Ie ( iK , HU ) ) return 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",
f:[{a:"txt",b:"float eq = cQ ( GLSL_TEXTURE ( Ik , iK ) ) ; return step ( Ii . z , eq ) ;".split(" ")}]}},{a:"elif",j:["COMPARED_MODE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE ( Ik , vec3 ( iK , Ii . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return step ( Ii . z , GLSL_TEXTURE ( Ik , iK ) . r ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iq ( vec3 Ii , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij ) { float Im = 0.0 ; Ii . z = clamp ( Ii . z , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ii . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Im += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ii , Ij , Ik ) ; } return clamp ( Im / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ii , Ij , Ik ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iz ( vec3 Ir , PRECISION GLSL_SMPLR2D_SHDW Is , vec3 It , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float aL ) { float Ix , Iy ; Ir . z = clamp ( Ir . z , 0.0 , 1.0 ) ; It . z = clamp ( It . z , 0.0 , 1.0 ) ; Ix = 0.0 ; Iy = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ir . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Ix += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ir , Iv , Is ) ; } for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Iy += Il ( HW [ cl ] , H_ [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HX [ cl ] , Ia [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HY [ cl ] , Ib [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HZ [ cl ] , Ic [ cl ] , Ih , It , Iw , Iu ) ; } Ix = mix ( Ix , Iy , aL ) ; Ix /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ix += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ir , Iv , Is ) ; Iy += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , It , Iw , Iu ) ; Ix = mix ( Ix , Iy , aL ) ;".split(" ")}]}}]},{a:"txt",b:"return clamp ( Ix , 0.0 , 1.0 ) ; } float IA ( vec2 iK ) { float a = min ( iK . x , iK . y ) ; float b = min ( 1.0 - iK . x , 1.0 - iK . y ) ; return min ( a , b ) ; } float IC ( float uP , float IB ) { if ( IB >= 0.0 && IB <= HT ) uP = ( uP - 1.0 ) / HT * IB + 1.0 ; return uP ; } float IH ( vec3 ID , vec3 IE , PRECISION GLSL_SMPLR2D_SHDW Is , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float IF , float eq ) { float uP ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_BLEND_BETWEEN_CASCADES"],l:{a:"grp",f:[{a:"txt",b:"float IB = IA ( ID . xy ) ; if ( - eq > IF && IB >= 0.0 && IB <= HS && Ie ( IE . xy , 0.0 ) ) { float IG = 1.0 - IB / HS ; uP = Iz ( ID , Is , IE , Iu , Iv , Iw , IG ) ; } else".split(" ")}]}}]},{a:"txt",b:"uP = Iq ( ID , Is , Iv ) ; return uP ; } float IJ ( vec3 II , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij , float IF , float eq ) { float uP = Iq ( II , Ik , Ij ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_FADE_LAST_CASCADE"],
l:{a:"grp",f:[{a:"txt",b:"if ( - eq > IF ) { float IB = IA ( II . xy ) ; uP = IC ( uP , IB ) ; }".split(" ")}]}}]},{a:"txt",b:"return uP ; } vec4 es ( float eq ) { float uP = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","IK","=","u_pcf_blur_radii",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 IK = vec4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 Ir = n . xyz / n . w ; if ( n . w < 0.0 ) Ir . z = 0.0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 It = o . xyz / o . w ; if ( o . w < 0.0 ) It . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IL = u . xyz / u . w ; if ( u . w < 0.0 ) IL . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IM = v . xyz / v . w ; if ( v . w < 0.0 ) IM . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , 0.0 ) ) { uP = IH ( Ir , It , u_shadow_map0 , u_shadow_map1 , IK [ 0 ] , IK [ 1 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , HV ) ) { uP = IJ ( Ir , u_shadow_map0 , IK [ 0 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( It . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( It , IL , u_shadow_map1 , u_shadow_map2 , IK [ 1 ] , IK [ 2 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( It , u_shadow_map1 , IK [ 1 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",
b:"else { if ( Ie ( IL . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( IL , IM , u_shadow_map2 , u_shadow_map3 , IK [ 2 ] , IK [ 3 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( IL , u_shadow_map2 , IK [ 2 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( IM . xy , 0.0 ) ) uP = IJ ( IM , u_shadow_map3 , IK [ 3 ] , u_csm_center_dists [ 3 ] , eq ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IN = Iq ( It , u_shadow_map1 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IN","=","0.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IO = Iq ( IL , u_shadow_map2 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IO","=","0.0",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IP = Iq ( IM , u_shadow_map3 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IP","=","1.0",";"]}]}}]},{a:"txt",b:"return vec4 ( uP , IN , IO , IP ) ; }".split(" ")}]}}]},{a:"txt",b:"vec4 cC ( inout vec3 cy ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"l_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cy *= Im . a ;".split(" ")}]}}]},{a:"txt",b:["return","Im",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = es ( i . z ) ; return Im ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/shadow.glslv"]=
{a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLV",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLV",b:[""]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE",
"SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"txt",b:"vec4 IT ( mat4 IQ , vec4 IR , mat4 IS ) { vec2 eu = ( IQ * IS [ 3 ] ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; vec4 Ii = IQ * IR ; Ii . xy += eu ; Ii . xyz = 0.5 * ( Ii . xyz + Ii . w ) ; return Ii ; } void bZ ( vec3 fn , vec3 IU ) {".split(" ")},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; n = IT ( u_p_light_matrix0 , IV , IS ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},
{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",
b:"o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/skin.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKIN_GLSLV",l:{a:"grp",f:[{a:"define",c:"SKIN_GLSLV",b:[""]},{a:"var",c:"DISABLE_TANGENT_SKINNING",
b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"define",c:"SKIN_SLERP",b:["0"]},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 Jc ( in vec4 qV , in vec4 IW , in float IX ) { float IY = qV [ 0 ] * IW [ 0 ] + qV [ 1 ] * IW [ 1 ] + qV [ 2 ] * IW [ 2 ] + qV [ 3 ] * IW [ 3 ] ; if ( IY < 0.0 ) { IW *= - 1.0 ; IY = - IY ; } if ( abs ( IY ) >= 1.0 ) return qV ; float IZ = acos ( IY ) ; float I_ = sqrt ( 1.0 - IY * IY ) ; if ( abs ( I_ ) < 0.001 ) return vec4 ( qV * 0.5 + IW * 0.5 ) ; float Ja = sin ( ( 1.0 - IX ) * IZ ) / I_ ; float Jb = sin ( IX * IZ ) / I_ ; return qV * Ja + IW * Jb ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Je , in vec4 Jf , in vec4 Jg , in float Jh ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec4 Jj = mix ( Jf , Jg , Jh ) ; vec3 Jk = T ( qV , Ji ) ; vec3 Jl = Jk * Jj . w + Jj . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jm = T ( Jd , Ji ) ; vec3 Jn = T ( Je , Ji ) ; vec3 Jo = Jm * Jf . w + Jf . xyz ; vec3 Jp = Jn * Jg . w + Jg . xyz ; vec3 Jl = mix ( Jo , Jp , Jh ) ;".split(" ")}]}}]},
{a:"txt",b:"return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd , in vec4 Je , in float Jh ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec3 Jt = T ( qV , Js ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Ju = T ( Jd , Js ) ; vec3 Jv = T ( Je , Js ) ; vec3 Jt = mix ( Ju , Jv , Jh ) ;".split(" ")}]}}]},{a:"txt",b:"return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Jf ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 Jk = T ( Jd , Ji ) ; vec3 Jl = Jk * Jf . w + Jf . xyz ; return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ; vec3 Jt = T ( Jd , Js ) ; return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}}]},{a:"txt",b:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:["float","Jx","=","u_frame_factor",";"]}]}}]},{a:"txt",b:"if ( a_influence . y > 0.0 ) { vec3 jD = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jy = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jz = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JA = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 JB = a_influence ; for ( int cl = 0 ; cl < 4 ; cl ++ ) { int JC = int ( JB [ cl ] ) ; float JD = fract ( JB [ cl ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"Jy += JD * Jw ( V , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; JA += JD * Jw ( U , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jD += JD * Jq ( O , u_quatsb [ JC ] , u_transb [ JC ] ) ; JA += JD * Jw ( U , u_quatsb [ JC ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Jy += JD * Jw ( V , u_quatsb [ JC ] ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] ) ;".split(" ")}]}}]}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"int JC = int ( JB [ 0 ] ) ; float JD = fract ( JB [ 0 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 1 ] ) ; JD = fract ( JB [ 1 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 2 ] ) ; JD = fract ( JB [ 2 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 3 ] ) ; JD = fract ( JB [ 3 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ;".split(" ")}]}}]},
{a:"txt",b:"O = jD ; U = JA ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jy ; W = Jz ;".split(" ")}]}}]},{a:"txt",b:"} if ( ! ( a_influence . y > 0.0 ) ) { int JE = int ( a_influence [ 0 ] - 1.0 ) ; if ( JE > - 1 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_quatsa [ JE ] , u_transb [ JE ] , u_transa [ JE ] , Jx ) ; V = Jw ( V , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; W = Jw ( W , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; U = Jw ( U , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_transb [ JE ] ) ; U = Jw ( U , u_quatsb [ JE ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jw ( V , u_quatsb [ JE ] ) ; W = Jw ( W , u_quatsb [ JE ] ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}","}","}"]}]}}]}]}}]}]};a["include/sky_blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKY_BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"SKY_BLENDING_GLSLF",
b:[""]},{a:"include",F:"std.glsl"},{a:"include",F:"blending.glslf"},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"BLENDTYPE",b:["MIX"]},{a:"var",c:"MTEX_RGBTOINT",b:["0"]},{a:"var",c:"WOMAP_HORIZ",b:["0"]},{a:"var",c:"WOMAP_ZENUP",b:["0"]},{a:"var",c:"WOMAP_ZENDOWN",b:["0"]},{a:"var",c:"WOMAP_BLEND",b:["0"]},{a:"var",c:"MTEX_NEGATIVE",b:["0"]},{a:"txt",b:"vec3 JF ( vec3 ki , vec3 kj , float aL , float kI ) { float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE",
"MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kn ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kp ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kq ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kr ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","HUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kz ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SATURATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kA ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"VALUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kB ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","COLOR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kC ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) ;".split(" ")}]}}]},{a:"txt",
b:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float JG ( float kG , float kH , float aL , float kI ) { vec3 ki = vec3 ( kG ) , kj = vec3 ( kH ) ; float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE","MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"return kn ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kJ ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kK ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kL ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",
j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) . x ;".split(" ")}]}}]},{a:"txt",b:"return 0.0 ; } vec3 eB ( vec3 ex , vec3 ey , vec4 eA , float ew , vec3 ez ) { float JH = 1.0 ; JH = eA . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"JH = ge ( eA ) ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["MTEX_NEGATIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( vec3 ( 1.0 ) - eA . rgb , eA . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = 1.0 - JH ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = eA . a ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ"],l:{a:"grp",f:[{a:"txt",b:"ex = JF ( eA . rgb , ex , JH , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","JI","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"if ( dot ( ez , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],
l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:[";"]}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"else JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"elif",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( JI != 0.0 ) ey = JF ( eA . rgb , ey , JH , JI ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_BLEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"JH = dot ( eA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{a:"txt",b:"ew = JG ( u_sky_tex_dvar , ew , JH , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"vec3 bs = mix ( ex , ey , ew ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","bs","=","ex",";"]}]}}]},{a:"txt",b:["return","bs",";","}"]}]}}]}]};a["include/std.glsl"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"STD_ENUMS_GLSL",l:{a:"grp",f:[{a:"define",c:"STD_ENUMS_GLSL",b:[""]},{a:"var",c:"CONSTANTS_HACK",b:["0"]},{a:"define",c:"TEXTURE_COORDS_NONE",b:["0"]},{a:"define",c:"TEXTURE_COORDS_UV_ORCO",b:["1"]},{a:"define",c:"TEXTURE_COORDS_NORMAL",b:["2"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MIX",b:["1"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MULTIPLY",
b:["2"]},{a:"define",c:"SHADOW_SRC_NONE",b:["1"]},{a:"define",c:"SHADOW_SRC_DEPTH",b:["2"]},{a:"define",c:"SHADOW_SRC_MASK",b:["3"]},{a:"define",c:"SHADOW_DST_NONE",b:["1"]},{a:"define",c:"SHADOW_DST_DEPTH",b:["2"]},{a:"define",c:"SHADOW_DST_MASK",b:["3"]},{a:"define",c:"NO_SHADOWS",b:["1"]},{a:"define",c:"SHADOW_CASTING",b:["2"]},{a:"define",c:"SHADOW_MASK_GENERATION",b:["3"]},{a:"define",c:"SHADOW_MAPPING_OPAQUE",b:["4"]},{a:"define",c:"SHADOW_MAPPING_BLEND",b:["5"]},{a:"define",c:"POISSON_X_16",
b:["4"]},{a:"define",c:"POISSON_X_8",b:["2"]},{a:"define",c:"POISSON_X_4",b:["1"]},{a:"define",c:"NO_SOFT_SHADOWS",b:["0"]},{a:"define",c:"SPECULAR_PHONG",b:["1"]},{a:"define",c:"SPECULAR_COOKTORR",b:["2"]},{a:"define",c:"SPECULAR_WARDISO",b:["3"]},{a:"define",c:"SPECULAR_BLINN",b:["4"]},{a:"define",c:"SPECULAR_TOON",b:["5"]},{a:"define",c:"DIFFUSE_LAMBERT",b:["1"]},{a:"define",c:"DIFFUSE_OREN_NAYAR",b:["2"]},{a:"define",c:"DIFFUSE_FRESNEL",b:["3"]},{a:"define",c:"DIFFUSE_MINNAERT",b:["4"]},{a:"define",
c:"DIFFUSE_TOON",b:["5"]},{a:"define",c:"MIX",b:["0"]},{a:"define",c:"ADD",b:["1"]},{a:"define",c:"SUBTRACT",b:["2"]},{a:"define",c:"MULTIPLY",b:["3"]},{a:"define",c:"SCREEN",b:["4"]},{a:"define",c:"OVERLAY",b:["5"]},{a:"define",c:"DIFFERENCE",b:["6"]},{a:"define",c:"DIVIDE",b:["7"]},{a:"define",c:"DARKEN",b:["8"]},{a:"define",c:"LIGHTEN",b:["9"]},{a:"define",c:"HUE",b:["10"]},{a:"define",c:"SATURATION",b:["11"]},{a:"define",c:"VALUE",b:["12"]},{a:"define",c:"COLOR",b:["13"]},{a:"define",c:"SOFT_LIGHT",
b:["14"]},{a:"define",c:"LINEAR_LIGHT",b:["15"]},{a:"define",c:"REFL_NONE",b:["0"]},{a:"define",c:"REFL_MIRRORMAP",b:["1"]},{a:"define",c:"REFL_PLANE",b:["2"]},{a:"define",c:"REFL_CUBE",b:["3"]},{a:"define",c:"REFL_PBR",b:["4"]},{a:"define",c:"INVERSE_QUADRATIC",b:["0"]},{a:"define",c:"LINEAR",b:["1"]},{a:"define",c:"QUADRATIC",b:["2"]},{a:"define",c:"HEMI",b:["1"]},{a:"define",c:"SPOT",b:["2"]},{a:"define",c:"POINT",b:["3"]},{a:"define",c:"SUN",b:["4"]},{a:"define",c:"DOF_SIMPLE",b:["0"]},{a:"define",
c:"DOF_BOKEH",b:["1"]},{a:"define",c:"COC_ALL",b:["0"]},{a:"define",c:"COC_FOREGROUND",b:["1"]},{a:"define",c:"COC_COMBINE",b:["2"]},{a:"define",c:"VT_WORLD_TO_WORLD",b:["0"]},{a:"define",c:"VT_WORLD_TO_OBJECT",b:["1"]},{a:"define",c:"VT_WORLD_TO_CAMERA",b:["2"]},{a:"define",c:"VT_OBJECT_TO_WORLD",b:["3"]},{a:"define",c:"VT_OBJECT_TO_OBJECT",b:["4"]},{a:"define",c:"VT_OBJECT_TO_CAMERA",b:["5"]},{a:"define",c:"VT_CAMERA_TO_WORLD",b:["6"]},{a:"define",c:"VT_CAMERA_TO_OBJECT",b:["7"]},{a:"define",c:"VT_CAMERA_TO_CAMERA",
b:["8"]},{a:"define",c:"VT_POINT",b:["0"]},{a:"define",c:"VT_VECTOR",b:["1"]},{a:"define",c:"VT_NORMAL",b:["2"]},{a:"define",c:"NM_TANGENT",b:["0"]},{a:"define",c:"NM_OBJECT",b:["1"]},{a:"define",c:"NM_WORLD",b:["2"]},{a:"define",c:"NM_BLENDER_OBJECT",b:["3"]},{a:"define",c:"NM_BLENDER_WORLD",b:["4"]},{a:"define",c:"BILLBOARD_ALIGN_VIEW",b:["1"]},{a:"define",c:"BILLBOARD_ALIGN_XY",b:["2"]},{a:"define",c:"BILLBOARD_ALIGN_YZ",b:["3"]},{a:"define",c:"BILLBOARD_ALIGN_ZX",b:["4"]},{a:"define",c:"POST_EFFECT_NONE",
b:["1"]},{a:"define",c:"POST_EFFECT_GRAYSCALE",b:["2"]},{a:"define",c:"POST_EFFECT_BLUR",b:["3"]},{a:"define",c:"POST_EFFECT_GLOW_BLUR",b:["4"]},{a:"define",c:"POST_EFFECT_DOF_BLUR",b:["5"]},{a:"define",c:"POST_EFFECT_ALPHA_BLUR",b:["6"]},{a:"define",c:"POST_EFFECT_EXTEND",b:["7"]},{a:"define",c:"FLIP_CUBEMAP_COORDS",b:["8"]},{a:"define",c:"BLUR_PASS_1",b:["1"]},{a:"define",c:"BLUR_PASS_2",b:["2"]},{a:"define",c:"BLUR_PASS_3",b:["3"]},{a:"define",c:"BLUR_PASS_4",b:["4"]},{a:"define",c:"BLUR_PASS_5",
b:["5"]},{a:"define",c:"DV_NONE",b:["0"]},{a:"define",c:"DV_OPAQUE_WIREFRAME",b:["1"]},{a:"define",c:"DV_TRANSPARENT_WIREFRAME",b:["2"]},{a:"define",c:"DV_FRONT_BACK_VIEW",b:["3"]},{a:"define",c:"DV_BOUNDINGS",b:["4"]},{a:"define",c:"DV_CLUSTERS_VIEW",b:["5"]},{a:"define",c:"DV_BATCHES_VIEW",b:["6"]},{a:"define",c:"DV_RENDER_TIME",b:["7"]},{a:"define",c:"SSAO_QUALITY_8",b:["1"]},{a:"define",c:"SSAO_QUALITY_16",b:["2"]},{a:"define",c:"SSAO_QUALITY_24",b:["3"]},{a:"define",c:"SSAO_QUALITY_32",b:["4"]},
{a:"define",c:"AA_METHOD_FXAA_LIGHT",b:["1"]},{a:"define",c:"AA_METHOD_FXAA_QUALITY",b:["2"]},{a:"define",c:"AA_QUALITY_LOW",b:["0"]},{a:"define",c:"AA_QUALITY_MEDIUM",b:["1"]},{a:"define",c:"AA_QUALITY_HIGH",b:["2"]},{a:"define",c:"SMAA_RESOLVE",b:["25"]},{a:"define",c:"SMAA_EDGE_DETECTION",b:["24"]},{a:"define",c:"SMAA_BLENDING_WEIGHT_CALCULATION",b:["23"]},{a:"define",c:"SMAA_NEIGHBORHOOD_BLENDING",b:["26"]},{a:"define",c:"AA_METHOD_SMAA_LOW",b:["1"]},{a:"define",c:"AA_METHOD_SMAA_MEDIUM",b:["2"]},
{a:"define",c:"AA_METHOD_SMAA_HIGH",b:["3"]},{a:"define",c:"AA_METHOD_SMAA_ULTRA",b:["4"]},{a:"define",c:"REFL_PASS_NONE",b:["0"]},{a:"define",c:"REFL_PASS_PLANE",b:["1"]},{a:"define",c:"REFL_PASS_CUBE",b:["2"]},{a:"define",c:"SRGB_NONE",b:["0"]},{a:"define",c:"SRGB_SIMPLE",b:["1"]},{a:"define",c:"SRGB_PROPER",b:["2"]},{a:"define",c:"CAM_TYPE_ORTHO",b:["0"]},{a:"define",c:"CAM_TYPE_PERSP",b:["1"]},{a:"define",c:"M_PI",b:["3.14159265359"]},{a:"define",c:"M_PI_4",b:["0.785398163"]},{a:"define",c:"INV_PI",
b:["0.318309886"]},{a:"define",c:"UP_VECTOR",b:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{a:"define",c:"RIGHT_VECTOR",b:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{a:"define",c:"TOWARD_VECTOR",b:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["CONSTANTS_HACK"],l:{a:"grp",f:[{a:"txt",b:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"_0_0",b:["0.0"]},{a:"define",c:"_0_5",b:["0.5"]},{a:"define",c:"_1_0",
b:["1.0"]},{a:"define",c:"_255_0",b:["255.0"]}]}}]}]}}]}]};a["include/to_world.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"TO_WORLD_GLSLV",l:{a:"grp",f:[{a:"define",c:"TO_WORLD_GLSLV",b:[""]},{a:"include",F:"math.glslv"},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"BILLBOARD_SPHERICAL",b:["0"]},{a:"var",c:"BILLBOARD_RANDOM",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"BILLBOARD_PRES_GLOB_ORIENTATION",b:["0"]},{a:"var",c:"STATIC_BATCH",
b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"define",c:"MAX_BILLBOARD_ANGLE",b:["M_PI_4"]},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bj ( vec3 JJ , mat3 N ) { vec4 JK = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{a:"txt",b:"JK = qX ( JL , JK ) ; JK = kR ( JK ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 JN ( vec3 lH , vec3 JJ ) { vec3 JM = lH - JJ ; JM . z = 0.0 ; JM = normalize ( JM ) ; vec4 JK = rd ( JM , TOWARD_VECTOR ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"mat3 at ( in vec3 JO , float JP , float JQ , float JR , vec3 a_ , mat3 Z ) { float HO = fract ( length ( a_ ) / 0.17 ) ; float JS = JR + HO / 10.0 ; float JT = HO ; if ( JR != 0.0 ) JT /= JR ; JO *= 1.0 + 0.5 * sin ( JP ) ; float JU = length ( JO ) * JQ * sin ( 2.0 * 3.14 * JP * JS + JT ) ; vec4 JV = X ( TOWARD_VECTOR , JU ) ; vec4 JW = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; JW = qX ( JW , JV ) ; Z = dd ( JW , Z ) ; return Z ; }".split(" ")}]}}]},
{a:"txt",b:"mat3 as ( in vec3 lH , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 lW = bj ( aq , N ) ;".split(" ")}]}},{a:"elif",j:["BILLBOARD_RANDOM"],l:{a:"grp",f:[{a:"txt",b:"float HO = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float JX = 2.0 * M_PI * HO ; vec4 JY = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float JZ = asin ( 2.0 * ( JY . x * JY . y - JY . z * JY . w ) ) ; float hu = JZ - JX ; if ( hu < 0.0 ) hu = 2.0 * M_PI + hu ; float J_ = JX ; if ( hu <= MAX_BILLBOARD_ANGLE ) J_ += hu ; else if ( hu <= M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hu <= M_PI + MAX_BILLBOARD_ANGLE ) J_ += hu - M_PI ; else if ( hu <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else J_ += hu - 2.0 * M_PI ; vec4 Ka = X ( UP_VECTOR , J_ ) ; mat3 lW = da ( ) ; lW [ 0 ] = aq ; lW = dd ( Ka , lW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 lW = JN ( lH , aq ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lW = aY ( lW , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"lW [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{a:"txt",b:"return lW ; } au av ( in vec3 fn , in vec3 Kb , in vec3 Kc , in vec3 Kd , in vec3 Ke , in vec3 Kf , in mat3 Z ) { fn = ap ( Z , fn ) ; Kb = ap ( Z , Kb ) ; Kc = _ ( Z , Kc ) ; Kd = _ ( Z , Kd ) ; Ke = _ ( Z , Ke ) ; Kf = _ ( Z , Kf ) ; return lX ( au ( fn , Kb , Kc , Kd , Ke , Kf , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
a["include/wind_bending.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"WIND_BENDING_GLSLV",l:{a:"grp",f:[{a:"define",c:"WIND_BENDING_GLSLV",b:[""]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"void Ks ( inout vec3 bo , in vec3 Kg , in float Kh , in float Ki , in float fu , in vec3 JO , in float Kj , in mat4 bV ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"float dA = length ( Kl ) ; float Km = Ki * ( 1.0 + 0.1 * fract ( dA ) ) ; float Kn = Kh * Kj * ( 1.0 + sin ( 2.0 * 3.14 * fu * Km + dA ) ) ; float Ko = ( Kk . z - Kl . z ) * abs ( Kn ) ; Ko += 1.0 ; Ko *= Ko ; Ko = Ko * Ko - Ko ; vec3 Kp = Kk ; Kp . xy += JO . xy * Ko * sign ( Kn ) ; vec3 Kq = Kp - Kl ; if ( all ( equal ( Kq , vec3 ( 0.0 ) ) ) ) bo = Kg ; else {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Kq = ( bV * vec4 ( Kq , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"float Kr = length ( Kk - Kl ) ; bo = Kg + normalize ( Kq ) * Kr ; } }".split(" ")},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"vec4 Kt ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 Ku ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 Kv ( vec4 x ) { return Kt ( Ku ( x ) ) ; } void KH ( inout vec3 bo , in float fu , in vec3 U , in vec3 JO , in vec3 Kg , in float Kw , in float Kx , in float Ky , in vec3 Kz , in mat4 bV ) { float KA ; float KB ; float KC ; vec2 KD ; vec4 KE ; vec2 KF ; vec3 KG ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"KA = dot ( Kl , vec3 ( 1.0 ) ) ; KB = KA + Kz . g ; KC = dot ( Kk , vec3 ( Kz . g ) ) ; KD = ( fu + vec2 ( KC , KB ) ) ; KE = ( ( fract ( ( KD . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( JO ) * Kw ; KE = Kv ( KE ) ; KF = KE . xz + KE . yw ; KF . y = 0.5 - KF . y ; KG = KF . xxy * Kz . rrb * vec3 ( Kx * U . x , Kx * U . y , Ky ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KG = ( bV * vec4 ( KG , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:["bo","+=","KG",";","}"]}]}}]},{a:"txt",b:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bV ) { vec3 KI = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = ao ; vec3 KK = a_emitter_center ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KK = ( bV * vec4 ( KK , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = O ; vec3 KK = ao ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"KH ( KJ , u_time , U , KI , KK , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bV ) ;".split(" ")}]}}]},
{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , a_bending_col_main , bV ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , 1.0 , bV ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"O += KJ - ao ; ao = KJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = KJ ; ao = KK ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]}};b4w.module.__transform=function(a,t){function p(a,b){e.ai(a)?u.Ad(b,e.Yh(a)):u.Ad(b,a.A.D)}function c(a,b){var c=a.A;if(e.ai(a)){u.Gc(b,c.D);var f=e.Hz(a),f=u.invert(f,N);u.multiply(f,c.D,e.Yh(a))}else u.Gc(b,c.D)}function b(a,b){e.ai(a)?u.Gc(b,e.Yh(a)):u.Gc(b,a.A.D)}function k(a,b){u.Eb(a.A.D,b);return b}function g(a,b){e.ai(a)?u.Eb(e.Yh(a),b):u.Eb(a.A.D,b);return b}function M(a,b){e.ai(a)?u.copy(b,e.Yh(a)):u.copy(b,a.A.D)}function m(a,b){e.ai(a)?u.copy(e.Yh(a),b):u.copy(a.A.D,b);return b}function z(a){var b=
a.A,c=a.T,f=a.type;"CAMERA"==f&&h.HS(a);e.C5(a,U);"CAMERA"==f&&h.A5(a);C.Kq(b.Ca,b.D,b.Ki);C.ly(b.Bc,b.D,b.$e);for(var g=0;g<c.length;g++)for(var d=c[g].da,k=0;k<d.length;k++)P.TS(d[k],b.D,c[g].dh[k]);switch(f){case "MESH":a.VP&&u.invert(a.A.D,a.A.GD);if(d=a.ay)u.invert(d.A.D,N),u.multiply(N,b.D,N),u.hr(N,b.Qt),u.Eb(N,b.Pt);b.Tu=!0;break;case "CAMERA":for(g=0;g<c.length;g++)h.B5(a,c[g]);break;case "SPEAKER":I.H4(a,U,L);break;case "LAMP":A.H5(a)}for(var d=u.Wb(b.D,D),l=u.Eb(b.D,v),g=0;g<c.length;g++)if(k=
c[g],k.wA){var m=k.vb,r=m.J;switch(f){case "MESH":b.Vf&&O.cI(m);r=k.Wk;null!=b.Le&&r&&O.JS(r,d);break;case "EMPTY":q.E5(a);break;case "CAMERA":if(O.R()==m&&O.Hm(m)==a){O.w3(m);if(r.Bd){(r.Bd.enable_csm||r.Bd.FZ)&&O.cI(m);var p=P.La(a,m).oa[0];O.X5(p,r.Da)}I.B1(m,d,l,U,L)}break;case "LAMP":O.F5(a,m)}r=k.hk;p=a.$v;if(p.length)for(k=0;k<r.length;k++){var y=r[k].H;O.MS(r[k],d,l);P.NS(p,y.Kc);h.o4(y,O.Hm(m))}}b=a.af;for(g=0;g<b.length;g++)z(b[g]);a=a.VE;for(g=0;g<a.length;g++)b=a[g],d=b[0],e.v5(d,b[1])}
var C=t("__boundings"),h=t("__camera"),e=t("__constraints"),A=t("__lights"),q=t("__objects"),P=t("__obj_util"),O=t("__scenes"),I=t("__sfx"),u=t("__tsr"),J=t("__util"),x=t("__vec3"),D=new Float32Array(3),l=new Float32Array(3),v=new Float32Array(4),N=u.create(),E=u.create(),U=0,L=0;a.update=function(a){U=a;L++};a.je=function(a,b){var c=a.A;if(e.ai(a)){u.Ad(b,c.D);var f=e.Hz(a),f=u.invert(f,N);u.multiply(f,c.D,e.Yh(a))}else u.Ad(b,c.D)};a.dC=p;a.Ne=function(a,b){u.Wb(a.A.D,b);return b};a.pO=function(a,
b){e.ai(a)?u.Wb(e.Yh(a),b):u.Wb(a.A.D,b);return b};a.Ll=c;a.aC=b;a.Sj=k;a.dG=g;a.qI=function(a,b){var e=J.bl(b,v);c(a,e)};a.rI=function(a,c){var e=J.bl(c,v);b(a,e)};a.fO=function(a,b){var c=k(a,v);return b=J.Uv(c,b)};a.gO=function(a,b){var c=g(a,v);return b=J.Uv(c,b)};a.Ve=function(a,b){var c=a.A;if(e.ai(a)){var c=e.Yh(a),f=u.fe(e.Hz(a));u.Ve(b/f,c)}else u.Ve(b,c.D)};a.sI=function(a,b){var c=a.A;e.ai(a)?u.Ve(b,e.Yh(a)):u.Ve(b,c.D)};a.fe=function(a){return u.fe(a.A.D)};a.iO=function(a){return e.ai(a)?
u.fe(e.Yh(a)):u.fe(a.A.D)};a.nk=function(a,b){u.copy(b,a.A.D);if(e.ai(a)){var c=e.Hz(a),c=u.invert(c,N);u.multiply(c,a.A.D,e.Yh(a))}};a.fC=M;a.Im=function(a,b){return u.copy(a.A.D,b)};a.dv=m;a.bG=function(a){var b=a.A;a=b.Lk;var c=u.fe(b.D),b=c*(a.max_x-a.min_x),e=c*(a.max_y-a.min_y);a=c*(a.max_z-a.min_z);return.5*Math.sqrt(b*b+e*e+a*a)};a.Sz=function(a,b,c){b?(a=a.A,x.copy(a.$e.V,c)):(a=a.A,b=a.Lk,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,u.Mc(c,a.D,c));return c};
a.Bg=function(a,b,c,e){var f=m(a,N),d=D;d[0]=b;d[1]=c;d[2]=e;u.Mc(d,f,d);p(a,d)};a.ZH=function(a,b){var c=m(a,N),e=u.Gc(b,u.identity(E));u.multiply(c,e,e);M(a,e)};a.W=z;a.distance=function(a,b){var c=u.Wb(a.A.D,D),e=u.Wb(b.A.D,l);return x.dist(c,e)};a.Gv=function(a,b){var c=u.Wb(a.A.D,D);return x.dist(c,b)}};b4w.module.__constraints=function(a,t){function p(a){return{type:a,$a:null,target:null,Qs:!1,Vd:null,Ma:null,Oj:null,axes:null,uS:null,We:null,cT:!1,influence:0,om:"",WR:0,VL:0,XL:0,YL:0,UL:0,yF:0,dist_max:0,IA:!1,vv:0,cD:!1,Cw:0,distance:0,hor_units:"",vert_units:""}}function c(a,c){a.Cc&&a.Cc.$a&&b(a.Cc.$a,a);if(c.$a){var e=c.$a;-1==e.af.indexOf(a)?e.af.push(a):J.K("Descendant object override is forbidden")}a.Cc=c}function b(a,b){var c=a.af.indexOf(b);-1!=c?a.af.splice(c,1):J.K("No descendant object")}
function k(a,b,g,d,k,h){var f=p(3);f.$a=b;f.uS=new Float32Array(g);f.We=new Float32Array(d);f.cT=k;f.Vd=new Float32Array(a.A.D);f.influence=h;c(a,f);e(a,f,0)}function g(a,b,g,d,k,h){var f=p(8);f.$a=b;f.Ma=u.create();u.Ad(g,f.Ma);f.axes=new Float32Array(d);f.influence=h;f.Qs=k;f.Vd=new Float32Array(a.A.D);c(a,f);e(a,f,0)}function M(a,b,g,d,k){var f=p(9);f.$a=b;b=u.Eb(a.A.D,L);f.Oj=J.Uv(b,new Float32Array(3));f.axes=new Float32Array(g);f.influence=k;f.Qs=d;f.Vd=new Float32Array(a.A.D);c(a,f);e(a,f,
0)}function m(a,b,g){var d=p(11);d.$a=b;d.Ma=u.create();u.copy(a.A.D,d.Ma);d.Vd=new Float32Array(a.A.D);d.influence=g;c(a,d);e(a,d,0)}function z(a,b,g){var d=p(13);d.$a=b;d.Ma=new Float32Array(g);c(a,d);e(a,d,0)}function C(a,b,g,d){var f=p(14);f.$a=b;f.om=g;f.Ma=new Float32Array(d);c(a,f);e(a,f,0)}function h(a,b,g){var d=p(17);d.$a=b;d.Vd=new Float32Array(a.A.D);d.Ma=u.create();J.Of(g.right)?(d.IA=!1,d.vv=g.right):J.Of(g.left)?(d.IA=!0,d.vv=g.left):(d.IA=!0,d.vv=0);J.Of(g.bottom)?(d.cD=!1,d.Cw=g.bottom):
J.Of(g.top)?(d.cD=!0,d.Cw=g.top):(d.cD=!0,d.Cw=0);J.Of(g.distance)?d.distance=g.distance:d.distance=0;b=J.Of(g.rotation)?new Float32Array(g.rotation):x.create();u.Gc(b,d.Ma);J.Of(g.hor_units)?d.hor_units=g.hor_units:d.hor_units="widths";J.Of(g.vert_units)?d.vert_units=g.vert_units:d.vert_units="heights";c(a,d);e(a,d,0)}function e(a,b,c){switch(b.type){case 1:u.multiply(b.$a.A.D,b.Ma,a.A.D);break;case 12:var d=u.X(a.A.D),e=u.la(a.A.D),f=u.Wb(b.Ma,N),g=b.$a.A.D;c=u.la(b.$a.A.D);x.multiply(x.invert(b.vH,
b.vH),e,e);x.multiply(c,e,e);u.Mc(f,g,d);x.copy(c,b.vH);d=u.la(a.A.D);e=u.la(b.$a.A.D);g=u.Eb(b.Ma,L);e=x.multiply(e,g,U);e=I.TF(e,l);g=I.TF(d,v);J.s3(d,a.A.We,J.no(g[0],e[0]+b.XL,e[0]+b.VL),J.no(g[1],e[1]+b.UL,e[1]+b.YL),d);break;case 15:var d=u.X(a.A.D),e=u.la(a.A.D),g=b.$a.A.D,k=u.X(g),h=b.WR,m=N,n=x.copy(e,U),f=u.Wb(b.Ma,E);u.Mc(f,g,m);J.AC(m,d,c,h,d);J.HB(d,n,k,J.qc);J.VR(n,e,c,.16*h,e);break;case 2:e=u.la(a.A.D);g=y;f=u.Wb(b.Ma,E);k=u.fe(b.Ma);d=u.Eb(b.Ma,U);O.SF(b.$a,b.om,g);u.multiply(b.$a.A.D,
g,g);e[0]=g[4];e[1]=g[5];e[2]=g[6];e[3]=g[7];x.multiply(e,d,e);u.Ve(k*g[3],a.A.D);d=u.X(a.A.D);u.Mc(f,g,d);break;case 3:d=u.X(a.A.D);e=u.la(a.A.D);f=u.X(b.$a.A.D);g=b.influence;b.cT?(k=u.Eb(b.$a.A.D,U),k=D.transformQuat(J.ic,k,N)):k=J.ic;J.HB(d,e,f,b.uS);f=D.subtract(f,d,E);D.normalize(f,f);J.S2(e,b.We,k,f);f=u.Eb(b.Vd,U);x.slerp(f,e,g,e);u.Ad(d,b.Vd);break;case 5:d=u.X(a.A.D);e=u.la(a.A.D);f=u.X(b.$a.A.D);J.HB(d,e,f,J.qc);e=D.dist(d,f);if(e=e>b.dist_max?e-b.dist_max:e<b.yF?e-b.yF:0)D.sub(f,d,N),
D.normalize(N,N),D.scale(N,e,N),D.add(d,N,d);break;case 7:g=b.$a.A.D;d=u.X(a.A.D);f=u.Wb(b.Ma,N);u.Mc(f,g,d);u.Gc(u.la(a.A.D),b.Vd);break;case 8:k=u.X(b.$a.A.D);d=u.X(a.A.D);e=b.axes;c=u.Wb(b.Ma,N);f=D.set(0,0,0,E);b.Qs&&D.add(f,c,f);g=b.influence;e[0]&&(d[0]=(1-g)*c[0]+g*(J.sign(e[0])*k[0]+f[0]));e[1]&&(d[1]=(1-g)*c[1]+g*(J.sign(e[1])*k[1]+f[1]));e[2]&&(d[2]=(1-g)*c[2]+g*(J.sign(e[2])*k[2]+f[2]));u.Gc(u.la(a.A.D),b.Vd);break;case 9:e=b.axes;c=u.Eb(b.$a.A.D,U);d=J.T2(c,b.Oj,E);J.hM(d,b.Oj);e[0]?(b.Qs&&
(g=D.set(b.Oj[0],0,0,N),J.YH(d,g,d)),d[0]*=J.sign(e[0])):d[0]=b.Oj[0];e[1]?(b.Qs&&(g=D.set(0,b.Oj[1],0,N),J.YH(d,g,d)),d[1]*=J.sign(e[1])):d[1]=b.Oj[1];e[2]?(b.Qs&&(g=D.set(0,0,b.Oj[2],N),J.YH(d,g,d)),d[2]*=J.sign(e[2])):d[2]=b.Oj[2];J.hM(d,b.Oj);g=b.influence;d=J.bl(d,U);f=u.Eb(b.Vd,L);x.slerp(f,d,g,u.la(a.A.D));u.Ad(u.X(a.A.D),b.Vd);break;case 11:g=b.influence;k=u.Wb(b.$a.A.D,N);c=u.Eb(b.$a.A.D,U);d=u.Wb(b.Ma,E);f=u.Eb(b.Ma,L);J.iy(d,k,g,u.X(a.A.D));x.slerp(f,c,g,u.la(a.A.D));u.Ad(u.X(a.A.D),b.Vd);
break;case 16:e=u.la(a.A.D);g=b.$a.A.D;c=u.la(b.$a.A.D);f=u.Wb(b.Ma,E);d=u.Eb(b.Ma,U);x.multiply(c,d,e);d=u.X(a.A.D);u.Mc(f,g,d);break;case 13:u.multiply(b.$a.A.D,b.Ma,a.A.D);break;case 14:d=b.Ma;g=y;O.SF(b.$a,b.om,g);u.multiply(b.$a.A.D,g,g);u.multiply(g,d,a.A.D);break;case 17:e=b.$a,g=I.V_(e),d=u.X(a.A.D),c=I.Iz(g,"LEFT"),h=I.Iz(g,"RIGHT"),f=I.Iz(g,"TOP"),k=I.Iz(g,"BOTTOM"),m="heights"==b.hor_units?f-k:h-c,d[0]=b.IA?c+m*b.vv:h-m*b.vv,c="heights"==b.vert_units?f-k:h-c,d[1]=b.cD?f-c*b.Cw:k+c*b.Cw,
I.f1(g)?d[2]=-b.distance:(d[2]=-1,D.normalize(d,d),D.scale(d,b.distance/Math.abs(d[2]),d)),u.Ud(d,e.A.D,d),g=u.X(e.A.D),D.add(g,d,d),f=u.la(a.A.D),e=u.la(e.A.D),d=u.Eb(b.Ma,L),x.multiply(e,d,f)}"CAMERA"==a.A.type&&a.A.xb!=I.He&&(d=a.A.We,12==b.type&&(c=u.la(b.$a.A.D),d=D.transformQuat(d,c,H)),I.HS(a),I.Ey(a,d))}function A(a,b){switch(b.type){case 18:var c=b.target.A.D,d=y;u.invert(a.A.D,d);u.multiply(d,c,d);O.E3(a,b.om,d)}a.jH=!0}function q(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(!q(d.af,b)||
d.name==b.name)return!1}return!0}var P=t("__physics"),O=t("__armature"),I=t("__camera"),u=t("__tsr"),J=t("__util"),x=t("__quat"),D=t("__vec3");a.P6=1;a.O6=2;a.U6=3;a.L6=5;a.Q6=7;a.K6=8;a.N6=12;a.I6=13;a.J6=14;a.M6=15;a.S6=16;a.T6=17;a.F6=18;var l=new Float32Array(2),v=new Float32Array(2),N=new Float32Array(3),E=new Float32Array(3),U=new Float32Array(4),L=new Float32Array(4),y=u.create(),H=new Float32Array(3);a.SK=function(a,b,g,d,k){var f=p(1);f.$a=b;f.Ma=u.create();d=d?d:x.create();u.Ad(g,f.Ma);
u.Ve(k,f.Ma);u.Gc(d,f.Ma);f.Vd=new Float32Array(a.A.D);c(a,f);e(a,f,0)};a.nW=function(a,b,g,d,k,h){var f=p(2);f.$a=b;f.om=g;f.Vd=new Float32Array(a.A.D);f.Ma=u.create();u.Ad(new Float32Array(d),f.Ma);u.Gc(new Float32Array(k),f.Ma);u.Ve(h,f.Ma);c(a,f);e(a,f,0)};a.lW=function(a,b,g,d,k,h,l,m){var f=p(12),n=u.la(a.A.D),r=u.la(b.A.D);d?(x.copy(d,n),x.multiply(r,n,n)):d=x.create();f.$a=b;f.Ma=u.create();u.Ad(g,f.Ma);u.Gc(d,f.Ma);f.vH=new Float32Array(r);f.VL=J.Jh(k);f.XL=J.Jh(h);f.YL=J.Fi(l,-Math.PI,Math.PI);
f.UL=J.Fi(m,-Math.PI,Math.PI);f.Vd=new Float32Array(a.A.D);c(a,f);e(a,f,0)};a.jW=function(a,b,g,d){var f=p(15);f.$a=b;f.WR=d;f.Vd=new Float32Array(a.A.D);f.Ma=u.create();u.Ad(new Float32Array(g),f.Ma);c(a,f);e(a,f,0)};a.qW=function(a,b,g,d){var f=p(16);f.$a=b;f.Vd=new Float32Array(a.A.D);f.Ma=u.create();u.Ad(new Float32Array(g),f.Ma);u.Gc(new Float32Array(d),f.Ma);u.Ve(1,f.Ma);c(a,f);e(a,f,0)};a.tda=b;a.rW=k;a.fW=function(a,b,g,d){var f=p(5);f.$a=b;f.yF=g;f.dist_max=d;f.Vd=new Float32Array(a.A.D);
c(a,f);e(a,f,0)};a.pW=function(a,b,g){var d=p(7);d.$a=b;d.Ma=u.create();d.Vd=new Float32Array(a.A.D);u.Ad(new Float32Array(g),d.Ma);c(a,d);e(a,d,0)};a.bW=g;a.cW=M;a.dW=m;a.d9=z;a.e9=C;a.TK=h;a.C5=function(a,b){a.Cc&&e(a,a.Cc,b)};a.v5=function(a,b){var c=a.A.eh[b];c.Cc&&A(a,c.Cc)};a.uX=function(a){return a.Cc?!0:!1};a.remove=function(a,c){a.Cc.$a&&b(a.Cc.$a,a);c&&u.copy(a.Cc.Vd,a.A.D);a.Cc=null};a.Jba=function(a){return a.Cc?a.Cc.type:null};a.ai=function(a){a=a.Cc;return!a||13!=a.type&&14!=a.type?
!1:!0};a.Hz=function(a){if((a=a.Cc)&&13==a.type)return a.$a.A.D;if(a&&14==a.type){var b=y;O.SF(a.$a,a.om,b);u.multiply(a.$a.A.D,b,b);return b}return null};a.Yh=function(a){a=a.Cc;return!a||13!=a.type&&14!=a.type?null:a.Ma};a.N2=function(a,b){for(var c=b.A,d=0;d<a.constraints.length;d++){var e=a.constraints[d],f=e.type;if(e.target){var l=e.target.Oa;if("COPY_LOCATION"==f){var f=new Float32Array(u.X(b.A.D)),r=new Float32Array(e.axes);g(b,l,f,r,e.use_offset,e.influence)}else if("COPY_ROTATION"==f)r=
new Float32Array(e.axes),M(b,l,r,e.use_offset,e.influence);else if("COPY_TRANSFORMS"==f)m(b,l,e.influence);else if("TRACK_TO"==f){f=e.track_axis;if("TRACK_Y"==f)var n=J.Ee;else"TRACK_NEGATIVE_Y"==f?n=J.Eh:"TRACK_X"==f?n=J.Af:"TRACK_NEGATIVE_X"==f?n=J.it:"TRACK_Z"==f?n=J.ic:"TRACK_NEGATIVE_Z"==f&&(n=J.qc);f=e.up_axis;if("UP_X"==f)var q=J.Af;else"UP_Y"==f?q=J.Ee:"UP_Z"==f&&(q=J.ic);k(b,l,n,q,e.use_target_z,e.influence)}}}if(b.parent){!b.fn&&b.Sd.Kw&&b.parent.Sd.Kw&&(b.Ps=!1);e=!1;for(d=0;d<b.T.length;d++)if(b.T[d].vb.Pc){e=
!0;break}if(e&&P.B0(b))d=b.fn?u.copy(c.D,u.create()):c.D,u.multiply(b.parent.A.D,d,c.D);else if(b.fn||!b.Jv)if(d=u.copy(c.D,u.create()),b.yD&&"CAMERA"==b.parent.type){d={distance:b.yD.distance,rotation:u.la(d)};switch(b.yD.XV){case "TOP_LEFT":d.top=0;d.left=0;break;case "TOP":d.top=0;d.left=.5;break;case "TOP_RIGHT":d.top=0;d.right=0;break;case "LEFT":d.top=.5;d.left=0;break;case "CENTER":d.top=.5;d.left=.5;break;case "RIGHT":d.top=.5;d.right=0;break;case "BOTTOM_LEFT":d.bottom=0;d.left=0;break;case "BOTTOM":d.bottom=
0;d.left=.5;break;case "BOTTOM_RIGHT":d.bottom=0,d.right=0}h(b,b.parent,d)}else z(b,b.parent,d);else d=u.copy(c.D,u.create()),C(b,b.parent,b.Jv,d)}if("ARMATURE"==b.type)for(c=a.pose.bones,d=0;d<c.length;d++)if(e=c[d],n=e.constraints)for(q=0;q<n.length;q++)if(f=n[q],"COPY_TRANSFORMS"==f.type&&!f.subtarget&&!f.mute){var l=f.target.Oa,f=b,r=l,v=J.gE,y=J.Fx,l=p(18);l.om=e.name;l.target=r;l.Ma=u.create();u.Ad(new Float32Array(v),l.Ma);u.Gc(new Float32Array(y),l.Ma);u.Ve(1,l.Ma);for(var r=f,v=l,y=v.target,
x=v.om,H=r.A.eh[x],t=y.VE,D=0;D<t;D++){var E=t[D];if(E[0]==r&&E[1]==x){t.splice(D,1);break}}y.VE.push([r,x]);H.Cc=v;A(f,l)}};a.Li=function(a,b){return q(a.af,b)};a.Mi=function(a,b){return a.name!=b.name}};b4w.module.__navmesh=function(a,t){function p(a,c){function d(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.Kn,f=c.Kn,g=[],k=0;k<e.length;k++)0<=b(f,e[k])&&g.push(e[k]);if(2>g.length)return[];0<=b(g,e[0])&&0<=b(g,e[e.length-1])&&d(e);0<=b(g,f[0])&&0<=b(g,f[f.length-1])&&d(f);g=[];for(k=0;k<e.length;k++)0<=b(f,e[k])&&g.push(e[k]);return g}function c(a){function b(a){for(var c=a.ki,d=0;d<c.length;d++){var e=c[d];void 0==e.island&&(e.island=a.island,b(e))}}a=a.I2;for(var c=[],d=0,e=0;e<a.length;e++){var f=
a[e];void 0==f.island&&(f.island=d++,b(f));c[f.island]||(c[f.island]=[]);c[f.island].push(a[e])}return c}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function k(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var d={},e=a.$s,f=0;f<e.length;f++)e[f][0]=parseFloat(e[f][0].toFixed(2)),e[f][1]=parseFloat(e[f][1].toFixed(2)),e[f][2]=parseFloat(e[f][2].toFixed(2));d.$s=a.$s;a=c(a);d.GG=[];for(f=0;f<a.length;f++){for(var e=
[],g=a[f],k=0;k<g.length;k++){for(var h=[],l=g[k],m=0;m<l.ki.length;m++)h.push(b(g,l.ki[m]));for(var n=[],m=0;m<l.ki.length;m++)n.push(p(l,l.ki[m]));l.Kd[0]=parseFloat(l.Kd[0].toFixed(2));l.Kd[1]=parseFloat(l.Kd[1].toFixed(2));l.Kd[2]=parseFloat(l.Kd[2].toFixed(2));e.push({id:b(g,l),ki:h,Kn:l.Kn,Kd:l.Kd,yd:l.yd,J2:n,IF:0,Yu:0,ec:0,XX:1,qJ:!1,closed:!1,parent:null})}d.GG.push(e)}return d}function g(a,b,c,d,e){function f(a,b){J.subtract(a,b,D);return J.dot(D,D)}function g(a,b){for(var c=[],d=0;d<b.ki.length;d++)c.push(a[b.ki[d]]);
return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.IF=0;c.Yu=0;c.ec=0;c.XX=1;c.qJ=!1;c.closed=!1;c.parent=null}})(a);var k=O.MW(function(a){return a.IF});for(O.rL(k,b);0<k.content.length;){var h=O.NW(k);if(h===c){a=h;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}h.closed=!0;for(var l=g(a,h),m=0,n=l.length;m<n;m++){var r=l[m];if(!r.closed){var q=h.Yu+J.dist(r.Kd,h.Kd),p=r.qJ;if(!p||q<r.Yu)r.qJ=!0,r.parent=h,r.ec=r.ec||f(r.Kd,e)+f(r.Kd,d),r.Yu=q,r.IF=r.Yu+r.ec,p?O.OW(k,
r):O.rL(k,r)}}}return[]}function M(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function m(a,b,c,d){b=J.subtract(b,a,D);a=J.subtract(c,a,l);a=J.cross(b,a,D);return u.sign(J.dot(d,a))}function z(a,b){J.subtract(a,b,D);return 1E-5>J.dot(D,D)}function C(a,b,c){var d=J.subtract(b.right,b.left,D),e=c.yd,f=b.yd;c=Math.acos(J.dot(e,f));e=u.sign(J.dot(d,J.cross(e,f,l)));c*=-e;e=I.identity(y);I.translate(e,b.left,e);I.rotate(e,c,d,e);I.translate(e,J.scale(b.left,-1,l),e);I.multiply(a,e,a)}function h(a,b,c,
d,e,f,g,k,h){for(var l=I.identity(U),m=e;m<c;m++)if(a[m].dP&&(m>e||!m)){var n,r=b,q=d;n=a[m].left;var p=a[m].right,u=f,y=l,B=J.create(),z=J.transformMat4(n,y,v);z[3]=1;y=J.transformMat4(p,y,D);y=J.subtract(y,z,N);r=J.subtract(q,r,D);u=J.cross(u,r,E);.01>Math.abs(J.dot(u,y))?q=.5:(J.normalize(u,u),u[3]=-J.dot(u,q),q=-x.dot(u,z)/x.dot(u,y));p=J.subtract(p,n,D);n=J.scaleAndAdd(n,p,q,B);M(g,n);k&&M(h,a[m].yd);m&&C(l,a[m],a[m-1])}}function e(a,b){function c(b,c){A=B=y=c;q=l=k=b;J.copy(b,p);J.copy(b,v);
J.copy(a[y].yd,u)}var e=[],g=[],k,l,q,p,v,u,y=0,B=0,A=0;k=a[0].right;l=a[0].left;q=a[0].right;p=J.copy(l,H);v=J.copy(q,n);u=J.copy(a[0].yd,d);M(e,k);b&&M(g,a[0].yd);for(var x=I.identity(L),t=1;t<a.length;t++){var Z=a[t].left,D=a[t].right,G=J.transformMat4(Z,x,f),E=J.transformMat4(D,x,W);a[t].dP&&C(x,a[t],a[t-1]);if(0>=m(k,v,E,u)){var O=z(k,q);if(O||0<m(k,p,E,u))q=D,J.copy(E,v),A=t;else{(Z=z(p,k))||h(a,p,B,k,y,u,e,b,g);x=I.identity(x);c(l,B);t=y;Z||(M(e,k),b&&M(g,a[t].yd));continue}}0<=m(k,p,G,u)&&
((O=z(k,l))||0>m(k,v,G,u)?(l=Z,J.copy(G,p),B=t):((Z=z(v,k))||h(a,v,A,k,y,u,e,b,g),x=I.identity(x),c(q,A),t=y,Z||(M(e,k),b&&M(g,a[t].yd))))}x=a.length-1;t=a[x].left;(Z=z(k,t))||h(a,p,x,k,y,u,e,b,g);Z&&y||M(e,t);return b?(M(g,a[x].yd),{positions:new Float32Array(e),normals:new Float32Array(g)}):{positions:new Float32Array(e),normals:null}}function A(a,b,c,d,e){for(var f=null,g=Number.MAX_VALUE,k=0;k<a.length;k++){var h=a[k],l=e(c,h.Kd,h.Kn,b,g);l<g&&(f=h,g=l)}return 0<d&&g>d?null:f}function q(a,b,c,
d,e){a.push({left:b,right:c,dP:d,yd:e})}var P=t("__geometry"),O=t("__math"),I=t("__mat4"),u=t("__util"),J=t("__vec3"),x=t("__vec4"),D=J.create(),l=J.create(),v=x.create(),N=x.create(),E=x.create(),U=I.create(),L=I.create(),y=I.create(),H=J.create(),n=J.create(),f=J.create(),W=J.create(),d=J.create();a.f2=function(a){var b=P.hG(a.Uc,P.wq),c=a.kf;a=[];for(var d=0;d<c.length;d+=3)a.push({Ga:new Uint32Array([c[d],c[d+1],c[d+2]]),Kd:new Float32Array(3),yd:new Float32Array(3)});c=[];for(d=0;d<b.length;d+=
3){var e=new Float32Array(3);e[0]=b[d];e[1]=b[d+1];e[2]=b[d+2];c.push(e)}for(b=0;b<a.length;b++)d=a[b],J.add(c[d.Ga[0]],c[d.Ga[1]],D),J.add(D,c[d.Ga[2]],D),J.scale(D,1/3,d.Kd);for(b=0;b<a.length;b++){var d=a[b],e=J.subtract(c[d.Ga[1]],c[d.Ga[0]],D),f=J.subtract(c[d.Ga[2]],c[d.Ga[0]],l),e=J.cross(e,f,D);J.normalize(e,e);J.copy(e,d.yd)}for(var g={},b=[],d=[],h,m,n=Math.pow(10,4),e=0,f=c.length;e<f;e++)h=c[e],m=Math.round(h[0]*n)+"_"+Math.round(h[1]*n)+"_"+Math.round(h[2]*n),void 0===g[m]?(g[m]=e,b.push(h),
d[e]=b.length-1):d[e]=d[g[m]];g=[];e=0;for(f=a.length;e<f;e++)for(h=a[e],h.Ga[0]=d[h.Ga[0]],h.Ga[1]=d[h.Ga[1]],h.Ga[2]=d[h.Ga[2]],h=[h.Ga[0],h.Ga[1],h.Ga[2]],m=0;3>m;m++)if(h[m]==h[(m+1)%3]){g.push(e);break}for(e=g.length-1;0<=e;e--)a.splice(g[e],1);for(e=c.length=0;e<b.length;e++)c.push(b[e]);d=[];for(b=e=0;b<a.length;b++)f=a[b],d.push({id:e++,Kn:f.Ga,Kd:f.Kd,yd:f.yd,ki:[]});a={I2:d,$s:c};c={};for(b=0;b<d.length;b++)for(e=0;3>e;e++)f=d[b].Kn[e],g=d[b].Kn[(e+1)%3],f=f>g?g+"-"+f:f+"-"+g,f in c||(c[f]=
[]),c[f].push(d[b]);d=Object.keys(c);b=0;for(g=d.length;b<g;b++)for(f=d[b],e=0;e<c[f].length;e++)for(h=e+1;h<c[f].length;h++)c[f][e].ki.push(c[f][h]),c[f][h].ki.push(c[f][e]);return k(a)};a.TP=function(a,b,c){for(var d=null,e=Number.MAX_VALUE,f=a.GG,g=0;g<f.length;g++)for(var k=0;k<f[g].length;k++){var h=f[g][k];J.subtract(h.Kd,b,D);h=c(b,h.Kd,h.Kn,a.$s,e);h<e&&(d=g,e=h)}return d};a.g1=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(c[b[e]]);b=!1;c=-1;for(var e=d.length,f=e-1;++c<e;f=c)(d[c][1]<=
a[1]&&a[1]<d[f][1]||d[f][1]<=a[1]&&a[1]<d[c][1])&&a[0]<(d[f][0]-d[c][0])*(a[1]-d[c][1])/(d[f][1]-d[c][1])+d[c][0]&&(b=!b);return b?!0:!1};a.SP=function(a,b,c,d){var f;f=a.GG[d.island];var k=a.$s,h=A(f,k,b,d.allowed_distance,d.distance_to_closest);f=h?(k=A(f,k,c,d.allowed_distance,d.distance_to_farthest))?g(f,h,k,b,c):null:null;if(f&&f.length)if(d.do_not_pull_string)if(c=f,d.return_normals){b=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Kd,3*f);c={positions:b,normals:null}}else{b=
new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Kd,3*f),a.set(c[f].yd,3*f);c={positions:b,normals:a}}else{a=a.$s;d=d.return_normals;h=[];q(h,b,b,!1,f[0]&&f[0].yd||u.ic);for(b=0;b<f.length;b++){var l=f[b];if(k=f[b+1]){var m=.999>Math.abs(J.dot(l.yd,k.yd));a:{for(var n=0;n<l.ki.length;n++)if(l.ki[n]===k.id){l=l.J2[n];break a}l=void 0}q(h,a[l[0]],a[l[1]],m,k.yd)}}q(h,c,c,!1,h[h.length-1].yd);c=e(h,d)}else c=null;return c}};b4w.module.__reformer=function(a,t){function p(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},b("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node RGB Curves",a,
"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",b("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,b("node material",a,"alpha"));"darkness"in
a||(a.darkness=1,b("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,b("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,b("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,b("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,b("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",b("node material",a,"specular_shader"));
"specular_ior"in a||(a.specular_ior=4,b("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,b("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,b("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,b("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,b("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,b("node material",
a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",b("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,b("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,b("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,b("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,b("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=
a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",b("node "+a.type,a,"convert_from")),"convert_to"in a||(a.convert_to="WORLD",b("node "+
a.type,a,"convert_to")),"vector_type"in a||(a.vector_type="POINT",b("node "+a.type,a,"vector_type"))}}function c(a){if(a=a.nla_tracks)for(var c=0;c<a.length;c++)for(var e=a[c],g=0;g<e.strips.length;g++){var f=e.strips[g];"action"in f||(f.action=null,b("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,b("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,b("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,b("strip",f,"repeat"));
"use_reverse"in f||(f.use_reverse=!1,b("strip",f,"use_reverse"));"scale"in f||(f.scale=1,b("strip",f,"scale"))}}function b(a,b,c){c=c+">>"+a;c in v||(v[c]={JI:[],KQ:"undefined",type:a});v[c].JI.push(b.name)}function k(a,b,c){c=c+">>"+a;c in v||(v[c]={JI:[],KQ:"deprecated",type:a});v[c].JI.push(b.name)}function g(a){A.warn(a)}function M(a,b){b||(b=a.name+"_COPY");var c=a.materials,e=a.submeshes;a.materials=null;a.submeshes=null;var f=O.Y(a);a.materials=c;a.submeshes=e;f.name=b;f.materials=a.materials.slice(0);
f.submeshes=[];for(c=0;c<e.length;c++){var g=O.nu(e[c]);f.submeshes.push(g)}return f}function m(a,b,c){if(1<c){for(var e=a.length/c,f=b.length/c,g=new Float32Array(a.length+b.length),d=0,k=0;k<c;k++)g.set(a.subarray(e*k,e*(k+1)),d),d+=e,g.set(b.subarray(f*k,f*(k+1)),d),d+=f;return g}return O.lN(a,b)}var z=t("__boundings"),C=t("__config"),h=t("__curve"),e=t("__mat4"),A=t("__print"),q=t("__quat"),P=t("__tbn"),O=t("__util"),I=t("__vec3"),u=t("__mat3"),J=t("__logic_nodes"),x=t("__animation"),D=C.L,l=
[5,4],v={},N=u.create(),E=P.create(),U=q.create();a.PL=function(a){return-1!=O.hT(a,l)};a.sX=function(a){v={};var e=a.worlds;if(0==e.length){A.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var h={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",
use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};e.push(h)}for(var l=0;l<e.length;l++){h=e[l];"use_sky_blend"in h||(b("world",h,"use_sky_blend"),h.use_sky_blend=!1);"use_sky_paper"in h||(b("world",h,"use_sky_paper"),h.use_sky_paper=!1);"use_sky_real"in h||(b("world",h,"use_sky_real"),h.use_sky_real=!1);"b4w_sky_settings"in h&&"rayleigh_brightness"in h.b4w_sky_settings||(b("world",h,"rayleigh_brightness"),h.b4w_sky_settings=
{render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in h||(b("world",h,"fog_settings"),h.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in h&&(h.fog_settings.use_custom_color=
!0,h.fog_settings.color=h.b4w_fog_color),"b4w_fog_density"in h&&0<h.b4w_fog_density&&(h.fog_settings.depth=1/h.b4w_fog_density));"render_sky"in h.b4w_sky_settings||(b("world",h,"render_sky"),h.b4w_sky_settings.render_sky=!1);for(var f=h.texture_slots,m=0;m<f.length;m++){var d=f[m];"blend_type"in d||(d.blend_type="MIX",b("world_texture_slot",d,"blend_type"));"use_map_blend"in d||(d.use_map_blend=!1,b("world_texture_slot",d,"use_map_blend"));"use_map_horizon"in d||(d.use_map_horizon=!0,b("world_texture_slot",
d,"use_map_horizon"));"use_map_zenith_up"in d||(d.use_map_zenith_up=!1,b("world_texture_slot",d,"use_map_zenith_up"));"use_rgb_to_intensity"in d||(d.use_rgb_to_intensity=!1,b("world_texture_slot",d,"use_rgb_to_intensity"));"invert"in d||(d.invert=!1,b("world_texture_slot",d,"invert"));"color"in d||(d.color=[1,0,1],b("world_texture_slot",d,"color"));"blend_factor"in d||(d.blend_factor=0,b("world_texture_slot",d,"blend_factor"));"horizon_factor"in d||(d.horizon_factor=1,b("world_texture_slot",d,"horizon_factor"));
"zenith_up_factor"in d||(d.zenith_up_factor=0,b("world_texture_slot",d,"zenith_up_factor"));"zenith_down_factor"in d||(d.zenith_down_factor=0,b("world_texture_slot",d,"zenith_down_factor"));"default_value"in d||(d.default_value=1,b("world_texture_slot",d,"default_value"))}"b4w_use_default_animation"in h||(b("world",h,"b4w_use_default_animation"),h.b4w_use_default_animation=!1);"b4w_anim_behavior"in h||(b("world",h,"b4w_anim_behavior"),h.b4w_anim_behavior="CYCLIC")}m=a.scenes;for(l=0;l<m.length;l++)f=
m[l],d=f.world,"timeline_markers"in f||(f.timeline_markers=null,b("scene",f,"timeline_markers")),"boolean"==typeof f.b4w_enable_physics&&(f.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in f||(f.b4w_reflection_quality="MEDIUM",b("scene",f,"b4w_reflection_quality")),"b4w_use_nla"in f||(f.b4w_use_nla=!1,b("scene",f,"b4w_use_nla")),"fps"in f||(f.fps=24,b("scene",f,"fps")),"b4w_nla_cyclic"in f||(f.b4w_nla_cyclic=!1,b("scene",f,"b4w_nla_cyclic")),"b4w_logic_nodes"in f||(f.b4w_logic_nodes=[],b("scene",
f,"b4w_logic_nodes")),"b4w_detect_collisions"in f&&(k("scene",f,"b4w_detect_collisions"),delete f.b4w_detect_collisions),"audio_doppler_speed"in f||(f.audio_doppler_speed=343.3),"audio_doppler_factor"in f||(f.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in f||(f.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},b("scene",f,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in f||(f.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in
f||(f.b4w_enable_bloom=!1,b("scene",f,"b4w_enable_bloom")),"b4w_enable_motion_blur"in f||(f.b4w_enable_motion_blur=!1,b("scene",f,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in f||(f.b4w_enable_color_correction=!1,b("scene",f,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in f||(f.b4w_antialiasing_quality="MEDIUM",b("scene",f,"b4w_antialiasing_quality")),"b4w_tags"in f||(f.b4w_tags={title:"",description:""},b("scene",f,"b4w_tags")),"b4w_lod_smooth_type"in f||(f.b4w_lod_smooth_type=
"OFF",b("scene",f,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in f||(f.b4w_lod_hyst_interval=0,b("scene",f,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in f||(f.b4w_enable_object_selection="AUTO",b("scene",f,"b4w_enable_object_selection")),"b4w_enable_outlining"in f||(f.b4w_enable_outlining="AUTO",b("scene",f,"b4w_enable_outlining")),"b4w_enable_glow_materials"in f||(f.b4w_enable_glow_materials="AUTO",b("scene",f,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in f||(f.b4w_enable_anchors_visibility=
"AUTO",b("scene",f,"b4w_enable_anchors_visibility")),"b4w_outline_color"in f||(f.b4w_outline_color=[1,1,1],b("scene",f,"b4w_outline_color")),"b4w_outline_factor"in f||(f.b4w_outline_factor="b4w_glow_factor"in f?f.b4w_glow_factor:1,b("scene",f,"b4w_outline_factor")),"b4w_shadow_settings"in f||(b("scene",f,"b4w_shadow_settings"),e=d.b4w_shadow_settings,f.b4w_shadow_settings=e?e:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,
first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),e=f.b4w_shadow_settings,"csm_resolution"in e||(b("scene",f,"b4w_shadow_settings.csm_resolution"),e.csm_resolution=2048),"blur_samples"in e||(b("scene",f,"b4w_shadow_settings.blur_samples"),e.blur_samples="16x"),"soft_shadows"in e||(b("scene",f,"b4w_shadow_settings.soft_shadows"),e.soft_shadows=!0),"self_shadow_polygon_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_polygon_offset"),
e.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_normal_offset"),e.self_shadow_normal_offset=.01),"b4w_enable_csm"in e||(b("scene",f,"b4w_shadow_settings.b4w_enable_csm"),e.b4w_enable_csm=!1),"csm_num"in e||(b("scene",f,"b4w_shadow_settings.csm_num"),e.csm_num=1),"csm_first_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_first_cascade_border"),e.csm_first_cascade_border=10),"first_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.first_cascade_blur_radius"),
e.first_cascade_blur_radius=3),"csm_last_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_last_cascade_border"),e.csm_last_cascade_border=100),"last_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.last_cascade_blur_radius"),e.last_cascade_blur_radius=1.5),"fade_last_cascade"in e||(b("scene",f,"b4w_shadow_settings.fade_last_cascade"),e.fade_last_cascade=!0),"blend_between_cascades"in e||(b("scene",f,"b4w_shadow_settings.blend_between_cascades"),e.blend_between_cascades=!0),"b4w_ssao_settings"in
f||(b("scene",f,"b4w_ssao_settings"),e=d.b4w_ssao_settings,f.b4w_ssao_settings=e?e:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),e=f.b4w_ssao_settings,"dist_factor"in e||(b("scene",f,"b4w_ssao_settings.dist_factor"),e.dist_factor=0),"samples"in e||(b("scene",f,"b4w_ssao_settings.samples"),e.samples=16),"hemisphere"in e||(b("scene",f,"b4w_ssao_settings.hemisphere"),e.hemisphere=!1),"blur_depth"in e||(b("scene",f,"b4w_ssao_settings.blur_depth"),e.blur_depth=!1),"blur_discard_value"in
e||(b("scene",f,"b4w_ssao_settings.blur_discard_value"),e.blur_discard_value=1),"b4w_bloom_settings"in f||(b("scene",f,"b4w_bloom_settings"),e=d.b4w_bloom_settings,f.b4w_bloom_settings=e?e:{key:.2,blur:4,edge_lum:1}),"key"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.key"),f.b4w_bloom_settings.key=.2),"blur"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.blur"),f.b4w_bloom_settings.blur=4),"edge_lum"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.edge_lum"),f.b4w_bloom_settings.edge_lum=
1),"adaptive"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.adaptive"),f.b4w_bloom_settings.adaptive=!0),"average_luminance"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.average_luminance"),f.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in f||(b("scene",f,"b4w_motion_blur_settings"),e=d.b4w_motion_blur_settings,f.b4w_motion_blur_settings=e?e:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in f.b4w_motion_blur_settings||(b("scene",
f,"b4w_motion_blur_settings.motion_blur_factor"),f.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in f.b4w_motion_blur_settings||(b("scene",f,"b4w_motion_blur_settings.motion_blur_decay_threshold"),f.b4w_motion_blur_settings.motion_blur_decay_threshold=.01),"b4w_color_correction_settings"in f||(b("scene",f,"b4w_color_correction_settings"),e=d.b4w_color_correction_settings,f.b4w_color_correction_settings=e?e:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in
f||(b("scene",f,"b4w_god_rays_settings"),e=d.b4w_god_rays_settings,f.b4w_god_rays_settings=e?e:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in f.b4w_god_rays_settings||(b("scene",f,"b4w_god_rays_settings.steps_per_pass"),f.b4w_god_rays_settings.steps_per_pass=10),"b4w_glow_settings"in f||(b("scene",f,"b4w_glow_settings"),f.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},e=f.b4w_glow_settings,
"b4w_render_glow_over_blend"in d&&(e.render_glow_over_blend=d.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in d&&(e.small_glow_mask_coeff=d.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in d&&(e.large_glow_mask_coeff=d.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in d&&(e.small_glow_mask_width=d.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in d&&(e.large_glow_mask_width=d.b4w_large_glow_mask_width)),d=f.b4w_render_shadows,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_shadows=
d?"ON":"OFF"),d=f.b4w_render_reflections,"OFF"!=d&&"ON"!=d&&(f.b4w_render_reflections=d?"ON":"OFF"),d=f.b4w_render_refractions,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_refractions=d?"ON":"OFF"),"b4w_render_dynamic_grass"in f||(b("scene",f,"b4w_render_dynamic_grass"),f.b4w_render_dynamic_grass="AUTO"),f.b4w_nla_script&&k("scene",f,"b4w_nla_script"),"audio_distance_model"in f||(b("scene",f,"audio_distance_model"),f.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in f||(b("scene",f,"b4w_custom_prop"),
f.b4w_custom_prop=null);f=a.meshes;for(l=0;l<f.length;l++){d=f[l];d.b4w_boundings||(b("mesh",d,"b4w_boundings"),d.b4w_boundings={},e=d.b4w_boundings,e.bb=d.b4w_bounding_box?d.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},e.bb_src=d.b4w_bounding_box_source?d.b4w_bounding_box_source:d.b4w_bounding_box,e.bs_cen=d.b4w_bounding_sphere_center?d.b4w_bounding_sphere_center:[0,0,0],e.bc_cen=d.b4w_bounding_cylinder_center?d.b4w_bounding_cylinder_center:[0,0,0],e.be_cen=d.b4w_bounding_ellipsoid_center?
d.b4w_bounding_ellipsoid_center:[0,0,0],d.b4w_bounding_ellipsoid_axes?e.be_ax=d.b4w_bounding_ellipsoid_axes:(m=e.bb,e.be_ax=[(m.max_x-m.min_x)/2,(m.max_y-m.min_y)/2,(m.max_z-m.min_z)/2]),d.b4w_rotated_bounding_box?e.rbb=d.b4w_rotated_bounding_box:(m=e.bb,e.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]}),e.caxis_x=d.b4w_cov_axis_x?d.b4w_cov_axis_x:[1,0,0],e.caxis_y=d.b4w_cov_axis_y?d.b4w_cov_axis_y:[0,1,0],e.caxis_z=d.b4w_cov_axis_z?d.b4w_cov_axis_z:[0,0,1]);
"is_boundings_overridden"in d||(b("mesh",d,"is_boundings_overridden"),d.is_boundings_overridden=!1);"b4w_shape_keys"in d||(d.b4w_shape_keys=[],b("mesh",d,"b4w_shape_keys"));e=!0;for(h=0;h<d.submeshes.length;h++){var q=d.submeshes[h];"boundings"in q||(e=!1,q.boundings={be_ax:d.b4w_bounding_ellipsoid_axes,be_cen:d.b4w_bounding_ellipsoid_center,bb:{max_x:d.b4w_bounding_box.max_x,max_y:d.b4w_bounding_box.max_y,max_z:d.b4w_bounding_box.max_z,min_x:d.b4w_bounding_box.min_x,min_y:d.b4w_bounding_box.min_y,
min_z:d.b4w_bounding_box.min_z}});"uv_layers"in q||(b("submesh",d,"uv_layers"),q.uv_layers=d.uv_textures);"be_ax"in q.boundings||(q.boundings.be_ax=d.b4w_bounding_ellipsoid_axes);"be_cen"in q.boundings||(q.boundings.be_cen=d.b4w_bounding_ellipsoid_center);"bb"in q.boundings||(q.boundings.bb=d.b4w_bounding_box);"rbb"in q.boundings||(m=d.b4w_bounding_box,q.boundings.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in q.boundings||(q.boundings.caxis_x=
[1,0,0]);"caxis_y"in q.boundings||(q.boundings.caxis_y=[0,1,0]);"caxis_z"in q.boundings||(q.boundings.caxis_z=[0,0,1])}e||b("mesh",d,"submesh_bd");m=d;e=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];h=null;for(q=0;q<e.length;q++)m[e[q]]&&(h?(m[e[q]]=!1,A.warn('WARNING property "'+e[q]+'" of object "'+m.name+'" has been set to "false". Foreground property "'+h+'" already exists.')):h=e[q]);for(m=0;m<d.b4w_vertex_anim.length;m++)e=
d.b4w_vertex_anim[m],"allow_nla"in e||(b('mesh["b4w_vertex_anim"]',d,"allow_nla"),e.allow_nla=!0);"active_uv_name"in d||(b("mesh",d,"active_uv_name"),d.active_uv_name="")}m=a.cameras;for(l=0;l<m.length;l++)f=m[l],f.type||(f.type="PERSP",b("camera",f,"type")),"b4w_eye_target_dist"in f&&(delete f.b4w_eye_target_dist,k("camera",f,"b4w_eye_target_dist")),"b4w_hover_zero_level"in f||(f.b4w_hover_zero_level=0,b("camera",f,"b4w_hover_zero_level")),"b4w_trans_velocity"in f||(f.b4w_trans_velocity=1,b("camera",
f,"b4w_trans_velocity")),"b4w_rot_velocity"in f||(f.b4w_rot_velocity=1,b("camera",f,"b4w_rot_velocity")),"b4w_zoom_velocity"in f||(f.b4w_zoom_velocity=.1,b("camera",f,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in f||(f.b4w_use_target_distance_limits=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_target_distance_limits")),"b4w_use_zooming"in f||(f.b4w_use_zooming=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_zooming")),"b4w_distance_min"in f||(f.b4w_distance_min=1,b("camera",
f,"b4w_distance_min")),"b4w_distance_max"in f||(f.b4w_distance_max=100,b("camera",f,"b4w_distance_max")),"b4w_horizontal_translation_min"in f||(f.b4w_horizontal_translation_min=-100,b("camera",f,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in f||(f.b4w_horizontal_translation_max=100,b("camera",f,"b4w_horizontal_translation_max")),"b4w_vertical_translation_min"in f||(f.b4w_vertical_translation_min=-100,b("camera",f,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in
f||(f.b4w_vertical_translation_max=100,b("camera",f,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in f||(f.b4w_use_horizontal_clamping=!1,b("camera",f,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in f||(f.b4w_rotation_left_limit=-Math.PI,b("camera",f,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in f||(f.b4w_rotation_right_limit=Math.PI,b("camera",f,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in f||(f.b4w_horizontal_clamping_type="LOCAL",b("camera",
f,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in f||(f.b4w_use_vertical_clamping=!1,b("camera",f,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in f||(f.b4w_rotation_down_limit=-Math.PI/2,b("camera",f,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in f||(f.b4w_rotation_up_limit=Math.PI/2,b("camera",f,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in f||(f.b4w_vertical_clamping_type="LOCAL",b("camera",f,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in f||(f.b4w_hover_angle_min=
Math.PI/6,b("camera",f,"b4w_hover_angle_min")),"b4w_hover_angle_max"in f||(f.b4w_hover_angle_max=Math.PI/6,b("camera",f,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in f||(f.b4w_enable_hover_hor_rotation=!0,b("camera",f,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in f||(f.b4w_use_panning=!0,b("camera",f,"b4w_use_panning")),"b4w_use_pivot_limits"in f||(f.b4w_use_pivot_limits=!1,f.b4w_pivot_z_min=0,f.b4w_pivot_z_max=10,b("camera",f,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in f||(f.b4w_dof_bokeh=
!1,b("camera",f,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in f||(f.b4w_dof_bokeh_intensity=.3,b("camera",f,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in f||(f.b4w_dof_foreground_blur=!1,b("camera",f,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in f||(f.b4w_dof_front_start=0,b("camera",f,"b4w_dof_front_start")),"b4w_dof_front_end"in f||(f.b4w_dof_front_end=f.b4w_dof_front,b("camera",f,"b4w_dof_front_end")),"b4w_dof_rear_start"in f||(f.b4w_dof_rear_start=0,b("camera",f,"b4w_dof_rear_start")),
"b4w_dof_rear_end"in f||(f.b4w_dof_rear_end=f.b4w_dof_rear,b("camera",f,"b4w_dof_rear_end")),"sensor_fit"in f||(f.sensor_fit="VERTICAL",b("camera",f,"sensor_fit"));m=a.lamps;for(l=0;l<m.length;l++)if(f=m[l],"b4w_generate_shadows"in f||(f.b4w_generate_shadows=!1,b("lamp",f,"b4w_generate_shadows")),"b4w_dynamic_intensity"in f||(f.b4w_dynamic_intensity=!1,b("lamp",f,"b4w_dynamic_intensity")),"use_diffuse"in f||(f.use_diffuse=!0,b("lamp",f,"use_diffuse")),"use_specular"in f||(f.use_specular=!0,b("lamp",
f,"use_specular")),"clip_start"in f||(f.clip_start=.1,b("lamp",f,"clip_start")),"clip_end"in f||(f.clip_end=30,b("lamp",f,"clip_end")),"POINT"==f.type||"SPOT"==f.type)"use_sphere"in f||(f.use_sphere=!1,b("lamp",f,"use_sphere")),D.IP&&(f.type="SUN");m=a.speakers;for(l=0;l<m.length;l++)f=m[l],"b4w_behavior"in f||(f.b4w_behavior=f.b4w_background_music?"BACKGROUND_SOUND":"POSITIONAL"),"b4w_auto_play"in f||(f.b4w_auto_play=!1,b("speaker",f,"b4w_auto_play")),"b4w_enable_doppler"in f||(f.b4w_enable_doppler=
!1,b("speaker",f,"b4w_enable_doppler")),"b4w_delay"in f||(f.b4w_delay=0),"b4w_delay_random"in f||(f.b4w_delay_random=0),"b4w_volume_random"in f||(f.b4w_volume_random=0),"b4w_pitch_random"in f||(f.b4w_pitch_random=0),"b4w_fade_in"in f||(f.b4w_fade_in=0),"b4w_fade_out"in f||(f.b4w_fade_out=0),"b4w_loop"in f||(f.b4w_loop=!1),"b4w_loop_start"in f||(f.b4w_loop_start=0,b("speaker",f,"b4w_loop_start")),"b4w_loop_end"in f||(f.b4w_loop_end=0,b("speaker",f,"b4w_loop_end")),f.animation_data&&c(f.animation_data);
m=a.textures;for(l=0;l<m.length;l++)f=m[l],"b4w_anisotropic_filtering"in f||(f.b4w_anisotropic_filtering="OFF",b("texture",f,"b4w_anisotropic_filtering")),"b4w_water_foam"in f||(f.b4w_water_foam=!1,b("texture",f,"b4w_water_foam")),"b4w_foam_uv_freq"in f||(f.b4w_foam_uv_freq=[1,1],b("texture",f,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in f||(f.b4w_foam_uv_magnitude=[1,1],b("texture",f,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in f||(f.b4w_parallax_steps=5,b("material",f,"b4w_parallax_steps")),
"b4w_parallax_lod_dist"in f||(f.b4w_parallax_lod_dist=10,b("material",f,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in f||(f.b4w_shore_dist_map=!1,b("texture",f,"b4w_shore_dist_map")),"b4w_shore_boundings"in f||(f.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],b("texture",f,"b4w_shore_boundings")),"b4w_max_shore_dist"in f||(f.b4w_max_shore_dist=100,b("texture",f,"b4w_max_shore_dist")),"b4w_disable_compression"in f||(f.b4w_disable_compression=!1,b("texture",f,"b4w_disable_compression")),"b4w_source_type"in
f||(f.b4w_source_type="",b("texture",f,"b4w_source_type")),"b4w_source_id"in f||(f.b4w_source_id="",b("texture",f,"b4w_source_id")),"b4w_source_size"in f||(f.b4w_source_size=1024,b("texture",f,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in f||(f.b4w_enable_canvas_mipmapping=!0,b("texture",f,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in f||(f.b4w_nla_video=!1,b("texture",f,"b4w_nla_video"));m=a.images;for(l=0;l<m.length;l++)f=m[l],"colorspace_settings_name"in f||(f.colorspace_settings_name=
"sRGB",b("image",f,"colorspace_settings_name"));e=a.materials;for(l=0;l<e.length;l++){h=e[l];"ALPHA_ANTIALIASING"==h.game_settings.alpha_blend&&(D.JP?h.game_settings.alpha_blend="CLIP":2>D.oc&&(A.warn('Material "'+h.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),h.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in h||(h.use_tangent_shading=!1,b("material",h,"use_tangent_shading"));"b4w_node_mat_type"in h&&k("material",h,"b4w_node_mat_type");
"b4w_skydome"in h&&k("material",h,"b4w_skydome");"b4w_procedural_skydome"in h&&k("material",h,"b4w_procedural_skydome");"b4w_lens_flares"in h||(h.b4w_lens_flares=!1,b("material",h,"b4w_lens_flares"));"LENS_FLARES"===h.name&&(h.b4w_lens_flares||A.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),h.b4w_lens_flares=!0);h.b4w_water&&("b4w_water_shore_smoothing"in h||(h.b4w_water_shore_smoothing=!1,b("material",h,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in
h||(h.b4w_water_dynamic=!1,b("material",h,"b4w_water_dynamic")),"b4w_waves_height"in h||(h.b4w_waves_height=1,b("material",h,"b4w_waves_height")),"b4w_waves_length"in h||(h.b4w_waves_length=1,b("material",h,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in h||(h.b4w_water_dst_noise_scale0=.05,b("material",h,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in h||(h.b4w_water_dst_noise_scale1=.03,b("material",h,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in h||(h.b4w_water_dst_noise_freq0=
1.3,b("material",h,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in h||(h.b4w_water_dst_noise_freq1=1,b("material",h,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in h||(h.b4w_water_dir_min_shore_fac=.4,b("material",h,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in h||(h.b4w_water_dir_freq=.5,b("material",h,"b4w_water_dir_freq")),"b4w_water_dir_noise_scale"in h||(h.b4w_water_dir_noise_scale=.05,b("material",h,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in
h||(h.b4w_water_dir_noise_freq=.07,b("material",h,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in h||(h.b4w_water_dir_min_noise_fac=.5,b("material",h,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in h||(h.b4w_water_dst_min_fac=.2,b("material",h,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in h||(h.b4w_water_waves_hor_fac=5,b("material",h,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in h||(h.b4w_water_absorb_factor=6,b("material",h,"b4w_water_absorb_factor")),"b4w_water_fog_color"in
h||(h.b4w_water_fog_color=[.5,.7,.7],b("material",h,"b4w_water_fog_color")),"b4w_foam_factor"in h||(h.b4w_foam_factor=5,b("material",h,"b4w_foam_factor")),"b4w_generated_mesh"in h||(h.b4w_generated_mesh=!1,b("material",h,"b4w_generated_mesh")),"b4w_water_num_cascads"in h||(h.b4w_water_num_cascads=5,b("material",h,"b4w_water_num_cascads")),"b4w_water_subdivs"in h||(h.b4w_water_subdivs=64,b("material",h,"b4w_water_subdivs")),"b4w_water_detailed_dist"in h||(h.b4w_water_detailed_dist=1E3,b("material",
h,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in h||(h.b4w_water_enable_caust=!1,b("material",h,"b4w_water_enable_caust")),"b4w_water_caust_scale"in h||(h.b4w_water_caust_scale=.25,b("material",h,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in h||(h.b4w_water_caust_brightness=.5,b("material",h,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in h||(h.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in h||(h.b4w_dynamic_grass_color="");"diffuse_intensity"in h||(h.diffuse_intensity=
1,b("material",h,"diffuse_intensity"));"b4w_use_ghost"in h||(h.b4w_use_ghost=!1);"b4w_collision_margin"in h||(h.b4w_collision_margin=.04,b("material",h,"b4w_collision_margin"));"b4w_collision_group"in h||(h.b4w_collision_group=128,b("material",h,"b4w_collision_group"));"b4w_collision_mask"in h||(h.b4w_collision_mask=127,b("material",h,"b4w_collision_mask"));"b4w_do_not_render"in h||(h.b4w_do_not_render=!1,b("material",h,"b4w_do_not_render"));"HALO"!=h.type||"b4w_halo_sky_stars"in h||(h.b4w_halo_sky_stars=
!1,b("material",h,"b4w_halo_sky_stars"));"HALO"!=h.type||"b4w_halo_stars_blend_height"in h||(h.b4w_halo_stars_blend_height=10,b("material",h,"b4w_halo_stars_blend_height"));"HALO"!=h.type||"b4w_halo_stars_min_height"in h||(h.b4w_halo_stars_min_height=0,b("material",h,"b4w_halo_stars_min_height"));"specular_shader"in h||(h.specular_shader="COOKTORR",b("material",h,"specular_shader"));"diffuse_shader"in h||(h.diffuse_shader="LAMBERT",b("material",h,"diffuse_shader"));"roughness"in h||(h.roughness=.5,
b("material",h,"roughness"));"diffuse_fresnel"in h||(h.diffuse_fresnel=.1,b("material",h,"diffuse_fresnel"));"diffuse_fresnel_factor"in h||(h.diffuse_fresnel_factor=.5,b("material",h,"diffuse_fresnel_factor"));"specular_slope"in h||(h.specular_slope=.2,b("material",h,"specular_slope"));"specular_toon_size"in h||(h.specular_toon_size=.5,b("material",h,"specular_toon_size"));"specular_toon_smooth"in h||(h.specular_toon_smooth=.1,b("material",h,"specular_toon_smooth"));"specular_alpha"in h||(h.specular_alpha=
1,b("material",h,"specular_alpha"));"b4w_wettable"in h||(h.b4w_wettable=!1,b("material",h,"b4w_wettable"));"b4w_refractive"in h||(h.b4w_refractive=!1,b("material",h,"b4w_refractive"));"b4w_refr_bump"in h||(h.b4w_refr_bump=0,b("material",h,"b4w_refr_bump"));"b4w_shallow_water_col"in h||(h.b4w_shallow_water_col=[0,.8,.3],b("material",h,"b4w_shallow_water_col"));"b4w_shore_water_col"in h||(h.b4w_shore_water_col=[0,.9,.2],b("material",h,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in h||(h.b4w_shallow_water_col_fac=
1,b("material",h,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in h||(h.b4w_shore_water_col_fac=.5,b("material",h,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in h||(h.b4w_water_sss_strength=5.9,b("material",h,"b4w_water_sss_strength"));"b4w_water_sss_width"in h||(h.b4w_water_sss_width=.45,b("material",h,"b4w_water_sss_width"));"b4w_render_above_all"in h||(h.b4w_render_above_all=!1,b("material",h,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in h||(h.b4w_water_norm_uv_velocity=
.05,b("material",h,"b4w_water_norm_uv_velocity"));"specular_ior"in h||(h.specular_ior=1,b("material",h,"specular_ior"));"darkness"in h||(h.darkness=0,b("material",h,"darkness"));"diffuse_toon_size"in h||(h.diffuse_toon_size=0,b("material",h,"diffuse_toon_size"));"diffuse_toon_smooth"in h||(h.diffuse_toon_smooth=0,b("material",h,"diffuse_toon_smooth"));"pass_index"in h||(h.pass_index=0,b("material",h,"pass_index"));f=h.texture_slots;for(m=0;m<f.length;m++)d=f[m],"blend_type"in d||(d.blend_type="MIX",
b("texture_slot",d,"blend_type"));if(h.node_tree){f=h.node_tree.nodes;for(m=0;m<f.length;m++)p(f[m]);h.node_tree.animation_data&&c(h.node_tree.animation_data)}}d=a.node_groups;for(l=0;l<d.length;l++)for(f=d[l].node_tree.nodes,m=0;m<f.length;m++)p(f[m]);f=a.objects;for(l=0;l<f.length;l++){d=f[l];switch(d.type){case "MESH":"b4w_dynamic_geometry"in d||(d.b4w_dynamic_geometry=!1);"b4w_reflexible"in d||(d.b4w_reflexible=!1);"b4w_reflexible_only"in d||(d.b4w_reflexible_only=!1);"b4w_reflective"in d||(d.b4w_reflective=
!1);"b4w_reflection_type"in d||(d.b4w_reflection_type="PLANE",b("object",d,"b4w_reflection_type"));"b4w_wind_bending"in d||(d.b4w_wind_bending=!1,b("object",d,"b4w_wind_bending"));"b4w_wind_bending_angle"in d||(d.b4w_wind_bending_angle=10,d.b4w_wind_bending_freq=.25,b("object",d,"wind bending params"));"b4w_detail_bending_amp"in d||(d.b4w_detail_bending_amp=.1,d.b4w_branch_bending_amp=.3,b("object",d,"detail bending params"));"b4w_detail_bending_freq"in d||(d.b4w_detail_bending_freq=1,b("object",
d,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in d||(d.b4w_main_bend_stiffness_col="",b("object",d,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in d||(d.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},b("object",d,"b4w_detail_bend_colors"));"b4w_caustics"in d||(d.b4w_caustics=!1);"vertex_groups"in d&&d.vertex_groups.length&&d.data&&0==d.data.vertex_groups.length&&(d.data.vertex_groups=d.vertex_groups,delete d.vertex_groups,b("object",
d,"vertex_groups"));"b4w_vertex_anim"in d&&d.b4w_vertex_anim.length&&d.data&&0==d.data.b4w_vertex_anim.length&&(d.data.b4w_vertex_anim=d.b4w_vertex_anim,delete d.b4w_vertex_anim,b("object",d,"b4w_vertex_anim"));"b4w_do_not_render"in d||(d.b4w_do_not_render=!1);"b4w_hidden_on_load"in d||(d.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in d||(d.b4w_hide_chldr_on_load=!1);"use_ghost"in d.game||(d.game.use_ghost=!1);"use_sleep"in d.game||(d.game.use_sleep=!1);"velocity_min"in d.game||(d.game.velocity_min=
0);"velocity_max"in d.game||(d.game.velocity_max=0);"collision_group"in d.game||(d.game.collision_group=1);"collision_mask"in d.game||(d.game.collision_mask=255);m=d;e=m.game;h=e.collision_bounds_type;e.use_collision_bounds&&"BOX"!=h&&"CYLINDER"!=h&&"CONE"!=h&&"SPHERE"!=h&&"CAPSULE"!=h&&"EMPTY"!=h&&(A.error("Wrong collision bounds type "+h+". Disable physics for object "+m.name),m.b4w_collision=!1,m.b4w_floating=!1,m.b4w_vehicle=!1,m.b4w_character=!1);"b4w_vehicle_settings"in d?d.b4w_vehicle_settings&&
("steering_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_ratio=10),"steering_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_max=1),"inverse_control"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.inverse_control=!1),"force_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.force_max=1500),"brake_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.brake_max=100),"speed_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in
d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_stiffness=20),"suspension_damping"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in d.b4w_vehicle_settings||
(d.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in
d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_rot_damp=.9)):(d.b4w_vehicle_settings=null,b("object",d,"b4w_vehicle_settings"));"b4w_floating_settings"in d?d.b4w_floating_settings&&("floating_factor"in d.b4w_floating_settings||(d.b4w_floating_settings.floating_factor=3),"water_lin_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_lin_damp=.8),"water_rot_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_rot_damp=.8)):(d.b4w_floating_settings=null,b("object",d,"b4w_floating_settings"));
"b4w_character_settings"in d?d.b4w_character_settings&&("walk_speed"in d.b4w_character_settings||(d.b4w_character_settings.walk_speed=4),"run_speed"in d.b4w_character_settings||(d.b4w_character_settings.run_speed=8),"step_height"in d.b4w_character_settings||(d.b4w_character_settings.step_height=.25),"jump_strength"in d.b4w_character_settings||(d.b4w_character_settings.jump_strength=5),"waterline"in d.b4w_character_settings||(d.b4w_character_settings.waterline=0)):(d.b4w_character_settings=null,b("object",
d,"b4w_character_settings"));"b4w_selectable"in d||(d.b4w_selectable=!1,b("object",d,"b4w_selectable"));"b4w_outlining"in d||(d.b4w_outlining=!1,b("object",d,"b4w_outlining"));"b4w_outline_on_select"in d||(d.b4w_outline_on_select=!1,b("object",d,"b4w_outline_on_select"));"b4w_billboard"in d||(d.b4w_billboard=!1,b("object",d,"b4w_billboard"));"b4w_billboard_geometry"in d||(d.b4w_billboard_geometry="SPHERICAL",b("object",d,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in d||(d.b4w_pres_glob_orientation=
!1,b("object",d,"b4w_pres_glob_orientation"));"b4w_outline_settings"in d||("b4w_glow_settings"in d?d.b4w_outline_settings=d.b4w_glow_settings:(d.b4w_outline_settings={},d.b4w_outline_settings.outline_duration=1,d.b4w_outline_settings.outline_period=1,d.b4w_outline_settings.outline_relapses=0),b("object",d,"b4w_outline_settings"));"lod_levels"in d||(d.lod_levels=[],b("object",d,"lod_levels"));"b4w_animation_mixing"in d||(d.b4w_animation_mixing=!1,b("object",d,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in
d||(d.b4w_anchor=null,b("object",d,"b4w_anchor")),!d.b4w_anchor||"max_width"in d.b4w_anchor||(d.b4w_anchor.max_width=250)}"collision_margin"in d.game||(d.game.collision_margin=.04,b("object",d,"collision_margin"));"b4w_anim_behavior"in d||(d.b4w_anim_behavior=d.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",b("object",d,"b4w_anim_behavior"));if(!("rotation_quaternion"in d)){m=[0,0,0,1];O.bl(d.rotation_euler,m);var e=m,h=m[0],q=m[1],u=m[2];e[0]=m[3];e[1]=h;e[2]=q;e[3]=u;d.rotation_quaternion=m;b("object",
d,"rotation_quaternion")}"webgl_do_not_batch"in d&&(d.b4w_do_not_batch=d.webgl_do_not_batch)&&k("object",d,"webgl_do_not_batch");"b4w_shadow_cast_only"in d||(d.b4w_shadow_cast_only=!1,b("object",d,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in d||(d.b4w_correct_bounding_offset="AUTO",b("object",d,"b4w_correct_bounding_offset"));e=d.particle_systems;for(m=0;m<e.length;m++)h=e[m],q=h.settings,"use_rotation_dupli"in q||(q.use_rotation_dupli=!1,b("particle_settings",q,"use_rotation_dupli")),
"use_whole_group"in q||(q.use_whole_group=!1,b("particle_settings",q,"use_whole_group")),h.transforms||(h.transforms=new Float32Array,b("particle_system",h,"transforms")),"b4w_billboard_align"in q||(q.b4w_billboard_align="VIEW",b("particle_settings",q,"b4w_billboard_align")),"b4w_dynamic_grass"in q||(q.b4w_dynamic_grass=!1,b("object",q,"b4w_dynamic_grass")),"b4w_dynamic_grass_scale_threshold"in q||(q.b4w_dynamic_grass_scale_threshold=.01,b("object",q,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in
q||(q.b4w_initial_rand_rotation=!1,b("particle_settings",q,"b4w_initial_rand_rotation")),"b4w_rotation_type"in q||(q.b4w_rotation_type="Z",b("particle_settings",q,"b4w_rotation_type")),"b4w_rand_rotation_strength"in q||(q.b4w_rand_rotation_strength=1,b("particle_settings",q,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in q||(q.b4w_hair_billboard=!1,b("particle_settings",q,"b4w_hair_billboard")),"b4w_hair_billboard_type"in q||(q.b4w_hair_billboard_type="BASIC",b("particle_settings",q,"b4w_hair_billboard_type")),
"b4w_hair_billboard_jitter_amp"in q||(q.b4w_hair_billboard_jitter_amp=0,b("particle_settings",q,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in q||(q.b4w_hair_billboard_jitter_freq=0,b("particle_settings",q,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in q||(q.b4w_hair_billboard_geometry="SPHERICAL",b("particle_settings",q,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in q||(q.b4w_wind_bend_inheritance="PARENT",b("particle_settings",q,"b4w_wind_bend_inheritance")),
"b4w_shadow_inheritance"in q||(q.b4w_shadow_inheritance="PARENT",b("particle_settings",q,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in q||(q.b4w_reflection_inheritance="PARENT",b("particle_settings",q,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in q||(q.b4w_vcol_from_name="",b("particle_settings",q,"b4w_vcol_from_name")),"b4w_vcol_to_name"in q||(q.b4w_vcol_to_name="",b("particle_settings",q,"b4w_vcol_to_name")),"b4w_coordinate_system"in q||(q.b4w_coordinate_system="LOCAL",b("particle_settings",
q,"b4w_coordinate_system")),"b4w_allow_nla"in q||(q.b4w_allow_nla=!0,b("particle_settings",q,"b4w_allow_nla")),"b4w_enable_soft_particles"in q||(q.b4w_enable_soft_particles=!1,b("particle_settings",q,"b4w_enable_soft_particles")),"b4w_particles_softness"in q||(q.b4w_particles_softness=1,b("particle_settings",q,"b4w_particles_softness")),"billboard_tilt"in q||(q.billboard_tilt=0,b("particle_settings",q,"billboard_tilt")),"billboard_tilt_random"in q||(q.billboard_tilt_random=0,b("particle_settings",
q,"billboard_tilt_random")),"use_rotations"in q||(q.use_rotations=!1,b("particle_settings",q,"use_rotations"));"constraints"in d||(d.constraints=[],b("object",d,"constraints"));e=d.constraints;for(m=0;m<e.length;m++)h=e[m],"influence"in h||(h.influence=1),"axes"in h||(h.axes=[1,1,1]);e=d.modifiers;for(m=0;m<e.length;m++){a:{h=e[m];switch(h.type){case "ARRAY":if(!("fit_type"in h)){A.error("WARNING Incomplete modifier "+String(h.type)+' for "'+d.name+'", reexport "'+a.b4w_filepath_blend+'" scene');
h=!1;break a}}h=!0}h||(e.splice(m,1),m--)}"animation_data"in d||(d.animation_data={action:null,nla_tracks:[]},b("object",d,"animation_data"));d.animation_data&&("action"in d.animation_data||(d.animation_data.action=null,g("no action in animation data "+d.name)),"nla_tracks"in d.animation_data||(d.animation_data.nla_tracks=[],g("no NLA in animation data "+d.name)),c(d.animation_data));"b4w_collision_id"in d||(d.b4w_collision_id="",b("object",d,"b4w_collision_id"));"b4w_viewport_alignment"in d||(d.b4w_viewport_alignment=
null,b("object",d,"b4w_viewport_alignment"));"pinverse_tsr"in d||(d.pinverse_tsr=null,b("object",d,"pinverse_tsr"));"b4w_cluster_data"in d||(d.b4w_cluster_data={cluster_id:-1,cluster_center:null},b("object",d,"b4w_cluster_data"));"pass_index"in d||(d.pass_index=0,b("object",d,"pass_index"));"b4w_custom_prop"in d||(b("object",d,"b4w_custom_prop"),d.b4w_custom_prop=null);(0>d.scale[0]||0>d.scale[1]||0>d.scale[2])&&g('negative scale for object "'+d.name+'", can lead to some errors');m=d.scale;0==m[0]&&
0==m[1]&&0==m[2]?m=!0:(e=Math.abs((m[1]-m[2])/m[1]),m=.005>Math.abs((m[0]-m[1])/m[0])&&.005>e);m||g("non-uniform scale for object "+d.name)}for(var z in v)l=v[z],m=z.match(/.*?(?=>>|$)/i)[0],A.warn('Property "'+String(m)+'" is '+l.KQ+' for "'+l.type+'". To fix this, reexport '+a.b4w_filepath_blend)};a.oX=function(a,b){"num_channels"in a||(a.num_channels=1,g('B4W Warning: no channels number in animation fcurve for "'+b.name+'" action, reexport scene'))};a.vW=function(a){var b;a:{b=a.modifiers;for(var c=
0;c<b.length;c++){var g=b[c].type;if("ARRAY"==g||"CURVE"==g){b=!0;break a}}b=!1}if(!b)return null;b=M(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":for(var g=b,k=f,d=0,l=0,p=0,v=new Float32Array(16),f=[],r=1;r<k.count;r++){k.use_constant_offset&&(d+=k.constant_offset_displace[0],l+=k.constant_offset_displace[1],p+=k.constant_offset_displace[2]);if(k.use_relative_offset)var x=g.b4w_boundings.bb,d=d+(x.max_x-x.min_x)*k.relative_offset_displace[0],
l=l+(x.max_y-x.min_y)*k.relative_offset_displace[1],p=p+(x.max_z-x.min_z)*k.relative_offset_displace[2];O.i5(d,l,p,v);for(var C=x=M(g),t=v,D=u.fromMat4(t,N),D=q.fromMat3(D,U),L=0;L<C.submeshes.length;L++){var J=C.submeshes[L];O.$r(J.position,t,J.position,0);P.gH(J.tbn,D,J.tbn)}f.push(x)}for(r=0;r<f.length;r++)for(k=g,d=f[r],l=0;l<k.submeshes.length;l++)if(p=k.submeshes[l],v=d.submeshes[l],x=p.base_length,C=p.indices.length,x)for(var aa in p)switch(aa){case "base_length":p[aa]+=v[aa];break;case "boundings":break;
case "indices":p[aa]=O.n5(p[aa],v[aa]);for(t=C;t<p[aa].length;t++)p[aa][t]+=x;break;case "position":p[aa]=m(p[aa],v[aa],p[aa].length/x/3);break;case "tbn":p[aa]=m(p[aa],v[aa],p[aa].length/x/4);break;case "shade_tangs":p[aa]=m(p[aa],v[aa],p[aa].length/x/3);break;case "group":p[aa]=m(p[aa],v[aa],p[aa].length/x);break;case "texcoord":p[aa]=m(p[aa],v[aa],p.uv_layers.length);break;case "color":p[aa]=m(p[aa],v[aa],p.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:A.warn('array_mesh_join(): unknown submesh property "'+
aa+'"'),p[aa]=O.lN(p[aa],v[aa])}break;case "CURVE":for(g=b,r=h.DY(f.object),k=new Float32Array(16),l=r.Nm?4:3,d=new Float32Array(l),l=new Float32Array(l),p=new Float32Array(3),v=new Float32Array(4),x=new Float32Array(4),C=new Float32Array(3),t=new Float32Array(3),D=new Float32Array(3),L=0;L<g.submeshes.length;L++){var ka=g.submeshes[L],J=ka.position,ka=ka.tbn,ca;a:{ca=f.deform_axis;switch(ca){case "POS_X":case "NEG_X":ca=0;break a;case "POS_Y":case "NEG_Y":ca=1;break a;case "POS_Z":case "NEG_Z":ca=
2;break a;default:O.K("Wrong deform axis value "+ca)}ca=void 0}C[0]=0;C[1]=0;C[2]=0;C[ca]=1;for(var ea=h.M4(r),wa=0;wa<J.length/3;wa++){D[0]=J[3*wa];D[1]=J[3*wa+1];D[2]=J[3*wa+2];var da=D[ca],Z=h.L4(r,da);h.N4(r,Z,d);p[0]=d[0];p[1]=d[1];p[2]=d[2];h.K4(r,Z,l);t[0]=l[0];t[1]=0;t[2]=l[2];I.normalize(t,t);q.rotationTo(C,t,v);0>da?(d[0]=t[0],d[1]=t[1],d[2]=t[2],I.scale(d,da,d),I.add(p,d,p)):da>ea&&(d[0]=t[0],d[1]=t[1],d[2]=t[2],I.scale(d,da-ea,d),I.add(p,d,p));e.fromRotationTranslation(v,p,k);r.Nm&&(q.setAxisAngle(C,
d[3],x),I.transformQuat(D,x,D));D[ca]=0;I.transformMat4(D,k,D);J[3*wa]=D[0];J[3*wa+1]=D[1];J[3*wa+2]=D[2];da=P.Po(ka,wa,E);P.gH(da,v,da);P.mk(ka,da,wa)}}}z.W2(b)}return b};a.AW=function(a,b){function c(b,c){var d=b[0];if(1<b.length)for(var e=1;e<b.length;e++)d+="*"+b[e];for(e=0;e<a.length;e++){var f=a[e];if(f.name==d)for(var g in c)f[g]=c[g]}}function e(a,b){for(var d in a)c(a[d],b)}for(var f=b.b4w_logic_nodes,k=0;k<f.length;k++)for(var d=f[k],h=0;h<d.length;h++){var l=d[h],m={register1:"variable1",
register2:"variable2",registerd:"variabled"},r;for(r in m)r in l&&(l[m[r]]=l[r]);for(var q in l.variables)"boolean"!=typeof l.variables[q][0]&&(l.variables[q]=[!1,l.variables[q]]);0<=["MATH","CONDJUMP","PAGEPARAM","REGSTORE"].indexOf(l.type)&&("variable1"in l&&(l.variables.id0=[!1,l.variable1]),"variable2"in l&&(l.variables.id1=[!1,l.variable2]),"variabled"in l&&(l.variables.vd=[!1,l.variabled]));for(var p in l.links)p.startsWith("id")||delete l.links[p];var m=l.common_usage_names,v=l.variables;switch(l.type){case "SELECT":for(var u=
0;u<a.length;u++)m=a[u],m.name==l.object&&(m.b4w_selectable=!0);l.bools||(l.bools={});l.bools.not_wait||(l.bools.not_wait=!1);g('Logic nodes type "SELECT" is deprecated');break;case "SWITCH_SELECT":e(l.objects_paths,{b4w_selectable:!0});if(l.links instanceof Array){g('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');m={};v=0;for(u in l.objects_paths)m[u]=l.links[v],v++;l.links=m}break;case "SELECT_PLAY":g('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+
b.name+'"');l.mute=!0;break;case "SELECT_PLAY_ANIM":g('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":l.bools||(l.bools={});void 0===l.bools.ch&&(l.bools.ch=!1);l.P.id0||e(l.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":e(l.objects_paths,{b4w_do_not_batch:!0});
switch(m.space_type){case "WORLD":m.space_type=J.KU;break;case "PARENT":m.space_type=J.JU;break;case "LOCAL":m.space_type=J.IU}break;case "OUTLINE":e(l.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":l.condition&&(m.condition=l.condition);if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=J.ZJ;break;case "LEQUAL":m.condition=J.aK;break;case "GREATER":m.condition=J.$J;break;case "LESS":m.condition=J.bK;break;case "NOTEQUAL":m.condition=J.cK;break;
case "EQUAL":m.condition=J.YJ}void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);l.bools||(l.bools={});l.bools.str&&(m.variable_type="STRING");switch(m.variable_type){case "NUMBER":m.variable_type=J.aE;break;case "STRING":m.variable_type=J.eK;break;case "OBJECT":m.variable_type=J.dK}void 0===m.variable_type&&(m.variable_type=J.aE,l.floats.inp1=l.input1,l.floats.inp2=l.input2);void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "SEND_REQ":l.bools||(l.bools={});l.strings||
(l.strings={});void 0===l.bools.ct&&(l.bools.ct=!1);void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "MATH":void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);void 0!=l.input1&&(l.floats.inp1=l.input1);void 0!=l.input2&&(l.floats.inp2=l.input2);switch(l.operation){case "DIV":l.operation=J.pU;break;case "SUB":l.operation=J.yU;break;case "MUL":l.operation=J.uU;break;case "ADD":l.operation=J.kU;break;case "RAND":l.operation=J.vU;break;case "SIN":l.operation=
J.xU;break;case "COS":l.operation=J.oU;break;case "TAN":l.operation=J.zU;break;case "ARCSIN":l.operation=J.mU;break;case "ARCCOS":l.operation=J.lU;break;case "ARCTAN":l.operation=J.nU;break;case "LOG":l.operation=J.qU;break;case "MIN":l.operation=J.sU;break;case "MAX":l.operation=J.rU;break;case "ROUND":l.operation=J.wU;break;case "MOD":l.operation=J.tU;break;case "ABS":l.operation=J.jU}void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "REGSTORE":l.floats||(l.floats={});l.strings||(l.strings={});
void 0!=l.number1&&(l.input1=l.number1);if(void 0!=l.input1)switch(typeof l.input1){case "number":l.floats.inp1=l.input1;m.variable_type="NUMBER";break;default:l.strings.inp1=l.input1,m.variable_type="STRING"}switch(m.variable_type){case "NUMBER":m.variable_type=J.aE;break;case "STRING":m.variable_type=J.eK;break;case "OBJECT":m.variable_type=J.dK,e(l.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":l.bools||(l.bools={});void 0===l.bools.hsh&&(l.bools.hsh=!1);l.floats||(l.floats={});void 0===
l.floats.ptp&&(l.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":l.bools||(l.bools={});void 0===l.bools.env&&(l.bools.env=!1);void 0===l.bools.id0&&(l.bools.id0=!1);l.bools.id0||c(l.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==l.type&&((l=m.param_anim_behavior)||(l="FINISH_STOP"),m.param_anim_behavior=x.mE(l));break;case "STRING":switch(m.string_operation){case "JOIN":m.string_operation=J.FU;break;case "FIND":m.string_operation=J.EU;break;case "REPLACE":m.string_operation=J.GU;break;
case "SPLIT":m.string_operation=J.HU;break;case "COMPARE":m.string_operation=J.DU}if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=J.ZJ;break;case "LEQUAL":m.condition=J.aK;break;case "GREATER":m.condition=J.$J;break;case "LESS":m.condition=J.bK;break;case "NOTEQUAL":m.condition=J.cK;break;case "EQUAL":m.condition=J.YJ}break;case "REDIRECT":void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "SET_CAMERA_MOVE_STYLE":switch(m.camera_move_style){case "STATIC":m.camera_move_style=
J.fU;break;case "TARGET":m.camera_move_style=J.gU;break;case "EYE":m.camera_move_style=J.dU;break;case "HOVER":m.camera_move_style=J.eU}break;case "ENTRYPOINT":l.bools||(l.bools={});void 0===l.bools.js&&(l.bools.js=!1);l.bools.js&&(l.mute=!0);break;case "JS_CALLBACK":for(r in l=m.js_cb_params,l)switch(l[r]){case "OBJECT":l[r]=J.hU;break;case "VARIABLE":l[r]=J.iU}}}}};b4w.module.__curve=function(a,t){function p(a,b,c,e,g){var k=e.length;g||(g=new Float32Array(k));for(var h=k+a,m=new Float32Array(h),p=1;p<=h-1;p++)m[p-1]=b>=c[p-1]&&b<c[p+1-1]?1:0;for(var u=2;u<=a;u++)for(p=1;p<=h-u;p++)m[p-1]=(m[p-1]?(b-c[p-1])*m[p-1]/(c[p+u-1-1]-c[p-1]):0)+(m[p+1-1]?(c[p+u-1]-b)*m[p+1-1]/(c[p+u-1]-c[p+1-1]):0);b==c[h-1]&&(m[k-1]=1);a=0;for(p=1;p<=k;p++)a+=m[p-1]*e[p-1];for(p=1;p<=k;p++)g[p-1]=a?m[p-1]*e[p-1]/a:0;return g}function c(a){a=a.FA;return a[a.length-1]}function b(a){a=
a.KM;return a[a.length-1]}function k(a,b,c,e,m,q,p,t){var h=a+(b-a)/2,u=g(h,e,m,q,p)-c;t=t?t:.01;return Math.abs(u)<t?h:0<u?k(a,h,c,e,m,q,p,t):k(h,b,c,e,m,q,p,t)}function g(a,b,c,e,g){var k=1-a;return b*k*k*k+3*c*k*k*a+3*e*k*a*a+g*a*a*a}var M=t("__util"),m=t("__vec3");a.DY=function(a){var b={},c=a.data;a=c.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var e=a.order_u;b.order=e;a=a.points;var g=a.length/5,k=[],m=g+e,g=g+2;k[0]=0;for(var z=2;z<=m;z++)k[z-1]=z>e&&z<g?k[z-2]+1:k[z-
2];b.FA=k;"2D"==c.dimensions?b.Nm=!1:"3D"==c.dimensions?b.Nm=!0:M.K("Wrong curve dimensions");e=[];k=[];for(c=0;c<a.length;c+=5)e.push(a[c]),e.push(a[c+1]),e.push(a[c+2]),b.Nm&&e.push(a[c+3]),k.push(a[c+4]);b.XE=e;b.sJ=k;a=[];for(var c=b.XE,e=b.Nm?4:3,k=b.sJ,m=b.FA,g=b.order,z=c.length/e,t=z+g,u=0,J=m[t-1]/999,x=0;1E3>x;x++){5E-6>m[t-1]-u&&(u=m[t-1]);for(var D=p(g,u,m,k),l=0;l<e;l++)for(var v=a[e*x+l]=0;v<z;v++)a[e*x+l]+=D[v]*c[e*v+l];u+=J}e=b.Nm?4:3;k=new Float32Array(1E3);k[0]=0;for(c=1;1E3>c;c+=
1)m=a[(c-1)*e],g=a[(c-1)*e+1],z=a[(c-1)*e+2],t=a[c*e],u=a[c*e+1],J=a[c*e+2],k[c]=k[c-1]+Math.sqrt((t-m)*(t-m)+(u-g)*(u-g)+(J-z)*(J-z));b.KM=k;return b};a.N4=function(a,b,g){g||(g=[]);b=Math.min(b,c(a));var e=a.XE,k=a.Nm?4:3,h=a.sJ,m=a.FA,z=a.order;a=e.length/k;var t=a+z;5E-6>m[t-1]-b&&(b=m[t-1]);t=new Float32Array(a);p(z,b,m,h,t);for(b=0;b<k;b++)for(h=g[b]=0;h<a;h++)g[b]+=t[h]*e[k*h+b]};a.K4=function(a,b,c){c||(c=[]);var e=a.XE,g=a.Nm?4:3,k=a.sJ,h=a.FA,m=a.order;a=e.length/g;var p=a+m;5E-6>h[p-1]-
b&&(b=h[p-1]);var p=new Float32Array(a),u=b;b=p;var z=k.length;b||(b=new Float32Array(z));var x=new Float32Array(z),t=new Float32Array(z),l=x,v=t;l||(l=new Float32Array(z));v||(v=new Float32Array(z));for(var C=z+m,E=new Float32Array(C),M=new Float32Array(C),L=1;L<=C-1;L++)E[L-1]=u>=h[L-1]&&u<h[L+1-1]?1:0;u==h[C-1]&&(E[z-1]=1);for(var y=2;y<=m;y++)for(L=1;L<=C-y;L++){var H=E[L-1]?E[L-1]/(h[L+y-1-1]-h[L-1]):0,n=E[L+1-1]?-E[L+1-1]/(h[L+y-1]-h[L+1-1]):0,f=M[L-1]?(u-h[L-1])*M[L-1]/(h[L+y-1-1]-h[L-1]):
0,W=M[L+1-1]?(h[L+y-1]-u)*M[L+1-1]/(h[L+y-1]-h[L+1-1]):0;E[L-1]=(E[L-1]?(u-h[L-1])*E[L-1]/(h[L+y-1-1]-h[L-1]):0)+(E[L+1-1]?(h[L+y-1]-u)*E[L+1-1]/(h[L+y-1]-h[L+1-1]):0);M[L-1]=H+n+f+W}for(L=1;L<=z;L++)l[L-1]=E[L-1],v[L-1]=M[L-1];h=0;for(m=1;m<=z;m++)h+=x[m-1]*k[m-1];u=0;for(m=1;m<=z;m++)u+=t[m-1]*k[m-1];for(m=1;m<=z;m++)b[m-1]=h?t[m-1]*k[m-1]/h+x[m-1]*k[m-1]*u/(h*h):0;for(k=0;k<g;k++)for(h=c[k]=0;h<a;h++)c[k]+=p[h]*e[g*h+k]};a.Eea=c;a.M4=b;a.L4=function(a,g){if(0>=g)return 0;var k=c(a);if(g>=b(a))return k;
var e=a.KM,m=M.hy(e,g,0,e.length-1);return k*(m+(g-e[m])/(e[m+1]-e[m]))/1E3};a.MA=function(a,b,c,e,g){return c+(g-e)*(a-c)/(b-e)};a.wP=function(a,b,c){var e=b[0];b=b[1];c=(c[1]-b)/(c[0]-e);return c*a+(b-c*e)};a.pL=function(a,b,c,e,m,q){return g(k(0,1,a,b[0],c[0],e[0],m[0],q),b[1],c[1],e[1],m[1])};a.DE=function(a,b,c,e,g){var k=new Float32Array(3),h=new Float32Array(3),p=new Float32Array(3),t=new Float32Array(3),u=new Float32Array(3),A=new Float32Array(3);m.copy(a[1],h);null==b?(m.copy(c[1],p),k[0]=
2*h[0]-p[0],k[1]=2*h[1]-p[1]):m.copy(b[1],k);null==c?(m.copy(b[1],k),p[0]=2*h[0]-k[0],p[1]=2*h[1]-k[1]):m.copy(c[1],p);m.subtract(h,k,t);m.subtract(p,h,u);b=m.length(t);c=m.length(u);0==b&&(b=1);0==c&&(c=1);if("AUTO"==e||"AUTO"==g)if(A[0]=u[0]/c+t[0]/b,A[1]=u[1]/c+t[1]/b,k=2.5614*m.length(A))"AUTO"==e&&m.scaleAndAdd(h,A,-(b/k),a[0]),"AUTO"==g&&m.scaleAndAdd(h,A,c/k,a[2]);"VECTOR"==e&&m.scaleAndAdd(h,t,-1/3,a[0]);"VECTOR"==g&&m.scaleAndAdd(h,u,1/3,a[2])};a.WX=function(a,b,c,e){var g=[],k=[],h,m,p;
g[0]=a[0]-b[0];g[1]=a[1]-b[1];k[0]=e[0]-c[0];k[1]=e[1]-c[1];p=e[0]-a[0];h=Math.abs(g[0]);m=Math.abs(k[0]);h+m&&h+m>p&&(h=p/(h+m),b[0]=a[0]-h*g[0],b[1]=a[1]-h*g[1],c[0]=e[0]-h*k[0],c[1]=e[1]-h*k[1])}};b4w.module.__logic_nodes=function(a,t){function p(){return function(a,c,d,e){d=e[1];var f=e[2];e=b(e[0],f.$b);if(-1==e.state){for(var g=0;g<e.y3;g++)if(U.wd(a,c,g)){for(var k=0;k<e.RB.length;k++)if(e.RB[k]==g){d.Mr==e.f5?(D.ov(d.Ta)&&(e.state=-3),f.$b.ei||(e.state=1,e.rw=e.NG[k])):(e.state=1,e.rw=e.NG[k]);e.dI=g;return}e.dI=g}e.state=0}}}function c(a,b){return{name:a.name,type:a.type,label:a.label,Sa:a.slot_idx_order,rw:a.slot_idx_jump,Ia:a.frame_range[0],ub:a.frame_range[1],m_:a.frame_range_mask?
a.frame_range_mask[0]:!0,l_:a.frame_range_mask?a.frame_range_mask[1]:!0,t2:a.param_name,m2:a.operation,Yb:a.mute,$M:a.object,Zg:a.anim_name,w2:a.parse_json_vars,u2:a.parse_json_paths,Qd:a.objects_paths,$P:a.nodes_paths,Fa:a.floats,P:a.bools,O:a.variables,Rl:a.strings,Vm:a.logic_functions,EP:a.logic_node_trees,QG:a.materials_names,NR:a.shader_nd_type,$c:a.common_usage_names,OZ:a.encode_json_vars,NZ:a.encode_json_paths,f5:b,FH:ca[a.type]?ca[a.type]:m,DB:!1,xP:a.links,jv:[],LF:-1,OA:null,dI:-1}}function b(a,
b,c){var d=b.Is+1-a.jv.length;if(0<d){for(var e=0;e<d;e++)e==d-1?a.jv.push({yb:{},rw:-1,state:-1,RB:[],aD:-1,Rc:{},Qc:u.Gt,Fc:null}):a.jv.push(0);c&&c(a,a.jv[b.Is],b)}return a.jv[b.Is]}function k(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function g(a,b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function M(a,b,c){switch(b.state){case 2:c.za=a.Sa}}function m(a,b,c){switch(b.state){case 1:v.error("Unknown node type: "+a.type);break;case 2:c.za=a.Sa}}function z(a,c){for(var d=a.ga,e=0;e<d.length;e++){var f=d[e];"SWITCH_SELECT"==
f.type&&f!=c&&(b(f,a.$b).state=-3)}}function C(a,c,d){var e=l.Vz(),f=b(a,d.$b);f.RB=[];f.NG=[];for(var g in a.Qd){var h=a.P[g]?k(a.O[g],c.G,d.$b.G):l.ud(l.ke,a.Qd[g],0),h=e.indexOf(h);if(-1==h){v.error("logic script error: non-selectable object:",a.Qd[g][a.Qd[g].length-1]);return}f.RB.push(h);f.NG.push(a.xP[g])}f.y3=e.length;f=[];for(g=0;g<e.length;g++)f.push(U.fF(e[g],!1));e=p();U.qa(null,"LOGIC_NODES_SWITCH_SELECT_"+O(a.label),U.Ai,f,U.qF,e,[a,c,d])}function h(a,b,c,d,e){return c?k(a.O[b],d,e):
l.ud(l.ke,a.Qd[b],0)}function e(a){var b=a.$b.oo;return 1>=b.length?a.ga:b[b.length-1].RA.Xu.ga}function A(a,b){var d=a.b4w_logic_nodes,e=b.zg,f=b.Vm;b.state=1;for(var g=-1,k=0;k<d.length;k++){for(var h={ga:[],$b:{vb:a,za:0,ei:!1,iJ:!1,Is:k,oo:[],G:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},l=d[k],m=0;m<l.length;m++){var n=c(l[m],h);h.ga.push(n)}switch(h.ga[0].type){case "ENTRYPOINT":g++;h.$b.Is=g;e.push(h);break;case "DEF_FUNC":n=h.ga[0],h.$b=null,f.push({id:[n.EP.id0,n.Vm.id0],Xu:h})}}for(k=0;k<
e.length;k++)for(h=e[k],d=0;d<h.ga.length;d++)n=h.ga[d],n.Yb||n.FH(n,b,h.$b,0,0);for(k=0;k<f.length;k++)for(e=f[k].Xu,d=0;d<e.ga.length;d++)n=e.ga[d],n.Yb||n.FH(n,b,0,0,0);var f=a.timeline_markers,r;for(r in f)b.sw.push(f[r]);b.sw.sort(function(a,b){return a-b});b.state=2;ea.push(b)}function q(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function P(a){switch(typeof a){case "string":return q(a,1);case "number":return q(a,0);default:return q(a,
1)}}function O(a){da[a]||(da[a]=0);var b=a+"_"+da[a],b=b.replace(/ /g,"_").replace(/\//g,"_");da[a]++;return b}function I(a,b){switch(b){case 0:return a.Fa;case 1:return a.Rl;case 2:return a.Qd}}var u=t("__animation"),J=t("__assets"),x=t("__camera"),D=t("__nla"),l=t("__objects"),v=t("__print"),N=t("__scenes"),E=t("__config"),U=t("__controls"),L=t("__batch"),y=t("__geometry"),H=t("__mat3"),n=t("__mat4"),f=t("__physics"),W=t("__quat"),d=t("__sfx"),G=t("__time"),B=t("__transform"),S=t("__tsr"),r=t("__util"),
ha=t("__vec3"),qa=t("__obj_util"),K=new Float32Array(4),pa=new Float32Array(3),ja=new Float32Array(3),ma=new Float32Array(2),aa=new Float32Array(9),ka=new Float32Array(16);a.aE=0;a.eK=1;a.dK=2;a.pU=0;a.yU=1;a.uU=2;a.kU=3;a.vU=4;a.xU=5;a.oU=6;a.zU=7;a.mU=8;a.lU=9;a.nU=10;a.qU=11;a.sU=12;a.rU=13;a.wU=14;a.tU=15;a.jU=16;a.FU=0;a.EU=1;a.GU=2;a.HU=3;a.DU=4;a.ZJ=0;a.aK=1;a.$J=2;a.bK=3;a.cK=4;a.YJ=5;a.KU=0;a.JU=1;a.IU=2;a.fU=0;a.gU=1;a.dU=2;a.eU=3;a.hU=0;a.iU=1;var ca={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.oo.push({DL:null,
G:c.G,RA:null}),c.za=a.Sa}},HIDE:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.ke,a.Qd.id0,0),b.aa||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=f?k(a.O.id0,c.G,d.G):g.aa;a.P.ch?N.iu(c,!0):N.po(c,!0);d.za=a.Sa}},SHOW:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.ke,a.Qd.id0,0),b.aa||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=f?
k(a.O.id0,c.G,d.G):g.aa;a.P.ch?N.iu(c,!1):N.po(c,!1);d.za=a.Sa}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.O.vd;b=b.G;var e=c.G,f;a:{f=a.t2;var k=a.Fa.ptp,h=a.P.hsh,l=E.get("url_params");if(l&&f in l)f=Number(l[f]);else{if(h=h?location.hash:location.search)for(h=h.slice(1).split("&"),l=0;l<h.length;l++){var m=h[l].split("=");if(1<m.length&&m[0]==f){f=q(m[1],k);break a}}f=0}}g(d,b,e,f);c.za=a.Sa}},SWITCH_SELECT:function(a,c,d){function e(a,b){b.state=-3}switch(c.state){case 2:var f=
b(a,d,e);if(-3==f.state)f.state=-2,z(c.zg[d.Is],a),C(a,c,c.zg[d.Is]);else if(-2==f.state)f.state=-1;else if(0==f.state||1==f.state){if(a.O.vd&&a.O.vd[1]){var k=l.Vz();g(a.O.vd,c.G,d.G,k[f.dI])}d.za=f.state?f.rw:a.Sa;f.state=-3;U.Tf(null,"LOGIC_NODES_SWITCH_SELECT_"+O(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:v.error("Logic script error: node is deprecated. Node: ",a.name),a.Yb=!0}},PLAY:function(a,c,d,f){switch(c.state){case 1:D.eS();a.P.not_wait||(a.P.not_wait=!1);break;case 2:var g=
b(a,d);switch(g.state){case -1:if(D.ov(c.Ta))if(c.lF==c.Mr&&d.ei)break;else{var k=c.Mr;if(k){k.$b.za=e(k)[k.$b.za].Sa;var k=c.Mr,h=k.$b.oo,l=h.length,m=[];1>=l&&m.push(k.ga);for(var n=1;n<l;n++)m.push(h[n].RA.Xu.ga);for(n=0;n<m.length;n++)for(h=0;h<m[n].length;h++)l=m[n][h],"PLAY"==l.type&&(b(l,k.$b).state=-1)}}d.ei=!a.P.not_wait;c.Mr=c.lF;g.state=0;a.m_&&(D.c4(a.Ia),D.xR(f));if(a.l_)D.pI(a.ub);else{f=D.Lz(f);var k=-1,q;for(q in c.sw)if(f<c.sw[q]){k=q;break}0<=k?D.pI(c.sw[k]):D.pI(D.TN())}D.H2();
a.P.not_wait&&(d.za=a.Sa,g.state=-1,d.ei=!1);break;case 0:D.ov()||(d.za=a.Sa,g.state=-1,d.ei=!1);break;case 1:d.za=a.Sa;g.state=-1;c.Mr=null;d.ei=!1;break;default:r.K("Unknown state of "+a.name),g.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.P.url?q(k(a.O.url,b.G,c.G),1):a.Rl.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var d=-1==a.O.id0[1]?a.Fa.inp1:q(k(a.O.id0,b.G,c.G),0),e=-1==a.O.id1[1]?a.Fa.inp2:q(k(a.O.id1,b.G,c.G),0),f=0;switch(a.m2){case 3:f=
d+e;break;case 2:f=d*e;break;case 1:f=d-e;break;case 0:0==e&&r.K("Division by zero in Logic script");f=d/e;break;case 4:f=Math.random()*(e-d)+d;break;case 5:f=Math.sin(d);break;case 6:f=Math.cos(d);break;case 7:f=Math.tan(d);break;case 8:f=Math.asin(d);break;case 9:f=Math.acos(d);break;case 10:f=Math.atan(d);break;case 11:f=Math.log(d);break;case 12:f=Math.min(d,e);break;case 13:f=Math.max(d,e);break;case 14:f=Math.round(d);break;case 15:f=d%e;break;case 16:f=Math.abs(d)}g(a.O.vd,b.G,c.G,f);c.za=
a.Sa}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=a.$c.variable_type,e=I(a,d),f=!1;if(2==d){var g=a.P.id0?k(a.O.id0,b.G,c.G):l.ud(l.ke,a.Qd.id0,0);b=a.P.id1?k(a.O.id1,b.G,c.G):l.ud(l.ke,a.Qd.id1,0);switch(a.$c.condition){case 5:g==b&&(f=!0);break;case 4:g!=b&&(f=!0)}}else switch(g=-1==a.O.id0[1]?e.inp1:q(k(a.O.id0,b.G,c.G),d),b=-1==a.O.id1[1]?e.inp2:q(k(a.O.id1,b.G,c.G),d),a.$c.condition){case 5:g==b&&(f=!0);break;case 4:g!=b&&(f=!0);break;case 3:g<b&&(f=!0);break;case 2:g>b&&(f=!0);break;
case 1:g<=b&&(f=!0);break;case 0:g>=b&&(f=!0)}c.za=f?a.rw:a.Sa}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.P.vs)var d=k(a.O.vs,b.G,c.G);else var d=a.$c.variable_type,e=I(a,d),d=2==d?l.ud(l.ke,e.id0,0):e.inp1;g([a.P["new"]&&a.P.gl||a.O.vd[0],a.O.vd[1]],b.G,c.G,d);c.za=a.Sa}},PLAY_ANIM:function(a,c,d){function f(a,b){for(var c=-1,d=0;8>d;d++){var e=a.Ba[d];if(e&&e.Jk&&u.iS(e.Jk)==u.iS(b))if(-1!=c)c=d;else return-1}return c}function g(a,b,d){b.aa=n?l.$z(a.$M[0],0):h(a,"id0",m,c.G,d.G);b.aa||
m||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var m=a.P.id0,n=a.P.env;switch(c.state){case 2:var q=b(a,d,g);n||(q.aa=m?k(a.O.id0,c.G,d.G):q.aa);0!=q.state||u.ov(q.aa,q.Qc)||(q.state=1);switch(q.state){case -1:for(var p in c.zg){var x=c.zg[p],y=e(x),t=x.$b.za;-1!=t&&(y=y[t],x=b(y,x.$b),"PLAY_ANIM"==y.type&&y!=a&&0==x.state&&x.aa==q.aa&&(x.state=1))}p=a.$c.param_anim_behavior;""==a.Zg?(u.WK(q.aa),u.eI(q.aa,p,u.Gt)):(x=f(q.aa,a.Zg),-1==x?(q.Qc=u.z4(q.aa,a.Zg),u.apply(q.aa,
null,a.Zg,q.Qc)):q.Qc=x,u.eI(q.aa,p,q.Qc));a.P.not_wait||(d.ei=!0);u.play(q.aa,null,q.Qc);q.state=0;a.P.not_wait&&(d.za=a.Sa,q.state=-1);break;case 0:break;case 1:a.P.not_wait||(d.ei=!1);d.za=a.Sa;q.state=-1;break;default:r.K("Unknown state of "+a.name),q.state=-1}}},SELECT_PLAY:M,SEND_REQ:function(a,c,d){function e(a,d,e,f,k){a=JSON.stringify(a);d=k[1];e=b(k[0],d);g(k[0].O.dst,c.G,d.G,a);e.state=1}var f=b(a,d);switch(c.state){case 2:switch(f.state){case -1:f.state=0;var f=a.P.url?q(k(a.O.url,c.G,
d.G),1):a.Rl.url,h={};a.P.ct&&(h["Content-Type"]=a.Rl.ct);"GET"==a.$c.request_type?J.enqueue([{id:f,type:J.bm,url:f,dn:h,Qb:[a,d]}],e,null,null,null):"POST"==a.$c.request_type&&J.enqueue([{id:f,type:J.bm,url:f,dn:h,kk:"POST",AB:q(k(a.O.dst1,c.G,d.G),1),Qb:[a,d]}],e,null,null,null);break;case 1:f.state=-1,d.za=a.Sa}}},INHERIT_MAT:function(a,c,d){function e(a,b){for(var c=0;2>c;c++)b.yb["id"+c]=l.ud(l.ke,a.Qd["id"+c],0),b.yb["id"+c]||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=
!0)}switch(c.state){case 2:c=b(a,d,e),l.M0(c.yb.id0,a.QG.id0,c.yb.id1,a.QG.id1),d.za=a.Sa}},SET_SHADER_NODE_PARAM:function(a,c,d){function e(a,b){a.Qd.id0&&(b.yb.id0=l.ud(l.ke,a.Qd.id0,0),a.Qd.id0||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0),a.$P.id0.unshift(a.QG.id0))}switch(c.state){case 2:var f=b(a,d,e).yb.id0,g=a.$P.id0,h=g[0],m=L.Em(f,h);d.za=a.Sa;if(null===m)v.error('Material "'+h+'" was not found in the object "'+f.name+'".');else{if("ShaderNodeRGB"==a.NR){var n=
l.ZF(m.li,g,1);l.lI(f,h,n,a.P.id0?q(k(a.O.id0,c.G,d.G),0):a.Fa.id0,a.P.id1?q(k(a.O.id1,c.G,d.G),0):a.Fa.id1,a.P.id2?q(k(a.O.id2,c.G,d.G),0):a.Fa.id2)}"ShaderNodeValue"==a.NR&&(n=l.$F(m.mi,g),l.mI(f,h,n,a.P.id0?q(k(a.O.id0,c.G,d.G),0):a.Fa.id0))}}},DELAY:function(a,c,d,e,f){e=b(a,d);switch(c.state){case 2:-1==e.state?(e.state=0,e.aD=0,d.ei=!0):0==e.state&&(e.aD+=f,(a.P.dl?q(k(a.O.dl,c.G,d.G),0):a.Fa.dl)<e.aD&&(e.state=-1,d.za=a.Sa,d.ei=!1))}},APPLY_SHAPE_KEY:function(a,c,d){function e(a,b){var c=b.yb.id0=
l.ud(l.ke,a.Qd.id0,0);c||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);var d=a.$c.sk;y.JE(c)?y.D0(c,d)||(v.error("Wrong key name:",d),a.Yb=!0):(v.error("No shape keys in object:",c.name),a.Yb=!0)}switch(c.state){case 2:var f=b(a,d,e);y.YK(f.yb.id0,a.$c.sk,a.P.skv?q(k(a.O.skv,c.G,d.G),0):a.Fa.skv);d.za=a.Sa}},OUTLINE:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.ke,a.Qd.id0,0),b.aa||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0),b.aa&&b.aa.A&&
b.aa.A.zd||(v.error("Can't evaluate 'Outline' logic node: wrong object"),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e),g=f?k(a.O.id0,c.G,d.G):g.aa;switch(a.$c.outline_operation){case "PLAY":c=g.A.ek;l.Dq(g,c.an,c.bn,c.cn);break;case "STOP":l.ku(g);break;case "INTENSITY":l.nI(g,a.P["in"]?q(k(a.O["in"],c.G,d.G),0):a.Fa["in"])}d.za=a.Sa}},MOVE_CAMERA:function(a,c,d){function e(a,b,c,d){switch(x.Vi(a)){case x.Ob:x.tI(a,b,c);break;case x.Xc:case x.He:B.nk(a,d);break;case x.ed:ha.sub(c,
b,pa),ha.normalize(pa,pa),x.vR(a,c),ja[0]=pa[0],ja[1]=0,ja[2]=pa[2],b=ha.dot(ja,pa),c=Math.acos(b/(ha.length(ja)*ha.length(pa))),b=pa[2]?Math.atan(pa[0]/pa[2]):0<pa[0]?0:Math.PI,0<pa[2]&&0<pa[0]?ma[1]=-(Math.PI+ma[1]):0<pa[2]&&0>pa[0]?ma[1]=-(Math.PI+ma[1]):0>pa[2]&&0>pa[0]?(ma[0]+=Math.PI,b=-(Math.PI-b)):0>pa[2]&&0<pa[0]&&(ma[0]+=Math.PI,b-=Math.PI),x.h4(a,b+Math.PI,-c)}B.W(a);f.$(a)}function g(a,b,c,d){n.lookAt(b,c,r.ic,ka);n.invert(ka,ka);H.fromMat4(ka,aa);W.fromMat3(aa,K);W.normalize(K,K);a=S.fe(a.A.D);
S.ti(b,a,K,d)}function l(a,b,d){(b.yb.ca=h(a,"id0",m,c.G,d.G))||m||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.yb.tr=h(a,"id1",p,c.G,d.G);b.yb.tr||p||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.yb.ta=h(a,"id2",u,c.G,d.G);b.yb.ta||u||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Rc={wS:new Float32Array(3),vS:new Float32Array(3),yG:new Float32Array(3),RI:new Float32Array(3),qS:new Float32Array(3),xG:new Float32Array(3),
Cn:new Float32Array(8),tk:new Float32Array(8),kv:new Float32Array(8)}}var m=a.P.id0,p=a.P.id1,u=a.P.id2;switch(c.state){case 2:var y=b(a,d,l),t=m?k(a.O.id0,c.G,d.G):y.yb.ca,A=u?k(a.O.id2,c.G,d.G):y.yb.ta,z=S.X((p?k(a.O.id1,c.G,d.G):y.yb.tr).A.D),A=S.X(A.A.D);switch(y.state){case -1:var C=a.P.dur?q(k(a.O.dur,c.G,d.G),0):a.Fa.dur;if(0==C){g(t,z,A,y.Rc.tk);e(t,z,A,y.Rc.tk);d.za=a.Sa;break}a=S.X(t.A.D);ha.copy(a,y.Rc.wS);var D=x.Vi(t);D==x.ed?ha.copy(t.A.Hc,y.Rc.RI):D==x.He||D==x.Xc?(S.copy(t.A.D,y.Rc.Cn),
g(t,z,A,y.Rc.tk)):ha.copy(t.A.pivot,y.Rc.RI);ha.copy(z,y.Rc.vS);ha.copy(A,y.Rc.qS);y.state=0;C=G.Hi(0,1,1E3*C,function(a){N.Ya()&&(D==x.He||D==x.Xc?S.qr(y.Rc.Cn,y.Rc.tk,r.qn(a),y.Rc.kv):(y.Rc.xG=ha.lerp(y.Rc.RI,y.Rc.qS,r.qn(a),y.Rc.xG),y.Rc.yG=ha.lerp(y.Rc.wS,y.Rc.vS,r.qn(a),y.Rc.yG)),e(t,y.Rc.yG,y.Rc.xG,y.Rc.kv),1==a&&(y.state=1))});break;case 1:G.Sk(C),y.state=-1,d.za=a.Sa}}},SET_CAMERA_MOVE_STYLE:function(a,c,d){function e(a,b){g.id0||(b.yb.id0=l.ud(l.ke,a.Qd.id0,0))||(v.error("Logic script error: object not found. Node: ",
a.name),a.Yb=!0);g.pvo&&!g.id1&&(b.yb.id1=l.ud(l.ke,a.Qd.id1,0))}var g=a.P;switch(c.state){case 2:var h=b(a,d,e),m=g.id0?k(a.O.id0,c.G,d.G):h.yb.id0,n=m.A;h.iX={yn:n.yn,use_panning:n.use_panning,yc:n.yc,ib:n.ib,Ub:n.Ub,ge:n.ge,he:n.he,Se:n.Se,Nj:n.Nj};if(qa.mb(m)){var n=m.A,p=h.iX;x.Xw(m);switch(a.$c.camera_move_style){case 0:n.xb=x.He;break;case 2:n.xb=x.Xc;var u=S.X(n.D);x.r4(m,u,null,p.yc,p.ib);break;case 3:n.xb=x.ed;var u=S.X(n.D),y=pa;a.P.pvo?(h=g.id1?k(a.O.id1,c.G,d.G):h.yb.id1,y=S.X(h.A.D)):
(y[0]=a.P.pvx?q(k(a.O.pvx,c.G,d.G),0):a.Fa.pvx,y[1]=a.P.pvy?q(k(a.O.pvy,c.G,d.G),0):a.Fa.pvy,y[2]=a.P.pvz?q(k(a.O.pvz,c.G,d.G),0):a.Fa.pvz);x.KR(m,u,y,p.Ub,p.ib,p.ge,p.he,p.Nj);break;case 1:n.xb=x.Ob,u=S.X(n.D),y=pa,a.P.pvo?(h=g.id1?k(a.O.id1,c.G,d.G):h.yb.id1,y=S.X(h.A.D)):(y[0]=a.P.pvx?q(k(a.O.pvx,c.G,d.G),0):a.Fa.pvx,y[1]=a.P.pvy?q(k(a.O.pvy,c.G,d.G),0):a.Fa.pvy,y[2]=a.P.pvz?q(k(a.O.pvz,c.G,d.G),0):a.Fa.pvz),x.LR(m,u,y,p.yc,p.ib,p.Ub,p.Se,p.use_panning)}ja[0]=a.P.vtr?q(k(a.O.vtr,c.G,d.G),0):a.Fa.vtr;
ja[1]=a.P.vro?q(k(a.O.vro,c.G,d.G),0):a.Fa.vro;ja[2]=a.P.vzo?q(k(a.O.vzo,c.G,d.G),0):a.Fa.vzo;ja[0]=r.pa(ja[0],0,Infinity);ja[1]=r.pa(ja[1],0,Infinity);ja[2]=r.pa(ja[2],0,.99);n.Ys=ja[0];n.Xs=ja[1];n.Zs=ja[2];B.W(m);f.$(m);x.pr(m)}else v.error("Logic script error: object is not a Camera. Node: ",a.name);d.za=a.Sa}},SET_CAMERA_LIMITS:function(a,c,d){function e(a,b){var c;g.id0||(c=b.yb.id0=l.ud(l.ke,a.Qd.id0,0),c||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var g=a.P;
switch(c.state){case 2:var h=b(a,d,e),h=g.id0?k(a.O.id0,c.G,d.G):h.yb.id0;if(qa.mb(h)){switch(h.A.xb){case x.Ob:if(a.P.dsl){var m=a.P.dslmin?q(k(a.O.dslmin,c.G,d.G),0):a.Fa.dslmin,n=a.P.dslmax?q(k(a.O.dslmax,c.G,d.G),0):a.Fa.dslmax,r={};r.min=Math.max(m,0);r.max=Math.max(n,0);x.hR(h,r)}a.P.vrl&&(m=a.P.vrldown?q(k(a.O.vrldown,c.G,d.G),0):a.Fa.vrldown,n=a.P.vrlup?q(k(a.O.vrlup,c.G,d.G),0):a.Fa.vrlup,r={},r.down=m,r.up=n,r.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,x.gC(h,r));a.P.hrl&&(m=
a.P.hrlleft?q(k(a.O.hrlleft,c.G,d.G),0):a.Fa.hrlleft,n=a.P.hrlright?q(k(a.O.hrlright,c.G,d.G),0):a.Fa.hrlright,r={},r.left=m,r.right=n,r.camera_space="CAMERA"==a.$c.cam_lim_hor_rot_space_type,x.$B(h,r));a.P.pvl&&(m=a.P.pvlmin?q(k(a.O.pvlmin,c.G,d.G),0):a.Fa.pvlmin,c=a.P.pvlmax?q(k(a.O.pvlmax,c.G,d.G),0):a.Fa.pvlmax,r={},r.min_z=m,r.max_z=c,x.zR(h,r));break;case x.ed:a.P.htl&&(m=a.P.htlmin?q(k(a.O.htlmin,c.G,d.G),0):a.Fa.htlmin,n=a.P.htlmax?q(k(a.O.htlmax,c.G,d.G),0):a.Fa.htlmax,r={},r.min=m,r.max=
n,x.uR(h,r));a.P.vtl&&(m=a.P.vtlmin?q(k(a.O.vtlmin,c.G,d.G),0):a.Fa.vtlmin,n=a.P.vtlmax?q(k(a.O.vtlmax,c.G,d.G),0):a.Fa.vtlmax,r={},r.min=m,r.max=n,x.GR(h,r));a.P.vrl&&(m=a.P.vrldown?q(k(a.O.vrldown,c.G,d.G),0):a.Fa.vrldown,n=a.P.vrlup?q(k(a.O.vrlup,c.G,d.G),0):a.Fa.vrlup,r={},r.down=m,r.up=n,r.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,x.qA(h,r));a.P.dsl&&(m=a.P.dslmin?q(k(a.O.dslmin,c.G,d.G),0):a.Fa.dslmin,n=a.P.dslmax?q(k(a.O.dslmax,c.G,d.G),0):a.Fa.dslmax,r={},r.min=Math.max(m,0),
r.max=Math.max(n,0),x.pA(h,r));break;case x.Xc:a.P.vrl&&(m=a.P.vrldown?q(k(a.O.vrldown,c.G,d.G),0):a.Fa.vrldown,n=a.P.vrlup?q(k(a.O.vrlup,c.G,d.G),0):a.Fa.vrlup,r={},r.down=m,r.up=n,r.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,x.gC(h,r)),a.P.hrl&&(m=a.P.hrlleft?q(k(a.O.hrlleft,c.G,d.G),0):a.Fa.hrlleft,n=a.P.hrlright?q(k(a.O.hrlright,c.G,d.G),0):a.Fa.hrlright,r={},r.left=m,r.right=n,r.camera_space="CAMERA"==a.$c.cam_lim_hor_rot_space_type,x.$B(h,r))}B.W(h);f.$(h)}else v.error("Logic script error: object is not a Camera. Node: ",
a.name);d.za=a.Sa}},MOVE_TO:function(a,c,d){function e(a,b){B.nk(a,b);B.W(a);f.$(a)}function g(a,b,d){b.yb.id0=h(a,"id0",m,c.G,d.G);b.yb.id0||m||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.yb.id1=h(a,"id1",n,c.G,d.G);b.yb.id1||n||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Fc={UM:new Float32Array(8),sF:new Float32Array(8),UO:new Float32Array(8)}}var l=a.P,m=l.id0,n=l.id1;switch(c.state){case 2:var p=b(a,d,g),u=l.id0?k(a.O.id0,
c.G,d.G):p.yb.id0;if(u.ea)switch(S.copy(u.A.D,p.Fc.UM),S.copy((l.id1?k(a.O.id1,c.G,d.G):p.yb.id1).A.D,p.Fc.sF),p.state){case -1:l=a.P.dur?q(k(a.O.dur,c.G,d.G),0):a.Fa.dur;if(0==l){e(u,p.Fc.sF);d.za=a.Sa;break}p.state=0;var y=G.Hi(0,1,1E3*l,function(a){N.Ya()&&(p.Fc.Cca=S.qr(p.Fc.UM,p.Fc.sF,r.qn(a),p.Fc.UO),e(u,p.Fc.UO),1==a&&(p.state=1))});break;case 1:G.Sk(y),p.state=-1,d.za=a.Sa}else v.error("Logic script error: object '"+u.name+"' must be dynamic. Node: ",a.name),d.za=a.Sa}},TRANSFORM_OBJECT:function(a,
c,d){function e(a,b,c){0==c?B.nk(a,b):B.fC(a,b);B.W(a);f.$(a)}var g=a.P.id0,l=b(a,d,function(a,b,d){b.aa=h(a,"id0",g,c.G,d.G);b.aa||g||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Fc={BC:0,Cn:new Float32Array(8),tk:new Float32Array(8),kv:new Float32Array(8)}});switch(c.state){case 2:var m=g?k(a.O.id0,c.G,d.G):l.aa;switch(l.state){case -1:ja[0]=a.P.trx?q(k(a.O.trx,c.G,d.G),0):a.Fa.trx;ja[1]=a.P["try"]?q(k(a.O["try"],c.G,d.G),0):a.Fa["try"];ja[2]=a.P.trz?q(k(a.O.trz,
c.G,d.G),0):a.Fa.trz;pa[0]=a.P.rox?q(k(a.O.rox,c.G,d.G),0)*Math.PI/180:a.Fa.rox;pa[1]=a.P.roy?q(k(a.O.roy,c.G,d.G),0)*Math.PI/180:a.Fa.roy;pa[2]=a.P.roz?q(k(a.O.roz,c.G,d.G),0)*Math.PI/180:a.Fa.roz;var n=a.P.sc?k(a.O.sc,c.G,d.G):a.Fa.sc;r.bl(pa,K);S.ti(ja,n,K,l.Fc.tk);l.Fc.BC=a.$c.space_type;switch(l.Fc.BC){case 0:B.Im(m,l.Fc.Cn);break;case 1:B.dv(m,l.Fc.Cn);break;case 2:B.dv(m,l.Fc.Cn),S.multiply(l.Fc.Cn,l.Fc.tk,l.Fc.tk)}n=a.P.dur?q(k(a.O.dur,c.G,d.G),0):a.Fa.dur;if(0==n){e(m,l.Fc.tk,l.Fc.BC);d.za=
a.Sa;break}l.state=0;n=G.Hi(0,1,1E3*n,function(a){N.Ya()&&(S.qr(l.Fc.Cn,l.Fc.tk,r.qn(a),l.Fc.kv),e(m,l.Fc.kv,l.Fc.BC),1==a&&(l.state=1))});break;case 1:G.Sk(n),l.state=-1,d.za=a.Sa}}},SPEAKER_PLAY:function(a,c,e){function f(a,b,d){b.aa=h(a,"id0",g,c.G,d.G);b.aa||g||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var g=a.P.id0;switch(c.state){case 1:void 0==a.P.not_wait&&(a.P.not_wait=!0);break;case 2:var l=b(a,e,f);l.aa=g?k(a.O.id0,c.G,e.G):l.aa;d.DG(l.aa)||0!=l.state||(l.state=
1);switch(l.state){case -1:for(var m in c.zg){var n=c.zg[m].$b.za;-1!=n&&(n=c.zg[m].ga[n],"SPEAKER_PLAY"==n.type&&n!=a&&0==l.state&&n.aa==a.aa&&(n.state=1))}a.P.not_wait||(e.ei=!0);d.zB(l.aa);l.state=0;break;case 0:a.P.not_wait&&(e.za=a.Sa,l.state=-1);break;case 1:a.P.not_wait||(e.ei=!1);e.za=a.Sa;l.state=-1;break;default:r.K("Unknown state of "+a.name),l.state=-1}}},SPEAKER_STOP:function(a,c,e){function f(a,b,d){b.aa=h(a,"id0",g,c.G,d.G);b.aa||g||(v.error("Logic script error: object not found. Node: ",
a.name),a.Yb=!0)}var g=a.P.id0;switch(c.state){case 2:var l=b(a,e,f);d.stop(g?k(a.O.id0,c.G,e.G):l.aa);e.za=a.Sa}},STOP_ANIM:function(a,c,d){function e(a,b,d){b.aa=g?l.$z(a.$M[0],0):h(a,"id0",f,c.G,d.G);b.aa||f||(v.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var f=a.P.id0,g=a.P.env;switch(c.state){case 2:var m=b(a,d,e);m.aa=f?k(a.O.id0,c.G,d.G):m.aa;u.stop(m.aa,u.Gt);a.P.rst&&u.O3(m.aa,u.Gt);d.za=a.Sa}},STOP_TIMELINE:function(a,b,c,d){switch(b.state){case 2:a.P.rst&&D.xR(d),
D.eS(),c.za=a.Sa}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d=0,e="{",f;for(f in a.O){0<d&&(e+=", ");var g=k(a.O[f],b.G,c.G),e=e+('"'+a.O[f][1]+'": ');try{e+=JSON.stringify(g)}catch(za){e=g?e+('{"name": "'+g.name+'", "type": "'+g.type+'"}'):e+"Object"}++d}v.log(a.$c.msg,e+"}");c.za=a.Sa}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.P.id0?q(k(a.O.id0,b.G,c.G),1):a.Rl.id0,e=a.P.id1?q(k(a.O.id1,b.G,c.G),1):a.Rl.id1,f=0;switch(a.$c.string_operation){case 0:f=d+e;break;case 1:f=
d.indexOf(e);break;case 2:f=d.replace(e,a.P.id2?q(k(a.O.id2,b.G,c.G),1):a.Rl.id2);break;case 3:var h=a.O,f=d.substring(0,d.indexOf(e));g(h.dst1,b.G,c.G,d.substring(d.indexOf(e)+1,d.length));""==k(h.dst,b.G,c.G)&&(f=k(h.dst1,b.G,c.G),g(h.dst1,b.G,c.G,""));break;case 4:switch(a.$c.condition){case 5:f=d==e?1:0;break;case 4:f=d!=e?1:0;break;case 3:f=d<e?1:0;break;case 2:f=d>e?1:0;break;case 1:f=d<=e?1:0;break;case 0:f=d>=e?1:0}}g(a.O.dst,b.G,c.G,f);c.za=a.Sa}},GET_TIMELINE:function(a,b,c,d){switch(b.state){case 2:d=
a.P.nla?q(D.Lz(d),0):q(G.Lz(d),0),g(a.O.vd,b.G,c.G,d),c.za=a.Sa}},JSON:function(a,b,c){function d(a,b,c,d){for(var e=0;e<b.length;e++){for(var f=b[e].split("."),g=a,k=c[e],h=0;h<f.length&&(g=g[f[h]],void 0!==g&&null!==g);h++);g=P(g);d[k]=g}}function e(a,b,c,d){d||(d={});for(var e=0;e<b.length;e++){var f=b[e].split("."),g=d,k=c[e];if(k in a){for(var h=0;h<f.length-1;h++)void 0===g[f[h]]&&(g[f[h]]=isNaN(f[h+1])?{}:[]),g=g[f[h]];g[f[f.length-1]]=P(a[k])}}}switch(b.state){case 2:switch(a.$c.json_operation){case "PARSE":try{var f=
JSON.parse(q(k(a.O.jsn,b.G,c.G),1));d(f,a.u2,a.w2,c.G)}catch(ba){v.error("logic script error: non valid JSON string")}break;case "ENCODE":f={},e(c.G,a.NZ,a.OZ,f),f=q(JSON.stringify(f),1),g(a.O.jsn,b.G,c.G,f)}c.za=a.Sa}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var d=a.P.cb?q(k(a.O.cb,b.G,c.G),1):a.Rl.cb,e=[],f=0,h="id"+f,m=a.$c.js_cb_params;h in m;)h=0==m[h]?l.ud(l.ke,a.Qd[h],0):k(a.O[h],b.G,c.G),e.push(h),f++,h="id"+f;m=[];f=0;for(h="out"+f;h in a.O;)h=k(a.O[h],b.G,c.G),m.push(h),f++,
h="out"+f;f=1;if(d in wa){if(f=!wa[d](e,m))for(d=0;d<m.length;d++)h="out"+d,h in a.O&&g(a.O[h],b.G,c.G,P(m[d]))}else v.error("logic script error: no custom callback with id "+d);f&&(c.za=a.Sa)}},EMPTY:M,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date,e,f,k,h,l;"L"==a.$c.time_type?(e=d.getFullYear(),f=d.getMonth(),k=d.getDate(),h=d.getHours(),l=d.getMinutes(),d=d.getSeconds()):(e=d.getUTCFullYear(),f=d.getUTCMonth(),k=d.getUTCDate(),h=d.getUTCHours(),l=d.getUTCMinutes(),d=d.getUTCSeconds());
a.P.y&&g(a.O.y,b.G,c.G,e);a.P.M&&g(a.O.M,b.G,c.G,f);a.P.d&&g(a.O.d,b.G,c.G,k);a.P.h&&g(a.O.h,b.G,c.G,h);a.P.m&&g(a.O.m,b.G,c.G,l);a.P.s&&g(a.O.s,b.G,c.G,d);c.za=a.Sa}},ELAPSED:function(a,b,c,d,e){switch(b.state){case 2:g(a.O.s,b.G,c.G,e),c.za=a.Sa}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.EP.id0;for(var d=a.Vm.id0,e=0;e<b.Vm.length;e++){var f=b.Vm[e];if(f.id[0][0]==c[0]&&f.id[0][1]==c[1]&&f.id[1]==d){a.LF=e;break}}break;case 2:d={};c.tD={};for(e in a.O){var f=a.O[e][1],g=a.Rl[e];d[g]=
c.G[f];e.startsWith("out")&&(c.tD[f]=g)}c.oo.push({DL:a,G:d,RA:b.Vm[a.LF]});c.G=d;c.iJ=!0;c.za=b.Vm[a.LF].Xu.ga[0].Sa}},DEF_FUNC:M,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.O);for(var d in b)b[d].startsWith("id")||b.splice(d,1);a.OA=b;break;case 2:var e=k(a.O.v,b.G,c.G);for(d in a.OA)if(e==k(a.O[a.OA[d]],b.G,c.G)){c.za=a.xP[a.OA[d]];return}c.za=a.Sa}}},ea=[],wa={},da={};a.S0=function(a,b){var c={Me:b,WQ:a.name,state:0,Mr:null,vb:a,lF:null,zg:[],Vm:[],sw:[],G:{},tD:{}};a.b9=c;A(a,
c)};a.update=function(a,b){var c=D.o0();if(!(0>=c))for(var d=0;d<ea.length;d++)for(var e=d,f=a,g=b,k=c,h=ea[e],l=0;l<ea[e].zg.length;l++){h.lF=ea[e].zg[l];var m=ea[e].zg[l],n=h,r=f,q=g,p=k;m.$b.iJ=!1;var v=m.$b.oo,u=1>=v.length?m.ga:v[v.length-1].RA.Xu.ga;if(u.length){for(var y=0;y<u.length;y++)u[y].DB=!1;for(y=0;y<u.length;y++){if(0<=m.$b.za)var x=u[m.$b.za];else{if(1<m.$b.oo.length){n=m.$b.oo.pop().DL;v=v[v.length-1];m.$b.za=n.Sa;n=m.$b.G;m.$b.G=v.G;for(var t in m.$b.tD)m.$b.G[t]=n[m.$b.tD[t]]}break}if(x.DB)break;
if(x.Yb)if("ENTRYPOINT"==x.type)break;else m.$b.za=x.Sa,x.DB=!0;else if(x.FH(x,n,m.$b,r,q,p),x.DB=!0,m.$b.iJ)break}}}};a.i9=function(a,b){wa[a]=b};a.sda=function(a){delete wa[a]};a.Ida=function(a,b){for(var c=0;c<ea.length;c++)if(ea[c].WQ==a){for(var c=ea[c],d=0;d<c.zg.length;d++){var e=c.zg[d].ga[0];if(e.name==b){e.P.js&&(e.Yb=!1);c.zg[d].$b.za=0;break}}break}};a.Ja=function(){ea.length=0;wa={};da={}}};b4w.module.__nla=function(a,t){function p(a,b){for(var c=e.D_(),g=[],k=0,h=0;h<a.length;h++){var l=a[h];""!=l.Nt?l=x.Od("uuid",l.Nt,c):(l=l.Zg,l=x.Od("name",l,c)||x.Od("name",l+"_B4W_BAKED",c));if(l){var l=l.fcurves,m=[],f;for(f in l)m.push(f);g.push(m)}}for(h=0;h<g.length;h++){c=!1;for(f=0;f<h;f++)if(x.yW(g[h],g[f])){a[h].Qc=a[f].Qc;c=!0;break}c||(a[h].Qc=b+k++)}return k}function c(){return{type:"CLIP",Ia:0,ub:0,Hl:!1,paused:!1,Zg:"",Nt:"",Qc:0,op:null,lm:0,Zn:0,eN:0,dN:0,$S:!1,scale:1,repeat:1,
MK:0}}function b(a,c,e){if(a.animation_data){var g=a.animation_data.nla_tracks;if(g)for(var k=0;k<g.length;k++)g[k].op=e,c.push(g[k])}a=a.nodes;for(k=0;k<a.length;k++)if(g=a[k],g.node_group){var h=g.node_group.node_tree;if(h){var l=e.slice();l.push(g.name);b(h,c,l)}}}function k(a,b){var c=Math.round(a)-b.Ia;b.Yl&&(c%=b.Fm,0>c&&(c+=b.Fm));return b.tc+c}function g(a,b){var c=(b-l)*J.ee()+a.tc;c>a.Ia?(c-=a.Ia,a.be&&(c%=a.ub-a.Ia+1),c+=a.Ia):c=a.Ia;return c}function M(a,b){a=x.pa(a,b.Ia,b.ub);var c=a==
b.ub?b.MK:b.lm+(a-b.Ia)/b.scale%(b.Zn-b.lm);b.$S&&(c=b.Zn-c+b.lm);return c}function m(a,b){for(var e=[],g=0;g<a.length;g++){var k=a[g],h=k.strips;if(h)for(var l=0;l<h.length;l++){var m=h[l],f=c();f.type=m.type;f.Ia=m.frame_start;f.ub=m.frame_end;f.Qc=b;f.lm=m.action_frame_start;f.Zn=m.action_frame_end;f.$S=m.use_reverse;f.scale=m.scale;f.repeat=m.repeat;m.action&&(f.Zg=m.action.name,f.Nt=m.action.uuid,f.op=k.op);e.push(f)}}return e}function z(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&a.data.animation_data&&
a.data.animation_data.nla_tracks.length?!0:!1}function C(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],e=c.se;if(c=c.Ch&&e)a:{if(e.animation_data&&(c=e.animation_data.nla_tracks)&&c.length){c=!0;break a}e=e.nodes;for(c=0;c<e.length;c++);c=!1}if(c)return!0}return!1}function h(a,b){var c=O.R();if(c.Ta){var e=g(c.Ta,b);c.Ta.tc-=e-a;c.Ta.dr=!0}}var e=t("__animation"),A=t("__objects"),q=t("__obj_util"),P=t("__print"),O=t("__scenes"),I=t("__sfx"),
u=t("__textures"),J=t("__time"),x=t("__util"),D=[],l=-1;a.Ms=function(a,e){for(var g,k=null,h=e.T.length-1;0<=h&&(g=e.T[h],!g.vb.b4w_use_nla||(k=g,!g.vb.IK));h--);if(g=k){g.eQ=!0;k=0;if((h=a.animation_data)&&h.nla_tracks.length){var l=h.nla_tracks;if(q.rr(e)||q.mb(e)||q.mf(e)||q.sr(e)||q.nv(e)||q.ur(e)||q.Sm(e)||q.pl(e))l=m(l,k),l.length&&(e.Pf=e.Pf.concat(l),k++)}z(a)&&(l=a.data.animation_data.nla_tracks,l=m(l,k),l.length&&(e.Pf=e.Pf.concat(l),k++));if(q.mf(e))for(var u=e.Ec,h=0;h<u.length;h++){var n=
u[h];n.Ch&&n.se&&(l=[],b(n.se,l,[n.name]),l=m(l,k),l.length&&(k+=p(l,k),e.Pf=e.Pf.concat(l)))}if(q.pl(e))a.use_nodes&&a.node_tree&&(l=[],b(a.node_tree,l,[a.name]),l=m(l,k),l.length&&(p(l,k),e.Pf=e.Pf.concat(l)));else{for(h=0;h<a.particle_systems.length;h++)l=a.particle_systems[h],u=l.settings,"EMITTER"==u.type&&u.b4w_allow_nla&&(u=c(),u.type="CLIP",u.Ia=g.vb.frame_start,u.ub=g.vb.frame_end+1,u.Zg=l.name,u.Qc=k,u.lm=u.Ia,u.Zn=u.ub,e.Pf.push(u),k++);g=k+1;for(h=0;h<e.Fd.length;h++)l=e.Fd[h],l.YV&&(k=
g,u=c(),u.type="CLIP",u.Ia=l.Ia,u.ub=l.ub,u.Zg=l.name,u.Qc=k,u.lm=u.Ia,u.Zn=u.ub,e.Pf.push(u))}}};a.V5=function(a,b,e){a.Ta||(a.Ta={Ia:a.frame_start,ub:a.frame_end,tc:0,uv:-1,Vv:a.frame_end,Wv:a.frame_start,Ss:null,be:b,yb:[],wa:[],WQ:a.name,Tm:!1,dr:!1,WH:!0},D.push(a.Ta));b=a.Ta;for(var g=A.jO(a,"ALL",e),k=0;k<g.length;k++){var h=g[k];if(h.Pf.length){b.yb[e]||(b.yb[e]=[]);for(var l=0;l<h.T.length;l++){var m=h.T[l];m.vb==a&&m.eQ&&b.yb[e].push(h)}for(var l=h.Pf,m=b,f=h.name,q=0;q<l.length;q++){var d=
l[q];m.Ia>d.ub||m.ub<d.Ia?(P.warn("NLA: Strip is out of scene range: "+(f+" ["+d.Ia+":"+d.ub+"]")),l.splice(q,1),q--):d.Zg||"CLIP"!=d.type||(P.warn('NLA: no action in strip for object "'+f+'".'),l.splice(q,1),q--)}h=h.Pf;l=b;for(m=0;m<h.length;m++){for(var f=h[m],q=l.Ia,d=l.ub+1,p=0;p<h.length;p++){var u=h[p];f.Qc==u.Qc&&(u.ub<=f.Ia&&(q=f.Ia),u.Ia>=f.ub&&(d=Math.min(d,u.Ia)))}f.eN=q;f.dN=d;f.MK=f.repeat%1?f.lm+f.repeat%1*(f.Zn-f.lm):f.Zn}}}a=a.J.at;for(k=0;k<a.length;k++)g=a[k].J,g.Hn&&(g.sb||g.ie)&&
g.dt==e&&(h=c(),h.type="VIDEO",g.Yl?(h.Ia=0,h.ub=b.ub):(h.Ia=x.pa(g.Ia,0,b.ub),h.ub=x.pa(g.Ia+g.Fm,0,b.ub)),h.Zg=a[k].name,b.wa.push(g))};a.L2=function(){for(var a=0;a<D.length;a++)for(var b=D[a],c=0;c<b.yb.length;c++){var g=b.yb[c];if(g)for(a=0;a<g.length;a++)for(var k=g[a],h=k.Pf,l=0;l<h.length;l++){var m=h[l];e.N0(k,m.op,m.dd,m.Zg,m.Qc)}}};a.start=function(){l=0};a.o0=function(){return l};a.cba=function(a){return a.Ta?a.Ta.tc:null};a.Rda=function(a,b){return a.Ta?(a.Ta.tc=b,!0):!1};a.update=function(a,
b){if(!(0>l)){0==l&&(l=a);for(var c=0;c<D.length;c++){var m=D[c];m.Tm&&(m.tc-=J.ee()*b);var q=g(m,a);if((!m.Tm||m.dr)&&q>=m.Vv)if(m.be){var q=m,p=a;q.Ss&&q.Ss();h(q.Wv,p);q.WH=!0;q=g(q,p)}else{var p=m,v=q;p.Tm=!0;p.tc-=v-p.Vv;p.Ss&&p.Ss()}if(!m.Tm||m.dr){for(var p=m,v=q,n=0;n<p.yb.length;n++){var f=p.yb[n];if(f)for(var t=0;t<f.length;t++){for(var d=f[t],A=d.Pf,z=0;z<A.length;z++){var C=A[z];"SOUND"==C.type&&v<p.uv-1E-6&&(C.Hl=!1)}for(z=0;z<A.length;z++)switch(C=A[z],C.type){case "CLIP":if(C.eN<=v&&
v<C.dN&&!C.Hl){var n=d,r=C,O=r.op;""!=r.Nt?e.tW(n,O,r.Nt,r.Qc):e.apply(n,O,r.Zg,r.Qc);e.eI(n,e.yT,r.Qc);O=M(r.Ia,r);e.ZB(n,O,r.Qc);for(n=0;n<A.length;n++)A[n]!=C&&A[n].Qc==C.Qc&&(A[n].Hl=!1);C.Hl=!0}C.Hl&&(r=d,O=M(v,C),1E-6<Math.abs(O-e.KN(r,C.Qc))&&e.ZB(r,O,C.Qc));break;case "SOUND":if((v<p.uv-1E-6||p.uv<C.Ia)&&C.Ia<=v&&v<C.ub&&!C.Hl){var r=d,N=C,O=(N.Ia-v)/J.ee(),N=(N.ub-N.Ia)/J.ee();I.play(r,O,N);C.Hl=!0}p.uv<C.ub&&C.ub<=v&&C.Hl&&(C.Hl=!1)}}}p=a;v=m;f=q;for(t=0;t<v.wa.length;t++)if(d=v.wa[t],d.sb||
d.ie){A=u.kT(d);z=d;C=x.pa(k(f,z),z.tc,z.tc+u.lT(z)-1);z.ie&&(C=u.o6(z,C),C==z.jw&&C--);z=C;C=u.mT(d);r=n=!1;if(v.dr||v.WH)r=!0;v.Tm||(O=k(f,d),O=d.tc<=O&&O<=d.tc+u.lT(d),N=u.nT(d),d.Yl&&z==C&&(r=!0),N||A==z||(r=!0),O&&!N?u.oQ(d):O&&N?n=!0:!O&&N&&(d.sb&&A<z?n=!0:u.xH(d)));r?(u.Q3(d.Sw,z,d.dt),d.ie&&(d.ln=u.SB(d,p))):n&&u.oT(d)&&(d.sb?u.RS(d):(A=u.SB(d,p),A!=d.ln&&(d.Jl=z,u.QS(d)),d.ln=A))}m.uv=q}m.dr=!1;m.WH=!1}}};a.Ja=function(a){if(0==a)D.length=0,l=-1;else for(var b=0;b<D.length;b++)D[b].yb[a]=
null};a.xL=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||z(a)||C(a)?!0:!1};a.ZB=h;a.Lz=function(a){var b=O.R();return b.Ta?g(b.Ta,a):-1};a.eS=function(){var a=O.R();if(a.Ta){a.Ta.Tm=!0;for(var a=a.Ta.wa,b=0;b<a.length;b++)u.xH(a[b])}};a.H2=function(){var a=O.R();a.Ta&&(a.Ta.Tm=!1,a.Ta.Ss=null)};a.dba=function(){var a=O.R();return a.Ta?a.Ta.Ia:-1};a.TN=function(){var a=O.R();return a.Ta?a.Ta.ub:-1};a.ov=function(){var a=O.R();return a.Ta?!a.Ta.Tm:!1};a.S9=function(){var a=O.R();
return a.Ta?a.b4w_use_nla:!1};a.R9=function(){var a=O.R();return a.Ta?0<a.b4w_logic_nodes.length:!1};a.gea=function(a,b){var c=O.R();if(c.Ta)c.Ta.Wv=a,c.Ta.Vv=b;else return!1};a.pI=function(a){var b=O.R();b.Ta&&(b.Ta.Vv=a)};a.c4=function(a){var b=O.R();b.Ta&&(b.Ta.Wv=a)};a.xda=function(){var a=O.R();if(a.Ta)a=a.Ta,a.Wv=a.Ia,a.Vv=a.ub;else return!1};a.Oda=function(a){var b=O.R();if(b.Ta)b.Ta.be=a;else return!1};a.Y9=function(){var a=O.R();a.Ta&&(a.Ta.Ss=null)};a.xR=function(a){var b=O.R().Ta;b&&(b.tc=
-(a-l)*J.ee()+b.Wv,b.dr=!0)};a.TN=function(){var a=O.R().Ta;return a?a.ub:null}};b4w.module.__controls=function(a,t){function p(a,b){b||(b=A.qe());return{type:a,value:0,ia:null,element:b,gb:!1,key:0,Tb:"",Cj:!1,TE:null,SE:function(){},RE:null,gM:function(){},pk:null,from:new Float32Array(3),to:new Float32Array(3),ZO:!1,sA:!1,Xv:0,EQ:function(){},axis:"",Bh:0,Js:new Float32Array(3),FB:new Float32Array(4),threshold:0,yQ:new Float32Array(4),dy:0,cy:0,RQ:0,ey:0,uh:0,repeat:!1,cN:!1,Ti:0,position:l.create(),orientation:u.create(),callback:function(){}}}function c(a){function b(){return{tm:new Float32Array(2),
Ar:!0,aa:null,identifier:-1,rk:0}}a||(a=A.qe());for(var c=0;c<H.length;c++){var d=H[c];if(a==d.element)return d}d={element:a,pv:!0,Ag:0,EG:!0,bB:0,cB:0,mp:0,np:0,Ov:0,Pv:0,lj:new Float32Array(2),vf:new Float32Array(2),mj:new Float32Array(2),Yf:new Float32Array(2),dD:0,aJ:0,tS:0,sg:new Uint8Array(256),ED:0,jG:null,dk:b(),Vl:Array(10),FG:!1,AO:u.create(),gA:0,fA:0,eA:0,lG:0,kG:0,dA:Infinity,rH:null,qH:null,fH:null,bH:null,dH:null,ZI:null,YI:null,eH:null,cH:null,DH:null,Oca:null,$I:null,XI:null,WI:null,
El:{}};for(c=0;10>c;++c)d.Vl[c]=b();d.rH=function(a){d.FG||(q.x0(a,d.AO),d.FG=!0)};d.qH=function(a){a=l.copy(a,W);d.eA=a[0];d.fA=a[1];d.gA=a[2];Infinity==d.dA&&(d.dA=a[0],d.kG=a[1],d.lG=a[2])};d.fH=function(a){d.ED+=a*v.a2};d.bH=function(a){var b=q.ba(q.Wc,d.element),b=q.$h(b,q.vj,n);d.bB=b[0];d.cB=b[1];d.mp=b[0];d.np=b[1];if(3==d.Ag||0==d.Ag)d.Ag=1;d.which=a};d.dH=function(){var a=q.ba(q.Wc,d.element),a=q.$h(a,q.vj,n),a=A.vy(a[0],a[1],n);d.dk.Ar=!1;d.dk.tm[0]=a[0];d.dk.tm[1]=a[1]};d.ZI=function(a){for(var b=
0;b<a.length;++b){for(var c=a[b],e=null,f=null,g=0;g<d.Vl.length;g++){var k=d.Vl[g],h=3==k.rk||0==k.rk;if(k.identifier==c.identifier){h&&(f=k);break}else!e&&h&&(e=k,e.identifier=c.identifier)}if(c=f||e)e=A.vy(a[b].clientX,a[b].clientY,n),c.Ar=!1,c.rk=1,c.tm[0]=e[0],c.tm[1]=e[1]}};d.YI=function(a){for(var b=0;b<d.Vl.length;++b){for(var c=d.Vl[b],e=!1,f=0;f<a.length;++f)if(a[f].identifier==c.identifier){e=!0;break}e||(0!=c.rk&&(c.rk=3),c.aa=null)}};d.eH=function(a){var b=q.ba(q.Wc,d.element),b=q.$h(b,
q.vj,n);d.bB=b[0];d.cB=b[1];d.mp=b[0];d.np=b[1];0!=d.Ag&&(d.Ag=3);d.which=a};d.cH=function(a){N.rA&&0==d.Ag||(d.mp=a[0],d.np=a[1])};d.DH=function(a){d.Ov+=a[0];d.Pv+=a[1]};d.nP=function(a){2!=d.sg[a]&&(d.sg[a]=1,d.pv=!1)};d.pP=function(){for(var a=0;a<d.sg.length;a++)0!=d.sg[a]&&(d.sg[a]=3,d.pv=!1)};d.qP=function(a){d.pv=!1;d.sg[a]=3};d.$I=function(a){d.EG=!1;if(1==a.length)d.lj[0]=a[0].clientX,d.lj[1]=-1,d.mj[0]=a[0].clientY,d.mj[1]=-1;else if(1<a.length){d.dD=d.aJ=C(a);d.lj[0]=a[0].clientX;d.lj[1]=
a[1].clientX;d.mj[0]=a[0].clientY;d.mj[1]=a[1].clientY;var b=a[0];a=a[1];d.tS=Math.atan2(b.clientY-a.clientY,b.clientX-a.clientX)}d.vf.set(d.lj);d.Yf.set(d.mj)};d.XI=function(a){1===a.length?(d.vf[0]=a[0].clientX,d.vf[1]=-1,d.Yf[0]=a[0].clientY,d.Yf[1]=-1):1<a.length&&(d.vf[0]=a[0].clientX,d.vf[1]=a[1].clientX,d.Yf[0]=a[0].clientY,d.Yf[1]=a[1].clientY,d.dD=C(a))};d.WI=function(a){0==a.length&&(d.EG=!0)};H.push(d);return d}function b(a,b){if(b in a.El&&0<a.El[b])a.El[b]+=1;else switch(a.El[b]=1,b){case "orientation_quat":var c=
q.ba(q.tj);c&&q.Hd(c,q.sq,a.rH);break;case "orientation_angles":(c=q.ba(q.tj))&&q.Hd(c,q.sq,a.qH);break;case "mouse_wheel":(c=q.ba(q.Wc,a.element))&&q.Hd(c,q.Bt,a.fH);break;case "mouse_down_which":(c=q.ba(q.Wc,a.element))&&q.Hd(c,q.hm,a.bH);break;case "mouse_select":(c=q.ba(q.Wc,a.element))&&q.Hd(c,q.hm,a.dH);break;case "touch_select":if(c=q.ba(q.Tg,a.element))q.Hd(c,q.km,a.ZI),q.Hd(c,q.Wn,a.YI);break;case "mouse_up_which":(c=q.ba(q.Wc,a.element))&&q.Hd(c,q.At,a.eH);break;case "mouse_location":(c=
q.ba(q.Wc,a.element))&&q.Hd(c,q.vj,a.cH);break;case "mouse_pointerlock":(c=q.ba(q.Wc,a.element))&&q.Hd(c,q.XJ,a.DH);break;case "keyboard_downed_keys":if(c=q.ba(q.mt,a.element))q.Hd(c,q.yt,a.nP),q.Hd(c,q.OJ,a.pP),q.Hd(c,q.zt,a.qP);break;case "touch_start":(c=q.ba(q.Tg,a.element))&&q.Hd(c,q.km,a.$I);break;case "touch_move":(c=q.ba(q.Tg,a.element))&&q.Hd(c,q.It,a.XI);break;case "touch_end":(c=q.ba(q.Tg,a.element))&&q.Hd(c,q.Wn,a.WI)}}function k(a,b){if(b in a.El&&0<a.El[b]&&(--a.El[b],!a.El[b]))switch(b){case "orientation_quat":var c=
q.ba(q.tj);c&&q.ne(c,q.rx,a.rH);break;case "orientation_angles":(c=q.ba(q.tj))&&q.ne(c,q.sq,a.qH);break;case "mouse_wheel":(c=q.ba(q.Wc,a.element))&&q.ne(c,q.Bt,a.fH);break;case "mouse_down_which":(c=q.ba(q.Wc,a.element))&&q.ne(c,q.hm,a.bH);break;case "mouse_select":(c=q.ba(q.Wc,a.element))&&q.ne(c,q.hm,a.dH);break;case "touch_select":if(c=q.ba(q.Tg,a.element))q.ne(c,q.km,a.ZI),q.ne(c,q.Wn,a.YI);break;case "mouse_up_which":(c=q.ba(q.Wc,a.element))&&q.ne(c,q.At,a.eH);break;case "mouse_location":(c=
q.ba(q.Wc,a.element))&&q.ne(c,q.vj,a.cH);break;case "mouse_pointerlock":(c=q.ba(q.Wc,a.element))&&q.ne(c,q.XJ,a.DH);break;case "keyboard_downed_keys":if(c=q.ba(q.mt,a.element))q.ne(c,q.yt,a.nP),q.ne(c,q.OJ,a.pP),q.ne(c,q.zt,a.qP);break;case "touch_start":(c=q.ba(q.Tg,a.element))&&q.ne(c,q.km,a.$I);break;case "touch_move":(c=q.ba(q.Tg,a.element))&&q.ne(c,q.It,a.XI);break;case "touch_end":(c=q.ba(q.Tg,a.element))&&q.ne(c,q.Wn,a.WI)}}function g(a,b){a.value=Number(b)}function M(a){for(var b=a.Il,c=a.A3,
d=0;d<b.length;d++)c[d]=b[d].value;return a.K1(c)}function m(a,b){a=a||U;var c=a.kj;if(c){var d=a.Dp;if(b){var e=c[b];if(e){for(var f=e.Il,g=0;g<f.length;g++){var k=f[g],h;h=L.indexOf(k);h=-1<h?y[h]:[];1==h.length?(z(k),k=L.indexOf(k),-1<k?(L.splice(k,1),y.splice(k,1)):D.K("Sensors cache is corrupted")):1<h.length&&h.splice(h.indexOf(e),1)}delete c[b];g=d.indexOf(e);-1<g?d.splice(g,1):D.K("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(c=E.indexOf(a),-1<c?E.splice(c,1):O.error("Wrong object"))}}else{d=
[];for(g in c)d.push(g);for(g=0;g<d.length;g++)m(a,d[g])}G=!0}}function z(a){switch(a.type){case 90:I.NH(a.TE,a.Tb,a.SE);a.gb=!0;break;case 100:I.OE(a.RE);a.gb=!0;break;case 110:I.OH(a.Xv);a.gb=!0;break;case 140:a.gb=!0;break;case 20:var b=c(a.element);k(b,"keyboard_downed_keys");a.gb=!0;break;case 30:b=c(a.element);k(b,"mouse_wheel");a.gb=!0;break;case 40:b=c(a.element);k(b,"mouse_down_which");k(b,"mouse_up_which");k(b,"mouse_location");a.gb=!0;break;case 280:b=c(a.element);k(b,"mouse_pointerlock");
a.gb=!0;break;case 50:b=c(a.element);k(b,"mouse_down_which");k(b,"mouse_up_which");a.gb=!0;break;case 60:b=c(a.element);k(b,"touch_start");k(b,"touch_move");k(b,"touch_end");a.gb=!0;break;case 70:b=c(a.element);k(b,"touch_start");k(b,"touch_move");a.gb=!0;break;case 75:b=c(a.element);k(b,"touch_start");k(b,"touch_move");a.gb=!0;break;case 80:b=c(a.element);k(b,"touch_start");k(b,"touch_end");a.gb=!0;break;case 170:b=c(a.element);k(b,"mouse_select");k(b,"touch_select");k(b,"touch_start");k(b,"touch_end");
k(b,"mouse_down_which");k(b,"mouse_up_which");a.gb=!0;break;case 180:case 190:b=c(a.element);k(b,"orientation_angles");a.gb=!0;break;case 200:b=c(a.element);k(b,"orientation_quat");a.gb=!0;break;case 210:case 220:a.gb=!0}}function C(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function h(a){return 0==a?q.ba(q.cx):1==a?q.ba(q.QD):2==a?q.ba(q.RD):q.ba(q.SD)}var e=t("__config"),A=t("__container"),q=t("__input"),P=t("__objects"),O=t("__print"),I=t("__physics"),
u=t("__quat"),J=t("__time"),x=t("__tsr"),D=t("__util"),l=t("__vec3"),v=e.controls,N=e.L,E=[],U={},L=[],y=[],H=[],n=new Float32Array(2),f=new Float32Array(2),W=l.create(),d=u.create(),G=!1,B=0;a.Sg=10;a.ob=20;a.bx=30;a.Ai=40;a.Yp=50;a.PD=60;a.Ex=0;a.Dx=1;a.Cx=2;a.cE=3;var S=1;a.update=function(b,e){for(var k=0;k<H.length;k++){var m=H[k];m.dk.Ar||(m.dk.aa=P.vp(m.dk.tm[0],m.dk.tm[1]),m.dk.Ar=!0,m.jG=m.dk.aa);for(var r=0;10>r;++r){var p=m.Vl[r];p.Ar||(p.aa=P.vp(p.tm[0],p.tm[1]),p.Ar=!0,m.jG=p.aa)}}for(k=
0;k<L.length;k++)if(m=L[k],p=b,r=e)switch(m.type){case 120:var v=m.pk,t=x.Wb(v.A.D,W),v=x.Eb(v.A.D,d),A=l.dist(m.Js,t),z=m.yQ;u.invert(m.FB,z);u.multiply(v,z,z);u.normalize(z,z);z=Math.abs(2*Math.acos(z[3]));A/=r;m.dy=D.Tc(A,m.dy,r,.3);m.ia[0]=A;A=z/r;m.cy=D.Tc(A,m.cy,r,.3);m.ia[1]=A;m.dy>=m.threshold||m.cy>=m.RQ?g(m,1):g(m,0);l.copy(t,m.Js);u.copy(v,m.FB);m.Bh=p;break;case 130:v=m.pk;t=x.Wb(v.A.D,W);v=Math.abs(t[1]-m.Js[1])/r;m.ey=D.Tc(v,m.ey,r,.3);m.ia=v;m.ey>=m.threshold?g(m,1):g(m,0);l.copy(t,
m.Js);m.Bh=p;break;case 140:!m.gb&&0<=m.uh&&p-m.Bh>=m.uh&&(g(m,1),m.repeat?m.Bh=p:m.uh=-m.uh);break;case 150:m.Bh||(m.Bh=p);g(m,p-m.Bh);m.Bh=p;break;case 160:g(m,p);break;case 180:p=c(m.element);m.ia[0]=p.gA-p.lG;m.ia[1]=p.fA-p.kG;m.ia[2]=p.eA-p.dA;break;case 190:p=c(m.element);m.ia[0]=p.gA;m.ia[1]=p.fA;m.ia[2]=p.eA;break;case 200:p=c(m.element);u.copy(p.AO,m.ia);break;case 210:r=q.ba(q.Sb);q.$h(r,q.vx,m.ia);break;case 220:r=q.ba(q.Sb);q.$h(r,q.wx,m.ia);break;case 240:r=h(m.Ti);m.value=q.c0(r,m.key);
break;case 250:r=h(m.Ti);m.value=q.b0(r,m.key);break;case 260:r=h(m.Ti);q.YF(r,m.ia);g(m,1);break;case 270:r=h(m.Ti);q.XF(r,m.ia);g(m,1);break;case 230:g(m,m.callback());break;case 30:p=c(m.element);g(m,p.ED);break;case 40:p=c(m.element);if(!N.rA||1==p.Ag||2==p.Ag)switch(t=p.mp-p.bB,v=p.np-p.cB,m.ia.coords[0]=p.mp,m.ia.coords[1]=p.np,m.axis){case "X":g(m,t);break;case "Y":g(m,v);break;case "XY":r=Math.sqrt(t*t+v*v),g(m,r)}break;case 280:p=c(m.element);t=p.Ov;v=p.Pv;A=D.Tc(t,0,r,.1*S);r=D.Tc(v,0,r,
.1*S);.01<Math.abs(t)||.01<Math.abs(v)?(p.Ov-=A,p.Pv-=r,m.ia.coords[0]=A,m.ia.coords[1]=r):(m.ia.coords[0]=0,m.ia.coords[1]=0);g(m,Math.sqrt(t*t+v*v));break;case 50:p=c(m.element);g(m,0!=p.Ag|0);m.ia.which=p.which;m.ia.coords[0]=p.mp;m.ia.coords[1]=p.np;break;case 170:p=c(m.element);g(m,0);if(m.cN)p.jG==m.pk&&g(m,1);else if(0!=p.Ag&&p.dk.aa==m.pk)g(m,1);else for(r=0;10>r;++r)if(t=p.Vl[r],0!=t.rk&&t.aa==m.pk){g(m,1);break}break;case 20:p=c(m.element);m.ia=p.sg[m.key];1==m.ia||p.sg[0]&&16==m.key?g(m,
1):m.ia||g(m,0);break;case 60:p=c(m.element);if(-1==p.vf[1]&&-1==p.Yf[1]){t=p.vf[0]-p.lj[0];v=p.Yf[0]-p.mj[0];r=Math.sqrt(t*t+v*v);if(-1!=p.lj[1]&&-1!=p.mj[1]){var A=p.vf[0]-p.lj[1],z=p.Yf[0]-p.mj[1],y=Math.sqrt(A*A+z*z);y<r&&(t=A,v=z,r=y)}m.ia.gesture=a.Ex}else r=n,r[0]=(p.vf[0]+p.vf[1])/2,r[1]=(p.Yf[0]+p.Yf[1])/2,v=f,v[0]=(p.lj[0]+p.lj[1])/2,v[1]=(p.mj[0]+p.mj[1])/2,t=r[0]-v[0],v=r[1]-v[1],r=Math.sqrt(t*t+v*v),m.ia.gesture=a.Cx;m.ia.coords[0]=p.vf[0];m.ia.coords[1]=p.Yf[0];switch(m.axis){case "X":g(m,
t);break;case "Y":g(m,v);break;case "XY":g(m,r)}break;case 70:p=c(m.element);r=p.dD-p.aJ;m.ia=a.Dx;g(m,r);break;case 75:p=c(m.element);-1!=p.vf[1]&&(r=Math.atan2(p.Yf[0]-p.Yf[1],p.vf[0]-p.vf[1]),m.ia=a.cE,g(m,r-p.tS));break;case 80:p=c(m.element),m.ia.coords[0]=p.vf[0],m.ia.coords[1]=p.Yf[0],p.EG?g(m,0):g(m,1)}for(k=0;k<E.length;k++)for(p=E[k],m=p.Dp,r=0;r<m.length;r++)if(t=m[r],t.Fn!=B){t.Fn=B;z=t;v=0;switch(z.type){case a.Sg:v=(A=M(z))?1:0;break;case a.ob:v=z.rl;(A=M(z))?(v=1,z.rl=1):1==v?(v=-1,
z.rl=-1):v=0;break;case a.bx:v=z.rl;(A=M(z))&&-1==v?(v=1,z.rl=1):A||1!=v?v=0:(v=-1,z.rl=-1);break;case a.Ai:v=z.rl;(A=M(z))&&-1==v?(v=1,z.rl=1):A||1!=v?v=0:(v=0,z.rl=-1);break;case a.Yp:A=M(z);z.tP!=A?(v=1,z.tP=A):v=0;break;case a.PD:A=z.Il;z=z.m1;for(y=0;y<A.length;y++){var C=A[y].value;v||C==z[y]||(v=1);z[y]=C}break;default:D.K("Wrong sensor manifold type: "+z.type)}if(v&&(A=p==U?null:p,G=!1,t.callback(A,t.id,v,t.hX),G)){k=-1;break}}for(k=0;k<E.length;k++)for(p=E[k],m=p.Dp,r=0;r<m.length;r++)for(t=
m[r],p=t.Il,t=0;t<p.length;t++)switch(v=p[t],v.type){case 30:g(v,0);break;case 40:g(v,0);break;case 60:g(v,0);break;case 70:g(v,0);break;case 75:g(v,0);break;case 80:g(v,0);break;case 140:g(v,0)}for(k=0;k<H.length;k++){m=H[k];if(!m.pv){for(r=0;r<m.sg.length;r++)1==m.sg[r]?m.sg[r]=2:3==m.sg[r]&&(m.sg[r]=0);m.pv=!0}1==m.Ag?m.Ag=2:3==m.Ag&&(m.Ag=0);for(r=0;r<m.Vl.length;r++)p=m.Vl[r],1==p.rk?p.rk=2:3==p.rk&&(p.rk=0);m.ED=0;m.bB=m.mp;m.cB=m.np;m.sg[0]=0;m.lj.set(m.vf);m.mj.set(m.Yf);m.aJ=m.dD;m.lG=m.gA;
m.kG=m.fA;m.dA=m.eA;m.FG=!1}B++};a.yu=function(a){var b=p(10);g(b,a);return b};a.qd=function(a){var b=p(20,document);b.key=a;b.gb=!0;return b};a.gc=function(a,b){var c=p(240,document);b=b||q.Kz();c.Ti=b;c.key=a;c.gb=!0;return c};a.me=function(a,b){var c=p(250,document);b=void 0==b?q.Kz():b;c.Ti=b;c.key=a;c.gb=!0;return c};a.Ky=function(a){var b=p(260,document);a=void 0===a?q.Kz():a;b.Ti=a;b.gb=!0;b.ia=l.create();return b};a.Jy=function(a){var b=p(270,document);a=void 0===a?q.Kz():a;b.Ti=a;b.gb=!0;
b.ia=u.create();return b};a.ZE=function(a,b,c){if(!a||!I.Aa(a))return O.error("Wrong collision object"),null;var d=p(90);d.TE=a;d.Tb=b;d.Cj=c;d.ia={coll_obj:null,coll_pos:c?new Float32Array(3):null,coll_norm:c?new Float32Array(3):null,coll_dist:0};d.SE=function(a,b,c,e,f){g(d,a);a=d.ia;a.coll_obj=b;d.Cj&&(a.coll_pos.set(c),a.coll_norm.set(e),a.coll_dist=f)};d.gb=!0;return d};a.rM=function(a){if(!a||!a.N)return O.error("Wrong collision impulse object"),null;var b=p(100);b.RE=a;b.gM=function(a){g(b,
a)};b.gb=!0;return b};a.zM=function(a,b,c,d,e,f,k){var h=p(110);h.pk=a;h.from=b;h.to=c;h.Tb=d;h.ZO=e;h.Cj=f;h.sA=k;h.ia={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),Xv:0};h.EQ=function(a,b,c,d,e,f){h.ZO?g(h,-1==b?0:1):g(h,b);h.ia.hit_fract=b;h.ia.obj_hit=c;h.ia.hit_time=d;h.Cj&&(h.ia.hit_pos.set(e),h.ia.hit_norm.set(f))};h.gb=!0;return h};a.xo=function(a){a=p(50,a);a.gb=!0;a.ia={coords:new Float32Array(2),which:null};return a};a.eF=function(a){a=p(30,
a);a.gb=!0;return a};a.Vk=function(a,b){var c=p(40,b);c.axis=a||"XY";c.ia={coords:new Float32Array(2)};c.gb=!0;return c};a.Bu=function(a,b){var c=p(60,b);c.axis=a||"XY";c.ia={coords:new Float32Array(2),gesture:0};c.gb=!0;return c};a.Oy=function(a){a=p(70,a);a.ia=0;a.gb=!0;return a};a.HM=function(a){a=p(75,a);a.ia=0;a.gb=!0;return a};a.GM=function(a){a=p(80,a);a.ia={coords:new Float32Array(2)};a.gb=!0;return a};a.vM=function(a,b,c){if(!a)return O.error("Wrong collision object"),null;var d=p(120);d.pk=
a;var e=x.X(a.A.D);a=x.la(a.A.D);d.yQ=new Float32Array(4);d.Js=new Float32Array(e);d.FB=new Float32Array(a);d.dy=0;d.cy=0;d.threshold=b||.1;d.RQ=c||.1;d.Bh=0;d.ia=new Float32Array([0,0]);return d};a.IM=function(a,b){if(!a)return O.error("Wrong collision object"),null;var c=p(130);c.pk=a;var d=x.X(a.A.D),e=x.la(a.A.D);c.Js=new Float32Array(d);c.FB=new Float32Array(e);c.ey=0;c.threshold=b||1;c.Bh=0;c.ia=0;return c};a.FM=function(a,b){var c=p(140);c.uh=a;c.repeat=b;c.gb=!0;return c};a.MQ=function(a,
b,c,d){a=a||U;a=a.kj;if(!a||!a[b])return O.error("reset_timer_sensor(): wrong object"),null;b=a[b].Il[c];if(!b)return O.error("reset_timer_sensor(): sensor not found"),null;b.Bh=J.Ro();b.uh=d};a.vm=function(){var a=p(150);a.Bh=0;return a};a.uM=function(){var a=p(180,window);a.ia=new Float32Array(3);q.ba(q.tj)?g(a,1):g(a,0);a.gb=!0;return a};a.tM=function(){var a=p(190,window);a.ia=new Float32Array(3);q.ba(q.tj)?g(a,1):g(a,0);a.gb=!0;return a};a.$E=function(){var a=p(200,window);a.ia=u.create();q.ba(q.tj)?
g(a,1):g(a,0);a.gb=!0;return a};a.bF=function(){var a=p(210,window);a.ia=u.create();q.ba(q.Sb)?g(a,1):g(a,0);a.gb=!0;return a};a.aF=function(){var a=p(220,window);a.ia=l.create();q.ba(q.Sb)?g(a,1):g(a,0);a.gb=!0;return a};a.Ny=function(){return p(160)};a.fF=function(a,b){var c=p(170);c.pk=a;c.cN=b;c.gb=!0;return c};a.YE=function(a,b){var c=p(230);c.callback=a;g(c,b);return c};a.xM=function(a){a=p(280,a);a.ia={coords:new Float32Array(2)};a.gb=!0;return a};a.yM=function(a){a=p(290,a);a.gb=!0;return a};
a.z3=g;a.wd=function(a,b,c){a=a||U;a=a.kj;if(!a||!a[b])return O.error("get_sensor_value(): wrong object"),null;b=a[b].Il[c];return b?b.value:(O.error("get_sensor_value(): sensor not found"),null)};a.jf=function(a,b,c){a=a||U;a=a.kj;if(!a||!a[b])return O.error("get_sensor_payload(): wrong object"),null;b=a[b].Il[c];return b?b.ia:(O.error("get_sensor_payload(): sensor not found"),null)};a.Ja=function(){E=[];U={};for(var a=0;a<L.length;a++)z(L[a]);L.length=0;y.length=0};a.qm=function(a,b){a=a||U;if(!a.kj)return!1;
if(b&&a.kj[b])return!0;if(!b)for(var c in a.kj)return!0;return!1};a.qa=function(a,d,e,f,g,k,h){a=a||U;a.Dp=a.Dp||[];a.kj=a.kj||{};var l=a.kj,n=a.Dp;l[d]&&m(a,d);e={id:d,type:e,Il:f.slice(0),K1:g,A3:Array(f.length),callback:k,hX:h,rl:-1,tP:0,m1:Array(f.length),Fn:-1};l[d]=e;n.push(e);-1==E.indexOf(a)&&E.push(a);for(a=0;a<e.Il.length;a++){l=d=e.Il[a];if(l.gb){switch(l.type){case 90:I.oE(l.TE,l.Tb,l.SE,l.Cj);break;case 100:I.pE(l.RE,l.gM);break;case 110:l.Xv=I.Xx(l.pk,l.from,l.to,l.Tb,l.EQ,!1,!1,l.Cj,
l.sA);l.ia.Xv=l.Xv;break;case 140:l.Bh=J.Ro();0>l.uh&&(l.uh=-l.uh);break;case 20:n=c(l.element);b(n,"keyboard_downed_keys");break;case 30:n=c(l.element);b(n,"mouse_wheel");break;case 40:n=c(l.element);b(n,"mouse_down_which");b(n,"mouse_up_which");b(n,"mouse_location");break;case 280:n=c(l.element);b(n,"mouse_pointerlock");break;case 290:q.WV(l);break;case 50:n=c(l.element);b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 60:n=c(l.element);b(n,"touch_start");b(n,"touch_move");b(n,"touch_end");
break;case 70:n=c(l.element);b(n,"touch_start");b(n,"touch_move");break;case 75:n=c(l.element);b(n,"touch_start");b(n,"touch_move");break;case 80:n=c(l.element);b(n,"touch_start");b(n,"touch_end");break;case 170:n=c(l.element);b(n,"mouse_select");b(n,"touch_select");b(n,"touch_start");b(n,"touch_end");b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 180:case 190:n=c(l.element);b(n,"orientation_angles");break;case 200:n=c(l.element);b(n,"orientation_quat");break;case 240:case 260:case 270:0==
l.Ti?q.ba(q.cx):1==l.Ti?q.ba(q.QD):2==l.Ti?q.ba(q.RD):q.ba(q.SD)}l.gb=!1}l=L.indexOf(d);-1==l?(L.push(d),y.push([e])):y[l].push(e)}G=!0};a.Xy=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-1]};a.qF=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};a.Tf=m;a.reset=function(){for(var a=0;a<E.length;a++){var b=E[a],c=b.kj,b=b.Dp,d;for(d in c)delete c[d];b.length=0}for(a=0;a<L.length;a++)z(L[a]);E.length=0;L.length=0;y.length=0};a.debug=function(){O.log(String(E.length)+
" objects with manifolds",E);O.log(String(L.length)+" sensors",L);for(var a=[],b=[],c=0;c<L.length;c++){var d=L[c];90==d.type&&a.push(d);110==d.type&&b.push(d)}O.log(String(a.length)+" collision sensors",a);O.log(String(b.length)+" ray sensors",b)};a.BR=function(a){S=a}};b4w.module.__material=function(a,t){function p(){return{name:"",type:"",dd:"",Ch:!1,se:null,Ah:[],tb:"",Nc:!1,qD:!1,Na:!1,xf:!1,pD:!1,Ow:!1,Os:!1,cf:!1,Fl:!1,Zj:!1,qv:!1,ep:!1,si:0,gk:0,Rd:0,Jf:"",jd:new Float32Array(3),rg:0,cz:0,dz:0,PB:0,az:0,bz:0,Ty:0,alpha:0,Xf:"",Fg:new Float32Array(3),uw:0,EC:0,FC:0,Fp:0,CC:0,DC:0,Eg:0,ef:0,Ze:0,ma:{$j:!1,Wf:!1,Tx:0,Qi:0,hC:new Float32Array(3),kC:new Float32Array(3),iC:0,lC:0,Ho:new Float32Array(3),xz:0,IC:0,JC:0,jB:0,ea:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,
dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,yA:!1,kB:0,lB:0,$y:0,kz:!1,Pk:0,Ok:0},qk:{yr:!1,Mu:"",Lu:""},zp:{ri:0,Vu:0,Wu:0},jr:{size:0,gv:0,OB:new Float32Array(3),NA:new Float32Array(3),NB:0,LA:0,LC:0,CA:!1,MC:0,NC:0},Sd:{Ns:!1,uk:!1,Vh:0,Qh:0,Tb:"",Fj:0,Ej:0,Gj:0}}}var c=t("__util");a.T0=p;a.jY=function(){var a=p();a.name="DEFAULT";a.type="SURFACE";a.dd=c.Ez();a.Ch=!1;a.se=
null;a.Ah=[];a.tb="OPAQUE";a.Nc=!1;a.qD=!1;a.Na=!0;a.Ow=!1;a.Os=!1;a.Fl=!1;a.ep=!1;a.si=0;a.gk=0;a.Rd=0;a.Jf="LAMBERT";a.jd.set([.8,.8,.8]);a.rg=.8;a.alpha=1;a.Xf="COOKTORR";a.Fg.set([1,1,1]);a.uw=.5;a.Fp=50;a.Eg=1;a.ef=0;a.Ze=1;a.ma.$j=!1;a.qk.yr=!1;a.zp.ri=0;a.zp.Vu=0;a.zp.Wu=1.25;a.Sd.Ns=!1;return a};a.L5=function(a,c){c.name=a.name;c.type=a.type;c.dd=a.uuid;c.Ch=a.use_nodes;c.se=a.node_tree;c.Ah=a.texture_slots;c.tb=a.game_settings.alpha_blend;c.Nc=a.use_shadeless;c.qD=a.use_transparency;c.Na=
a.game_settings.use_backface_culling;c.xf=a.use_tangent_shading;c.pD=a.use_orco_tex_coord;c.Ow=a.use_vertex_color_paint;c.Os=a.b4w_double_sided_lighting;c.cf=a.b4w_do_not_render;c.Fl=a.b4w_render_above_all;c.Zj=a.b4w_lens_flares;c.qv=a.b4w_wettable;c.ep=a.b4w_refractive;c.si=a.b4w_refr_bump;c.gk=a.pass_index;c.Rd=a.offset_z;c.Jf=a.diffuse_shader;c.jd.set(a.diffuse_color);c.rg=a.diffuse_intensity;c.cz=a.diffuse_toon_size;c.dz=a.diffuse_toon_smooth;c.PB=a.roughness;c.az=a.diffuse_fresnel;c.bz=a.diffuse_fresnel_factor;
c.Ty=a.darkness;c.alpha=a.alpha;c.Xf=a.specular_shader;c.Fg.set(a.specular_color);c.uw=a.specular_intensity;c.EC=a.specular_toon_size;c.FC=a.specular_toon_smooth;c.Fp=a.specular_hardness;c.CC=a.specular_ior;c.DC=a.specular_slope;c.Eg=a.specular_alpha;c.ef=a.emit;c.Ze=a.ambient;var b=c.ma;b.$j=a.b4w_water;b.Wf=a.b4w_water_shore_smoothing;b.Tx=a.b4w_water_absorb_factor;b.Qi=a.b4w_foam_factor;b.hC.set(a.b4w_shallow_water_col);b.kC.set(a.b4w_shore_water_col);b.iC=a.b4w_shallow_water_col_fac;b.lC=a.b4w_shore_water_col_fac;
b.Ho.set(a.b4w_water_fog_color);b.xz=a.b4w_water_fog_density;b.IC=a.b4w_water_sss_strength;b.JC=a.b4w_water_sss_width;b.jB=a.b4w_water_norm_uv_velocity;b.ea=a.b4w_water_dynamic;b.waves_height=a.b4w_waves_height;b.waves_length=a.b4w_waves_length;b.dst_noise_scale0=a.b4w_water_dst_noise_scale0;b.dst_noise_scale1=a.b4w_water_dst_noise_scale1;b.dst_noise_freq0=a.b4w_water_dst_noise_freq0;b.dst_noise_freq1=a.b4w_water_dst_noise_freq1;b.dir_min_shore_fac=a.b4w_water_dir_min_shore_fac;b.dir_freq=a.b4w_water_dir_freq;
b.dir_noise_scale=a.b4w_water_dir_noise_scale;b.dir_noise_freq=a.b4w_water_dir_noise_freq;b.dir_min_noise_fac=a.b4w_water_dir_min_noise_fac;b.dst_min_fac=a.b4w_water_dst_min_fac;b.waves_hor_fac=a.b4w_water_waves_hor_fac;b.yA=a.b4w_generated_mesh;b.kB=a.b4w_water_num_cascads;b.lB=a.b4w_water_subdivs;b.$y=a.b4w_water_detailed_dist;b.kz=a.b4w_water_enable_caust;b.Pk=a.b4w_water_caust_scale;b.Ok=a.b4w_water_caust_brightness;b=c.qk;b.yr=a.b4w_terrain;b.Mu=a.b4w_dynamic_grass_size;b.Lu=a.b4w_dynamic_grass_color;
b=c.zp;b.ri=a.raytrace_mirror.reflect_factor;b.Vu=a.raytrace_mirror.fresnel;b.Wu=a.raytrace_mirror.fresnel_factor;b=c.jr;b.size=a.halo.size;b.gv=a.halo.hardness;b.OB.set(a.halo.b4w_halo_rings_color);b.NA.set(a.halo.b4w_halo_lines_color);b.NB=a.halo.ring_count;b.LA=a.halo.line_count;b.LC=a.halo.star_tip_count;b.CA=a.b4w_halo_sky_stars;b.MC=a.b4w_halo_stars_blend_height;b.NC=a.b4w_halo_stars_min_height;b=c.Sd;b.Ns=a.b4w_collision;b.uk=a.b4w_use_ghost;b.Vh=a.physics.friction;b.Qh=a.physics.elasticity;
b.Tb=a.b4w_collision_id;b.Fj=a.b4w_collision_margin;b.Ej=a.b4w_collision_group;b.Gj=a.b4w_collision_mask};a.NX=function(a){a.name=a.name;a.type=a.type;a.dd=a.dd;a.Ch=a.Ch;a.se=a.se;a.Ah=a.Ah.slice();a.tb=a.tb;a.Nc=a.Nc;a.qD=a.qD;a.Na=a.Na;a.xf=a.xf;a.pD=a.pD;a.Ow=a.Ow;a.Os=a.Os;a.cf=a.cf;a.Fl=a.Fl;a.Zj=a.Zj;a.qv=a.qv;a.ep=a.ep;a.si=a.si;a.gk=a.gk;a.Rd=a.Rd;a.Jf=a.Jf;a.jd.set(a.jd);a.rg=a.rg;a.cz=a.cz;a.dz=a.dz;a.PB=a.PB;a.az=a.az;a.bz=a.bz;a.Ty=a.Ty;a.alpha=a.alpha;a.Xf=a.Xf;a.Fg.set(a.Fg);a.uw=a.uw;
a.EC=a.EC;a.FC=a.FC;a.Fp=a.Fp;a.CC=a.CC;a.DC=a.DC;a.Eg=a.Eg;a.ef=a.ef;a.Ze=a.Ze;var b=a.ma,c=a.ma;c.$j=b.$j;c.Wf=b.Wf;c.Tx=b.Tx;c.Qi=b.Qi;c.hC.set(b.hC);c.kC.set(b.kC);c.iC=b.iC;c.lC=b.lC;c.Ho=b.Ho;c.xz=b.xz;c.IC=b.IC;c.JC=b.JC;c.jB=b.jB;c.ea=b.ea;c.waves_height=b.waves_height;c.waves_length=b.waves_length;c.dst_noise_scale0=b.dst_noise_scale0;c.dst_noise_scale1=b.dst_noise_scale1;c.dst_noise_freq0=b.dst_noise_freq0;c.dst_noise_freq1=b.dst_noise_freq1;c.dir_min_shore_fac=b.dir_min_shore_fac;c.dir_freq=
b.dir_freq;c.dir_noise_scale=b.dir_noise_scale;c.dir_noise_freq=b.dir_noise_freq;c.dir_min_noise_fac=b.dir_min_noise_fac;c.dst_min_fac=b.dst_min_fac;c.waves_hor_fac=b.waves_hor_fac;c.yA=b.yA;c.kB=b.kB;c.lB=b.lB;c.$y=b.$y;c.kz=b.kz;c.Pk=b.Pk;c.Ok=b.Ok;c=b=a.qk;c.yr=b.yr;c.Mu=b.Mu;c.Lu=b.Lu;c=b=a.zp;c.ri=b.ri;c.Vu=b.Vu;c.Wu=b.Wu;c=b=a.jr;c.size=b.size;c.gv=b.gv;c.OB.set(b.OB);c.NA.set(b.NA);c.NB=b.NB;c.LA=b.LA;c.LC=b.LC;c.CA=b.CA;c.MC=b.MC;c.NC=b.NC;c=b=a.Sd;c.Ns=b.Ns;c.uk=b.uk;c.Vh=b.Vh;c.Qh=b.Qh;
c.Tb=b.Tb;c.Fj=b.Fj;c.Ej=b.Ej;c.Gj=b.Gj;return a}};b4w.module.__data=function(a,t){function p(a,b){Ca[b.id]=null;Ta[b.id]=null}function c(a,b,c,d){a instanceof ArrayBuffer?(a=Ua.yO(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);ta.log("%cLOAD IMAGE "+d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(Xb)&&c&&ta.warn("image",b,"is not from app root.")}function b(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){if(d){ta.log("%cLOAD METADATA","color: #616",m);f=T.fS(d.b4w_format_version);switch(T.hT(f,La.kp)){case -1:f[0]<
La.kp[0]?T.K("JSON version is too old relative to B4W engine: "+T.Jn(f)+", required: "+T.Jn(La.kp)+". Reexport scene with the latest B4W addon to fix it."):ta.warn("JSON version is a bit old relative to B4W engine: "+T.Jn(f)+", required: "+T.Jn(La.kp)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:f[0]>La.kp[0]?T.K("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):ta.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}La.OG=
f;for(var n in d)a[n]=d[n];b.Xb&&(Za=Na.sz(a.scenes));(d=a.binaries[0].binfile)?b.sL=d:(Y.pC(b,"load_binaries"),Y.pC(b,"prepare_bindata"));La.is_mobile_device||Y.pC(b,"mobile_media_start");La.antialiasing&&La.smaa||Y.pC(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)n=a.b4w_export_errors[d],(b.Xb&&"PRIMARY"==n.type||"ALL"==n.type)&&ta.UZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=
0;d<a.b4w_export_warnings.length;d++)n=a.b4w_export_warnings[d],(b.Xb&&"PRIMARY"==n.type||"ALL"==n.type)&&ta.VZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.lh&&J(a);e(b,c)}else l==F.ht?(ta.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),F.enqueue([{id:k,type:F.bm,url:k,lf:b.lh}],h,null,g)):Y.KK(b)}var k=b.Pj;k||T.K("Nothing requested");if(La.assets_gzip_available){d=k+".gz";var l=F.ht}else d=k,l=F.bm;F.enqueue([{id:d,
type:l,url:d,lf:b.lh}],h,null,g)}function k(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){d?(ta.log("%cLOAD BINARY","color: #616",m),a.bin_data=d,f=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[f,d],f=T.fS(a.b4w_format_version),d[0]!=f[0]&&T.K("BIN version does not match to JSON version: "+T.Jn(d)+", required: "+T.Jn(La.kp)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=f[1]&&ta.warn("BIN version does not match to JSON version: "+ +T.Jn(d)+", required: "+T.Jn(La.kp)+
". Some compatibility issues can occur. Reexport scene to fix it."),e(b,c)):l==F.gt?(ta.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),F.enqueue([{id:k,type:F.Wp,url:k,lf:b.lh}],h,null,g)):Y.KK(b)}var k=X(b.Pj)+b.sL;k||T.K("Binary data is missing");if(La.assets_gzip_available){d=k+".gz";var l=F.gt}else d=k,l=F.Wp;F.enqueue([{id:d,type:l,url:d,lf:b.lh}],h,null,g)}function g(a,b,c,d,e){Ma.QL()&&e(b,c)}function M(a,b,c,d,e){d=a.bin_data;var f=a.binaries[0],g=a.objects,
h=a.meshes;a=a.actions;for(var k=T.xX(),l=["indices"],n=["position","texcoord","texcoord2","shade_tangs"],p=["normal","tangent"],q=["group"],r=["color"],u=0;u<h.length;u++)for(var v=h[u].submeshes,t=0;t<v.length;t++){for(var x in v[t]){var z=v[t][x][1];if(-1!=l.indexOf(x)){var A=v[t][x][0]*T.IJ+f["int"]+12,y=v[t],C=x,w=d;if(k)var B=new Uint32Array(w,A,z);else for(var B=new Uint32Array(z),w=new DataView(w),D=0;D<z;D++)B[D]=w.getUint32(A+D*T.IJ,!0);y[C]=B}else if(-1!=n.indexOf(x))A=v[t][x][0]*T.yk+
f["float"]+12,v[t][x]=m(d,A,z,k);else if(-1!=p.indexOf(x)){A=v[t][x][0]*T.Ft+f["short"]+12;y=v[t];C=x;w=d;B=new Float32Array(z);w=new DataView(w);for(D=0;D<z;D++)B[D]=w.getInt16(A+D*T.Ft,!0)/32767;y[C]=B}else if(-1!=q.indexOf(x)){A=v[t][x][0]*T.Ft+f.ushort+12;y=v[t];C=x;w=d;B=new Float32Array(z);w=new DataView(w);for(D=0;D<z;D++)B[D]=w.getUint16(A+D*T.Ft,!0)/65535;y[C]=B}else if(-1!=r.indexOf(x)){A=v[t][x][0]*T.LD+f.uchar+12;y=v[t];C=x;w=d;B=new Float32Array(z);w=new DataView(w);for(D=0;D<z;D++)B[D]=
w.getUint8(A+D*T.LD)/255;y[C]=B}}z=v[t];if(h[u].b4w_shape_keys.length)for(A=z.base_length,y=z.normal.length/A/3,z.tbn=Qa.er(z.normal.subarray(0,3*A),z.tangent.subarray(0,4*A),Qa.create(z.normal.length/3)),C=1;C<y;C++)for(w=C*A,B=0;B<A;B++){var O=z.normal.subarray(3*B,3*(B+1)),E=Ka.add(z.normal.subarray(3*(w+B),3*(w+B+1)),O,mb),D=Qa.identity(jc);if(z.tangent.length){var G=z.tangent.subarray(4*B,4*(B+1)),H=Va.add(z.tangent.subarray(4*(w+B),4*(w+B+1)),G,qb),O=Qa.er(O,G),E=Qa.er(E,H);Qa.d2(E,O,D)}else E=
Pa.rotationTo(O,E,ic),Qa.Gc(D,E,0);Qa.mk(z.tbn,D,w+B)}else z.tbn=Qa.er(z.normal,z.tangent);delete v[t].normal;delete v[t].tangent;"texcoord2"in v[t]&&(z=new Float32Array(v[t].texcoord.length+v[t].texcoord2.length),z.set(v[t].texcoord),z.set(v[t].texcoord2,v[t].texcoord.length),v[t].texcoord=z,delete v[t].texcoord2)}for(x=0;x<g.length;x++)for(h=g[x].particle_systems,l=0;l<h.length;l++)n=h[l],n.transforms=m(d,n.transforms[0]*T.yk+f["float"]+12,n.transforms[1],k);for(g=0;g<a.length;g++){x=a[g];h=x.fcurves;
l=x.frame_range;p=l[0];q=l[1];r=ia.F_(p,q);l=null;0>r&&(r=0);var v=u=!1,F;for(F in h)u|=-1<F.indexOf("rotation_euler"),v|=-1<F.indexOf("rotation_quaternion");n=[];for(F in h)if(u&&v&&-1<F.indexOf("rotation_euler"))delete h[F];else{var t=h[F],I;for(I in t)z=t[I],A=m(d,f["float"]+z.bin_data_pos[0]*T.yk+12,z.bin_data_pos[1],k),y=new Float32Array(r),l||(l=new Int8Array(r)),ia.wW(z,A,y,l,p,q),z.Xg=y;-1<F.indexOf("rotation_euler")&&(ia.d_(h[F]),n.push(F))}for(p=0;p<n.length;p++)q=n[p],r=q.replace("euler",
"quaternion"),h[r]=h[q],delete h[q];x.RV=l}e(b,c)}function m(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)d[e]=a.getFloat32(b+e*T.yk,!0)}return d}function z(a,b,c,d,f){var g=a.cameras,k=a.groups,l=a.materials,m=a.meshes,n=a.node_groups,p=a.objects,r=a.particles,u=a.scenes,v=a.speakers,t=a.lamps,x=a.textures,z=a.worlds;n||(ta.warn('"node_groups" datablock undefined. reexport main scene.'),n=a.node_groups=[]);for(var A="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),
y={},C=0;C<A.length;C++)for(var B=a[A[C]],D=0;D<B.length;D++){var O=B[D];y[O.uuid]=O}for(var G=0;G<u.length;G++){for(var H=u[G],F=H.objects,I=0;I<F.length;I++)U(F,I,y);H.camera&&U(H,"camera",y);H.world&&U(H,"world",y)}for(G=0;G<k.length;G++)for(var L=k[G].objects,I=0;I<L.length;I++)U(L,I,y);for(G=0;G<p.length;G++){var M=p[G];M.dupli_group&&U(M,"dupli_group",y);M.parent&&U(M,"parent",y);M.dg_parent&&U(M,"dg_parent",y);var R=M.animation_data;R&&N(R,y);switch(M.type){case "MESH":M.data||T.K("mesh not found for object "+
M.name);U(M,"data",y);for(var S=!1,Q=M.modifiers,I=0;I<Q.length;I++){var da=Q[I];"ARMATURE"==da.type?(S&&ta.warn('Object "'+M.name+'" has more than one armature modifiers. Only the first one will be used.'),S=!0,U(da,"object",y)):"CURVE"==da.type&&U(da,"object",y)}var Z=M.particle_systems;if(Z)for(I=0;I<Z.length;I++)U(Z[I],"settings",y);break;case "ARMATURE":U(M,"data",y);for(var $a=M.pose.bones,W=M.data.bones,I=0;I<$a.length;I++){var ba=$a[I];ba.bone=W[ba.bone];var fa=ba.constraints;if(fa)for(var na=
0;na<fa.length;na++){var zb=fa[na];zb.target&&U(zb,"target",y)}for(var aa=ba.parent_recursive,na=0;na<aa.length;na++)aa[na]=$a[aa[na]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":U(M,"data",y)}if(fa=M.constraints)for(I=0;I<fa.length;I++)zb=fa[I],zb.target&&U(zb,"target",y);var ca=M.lod_levels;if(ca)for(I=0;I<ca.length;I++){var V=ca[I];V.object&&U(V,"object",y)}}for(G=0;G<m.length;G++)for(var Ja=m[G].materials,I=0;I<Ja.length;I++)U(Ja,I,y);for(G=0;G<l.length;G++){for(var Y=l[G],rb=
Y.texture_slots,I=0;I<rb.length;I++)U(rb[I],"texture",y);var ea=Y.node_tree;ea&&E(ea,y)}for(G=0;G<n.length;G++)(ea=n[G].node_tree)&&E(ea,y);for(G=0;G<x.length;G++){var ha=x[G],Xb=ha.type;"IMAGE"!=Xb&&"ENVIRONMENT_MAP"!=Xb||U(ha,"image",y)}for(G=0;G<g.length;G++){var ma=g[G];ma.dof_object&&U(ma,"dof_object",y)}for(G=0;G<v.length;G++){var Sb=v[G];Sb.sound&&U(Sb,"sound",y);(R=Sb.animation_data)&&N(R,y)}for(G=0;G<r.length;G++){for(var ka=r[G],rb=ka.texture_slots,I=0;I<rb.length;I++)U(rb[I],"texture",
y);ka.dupli_group&&U(ka,"dupli_group",y);ka.dupli_object&&U(ka,"dupli_object",y)}for(G=0;G<t.length;G++)(R=t[G].animation_data)&&N(R,y);for(G=0;G<z.length;G++){var pa=z[G];if(rb=pa.texture_slots)for(I=0;I<rb.length;I++)U(rb[I],"texture",y);(R=pa.animation_data)&&N(R,y);(ea=pa.node_tree)&&E(ea,y)}cb.sX(a);J(a);for(var Cc=X(b.Pj),ja=a.textures,Fb=b.Xb?a.scenes[0].b4w_anisotropic_filtering:Za.b4w_anisotropic_filtering,za=0;za<ja.length;za++){var la=ja[za];b.Xb||"SCENE"!=la.b4w_source_type||(la.b4w_source_id=
"");var oa=Ha.fZ(la,Fb,a.scenes,b.id,Cc);la.J=oa}for(var sa={},ra=a.objects,wa=0;wa<ra.length;wa++){var va=ra[wa];if("MESH"===va.type&&!va.particle_systems.length)for(var ya=va.data,mb=ya.name,Aa=ya.submeshes,Ba=ya.materials,Ca=0;Ca<Aa.length;Ca++)0!==Aa[Ca].base_length||sa[mb]||(Ba[Ca]&&ta.warn('material "'+Ba[Ca].name+'" is not assigned to any face (object "'+va.name+'").'),sa[mb]=!0)}var qb=[];a.materials=[];for(var Da=a.meshes,Ga=0;Ga<Da.length;Ga++){var Fa=Da[Ga];if(0==Fa.materials.length){var Ia=
xa.jY();Fa.materials.push(Ia);-1==qb.indexOf(Ia.dd)&&(qb.push(Ia.dd),a.materials.push(Ia))}else for(var Ka=0;Ka<Fa.materials.length;Ka++){var La=Fa.materials[Ka],Ma=xa.T0();xa.L5(La,Ma);Fa.materials[Ka]=Ma;-1==qb.indexOf(Ma.dd)&&(qb.push(Ma.dd),a.materials.push(Ma))}}for(var Oa=a.actions,Qa=b.id,ic=0;ic<Oa.length;ic++){var Pa=Oa[ic];Pa.SV=Qa;ia.aW(Pa)}for(var Ua={DP:[],QA:[]},Va=a.scenes,Xa=0;Xa<Va.length;Xa++)for(var gb=Va[Xa],Ya=Va[Xa].objects,Sa=0;Sa<Ya.length;Sa++)qa(gb,Ya,Ya[Sa],null,Ua);for(Xa=
0;Xa<Ua.QA.length;Xa++)for(var Wa=Ua.QA[Xa],Sa=0;Sa<Wa.mB.length;Sa++){var fb=Wa.mB[Sa],ab=Wa.XP[Sa],jc=Wa.aI[Sa],Jb=Wa.nH[Sa];Wa.CP[Sa].object=ab;for(var pb=0;pb<Jb.length;pb++)T.sW(Jb[pb],ab);for(var vb=fb,Nb=jc,Mb=0;Mb<Nb.length;Mb++){for(var Yb=Nb[Mb].objects,$b=0;$b<Yb.length;$b++){var kc=Yb[$b].dupli_group;kc&&K(vb,kc)}var Bd=Yb.indexOf(vb);-1<Bd&&Yb.splice(Bd,1)}}!b.Xb&&1<a.scenes.length&&(a.scenes=[Na.sz(a.scenes)],ta.warn("loading data contains multiple scenes.","Only the first one will be loaded."));
var Rd=b.Xb?Za:Na.sz(a.scenes);ga.S3(Za.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(Za),1),a.scenes.unshift(Za));for(var Cd=0;Cd<a.scenes.length;Cd++){var rc=a.scenes[Cd];rc.J={};rc.IK=rc==Rd;rc.TV=b.Xb;var Dd;if(Dd=ub.enabled){var Sd;if(Sd="OFF"!=rc.b4w_enable_physics){var nd;if(!(nd="AUTO"!=rc.b4w_enable_physics))a:{for(var vd=e(rc),wd=0;wd<vd.length;wd++){if(vd[wd].b4w_collision){nd=!0;break a}var Ed=vd[wd].data;if(Ed.materials)for(var od=0;od<Ed.materials.length;od++)if(Ed.materials[od].Sd.Ns){nd=
!0;break a}}nd=!1}Sd=nd}Dd=Sd}Dd&&(b.Xb||!ua.QB(Za)&&rc==Na.sz(a))&&ua.U0(rc)}for(var Fd=0;Fd<a.scenes.length;Fd++){var pd=a.scenes[Fd];if(pd.b4w_use_logic_editor){var Td=e(pd);cb.AW(Td,pd)}}for(var sc=0;sc<a.scenes.length;sc++){for(var xd=a.scenes[sc],Gd=e(xd),tc=0;tc<Gd.length;tc++){var ob=Gd[tc];w.tX(ob,xd,a)&&(ob.le||(ob.le=[]),ob.le.push(b.Xb?xd:Za))}for(var Xd=Gd,Nd=0;Nd<Xd.length;Nd++){var yd=Xd[Nd];if(yd.le&&"WORLD"!=yd.type)for(var Hd=yd.particle_systems,Rc=0;Rc<Hd.length;Rc++){var Ic=Hd[Rc].settings;
if("HAIR"==Ic.type)if("OBJECT"==Ic.render_type){var Sc=Ic.dupli_object;Sc.le||(Sc.le=yd.le.slice())}else if("GROUP"==Ic.render_type)for(var gd=Ic.dupli_group,qd=0;qd<gd.objects.length;qd++)Sc=gd.objects[qd],Sc.le||(Sc.le=yd.le.slice())}}}for(var rd=a.scenes,Jc=[],Eb=0;Eb<rd.length;Eb++)q(rd[Eb].objects,0,b.Xb,Jc);Ta[b.id]=[];for(Eb=0;Eb<Jc.length;Eb++)for(var Id=Jc[Eb],hd=0;hd<Id.length;hd++)for(var zd=Id[hd],Od=0;Od<zd.length;Od++)Ta[b.id].push(zd[Od]);for(var Jd=a.particles,Eb=0;Eb<Jd.length;Eb++){var sd=
Jd[Eb].dupli_object;sd&&(sd.HK=!0,Ta[b.id].push(sd));var Ud=Jd[Eb].dupli_group;if(Ud)for(var ge=Ud.objects,hd=0;hd<ge.length;hd++)sd=ge[hd],sd.HK=!0,Ta[b.id].push(sd)}for(var ae=Ta[b.id],Eb=ae.length-1;0<=Eb;Eb--)ae[Eb].le||ae.splice(Eb,1);for(var Wd=Ta[b.id],sc=0;sc<Wd.length;sc++){ob=Wd[sc];!b.Xb&&ob.parent&&-1<Bc.indexOf(ob.parent.type)&&(ob.parent="");if("MESH"==ob.type){var be=cb.vW(ob);be&&(a.meshes.push(be),ob.data=be)}ob.zq=w.EN(ob,!1);ob.Ek=w.yL(ob)}for(sc=0;sc<Wd.length;sc++){for(var ob=
Wd[sc],ce=ob.Ek,tc=0;tc<ob.lod_levels.length;tc++){var Yd=ob.lod_levels[tc].object;Yd&&(ce=ce||Yd.Ek)}if(ce)for(ob.Ek=!0,tc=0;tc<ob.lod_levels.length;tc++)if(Yd=ob.lod_levels[tc].object)Yd.Ek=!0}for(var Zc=0;Zc<a.scenes.length;Zc++){var he=a.scenes[Zc],Tc=he.world;Tc.le||(Tc.le=[]);Tc.le.push(b.Xb?he:Za)}for(var de=[],Zc=0;Zc<a.worlds.length;Zc++)Tc=a.worlds[Zc],Tc.le?(Tc.zq=w.EN(Tc,!0),Tc.Ek=w.yL(Tc)):de.push(Tc);for(Zc=0;Zc<de.length;Zc++)Tc=de[Zc],a.worlds.splice(a.worlds.indexOf(Tc),1);for(var ie=
a.node_groups,je=a.materials,Kd=0;Kd<ie.length;Kd++){var Pd=ie[Kd].node_tree;if(Pd){var Vd=[];h(Pd,Vd,!0);Pd.Rx=Vd}}for(Kd=0;Kd<je.length;Kd++)if(Pd=je[Kd].se)Vd=[],h(Pd,Vd,!1),Pd.Rx=Vd;for(var ee=0;ee<a.scenes.length;ee++){var ke=a.scenes[ee],fe=b.Xb?ke:Za;P(b.id,fe,"SPEAKER").length&&!fe.od&&Ea.FW(fe)}f(b,c)}function C(a,b,c,e,f){e=X(b.Pj);for(var g=[],h=[],k=0;k<a.speakers.length;k++){var l=a.speakers[k],m=l.sound.uuid;if(-1==h.indexOf(m)){h.push(m);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var n=
F.ID;break;case "BACKGROUND_MUSIC":n=F.JD}l=T.Bl(e+l.sound.filepath);d(g,m,n,l,b.lh)}}g.length?F.enqueue(g,function(){},function(){f(b,c)}):f(b,c)}function h(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d],f=e.type;if("GROUP"==f&&e.node_group){if(e=e.node_group.node_tree)if(c)h(e,b,!0);else for(e=e.Rx,f=0;f<e.length;f++){var g=e[f];-1==b.indexOf(g)&&b.push(g)}}else-1!=Nb.indexOf(f)&&-1==b.indexOf(f)&&b.push(f)}}function e(a){var b=[];-1==a.objects.indexOf(a.camera)&&a.objects.push(a.camera);
A(a.objects,"ALL",b);return b}function A(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&A(e.objects,b,c)}}function q(a,b,c,d){d[b]=d[b]||[];for(var e=d[b],f=0;f<a.length;f++){var g=a[f],h=ba(g);e[h]=e[h]||[];(c||-1==Bc.indexOf(g.type))&&-1==e[h].indexOf(g)&&e[h].push(g);(g=g.dupli_group)&&q(g.objects,b+1,c,d)}}function P(a,b,c){var d=[];a=Ta[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.type==c||"ALL"==c)for(var g=0;g<f.le.length;g++)b==f.le[g]&&d.push(f)}return d}
function O(a,b,c,d,e){for(var f=Ta[b.id],g=0;g<f.length;g++){var h=w.wM(f[g]);h.A.Me=b.id}for(var k=a.worlds,g=0;g<k.length;g++)w.wM(k[g],!0);d=w.Qj("ALL",b.id);for(g=0;g<f.length;g++){var l=f[g],h=l.Oa;ra.Ms(l,h)}for(g=0;g<k.length;g++)h=k[g],ra.Ms(h,h.Oa);b.Xb&&I(a,b.id);for(g=0;g<f.length;g++)l=f[g],h=l.Oa,h.mv||(Q.N2(l,h),w.N5(l,h),Mb.W(h)),"MESH"==h.type&&w.A_(l,h);for(a=0;a<f.length;a++){var m=f[a],k=m.Oa,g=k.A;if(Da.mf(k)||Da.sr(k)){var n=m.lod_levels.length;if(n){for(var k=[m],h=[0],p=Infinity,
l=0;l<n;l++){var q=m.lod_levels[l].object,r=m.lod_levels[l].distance;if(!q){p=r;break}k.push(q);h.push(r)}h.push(p);for(l=0;l<k.length;l++)q=k[l],m=q.Oa.A,m.nl=!0,"DYNAMIC"==g.type&&0<l&&Ka.subtract(g.$e.V,m.$e.V,m.UA),m.nh=h[l],m.mh=h[l+1],n=h[l+1]-h[l],p=l==k.length-1?Infinity:h[l+2]-h[l+1],m.tl=Math.min(l?h[l]-h[l-1]:0,n),m.ul=Math.min(n,p)}}}for(f=0;f<d.length;f++)if(a=d[f],"MESH"==a.type&&(g=a.ay)){var g=g.A,k=a.A.Aj,h=[],u;for(u in k)l=k[u],h.push(4*l.rF,4*l.zj);g.YA.push(h);g.os.push(a.A)}f=
u=-1;a=ia.XN();for(g=0;g<d.length;g++)k=d[g],h=k.A,Da.mf(k)&&h.Rm&&(k=h.$i,k>u&&(u=k),a>=k&&k>f&&(f=k));for(g=0;g<d.length;g++)k=d[g],h=k.A,Da.mf(k)&&h.Rm&&(h.Ko=!0,u<a?h.$i=u:h.$i<=a?h.$i=f:(ta.warn('too many bones for "'+k.name+'" / '+h.$i+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),h.$i=u,h.Ko=!1),h.Ko=h.Ko&&!Wa.oN);for(u=0;u<d.length;u++)if(f=d[u],f.wg)if(a=f.Kg,"CHASSIS"==a.Cg){f.S={};f.S.Su=a.Su;f.S.cu=a.cu;f.S.LI=a.LI;f.S.NI=a.NI;
f.S.MI=a.MI;f.S.tJ=a.tJ;f.S.XH=a.XH;f.S.WG=a.WG;f.S.Zq=0;f.S.bu=1;f.S.Bs=0;f.S.speed=0;f.S.xp=[];f.S.Tv=[];f.S.Ds=null;k=(g=Da.Rj(f))?Da.UF(g,d):d;for(g=0;g<k.length;g++)h=k[g],h.wg&&(l=h.Kg,ua.$0(h)&&a.name==l.name?(l=ua.A6(h.Kg.Cg),f.S.xp[l]=h,f.S.Tv[l]=new Float32Array(8)):ua.kP(h)&&a.name==l.name?(f.S.Ds=h,f.S.Cs=l.Cs,f.S.ww=l.ww,f.S.lv=l.lv,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.dS=h,l=new Float32Array([1,0,0]),oa.Ud(l,h,l),f.S.cS=l):ua.jP(h)&&a.name==l.name?(f.S.EI=h,f.S.vw=
l.vw,f.S.Fr=l.Fr,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.ZR=h,l=new Float32Array([1,0,0]),oa.Ud(l,h,l),f.S.YR=l):ua.lP(h)&&a.name==l.name&&(f.S.OI=h,f.S.Gu=l.Gu,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.oS=h,l=new Float32Array([1,0,0]),oa.Ud(l,h,l),f.S.nS=l));4!=f.S.xp.length&&T.K("Not enough wheels for chassis "+f.name)}else if("HULL"==a.Cg)for(f.S={},f.S.xp=[],f.S.Tv=[],f.S.Su=a.Su,f.S.cu=a.cu,f.S.Go=a.Go,f.S.Rp=a.Rp,f.S.Sp=a.Sp,f.S.Zq=0,f.S.bu=1,f.S.Bs=0,f.S.speed=
0,f.S.Ds=null,k=(g=Da.Rj(f))?Da.UF(g,d):d,g=0;g<k.length;g++)h=k[g],h.wg&&(l=h.Kg,ua.Z0(h)&&a.name==l.name?(f.S.xp.push(h),f.S.Tv.push(new Float32Array(8))):ua.kP(h)&&a.name==l.name?(f.S.Ds=h,f.S.Cs=l.Cs,f.S.ww=l.ww,f.S.lv=l.lv,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.dS=h,l=new Float32Array([1,0,0]),oa.Ud(l,h,l),f.S.cS=l):ua.jP(h)&&a.name==l.name?(f.S.EI=h,f.S.vw=l.vw,f.S.Fr=l.Fr,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.ZR=h,l=new Float32Array([1,0,0]),oa.Ud(l,
h,l),f.S.YR=l):ua.lP(h)&&a.name==l.name&&(f.S.OI=h,f.S.Gu=l.Gu,l=oa.invert(f.A.D,oa.create()),h=oa.multiply(l,h.A.D,l),f.S.oS=h,l=new Float32Array([1,0,0]),oa.Ud(l,h,l),f.S.nS=l));for(u=0;u<d.length;u++)if(f=d[u],f.ap&&(a=f.cr,"MAIN_BODY"==a.Cg))for(f.Th={},f.Th.Go=a.Go,f.Th.Rp=a.Rp,f.Th.Sp=a.Sp,f.Th.ky=[],g=(g=Da.Rj(f))?Da.UF(g,d):d,k=0;k<g.length;k++)h=g[k],h.ap&&(l=h.cr,ua.b1(h)&&a.name==l.name&&(f.Th.ky.push(h),h.wE=h.cr.mS));e(b,c)}function I(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=
a.scenes[c],e=w.xc(d,"LAMP",b),f=Array(e.length),g=0;g<e.length;g++)f[g]=g;f.sort(function(a,b){var c=e[a].xd,d=e[b].xd;return d.Jp&&d.Np&&(!c.Jp||!c.Np)||!c.Jp&&(d.Jp||!c.Np&&d.Np)?1:0});for(g=0;g<f.length;g++)Da.La(e[f[g]],d).yv=g}}function u(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];f.Dk=f.camera.Oa}for(d=0;d<a.scenes.length;d++){var f=b.Xb?a.scenes[d]:Za,g=b.Xb?w.xc(f,"LAMP",b.id):w.xc(f,"LAMP",0),h=w.xc(f,"ALL",b.id),k=P(b.id,f,"MESH"),l=P(b.id,f,"EMPTY");b.Xb&&Na.gW(f,h,g,
k,l);for(var h=!1,m=0;m<l.length;m++)for(var n=l[m].Oa,p=n.T,q=0;q<p.length;q++){var r=p[q].vb,u=Na.KS(r,n);f.name==r.name&&(h=h||u)}b.Xb&&f.J.Xd&&!h&&ta.warn('Scene "'+f.name+'" has water but has no wind. Using default settings.');l=[];Na.es(f);sa.wN(f,k,g,l);m=w.xc(f,"LINE",b.id);sa.vN(f,m);n=Na.Nz(f);if(b.Xb){h=f.J.tC;m=f.world;if(h.IQ||h.procedural_skydome)p=m.Oa,sa.mW(f,h,p),sa.Iy(p,n,f);Na.tN(f,n);(h=f.J.Mn)&&(h.Mw||h.Qe)&&sa.eW(f,m.Oa)}for(m=0;m<k.length;m++)sa.Iy(k[m].Oa,n,f);for(m=0;m<l.length;m++)sa.Iy(l[m],
n,f),w.l2(l[m]);h=w.xc(f,"ALL",b.id);Na.eL(f,h,g);for(m=0;m<h.length;m++)n=h[m],n.A.$f&&!n.$O&&w.gJ(n),Da.AX(n)&&(n.VP=!0),w.J5(n,f)}Na.hW(Za,a.textures,b.id);b.Xb&&Za.J.at.length&&(b.qG=!0);e(b,c)}function J(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.Hh="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==La.so?"dds":""}if((ab.pF&&"dds"==La.so||ab.EB&&"pvr"==La.so)&&La.VS)for(a=0;a<b.length;a++){for(var d=b[a],e=d.texture_slots,c=0;c<e.length;c++){var f=e[c],g=f.texture;
if("IMAGE"==g.type||"ENVIRONMENT_MAP"==g.type){var h=g.image;h&&!h.Hh&&(f=!g.b4w_disable_compression&&!f.use_map_normal&&"ENVIRONMENT_MAP"!=g.type&&!g.b4w_shore_dist_map&&"MOVIE"!=h.source,x(h,f))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){e=d[c];f=!1;if("TEXTURE"==e.type){if((g=e.texture)&&(h=g.image)&&!h.Hh&&(f=!g.b4w_disable_compression&&"MOVIE"!=g.image.source&&"ENVIRONMENT_MAP"!=g.type)){a:{f=e.outputs;for(e=0;e<f.length;e++)if(g=f[e],g.is_linked&&"Normal"==g.identifier){f=!0;break a}f=
!1}f=!f}}else"TEX_IMAGE"==e.type?(h=e.image)&&!h.Hh&&(f="MOVIE"!=h.source):"TEX_ENVIRONMENT"==e.type&&(f=!1);h&&!h.Hh&&x(h,f)}}}function x(a,b){-1<a.filepath.indexOf(".dds")?a.Hh="dds":b?(a.Hh=La.so,a.filepath="dds"==La.so?a.filepath+".dds":a.filepath+".pvr"):a.Hh=""}function D(a,b,c,d,e){d=a.groups;for(var f=a.objects,g={},h={},k={},m={},n=0;n<d.length;n++){var p=d[n];g[p.uuid]=p;k[p.uuid]=p}for(n=0;n<f.length;n++)p=f[n],h[p.uuid]=p,m[p.uuid]=p;a=a.scenes;for(n=0;n<a.length;n++)l(a[n].objects,null,
m,k,null);for(var q in k)q in g||d.push(k[q]);for(q in m)q in h||f.push(m[q]);e(b,c)}function l(a,b,c,d,e){for(var f=[],g=0;g<a.length;g++){var h=a[g],k=c[h.uuid];if(h=k.proxy){b&&-1==f.indexOf(h.uuid)&&f.push(h.uuid);for(var m=c[h.uuid],n=m.constraints,h=0;h<n.length;h++){var p=T.Y(n[h]);p.name=p.name+"_CLONE";k.constraints.push(p)}"b4w_proxy_inherit_anim"in k&&!k.b4w_proxy_inherit_anim||(k.animation_data&&(m.animation_data=T.Y(k.animation_data)),m.b4w_use_default_animation=k.b4w_use_default_animation,
m.b4w_auto_skel_anim=k.b4w_auto_skel_anim,m.b4w_anim_behavior=k.b4w_anim_behavior,m.b4w_cyclic_animation=k.b4w_cyclic_animation)}}for(g=0;g<f.length;g++)k=T.e0(a,f[g]),-1<k&&a.splice(k,1);f={};if(b)for(g=0;g<a.length;g++)h=a[g],k=c[h.uuid],n=T.Y(k),m="origin_name"in k?k.origin_name:k.name,n.name=Da.sN(b.name,m),n.origin_name=m,n.dg_parent={uuid:b.uuid},v(n),c[n.uuid]=n,f[h.uuid]=n.uuid,h.uuid=n.uuid,e&&e[k.uuid]&&(n.b4w_cluster_data=e[k.uuid]);for(g=0;g<a.length;g++)h=a[g],k=c[h.uuid],k.dupli_group&&
(h=k.dupli_group,e=d[h.uuid],n=T.Y(e),n.name=T.Gw(e.name+"_CLONE"),n.uuid=Oa.HO("Group"+n.name),d[n.uuid]=n,h.uuid=n.uuid,l(n.objects,k,c,d,k.b4w_cluster_data));if(b)for(g=0;g<a.length;g++){h=a[g];k=c[h.uuid];k.parent&&k.parent.uuid in f?k.parent.uuid=f[k.parent.uuid]:k.parent&&(ta.warn("Object's \""+k.name+'" parent is not in dupli group. Disabling parenting.'),k.parent=null);n=k.constraints;for(h=0;h<n.length;h++)b=n[h],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);if(b=k.pose)for(d=
b.bones,h=0;h<d.length;h++)if(e=d[h].constraints)for(n=0;n<e.length;n++)b=e[n],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);b=k.modifiers;for(h=0;h<b.length;h++)d=b[h],d.object&&d.object.uuid in f&&(d.object.uuid=f[d.object.uuid]);if((k=k.lod_levels)&&k.length)for(h=0;h<k.length;h++)b=k[h],b.object&&b.object.uuid in f&&(b.object.uuid=f[b.object.uuid])}for(var q in f)Fb[q]=f[q]}function v(a){a.uuid=Oa.HO("Object"+a.name)}function N(a,b){a.action&&U(a,"action",b);if(a.nla_tracks)for(var c=
0;c<a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],e=0;e<d.strips.length;e++)d.strips[e].action&&U(d.strips[e],"action",b)}function E(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var e=c[d];"TEXTURE"==e.type&&e.texture&&U(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in Fb&&(e.lamp.uuid=Fb[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&U(e,"node_group",b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||U(e,"image",b)}e=a.links;for(d=0;d<e.length;d++){var f=
e[d];L(f,"from_node",c);L(f,"to_node",c);y(f,"from_socket",f.from_node.outputs);y(f,"to_socket",f.to_node.inputs)}(c=a.animation_data)&&N(c,b)}function U(a,b,c){a[b]&&((c=c[a[b].uuid])||ta.error("Dangling link found:",b,a),a[b]=c)}function L(a,b,c){c=T.Od("name",a[b].name,c);a[b]=c}function y(a,b,c){c=T.Od("identifier",a[b].identifier,c);a[b]=c}function H(a,b,d,e,f,g){var h=[],k=[],l={};e=a.images;for(var m=Ha.WN(),p=X(b.Pj),q=0;q<e.length;q++){var r=e[q],u=r.uuid;if(u){var v=T.Bl(p+r.filepath),t=
F.GC(v),x=t[1].toLowerCase(),z=r.source;if("FILE"===z){z=r.Hh?F.Wp:F.Xp;if(!F.zX(x)){ta.error('image "'+r.name+'" has unsupported format or broken path.');continue}ab.$G&&La.use_min50&&(v=n(t))}else if("MOVIE"===z)if(La.kw)v=t[0]+".altconv.seq",z=F.$w;else{z=Ea.uF(x);if(""==z){ta.error("failed to load video file (unsupported format)",v);continue}v=z!=x?t[0]+".altconv."+z:t[0]+"."+t[1];z=F.ax}else{ta.error('Image "'+r.name+'" has unsupported format "'+z+'".');continue}u in l||(l[u]=[]);for(t=0;t<m.length;t++)x=
m[t],(!Ha.K_(x)&&x.Km==r.Hh&&x.Uo==u||b.lh)&&l[u].push(x);r.Hh&&La.assets_gzip_available&&(z=F.gt,v+=".gz");l[u].length&&h.push({id:u,type:z,url:v,lf:b.lh})}}if(h.length){var A=0,y=function(e,f,m,n){if(e){if(b.lh)f=m;else{f=l[f];for(var p=0;p<f.length;p++){var q=f[p];if(m==F.$w)q.iw=e.Ri,Ha.Iw(q,e.images,b.id);else if(Ha.Iw(q,e,b.id),"ENVIRONMENT_MAP"==q.source&&b.Xb)for(var r=0;r<a.scenes.length;r++)Na.lD(a.scenes[r]);Ha.F3(q)}f=f[0].Km}m==F.ax||m==F.$w?(m==F.ax?(f=e.videoWidth,e=e.videoHeight):
(f=e.images[0].width,e=e.images[0].height),ta.log("%cLOAD VIDEO "+f+"x"+e,"color: #"+(2048<f||2048<e?"a00":1024<f||1024<e?"aa0":"0a0"),n),-1==n.indexOf(Xb)&&ta.warn("video",n,"is not from app root.")):c(e,n,!0,f)}else{a:{e=b.lh;n=n.split("?v")[0];m=F.GC(n);if("gz"==m[1])n=m[0],m=F.Wp;else if("dds"==m[1]||"pvr"==m[1])for(n=m[0],m=F.Xp,p=l[f],q=0;q<p.length;q++)p[q].Km="";else if(-1!=n.indexOf(".min50"))n=n.split(".min50"),n=n[0]+n[1],m=F.Xp;else{f=null;break a}f={id:f,type:m,url:n,lf:e}}f&&(ta.warn("Trying to load fallback image",
f.url),k.push(f))}f=++A/(h.length+k.length);g(b,d,f)},C=function(){k.length?(F.enqueue(k,y,C),k.length=0):(ta.log("%cLOADED ALL IMAGES","color: #0a0"),f(b,d))};F.enqueue(h,y,C)}else f(b,d)}function n(a){return"dds"==a[1]?(a=F.GC(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function f(a,b,c,d,e){a=Na.Tz();for(d=0;d<a.length;d++){var f=a[d];if(f.b4w_use_nla){var g=f.b4w_nla_cyclic;f.b4w_use_logic_editor&&(g=!1);ra.V5(f,g,b.id)}}e(b,c)}function W(a,b,c,e,f,g){a=X(b.Pj);var h=[],k={};e=w.Qj("ALL",
b.id);for(var l=0;l<e.length;l++){var m=e[l];if(G(m)){var n=m.ra.dd;"BACKGROUND_MUSIC"==Ea.fG(m)?(n=T.Ez(),b.mG=!0):"NONE"!=Ea.fG(m)&&La.vG&&(b.uG=!0);if(!(n in k)){k[n]=[];var p=T.Bl(a+m.ra.Pj);switch(Ea.XR(m)){case Ea.HD:var q=F.ID;break;case Ea.vJ:q=F.JD}d(h,n,q,p,b.lh)}k[n].push(m)}}if(h.length){var r=0;F.enqueue(h,function(a,d,e,f){if(a)for(ta.log("%cLOAD SOUND","color: #0aa",f),-1==f.indexOf(Xb)&&ta.warn("sound",f,"is not from app root."),d=k[d],e=0;e<d.length;e++)Ea.a6(d[e],a);a=++r/h.length;
g(b,c,a)},function(){ta.log("%cLOADED ALL SOUNDS","color: #0aa");f(b,c)})}else f(b,c)}function d(a,b,c,d,e){var f=F.GC(d),g=f[1].toLowerCase(),h=Ea.tF(g);""!=h?(d=h!=g?f[0]+".altconv."+h:f[0]+"."+f[1],a.push({id:b,type:c,url:d,lf:e})):ta.error("failed to load audio file (unsupported format)",d)}function G(a){return Da.Sm(a)&&Ea.XR(a)!=Ea.wJ}function B(a,b,c){a=w.xc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];Da.Sm(d)&&(Ea.Y0(d)||c)&&Ea.zB(d)}}function S(a,b){for(var c=a.J.at,d=0;d<c.length;d++){var e=
c[d].J;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=e.dt||(Ha.NQ(e),Ha.oQ(e))}}function r(a,b,c,d,e){ra.L2();e(b,c)}function ha(a,b,c,d,e){ra.start();ta.log("%cSTART NLA","color: #0a0");e(b,c)}function qa(a,b,c,d,e){for(var f=c.lod_levels.length,g=0;g<f;g++){var h=c.lod_levels[g],k=h.object;if(k){var l=e.DP.indexOf(c);if(-1==l){e.DP.push(c);var m={mB:[],XP:[],CP:[],aI:[],nH:[]};e.QA.push(m)}else m=e.QA[l];var n=m.mB.indexOf(k);-1!=l&&-1!=n?(m.aI[n].push(a),m.nH[n].push(b)):(l=T.nu(k),
l.name=c.name+"_LOD_"+String(g+1),l.b4w_cluster_data=c.b4w_cluster_data,v(l),l.lod_levels=[],d&&(l.dg_parent=d),m.mB.push(k),m.XP.push(l),m.CP.push(h),m.aI.push([a]),m.nH.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)qa(a,b,b[d],c,e)}function K(a,b){var c=b.objects,d=c.indexOf(a);-1<d&&c.splice(d,1);for(d=0;d<c.length;d++)(b=c[d].dupli_group)&&K(a,b)}function pa(a,b,c,d,e){d=!0;for(var f=0;f<a.scenes.length;f++)if(!ua.DX(a.scenes[f])){d=!1;break}d&&(e(b,c),ta.log("%cPHYSICS READY",
"color: #0a0"))}function ja(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];if(b.Xb)var g=ua.QB(f);else g=ua.QB(Za)||ua.QB(f),f=Za;if(ub.enabled&&g)for(g=0;g<kc.length;g++)for(var h=w.xc(f,kc[g],b.id),k=0;k<h.length;k++){var l=h[k];l.A.Me==b.id&&(ua.mm(l,f),b.yP&&ua.Aa(l)&&ua.xF(l))}}e(b,c)}function ma(a,b,d,e,f){var g={};e=[];for(var h=a.scenes,k=0;k<a.scenes.length;k++){var l=h[k];if(l.J.Xd){var m=l.J.Xd.nn;if(m&&"FILE"===m.source){var l=m.uuid,n=T.Bl(X(b.Pj)+m.filepath);e.push({id:l,
type:m.Hh?F.Wp:F.Xp,url:n});g[l]=m}}}e.length?F.enqueue(e,function(a,d,e,f){if(a){c(a,f,!0);e=[];f=Ha.WN();for(var k=0;k<f.length;k++){var l=f[k];l.uri===d&&e.push(l)}for(d=0;d<e.length;d++)Ha.Iw(e[d],a,b.id);for(d=0;d<h.length;d++)if(e=h[d],e.J.Xd&&(f=e.J.Xd.nn,f===m)){var l=a,n=document.createElement("canvas");f=m.size[0];k=m.size[1];n.width=f;n.height=k;n=n.getContext("2d");n.drawImage(l,0,0);l=n.getImageData(0,0,f,k).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;n[2]=1/255;n[3]=1;f*=
k;for(var k=new Float32Array(f),p=0;p<f;p++)k[p]=n[1]*l[4*p+2]+n[2]*l[4*p+3];e.J.zI=k}}else for(a=g[d],d=0;d<h.length;d++)e=h[d],f=e.J.Xd.nn,f===a&&(e.J.Xd.nn=null,ta.warn("image",f.filepath," was not found. Disabling water shore effects."))},function(){f(b,d)}):f(b,d)}function aa(a,b,d,e,f){e=a.scenes[0];a=[];for(var g=[Ga.Hx,Ga.Ht,Ga.Ix,Ga.dE],h=0;h<g.length;h++){var k=Na.dc(e,g[h]);k&&a.push(k)}if(a.length){e=[];h=F.Xp;e.push({id:"SEARCH_TEXTURE",type:h,url:ya.Sf.smaa_search_texture_path,lf:b.lh});
e.push({id:"AREA_TEXTURE",type:h,url:ya.Sf.smaa_area_texture_path,lf:b.lh});for(h=0;h<a.length;h++)if(g=a[h],g.type==Ga.Ht){a=g.rb;for(h=0;h<a.length;h++)if(g=a[h],"u_search_tex"==g.to)var l=g.Xa;else if("u_area_tex"==g.to)var m=g.Xa;break}e.length?F.enqueue(e,function(a,d,e,f){a&&(c(a,f,!1),d="SEARCH_TEXTURE"==d?l:m,d.source="IMAGE",Ha.Iw(d,a,b.id),Ha.hI(d,Ha.U,Ha.U))},function(){f(b,d)}):f(b,d)}else f(b,d)}function ka(a,b,c,d){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.Xb||(e=Za);for(var f=
w.xc(e,"LAMP",b.id),g=0;g<f.length;g++){var h=f[g];h.A.Me==b.id&&d.kE.push({vb:e,aa:h})}f=w.xc(e,"ALL",b.id);for(g=0;g<f.length;g++)h=f[g],"LAMP"!=h.type&&h.A.Me==b.id&&(b.yP&&Da.mf(h)&&Na.po(h,!0),d.kE.push({vb:e,aa:h}))}}function ca(a,b,c,d,e,f){var g=d.kE;e=d.cQ;if(g.length){a=g[e].aa;var h=g[e].vb;e=Da.La(a,h);Na.mm(h,a);!a.anchor||h.J.anaglyph_use||h.J.pw||za.append(a);d=++d.cQ/g.length;a.A.IO&&Na.iu(a,!0);g=e.Wk;if(-1!=a.A.Le&&g){var k=Ka.copy(a.A.$e.V,mb);Na.JS(g,k)}g=a.$v;if(g.length&&h.J.gj)for(h=
oa.X(a.A.D),a=oa.la(a.A.D),e=e.hk,k=0;k<e.length;k++)Na.MS(e[k],h,a),Da.NS(g,e[k].H.Kc)}else d=1;f(b,c,d)}function ea(a,b,c,d,e){if(b.Xb){a=Na.Ui();Na.lD(a);d=Na.Tz();for(var f=0;f<d.length;f++){var g=d[f];Na.lD(g);Na.O2(g,a)}Na.es(a)}else Na.PS(Za);a=w.Qj("ALL",b.id);w.O5(a);e(b,c)}function wa(a,b,c,d,e){if(b.Xb)for(a=Na.Tz(),d=0;d<a.length;d++)for(var f=a[d],g=w.xc(f,"WORLD",0),h=0;h<g.length;h++)Na.R0(f,g[h]),Na.lD(f);e(b,c)}function da(a,b,c,d,e){if(b.Xb)for(a=Na.Tz(),d=0;d<a.length;d++){var f=
a[d];f.b4w_use_logic_editor&&V.S0(f,b.id)}e(b,c)}function Z(a,b,c,d,e){if(b.Xb)for(d=0;d<a.scenes.length;d++)S(a.scenes[d],b.id),B(a.scenes[d],b.id,!1);else S(Za,b.id),B(Za,b.id,!1);e(b,c)}function Ja(a,b,c,d,e){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;La.media_auto_activation&&(b.qG||b.mG||b.uG)?gb||R(a,e,b,c):e(b,c)}function R(a,b,c,d){var e=vb.parentElement;Sa=e.style.zIndex;e.style.zIndex="999";gb=document.createElement("div");gb.style.position="relative";gb.style.height="88px";gb.style.width=
"88px";var f=Math.round(vb.offsetWidth/2-44);gb.style.top=Math.round(vb.offsetHeight/2-44).toString()+"px";gb.style.left=f.toString()+"px";gb.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
gb.style.backgroundSize="88px";fb=document.createElement("div");fb.style.position="relative";fb.style.height=vb.offsetHeight.toString()+"px";fb.style.width=vb.offsetWidth.toString()+"px";fb.style.background="rgba(0, 0, 0, 0.5)";fb.style.zIndex="999";e.appendChild(fb);fb.appendChild(gb);Yb=function(){c.qG&&(Ha.play(),Ha.pause(),Ha.reset());if(c.mG){if(c.Xb)for(var e=0;e<a.scenes.length;e++)B(a.scenes[e],c.id,!0);else B(Za,c.id,!0);Ea.pause()}c.uG&&Ea.nQ();na();b(c,d)};la.Ih(gb,Yb)}function na(){if(gb){var a=
vb.parentElement;a.style.zIndex=Sa;la.LB(gb,Yb);fb.removeChild(gb);a.removeChild(fb);gb=fb=null;Sa=0}}function X(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function fa(a){ia.WO(a)&&ia.remove(a);Ya.a3(a);w.ku(a);va.qm(a)&&va.Tf(a);ua.Aa(a)&&ua.Ap(a);Na.HQ(a);Da.Sm(a)&&Ea.F4(a);za.X0(a)&&za.remove(a)}function ba(a){var b=ia.DN(a);return(a=b&&b.parent==a?null:a.parent||b)?1+ba(a):0}var za=t("__anchors"),ia=t("__animation"),F=t("__assets"),sa=t("__batch"),ya=t("__config"),Q=t("__constraints"),
va=t("__controls"),Ua=t("__texcomp"),Ba=t("__debug"),Aa=t("__extensions"),la=t("__input"),Y=t("__loader"),xa=t("__material"),Oa=t("__md5"),ra=t("__nla"),V=t("__logic_nodes"),Ya=t("__particles"),Fa=t("__nodemat"),w=t("__objects"),Da=t("__obj_util"),ua=t("__physics"),ta=t("__print"),Pa=t("__quat"),cb=t("__reformer"),Ia=t("__renderer"),Na=t("__scenes"),Ea=t("__sfx"),Ma=t("__shaders"),Ga=t("__subscene"),Qa=t("__tbn"),Ha=t("__textures"),ga=t("__time"),Mb=t("__transform"),oa=t("__tsr"),T=t("__util"),Ka=
t("__vec3"),Va=t("__vec4"),Wa=ya.eo,La=ya.L,ab=ya.Ke,ub=ya.N,pb=ya.ra,Ca=null,Ta=null,Xb="",Za=null,Fb={},mb=new Float32Array(3),qb=new Float32Array(4),ic=new Float32Array(4),jc=Qa.create(),gb=null,fb=null,Sa=0,Jb=!1,Yb=null,Bc=["LAMP"],kc=["MESH","CAMERA","EMPTY"],Nb=["BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],vb=null;a.Xi=function(a){return Y.Xi(a)};a.update=function(){Y.W5(Ca)};a.q4=function(a){vb=a};a.M5=function(a,b){if(gb){fb.style.height=b.toString()+"px";fb.style.width=a.toString()+
"px";var c=Math.round(a/2-44);gb.style.top=Math.round(b/2-44).toString()+"px";gb.style.left=c.toString()+"px"}};a.load=function(a,c,d,e,h){var l={load_main:{Rb:Y.Dh,bc:!1,inputs:[],fc:!1,hc:500,uc:!1,kc:b},duplicate_objects:{Rb:Y.Je,bc:!1,inputs:["load_main"],fc:!1,hc:50,uc:!1,kc:D},load_binaries:{Rb:Y.Dh,bc:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:k},wait_for_shaders:{Rb:Y.Je,bc:!1,inputs:[],fc:!1,hc:50,uc:!0,pm:g},prepare_bindata:{Rb:Y.Je,bc:!1,inputs:["duplicate_objects","load_binaries"],
fc:!1,hc:100,uc:!1,kc:M},prepare_bpy_data:{Rb:Y.Je,bc:!1,inputs:["duplicate_objects","prepare_bindata"],fc:!1,hc:100,uc:!1,kc:z},process_objects:{Rb:Y.Je,bc:!1,inputs:["prepare_bpy_data"],fc:!1,hc:150,uc:!1,kc:O},process_scenes:{Rb:Y.Je,bc:!1,inputs:["process_objects","wait_for_shaders"],fc:!1,hc:300,uc:!1,kc:u},load_smaa_textures:{Rb:Y.Dh,bc:!1,inputs:["process_scenes"],fc:!1,hc:30,uc:!0,kc:aa},load_shoremap:{Rb:Y.Dh,bc:!1,inputs:["process_scenes"],fc:!1,hc:30,uc:!0,kc:ma},load_images:{Rb:Y.Dh,bc:!0,
inputs:["process_scenes"],fc:!0,hc:500,uc:!1,kc:H},update_scenes_nla:{Rb:Y.Je,bc:!1,inputs:["process_scenes","load_images"],fc:!1,hc:50,uc:!1,kc:f},wait_physics_workers:{Rb:Y.Je,bc:!1,inputs:["load_shoremap"],fc:!1,hc:20,uc:!1,pm:pa},add_physics_objects:{Rb:Y.Je,bc:!1,inputs:["wait_physics_workers"],fc:!1,hc:50,uc:!1,kc:ja},add_objects:{Rb:Y.Je,bc:!1,inputs:["add_physics_objects"],fc:!1,hc:600,uc:!1,kc:ka,pm:ca,gu:ea,hu:{kE:[],cQ:0}},init_cube_sky_dynamic_props:{Rb:Y.Je,bc:!1,inputs:["add_objects",
"load_images"],fc:!1,hc:50,uc:!1,kc:wa},init_logic_nodes:{Rb:Y.Je,bc:!1,inputs:["update_scenes_nla","add_objects"],fc:!1,hc:50,uc:!1,kc:da},load_speakers:{Rb:Y.Dh,bc:!0,inputs:["add_objects"],fc:!0,hc:100,uc:!1,kc:W},mobile_media_start:{Rb:Y.Je,bc:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],fc:!0,hc:5,uc:!1,kc:Ja,pm:Ja},synchronize_media:{Rb:Y.Je,bc:!0,inputs:["mobile_media_start"],fc:!0,hc:50,uc:!1,kc:Z},prepare_nla:{Rb:Y.Je,bc:!1,inputs:["mobile_media_start"],
fc:!1,hc:5,uc:!0,kc:r},start_nla:{Rb:Y.Je,bc:!0,inputs:["prepare_nla"],fc:!1,hc:5,uc:!0,kc:ha}},m=Y.eG();m||(m=Y.AM(),Ca={},Ta={},Fb={});Ca[m.Jg.length]={};return Y.EM(l,a,c,d,p,e||pb.hL,La.do_not_load_resources,h,!1)};a.jD=function(a){var b=Y.eG();if(!b||!b.Jg.length||a&&!Y.g5(b.Jg[a]))ta.error("Unable to unload data!");else{if(0==a)ta.log("%cUNLOAD ALL","color: #00a"),za.Ja(),ia.Ja(),Ea.Ja(),sa.Ja(),Na.Ja(),Y.Ja(),va.Ja(),ua.Ja(),w.Ja(),T.Ja(),Ia.Ja(),Fa.Ja(),Ma.Ja(),Aa.Ja(),F.Ja(),Ha.Ja(),V.Ja(),
Ya.Ja(),la.Ja(),Ba.Ja(),Ta=null,Fb={},Ca=Za=null,Jb=!1;else{ta.log("%cUNLOAD DATA "+a,"color: #00a");ia.Y2(a);for(var b=w.Qj("ALL",w.Vc),c=0;c<b.length;c++){var d=b[c];Da.aG(d)!=a&&w.Sr(d,!1,!1,!1)}b=w.Qj("ALL",a);for(c=b.length-1;0<=c;c--)d=b[c],fa(d),w.Ap(d);b=w.Qj("ALL",w.Vc);for(c=0;c<b.length;c++)w.Sr(b[c],!0,!0,!0)}ra.Ja(a);na()}};a.rQ=fa;a.gR=function(a){Xb=a};a.OK=function(){Jb||La.media_auto_activation||(Ha.play(),Ha.pause(),Ha.reset(),B(Za,w.Vc,!0),Ea.pause(),La.vG&&Ea.nQ(),Jb=!0)};a.reset=
function(){vb=null};a.qQ=function(a,c,d){var e={load_main:{Rb:Y.Dh,bc:!1,inputs:[],fc:!1,hc:500,uc:!1,kc:b},load_binaries:{Rb:Y.Dh,bc:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:k},load_images:{Rb:Y.Dh,bc:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:H},preload_sounds:{Rb:Y.Dh,bc:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:C}},f=Y.eG();f||(f=Y.AM(),Ca={},Ta={},Fb={});Ca[f.Jg.length]={};return Y.EM(e,a,c,d,p,!1,La.do_not_load_resources,!1,!0)};a.FS=function(){F.JX()}};b4w.module.__loader=function(a,t){function p(b,e,g,h){var k=J,l=P.create(),m;for(m in e){var p=c(e[m]);if(h&&p.fc||!b&&p.uc)p.qw=!0;P.Z(l,p)}for(m in e)for(p=e[m],p.name=m,b=0;b<p.inputs.length;b++)P.I(l,e[p.inputs[b]],p,null);e=c({name:"out",Rb:a.CT,kc:function(a,b,c,e,d){b.Xb&&(k.HI=!0);q(b)||(b.status=2);b.AP(b.id,!0);d(b,c);O.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},hc:5});if(g)g=P.cv(l);else{m=P.clone(l);do{g=P.cv(m);p=[];for(b=0;b<g.length;b++){h=g[b];var u=P.lb(m,h);u.bc&&
p.push(h)}for(b=0;b<p.length;b++)P.Dg(m,p[b]);p.length&&P.NE(m)}while(p.length)}P.Z(l,e);for(b=0;b<g.length;b++)h=g[b],u=P.lb(l,h),e.inputs.push(u.name),P.I(l,u,e,null);return l}function c(a){a.bc=a.bc||!1;a.Rb||0===a.Rb||(a.Rb=a.Je);a.inputs=a.inputs||[];a.$o=a.$o||!1;a.qw=a.qw||!1;a.hc=a.hc||0;a.fc=a.fc||!1;a.uc=a.uc||!1;a.status=0;a.Vca=0;a.zP=0;a.hu=a.hu||null;return a}function b(a,b,c){b.iM(c,b);b.status=3;a.jE--;u.debug_loading&&O.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.Bw)+"ms","color: #f0f;");b.FI=null;b.iM=null;u.debug_loading||(b.vi=null);b.Ql=null}function k(a,b){for(var c=[],e=[],g=0;g<b.length;g++){var h=b[g];P.lb(a.vi,h).$o&&(P.Bn(a.vi,h,function(e){var g=!0;P.Xl(a.vi,e,function(a,b){if(!b.$o)return g=!1,1});g&&-1==c.indexOf(e)&&-1==b.indexOf(e)&&c.push(e)}),e.push(g))}for(g=e.length-1;0<=g;g--)b.splice(e[g],1);return c}function g(a){function b(b,c){var e=P.lb(a.vi,b),g=P.lb(a.vi,c),h=g.Rb-e.Rb;h||(h=e.bc-g.bc);return h}var c=[],e=a.Ql,g=!1;do{var h=k(a,
e);c.push.apply(c,e);0<h.length&&(g=!0);e=h}while(0<h.length);g&&c.sort(b);a.Ql=c;return a.Ql.length}function M(a,b,c){if(b.qw)return b.$o=!0,u.debug_loading&&O.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),z(a,b),!1;if(u.debug_loading&&0==b.status){var e=m(a);O.log("%cTHREAD "+a.id+": "+e+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.Bw)+"ms ","color: #f0f;")}if(!b.kc&&!b.pm&&!b.gu)return z(a,b),!1;if(0==b.status&&(b.status++,b.kc))return b.kc(c,a,b,b.hu,z,C),!0;
if(1==b.status){if(b.pm)return b.pm(c,a,b,b.hu,z,C),!0;b.status++}return 2==b.status&&(b.status++,b.gu)?(b.gu(c,a,b,b.hu,z,C),!0):!1}function m(a){if(0==a.KC)return 100;var b=0;P.ja(a.vi,function(c,e){a.do_not_load_resources&&e.fc||(b+=e.zP*e.hc)});return I.trunc(100*b/a.KC)}function z(a,b){b.$o=!0;b.status=3;h(a,b,1);if(u.debug_loading){var c=m(a);O.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.Bw)+"ms ","color: #f0f;")}}function C(a,b,c){1>c?h(a,b,c):
b.status++}function h(a,b,c){var e=J;if(b.kc||b.pm||b.gu)if(b.zP=c,b=m(a),a.LM!=b||1==c)a.FI(b,performance.now()-a.Bw,a.id),a.LM=b,e.PG=!0}function e(a,b){var c=null;P.ja(a.vi,function(a,e){if(e.name==b)return c=e,1});return c}function A(){return 0==J.jE}function q(a){return a&&(3==a.status||4==a.status)}var P=t("__graph"),O=t("__print"),I=t("__util"),u=t("__config").L;a.Je=0;a.Dh=1;a.CT=2;var J=null;a.eG=function(){return J};a.AM=function(){var a={Jg:[],nF:0,jE:0,HI:!1,PG:!1};return J=a};a.EM=function(a,
b,c,e,g,h,k,m,q){var l=J,n=l.Jg.length,f={id:n,Xb:0==n,status:0,Pj:b,sL:"",AP:c||function(){},yP:m||!1,wfa:h,Bw:0,LM:0,KC:0,VH:!1,FI:e||function(){},iM:g||function(){},vi:null,Ql:null,qG:!1,mG:!1,uG:!1,lh:q};a=p(f.Xb,a,h,k);f.vi=a;b=[];c=P.n0(a);for(e=0;e<c.length;e++)b.push(c[e]);f.Ql=b;P.ja(a,function(a,b){!(b.kc||b.pm||b.gu)||f.do_not_load_resources&&b.fc||(f.KC+=b.hc)});l.Jg.push(f);l.jE++;return f.id};a.W5=function(c){var e=J;if(e&&!A())if(e.PG)e.PG=!1;else{var h=performance.now();do{var k=e.Jg[e.nF],
m=c[k.id];if(!q(k))if(0==k.status&&(k.status=1,k.Bw=performance.now(),k.FI(0,0,k.id),u.debug_loading&&O.log("%cTHREAD "+k.id+": 0% LOADING START 0ms","color: #f0f;")),g(k)){var p=k,t=p.Ql.length;do{var z=P.lb(p.vi,p.Ql[0]),y=M(p,z,m);z.Rb==a.Dh&&(p.VH=!0);z=p.Ql.shift();p.Ql.push(z);t--}while(!y&&0!=t)}else b(e,k,m);e.HI&&(e.nF=(e.nF+1)%e.Jg.length);if(k.VH){k.VH=!1;break}}while(16>performance.now()-h)}};a.KK=function(a){var c=J;b(c,a,null);a.status=4;a.Xb&&(c.HI=!0);a.AP(a.id,!1)};a.Gea=C;a.pC=function(a,
b){var c=e(a,b);null!==c&&(c.qw=!0)};a.$o=A;a.g5=q;a.Xi=function(a){var b=J;if(!b)return!1;a|=0;return b.Jg[a]&&(3==b.Jg[a].status||2==b.Jg[a].status)};a.w0=function(b){if(u.debug_loading){var c=J;return c&&c.Jg[b]&&c.Jg[b].vi?P.PM(c.Jg[b].vi,function(b,c){if(c.qw)return"SKIPPED\n("+c.name+")";var e=c.name+"\n",g=[];g.push(c.Rb==a.Dh?"ASYNC":"SYNC");c.bc&&g.push("BKG");c.fc&&g.push("RES");return e+g.join(" | ")},null):null}O.error("Debug mode isn't enabled. Can not retrieve the graph.")};a.Ja=function(){J=
null}};b4w.module.__md5=function(a){function t(a,g){var m=a[0],t=a[1],h=a[2],e=a[3],m=c(m,t,h,e,g[0],7,-680876936),e=c(e,m,t,h,g[1],12,-389564586),h=c(h,e,m,t,g[2],17,606105819),t=c(t,h,e,m,g[3],22,-1044525330),m=c(m,t,h,e,g[4],7,-176418897),e=c(e,m,t,h,g[5],12,1200080426),h=c(h,e,m,t,g[6],17,-1473231341),t=c(t,h,e,m,g[7],22,-45705983),m=c(m,t,h,e,g[8],7,1770035416),e=c(e,m,t,h,g[9],12,-1958414417),h=c(h,e,m,t,g[10],17,-42063),t=c(t,h,e,m,g[11],22,-1990404162),m=c(m,t,h,e,g[12],7,1804603682),e=c(e,m,t,h,
g[13],12,-40341101),h=c(h,e,m,t,g[14],17,-1502002290),t=c(t,h,e,m,g[15],22,1236535329),m=b(m,t,h,e,g[1],5,-165796510),e=b(e,m,t,h,g[6],9,-1069501632),h=b(h,e,m,t,g[11],14,643717713),t=b(t,h,e,m,g[0],20,-373897302),m=b(m,t,h,e,g[5],5,-701558691),e=b(e,m,t,h,g[10],9,38016083),h=b(h,e,m,t,g[15],14,-660478335),t=b(t,h,e,m,g[4],20,-405537848),m=b(m,t,h,e,g[9],5,568446438),e=b(e,m,t,h,g[14],9,-1019803690),h=b(h,e,m,t,g[3],14,-187363961),t=b(t,h,e,m,g[8],20,1163531501),m=b(m,t,h,e,g[13],5,-1444681467),e=
b(e,m,t,h,g[2],9,-51403784),h=b(h,e,m,t,g[7],14,1735328473),t=b(t,h,e,m,g[12],20,-1926607734),m=p(t^h^e,m,t,g[5],4,-378558),e=p(m^t^h,e,m,g[8],11,-2022574463),h=p(e^m^t,h,e,g[11],16,1839030562),t=p(h^e^m,t,h,g[14],23,-35309556),m=p(t^h^e,m,t,g[1],4,-1530992060),e=p(m^t^h,e,m,g[4],11,1272893353),h=p(e^m^t,h,e,g[7],16,-155497632),t=p(h^e^m,t,h,g[10],23,-1094730640),m=p(t^h^e,m,t,g[13],4,681279174),e=p(m^t^h,e,m,g[0],11,-358537222),h=p(e^m^t,h,e,g[3],16,-722521979),t=p(h^e^m,t,h,g[6],23,76029189),m=
p(t^h^e,m,t,g[9],4,-640364487),e=p(m^t^h,e,m,g[12],11,-421815835),h=p(e^m^t,h,e,g[15],16,530742520),t=p(h^e^m,t,h,g[2],23,-995338651),m=k(m,t,h,e,g[0],6,-198630844),e=k(e,m,t,h,g[7],10,1126891415),h=k(h,e,m,t,g[14],15,-1416354905),t=k(t,h,e,m,g[5],21,-57434055),m=k(m,t,h,e,g[12],6,1700485571),e=k(e,m,t,h,g[3],10,-1894986606),h=k(h,e,m,t,g[10],15,-1051523),t=k(t,h,e,m,g[1],21,-2054922799),m=k(m,t,h,e,g[8],6,1873313359),e=k(e,m,t,h,g[15],10,-30611744),h=k(h,e,m,t,g[6],15,-1560198380),t=k(t,h,e,m,g[13],
21,1309151649),m=k(m,t,h,e,g[4],6,-145523070),e=k(e,m,t,h,g[11],10,-1120210379),h=k(h,e,m,t,g[2],15,718787259),t=k(t,h,e,m,g[9],21,-343485551);a[0]=m+a[0]&4294967295;a[1]=t+a[1]&4294967295;a[2]=h+a[2]&4294967295;a[3]=e+a[3]&4294967295}function p(a,b,c,g,h,e){b=(b+a&4294967295)+(g+e&4294967295)&4294967295;return(b<<h|b>>>32-h)+c&4294967295}function c(a,b,c,g,h,e,k){return p(b&c|~b&g,a,b,h,e,k)}function b(a,b,c,g,h,e,k){return p(b&g|c&~g,a,b,h,e,k)}function k(a,b,c,g,h,e,k){return p(c^(b|~g),a,b,h,
e,k)}var g="0123456789abcdef".split("");a.HO=function(a){var b=a,c=b.length;a=[1732584193,-271733879,-1732584194,271733878];var k;for(k=64;k<=b.length;k+=64){var h,e=b.substring(k-64,k),p=[];for(h=0;64>h;h+=4)p[h>>2]=e.charCodeAt(h)+(e.charCodeAt(h+1)<<8)+(e.charCodeAt(h+2)<<16)+(e.charCodeAt(h+3)<<24);t(a,p)}b=b.substring(k-64);h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(k=0;k<b.length;k++)h[k>>2]|=b.charCodeAt(k)<<(k%4<<3);h[k>>2]|=128<<(k%4<<3);if(55<k)for(t(a,h),k=0;16>k;k++)h[k]=0;h[14]=8*c;t(a,
h);for(b=0;b<a.length;b++){c=a[b];k="";for(h=0;4>h;h++)k+=g[c>>8*h+4&15]+g[c>>8*h&15];a[b]=k}return a.join("")}};b4w.module.config=function(a,t){var p=t("__config"),c=t("__compat"),b=t("__debug"),k=t("__data"),g=t("__print");a.im=p.im;a.Bk=p.Bk;a.Un=p.Un;a.kK=p.kK;a.Et=p.Et;a.set=p.set;a.get=p.get;a.reset=p.reset;a.UH=p.UH;a.Gba=p.RF;a.RF=p.RF;a.Eq=function(a){k.Xi()?g.error("Cannot change quality profile after a scene is loaded."):(p.set("quality",a),b.Mz()&&(p.Eq(),c.tR(b.Mz(),!1)))}};b4w.module.constraints=function(a,t){var p=t("__camera"),c=t("__constraints"),b=t("__obj_util"),k=t("__physics"),g=t("__print"),M=t("__transform"),m=t("__util"),z=t("__vec3");a.n9=function(a,h,e,m,p){b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(e=e||new Float32Array(3),p=p||1,m=m?m:[0,0,0,1],h instanceof Array&&2==h.length?c.nW(a,h[0],h[1],e,m,p):c.SK(a,h,e,m,p),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.kW=function(a,h,e,p,q,t,z,I){b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(q=m.Of(q)?q:Math.PI/2,t=m.Of(t)?t:-Math.PI/2,z=m.Of(z)?z:Math.PI/2,I=m.Of(I)?I:-Math.PI/2,e=e||new Float32Array(3),p=p?new Float32Array(p):null,c.lW(a,h,e,p,q,t,z,I),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.m9=function(b,c,e,k,m,t,z,I){g.ff("append_semi_stiff_cam",
"append_semi_stiff");p.Oe(b)?a.kW(b,c,e,k,m,t,z,I):g.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};a.l9=function(b,c,e,k){g.ff("append_semi_soft_cam","append_semi_soft");p.Oe(b)?a.iW(b,c,e,k):g.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};a.iW=function(a,h,e,p){if(b.ea(a))if(c.Mi(a,h))if(c.Li(a,h)){if(!m.Of(p)||0>p)p=.25;e=e||new Float32Array(3);c.jW(a,h,e,p);M.W(a);k.$(a)}else g.error("Constraint recursion is forbidden.");
else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.oW=function(a,h){var e=[0,0,.5];b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(e=e||new Float32Array(3),c.pW(a,h,e),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.f9=function(a,h,e,m,p){if(b.ea(a))if(c.Mi(a,h))if(c.Li(a,h)){m=m||!1;e=
e||"XYZ";p=p||1;var q=M.Ne(a,new Float32Array(3)),t=new Float32Array(3);t[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;t[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;t[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.bW(a,h,q,t,m,p);M.W(a);k.$(a)}else g.error("Constraint recursion is forbidden.");else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.h9=function(a,h,e){b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(c.dW(a,
h,e||1),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.g9=function(a,h,e,m,p){if(b.ea(a))if(c.Mi(a,h))if(c.Li(a,h)){e=e||"XYZ";var q=new Float32Array(3);q[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;q[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;q[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.cW(a,h,q,m||!1,p||1);M.W(a);k.$(a)}else g.error("Constraint recursion is forbidden.");
else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.o9=function(a,h,e,m){b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(e=e||new Float32Array(3),m=m?new Float32Array(m):[0,0,0,1],c.qW(a,h,e,m),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.p9=function(a,h,e,p,q,t){if(b.ea(a))if(c.Mi(a,
h))if(c.Li(a,h)){var A=m.Ee;"-Y"==e?A=m.Eh:"Y"==e?A=m.Ee:"-X"==e?A=m.it:"X"==e?A=m.Af:"-Z"==e?A=m.qc:"Z"==e&&(A=m.ic);e=m.ic;"X"==p?e=m.Af:"Y"==p&&(e=m.Ee);1==Math.abs(z.dot(A,e))?g.error("Can not use parallel vectors for track and up axes."):(c.rW(a,h,A,e,q||!1,t||1),M.W(a),k.$(a))}else g.error("Constraint recursion is forbidden.");else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.j9=function(a,h,e,m){b.ea(a)?
c.Mi(a,h)?c.Li(a,h)?(c.fW(a,h,e,m),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.TK=function(a,h,e){b.ea(a)?c.Mi(a,h)?c.Li(a,h)?(e=e||{},c.TK(a,h,e),M.W(a),k.$(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.remove=function(a,
b){b=b||!1;a.Cc&&c.remove(a,b);b&&M.W(a)}};b4w.module.scenes=function(a,t){function p(){var a=g.Xh();return z.vp(a.clientWidth/2,a.clientHeight/2)}function c(a){return C.Zo(a)||C.sr(a)||C.nv(a)||C.ur(a)}var b=t("__batch"),k=t("__camera"),g=t("__container"),M=t("__data"),m=t("__graph"),z=t("__objects"),C=t("__obj_util"),h=t("__print"),e=t("__scenes"),A=t("__scenegraph"),q=t("__subscene"),P=t("__util");a.Vc=z.Vc;a.es=function(a){var b=e.av();e.es(P.Od("name",a,b))};a.R=function(){return e.Ya()?e.R().name:""};a.Aba=function(){for(var a=e.av(),
b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};a.il=function(){if(e.Ya())return e.Hm(e.R());h.error("No active scene");return!1};a.mba=function(a,b){var c=z.ud(z.YD,a,b|0,!0);if(c)return c;h.error("get object "+a+": not found")};a.kba=function(a,b,c){if(a=z.ud(z.XD,a,b,c|0))return a;h.error("get object "+b+": not found")};a.lba=function(a,b){var c=z.ud(z.ke,a,b|0);if(c)return c;h.error("get object "+a+": not found")};a.$z=function(a,b){var c=z.$z(a,b|0);if(c)return c;h.error("get object "+a+
": not found")};a.aG=function(a){return C.aG(a)};a.vp=function(a,b){var c=e.Ui();return c?(c=e.dc(c,q.Gh))&&c.enable_hmd_stereo?(h.va("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),p()):z.vp(a,b):(h.error("No active scene"),null)};a.z2=p;a.p2=function(a){return a&&a.A&&a.A.zd};a.nI=function(a,b){a&&a.A&&a.A.zd?z.nI(a,b):h.error("set_outline_intensity(): wrong object")};a.tba=function(a){if(a&&a.A&&a.A.zd)return a.A.fk;h.error("get_outline_intensity(): wrong object");
return 0};a.Dq=function(a,b,c,e){a&&a.A&&a.A.zd?z.Dq(a,b,c,e):h.error("apply_outline_anim(): wrong object")};a.r9=function(a){if(a&&a.A&&a.A.zd){var b=a.A.ek;z.Dq(a,b.an,b.bn,b.cn)}else h.error("apply_outline_anim_def(): wrong object")};a.ku=function(a){a&&a.A&&a.A.zd?z.ku(a):h.error("clear_outline_anim(): wrong object")};a.yR=e.yR;a.sba=function(a){var b=e.R();if(b=e.dc(b,q.uq))return a=a||new Float32Array(3),a.set(b.dj),a};a.fs=function(a){e.Ya()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof
Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),e.fs(a)):h.error("No active scene")};a.Bba=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R(),b=e.dc(a,q.$d);if(!b)return null;var c=a.J.Bd,
g=e.dc(a,q.Nb),k=e.dc(a,q.Wg),m={};m.csm_resolution=c.csm_resolution;m.self_shadow_polygon_offset=b.self_shadow_polygon_offset;k&&(m.self_shadow_normal_offset=k.self_shadow_normal_offset);m.enable_csm=c.enable_csm;m.csm_num=c.csm_num;m.csm_first_cascade_border=c.csm_first_cascade_border;m.first_cascade_blur_radius=c.first_cascade_blur_radius;m.csm_last_cascade_border=c.csm_last_cascade_border;m.last_cascade_blur_radius=c.last_cascade_blur_radius;m.fade_last_cascade=c.fade_last_cascade;m.blend_between_cascades=
c.blend_between_cascades;c.enable_csm?(m.csm_borders=e.O_(a,g.H),m.blur_radii=new Float32Array(c.csm_num),m.blur_radii.set(g.H.Yr.subarray(0,c.csm_num))):(m.csm_borders=null,m.blur_radii=null);return m};a.nea=function(a){if(e.Ya()){var c=e.R();"number"==typeof a.self_shadow_polygon_offset&&m.ja(c.J.Da,function(b,c){c.type==q.$d&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var g=e.zh(c,[q.Wg]),p=0;p<g.length;p++){var t=g[p];"number"==typeof a.self_shadow_normal_offset&&(t.self_shadow_normal_offset=
a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(t.pcf_blur_radius=a.pcf_blur_radius)}g=e.zh(c,[q.Gd]);for(p=0;p<g.length;p++){var A=g[p];"number"==typeof a.self_shadow_normal_offset&&(A.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(A.pcf_blur_radius=a.pcf_blur_radius);A.Wa=!0}g=c.J.Bd;"number"==typeof a.csm_first_cascade_border&&(g.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&(g.first_cascade_blur_radius=
a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(g.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(g.last_cascade_blur_radius=a.last_cascade_blur_radius);if(t){A=t.kb;for(p=0;p<A.length;p++)for(var l=A[p].Ua,v=0;v<l.length;v++){var z=l[v];if(z.sh.ze){var E=z.Ha;b.fL(E,g);b.Dd(E);q.pd(t,z)}}t.Wa=!0}t=C.La(c.Dk,c).oa;for(p=0;p<t.length;p++)k.hJ(t[p],g);e.cI(c)}else h.error("No active scene")};a.ON=function(){if(!e.Ya())return h.error("No active scene"),
[];var a=e.R();return e.ON(a)};a.gI=function(a,b,c){if(e.Ya()){var g=e.R(),k=e.dc(g,q.Nb);e.gI(g,a||0==a?parseFloat(a):k.ih,b||0==b?b:k.re,c||0==c?c:k.De)}else h.error("No active scene")};a.RN=function(a){if(!e.Ya())return h.error("No active scene"),!1;var b=e.R();return e.RN(b,a)};a.iI=function(a){if(e.Ya()){var b=e.R();e.iI(b,a)}else h.error("No active scene")};a.bba=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R(),b={};b.fog_intensity=e.Y_(a);b.fog_depth=e.W_(a);b.fog_start=
e.Z_(a);b.fog_height=e.X_(a);return b};a.Qda=function(a){if(e.Ya()){var b=e.R();"number"==typeof a.fog_intensity&&e.mR(b,a.fog_intensity);"number"==typeof a.fog_depth&&e.kR(b,a.fog_depth);"number"==typeof a.fog_start&&e.nR(b,a.fog_start);"number"==typeof a.fog_height&&e.lR(b,a.fog_height)}else h.error("No active scene")};a.mO=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.mO(a)};a.sea=function(a){if(e.Ya()){var c=e.R(),g=e.zh(c,[q.Jx]),c=e.zh(c,[q.fE]);if(!g.length)return h.error("SSAO is not enabled on the scene"),
0;for(var k=0;k<g.length;k++){var m=g[k],p=c[k],l=a,v=e.R(),t=m.kb[0].Ua[0],z=t.Ha,C=p.kb[0].Ua[0],O=C.Ha;if("quality"in l){var y=l.quality;8===y||16===y||24===y||32===y?(m.Gp=y,b.Uf(z,"SSAO_QUALITY","SSAO_QUALITY_"+y),b.Dd(z),q.pd(m,t)):h.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in l&&(m.ys=l.use_hemisphere,b.Uf(z,"SSAO_HEMISPHERE",l.use_hemisphere|0),b.Dd(z),q.pd(m,t));"use_blur_depth"in l&&(p.us=l.use_blur_depth,b.Uf(O,"SSAO_BLUR_DEPTH",l.use_blur_depth|0),b.Dd(O),q.pd(p,
C),A.uo(v.J.Da,p,O));"ssao_white"in l&&(m.ssao_white=l.ssao_white,b.Uf(z,"SSAO_WHITE",l.ssao_white|0),b.Dd(z),q.pd(m,t));"blur_discard_value"in l&&(p.ws=l.blur_discard_value);"radius_increase"in l&&(m.As=l.radius_increase);"influence"in l&&(m.zs=l.influence);"dist_factor"in l&&(m.xs=l.dist_factor);if("boolean"==typeof l.ssao_only){v=e.dc(v,q.Nb);v.ssao_only=l.ssao_only;t=v.kb;z=[];for(C=0;C<t.length;C++)for(O=t[C].Ua,y=0;y<O.length;y++){var H=O[y].Ha;b.Uf(H,"SSAO_ONLY",l.ssao_only|0);b.Dd(H);z.push(O[y])}for(C=
0;C<z.length;C++)q.pd(v,z[C])}m.Wa=!0;p.Wa=!0}}else h.error("No active scene")};a.Saa=function(){if(!e.Ya())return h.error("No active scene"),null;var a=e.R(),a=e.dc(a,q.ND);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};a.Mda=function(a){if(e.Ya()){var b=e.R();if(b=e.dc(b,q.ND))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in
a&&(b.saturation=a.saturation),b.Wa=!0}else h.error("No active scene")};a.lO=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.lO(a)};a.qea=function(a){if(e.Ya()){var b=e.R(),c=e.dc(b,q.Ie);c&&("color"in a&&c.pn.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),
"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.Wa=!0,c.Jr=!0,e.Z5(b,c))}else h.error("No active scene")};a.LN=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.dc(a,q.ot)?
e.LN(a):null};a.iR=function(a){if(e.Ya()){var b=e.R();e.iR(b,a)}else h.error("No active scene")};a.VN=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.dc(a,q.rq)?e.VN(a):null};a.sR=function(a){if(e.Ya()){var b=e.R();e.sR(b,a)}else h.error("No active scene")};a.CN=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.dc(a,q.jt)?e.CN(a):null};a.ZQ=function(a){if(e.Ya()){var b=e.R();e.ZQ(b,a)}else h.error("No active scene")};a.UN=function(){if(!e.Ya())return h.error("No active scene"),
!1;var a=e.R();return e.dc(a,q.qt)?e.UN(a):null};a.rR=function(a){if(e.Ya()){var b=e.R();e.rR(b,a)}else h.error("No active scene")};a.zO=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.zO(a)};a.IR=function(a){if(e.Ya()){var b=e.R();z.IR(b,a)}else h.error("No active scene")};a.xO=function(a,b){if(!e.Ya())return h.error("No active scene"),0;var c=e.R();return c.J.Xd?e.xO(c,a,b):(h.error("No water parameters on the active scene"),0)};a.HR=function(a){if(e.Ya()){var b=
e.R();e.HR(b,a)}else h.error("No active scene")};a.wO=function(a){if(e.Ya()){var b=e.R();e.wO(b,a)}else h.error("No active scene")};a.kfa=function(){if(e.Ya()){var a=e.R();e.PS(a)}else h.error("No active scene")};a.jca=function(a,b){b=b||!1;c(a)?b?e.po(a,!0):e.iu(a,!0):h.error("show/hide is only supported for dynamic objects.")};a.Aea=function(a,b){b=b||!1;c(a)?b?e.po(a,!1):e.iu(a,!1):h.error("show/hide is only supported for dynamic objects.")};a.CG=function(a){if(c(a))return e.CG(a);h.error("show/hide is only supported for dynamic meshes/empties and lamps");
return!1};a.Br=function(a){return a.A.Br};a.V9=function(a,b){return z.ud(z.YD,a,b|0,!0)?!0:!1};a.T9=function(a,b,c){return z.ud(z.XD,a,b,c|0)?!0:!1};a.U9=function(a,b){return z.ud(z.ke,a,b|0)?!0:!1};a.Qj=function(a,b){var c=e.R();a||(a="ALL");b||0===b||(b=z.Vc);return z.jO(c,a,b)};a.oba=function(a){return a?a.Rf:(h.error("Wrong object name"),"")};a.pba=function(a){if(!a)return h.error("Wrong object name"),null;for(var b=[];a;)b.push(a.Rf),a=C.Rj(a);return b.reverse()};a.qba=function(a){return a&&
a.type?a.type:(h.error("Wrong object"),"UNDEFINED")};a.nba=function(a){return a.af.slice(0)};a.Jz=function(){return z.Jz(e.R())};a.kO=function(a,b){b||0===b||(b=1);if(!e.Ya())return h.error("No active scene"),0;var c=e.R();return e.kO(c,a,b)};a.FN=function(){return e.FN()};a.Kba=function(a){return C.mf(a)?a.A.type:""};a.Qo=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.Qo(a)};a.bv=function(){if(!e.Ya())return h.error("No active scene"),!1;var a=e.R();return e.bv(a)};
a.mm=function(a,b){if(b)var c=e.av(),c=P.Od("name",b,c);else c=e.R();e.mm(c,a,!0)};a.Ap=function(a){C.Zo(a)||C.sr(a)||C.nv(a)?(z.Sr(a,a.A.xA,!1,!1),M.rQ(a),z.Sr(a,!0,!0,!0),z.Ap(a)):h.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};a.KP=function(a){var b=e.R();if(b.timeline_markers&&a in b.timeline_markers)return e.KP(b,a);h.error('"'+a+'" marker not found.');return 0};a.hba=function(){var a=e.R();return(a=e.dc(a,q.uj))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:
null};a.Zda=function(a){var b=e.R(),b=e.zh(b,[q.uj]);if(b.length)for(var c=0;c<b.length;c++){var g=b[c];"number"==typeof a.mb_decay_threshold&&(g.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&(g.mb_factor=a.mb_factor)}else h.error("The motion blur subscene doesn't exist.")};a.EL=function(){var a=e.R();return!!e.dc(a,q.Bf)}};b4w.module.container=function(a,t){var p=t("__container"),c=t("__print");a.Xh=p.Xh;a.GN=p.GN;a.qe=p.qe;a.iv=function(a,k){2!=arguments.length?c.error("insert_to_container(): two arguments required"):a&&k&&p.iv(a,k)};a.$Q=function(a,k){c.va("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return p.$Q(a,k)};a.IS=function(){c.va("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
p.IS()};a.vy=function(a,c,g){g||(g=new Float32Array(2));return p.vy(a,c,g)};a.eM=function(a,c,g,t){t||(t=new Float32Array(2));return p.eM(a,c,g,t)};a.JN=function(a,c,g){g||(g=new Float32Array(2));return p.JN(a,c,g)};a.JF=function(){c.va("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");p.JF()};a.resize=function(a,c,g){p.resize(a,c,g)};a.Gl=function(a){p.Gl(a||!1)}};b4w.module.input=function(a,t){function p(a){m.ff("enable_split_screen","screen.request_split_screen");var k=c.ba(c.Sb);if(!k)return!1;if(A)return!0;var p=c.$h(k,c.GJ,h),u=c.$h(k,c.HJ,e);b.kI(a,p,u);if(p=c.vg(k,O))u=z.R(),a=M.La(a,u).oa,b.YB(a,p);a={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c.vg(k,c.Ug)&(c.fm|c.Ak|c.tq)&&(a.distortion_coefs=[k.distortion_coefs[0],k.distortion_coefs[1]],a.chromatic_aberration_coefs=[k.chromatic_aberration_coefs[0],k.chromatic_aberration_coefs[1],
k.chromatic_aberration_coefs[2],k.chromatic_aberration_coefs[3]],k.Tp||(k.xj&&k.Wj&&k.yj?a.base_line_factor=(k.xj-k.yj)/k.Wj:k.yj||(a.base_line_factor=k.xj/k.Wj)),k.Wi&&k.Ln&&!k.Tp&&(a.inter_lens_factor=k.Wi/k.Ln),q.enabled||(p=1+k.distortion_coefs[0]+k.distortion_coefs[1],z.eB(p,p)));z.fs(a);g.Gl(!0);c.TH(k);return A=!0}var c=t("__input"),b=t("__camera"),k=t("__config"),g=t("__container"),M=t("__obj_util"),m=t("__print"),z=t("__scenes"),C=t("__vec4"),h=C.create(),e=C.create(),A=!1,q=k.Ao,P=k.L;a.gq=
c.gq;a.hq=c.hq;a.jq=c.jq;a.iq=c.iq;a.mq=c.mq;a.bq=c.bq;a.cq=c.cq;a.lq=c.lq;a.oq=c.oq;a.Sn=c.Sn;a.nq=c.nq;a.Rn=c.Rn;a.pq=c.pq;a.qq=c.qq;a.eq=c.eq;a.fq=c.fq;a.kq=c.kq;a.hx=c.hx;a.ix=c.ix;a.jx=c.jx;a.kx=c.kx;a.lx=c.lx;a.mx=c.mx;a.nx=c.nx;a.ox=c.ox;a.px=c.px;a.EJ=c.EJ;a.FJ=c.FJ;a.CJ=c.CJ;a.DJ=c.DJ;a.dm=c.dm;a.Pn=c.Pn;a.em=c.em;a.Qn=c.Qn;a.$p=c.$p;a.aq=c.aq;a.tt=c.tt;a.ut=c.ut;a.vt=c.vt;a.wt=c.wt;a.rt=c.rt;a.st=c.st;a.vx=c.vx;a.wx=c.wx;a.Ug=c.Ug;a.tq=c.tq;a.Ak=c.Ak;a.fm=c.fm;a.Tn=c.Tn;a.Ax=c.Ax;var O=
c.xt;a.xt=O;a.ux=c.ux;a.sx=c.sx;a.yx=c.yx;a.zx=c.zx;a.xx=c.xx;a.tx=c.tx;a.vj=c.vj;a.hm=c.hm;a.At=c.At;a.Bt=c.Bt;a.zt=c.zt;a.yt=c.yt;a.km=c.km;a.It=c.It;a.Wn=c.Wn;a.rx=c.rx;a.sq=c.sq;var I={};I[c.Sb]=[c.vx,c.wx];I[c.Wc]=[c.vj];var u={};u[c.Sb]=[c.Ug];var J={};J[c.Wc]=[c.vj,c.hm,c.At,c.Bt];J[c.mt]=[c.zt,c.yt];J[c.Tg]=[c.km,c.It,c.Wn];J[c.tj]=[c.rx,c.sq];var x={};x[c.Sb]=[c.ux,c.xt,c.sx,c.yx,c.zx,c.xx,c.tx];a.tj=c.tj;a.Sb=c.Sb;a.Wc=c.Wc;a.mt=c.mt;a.Tg=c.Tg;a.Dj=c.Dj;a.ba=c.ba;a.yw=function(a,b){a&&c.yw(a,
b)};a.rda=function(){m.va("input.register_device() deprecated")};a.TH=function(a){a&&a.type==c.Sb?c.TH(a):m.error("reset_device is undefined for device.")};a.$h=function(a,b,e){if(a&&a.type in I&&0<=I[a.type].indexOf(b))return c.$h(a,b,e);m.error("device hasn't param: ",b);return null};a.vg=function(a,b){if(a&&a.type in u&&0<=u[a.type].indexOf(b))return c.vg(a,b);m.error("device hasn't param: ",b);return null};a.Hd=function(a,b,e){e=e||null;if(a&&a.type in J&&0<=J[a.type].indexOf(b))return c.Hd(a,
b,e);m.error("device hasn't param: ",b)};a.ne=function(a,b,e){e=e||null;if(a&&a.type in J&&0<=J[a.type].indexOf(b))return c.ne(a,b,e);m.error("device hasn't param: ",b)};a.lk=function(a,b,e){if(a&&a.type in x&&0<=x[a.type].indexOf(b))return c.lk(a,b,e);m.error("device hasn't config: ",b)};a.LQ=function(){m.ff("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(z.Ya()){var a=z.Hm(z.R());if(a&&(p(a),a=c.ba(c.Sb))){var b=a.Yd;b&&!b.isPresenting&&(b.capabilities.canPresent?(a=g.Xh(),b.requestPresent([{source:a}]).then(function(){if(!P.is_mobile_device){var a=
b.getEyeParameters("left"),c=b.getEyeParameters("right");g.resize(2*Math.max(a.renderWidth,c.renderWidth),Math.max(a.renderHeight,c.renderHeight),!1)}},function(){m.error("HMD fullscreen request failed.")})):m.error("HMD fullscreen request failed."))}}};a.eaa=p;a.w$=function(){m.ff("disable_split_screen","screen.exit_split_screen");var a=c.ba(c.Sb);if(!A||!a||!a.vh)return!1;z.fs({enable_hmd_stereo:!1});a=1/(1+a.distortion_coefs[0]+a.distortion_coefs[1]);z.eB(a,a);g.Gl(!0);return!0};a.mw=function(a,
b,e){switch(a){case 0:a=c.cx;break;case 1:a=c.QD;break;case 2:a=c.RD;break;case 3:a=c.SD;break;default:a=c.cx}a=c.ba(a);c.lk(a,b,e)};a.cG=c.cG;a.Qz=c.Qz;a.YF=c.YF;a.XF=c.XF;a.wX=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};a.vO=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,e=0;4>c;c++){var g=
b[c];if(g&&(""==g.id||"OpenVR Gamepad"==g.id||"Oculus Touch (Left)"==g.id||"Oculus Touch (Right)"==g.id)){if(e==a)return e;e++}}return a};a.Ih=function(a,b){a&&b&&c.Ih(a,b)};a.LB=function(a,b){a&&b&&c.LB(a,b)}};b4w.module.rgb=function(a,t){var p=t("__util"),c=new Float32Array(3);a.create=function(){return new Float32Array(3)};a.Az=function(a,c,g){var b=new Float32Array(3);b[0]=a;b[1]=c;b[2]=g;return b};a.set=function(a,c,g,p){p[0]=a;p[1]=c;p[2]=g;return p};a.n$=function(a,c,g,t){t=t||new Float32Array(3);t[0]=a/255;t[1]=c/255;t[2]=g/255;p.aS(t,t);return t};a.yda=function(a){a=p.MG(a,c);return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]};a.zda=function(a){function b(a){a=Math.round(255*
a).toString(16);return 1==a.length?"0"+a:a}a=p.MG(a,c);return"#"+b(a[0])+b(a[1])+b(a[2])}};
b4w.module.rgba=function(a,t){var p=t("__util"),c=new Float32Array(3);a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.Az=function(a,c,g,p){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=g;b[3]=p;return b};a.set=function(a,c,g,p,m){m[0]=a;m[1]=c;m[2]=g;m[3]=p;return m};a.o$=function(a,c,g,t,m){m=m||new Float32Array(4);m[0]=a/255;m[1]=c/255;m[2]=g/255;m[3]=t;p.aS(m,m);return m};a.Ada=function(a){var b=p.MG(a,c);return[Math.round(255*b[0]),Math.round(255*b[1]),Math.round(255*b[2]),a[3]]}};b4w.module.objects=function(a,t){var p=t("__geometry"),c=t("__objects"),b=t("__batch"),k=t("__obj_util"),g=t("__print"),M=t("__scenes"),m=t("__util");a.Qo=function(a){if(a)return c.Qo(a)};a.bv=function(a){if(a)return c.bv(a)};a.copy=function(a,b,h){return k.mf(a)?k.ea(a)?p.nG(a)||p.JE(a)||!h?-1==c.xc(M.R(),"MESH",c.Vc).indexOf(a)?(g.error('object "'+a.name+'" does not belong to the active scene.'),!1):c.copy(a,b||"",h):(g.error('object "'+a.name+'" has not dynamic geometry for deep copying.'),!1):
(g.error('object "'+a.name+'" is not dynamic.'),!1):(g.error('object "'+a.name+'" is not of type "MESH".'),!1)};a.mI=function(a,m,h){g.ff("set_nodemat_value","material.set_nodemat_value");if(k.Zo(a)){var e=m[0],p=b.Em(a,e);if(null===p)return g.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;p=c.$F(p.mi,m);if(null===p)return g.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;c.mI(a,e,p,h)}else g.error('The type of the object "'+a.name+
'" is not "MESH" or it is not dynamic.')};a.$N=function(a,m){g.ff("get_nodemat_value","material.get_nodemat_value");if(!k.Zo(a))return g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),0;var h=m[0],e=b.Em(a,h);if(null===e)return g.error('Material "'+h+'" was not found in the object "'+a.name+'".'),0;h=c.$F(e.mi,m);return null===h?(g.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),0):c.$N(e,h)};a.lI=function(a,m,h,e,p){g.ff("set_nodemat_rgb",
"material.set_nodemat_rgb");if(k.Zo(a)){var q=m[0],t=b.Em(a,q);null===t?g.error('Material "'+q+'" was not found in the object "'+a.name+'".'):(t=c.ZF(t.li,m,1),null===t?g.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'):c.lI(a,q,t,h,e,p))}else g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.ZN=function(a,m,h){g.ff("get_nodemat_rgb","material.get_nodemat_rgb");if(!k.Zo(a))return g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),
null;var e=m[0],p=b.Em(a,e);if(null===p)return g.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;e=c.ZF(p.li,m);if(null===e)return g.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;h||(h=new Float32Array(3));return c.ZN(p,e,h)};a.gJ=function(a){k.mf(a)?p.nG(a)||p.JE(a)?c.gJ(a):g.error('object "'+a.name+'" has not dynamic geometry.'):g.error('The type of the object "'+a.name+'" is not "MESH".')};a.bO=k.bO;a.Rj=k.Rj;a.mf=k.mf;a.rr=k.rr;a.Sm=
k.Sm;a.mb=k.mb;a.ur=k.ur;a.sr=k.sr;a.nv=k.nv;a.pl=k.pl;a.Vz=function(){return c.Vz()};a.aO=function(){return c.aO()};a.ea=k.ea;a.vea=function(a,p){if(k.Zo(a)){var h=a.A;if(h.zf){if("number"==typeof p.angle){var e=b.sT(m.bf(p.angle),h.Lk,h.D[3]);h.Og=e}"number"==typeof p.main_frequency&&(h.Pg=p.main_frequency);"number"==typeof p.detail_frequency&&(h.qg=p.detail_frequency);"number"==typeof p.detail_amplitude&&(h.pg=p.detail_amplitude);"number"==typeof p.branch_amplitude&&(h.kg=p.branch_amplitude);c.U3(a)}else g.error('The "'+
a.name+"\" object doesn't have wind bending parameters.")}else g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.Vba=function(a){a=a.A;if(!a.zf)return null;var c={},g=m.IB(b.z6(a.Og,a.Lk,a.D[3]));c.angle=g;c.main_frequency=a.Pg;c.detail_frequency=a.qg;c.detail_amplitude=a.pg;c.branch_amplitude=a.kg;return c};a.dF=function(a){return c.dF(a)};a.hca=function(a){a=c.Qj("ALL",a);for(var b=0;b<a.length;b++)M.po(a[b],!0)};a.yea=function(a){a=c.Qj("ALL",a);for(var b=0;b<
a.length;b++)M.po(a[b],!1)}};b4w.module.controls=function(a,t){var p=t("__controls"),c=t("__physics"),b=t("__print");a.Sg=p.Sg;a.ob=p.ob;a.bx=p.bx;a.Ai=p.Ai;a.Yp=p.Yp;a.PD=p.PD;a.o7=8;a.d8=9;a.x7=13;a.Z7=16;a.s7=17;a.m7=18;a.V7=19;a.q7=20;a.z7=27;a.b8=32;a.SJ=37;a.VJ=38;a.TJ=39;a.RJ=40;a.c7=49;a.d7=50;a.e7=51;a.f7=52;a.g7=53;a.h7=54;a.i7=55;a.j7=56;a.k7=57;a.PJ=65;a.n7=66;a.VT=67;a.QJ=68;a.w7=69;a.WT=70;a.B7=71;a.D7=72;a.E7=73;a.F7=74;a.XT=75;a.YT=76;a.G7=77;a.I7=78;a.U7=79;a.$T=80;a.X7=81;a.aU=82;a.UJ=83;a.cU=84;a.e8=85;a.f8=
86;a.WJ=87;a.g8=88;a.h8=89;a.i8=90;a.J7=96;a.K7=97;a.L7=98;a.M7=99;a.N7=100;a.O7=101;a.P7=102;a.Q7=103;a.S7=104;a.T7=105;a.H7=106;a.l7=107;a.c8=109;a.u7=110;a.v7=111;a.Y7=186;a.y7=187;a.r7=188;a.t7=189;a.W7=190;a.A7=191;a.C7=192;a.ZT=219;a.p7=220;a.bU=221;a.a8=222;a.Ex=p.Ex;a.Dx=p.Dx;a.Cx=p.Cx;a.cE=p.cE;a.Xy=p.Xy;a.qF=p.qF;a.gc=p.gc;a.me=p.me;a.Ky=p.Ky;a.Jy=p.Jy;a.yu=p.yu;a.qd=p.qd;a.ZE=function(a,b,c){return p.ZE(a,b||"ANY",c||!1)};a.rM=p.rM;a.zM=function(a,g,t,m,z,C,h){if(a&&!c.Aa(a))b.va("No physics for object "+
a.name);else return p.zM(a,g,t,m||"ANY",z||!1,C||!1,h||!1)};a.xo=p.xo;a.eF=p.eF;a.Vk=p.Vk;a.xM=p.xM;a.yM=p.yM;a.Bu=p.Bu;a.Oy=p.Oy;a.HM=p.HM;a.GM=p.GM;a.vM=p.vM;a.IM=p.IM;a.tM=p.tM;a.$E=p.$E;a.uM=p.uM;a.bF=p.bF;a.aF=p.aF;a.FM=function(a,b){return p.FM(a,b||!1)};a.MQ=p.MQ;a.vm=p.vm;a.Ny=p.Ny;a.fF=function(a,b){return p.fF(a,b||!1)};a.YE=function(a,b){return p.YE(a,b||0)};a.Nda=function(a,b){p.z3(a,b)};a.Uaa=function(a){return a.value};a.wd=p.wd;a.jf=p.jf;a.qa=function(a,b,c,m,t,C,h){t=t||p.Xy;p.qa(a,
b,c,m,t,C,void 0===h?null:h)};a.Pq=function(a,b,c,m,t){m=p.qd(m);p.qa(a,b,c,[m],p.Xy,t,null)};a.W9=function(a){return p.qm(a,null)};a.qm=p.qm;a.Tf=p.Tf;a.reset=p.reset;a.BR=p.BR};b4w.module.data=function(a,t){var p=t("__data"),c=t("__loader");a.load=p.load;a.jD=function(a){p.jD(a|0)};a.gR=p.gR;a.Xi=p.Xi;a.Ica=c.$o;a.Sca=p.load;a.Ja=a.jD;a.OK=p.OK;a.qQ=p.qQ;a.FS=p.FS};b4w.module.debug=function(a,t){function p(a,b,c,d){N.group(n.QC(a),d);for(a=0;a<c.length;a++){var e=c[a],f=e.A;if(f.type==d)for(var g=!1,h=0;h<b.length;h++){for(var k=b[h].Ua,l=0;l<k.length;l++){var m=k[l];if(m.lc&&m.sh==f){"STATIC"==d?N.Pd(e.Rf,e):N.Pd(e.name,e);g=!0;break}}if(g)break}}N.groupEnd()}function c(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var e=d.split(" ")[0];e in b||(b[e]=0);b[e]++}}d=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=
b[e];a+=b[e];break;case "ATTRIB":d+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function b(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;N.error(c.responseText);throw"Error POST XHR: "+c.status;}function k(a){a.sort(function(a,b){return b.KF.ALL_OPS-a.KF.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.KF,e=c.u6,f=g(c.iZ),f=
f.length?"\t\t("+f.join(", ")+")":"\t\t(NA)";N.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,f);N.groupCollapsed("directives");for(var h=c.qb.Oi.slice().sort(),f=0;f<h.length;f++){var k=h[f];N.Pd(k[0],k[1])}N.groupEnd();N.groupCollapsed("node elements");h=c.qb.Qf;for(f=0;f<h.length;f++)N.Pd(h[f]);N.groupEnd();N.groupCollapsed("vert source");N.Pd(c.s6);N.groupEnd();N.groupCollapsed("vert translated source");N.Pd(c.t6);N.groupEnd();
f=["ALL_OPS","TEX_OPS","ATTRIBS"];N.groupCollapsed("vert ops stats");for(var l in e)-1==f.indexOf(l)&&N.Pd(l,e[l]);N.groupEnd();N.groupCollapsed("vert assembly");N.Pd(c.r6);N.groupEnd();N.groupCollapsed("frag source");N.Pd(c.r_);N.groupEnd();N.groupCollapsed("frag translated source");N.Pd(c.s_);N.groupEnd();N.groupCollapsed("frag ops stats");for(l in d)-1==f.indexOf(l)&&N.Pd(l,d[l]);N.groupEnd();N.groupCollapsed("frag assembly");N.Pd(c.j_);N.groupEnd();N.groupEnd()}}function g(a){for(var b=[],c=U.av(),
d=0;d<c.length;d++)for(var e=c[d],f=D.xc(e,"MESH",D.Vc),g=0;g<f.length;g++){var h=l.La(f[g],e);if(h&&h.da.length)for(var h=h.da,k=0;k<h.length;k++){var m=h[k];if(m.Gb==a)for(var n=0;n<m.Dc.length;n++){var p=m.Dc[n];-1==b.indexOf(p)&&b.push(p)}}}return b}function M(a){function b(){ja.push(b);return a.apply(a,arguments)}return b}function m(a,b,c,d,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var f=
0;f<a.length;f++){if("number"!=typeof b[f]||isNaN(b[f]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[f]||isNaN(a[f]))throw"debug.eqv: wrong result data type";if(b[f]>a[f]+c||b[f]<a[f]-c)throw"debug.eqv: wrong result";}z(d,e,"eqv")}function z(a,b,c){a=a||"";b=b||"";if(ca){if(""==a)throw"debug."+c+': no error is expected, but got "'+aa+'"';if(aa!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+aa+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';
if(ka){if(""==b)throw"debug."+c+': no warning is expected, but got "'+ma+'"';if(ma!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+ma+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';ca=ka=!1}function C(){K&&(D.Sr(K,!1,!1,!1),O.rQ(K),D.Sr(K,!0,!0,!0),D.Ap(K),K=null)}var h=t("__batch"),e=t("__config"),A=t("__compat"),q=t("__controls"),P=t("__container"),O=t("__data"),I=t("__debug"),u=t("__extensions"),J=t("__geometry"),x=t("__loader"),D=t("__objects"),
l=t("__obj_util"),v=t("__physics"),N=t("__print"),E=t("__renderer"),U=t("__scenes"),L=t("__scenegraph"),y=t("__sfx"),H=t("__shaders"),n=t("__subscene"),f=t("__textures"),W=t("__transform"),d=t("__tsr"),G=t("__util"),B=t("__vec3"),S=d.create(),r=new Float32Array(2),ha=B.create(),qa=B.create(),K=null,pa=e.L,ja=[],ma="",aa="",ka=!1,ca=!1,ea=!0,wa=new Uint8Array(4);a.fx=I.fx;a.WD=I.WD;a.gx=I.gx;a.VD=I.VD;a.ex=I.ex;a.UD=I.UD;a.TD=I.TD;a.pt=I.pt;a.nda=function(){v.pZ()};a.mda=function(a){N.log("O",v.g_(a));
var b=v.C_();if(b)for(var b=b.Pc.Ua,c=0;c<b.length;c++){var d=b[c];d.N.na==a&&N.log("B",d)}else N.error("No active physics scene.")};a.vfa=function(){for(var a=U.R(),b=D.xc(a,"MESH",D.Vc),a=U.zh(a,[n.Nb,n.Gd,n.Fe]),c=0;c<a.length;c++){var d=a[c],e=d.kb;e.length&&(p(d,e,b,"DYNAMIC"),p(d,e,b,"STATIC"))}};a.hda=function(a){for(var b=U.R(),c=D.xc(b,"MESH",D.Vc),d=0;d<c.length;d++){var e=c[d];if(e.name==a){N.log("Object",e);for(var f=U.PF(b),g=0;g<f.length;g++){for(var h=f[g],k=[],l=h.kb,m=0;m<l.length;m++)for(var n=
l[m].Ua,p=0;p<n.length;p++)n[p].sh==e.A&&k.push(n[p]);N.log("Subscene "+h.type,k)}}}};a.ida=function(){var a=U.R();N.log("Armatures: "+D.xc(a,"ARMATURE",D.Vc).length);N.log("Cameras: "+D.xc(a,"CAMERA",D.Vc).length);N.log("Curves: "+D.xc(a,"CURVE",D.Vc).length);N.log("Empties: "+D.xc(a,"EMPTY",D.Vc).length);N.log("Lamps: "+D.xc(a,"LAMP",D.Vc).length);N.log("Meshes: "+D.xc(a,"MESH",D.Vc).length);N.log("Speakers: "+D.xc(a,"SPEAKER",D.Vc).length)};a.Fv=function(){for(var a=0,b=U.R(),b=U.zh(b,[n.Nb,n.Gd,
n.Fe]),c=0;c<b.length;c++)for(var d=b[c].kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var h=f[g].Ha;h&&(a+=h.Fv)}return a};a.pp=function(){for(var a=0,b=U.R(),b=U.zh(b,[n.Nb,n.Gd,n.Fe]),c=0;c<b.length;c++)for(var d=b[c].kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var h=f[g].Ha;h&&(a+=h.pp)}return a};a.bda=function(){for(var a=U.R(),b=U.zh(a,[n.Nb,n.Gd,n.Fe,n.Ge,n.Vg]),c=0,d=0;d<b.length;d++)for(var e=b[d],e=e.kb,f=0;f<e.length;f++)c+=e[f].Ua.length;a=U.zh(a,[n.Zd,n.dg]);
for(d=0;d<a.length;d++)for(e=a[d],e=e.kb,f=0;f<e.length;f++)c+=6*e[f].Ua.length;return c};a.dda=function(){return G.kl(H.HN())};a.Gaa=function(){for(var a=U.R(),b=U.PF(a),a={},c=0;c<b.length;c++){var d=b[c];if(d.type!=n.jm&&d.type!=n.Bi)for(var e=d.kb,f=0;f<e.length;f++)for(var g=e[f].Ua,h=0;h<g.length;h++){var k=g[h].Ha,l=g[h].sh;k&&(d.type!=n.Bf&&d.type!=n.Ci||l.pB||l.oB)&&(a[k.id]=k)}}var c=b=0,m;for(m in a)d=a[m].Pa,d.Rq&&(c+=d.Rq/1048576),b+=d.Tq/1048576;return{vbo_memory:b,ibo_memory:c}};a.eda=
function(){for(var a=[],b=0,c=U.R(),c=U.zh(c,[n.Nb,n.Gd,n.Fe]),d=0;d<c.length;d++)for(var e=c[d].kb,f=0;f<e.length;f++)for(var g=e[f].Ua,h=0;h<g.length;h++){var k=g[h].Ha;if(k)for(var k=k.wa,l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var p=m.Jb;-1===a.indexOf(p)&&(a.push(p),m=m.width*m.height*4/1048576/m.tu,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};a.cda=function(){for(var a=[],b=0,c=U.R(),c=U.PF(c),d=0;d<c.length;d++){var e=c[d];if(e.type!=n.jm){var g=
e.H,h=[g.cc,g.og];h.push.apply(h,e.xi);for(e=0;e<h.length;e++){var k=h[e];f.zr(k)&&-1==a.indexOf(k)&&(a.push(k),b+=g.width*g.height*f.q0(k))}}}return{number:a.length,memory:b/1024/1024}};a.L1=function(){var a=U.R();(a=U.dc(a,n.Nb))&&U.HP(a.H,a,[1,1,0])};a.N1=function(){var a=U.R(),b=U.dc(a,n.Nb),a=U.zh(a,[n.$d]);if(b)for(var c=0;c<a.length;c++){var d=a[c],e;switch(c){case 0:e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,0,1];break;default:e=[1,0,1]}U.HP(d.H,b,e)}};a.Kda=function(){for(var a=U.av(),
b=0;b<a.length;b++)N.log("\n"+L.nZ(U.Nz(a[b])))};a.Uca=function(a){N.log("\n"+x.w0(a|0))};a.g$=q.debug;a.gda=function(a,b){var c=d.X(a.A.D),e=d.X(b.A.D);return B.dist(c,e)};a.Pb=I.Pb;a.rz=I.rz;a.uQ=I.uQ;a.CH=I.CH;a.raa=function(a,b){function c(){I.rz("FBRES",a());setTimeout(c,b)}b||(b=16);c()};a.y9=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),f=new Float32Array([0,-1,0]),g=new Float32Array([0,
0,-1]);if(!G.rm(new Float32Array(3),G.gE))throw"Wrong VEC3_IDENT";if(!G.rm(a,G.Fx))throw"Wrong QUAT4_IDENT";if(!G.rm(b,G.Af))throw"Wrong AXIS_X";if(!G.rm(c,G.Ee))throw"Wrong AXIS_Y";if(!G.rm(d,G.ic))throw"Wrong AXIS_Z";if(!G.rm(e,G.it))throw"Wrong AXIS_MX";if(!G.rm(f,G.Eh))throw"Wrong AXIS_MY";if(!G.rm(g,G.qc))throw"Wrong AXIS_MZ";};a.ada=function(){for(var a=y.Xz(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==y.fG(c)&&y.Yb(c,!0)}};a.LL=I.LL;a.Pda=function(a){var b=U.R(),b=U.zh(b,[n.Bi]);if(b.length)for(var c=
0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case I.fx:case I.WD:case I.gx:case I.VD:case I.ex:case I.UD:case I.TD:case I.pt:U.I3(d,a.debug_view_mode);break;default:N.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&U.H3(d,a.debug_colors_seed);"number"==typeof a.h3&&U.e4(d,a.h3);"object"==typeof a.wireframe_edge_color&&U.p4(d,G.Rh(a.wireframe_edge_color))}else N.error("Debugging is not available on the scene.")};
a.Yaa=function(){return N.T_()};a.Tba=function(){return N.t0()};a.cM=function(){return N.cM()};a.c9=function(a){var d=H.HN(),e=0,f;for(f in d)a&&-1===f.indexOf(a)||e++;var e="of "+e+" analyzing...",g={};for(f in d)if(!a||-1!==f.indexOf(a)){var h=d[f],l;l=h.zD;var m=h.Bz,n=u.P_();if(n){var p=n.getTranslatedShaderSource(l),n=n.getTranslatedShaderSource(m);if(A.Am())var p=p.replace("#version","#version 300 //"),n=n.replace("#version","#version 300 //"),q=b("/analyze_shader/vert_gles",p),r=b("/analyze_shader/frag_gles",
n);else p=p.replace("#version","#version 400 //"),n=n.replace("#version","#version 400 //"),q=b("/analyze_shader/vert",p),r=b("/analyze_shader/frag",n);var t=c(q),v=c(r);l={s6:I.Mz().getShaderSource(l),t6:p,r6:q,u6:t,r_:I.Mz().getShaderSource(m),s_:n,j_:r,KF:v}}else N.warn("WEBGL_debug_shaders extension not found"),l=void 0;if(l){var m=h.qb,y=m.Lg+" + "+m.gf;l.iZ=h;l.qb=m;h=g[y]=g[y]||[];h.push(l);N.Pd(e)}}for(y in g)N.group("%c"+y,"color: #800"),h=g[y],k(h),N.groupEnd()};a.iN=I.iN;a.rS=function(b){if(H.QL())if(u.VF()){var c=
pa.gl_debug;pa.gl_debug=!0;var d=L.wY();U.tN(null,d);for(var e=L.Vb(d,n.Dt),f=e.H,d=0;5>d;d++)E.$k(e);pa.gl_debug=c;window.setTimeout(function(){I.P2(e);var a=e.ng;b(a,f.width*f.height*40/(a/1E3)/Math.pow(10,9))},100)}else b(0,0);else window.setTimeout(function(){a.rS(b)},100)};a.CL=I.CL;a.SR=I.SR;a.tQ=I.tQ;a.Hea=function(a){ja=[];ea=!0;a=t(a);for(var b in a)"function"===typeof a[b]&&(a[b]=M(a[b]))};a.Q9=function(){return ea};a.test=function(a,b){var c=t("__print"),d=c.error,e=c.va,f=c.warn;c.error=
c.va=function(){aa=c.jM(arguments,"B4W ERROR").join(" ");ca=!0};c.warn=function(){ma=c.jM(arguments,"B4W WARN").join(" ");ka=!0};ca=ka=!1;try{b();var g=!0}catch(ba){ea=!1,console.error('Test "'+a+'" failed with exception: "'+ba+'"'),ca=ka=g=!1}c.error=d;c.va=e;c.warn=f;return g};a.oda=function(a){var b=P.tO(),c=P.sO(),d=b/2,e=c/2;P.resize(b,c,!1);b=U.R().J.Da;(c=L.h_(b))||G.K("Couldn't find onscreen subscene");b=c.H;d=P.fu(d,e,r,c.H);d[1]=b.height-d[1];d=E.JB(b.Lf,d[0],d[1],1,1,wa);m(a,d,1)};a.haa=
function(a,b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";z(c,d,"eqs")};a.iaa=m;a.gaa=function(a,b,c,d,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";z(d,e,"eqf")};a.faa=function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";z(c,d,"eq")};a.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";z(b,c,"ok")};
a.stat=function(a){var b=[];a=t(a);for(var c in a)-1==ja.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){N.groupCollapsed(b.length+" function(s) not tested.");for(c=0;c<b.length;c++)N.Pd(b[c]);N.groupEnd()}else N.group("All functions were tested.")};a.zea=function(a,b,c,e){C();b=h.Em(a,b);if(!J.nG(a)||!b)return N.error("Normals are not avaliable for the dynamic object:",a.name),!1;var f=b.Pa;if(!(f&&f.cd&&f.cd.a_position&&f.cd.a_tbn))return N.error("Normals are not avaliable for the object:",
a.name),!1;b=J.fN(f,"a_position");var f=J.fN(f,"a_normal"),g=W.Im(a,S);K=D.dF("normal_line");a=new Float32Array(2*b.length);for(var k=0;k<b.length;k+=3){var l=ha;l[0]=b[k+0];l[1]=b[k+1];l[2]=b[k+2];var m=d.Mc(l,g,qa);a[2*k+0]=m[0];a[2*k+1]=m[1];a[2*k+2]=m[2];m=B.scale(f.subarray(k,k+3),c,qa);l=B.add(l,m,qa);l=d.Mc(l,g,qa);a[2*k+3]=l[0];a[2*k+4]=l[1];a[2*k+5]=l[2]}c=h.U_(K);J.BZ(c,a);E.dL(c);c.jd.set([1,1,1,1]);c.zv=e};a.ica=C};b4w.module.main=function(a,t){function p(){}function c(){}function b(){}function k(){window.performance||(f.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(f.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});r.FR(0)}function g(a,b){for(var c=null,d=b?da:wa,e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,ja)}catch(ia){}if(c)break}c&&I.uZ(c);return c}function M(a,b,g){a.addEventListener("webglcontextlost",
function(a){a.preventDefault();f.error("WebGL context lost");z()},!1);l.wh(g);var k=l.Uz();k&&f.log("%cRENDERER INFO:","color: #00a",g.getParameter(k.UNMASKED_VENDOR_WEBGL)+", "+g.getParameter(k.UNMASKED_RENDERER_WEBGL));W.wh(g);v.wh(g);S.wh(g);B.wh(g);u.wh(g);D.wh(g);x.q4(a);u.Mf(a,b);d.JR(a.width,a.height,1);G.Mf();N.Mf();c=e();h()}function m(){p=function(){}}function z(){C()||(ka=performance.now()/1E3,G.pause(),n.pause(),S.pause(),A.pause())}function C(){return ca<ka}function h(){var a="HMD"===
ma.stereo&&N.u0();a?a.requestAnimationFrame(h):Ja(h);var b=performance.now()/1E3;aa||(aa=b);var e=b-aa;if(!(e<1/ma.max_fps)){for(var f=r.Ro(),g=0;g<ea.length;g++)ea[g](f,e);C()||(ca>aa&&(e-=ca-Math.max(ka,aa)),r.L3(e),f+=e,r.FR(f),D.update(),P.update(),x.update(),g=e,x.Xi()&&(E.reset(),ha.update(g),y.update(f,g),U.update(f,g),G.update(f,g),g&&q.update(g),x.Xi()&&(n.update(f,g),x.Xi()&&(N.update(f),J.update(f,g),x.Xi()&&(A.update(!1),H.update(f,g),pa.update(),p(g,f),x.Xi()&&(d.update(f,g),A.SS(),L.frame()))))),
c(e));aa=b;a&&a.isPresenting&&a.submitFrame()}}function e(){var a=60,c=0,d=ma.nN,e=ma.k_;return function(f){f<1/ma.max_fps||(a=qa.Tc(1/f,a,f,d),f=n.$_(),(c=(c+1)%e)||b(Math.round(a),f))}}var A=t("__anchors"),q=t("__animation"),P=t("__assets"),O=t("__config"),I=t("__compat"),u=t("__container"),J=t("__controls"),x=t("__data"),D=t("__debug"),l=t("__extensions"),v=t("__geometry"),N=t("__input"),E=t("__hud"),U=t("__nla"),L=t("__main"),y=t("__logic_nodes"),H=t("__objects"),n=t("__physics"),f=t("__print"),
W=t("__renderer"),d=t("__scenes"),G=t("__sfx"),B=t("__shaders"),S=t("__textures"),r=t("__time"),ha=t("__transform"),qa=t("__util"),K=t("__version"),pa=t("__particles"),ja=O.context,ma=O.L,aa=0,ka=0,ca=0,ea=[],wa=["webgl","experimental-webgl"],da=["webgl2","experimental-webgl2"],Z=null,Ja=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,
1E3/ma.max_fps)}}();a.Mf=function(a,b){f.n4(ma.console_verbose);var c=K.Rw()+" "+K.type()+" ("+K.oF()+")";f.log("%cINIT ENGINE","color: #00a",c);f.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;k();b?E.Mf(b):(O.L.show_hud_debug_info=!1,O.ra.$A=!1);I.uW();I.KE("Chrome")||I.KE("Firefox")||(ma.Mb=!1);c=g(a,ma.Mb);!c&&ma.Mb&&(ma.Mb=!1,c=g(a,!1));if(!c)return null;f.log("%cINIT WEBGL "+(ma.Mb?"2":"1"),"color: #00a");Z=c;M(a,b,c);O.Eq();I.tR(c,!0);O.Z3();
B.C1();ma.rA&&(a.style["touch-action"]="none");f.log("%cSET PRECISION:","color: #00a",ma.precision);return c};a.P3=function(a){b=a};a.Z9=function(){b=function(){}};a.d4=function(a){p=a};a.a$=function(){m()};a.pause=z;a.resume=function(){C()&&(ca=performance.now()/1E3,G.resume(),n.resume(),S.play(!0),A.resume())};a.wr=C;a.reset=function(){x.jD(0);x.reset();l.reset();W.reset();v.reset();S.o3();B.reset();D.reset();u.reset();x.reset();u.reset();r.reset();G.reset();ca=ka=aa=0;b=function(){};c=function(){};
p=function(){};ea.length=0;Z=null};a.FE=function(a,b,c,d){L.FE(a,b,c,d)};a.Am=function(){return I.Am()};a.Ot=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==a)return;ea.push(a)};a.Z2=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==a){ea.splice(b,1);break}};a.Uz=function(){var a=l.Uz();return a?{vendor:Z.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:Z.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}};b4w.module.__main=function(a,t){function p(a,b,e){var g=c.Xh();if(g.toBlob)g.toBlob(a,b,e);else{e=atob(g.toDataURL(b,e).split(",")[1]);for(var g=new Uint8Array(e.length),h=0;h<e.length;h++)g[h]=e.charCodeAt(h);a(new Blob([g],{type:b||"image/png"}))}}var c=t("__container"),b=null,k="image/png",g=1,M="",m=!1,z=!1;a.FE=function(a,c,e,p){m=z="undefined"===typeof p?p:!0;b=a;k=c||k;g=e||g};a.frame=function(){var a=b;a&&(m&&M&&URL.revokeObjectURL(M),p(function(b){navigator.msSaveOrOpenBlob?a(b):(M=URL.createObjectURL(b),
a(M))},k,g),b=null,k="image/png",g=1)}};b4w.module.physics=function(a,t){function p(a,b,c,h){return g.zZ(a,h[c[0]],h[c[1]],h[c[2]])}function c(a,b,c,g,e){b=Math.abs(a[2]-b[2]);return b<e&&M.g1(a,c,g)?b:Number.MAX_VALUE}var b=t("__physics"),k=t("__print"),g=t("__util"),M=t("__navmesh");a.zT=0;a.H6=1;a.G6=2;a.zJ=3;a.bN=function(a){b.Aa(a)?b.bN(a):k.va("No physics for object "+a.name)};a.xF=function(a){b.Aa(a)?b.xF(a):k.va("No physics for object "+a.name)};a.bca=function(a){return b.Aa(a)};a.pG=function(a){return b.pG(a)};a.EO=function(a){return b.EO(a)};
a.jI=function(a,c){k.ff("set_gravity","set_object_gravity");b.Aa(a)?b.jI(a,0,0,-c):k.va("No physics for object "+a.name)};a.bea=function(a,c){b.Aa(a)?b.jI(a,c[0],c[1],c[2]):k.va("No physics for object "+a.name)};a.cC=function(a,c,g){b.Aa(a)?b.cC(a,c,g):k.va("No physics for object "+a.name)};a.$=function(a){b.Aa(a)?b.$(a):k.va("No physics for object "+a.name)};a.$K=function(a,c,g,h){b.Aa(a)?b.$K(a,c,g,h):k.va("No physics for object "+a.name)};a.aL=function(a,c,g,h){b.Aa(a)?b.aL(a,c,g,h):k.va("No physics for object "+
a.name)};a.qE=function(a,c,g,h){b.Aa(a)?b.qE(a,c,g,h,!1):k.va("No physics for object "+a.name)};a.q9=function(a,c,g,h){b.Aa(a)?b.qE(a,c,g,h,!0):k.va("No physics for object "+a.name)};a.ZK=function(a,c,g,h){b.Aa(a)?b.ZK(a,c,g,h):k.va("No physics for object "+a.name)};a.YQ=function(a,c,g,h){b.Aa(a)?b.YQ(a,c,g,h):k.va("No physics for object "+a.name)};a.Ws=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.Ws(a,g.pa(c,-1,1))):k.va("No physics for object "+a.name)};a.tfa=function(a,c,
p){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=g.pa(c,0,1);var h=a.S.Zq;-1==p||1==p?h=Math.max(-1,Math.min(h+p*c,1)):!p&&0<=h?h=Math.max(0,h-c):!p&&0>h?h=Math.min(0,h+c):k.error("Wrong steering direction");b.Ws(a,g.pa(h,-1,1))}else k.va("No physics for object "+a.name)};a.Vs=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.Vs(a,g.pa(c,-1,1))):k.va("No physics for object "+a.name)};a.sfa=function(a,c,p){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=g.pa(c,0,
1);var h=a.S.Bs;-1==p||1==p?h=Math.max(-1,Math.min(h+p*c,1)):!p&&0<=h?h=Math.max(0,h-c):!p&&0>h?h=Math.min(0,h+c):k.error("Wrong steering direction");b.Vs(a,g.pa(h,-1,1))}else k.va("No physics for object "+a.name)};a.oJ=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.oJ(a,g.pa(c,0,1))):k.va("No physics for object "+a.name)};a.rfa=function(a,c){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=g.pa(c,-1,1);var m=a.S.bu;b.oJ(a,g.pa(m+m*c,0,1))}else k.va("No physics for object "+
a.name)};a.xg=function(a){return b.xg(a)};a.yg=function(a){return b.yg(a)};a.Nba=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),null;if(b.xg(a)||b.yg(a))return a.Kg.name;k.error("Wrong object");return null};a.Pba=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),null;if(b.xg(a)||b.yg(a))return a.S.Zq;k.error("Wrong object");return null};a.Oba=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return a.S.Bs;k.error("Wrong object");
return 0};a.Mba=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return a.S.bu;k.error("Wrong object");return 0};a.rO=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return b.rO(a);k.error("Wrong object");return 0};a.ml=function(a){return b.CO(a)};a.fI=function(a,c,g){b.Aa(a)?b.fI(a,c,g):k.va("No physics for object "+a.name)};a.UB=function(a,c){b.Aa(a)?b.UB(a,c):k.va("No physics for object "+a.name)};a.eR=function(a,
c){b.Aa(a)?b.eR(a,c):k.va("No physics for object "+a.name)};a.dR=function(a,c){b.Aa(a)?b.dR(a,c):k.va("No physics for object "+a.name)};a.aR=function(a,c){b.Aa(a)?b.aR(a,c):k.va("No physics for object "+a.name)};a.HL=function(a){b.Aa(a)?b.HL(a):k.va("No physics for object "+a.name)};a.IL=function(a,c,g){b.Aa(a)?b.IL(a,c,g):k.va("No physics for object "+a.name)};a.bR=function(a,c,g){b.Aa(a)?b.bR(a,c,g):k.va("No physics for object "+a.name)};a.cR=function(a,c){b.Aa(a)?b.cR(a,c):k.va("No physics for object "+
a.name)};a.VB=function(a,c){b.Aa(a)?b.VB(a,c):k.va("No physics for object "+a.name)};a.WB=function(a,c){b.Aa(a)?b.WB(a,c):k.va("No physics for object "+a.name)};a.oE=function(a,c,g,h){b.Aa(a)?b.oE(a,c||"ANY",g,h||!1):k.va("No physics for object "+a.name)};a.NH=function(a,c,g){b.Aa(a)?b.NH(a,c||"ANY",g):k.va("No physics for object "+a.name)};a.pE=function(a,c){b.Aa(a)?b.pE(a,c):k.va("No physics for object "+a.name)};a.OE=function(a){b.Aa(a)?b.OE(a):k.va("No physics for object "+a.name)};a.Xx=function(a,
c,g,h,e,p){a=a||null;return null==a||b.Aa(a)?b.Xx(a,c,g,h||"ANY",e,p||!1,!1,!1,!1):(k.va("No physics for object "+a.name),0)};a.k9=function(a,c,g,h,e,p,q,t,M){a=a||null;return null==a||b.Aa(a)?b.Xx(a,c,g,h||"ANY",e,p||!1,q||!1,t||!1,M||!1):(k.va("No physics for object "+a.name),0)};a.OH=function(a){b.iP(a)?b.OH(a):k.error("Wrong ray test ID")};a.GL=function(a,c,g){b.iP(a)?b.GL(a,c,g):k.error("Wrong ray test ID")};a.VK=function(a,c,g,h,e,p,q,t,M,I){b.Aa(c)&&b.Aa(e)?b.VK(a,c,g,h,e,p,q,t,M,I):k.error("Wrong objects")};
a.bM=function(a){b.Aa(a)&&b.z0(a)?b.bM(a):k.error("Wrong object")};a.wQ=function(a,c,g,h,e,p){b.Aa(a)&&b.Aa(h)?b.wQ(a,c,g,h,e,p):k.error("Wrong objects")};a.TP=function(a,c,g){g||(g=p);if(b.Aa(a)){var h=a.N.Cv;return h?M.TP(h,c,g):(k.error(a.name+" is not a navigation mesh object"),null)}k.va("No physics for object "+a.name)};a.SP=function(a,g,t,h){if(b.Aa(a)){var e=a.N.Cv;if(!e)return k.error(a.name+" is not a navigation mesh object"),null;h=h||{};a={};a.do_not_pull_string=!!h.do_not_pull_string;
a.distance_to_closest=h.distance_to_closest||p;a.distance_to_farthest=h.distance_to_farthest||c;a.island=h.island||0;a.allowed_distance=h.allowed_distance||Number.MAX_VALUE;a.return_normals=h.return_normals||!1;return M.SP(e,g,t,a)}k.va("No physics for object "+a.name)}};b4w.module.screen=function(a,t){function p(){}function c(){}function b(a,b,c){function e(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",e,!1),document.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),document.removeEventListener("MSFullscreenChange",e,!1),c())}a=a||m.qe();
b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",e,!1);document.addEventListener("webkitfullscreenchange",e,!1);document.addEventListener("mozfullscreenchange",e,!1);document.addEventListener("MSFullscreenChange",e,!1);a.RH=a.RH||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.RH?a.RH():q.error("B4W App: request fullscreen method is not supported")}function k(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
document.msExitFullscreen;"function"!=typeof a&&q.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function g(a){var b=h.ba(h.Sb);if(b&&!J){var c=h.vg(b,h.Ug);if(c&h.Ax){var e=b.Yd,g=e.getEyeParameters("left"),e=e.getEyeParameters("right");m.resize(2*Math.max(g.renderWidth,e.renderWidth),Math.max(g.renderHeight,e.renderHeight),!1)}else g=m.Xh(),g=Math.max(2*g.height,g.width),m.resize(g,g/2,!1);g=h.$h(b,h.GJ,I);e=h.$h(b,h.HJ,u);M.kI(a,g,e,!(c&h.Ax));g={base_line_factor:.5,
inter_lens_factor:.5,enable_hmd_stereo:!0};c&(h.fm|h.Ak|h.tq)&&(g.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],g.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Tp||(b.xj&&b.Wj&&b.yj?g.base_line_factor=(b.xj-b.yj)/b.Wj:b.yj||(g.base_line_factor=b.xj/b.Wj)),b.Wi&&b.Ln&&!b.Tp&&(g.inter_lens_factor=b.Wi/b.Ln));x.enabled||P.eB(.5,1);P.fs(g);if(b=h.vg(b,h.xt))c=P.R(),a=A.La(a,
c).oa,M.YB(a,b);P.b3();J=!0}}var M=t("__camera"),m=t("__container"),z=t("__config"),C=t("__hud"),h=t("__input"),e=t("__main"),A=t("__obj_util"),q=t("__print"),P=t("__scenes"),O=t("__vec4"),I=O.create(),u=O.create(),J=!1,x=z.Ao;a.YM=C.YM;a.pQ=C.pQ;a.SH=b;a.CF=k;a.Lq=h.Lq;a.LQ=function(a,c,e){if("HMD"!=!z.get("stereo")||"NONE"==z.get("stereo")&&z.get("is_mobile_device")){var g=h.ba(h.Sb);if(g&&h.vg(g,h.Ug)&h.Tn){var k=g.Yd;k&&!k.isPresenting&&(c=c||function(){},e=e||function(){},p=function(){k.isPresenting?
c():(window.removeEventListener("vrdisplaypresentchange",p),e())},window.addEventListener("vrdisplaypresentchange",p,!1),k.capabilities.canPresent?(a=m.Xh(),k.requestPresent([{source:a}]).then(function(){},function(){q.error("HMD fullscreen request failed.")})):q.error("HMD fullscreen request failed."))}else b(a,c,e)}};a.RZ=function(){if("HMD"!=!z.get("stereo")||"NONE"==z.get("stereo")&&z.get("is_mobile_device")){var a=h.ba(h.Sb);a&&h.vg(a,h.Ug)&h.Tn?(a=a.Yd)&&a.isPresenting&&(a.exitPresent(),m.Gl(!0)):
k()}};a.HE=function(){var a=h.ba(h.Sb),b=h.vg(a,h.Ug)&h.Tn;return a&&(b&&a.Yd||!b&&h.Lq())?!0:!1};a.n3=function(a){var b=h.ba(h.Sb);if(b&&!J&&(c=void 0,P.Ya())){var e=P.Hm(P.R());e&&(b.vh?(g(e),a&&a()):(h.m3(b),b.aw=function(){g(e);a&&a()}))}};a.SZ=function(){var a=h.ba(h.Sb);J&&a&&a.vh&&(P.fs({enable_hmd_stereo:!1}),J=!1,c&&c(),P.c3(),x.enabled||P.eB(2,1),m.Gl(!0))};a.xea=function(a,b){a=a||"image/png";e.FE(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,
c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}};b4w.module.transform=function(a,t){var p=t("__boundings"),c=t("__obj_util"),b=t("__physics"),k=t("__print"),g=t("__quat"),M=t("__transform"),m=t("__tsr"),z=t("__util"),C=m.create(),h=new Float32Array(3),e=new Float32Array(4);a.je=function(a,e,g,m){c.ea(a)?(h[0]=e,h[1]=g,h[2]=m,M.je(a,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.dC=function(a,e,g,m){c.ea(a)?(h[0]=e,h[1]=g,h[2]=m,M.dC(a,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.eC=function(a,
e){c.ea(a)?(M.je(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.uea=function(a,e){c.ea(a)?(M.dC(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.tea=function(a,e,g,p,t){c.ea(a)?(h[0]=e,h[1]=g,h[2]=p,e=m.X(t.A.D),t=m.la(t.A.D),z.Mc(h,1,t,e,h),M.je(a,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Ne=function(a,b){b||(b=new Float32Array(3));M.Ne(a,b);return b};a.pO=function(a,b){b||(b=new Float32Array(3));M.pO(a,b);
return b};a.Ll=function(a,g,h,m,p){c.ea(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=p,M.Ll(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.aC=function(a,g,h,m,p){c.ea(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=p,M.aC(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.nw=function(a,e){c.ea(a)?(M.Ll(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.kea=function(a,e){c.ea(a)?(M.aC(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.yba=function(a,b){if(c.ea(a))return M.dG(a,b),b;k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Sj=function(a,b){b||(b=new Float32Array(4));M.Sj(a,b);return b};a.dG=function(a,b){b||(b=new Float32Array(4));M.dG(a,b);return b};a.qI=function(a,e,g,m){c.ea(a)?(h[0]=e,h[1]=g,h[2]=m,M.qI(a,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.fO=function(a,b){b||(b=new Float32Array(3));M.fO(a,b);return b};a.gO=function(a,b){b||(b=new Float32Array(3));M.gO(a,b);return b};
a.rI=function(a,e,g,m){c.ea(a)?(h[0]=e,h[1]=g,h[2]=m,M.rI(a,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.iea=function(a,e){c.ea(a)?(M.qI(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.hea=function(a,e){c.ea(a)?(M.rI(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Ve=function(a,b){c.ea(a)?(M.Ve(a,b),M.W(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.sI=function(a,b){c.ea(a)?(M.sI(a,b),M.W(a)):k.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.fe=function(a){return M.fe(a)};a.iO=function(a){return M.iO(a)};a.aaa=function(a){if("EMPTY"!=a.type)k.error("Wrong object: "+a.name);else{for(var e=0;e<a.af.length;e++)if(!c.ea(a.af[e])){k.error('Wrong object: "'+a.af[e].name+'" is not dynamic.');return}M.je(a,[0,0,0]);M.Ll(a,[0,0,0,1]);M.Ve(a,1);M.W(a);b.$(a)}};a.bG=function(a){return c.mf(a)?M.bG(a):(k.error("Wrong object: "+a.name),0)};a.Sz=function(a,b,e){if(!c.mf(a))return k.error("Wrong object: "+a.name),null;
e||(e=new Float32Array(3));return M.Sz(a,b,e)};a.Bg=function(a,e,g,h){c.ea(a)?(M.Bg(a,e,g,h),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Fda=function(a,h){if(c.ea(a)){var m=g.setAxisAngle(z.Af,h,e);M.ZH(a,m);M.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Gda=function(a,h){if(c.ea(a)){var m=g.setAxisAngle(z.Eh,h,e);M.ZH(a,m);M.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Hda=function(a,h){if(c.ea(a)){var m=g.setAxisAngle(z.ic,
h,e);M.ZH(a,m);M.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.jba=function(a){return p.wy(a.A.Ki)};a.nk=function(a,e){c.ea(a)?(M.nk(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.fC=function(a,e){c.ea(a)?(M.fC(a,e),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Im=function(a,b){b||(b=new Float32Array(8));M.Im(a,b);return b};a.dv=function(a,b){b||(b=new Float32Array(8));M.dv(a,b);return b};a.distance=function(a,b){return M.distance(a,
b)};a.Xda=function(a,e){c.ea(a)?(m.Wh(e,C),M.nk(a,C),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Yda=function(a,e){c.ea(a)?(m.Wh(e,C),M.fC(a,C),M.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.fba=function(a,b){b||(b=new Float32Array(16));M.Im(a,C);m.bD(C,b);return b};a.gba=function(a,b){b||(b=new Float32Array(16));M.dv(a,C);m.bD(C,b);return b}};b4w.module.util=function(a,t){var p=t("__compat"),c=t("__print"),b=t("__quat"),k=t("__tbn"),g=t("__util"),M=t("__vec3");a.Af=new Float32Array([1,0,0]);a.Ee=new Float32Array([0,1,0]);a.ic=new Float32Array([0,0,1]);a.it=new Float32Array([-1,0,0]);a.Eh=new Float32Array([0,-1,0]);a.qc=new Float32Array([0,0,-1]);a.uK=g.uK;a.BK=g.BK;a.CK=g.CK;a.wK=g.wK;a.yK=g.yK;a.EK=g.EK;a.vK=g.vK;a.AK=g.AK;a.hE=g.hE;a.xK=g.xK;a.zK=g.zK;a.DK=g.DK;a.Rh=function(a){return g.Rh(a||0)};a.assert=g.assert;a.rP=g.rP;a.Od=g.Od;
a.RG=function(a){return g.RG(a)};a.bl=function(a,b){b||(b=new Float32Array(4));return g.bl(a,b)};a.pH=function(a,c,k){k||(k=b.create());return g.pH(a,c,k)};a.AQ=function(a,b,c){c||(c=M.create());return g.AQ(a,b,c)};a.Uv=function(a,b){b||(b=new Float32Array(3));return g.Uv(a,b)};a.sign=g.sign;a.pa=g.pa;a.Jc=g.Jc;a.Xba=function(a,b){return g.GB(a,g.qc,g.ic,g.Ee,b)};a.EE=function(a,b){return g.EE(a,b)};a.GB=function(a,b,k,h,e){return 0!=M.dot(k,h)?(c.error("Wrong in-plane direction"),null):g.GB(a,b,
k,h,e)};a.GO=g.GO;a.Tc=g.Tc;a.AC=g.AC;a.Yi=g.Yi;a.WE=g.WE;a.zQ=g.zQ;a.CQ=g.CQ;a.LO=g.LO;a.Jh=g.Jh;a.Fi=g.Fi;a.qn=g.qn;a.lerp=g.lerp;a.bf=g.bf;a.IB=g.IB;a.vF=g.vF;a.cp=p.cp;a.Caa=k.get;a.trunc=g.trunc};b4w.module.camera_anim=function(a,t){function p(a,b,e,g,h){e=C.Jh(b-e);e=Math.min(e,2*Math.PI-e);b=C.Jh(g-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(e)||1E-6>2*Math.PI-Math.abs(e))e=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;c.Oe(a)?(h[0]=b,h[1]=e):(h[0]=e,h[1]=b);return h}var c=t("camera"),b=t("controls"),k=t("print"),g=t("scenes"),M=t("time"),m=t("transform"),z=t("tsr"),C=t("util"),h=t("vec3"),e=new Float32Array(2),A=new Float32Array(2),q=new Float32Array(3),P=new Float32Array(3),
O=new Float32Array(3),I=z.create(),u=z.create(),J=z.create(),x={},D=!1,l=!1,v=!1,N=!1;a.bfa=function(a,g,l,p,u,n,f,t){if(c.Oe(a)){if(C.Yi(g))var d=g;else d=q,m.Sz(g,!1,d);l=l||1;p=p||2;u=u||1;n=n||1;var v=m.Ne(a,P);g=h.subtract(d,v,O);var d=c.jl(a,e),y=c.L_(g,A),x=y[0]-d[0],r=y[1]-d[1],z=Math.abs(Math.acos(Math.cos(x)*Math.cos(r))/l),E=h.length(g)*(1-1/p),D=function(a){return 6*a*(1-a)},H=M.Ro(),L=0,I=function(){b.Tf(a,"TRACK_TO_TARGET");f&&f()};l=b.Ny();p=b.vm();b.qa(a,"TRACK_TO_TARGET",b.ob,[l,
p],null,function(d,e,f){c.Oe(d)?1==f&&(f=b.wd(d,e,0)-H,e=b.wd(d,e,1),f<z?(f=D(f/z),c.Lc(a,f*x*e/z,f*r*e/z)):f<z+u?(L||(c.Lc(a,y[0],y[1],!0),L++),f=D(f-z/u),e=f*E*e/u,m.Bg(d,0,0,-e)):f<z+u+n?1>=L&&(c.Lc(a,y[0],y[1],!0),c.HF(a,v),m.Bg(d,0,0,-E),t&&t(),L++):f<z+u+n+u?(2>=L&&(c.Lc(a,y[0],y[1],!0),c.HF(a,v),m.Bg(d,0,0,-E),L++),f=D(f-z-u-n/u),e=f*E*e/u,m.Bg(d,0,0,e)):(c.Lc(a,y[0],y[1],!0),c.HF(a,v),I())):I()})}else k.error("track_to_target(): Wrong camera object or camera move style")};a.iL=function(a){function h(a,
d,g){if(1==g)if(g=c.Vi(a),g==c.He)l();else if(g!=c.Ob&&g!=c.Xc||!c.C0(a))q=null,d=b.wd(a,d,0),c.Lc(a,.3*d,0);else{g=g==c.Xc?c.a_(a,x):c.a5(a,x);if(null===q||g.left!=q.left||g.right!=q.right){q=q||{};q.left=g.left;q.right=g.right;n=Math.min(.2,C.Jh(q.right-q.left)/2);g=m;var h=q,k=c.jl(g,e)[0];g=p(g,k,h.left,h.right,A);f=.3*Math.min(1,g[0]/.2,g[1]/.2)}d=b.wd(a,d,0);g=c.jl(a,e)[0];g=p(a,g,q.left,q.right,A);g[1]>n&&g[0]>n?f=.3*C.sign(f):g[1]<n?f-=Math.pow(.3,2)/.4*d:g[0]<n&&(f+=Math.pow(.3,2)/.4*d);
c.Lc(a,d*f,0)}}function l(){b.Tf(m,"AUTO_ROTATE");b.Tf(m,"DISABLE_AUTO_ROTATE");a()}a=a||function(){};var m=g.il();if(c.fp(m))k.error("auto_rotate(): Wrong camera move style");else{var q={},n=0,f=0;if(b.qm(m,"AUTO_ROTATE"))l();else{var u=b.Vk("X"),d=b.Vk("Y"),t=b.xo(),v=b.Bu(),z=b.Oy(),r=b.vm(),E=b.yu(0);b.qa(m,"DISABLE_AUTO_ROTATE",b.Yp,[u,d,t,v,z,E],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},l);b.qa(m,"AUTO_ROTATE",b.ob,[r],function(a){return a[0]},h)}}};a.XO=function(){var a=
g.il();return b.qm(a,"AUTO_ROTATE")};a.pX=function(){var a=g.il();return c.Vi(a)==c.He?!1:!0};a.Zca=function(a,b,e,g,l){if(c.Vi(a)!=c.He)k.error("move_camera_to_point(): wrong camera type");else if(!D)if(a)if(b){e=e||1;g=g||.01;var n=C.Yi(a)?a:m.Im(a,I),f=C.Yi(b)?b:m.Im(b,u);b=h.distance(z.X(n),z.X(f))/e;e=C.Jc(z.la(n),C.qc,q);var p=C.Jc(z.la(f),C.qc,P);e=Math.min(Math.abs(h.dot(e,p)),1);g=1E3*Math.max(b,Math.acos(e)/g);D=!0;var d=M.Hi(0,1,g,function(b){var c=z.qr(n,f,C.qn(b),J);v?(M.Sk(d),D=v=!1):
(m.nk(a,c),1==b&&(D=!1,l&&l()))})}else k.error("move_camera_to_point(): you must specify the point object");else k.error("move_camera_to_point(): you must specify the camera object")};a.Lc=function(a,b,e,g,h){if(c.Vi(a)==c.He)k.error("rotate_camera(): not supported for STATIC cameras");else if(!l)if(a)if(b||e){g=g||1E3;l=!0;var m=0,f=M.Hi(0,b,g,function(d){N||d>=b?(N=!1,M.Sk(f),l&&(l=!1,h&&h())):(c.Lc(a,m-d,0),m=d)}),p=0,d=M.Hi(0,e,g,function(b){N||b>=e?(N=!1,M.Sk(d),l&&(l=!1,h&&h())):(c.Lc(a,0,p-
b),p=b)})}else k.error("rotate_camera(): you must specify the rotation angle");else k.error("rotate_camera(): you must specify the camera object")};a.Lea=function(){v=!0};a.Mea=function(){N=!0};a.Kca=function(){return D};a.Mca=function(){return l}};b4w.module.time=function(a,t){var p=t("__time");a.bC=p.bC;a.Mq=p.Mq;a.Ro=p.Ro;a.Hi=p.Hi;a.Sk=p.Sk};b4w.module.tsr=function(a,t){var p=t("__mat4"),c=t("__tsr");a.create=c.create;a.Az=c.Az;a.copy=c.copy;a.identity=c.identity;a.ti=c.ti;a.Ad=c.Ad;a.Ve=c.Ve;a.mn=c.mn;a.Gc=c.Gc;a.X=c.X;a.fe=c.fe;a.la=c.la;a.invert=c.invert;a.bD=function(a,k){k||(k=p.create());c.bD(a,k);return k};a.Wh=c.Wh;a.multiply=c.multiply;a.Mc=c.Mc;a.yS=c.yS;a.An=c.An;a.cJ=c.cJ;a.Ud=c.Ud;a.dJ=c.dJ;a.translate=c.translate;a.qr=function(a,k,g,p){p||(p=c.create());c.qr(a,k,g,p);return p}};b4w.module.gp_conf=function(a,t){function p(){y.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&y.push(a[b]);return y}function c(a){var b=P.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)q.mw(a,c,b[c])}else c=JSON.stringify(I),P.set(a+"_gmpd_stngs",c,"b4w")}function b(a){W=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),
g=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),t=document.createElement("div"),y=document.createElement("div"),x=document.createElement("div"),A=document.createElement("div"),C=document.createElement("div"),G=document.createElement("div"),E=document.createElement("div"),D=document.createElement("div"),L=document.createElement("div"),I=document.createElement("div"),
J=document.createElement("div"),M=document.createElement("div");v=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";g.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";k.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";l.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";x.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";C.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";G.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";E.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";L.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";I.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";J.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";M.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(J);b.appendChild(M);c.appendChild(d);c.appendChild(e);c.appendChild(g);c.appendChild(h);b.appendChild(c);k.appendChild(l);k.appendChild(m);k.appendChild(p);k.appendChild(t);b.appendChild(k);b.appendChild(y);b.appendChild(x);b.appendChild(A);b.appendChild(C);b.appendChild(G);b.appendChild(E);b.appendChild(D);a.appendChild(b);b.appendChild(L);b.appendChild(I);H.length=0;u.length=0;n.length=0;f.length=0;H.push(p,
m,t,l,G,E,L,D,A,C,y,x,d,g,h,e,I);u.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
n.push(y,y,x,x);f.push(J,M);for(a=0;a<H.length;a++)H[a].setAttribute("id","pad_btn_"+a),H[a].setAttribute("data-colorstate","B"),H[a].setAttribute("data-key",a),H[a].setAttribute("data-svgid",a);J.setAttribute("id","pad_left_axis");J.setAttribute("data-colorstate","GR");J.setAttribute("data-key",q.dm);J.setAttribute("data-svgid",u.length);M.setAttribute("id","pad_right_axis");M.setAttribute("data-colorstate","GR");M.setAttribute("data-key",q.em);M.setAttribute("data-svgid",u.length+1);u.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
z(H,O);z(f,"#e6e6e6")}function k(a){return[A.gc(q.bq,a),A.gc(q.cq,a),A.gc(q.lq,a),A.gc(q.mq,a),A.gc(q.nq,a),A.gc(q.oq,a),A.gc(q.Rn,a),A.gc(q.Sn,a),A.gc(q.pq,a),A.gc(q.qq,a),A.gc(q.eq,a),A.gc(q.fq,a),A.gc(q.gq,a),A.gc(q.hq,a),A.gc(q.iq,a),A.gc(q.jq,a),A.gc(q.kq,a),A.gc(q.hx,a),A.gc(q.ix,a),A.gc(q.jx,a),A.gc(q.kx,a),A.gc(q.lx,a),A.gc(q.mx,a),A.gc(q.nx,a),A.gc(q.ox,a),A.gc(q.px,a)]}function g(a){return[A.me(q.dm,a),A.me(q.Pn,a),A.me(q.em,a),A.me(q.Qn,a),A.me(q.$p,a),A.me(q.aq,a),A.me(q.tt,a),A.me(q.ut,
a),A.me(q.vt,a),A.me(q.wt,a),A.me(q.rt,a),A.me(q.st,a)]}function M(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function m(a){l.removeChild(v);v=null;switch(a){case "PAD":U.checked=!0;b(l);break;case "WHEEL":E.checked=
!0;var c=l;W=!1;var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),t=document.createElement("div"),y=document.createElement("div"),x=document.createElement("div"),A=document.createElement("div"),C=document.createElement("div"),D=document.createElement("div"),G=document.createElement("div"),L=document.createElement("div"),I=
document.createElement("div"),J=document.createElement("div"),M=document.createElement("div"),N=document.createElement("div"),P=document.createElement("div"),ba=document.createElement("div"),za=document.createElement("div"),ia=document.createElement("div"),F=document.createElement("div");a=document.createElement("div");var sa=document.createElement("div"),ya=document.createElement("div"),Q=document.createElement("div"),va=document.createElement("div"),Ua=document.createElement("div");v=d;var Ba="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";d.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=Ba+"top: 132px;left: 331px;";g.style.cssText=Ba+"top: 122px;left: 315px;";h.style.cssText=Ba+"top: 122px;left: 347px;";k.style.cssText=Ba+"top: 113px;left: 331px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";p.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";t.style.cssText=Ba+"top: 107px;left: 141px;";y.style.cssText=Ba+"top: 107px;left: 90px;";x.style.cssText=Ba+"top: 185px;left: 321px;";A.style.cssText=Ba+"top: 185px;left: 340px;";C.style.cssText=Ba+"top: 179px;left: 358px;";D.style.cssText=Ba+"top: 178px;left: 303px;";G.style.cssText=Ba+"top: 210px;left: 299px;";L.style.cssText=Ba+"top: 279px;left: 299px;";I.style.cssText=Ba+"top: 210px;left: 321px;";J.style.cssText=Ba+
"top: 279px;left: 321px;";M.style.cssText=Ba+"top: 210px;left: 344px;";N.style.cssText=Ba+"top: 278px;left: 344px;";P.style.cssText=Ba+"top: 124px;left: 147px;";ba.style.cssText=Ba+"top: 138px;left: 133px;";za.style.cssText=Ba+"top: 124px;left: 82px;";ia.style.cssText=Ba+"top: 138px;left: 96px;";F.style.cssText=Ba+"top: 278px;left: 367px;";Ba="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=Ba+"top: 291px;left: 50px;";sa.style.cssText=Ba+"top: 291px;left: 111px;";ya.style.cssText=Ba+"top: 291px;left: 171px;";Q.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";va.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Ua.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";c.appendChild(d);d.appendChild(a);d.appendChild(sa);d.appendChild(ya);d.appendChild(Q);d.appendChild(va);d.appendChild(Ua);d.appendChild(e);d.appendChild(g);d.appendChild(h);d.appendChild(k);d.appendChild(m);d.appendChild(p);d.appendChild(t);d.appendChild(y);d.appendChild(x);d.appendChild(A);d.appendChild(C);d.appendChild(D);d.appendChild(G);d.appendChild(L);d.appendChild(I);d.appendChild(J);d.appendChild(M);d.appendChild(N);
d.appendChild(P);d.appendChild(ba);d.appendChild(za);d.appendChild(ia);d.appendChild(F);H.length=0;u.length=0;n.length=0;f.length=0;H.push(e,g,h,k,m,p,t,y,x,A,C,D,G,L,I,J,M,N,P,ba,za,ia,F);u.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
f.push(Q,a,ya,sa,va,Ua);for(c=0;c<H.length;c++)H[c].setAttribute("id","wheel_btn_"+c),H[c].setAttribute("data-colorstate","B"),H[c].setAttribute("data-key",c),H[c].setAttribute("data-svgid",c);for(c=0;c<f.length;c++)H[c].setAttribute("id","wheel_axis_"+c),H[c].setAttribute("data-colorstate","GR");Q.setAttribute("data-key",q.dm);Q.setAttribute("data-svgid",u.length);a.setAttribute("data-key",q.Pn);a.setAttribute("data-svgid",u.length+1);ya.setAttribute("data-key",q.em);ya.setAttribute("data-svgid",
u.length+2);sa.setAttribute("data-key",q.Qn);sa.setAttribute("data-svgid",u.length+3);va.setAttribute("data-key",q.$p);va.setAttribute("data-svgid",u.length+4);Ua.setAttribute("data-key",q.aq);Ua.setAttribute("data-svgid",u.length+5);u.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
z(H,O);z(f,"#e6e6e6")}}function z(a,b){function c(a){a=a.target;if(!(0>J||"G"==a.getAttribute("data-colorstate")))if(D){if("R"==a.getAttribute("data-colorstate")&&(x=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",D=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(x.getAttribute("data-svgid"));x.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(u[c])+"')";x.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));x=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(u[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),d="B"==a.getAttribute("data-colorstate")?1:2;D=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(u[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";x=a}}for(var d=0;d<a.length;d++)q.Ih(a[d],c)}function C(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function h(){var a=window.innerWidth,b=window.innerHeight;l.style.zoom=750>=b&&400<b||750>=
a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var e=t("container"),A=t("controls"),q=t("input"),P=t("storage"),O=RegExp("#5276cf","g"),I={};I[q.gq]=q.gq;I[q.hq]=q.hq;I[q.jq]=q.jq;I[q.iq]=q.iq;I[q.mq]=q.mq;I[q.bq]=q.bq;I[q.cq]=q.cq;I[q.lq]=q.lq;I[q.oq]=q.oq;I[q.Sn]=q.Sn;I[q.nq]=q.nq;I[q.Rn]=q.Rn;I[q.pq]=q.pq;I[q.qq]=q.qq;I[q.eq]=q.eq;I[q.fq]=q.fq;I[q.kq]=q.kq;var u=[],J=-1,x=null,D=0,l=null,v=null,N=null,E=null,U=null,L=null,y=[],H=[],n=[],f=[],W=!0,d={};d[q.dm]=-2;d[q.Pn]=-2;d[q.em]=-2;d[q.Qn]=-2;d[q.$p]=
-2;d[q.aq]=-2;d[q.tt]=-2;d[q.ut]=-2;d[q.vt]=-2;d[q.wt]=-2;d[q.rt]=-2;d[q.st]=-2;a.show=function(){var a=document.createElement("div");l=a;a.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
e.iv(a,"LAST");b(a);var t=document.createElement("div");t.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var v=document.createElement("div");v.innerHTML="Select a device";v.style.cssText="color: #fff;display: inline-block;";t.appendChild(v);for(v=0;4>v;v++){var r=k(v),y=function(){return!0},
z=function(a,b){if(b==J)for(var c=0;c<H.length;c++){var d=H[c],e=A.wd(a,b,c),f=c;if(D)e=q.cG(J),0<=e&&x&&1==D&&(d=x.getAttribute("data-key"),q.mw(J,d,e),f=P.get(J+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,P.set(J+"_gmpd_stngs",JSON.stringify(f),"b4w"),x=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",D=0);else{if(e&&"B"==d.getAttribute("data-colorstate")){var g=u[f];d.style.backgroundImage="url('data:image/svg+xml;base64,"+
btoa(g.replace(O,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(g=u[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(g)+"')",d.setAttribute("data-colorstate","B"))}}};A.qa(null,v,A.ob,r,y,z)}0<p().length&&(J=0);var I=[],v=document.createElement("div");v.style.cssText="margin-top: 20px;";for(r=0;4>r;r++)z=C(r),r==J&&(z.style.backgroundColor="green",N=z),c(r),v.appendChild(z),z.setAttribute("data-device_type","PAD"),I.push(z),q.Ih(z,
function(a){var b=p();a=a.target;for(var d=0;d<b.length;d++)I[d]==a&&(J=d,N=a,c(J),m(a.getAttribute("data-device_type")))});t.appendChild(v);L=document.createElement("label");L.style.cssText="position: relative;display: block;color: white;";t.appendChild(L);v=document.createElement("div");v.style.cssText="margin-top: 20px;";r=M(v,"Pad");z=M(v,"Wheel");r.setAttribute("checked","true");r.onchange=function(){m("PAD");N&&N.setAttribute("data-device_type","PAD")};z.onchange=function(){m("WHEEL");N&&N.setAttribute("data-device_type",
"WHEEL")};r.setAttribute("id","test");U=r;E=z;r=document.createElement("label");r.style.cssText+="color: #fff;display: block;";v.appendChild(r);r.textContent="Click on the buttons & arrows to setup your controller";r.setAttribute("id","action_label");t.appendChild(v);a.appendChild(t);a=A.vm();A.qa(null,"UPDATE_GAMEPAD_DATA",A.ob,[a],y,function(){var a=p(),b=a.length;-1==J&&a.length&&(J=a[0].index,N=I[J]);for(var c=0;c<I.length;c++)c<b?(I[c].textContent=a[c].index,I[c]==N?(I[c].style.backgroundColor=
"green",L.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):I[c].style.backgroundColor="blue"):I[c].style.backgroundColor="black";b||(J=-1,L.textContent="")});for(v=0;4>v;v++)r=g(v),z=function(a,b){if(b=="AXES"+J){for(var c=0;c<n.length;c+=2){var e=n[c],g=a,h=b,k=c,l=20*A.wd(g,h,k),g=20*A.wd(g,h,k+1);e.style.transform="translate3d("+l+"px, "+g+"px, 0px) rotate(0rad)"}if(W)for(c=0;12>c;c+=2){if(g=a,h=b,e=c,!(e+1>2*f.length)){l=A.wd(g,h,e);g=A.wd(g,h,e+1);if(-2<d[e]){var m=l-d[e],p=g-d[e+
1],h=f[Math.floor(e/2)],k=h.getAttribute("data-svgid");D?2==D&&(m=q.Qz(J),0<=m&&(m%2&&m--,D=0,h.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(u[k])+"')",h=parseFloat(x.getAttribute("data-key")),q.mw(J,h,m),q.mw(J,h+1,m+1),x=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):h.style.backgroundImage=m||p?"url('data:image/svg+xml;base64,"+btoa(u[k].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(u[k])+
"')"}d[e]=l;d[e+1]=g}}else for(c=0;12>c;c++)(e=c,e>=f.length)||(l=A.wd(a,b,e),-2<d[e]&&((k=l-d[e],g=f[e],h=g.getAttribute("data-svgid"),D)?2==D&&(k=q.Qz(J),0<=k&&(D=0,g.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(u[h])+"')",g=parseFloat(x.getAttribute("data-key")),q.mw(J,g,k),x=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):g.style.backgroundImage=k?"url('data:image/svg+xml;base64,"+btoa(u[h].replace("#e6e6e6","#00ff00"))+
"')":"url('data:image/svg+xml;base64,"+btoa(u[h])+"')"),d[e]=l)}},A.qa(null,"AXES"+v,A.ob,r,function(){return!0},z);h();window.addEventListener("resize",h)};a.ci=function(){D=0;J=-1;U=E=x=N=null;n.length=0;H.length=0;f.length=0;e.qe().removeChild(l);l=null;A.Tf(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)A.Tf(null,a),A.Tf(null,"AXES"+a);window.removeEventListener("resize",h)};a.update=function(){for(var a=0;4>a;a++)c(a)}};b4w.module.storage=function(a,t){function p(a){return k[a?a:b]?JSON.parse(k[a?a:b]):{}}var c=t("__print"),b="b4w",k=null;a.Mf=function(a){a?"b4w"!==a?b=a:c.error("b4w prefix denied"):c.warn("Prefix should be a string. Last declared storage prefix will be used.")};a.set=function(a,c,m){var g=p(m);g[a]=String(c);k[m?m:b]=JSON.stringify(g)};a.Ja=function(a){delete k[a?a:b]};a.get=function(a,b){var c=p(b);return c[a]?c[a]:""};a.debug=function(a){c.log(p(a?a:b))};try{k=window.localStorage;try{k.tmp=null,
delete k.tmp}catch(g){c.warn("localStorage quota is limited. Disabling localStorage"),k=null}}catch(g){c.warn("Applying chrome localStorage bug workaround"),k=null}k||(c.warn("localStorage is not available, initializing temporary storage"),k={})};b4w.module.hmd=function(a,t){function p(){k.Tf(null,"VR_CONTROLLERS")}function c(a,c){function g(c,d,f){if(0<f&&(f=m.il())&&b.Oe(f)){var g=k.jf(c,d,1);c=k.jf(c,d,2);c=e.add(c,U,u);C.eC(f,c);if(g)if(1==a){var g=M.multiply(E,g,N),n=e.transformQuat(h.Eh,g,u);b.uI(f,n);C.nw(f,g)}else if(2==a||3==a){c=C.Sj(f,l);c=M.invert(c,l);d=M.multiply(A,c,l);c=b.r0(f,u);Math.abs(c[2])<Math.PI/4?n=e.cross(c,h.Eh,J):Math.abs(c[1])<Math.PI/4&&(n=e.cross(c,h.ic,J));e.normalize(n,n);d=e.transformQuat(n,d,x);var p=e.dot(c,
d);d=e.scaleAndAdd(d,c,-p,x);e.normalize(d,d);c=e.cross(c,n,u);n=Math.acos(h.pa(e.dot(n,d),0,1));c=h.sign(e.dot(d,c));q+=n*c;n=M.setAxisAngle(h.ic,-q,l);3==a?g=M.multiply(n,g,D):(c=h.GB(g,h.qc,h.ic,h.Ee,v),c=M.invert(c,v),g=M.multiply(c,g,v),g=M.multiply(n,g,D));n=e.transformQuat(h.Eh,g,u);b.uI(f,n);C.nw(f,g);M.copy(g,A)}}}if(c){var f=m.il();f&&z.n3(function(){b.Oe(f)||(P=b.Ic(f),O=b.md(f),I=b.fp(f),b.b_(f));var a=k.vm(),d=k.aF();A=C.Sj(f,A);k.qa(null,"HMD_ROTATE_CAMERA",k.ob,[a,c,d],null,g)})}}var b=
t("camera"),k=t("controls"),g=t("input"),M=t("quat"),m=t("scenes"),z=t("screen"),C=t("transform"),h=t("util"),e=t("vec3"),A=M.create(),q=0,P=!1,O=!1,I=!1,u=e.create(),J=e.create(),x=e.create(),D=M.create(),l=M.create(),v=M.create(),N=M.create(),E=M.create(),U=e.create(),L={pivot:e.create()};a.X6=0;a.DT=1;a.a7=2;a.W6=3;a.MZ=function(a){var b;if(b=g.ba(g.Sb))b=g.vg(b,g.Ug)&(g.Ak|g.tq|g.Tn)?k.bF():k.$E(),c(a,b)};a.P9=function(){return!!g.Dj(g.Sb)};a.baa=function(a,b){p();if(a||b){var c=g.vO(0),f=k.Ky(c),
c=k.Jy(c),h=g.vO(1),d=k.Ky(h),h=k.Jy(h);k.qa(null,"VR_CONTROLLERS",k.ob,[f,d,c,h],null,function(c,d){if(a){var f=k.jf(c,d,0),g=k.jf(c,d,2);e.add(U,f,f);C.eC(a,f);C.nw(a,g)}b&&(f=k.jf(c,d,1),g=k.jf(c,d,3),e.add(U,f,f),C.eC(b,f),C.nw(b,g))})}};a.u$=p;a.wZ=function(){if(k.qm(null,"HMD_ROTATE_CAMERA")){k.Tf(null,"HMD_ROTATE_CAMERA");z.SZ();var a=m.il();P?b.e5(a,L):O?b.OO(a,L):I&&b.Q4(a,L);b.uI(a,h.ic);var c=C.Sj(a,D);C.nw(a,c)}};a.f4=function(a){M.copy(a,E)};a.xba=function(a){M.copy(E,a);return a};a.a4=
function(a){M.copy(a,U)};a.wba=function(a){M.copy(U,a);return a}};b4w.module.hmd_conf=function(a,t){function p(){if(!A.Dj(A.Sb))return!1;var a=A.ba(A.Sb),a=A.vg(a,A.Ug);return a&(A.fm|A.Ak|A.tq)&&!(a&A.Tn)}function c(a){a=a.target.value;var b=N[a],c;for(c in l)if(c in b){var e=document.getElementById(c+"_slider");e&&(e.disabled="custom"!==a,e.value=b[c]);if(e=document.getElementById(c+"_number"))e.disabled="custom"!==a,e.value=b[c];l[c]=b[c]}}function b(){e.Tf(null,"UPDATE_HMD_RENDERING");g();m();I&&(I=!1,h.qe().removeChild(u),document.head.removeChild(J),J=x=u=
null)}function k(){g(!0);m();for(var a in l){var b=document.getElementById(a+"_slider");b&&(b.value=l[a]);if(b=document.getElementById(a+"_number"))b.value=l[a]}}function g(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,e=0,f=0,g=0,d;a:{d=U;var h=navigator.userAgent||navigator.vendor||window.opera;if(1==d.format&&d.devices&&d.devices.length)for(var k=0;k<d.devices.length;k++){var m=d.devices[k];
if(m.rules&&("ios"==m.type&&v||"android"==m.type)){for(var p=!1,u=0;u<m.rules.length;u++){var t=m.rules[u];if(t.ua&&0<=h.indexOf(t.ua)||!t.ua&&t.res&&t.res[0]&&t.res[1]&&Math.min(b,c)==Math.min(t.res[0],t.res[1])&&Math.max(b,c)==Math.max(t.res[0],t.res[1])){p=!0;break}}if(p){d=k;break a}}}else q.error("DPDB isn't correct.");d=-1}-1!=d&&(g=U.devices[d],f=g.dpi[1]||g.dpi,e=Math.round(25.4*b/(g.dpi[0]||g.dpi)),f=Math.round(25.4*c/f),g=Math.round(g.bw));b=P.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");
a?(l.first_distortion=.34,l.second_distortion=.55,l.bevel_size=g||4,l.screen_width=e||110,l.screen_height=f||65,l.screen_lense=50,l.ipd=64,l.baseline=32):(l.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,l.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,l.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):g||4,l.screen_width="screen_width"in b?parseFloat(b.screen_width):e||110,l.screen_height="screen_height"in b?parseFloat(b.screen_height):
f||65,l.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,l.ipd="ipd"in b?parseFloat(b.ipd):64,l.baseline="baseline"in b?parseFloat(b.baseline):32);D=!0}function M(){P.set("hmd_conf",JSON.stringify(l),"b4w");b()}function m(){if(D){var a=A.ba(A.Sb);a&&(A.lk(a,A.ux,[l.first_distortion,l.second_distortion]),A.vg(a,A.Ug)&(A.fm|A.Ak)&&(A.lk(a,A.tx,.001*l.bevel_size),A.lk(a,A.zx,.001*l.screen_width),A.lk(a,A.xx,.001*l.screen_height),A.lk(a,A.yx,.001*l.screen_lense),A.lk(a,A.xt,.001*l.ipd),A.lk(a,
A.sx,.001*l.baseline)));D=!1}}function z(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in l&&l[b]!=a.target.value&&(D=!0,l[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function C(a,b,c){var e=document.createElement("button");e.onclick=a;e.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";e.innerHTML=b;return e}var h=t("container"),e=t("controls"),A=t("input"),q=t("print"),P=t("storage"),O=t("util"),I=!1,u=null,J=null,x=null,D=!0,l={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},v=/iPad|iPhone|iPod/.test(navigator.platform),N={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},E=[{label:"Tray to lens-center distance.",vr:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",vr:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
vr:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",vr:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",vr:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",vr:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];a.check=p;a.show=function(a){if(p()){var q=h.qe();J=document.createElement("style");
J.innerHTML="."+a+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+a+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(J);if(!I){I=!0;g();var t=
A.ba(A.Wc,q);A.yw(t,!1);t=A.ba(A.Tg,q);A.yw(t,!1);u=document.createElement("div");u.className=a;q.appendChild(u);x=document.createElement("div");u.appendChild(x);x.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";a=P.get("hmd_conf","b4w");a=JSON.parse(a?a:"{}").profile||"custom";q=document.createElement("div");t=document.createElement("label");t.innerHTML=
"Profile: ";t.className="text_label";t.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";q.appendChild(t);t=document.createElement("select");q.appendChild(t);t.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
var n=A.ba(A.Sb);if(n)for(var f in N)if(0==N[f].type||A.vg(n,A.Ug)&(A.fm|A.Ak)&&1==N[f].type){var v=document.createElement("option");v.value=f;v.text=N[f].name;t.appendChild(v)}t.value=a;O.cp()?t.onchange=c:t.oninput=c;x.appendChild(q);f=A.ba(A.Sb);for(a=0;a<E.length;a++)if(A.vg(f,A.Ug)&(A.fm|A.Ak)||!E[a].vr){q=E[a];n=a;t=document.createElement("div");v=document.createElement("label");v.className="text_label";var d="8px";n%2&&(d="0");v.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
v.textContent=q.label;t.appendChild(v);t.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+d+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";for(n=0;n<q.inputs.length;n++){v=q.inputs[n];d=document.createElement("div");d.className="row";var D=document.createElement("input");D.className="input_slider";D.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";
D.setAttribute("id",v.id+"_slider");D.setAttribute("type","range");D.setAttribute("min","0.00");D.setAttribute("step",v.step);D.setAttribute("value",l[v.id]);D.setAttribute("max",v.max);d.appendChild(D);var B=document.createElement("input");B.className="input_text";B.setAttribute("id",v.id+"_number");B.setAttribute("type","number");B.setAttribute("min","0.00");B.setAttribute("step",v.step);B.setAttribute("value",l[v.id]);B.setAttribute("max",v.max);d.appendChild(B);B.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
O.cp()?(D.onchange=z,B.onchange=z):(D.oninput=z,B.oninput=z);t.appendChild(d)}x.appendChild(t)}f=document.createElement("div");a=C(M,"SAVE","4px");q=C(b,"CANCEL","4px");t=C(k,"RESET","0px");f.className="row";f.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";f.appendChild(a);f.appendChild(q);f.appendChild(t);x.appendChild(f);f=e.Ny();e.qa(null,"UPDATE_HMD_RENDERING",e.ob,[f],null,m)}}};a.ci=b;a.reset=k;a.update=function(){g();m()};var U={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",
format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],
dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},
{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],
dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,
256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},
{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},
{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},
{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],
dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],
dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,
164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},
{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],
bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}};b4w.module.sfx=function(a,t){var p=t("__obj_util"),c=t("__scenes"),b=t("__sfx"),k=t("__print");a.play=function(a,c,k){b.play(a,c||0,k||0)};a.zB=function(a){b.zB(a)};a.DG=function(a){return b.DG(a)};a.stop=function(a){b.stop(a)};a.pause=function(a){b.E4(a)};a.resume=function(a){b.G4(a)};a.GP=function(a,c,k){b.GP(a,c||0,k||!1)};a.BH=function(a,c){b.BH(a,c)};a.cO=function(a){return b.cO(a)};a.be=function(a,c){b.be(a,c)};a.BG=function(a){return b.BG(a)};a.Rca=function(){b.Dr()};a.Dr=function(){b.Dr()};
a.Dea=function(a){b.DI(a)};a.DI=function(a){b.DI(a)};a.uO=function(a){return a&&"object"===typeof a?b.uO(a):b.h0()};a.wI=function(a,c){a&&"object"===typeof a?b.wI(a,c):b.Y3(c)};a.Yb=function(a,c){a&&"object"===typeof a?b.Yb(a,c):b.e2(c)};a.hP=function(a){return a&&"object"===typeof a?b.hP(a):b.e1()};a.Xz=function(){return b.Xz().slice(0)};a.KL=b.KL;a.fR=function(a){b.fR(c.R(),a)};a.IN=function(){return b.IN(c.R())};a.ZM=function(a,c,k){a&&"object"===typeof a?b.ZM(a,c,k):b.EZ(c,k)};a.ES=function(a){a&&
"object"===typeof a?b.ES(a):b.o5()};a.XK=b.XK;a.dM=b.dM;a.tF=b.tF;a.uF=b.uF;a.CR=b.CR;a.dO=b.dO;a.jR=b.jR;a.QN=b.QN;a.PN=b.PN;a.MN=function(a){return a&&p.Sm(a)?b.MN(a):(k.error('Object "'+(a?a.name:void 0)+'" is not a valid speaker'),0)}};b4w.module.version=function(a,t){var p=t("__version");a.version=p.version;a.Rw=p.Rw;a.type=p.type;a.OM=p.OM;a.oF=p.oF;a.get_build_version=p.get_build_version};b4w.register("embed_main",function(a,t){function p(a,b){ua=document.querySelector("#circle_container");ta=document.querySelector("#preloader_caption");Pa=document.querySelector("#first_stage");cb=document.querySelector("#second_stage");Ia=document.querySelector("#third_stage");Na=document.querySelector("#load_container");Ea=document.querySelector("#preloader_container");Ma=document.querySelector("#opened_button");Ga=document.querySelector("#logo_container");Qa=document.querySelector("#buttons_container");
Ha=document.querySelector("#quality_buttons_container");ga=document.querySelector("#stereo_buttons_container");Mb=document.querySelector("#help_info_container");oa=document.querySelector("#help_button");T=document.querySelector("#hor_button_section");if(b){X.pause();var d=document.querySelector("#rel_version");va.Rw()&&(d.innerHTML=va.Rw());d=document.querySelector("#fullscreen_on_button");za.Lq()||za.HE()||d.parentElement.removeChild(d);d=F.get("quality");d&&"CUSTOM"!=d||(d="HIGH",F.set("quality",
d));Ha.className="control_panel_button";switch(d){case "LOW":Ha.classList.add("low_mode_button");break;case "HIGH":Ha.classList.add("high_mode_button");break;case "ULTRA":Ha.classList.add("ultra_mode_button")}k();g();c();Z.update();if(d=m())z(d),window.addEventListener("resize",y),y()}else if((d=aa.Yz(!0))&&d.fallback_image){var e=document.createElement("div");e.className="image_wrapper";document.body.appendChild(e);Ea.style.display="none";e.style.backgroundImage="url("+d.fallback_image+")"}else if(d&&
d.fallback_video){var e=document.createElement("div"),f=document.createElement("video");e.className="video_wrapper";e.appendChild(f);f.autoplay=!0;for(var h=0;h<d.fallback_video.length;h++){var l=document.createElement("source");l.src=d.fallback_video[h];f.appendChild(l)}document.body.appendChild(e);Ea.style.display="none"}else ma("Browser could not initialize WebGL","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup")}function c(){var a=Ya;if(a.length){var b=["t",
"f","g","v","w"],a=a.filter(function(a){return 0<=b.indexOf(a)});if(a.length){for(var c=["tw_button","fb_button","g_button","vk_button","weibo_button"],d=[],e=[],f=0;f<a.length;f++)switch(a[f]){case "t":d.push("tw_button");break;case "f":d.push("fb_button");break;case "g":d.push("g_button");break;case "v":d.push("vk_button");break;case "w":d.push("weibo_button")}for(f=0;f<c.length;f++)0>d.indexOf(c[f])&&e.push(c[f]);for(f=0;f<e.length;f++)a=document.getElementById(e[f]),a.parentElement.removeChild(a);
[].slice.call(document.querySelector("#vert_section_button").children).sort(function(a,b){return d.indexOf(a.id)-d.indexOf(b.id)}).forEach(function(a){document.querySelector("#vert_section_button").appendChild(a)})}}}function b(){var a=document.querySelector("#auto_rotate_on_button");ka.pX()||a.parentElement.removeChild(a)}function k(a){a=a||F.get("stereo")||"NONE";ga.className="control_panel_button";switch(a){case "NONE":ga.classList.add("def_mode_button");break;case "ANAGLYPH":ga.classList.add("anag_mode_button");
break;case "SIDEBYSIDE":ga.classList.add("side_mode_button");break;case "HMD":ga.classList.add("hmd_mode_button")}}function g(){window.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1};M();for(var a=0;a<Ca.length;a++){var b=Ca[a],c=document.getElementById(b.id);c&&(C(c),function(a){na.Ih(c,function(b){a.callback(b,a)})}(b))}}function M(){for(var a=document.querySelectorAll(".control_panel_button a"),b=0;b<a.length;b++){var c=a[b];c.hasAttribute("href")&&(c.href+=document.location.href);
C(c.parentNode)}}function m(){var a=ca.get("built_in_module_name");if(b4w.module_check(a)){var a=t(a).data.main_file,b=document.getElementById("built_in_scripts");b.parentElement.removeChild(b);return a}a=aa.Yz();Ga.style.display="block";if(a&&a.load)return a=a.load;if(Ta.load&&"__ASSETS_LOADING_PATH__"!=Ta.load)return a=Ta.load;ma("Please specify a scene to load","https://www.blend4web.com/doc/en/web_player.html#scene-errors");return null}function z(a){aa.Nh(Ga,"opacity",0,1,300,"","",function(){ta.style.display=
"block";aa.Nh(ta,"opacity",0,1,300,"","",function(){X.resume();da.load(a,d,B,!1)})})}function C(a){a&&(X.Am()?(a.addEventListener("touchstart",function(){a.classList.add("hover");E()}),a.addEventListener("touchend",function(){a.classList.remove("hover");N()})):(a.addEventListener("mouseenter",function(){a.classList.add("hover")}),a.addEventListener("mouseout",function(){a.classList.remove("hover")})))}function h(a){if(!v()){var b=a?a.target:document.querySelector("#auto_rotate_on_button");ka.iL(function(){b&&
O(b)});b&&O(b);X.wr()&&(A(),I())}}function e(a){v()||(ka.iL(),a&&O(a.target))}function A(a){v()||(X.resume(),a&&O(a.target))}function q(){v()||(za.HE()?za.LQ(document.body,P,P):za.SH(document.body,P,P))}function P(){!J("buttons_container")&&Y&&N();var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button");a&&O(a)}function O(a){var b=a.id,c;a:{for(c=0;c<Ca.length;c++)if(Ca[c].id==a.id){c=Ca[c];break a}c=null}var d=c.callback;a.id=c.id=c.dw;c.dw=b;J(a.id)||
a.classList.remove("hover");c.callback=c.cw;c.cw=d}function I(){var a=document.querySelector("#play_button")||document.querySelector("#pause_button");a&&O(a)}function u(){var a=document.querySelector("#auto_rotate_on_button")||document.querySelector("#auto_rotate_off_button");a&&O(a)}function J(a){var b=!1;if(document.querySelectorAll)for(var c=document.querySelectorAll(":hover"),d=0;d<c.length;d++)if(c[d].id==a){b=!0;break}return b}function x(){if(!v()){Qa.removeEventListener("mouseleave",N);Qa.removeEventListener("mouseenter",
E);document.body.removeEventListener("touchmove",N);U();L();var a=document.querySelector("#vert_section_button").firstElementChild,b=function(a){Y=!0;aa.Nh(a,"marginRight",0,-45,50,"","px");aa.Nh(a,"opacity",1,0,50,"","",function(){a.previousElementSibling&&"opened_button"!=a.previousElementSibling.id?b(a.previousElementSibling):setTimeout(function(){Aa=Y=!1;l();T.style.display=""},100)})},c=function(a){la=!0;aa.Nh(a,"marginBottom",0,-45,50,"","px");aa.Nh(a,"opacity",1,0,50,"","",function(){a.nextElementSibling&&
"opened_button"!=a.nextElementSibling.id?c(a.nextElementSibling):setTimeout(function(){Ba=la=!1;l()},100)})};b(document.querySelector("#help_button"));V||c(a)}}function D(){E();if(!v())if(na.LB(Ma,D),Ba||Aa)x();else{var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button")||document.querySelector("#quality_buttons_container"),b=document.querySelector("#vert_section_button").lastElementChild,c=function(a){Y=!0;a.style.marginRight="-45px";"help_button"==
a.id&&ra?setTimeout(function(){Y=!1;Aa=!0;l()},100):(a.style.display="block",aa.Nh(a,"marginRight",-45,0,50,"","px",function(){a.nextElementSibling?c(a.nextElementSibling):setTimeout(function(){Y=!1;Aa=!0;l()},100)}),aa.Nh(a,"opacity",0,1,50,"",""))},d=function(a){la=!0;a.style.marginBottom="-45px";a.style.display="block";aa.Nh(a,"marginBottom",-45,0,50,"","px",function(){a.previousElementSibling?d(a.previousElementSibling):setTimeout(function(){la=!1;Ba=!0;l()},100)});aa.Nh(a,"opacity",0,1,50,"",
"")};T.style.display="block";c(a);V||d(b);X.Am()?document.body.addEventListener("touchmove",N):(Qa.addEventListener("mouseleave",N),Qa.addEventListener("mouseenter",E))}}function l(){v()||(na.Ih(Ma,D),(!J("buttons_container")&&(Ba||Aa)||X.Am()&&(Ba||Aa))&&N())}function v(){return la||Y}function N(){v()||(E(),Ua=setTimeout(x,2E3))}function E(){clearTimeout(Ua)}function U(a){if(!v()&&xa){xa=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_q")[0];Ha.style.marginRight="0px";
for(var b=0,c=Ha.children;b<c.length;b++)c[b].style.display="none",c[b].style.opacity=0;Ha.className="control_panel_button "+a.id}}function L(a){if(!v()&&Oa){Oa=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_s")[0];ga.style.marginRight="0px";for(var b=0,c=ga.children;b<c.length;b++)c[b].style.display="none",c[b].style.opacity=0;ga.className="control_panel_button "+a.id}}function y(){ea.Gl()}function H(){if(ba.EL()){var a=ea.Xh(),a=na.ba(na.Wc,a),a=na.$h(a,na.vj,Wa);
W(a[0],a[1])}}function n(a){if(ba.EL())for(var b=0;b<a.length;b++)W(a[b].clientX,a[b].clientY)}function f(){var a=ea.Xh(),b=na.ba(na.Wc,a);b&&na.Hd(b,na.hm,H);(a=na.ba(na.Tg,a))&&na.Hd(a,na.km,n)}function W(a,b){var c=Ka;c&&ba.p2(c)&&ba.ku(c);Ka=pb(a,b)}function d(a,c){if(c){f();b();aa.LZ();X.d4(r);y();var d=wa.Vk(),e=wa.xo(),g=ea.qe();wa.qa(null,"MOUSE_MOVE",wa.Ai,[e,d],function(a){return a[0]&&a[1]},function(){g.className="move"});wa.qa(null,"MOUSE_STOP",wa.bx,[e],function(a){return a[0]},function(a,
b,c){-1==c&&(g.className="")});((d=aa.Yz())&&"autorotate"in d||"__AUTOROTATE__"!=Ta.autorotate)&&h();d=ba.Qo();d.title&&(document.title=d.title);G()}else ma("Could not load the scene","https://www.blend4web.com/doc/en/web_player.html#scene-errors")}function G(){var a=document.querySelector("#hmd_mode_button");na.Dj(na.Sb)||a.parentElement.removeChild(a)}function B(a){ta.innerHTML=a+"%";33>a?(Fa||(Fa=!0,ua.style.display="block"),Pa.style.width=4.7*a+"px",ua.style.webkitTransform="rotate("+(3.6*a-503)+
"deg)",ua.style.transform="rotate("+(3.6*a-503)+"deg)"):66>a?(w||(w=!0,Pa.style.width="142px",cb.style.backgroundColor="#000",cb.style.marginTop="135px"),0<135-4.5*(a-33)&&(cb.style.marginTop=135-3.5*(a-33)+"px"),ua.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",ua.style.transform="rotate("+(3.6*a-503)+"deg)"):100!=a&&(Da||(Da=!0,cb.style.marginTop="0px",Ia.style.backgroundColor="#000",Ia.style.height="0px"),75<a&&(Ia.style.height=.1*a+"px"),ua.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",
ua.style.transform="rotate("+(3.6*a-503)+"deg)");100==a&&(ia.Xz().length||(a=document.querySelector("#sound_on_button"),a.parentElement.removeChild(a)),Pa.parentElement.removeChild(Pa),cb.parentElement.removeChild(cb),Ia.parentElement.removeChild(Ia),ua.parentElement.removeChild(ua),Na.style.backgroundColor="#000",a=[{elem:ta,duration:300},{elem:Na,duration:300,cb:function(){Ma.style.display="block";aa.Nh(Ma,"transform",0,1,300,"scale(",")")}},{elem:Ga,duration:300},{elem:Ea,duration:300,cb:function(){Ea.parentElement.removeChild(Ea);
D()}}],S(a),aa.BQ(a))}function S(a){for(var b={type:"css",prop:"opacity",from:1,to:0},c=a.length;c--;)for(var d in b)a[c][d]=b[d]}function r(){}function ha(a){if(ca.get("quality")!=a){switch(a){case ca.im:var b="LOW";break;case ca.Bk:b="HIGH";break;case ca.Un:b="ULTRA"}F.set("quality",b);K()}}function qa(a){N();if(Va!=a){switch(a){case "NONE":F.set("stereo","NONE");"ANAGLYPH"==Va||"SIDEBYSIDE"==Va?K():(Ja.wZ(),pb=ba.vp);break;case "ANAGLYPH":F.set("stereo","ANAGLYPH");K();break;case "SIDEBYSIDE":F.set("stereo",
"SIDEBYSIDE");K();break;case "HMD":if(F.set("stereo","NONE"),"NONE"==Va){na.Dj(na.Sb)&&R.update();ka.XO()&&(e(),u());var b=ba.il(),c=sa.Ne(b,La),b=sa.Sj(b,ub),b=Q.transformQuat(ya.Af,b,ab);b[2]=0;Q.normalize(b,b);b=fa.rotationTo(ya.Af,b,ub);Ja.a4(c);Ja.f4(b);Ja.MZ(Ja.DT);pb=ba.z2;document.querySelector("#fullscreen_on_button")&&q()}else F.set("stereo","NONE"),K()}Va=a;k(a)}}function K(){setTimeout(function(){window.location.reload()},100)}function pa(){var a=F.get("quality");a&&"CUSTOM"!=a||(a="HIGH",
F.set("quality",a));switch(a){case "LOW":var b=ca.im;break;case "HIGH":b=ca.Bk;break;case "ULTRA":b=ca.Un}ca.set("quality",b)}function ja(){var a=F.get("stereo")||"NONE";Va=a;"NONE"==a&&na.Dj(na.Sb)&&(a="HMD");ca.set("stereo",a)}function ma(a,b){var c=document.querySelector("#error_name"),d=document.querySelector("#error_info"),e=document.querySelector("#error_container");ua.style.display="none";c.innerHTML=a;d.innerHTML="For more info visit <a href="+b+">"+b.replace("https://www.","")+"</a>";e.style.display=
"block";Ga.style.opacity=1;Ga.style.marginTop="-90px"}var aa=t("app"),ka=t("camera_anim"),ca=t("config"),ea=t("container"),wa=t("controls"),da=t("data"),Z=t("gp_conf"),Ja=t("hmd"),R=t("hmd_conf"),na=t("input"),X=t("main"),fa=t("quat"),ba=t("scenes"),za=t("screen"),ia=t("sfx"),F=t("storage"),sa=t("transform"),ya=t("util"),Q=t("vec3"),va=t("version"),Ua=null,Ba=!1,Aa=!1,la=!1,Y=!1,xa=!1,Oa=!1,ra=!1,V=!1,Ya=[],Fa=!1,w=!1,Da=!1,ua,ta,Pa,cb,Ia,Na,Ea,Ma,Ga,Qa,Ha,ga,Mb,oa,T,Ka,Va,Wa=new Float32Array(2),
La=new Float32Array(3),ab=new Float32Array(3),ub=new Float32Array(4),pb=ba.vp,Ca=[{type:"simple_button",id:"opened_button",callback:D},{type:"simple_button",id:"help_button",callback:function(){v()||(X.Am()?Mb.className="touch":Mb.className="",Mb.style.display="block",oa.style.display="none",ra=!0)}},{type:"simple_button",id:"close_help",callback:function(){ra&&(Mb.style.display="none",oa.style.display="block",ra=!1)}},{type:"trigger_button",id:"fullscreen_on_button",callback:q,dw:"fullscreen_off_button",
cw:function(){v()||(za.HE()?za.RZ():za.CF())}},{type:"trigger_button",id:"pause_button",callback:function(a){v()||(X.pause(),a&&O(a.target),ka.XO()&&(e(),u()))},dw:"play_button",cw:A},{type:"trigger_button",id:"auto_rotate_on_button",callback:h,dw:"auto_rotate_off_button",cw:e},{type:"trigger_button",id:"sound_on_button",callback:function(a){v()||(ia.Yb(null,!0),O(a.target))},dw:"sound_off_button",cw:function(a){v()||(ia.Yb(null,!1),O(a.target))}},{type:"menu_button",id:"stereo_buttons_container",
callback:function(a,b){if(!v()){U();Oa=!0;na.Dj(na.Sb)||(ga.style.marginRight="-30px");for(var c=b.ME,d=b.LE,e=0;e<c.length;e++){var f=document.getElementById(c[e]);f&&(ga.classList.contains(c[e])?(f.className="active_elem_s",na.Ih(f,L)):(f.className="qual_button",na.Ih(f,d[e])))}e="";na.Dj(na.Sb)||(e="no_hmd");ga.className="stereo_buttons_container "+e;e=0;for(c=ga.children;e<c.length;e++)c[e].style.display="block",c[e].style.opacity=1}},ME:["def_mode_button","anag_mode_button","side_mode_button",
"hmd_mode_button"],LE:[function(){qa("NONE")},function(){qa("ANAGLYPH")},function(){qa("SIDEBYSIDE")},function(){qa("HMD")}]},{type:"menu_button",id:"quality_buttons_container",callback:function(a,b){if(!v()){L();xa=!0;Ha.style.marginRight="-30px";for(var c=b.ME,d=b.LE,e=0;e<c.length;e++){var f=document.getElementById(c[e]);Ha.classList.contains(c[e])?(f.className="active_elem_q",na.Ih(f,U)):na.Ih(f,d[e])}Ha.className="quality_buttons_container";e=0;for(c=Ha.children;e<c.length;e++)c[e].style.display=
"block",c[e].style.opacity=1}},ME:["low_mode_button","high_mode_button","ultra_mode_button"],LE:[function(){ha(ca.im)},function(){ha(ca.Bk)},function(){ha(ca.Un)}]}],Ta={load:"__ASSETS_LOADING_PATH__",compressed_textures_pvr:"__COMPRESSED_TEXTURES_PVR__",compressed_textures_dds:"__COMPRESSED_TEXTURES_DDS__",show_fps:"__SHOW_FPS__",no_social:"__NO_SOCIAL__",alpha:"__ALPHA__",min_capabilities:"__MIN_CAPABILITIES__",autorotate:"__AUTOROTATE__",compressed_gzip:"__COMPRESSED_GZIP__"};a.Mf=function(){var a=
"DEBUG"==va.type(),b=b4w.module_check(ca.get("built_in_module_name")),c=aa.Yz(),d="";"__ASSETS_LOADING_PATH__"!=Ta.load?d=Ta.load:d=window.location.href;var e="__SHOW_FPS__"!=Ta.show_fps,f="__ALPHA__"!=Ta.alpha,g="__COMPRESSED_TEXTURES_DDS__"!=Ta.compressed_textures_dds,h="__MIN_CAPABILITIES__"!=Ta.min_capabilities,k="__COMPRESSED_TEXTURES_PVR__"!=Ta.compressed_textures_pvr,l="__COMPRESSED_GZIP__"!=Ta.compressed_gzip;V="__NO_SOCIAL__"!=Ta.no_social;var m=!1;!g&&!k||b||a||(m=!0);c&&(b||a||(!g&&"compressed_textures"in
c&&(g=m=!0),!k&&"compressed_textures_pvr"in c&&(k=m=!0),!l&&"compressed_gzip"in c&&(l=!0)),!e&&"show_fps"in c&&(e=!0),!V&&"no_social"in c&&(V=!0),!f&&"alpha"in c&&(f=!0),"load"in c&&(d=c.load),!h&&"min_capabilities"in c&&(h=!0),"socials"in c&&(Ya=c.socials.split("").filter(function(a,b,c){return c.indexOf(a)==b})));F.Mf("b4w_webplayer:"+d);ja();pa();f||ca.set("background_color",[.224,.224,.224,1]);aa.Mf({canvas_container_id:"main_canvas_container",callback:p,gl_debug:a,physics_enabled:!b,show_fps:e,
report_init_failure:!1,console_verbose:a,error_purge_elements:["control_panel"],alpha:f,key_pause_enabled:!1,fps_elem_id:"fps_container",fps_wrapper_id:"fps_wrapper",assets_pvr_available:k,assets_dds_available:g,assets_min50_available:m,min_capabilities:h,assets_gzip_available:l})}});window.addEventListener("load",function(){b4w.require("embed_main").Mf()});
