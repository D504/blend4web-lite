/**
 * Blend4Web CE 17_10_pre
 * Copyright (C) 2014-2017 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
var b4w="object"===typeof b4w?b4w:function(a){var t={};a.module=t;var e={};a.cleanup=function(a,b){var c=t[a];c&&(c.Mn=null);e[b||"__b4w_default"]=null};a.register=function(a,b){t[a]||(t[a]=b)};a.require=function(a,b){if(!t[a])throw Error('Module "'+a+'" not found');b=b||"__b4w_default";e[b]||(e[b]=function(a){return function(b){var c=t[b];if(!c)throw Error('Module "'+b+'" not found');c.Mn||(c.Mn={});c.Mn[a]||(c.Mn[a]={},c(c.Mn[a],e[a]));return c.Mn[a]}}(b));return e[b](a)};a.module_check=function(a){return t[a]?
!0:!1};a.get_namespace=function(a){for(var b in e)if(e[b]==a)return b;return""};a.worker_listeners=[];a.worker_namespaces=[];return a}({});b4w.module.__version=function(a){var t=new Date(2017,9,20,18,33,26),e=[17,10];a.version=function(){return e};a.version_str=function(){for(var a="",b=0;b<e.length;b++)a=1==b?a+(10>e[b]?"0"+e[b]:e[b]):a+e[b],b!=e.length-1&&(a+=".");return a};a.type=function(){return"RELEASE"};a.date=function(){return t};a.date_str=function(){var a=t.getDate(),a=10>a?"0"+String(a):String(a),b=t.getMonth()+1,b=10>b?"0"+String(b):String(b),e=String(t.getFullYear()),f=t.getHours(),f=10>f?"0"+String(f):String(f),q=t.getMinutes(),
q=10>q?"0"+String(q):String(q),l=t.getSeconds(),l=10>l?"0"+String(l):String(l);return a+"."+b+"."+e+" "+f+":"+q+":"+l};a.get_build_version=function(){return"_b4w_ver_17_10_"}};b4w.module.__config=function(a,t){function e(){return b4w.module_check(a.$e.fu)}function c(){for(var c=a.$e,e=null,h=document.getElementsByTagName("script"),x=0;x<h.length;x++){for(var y=h[x].src,p=0;p<c.WG.length;p++)if(0<=y.indexOf(c.WG[p])){e=y;break}if(null!==e)break}e||(b.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),e=document.location.href);c=e.indexOf("?");0<=c&&(e=e.substring(0,c));return e.substring(0,e.lastIndexOf("/"))}var b=t("__print"),
h=t("__util");a.P_LOW=1;a.P_HIGH=2;a.P_ULTRA=3;a.P_CUSTOM=4;a.P_AUTO=5;a.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};a.gF=h.W(a.context);a.L={alpha_sort:!0,alpha_sort_threshold:.1,Um:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,PF:1,DQ:5,background_color:[0,0,0,0],canvas_resolution_factor:1,ck:3,allow_cors:!1,OF:!1,bz:!0,anisotropic_filtering:!0,Xx:!1,show_hud_debug_info:!1,Iu:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,
ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,nK:!1,oo:!0,Rw:!0,Nc:!0,water_dynamic:!0,shore_smoothing:!0,jp:!0,RJ:!0,precision:"highp",quality:a.P_HIGH,Kt:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,pT:!1,hC:!1,Rz:!1,eK:!1,is_mobile_device:!1,GA:!1,xz:!1,o_:!1,Ds:!1,allow_hidpi:!1,TI:!1,hB:!1,HG:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,Qv:!1,LF:!1,WA:[0,0],$H:!0,tx:!1,url_params:null,
Gb:!0,ec:4,Sq:!1,pI:!1,yU:!1,xs:!1,kI:!1,OE:!1,CG:!1,BG:!1,media_auto_activation:!0,tH:4,qw:!1,gl_debug:!1,HE:!1,YD:!1,Zy:!1,km:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",Uv:!1,zs:!1,debug_loading:!1,qH:!1,pH:!1,NE:!1,ys:!0};a.xF=h.W(a.L);a.Zl={iv:-1,QF:!1,ym:1};a.controls={jT:1/120};a.be={path:"",DT:"B4W_ASSETS_PATH=__JS__/../../assets/",UT:"B4W_PROJ_ASSETS_PATH=__JS__/../../../projects/__NAME__/assets/",dT:15,prevent_caching:!0,gB:!1,Oz:!1,Zw:!1};a.cE=h.W(a.be);a.$e=
{shaders_path:"",qV:"../shaders/",RI:"include/",m_:"postprocessing/",fu:"built_in_data",WG:"b4w.min.js b4w.full.min.js b4w.simple.min.js b4w.whitespace.min.js src/b4w.js B4W_MAIN_MODULE".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};a.zG={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{CF:.8,Hh:.064,di:.035,As:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],Nl:.11,yi:.062,
ei:.004}};a.N={enabled:!0,max_fps:60,bt:"",jy:"",ky:"B4W_URANIUM_PATH=./",bE:"uranium.js",mK:"uranium_wasm.js",wH:"uranium.js.mem",lK:"uranium_wasm.wasm",QJ:"../deploy/apps/common/",oz:!1,ping:!1,wn:!0,it:!0};a.SH=h.W(a.N);a.ip={Dr:1024,Bu:256,pF:32,MP:128,LP:256,UH:.25,LT:.5,KT:1};a.tI=h.W(a.ip);a.ka={ZC:!0,xw:!1,gE:!1,RE:!1,AF:!1};a.OI=h.W(a.ka);a.Xc={outlining_overview_mode:!1,Nh:[1,.4,.05],fl:.2,hl:3.8,il:1};a.qm={enabled:!1,Ps:39,RV:0,tV:"COLOR"};a.vF=h.W(a.qm);a.zh={cT:8,$A:64,dB:8,tw:8,eB:15,
vH:0,uw:128,rg:1024,aB:4096,dc:4096,fB:[4096,4096],eo:24};a.fF=h.W(a.zh);a.apply_quality=function(){var b=a.L,c=a.N,e=a.ip;switch(b.quality){case a.P_ULTRA:b.shadows=!0;b.shore_smoothing=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.oo=!0;b.Rw=!0;b.Nc=!0;e.Dr=2048;e.Bu=512;b.ck=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.jp=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!0;b.enable_outlining=!0;b.glow_materials=
!0;b.ec=16;b.srgb_type="SRGB_PROPER";c.max_fps=120;b.lod_smooth_transitions=!0;break;case a.P_HIGH:b.shadows=!0;b.shore_smoothing=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.oo=!0;b.Rw=!0;b.Nc=!0;e.Dr=1024;e.Bu=256;b.ck=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.jp=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!1;b.enable_outlining=!0;b.glow_materials=!0;b.srgb_type="SRGB_SIMPLE";b.ec=4;c.max_fps=60;b.lod_smooth_transitions=
!0;break;case a.P_LOW:b.shadows=!1;b.shore_smoothing=!1;b.ssao=!1;b.dof=!1;b.god_rays=!1;b.bloom=!1;b.reflections=!1;b.refractions=!1;b.oo=!1;b.Rw=!1;b.Nc=!1;e.Dr=512;e.Bu=256;b.ck=2;b.anisotropic_filtering=!1;b.use_min50=!0;b.water_dynamic=!1;b.jp=!1;b.antialiasing=!1;b.smaa=!1;b.compositing=!1;b.motion_blur=!1;b.allow_hidpi=!1;b.enable_outlining=!1;b.glow_materials=!1;b.srgb_type="SRGB_SIMPLE";b.ec=1;c.max_fps=60;b.lod_smooth_transitions=!1;break;case a.P_AUTO:h.K("Direct AUTO quality profile setting is forbidden")}};
a.set=function(c,e){switch(c){case "allow_cors":a.L.allow_cors=e;break;case "allow_hidpi":a.L.allow_hidpi=e;break;case "alpha":a.context.alpha=e;break;case "alpha_sort":a.L.alpha_sort=e;break;case "alpha_sort_threshold":a.L.alpha_sort_threshold=e;break;case "anaglyph_use":b.Yu("anaglyph_use","stereo");a.L.stereo=e?"ANAGLYPH":a.L.stereo;break;case "animation_framerate":a.Zl.iv=e;break;case "anisotropic_filtering":a.L.anisotropic_filtering=e;break;case "antialiasing":a.L.antialiasing=e;break;case "assets_dir":case "assets_path":a.be.path=
e;break;case "assets_dds_available":a.be.Oz=e;break;case "assets_pvr_available":a.be.Zw=e;break;case "assets_min50_available":a.be.gB=e;break;case "audio":a.ka.ZC=e;break;case "background_color":a.L.background_color=e;break;case "bloom":a.L.bloom=e;break;case "built_in_module_name":a.$e.fu=e;break;case "canvas_resolution_factor":a.L.canvas_resolution_factor=e;break;case "console_verbose":a.L.console_verbose=e;break;case "compositing":a.L.compositing=e;break;case "dof":a.L.dof=e;break;case "do_not_load_resources":a.L.do_not_load_resources=
e;break;case "god_rays":a.L.god_rays=e;break;case "stereo":a.L.stereo=e;break;case "lod_leap_smooth_threshold":a.L.lod_leap_smooth_threshold=e;break;case "lod_smooth_transitions":a.L.lod_smooth_transitions=e;break;case "max_fps":a.L.max_fps=e;break;case "max_fps_physics":a.N.max_fps=e;break;case "media_auto_activation":a.L.media_auto_activation=e;break;case "motion_blur":a.L.motion_blur=e;break;case "physics_enabled":a.N.enabled=e;break;case "physics_uranium_path":a.N.it&&window.WebAssembly?(a.N.bt=
e+a.N.mK,a.N.jy=e+a.N.lK):(a.N.bt=e+a.N.bE,a.N.jy=e+a.N.wH);a.N.QJ=e;break;case "physics_use_wasm":a.N.it=e;break;case "physics_calc_fps":a.N.oz=e;break;case "physics_use_workers":a.N.wn=e;break;case "precision":a.L.precision=e;break;case "prevent_caching":a.be.prevent_caching=e;break;case "quality":a.L.quality=e;break;case "reflections":a.L.reflections=e;break;case "refractions":a.L.refractions=e;break;case "sfx_mix_mode":a.ka.xw=e;break;case "shaders_dir":case "shaders_path":a.$e.shaders_path=e;
break;case "shadows":a.L.shadows=e;break;case "show_hud_debug_info":a.L.show_hud_debug_info=e;break;case "smaa":b.Yu("smaa");a.L.smaa=e;break;case "smaa_search_texture_path":b.Yu("smaa_search_texture_path");a.$e.smaa_search_texture_path=e;break;case "smaa_area_texture_path":b.Yu("smaa_area_texture_path");a.$e.smaa_area_texture_path=e;break;case "ssao":a.L.ssao=e;break;case "debug_view":a.L.debug_view=e;break;case "enable_selectable":a.L.enable_selectable=e;break;case "enable_outlining":a.L.enable_outlining=
e;break;case "outlining_overview_mode":a.Xc.outlining_overview_mode=e;break;case "glow_materials":a.L.glow_materials=e;break;case "url_params":a.L.url_params=e;break;case "use_min50":a.L.use_min50=e;break;case "enable_texture_cache":a.L.enable_texture_cache=e;break;case "gl_debug":a.L.gl_debug=e;break;case "srgb_type":a.L.srgb_type=e;break;case "shadow_blur_samples":a.L.shadow_blur_samples=e;break;case "reflection_quality":a.L.reflection_quality=e;break;case "assets_gzip_available":a.L.assets_gzip_available=
e;break;case "debug_loading":a.L.debug_loading=e;break;case "msaa_samples":a.L.ec=e;break;default:b.error("Unknown config property: "+c)}};a.get=function(c){switch(c){case "allow_cors":return a.L.allow_cors;case "allow_hidpi":return a.L.allow_hidpi;case "alpha":return a.context.alpha;case "alpha_sort":return a.L.alpha_sort;case "alpha_sort_threshold":return a.L.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==a.L.stereo;case "animation_framerate":return a.Zl.iv;case "anisotropic_filtering":return a.L.anisotropic_filtering;
case "antialiasing":return a.L.antialiasing;case "assets_dir":case "assets_path":return a.be.path;case "assets_dds_available":return a.be.Oz;case "assets_pvr_available":return a.be.Zw;case "assets_min50_available":return a.be.gB;case "audio":return a.ka.ZC;case "background_color":return a.L.background_color;case "bloom":return a.L.bloom;case "built_in_module_name":return a.$e.fu;case "canvas_resolution_factor":return a.L.canvas_resolution_factor;case "console_verbose":return a.L.console_verbose;case "compositing":return a.L.compositing;
case "dof":return a.L.dof;case "do_not_load_resources":return a.L.do_not_load_resources;case "is_mobile_device":return a.L.is_mobile_device;case "god_rays":return a.L.god_rays;case "stereo":return a.L.stereo;case "lod_leap_smooth_threshold":return a.L.lod_leap_smooth_threshold;case "lod_smooth_transitions":return a.L.lod_smooth_transitions;case "max_fps":return a.L.max_fps;case "max_fps_physics":return a.N.max_fps;case "media_auto_activation":return a.L.media_auto_activation;case "motion_blur":return a.L.motion_blur;
case "physics_enabled":return a.N.enabled;case "physics_uranium_path":return a.N.QJ;case "physics_uranium_bin":return a.N.jy;case "physics_use_wasm":return a.N.it;case "physics_calc_fps":return a.N.oz;case "physics_use_workers":return a.N.wn;case "precision":return a.L.precision;case "prevent_caching":return a.be.prevent_caching;case "quality":return a.L.quality;case "reflections":return a.L.reflections;case "refractions":return a.L.refractions;case "sfx_mix_mode":return a.ka.xw;case "shaders_dir":case "shaders_path":return a.$e.shaders_path;
case "shadows":return a.L.shadows;case "show_hud_debug_info":return a.L.show_hud_debug_info;case "smaa":return a.L.smaa;case "smaa_search_texture_path":return a.$e.smaa_search_texture_path;case "smaa_area_texture_path":return a.$e.smaa_area_texture_path;case "ssao":return a.L.ssao;case "debug_view":return a.L.debug_view;case "enable_selectable":return a.L.enable_selectable;case "enable_outlining":return a.L.enable_outlining;case "outlining_overview_mode":return a.Xc.outlining_overview_mode;case "glow_materials":return a.L.glow_materials;
case "url_params":return a.L.url_params;case "use_min50":return a.L.use_min50;case "enable_texture_cache":return a.L.enable_texture_cache;case "gl_debug":return a.L.gl_debug;case "srgb_type":return a.L.srgb_type;case "shadow_blur_samples":return a.L.shadow_blur_samples;case "reflection_quality":return a.L.reflection_quality;case "assets_gzip_available":return a.L.assets_gzip_available;case "debug_loading":return a.L.debug_loading;case "msaa_samples":return a.L.ec;default:b.error("Unknown config property: "+
c)}};a.reset=function(){for(var b in a.gF)a.context[b]=a.gF[b];for(b in a.xF)a.L[b]=a.xF[b];for(b in a.cE)a.be[b]=a.cE[b];for(b in a.SH)a.N[b]=a.SH[b];for(b in a.tI)a.ip[b]=a.tI[b];for(b in a.OI)a.ka[b]=a.OI[b];for(b in a.vF)a.qm[b]=a.vF[b]};a.reset_limits=function(){var b=a.zh.eo,c;for(c in a.fF)a.zh[c]=a.fF[c];a.zh.eo=b};a.LG=e;a.$U=function(){var b=a.$e,h=a.N;e()||""!=b.shaders_path||(b.shaders_path=c()+"/"+b.qV);if(a.N.it&&window.WebAssembly)var b=h.ky+h.mK,l=h.ky+h.lK;else b=h.ky+h.bE,l=h.ky+
h.wH;h.enabled&&""==h.bt&&(h.bt=c()+"/"+b.replace("B4W_URANIUM_PATH=",""),h.jy=c()+"/"+l.replace("B4W_URANIUM_PATH=",""))};a.get_assets_path=function(b){var e=a.be;if(e.path)return e.path;var f=e.DT,h="B4W_ASSETS_PATH=";b&&(f=e.UT,h="B4W_PROJ_ASSETS_PATH=",f=f.replace("__NAME__",b));f=f.replace(h,"");return f=f.replace("__JS__",c())}};b4w.module.__anchors=function(a,t){function e(){if(!z&&!L){var a=A;if(a)if("visible"==a.lastElementChild.style.visibility)c(),A=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,m=b.firstElementChild,d=Math.ceil(b.getBoundingClientRect().width),I=Math.ceil(b.getBoundingClientRect().height),g=Math.ceil(a.getBoundingClientRect().width),e=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var n=!0,f=!0;a.style.display="none";
z=!0;g!=d?F.animate(g,d,200,function(a){a==d&&(n=!1,f||(z=!1,m.style.visibility="visible"));b.style.width=a+"px"}):(n=!1,f||(z=!1));e!=I?F.animate(e,I,200,function(a){a==I&&(f=!1,n||(z=!1,m.style.visibility="visible"));b.style.height=a+"px"}):(f=!1,n||(z=!1))}}}function c(){var a=A.lastElementChild;A.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function b(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}
function h(a,m,d){var I=document.createElement("div"),g=document.createElement("span");d&&(I.style.maxWidth=d+"px");I.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";b(g);g.innerHTML=
a;I.style.visibility="hidden";g.style.visibility="hidden";I.appendChild(g);m.appendChild(I);r.add_click_listener(m,function(){z||m==A||1!=m.style.opacity||L||(A&&"visible"==A.lastElementChild.style.visibility&&c(),A=m)})}function f(){for(var a=0,b=0;b<N.length;b++)N[b].fo&&a++;I=new Float32Array(3*a)}function q(a,b){return b.depth-a.depth}function l(a,b,m){a=a.element;B.CG&&(b=Math.floor(b),m=Math.floor(m));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+m+"px, 0px)":"webkitTransform"in
a.style?a.style.webkitTransform="translate3d("+b+"px, "+m+"px, 0px)":(a.style.left=b+"px",a.style.top=m+"px")}function x(a){for(var b=0;b<N.length;b++)if(N[b].obj==a)return!0;return!1}var y=t("__batch"),p=t("__camera"),d=t("__config"),v=t("__container"),r=t("__input"),H=t("__objects"),E=t("__obj_util"),w=t("__print"),n=t("__renderer"),C=t("__scenes"),k=t("__subscene"),F=t("__time"),u=t("__transform"),g=t("__tsr"),D=t("__vec3"),B=d.L,N=[],L=!1,A=null,G=!1,z=!1,I=new Float32Array(0),S=new Uint8Array(16),
m=new Float32Array(2),K=new Float32Array(3),U=new Float32Array(3);a.append=function(a){if(!x(a)){var m=a.anchor.fo&&!!C.Tb(C.Gh(),k.Fn),m={type:a.anchor.type,obj:a,x:0,y:0,depth:0,$l:"out",fo:m,element:null,No:null,HM:a.anchor.eT,Gk:a.anchor.Gk};switch(m.type){case "ANNOTATION":var d=m.obj;a=v.get_container();var I=H.get_meta_tags(d),d=d.name,c="",g=document.createElement("div"),z=g.cloneNode(!1),n=document.createElement("span");g.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";
z.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";g.style.visibility="hidden";I&&(c=I.description||c,d=I.title||d);n.innerHTML=d;n.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
b(n);n.style.whiteSpace="nowrap";z.appendChild(n);g.appendChild(z);c&&h(c,g,m.HM);a.appendChild(g);m.element=g;break;case "ELEMENT":if(m.element=document.getElementById(a.anchor.Gk),m.element)for(I=0;I<N.length;I++)"ELEMENT"==N[I].type&&N[I].Gk==a.anchor.Gk&&(w.warn("Anchor with the id '"+a.anchor.Gk+"' already exists, making the new anchor generic."),m.type="GENERIC");else w.warn("Anchor HTML element with the id '"+a.anchor.Gk+"' was not found, making it generic."),m.type="GENERIC"}N.push(m);f();
G||(G=!0,v.get_container().addEventListener("mouseup",e))}};a.remove=function(a){for(var b=0;b<N.length;b++){var m=N[b];if(m.obj==a){"ANNOTATION"==m.type&&(a=m,v.get_container().removeChild(a.element));N.splice(b,1);f();break}}};a.update=function(a){for(var b=0,m=N.length;m--;){var d=N[m];if(d.fo){var c=g.get_trans_view(d.obj.A.D);I.set(c,3*b++)}var e;e=d;var c=K,z=C.Mk(C.Gh());e=g.get_trans_view(e.obj.A.D);p.project_point(z,e,c);e=c;c=e[0];z=e[1];e=e[2];if(a||c!=d.x||z!=d.y||e!=d.depth){switch(d.type){case "ANNOTATION":var n=
c,f=z;l(d,n,f);break;case "ELEMENT":f=d.element.getBoundingClientRect(),n=c-f.width/2,f=z-f.height/2,l(d,n,f)}d.x=c;d.y=z;d.depth=e;d.No&&d.No(c,z,d.$l,d.obj,d.element)}}N.sort(q);for(m=0;m<N.length;m++)d=N[m],"GENERIC"!=d.type&&(d.element.style.zIndex=A==d.element?N.length:m);0<b&&(a=C.Tb(C.Gh(),k.Fn),b=a.Za[0].La[0],y.dW(b.Aa,I),k.Rc(a,b))};a.OJ=function(){for(var a=v.get_container(),b=C.get_active(),b=C.Tb(b,k.Hg),b=!(!b||!b.enable_hmd_stereo),d=N.length;d--;){var I=N[d],g=I.obj,e=g.A,z=I.x,f=
I.y,p=I.depth,h=C.Mk(C.Gh()),G=u.get_translation(g,K),h=u.get_translation(h,U),G=D.dist(G,h);(p=0>z||0>f||0>p||1<p||C.is_hidden(g)||z>=a.clientWidth||f>=a.clientHeight)||(e.Cj?(p=e.pg,e=G<e.qg?!1:p==E.Py||G<p?!0:!1):e=!0,p=!e);e=p?"out":"visible";I.fo&&"out"!=e&&(e=I,p=C.Tb(C.Gh(),k.Fn).H,G=v.Hq(e.x,e.y,m,p),n.bx(p.Ve,G[0],p.height-G[1],2,2,S),e=255<=S[0]+S[4]+S[8]+S[12]?"visible":"out"!=e.$l&&S[0]+S[4]+S[8]+S[12]?e.$l:"covered");b&&(e="out");if(e!=I.$l){switch(I.type){case "ANNOTATION":case "ELEMENT":var r=
I.element;r&&("out"==e?(r.style.visibility="hidden",r.children.length&&(r.children[0].style.visibility="hidden")):"visible"==e?(r.style.visibility="visible",r.children.length&&(r.children[0].style.visibility="visible"),r.style.opacity=1):(r.style.visibility="visible",r.style.opacity=.1,r.children.length&&(r.children[0].style.visibility="visible"),"ANNOTATION"==I.type&&1<r.children.length&&"visible"==r.lastElementChild.style.visibility&&(c(),r==A&&(A=null))))}I.$l=e;I.No&&I.No(z,f,I.$l,g,r)}}};a.attach_move_cb=
function(a,b){for(var m=0;m<N.length;m++)N[m].obj==a&&(N[m].No=b)};a.detach_move_cb=function(a){for(var b=0;b<N.length;b++)N[b].obj==a&&(N[b].No=null)};a.cleanup=function(){for(var a=0;a<N.length;a++){var b=N[a];"ANNOTATION"==b.type&&v.get_container().removeChild(b.element)}N.length=0};a.is_anchor=x;a.get_element_id=function(a){for(var b=0;b<N.length;b++)if(N[b].obj==a)return N[b].Gk;return!1};a.pause=function(){L=!0};a.resume=function(){L=!1};a.ET=function(a,b){for(var m=-1,d=0;d<N.length;d++){var I;
if(I="visible"==N[d].$l){var c=N[d];if(c.element){I=Math.round(c.element.offsetWidth)||0;var g=Math.round(c.element.offsetHeight)||0}else g=I=0;var e=c.x,c=c.y;I=a>=e&&a<=e+I&&b<c&&b>=c-g?!0:!1}if(I)if(0>m)var z=N[d].depth,m=d;else N[d].depth<z&&(m=d,z=N[d].depth)}return 0>m?null:N[m].obj}};b4w.module.__armature=function(a,t){function e(a){a=a.A;for(var b=a.mp,d=a.vw,c=0;c<b.length;c++){for(var e=b[c],f=d[c],p=0;p<f.length;p+=2)for(var h=f[p],u=f[p+1],g=0;4>g;g++)e.Pd[h+g]=a.Pd[u+g],e.De[h+g]=a.De[u+g],e.Wd[h+g]=a.Wd[u+g],e.Ie[h+g]=a.Ie[u+g];e.Bf=a.Bf}}function c(a,b,d,e){var f=a.LC,p=a.Xh,k=a.Xs,r=a.bn;r?(r=r.Xs,b?h.multiply(r,f,k):(b=y,h.invert(r,b),h.multiply(b,k,f))):b?h.copy(f,k):h.copy(k,f);f=x;h.invert(p,f);h.multiply(k,f,f);p=a.gi;d[4*p]=f[0];d[4*p+1]=f[1];d[4*p+2]=f[2];d[4*
p+3]=f[3];e[4*p]=f[4];e[4*p+1]=f[5];e[4*p+2]=f[6];e[4*p+3]=f[7];a=a.Ju;for(p=0;p<a.length;p++)k=a[p],k.uc||c(k,!0,d,e)}var b=t("__util"),h=t("__tsr"),f=t("__quat"),q=t("__mat4"),l=t("__vec3"),x=h.create(),y=h.create(),p=new Float32Array(4),d=new Float32Array(4),v=new Float32Array(4);a.Jp=function(a,d){for(var c=a.data.bones,e=a.pose.bones,f={},p=0;p<e.length;p++){var k=e[p],r=k.bone,u=r.name,g=f[u]={gi:0,fK:-1,bn:null,Ju:[],ju:[],uc:null,Hp:h.create(),LC:h.create(),Xh:h.create(),NC:h.create(),Xs:h.create(),
gy:h.create(),fy:h.create(),Ws:h.create(),MC:h.create(),ey:!1,qJ:new Float32Array(3)},u=new Float32Array(r.matrix_local),D=new Float32Array(16);q.invert(u,D);var k=new Float32Array(k.matrix_basis),v=g.qJ;l.subtract(b.f32(r.tail_local),b.f32(r.head_local),v);b.ZW(v,D,v);h.from_mat4(u,g.Xh);h.from_mat4(k,g.Ws);h.copy(g.Xh,g.Xs);h.invert(g.Xh,g.NC)}for(p=0;p<c.length;p++){u=c[p].name;k=b.keysearch("name",u,e);g=f[u];r=k.parent_recursive;g.ju.push(g);for(D=0;D<r.length;D++)k=r[D],k=k.name,k=f[k],g.ju.push(k);
r.length?(k=r[0],k=k.name,k=f[k],g.bn=k,h.invert(k.Xh,x),h.multiply(x,g.Xh,g.Hp),k.Ju.push(g)):h.copy(g.Xh,g.Hp);g.gi=p;g.name=u;h.multiply(g.Hp,g.Ws,g.LC)}d.A.fg=f};a.get_bone_tsr=function(a,b,c,e,n){var r=a.A,k=r.Bf;b=r.fg[b];var l=b.gi;a=b.Xh;var u=r.Wd,g=r.Ie,D=r.Pd,r=r.De,B=u[4*l+1],H=u[4*l+2],w=u[4*l+3],A=g[4*l+1],G=g[4*l+2],z=g[4*l+3];p[0]=(1-k)*u[4*l]+k*g[4*l];p[1]=(1-k)*B+k*A;p[2]=(1-k)*H+k*G;p[3]=(1-k)*w+k*z;d[0]=D[4*l];d[1]=D[4*l+1];d[2]=D[4*l+2];d[3]=D[4*l+3];v[0]=r[4*l];v[1]=r[4*l+1];
v[2]=r[4*l+2];v[3]=r[4*l+3];f.slerp(d,v,k,d);k=x;h.set_transcale(p,k);h.set_quat(d,k);c?(c=y,h.translate(a,b.qJ,c),h.multiply(k,c,k)):h.multiply(k,a,k);if(e){if(e=b.bn)c=y,h.invert(e.Xs,c),h.multiply(c,k,k);e=y;h.invert(b.Hp,e);h.multiply(e,k,k)}h.copy(k,n)};a.set_bone_tsr=function(a,b,d,f){var p=a.A;b=p.fg[b];var r=p.Wd,k=p.Pd;f?h.multiply(b.Hp,d,b.LC):h.copy(d,b.Xs);c(b,f,r,k);p.Bf=0;e(a)};a.KW=e;a.kW=c;a.ku=function(a,b){return b in a.A.fg}};b4w.module.__boundings=function(a,t){function e(){return{max_x:0,min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function c(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function b(){return{U:new Float32Array(3),Sa:new Float32Array(3),Ta:new Float32Array(3),Ua:new Float32Array(3)}}function h(a,b){var d=a.max_y,c=a.max_z,m=a.min_x,e=a.min_y,g=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,d);a.max_z=Math.max(b.max_z,c);a.min_x=
Math.min(b.min_x,m);a.min_y=Math.min(b.min_y,e);a.min_z=Math.min(b.min_z,g);return a}function f(a,b,d,c){var m=a[b],I=a[b+1],e=a[b+2],g=a[b],f=a[b+1],z=a[b+2];for(b+=3;b<d;b+=3)var p=a[b],n=a[b+1],k=a[b+2],m=Math.max(m,p),I=Math.max(I,n),e=Math.max(e,k),g=Math.min(g,p),f=Math.min(f,n),z=Math.min(z,k);c.max_x=m;c.max_y=I;c.max_z=e;c.min_x=g;c.min_y=f;c.min_z=z;return c}function q(a,b){b||(b=new Float32Array(24));var d=a.max_x,c=a.max_y,m=a.max_z,e=a.min_x,g=a.min_y,f=a.min_z;b[0]=e;b[1]=g;b[2]=f;b[3]=
d;b[4]=g;b[5]=f;b[6]=d;b[7]=c;b[8]=f;b[9]=e;b[10]=c;b[11]=f;b[12]=e;b[13]=g;b[14]=m;b[15]=d;b[16]=g;b[17]=m;b[18]=d;b[19]=c;b[20]=m;b[21]=e;b[22]=c;b[23]=m;return b}function l(){return{U:new Float32Array(3),ab:0}}function x(a,b){b.U[0]=a.U[0];b.U[1]=a.U[1];b.U[2]=a.U[2];b.ab=a.ab;return b}function y(){return{Sa:new Float32Array(3),Ta:new Float32Array(3),Ua:new Float32Array(3),U:new Float32Array(3)}}function p(a,b){n.copy(a.Sa,b.Sa);n.copy(a.Ta,b.Ta);n.copy(a.Ua,b.Ua);n.copy(a.U,b.U);return b}function d(a,
b,d,c){return{Sa:new Float32Array(a),Ta:new Float32Array(b),Ua:new Float32Array(d),U:new Float32Array([c[0],c[1],c[2]])}}function v(a,b){var c=C.JN(a,B),c=b?C.FN(a,c,L):k.identity(L),c=C.wQ(c,N);n.copy(a,u);n.transformMat3(u,c,u);for(var e=u[0],m=e,g=u[1],f=g,p=u[2],z=p,h,r,G,l,v=3;v<a.length;v+=3)u[0]=a[v],u[1]=a[v+1],u[2]=a[v+2],n.transformMat3(u,c,u),h=u[0],r=u[1],G=u[2],h>e&&(e=h),h<m&&(m=h),r>g&&(g=r),r<f&&(f=r),G>p&&(p=G),G<z&&(z=G);e=Math.max(e-m,.001);g=Math.max(g-f,.001);p=Math.max(p-z,.001);
z=k.identity(L);z[0]=e?1/e:2E3;z[4]=g?1/g:2E3;z[8]=p?1/p:2E3;k.transpose(c,A);u[0]=a[0];u[1]=a[1];u[2]=a[2];n.transformMat3(u,c,u);n.transformMat3(u,z,u);n.transformMat3(u,A,u);f=u[0];m=u[0];h=u[1];r=u[1];G=u[2];l=u[2];for(v=3;v<a.length;v+=3)u[0]=a[v],u[1]=a[v+1],u[2]=a[v+2],n.transformMat3(u,c,u),n.transformMat3(u,z,u),n.transformMat3(u,A,u),f=Math.max(f,u[0]),m=Math.min(m,u[0]),h=Math.max(h,u[1]),r=Math.min(r,u[1]),G=Math.max(G,u[2]),l=Math.min(l,u[2]);v=Math.sqrt((f-m)*(f-m)+(h-r)*(h-r)+(G-l)*
(G-l))/2;v=Math.min(v,1);D[0]=(f+m)/2;D[1]=(h+r)/2;D[2]=(G+l)/2;f=D;z=k.identity(L);z[0]=e;z[4]=g;z[8]=p;n.transformMat3(f,c,f);n.transformMat3(f,z,f);n.transformMat3(f,A,f);z=[c[0],c[3],c[6]];m=[c[1],c[4],c[7]];c=[c[2],c[5],c[8]];n.scale(z,e*v,z);n.scale(m,g*v,m);n.scale(c,p*v,c);return d(z,m,c,f)}function r(){return{ab:0,height:0,U:new Float32Array(3)}}function H(a,b,d){n.add(b,d,a.U);n.scale(a.U,.5,a.U);a.ab=n.distance(a.U,b);return a}var E=t("__tsr"),w=t("__util"),n=t("__vec3"),C=t("__math"),
k=t("__mat3"),F=new Float32Array(24),u=new Float32Array(3),g=new Float32Array(3),D=new Float32Array(3),B=new Float32Array(3),N=new Float32Array(9),L=new Float32Array(9),A=new Float32Array(9);a.EG=function(){return{Oe:e(),qf:y(),Pe:l()}};a.hF=function(a,b){c(a.Oe,b.Oe);p(a.qf,b.qf);x(a.Pe,b.Pe)};a.Re=e;a.ni=c;a.zu=b;a.vO=function(a,b){n.copy(a.U,b.U);n.copy(a.Sa,b.Sa);n.copy(a.Ta,b.Ta);n.copy(a.Ua,b.Ua)};a.vY=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};
a.oX=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0};a.mu=function(a){var b=e();c(a,b);return b};a.GN=function(a){var b=a.max_x-a.min_x,d=a.max_y-a.min_y;d<b&&(b=d);a=a.max_z-a.min_z;a<b&&(b=a);return b};a.Zu=h;a.fz=f;a.Wn=function(a,b,d){d||(d=e());a=q(a,F);E.transform_vectors(a,b,a);return f(a,0,a.length,d)};a.JF=q;a.n_=function(a,b,d){d||(d=e());var c=b.min_x,m=b.max_x,I=b.min_y,g=b.max_y,f=b.min_z;b=b.max_z;if(c>=a.max_x||m<=a.min_x||I>=a.max_y||g<=a.min_y||f>=a.max_z||
b<=a.min_z)return d.min_x=-.1,d.max_x=.1,d.min_y=-.1,d.max_y=.1,d.min_z=-.2,d.max_z=-.1,d;d.min_x=Math.max(a.min_x,c);d.max_x=Math.min(a.max_x,m);d.min_y=Math.max(a.min_y,I);d.max_y=Math.min(a.max_y,g);d.min_z=Math.max(a.min_z,f);d.max_z=Math.min(a.max_z,b);return d};a.s_=function(a,b,d){d||(d=e());var c=a.max_x-a.min_x,m=a.max_y-a.min_y,I=a.max_z-a.min_z;d.min_x=a.min_x-.5*(b-1)*c;d.max_x=a.max_x+.5*(b-1)*c;d.min_y=a.min_y-.5*(b-1)*m;d.max_y=a.max_y+.5*(b-1)*m;d.min_z=a.min_z-.5*(b-1)*I;d.max_z=
a.max_z+.5*(b-1)*I;return d};a.bu=function(a,b,d){d||(d=l());E.transform_vec3(a.U,b,d.U);b=E.get_scale(b);d.ab=a.ab*(0>b?-b:b);return d};a.mz=function(a,b,d){d||(d=y());E.transform_vec3(a.U,b,d.U);n.copy(a.Sa,d.Sa);n.copy(a.Ta,d.Ta);n.copy(a.Ua,d.Ua);E.transform_dir_vec3(d.Sa,b,d.Sa);E.transform_dir_vec3(d.Ta,b,d.Ta);E.transform_dir_vec3(d.Ua,b,d.Ua);return d};a.nz=function(a,d,c){c||(c=b());E.transform_vec3(a.U,d,c.U);n.copy(a.Sa,c.Sa);n.copy(a.Ta,c.Ta);n.copy(a.Ua,c.Ua);E.transform_dir_vec3(c.Sa,
d,c.Sa);E.transform_dir_vec3(c.Ta,d,c.Ta);E.transform_dir_vec3(c.Ua,d,c.Ua);return c};a.xE=function(a,b){var d=l();n.copy(b,d.U);d.ab=a;return d};a.rU=function(a,d,c,e,m){var I=b();n.copy(a,I.U);n.copy(d,I.Sa);n.copy(c,I.Ta);n.copy(e,I.Ua);n.scale(I.Sa,m[0],I.Sa);n.scale(I.Ta,m[1],I.Ta);n.scale(I.Ua,m[2],I.Ua);return I};a.vu=l;a.Ak=x;a.Yq=y;a.Xn=p;a.DY=function(a){var b=y();p(a,b);return b};a.EY=function(a){var b=l();x(a,b);return b};a.gz=d;a.pN=function(){var a;a||(a=l());n.set(0,0,0,a.U);a.ab=1E12;
return a};a.lQ=function(a,b){var d=n.subtract(b.U,a.U,n.create());0==n.length(d)&&n.set(1,0,0,d);var c=n.normalize(d,n.create()),d=n.scale(c,a.ab,n.create());n.add(d,a.U,d);var m=n.scale(c,-a.ab,n.create());n.add(m,a.U,m);var e=n.scale(c,b.ab,n.create());n.add(e,b.U,e);var g=n.scale(c,-b.ab,n.create());n.add(g,b.U,g);d=[d,m,e,g];c=n.normalize(c,n.create());m=d[0];e=d[0];for(g=1;g<d.length;g++){var f=n.dot(d[g],c);f<n.dot(m,c)&&(m=d[g]);f>n.dot(e,c)&&(e=d[g])}c=[m,e];d=c[0];c=c[1];a.U=n.scale(n.add(d,
c,n.create()),.5,n.create());a.ab=n.length(n.subtract(c,d,n.create()))/2};a.aA=function(a,b){n.add(a.U,a.Ta,u);n.add(u,a.Sa,u);n.add(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.add(a.U,a.Ta,u);n.add(u,a.Sa,u);n.subtract(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.add(a.U,a.Ta,u);n.subtract(u,a.Sa,u);n.add(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.add(a.U,a.Ta,u);n.subtract(u,a.Sa,u);n.subtract(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.subtract(a.U,a.Ta,u);n.add(u,a.Sa,u);n.add(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.subtract(a.U,a.Ta,
u);n.add(u,a.Sa,u);n.subtract(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.subtract(a.U,a.Ta,u);n.subtract(u,a.Sa,u);n.add(u,a.Ua,u);b.push(u[0],u[1],u[2]);n.subtract(a.U,a.Ta,u);n.subtract(u,a.Sa,u);n.subtract(u,a.Ua,u);b.push(u[0],u[1],u[2])};a.uu=v;a.BO=function(a){var d=b();n.copy(a.Sa,d.Sa);n.copy(a.Ta,d.Ta);n.copy(a.Ua,d.Ua);n.copy(a.U,d.U);return d};a.wu=function(a){var b=l(),d;d=n.length(a.Sa);var c=n.length(a.Ta),m=n.length(a.Ua);d=d>c?d:c;b.U=a.U;b.ab=m>d?m:d;return b};a.IG=function(a,b){var d=n.length(a.Sa),
c=n.length(a.Ta),m=n.length(a.Ua);return.75*b.ab*b.ab*b.ab>d*c*m};a.$R=a.bS=a.aS=r;a.kE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c-2*a),e=r();e.ab=a;e.height=m;e.U[0]=0;e.U[1]=0;e.U[2]=(d+c)/2;return e};a.mE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c),e=r();e.ab=a;e.height=m;e.U[0]=0;e.U[1]=0;e.U[2]=(d+c)/2;return e};a.lE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c),e=r();e.ab=a;e.height=m;e.U[0]=0;e.U[1]=0;e.U[2]=(d+c)/2;return e};a.sO=a.uO=a.tO=function(a,b){b.ab=
a.ab;b.height=a.height;b.U.set(a.U);return b};a.AY=function(a,b){return a.min_x>b.max_x||a.max_x<b.min_x?!1:a.min_y>b.max_y||a.max_y<b.min_y?!1:a.min_z>b.max_z||a.max_z<b.min_z?!1:!0};a.ZT=function(a){for(var b=0,d=0,g=e(),m=0;m<a.submeshes.length;m++){for(var p=a.submeshes[m],n=p.position,k=0;k<n.length/3;k++)var u=n[3*k],r=n[3*k+1],D=n[3*k+2],b=Math.max(Math.sqrt(u*u+r*r+D*D),b),d=Math.max(Math.sqrt(u*u+r*r),d);k=p.boundings.bb;n=f(n,0,n.length,e());k.max_x=n.max_x;k.min_x=n.min_x;k.max_y=n.max_y;
k.min_y=n.min_y;k.max_z=n.max_z;k.min_z=n.min_z;k=q(n,F);k=v(k,!1);p.boundings.be_cen=k.U;p.boundings.be_ax=[k.Sa[0],k.Ta[1],k.Ua[2]];m?h(g,n):c(n,g)}m=a.b4w_boundings.bb;m.max_x=g.max_x;m.min_x=g.min_x;m.max_y=g.max_y;m.min_y=g.min_y;m.max_z=g.max_z;m.min_z=g.min_z;m=a.b4w_boundings.bb_src;m.max_x=g.max_x;m.min_x=g.min_x;m.max_y=g.max_y;m.min_y=g.min_y;m.max_z=g.max_z;m.min_z=g.min_z;a.b4w_boundings.bs_rad=b;a.b4w_boundings.bc_rad=d;k=q(g,F);k=v(k,!1);a.b4w_boundings.be_cen=k.U;a.b4w_boundings.be_ax=
[k.Sa[0],k.Ta[1],k.Ua[2]]};a.sR=function(a){var b=a.subarray(0,3),d=a.subarray(6,9),c=a.subarray(12,15),m=a.subarray(18,21);a=n.subtract(d,b,u);n.normalize(a,a);var e=w.ER(b,d,c,g),e=n.cross(e,a,e);n.normalize(e,e);var f=n.create(),p=n.create();n.subtract(d,b,D);p[0]=n.dot(D,a);p[1]=n.dot(D,e);d=n.create();n.subtract(c,b,D);d[0]=n.dot(D,a);d[1]=n.dot(D,e);c=n.create();n.subtract(m,b,D);c[0]=n.dot(D,a);c[1]=n.dot(D,e);m=l();c=[f,p,d,c];f=H(m,c[0],c[1]);for(m=2;m<c.length;m++)if(n.distance(f.U,c[m])>
f.ab){for(var k=f,f=c,p=c[m],d=m-1,k=H(k,p,f[0]),h=1;h<=d;h++)if(n.distance(k.U,f[h])>k.ab){for(var r=k,k=f,v=p,B=f[h],A=h-1,r=H(r,v,B),F=0;F<=A;F++)if(n.distance(r.U,k[F])>r.ab){var G=v,x=B,q=k[F],y=n.subtract(x,q,D),y=n.squaredLength(y),E=n.subtract(G,q,D),L=n.squaredLength(E),E=n.subtract(G,x,D),W=n.squaredLength(E),E=y*(L+W-y),C=L*(W+y-L),y=W*(y+L-W),L=E+C+y;n.copy(G,r.U);n.scale(r.U,E/L,r.U);n.scaleAndAdd(r.U,x,C/L,r.U);n.scaleAndAdd(r.U,q,y/L,r.U);r.ab=n.distance(r.U,G)}k=r}f=k}m=f;a=n.scale(a,
m.U[0],D);n.scaleAndAdd(a,e,m.U[1],a);n.add(a,b,m.U);return m}};b4w.module.__compat=function(a,t){function e(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function c(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function b(){return!window.ActiveXObject&&"ActiveXObject"in window}var h=t("__config"),f=t("__debug"),q=t("__extensions"),
l=t("__print"),x=t("__renderer"),y="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");a.AD=256;var p=h.Zl,d=h.L,v=h.qm,r=h.context,H=h.zh,E=h.ka,w=h.N,n=h.be;a.UP=function(a){a.getError()==a.INVALID_ENUM&&l.warn("Possible Tegra invalid enum issue detected, ignoring")};a.BI=function(C,k){function F(a){k&&l.warn(a)}H.cT=C.getParameter(C.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
H.$A=C.getParameter(C.MAX_FRAGMENT_UNIFORM_VECTORS);H.dB=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS);H.tw=C.getParameter(C.MAX_VARYING_VECTORS);H.eB=C.getParameter(C.MAX_VERTEX_ATTRIBS);H.vH=C.getParameter(C.MAX_VERTEX_TEXTURE_IMAGE_UNITS);H.uw=C.getParameter(C.MAX_VERTEX_UNIFORM_VECTORS);H.rg=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE);H.aB=C.getParameter(C.MAX_RENDERBUFFER_SIZE);H.dc=C.getParameter(C.MAX_TEXTURE_SIZE);H.fB=C.getParameter(C.MAX_VIEWPORT_DIMS);var u=q.get_renderer_info();if(u){var g=
C.getParameter(u.UNMASKED_VENDOR_WEBGL),D=C.getParameter(u.UNMASKED_RENDERER_WEBGL);-1<g.indexOf("Qualcomm")&&-1<D.indexOf("330")&&(e("Chrome")||e("Firefox"))&&(F("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),d.Gb=!1,d.NE=!0)}H.eo=d.Gb?24:16;d.Gb&&!v.enabled&&(d.Sq=!0);d.Gb?(d.ec=Math.min(d.ec,C.getParameter(C.MAX_SAMPLES)),e("Firefox")&&(F("Firefox and WebGL 2 detected, applying framebuffer hack."),d.HE=!0),e("Windows")&&e("Chrome")&&(F("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),
d.ec=1)):d.ec=1;e("Firefox")&&"NONE"!==d.stereo&&(F("Firefox and Stereo rendering detected, disable texture reusage"),d.LF=!0);if(d.Gb&&f.bO()||e("Firefox"))F("Firefox detected, disabling multisample"),d.ec=1;e("Mac OS X")&&e("Chrome/60")&&(F("macOS and Chrome 60 detected, disabling multisample"),d.ec=1);x.PU();var B=!!q.jR();e("Firefox/28.0")&&(e("Linux")||e("Macintosh"))&&(F("Firefox 28 detected, applying depth hack"),B=!1);e("Windows Phone")||(e("iPad")||e("iPhone")?(F("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),
r.alpha||(d.background_color[3]=1),d.Uv=!0,d.eK=!0,d.smaa=!1,d.ssao=!1,d.GA=!0,q.kG()&&n.Zw&&(d.km="pvr")):e("Mac OS X")&&e("Safari")&&!e("Chrome")&&(F("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),d.pI=!0,E.gE=!0,E.RE=!0));e("Windows")&&(e("Chrome/40")||e("Firefox/33")||e("Firefox/34")||e("Firefox/35")||e("Firefox/36"))&&(F("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),
d.xz=!0);e("Chrome")&&!c()&&h.LG()&&(F('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),d.OE=!0);e("Mac OS X")&&(d.qw=!0,F("OS X detected, applying shadows hack."));c()&&(F("Mobile detected, applying various hacks for video textures."),d.is_mobile_device=!0,e("iPad")||e("iPhone")||e("Windows Phone")||(F("Mobile (not iOS) detected, disable playback rate for video textures."),E.AF=!0));e("iPad")&&(F('iPad detected, use "autoplay" hack for video textures.'),
d.HG=!0);(e("Firefox/35.0")||e("Firefox/36.0"))&&e("Windows")&&(F("Windows/Firefox 35/36 detected, applying shadows slink hack"),d.TI=!0);if(e("iPhone")||b())F("iPhone or IE11 detected. Enable sequential video fallback for video textures."),d.Ds=!0;10>H.tw&&(F("Not enough varyings, disable shadows on blend objects"),d.Rz=!0);e("Windows Phone")&&(F("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),d.debug_view=!1,d.glow_materials=!1,
d.ssao=!1,d.smaa=!1,d.shadows=!1,d.reflections=!1,d.refractions=!1,d.$H=!1);if(e("UCBrowser")||e("Chrome")&&e("Nexus")&&d.is_mobile_device)F("Mobile Nexus Chrome or UCBrowser detected, disable workers."),w.wn=!1;e("Firefox")&&(F("Firefox detected, disabling workers"),w.wn=!1);if(b()||e("Edge"))F("IE11 or Edge detected, disabling workers"),w.wn=!1;e("Chrome")&&e("Linux")&&(F("Chrome and Linux detected, disabling wasm physics."),w.it=!1);if(u){g=C.getParameter(u.UNMASKED_VENDOR_WEBGL);D=C.getParameter(u.UNMASKED_RENDERER_WEBGL);
u=/\b4\d{2}\b/;e("Chrome")&&-1<D.indexOf("Mali-T720")&&(F('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),d.qH=!0);-1<D.indexOf("AMD")&&e("Windows")&&e("Firefox")&&(F("AMD, Windows and Firefox detected, disabling depth textures."),B=!1);-1<g.indexOf("ARM")&&u.test(D)&&(F("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),B=!1,p.QF=!0,d.pH=!0);-1<g.indexOf("ARM")&&-1<D.indexOf("Mali-T604")&&(F("ARM Mali-T604 detected, disabling shadows."),
d.shadows=!1);-1<g.indexOf("ARM")&&-1<D.indexOf("Mali-T760")&&(F("ARM Mali-T760 detected, disabling SSAO."),d.ssao=!1,d.tx=!0,d.Gb&&(d.ec=1,F("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<g.indexOf("ARM")&&-1<D.indexOf("Mali-T720")&&(F("ARM Mali-T720 detected, disabling depth textures."),B=!1,d.Gb&&(d.ec=1,F("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));-1<g.indexOf("Qualcomm")&&-1<D.indexOf("Adreno")&&(F("Qualcomm Adreno detected, applying shader constants hack."),
d.hC=!0,-1<D.indexOf("420")&&(F("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),H.dc=Math.min(H.dc,4096),H.rg=Math.min(H.rg,4096)),e("Chrome")&&(D.match(/4../)||D.match(/5../))&&(F("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),d.ec=1));-1<g.indexOf("NVIDIA")&&-1<D.indexOf("Tegra 3")&&(F("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),d.OF=!0);e("Windows")&&e("Chrome")&&!e("Edge")&&(D.match(/NVIDIA GeForce 8..0/)||
D.match(/NVIDIA GeForce 9..0/)||D.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(F("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),H.rg=a.AD,d.xs=!0);-1<D.indexOf("PowerVR")&&-1<D.indexOf("SGX")&&(F("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),d.xs=!0,d.tx=!0,d.shadows=!1);e("Windows")&&-1<D.indexOf("Direct3D9")&&(F("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),
d.sF=!0,d.xs=!0,d.kI=!0);g="";for(u=0;u<y.length;u++)if(-1<D.indexOf(y[u])){g=y[u];break}g&&(F("Architecture "+g+" detected. Blending between frames and shadows on blend objects will be disabled."),d.tx=!0,d.Rz=!0)}0==H.vH&&(F("Vertex textures are not allowed. Disabling vertex textures"),d.Kt=!1);B||(d.oo=!1,d.Nc=!1,d.water_dynamic=!1,d.shore_smoothing=!1,d.jp=!1,d.smaa=!1,d.ssao=!1,d.zs=!0);d.RJ=!!q.lG()||"pvr"==d.km;d.Iu=B;if(C.getShaderPrecisionFormat)var N=C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,
C.HIGH_FLOAT);C.getShaderPrecisionFormat&&0!==N.precision||(d.precision="mediump");if(b()&&e("Touch")||e("Edge"))F("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),d.Qv=!0;if(b()||e("Edge"))d.CG=!0,d.BG=!0,d.xs=!0;c()&&e("Firefox")&&(l.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),d.hB=!0,H.dc=Math.min(H.dc,4096),H.rg=Math.min(H.rg,4096));D=!!q.iA();d.bz=D;D=!!q.nG();
d.Xx=D};a.vz=e;a.detect_mobile=c;a.$M=function(){e("Firefox/35.0")&&e("Windows")&&(l.warn("Windows/Firefox 35 detected, forcing context's alpha"),h.context.alpha=!0)};a.is_ie11=b};b4w.module.__constraints=function(a,t){function e(a){return{type:a,Ra:null,target:null,Np:!1,qd:null,Ea:null,vi:null,axes:null,uJ:null,pe:null,ZJ:!1,influence:0,vk:"",YI:0,QE:0,SE:0,TE:0,PE:0,Sz:0,dist_max:0,gw:!1,Rr:0,cy:!1,Ts:0,distance:0,hor_units:"",vert_units:""}}function c(a,d){a.uc&&a.uc.Ra&&b(a.uc.Ra,a);if(d.Ra){var c=d.Ra;-1==c.te.indexOf(a)?c.te.push(a):C.K("Descendant object override is forbidden")}a.uc=d}function b(a,b){var d=a.te.indexOf(b);-1!=d?a.te.splice(d,1):C.K("No descendant object")}
function h(a,b,g,m,f,p){var I=e(3);I.Ra=b;I.uJ=new Float32Array(g);I.pe=new Float32Array(m);I.ZJ=f;I.qd=new Float32Array(a.A.D);I.influence=p;c(a,I);d(a,I,0)}function f(a,b,g,m,f,p){var I=e(8);I.Ra=b;I.Ea=n.create();n.set_trans(g,I.Ea);I.axes=new Float32Array(m);I.influence=p;I.Np=f;I.qd=new Float32Array(a.A.D);c(a,I);d(a,I,0)}function q(a,b,g,m,f){var I=e(9);I.Ra=b;b=n.ub(a.A.D,L);I.vi=C.quat_to_euler(b,new Float32Array(3));I.axes=new Float32Array(g);I.influence=f;I.Np=m;I.qd=new Float32Array(a.A.D);
c(a,I);d(a,I,0)}function l(a,b,g){var m=e(11);m.Ra=b;m.Ea=n.create();n.copy(a.A.D,m.Ea);m.qd=new Float32Array(a.A.D);m.influence=g;c(a,m);d(a,m,0)}function x(a,b,g){var m=e(13);m.Ra=b;m.Ea=new Float32Array(g);c(a,m);d(a,m,0)}function y(a,b,g,m){var I=e(14);I.Ra=b;I.vk=g;I.Ea=new Float32Array(m);c(a,I);d(a,I,0)}function p(a,b,g){var m=e(17);m.Ra=b;m.qd=new Float32Array(a.A.D);m.Ea=n.create();C.ge(g.right)?(m.gw=!1,m.Rr=g.right):C.ge(g.left)?(m.gw=!0,m.Rr=g.left):(m.gw=!0,m.Rr=0);C.ge(g.bottom)?(m.cy=
!1,m.Ts=g.bottom):C.ge(g.top)?(m.cy=!0,m.Ts=g.top):(m.cy=!0,m.Ts=0);C.ge(g.distance)?m.distance=g.distance:m.distance=0;b=C.ge(g.rotation)?new Float32Array(g.rotation):k.create();n.set_quat(b,m.Ea);C.ge(g.hor_units)?m.hor_units=g.hor_units:m.hor_units="widths";C.ge(g.vert_units)?m.vert_units=g.vert_units:m.vert_units="heights";c(a,m);d(a,m,0)}function d(a,b,d){switch(b.type){case 1:n.multiply(b.Ra.A.D,b.Ea,a.A.D);break;case 12:var m=n.get_trans_view(a.A.D),c=n.get_quat_view(a.A.D),e=n.Mb(b.Ea,D),
f=b.Ra.A.D;d=n.get_quat_view(b.Ra.A.D);k.multiply(k.invert(b.CB,b.CB),c,c);k.multiply(d,c,c);n.transform_vec3(e,f,m);k.copy(d,b.CB);m=n.get_quat_view(a.A.D);c=n.get_quat_view(b.Ra.A.D);f=n.ub(b.Ea,L);c=k.multiply(c,f,N);c=w.jA(c,u);f=w.jA(m,g);C.uU(m,a.A.pe,C.fm(f[0],c[0]+b.SE,c[0]+b.QE),C.fm(f[1],c[1]+b.PE,c[1]+b.TE),m);break;case 15:var m=n.get_trans_view(a.A.D),c=n.get_quat_view(a.A.D),f=b.Ra.A.D,p=n.get_trans_view(f),I=b.YI,h=D,r=k.copy(c,N),e=n.Mb(b.Ea,B);n.transform_vec3(e,f,h);C.smooth_v(h,
m,d,I,m);C.ax(m,r,p,C.AXIS_MZ);C.XI(r,c,d,.16*I,c);break;case 2:c=n.get_quat_view(a.A.D);f=A;e=n.Mb(b.Ea,B);p=n.get_scale(b.Ea);m=n.ub(b.Ea,N);E.get_bone_tsr(b.Ra,b.vk,!0,!1,f);n.multiply(b.Ra.A.D,f,f);c[0]=f[4];c[1]=f[5];c[2]=f[6];c[3]=f[7];k.multiply(c,m,c);n.set_scale(p*f[3],a.A.D);m=n.get_trans_view(a.A.D);n.transform_vec3(e,f,m);break;case 3:m=n.get_trans_view(a.A.D);c=n.get_quat_view(a.A.D);e=n.get_trans_view(b.Ra.A.D);f=b.influence;b.ZJ?(p=n.ub(b.Ra.A.D,N),p=F.transformQuat(C.AXIS_Z,p,D)):
p=C.AXIS_Z;C.ax(m,c,e,b.uJ);e=F.subtract(e,m,B);F.normalize(e,e);C.VT(c,b.pe,p,e);e=n.ub(b.qd,N);k.slerp(e,c,f,c);n.set_trans(m,b.qd);break;case 5:m=n.get_trans_view(a.A.D);c=n.get_quat_view(a.A.D);e=n.get_trans_view(b.Ra.A.D);C.ax(m,c,e,C.AXIS_MZ);c=F.dist(m,e);if(c=c>b.dist_max?c-b.dist_max:c<b.Sz?c-b.Sz:0)F.sub(e,m,D),F.normalize(D,D),F.scale(D,c,D),F.add(m,D,m);break;case 7:f=b.Ra.A.D;m=n.get_trans_view(a.A.D);e=n.Mb(b.Ea,D);n.transform_vec3(e,f,m);n.set_quat(n.get_quat_view(a.A.D),b.qd);break;
case 8:p=n.get_trans_view(b.Ra.A.D);m=n.get_trans_view(a.A.D);c=b.axes;d=n.Mb(b.Ea,D);e=F.set(0,0,0,B);b.Np&&F.add(e,d,e);f=b.influence;c[0]&&(m[0]=(1-f)*d[0]+f*(C.sign(c[0])*p[0]+e[0]));c[1]&&(m[1]=(1-f)*d[1]+f*(C.sign(c[1])*p[1]+e[1]));c[2]&&(m[2]=(1-f)*d[2]+f*(C.sign(c[2])*p[2]+e[2]));n.set_quat(n.get_quat_view(a.A.D),b.qd);break;case 9:c=b.axes;d=n.ub(b.Ra.A.D,N);m=C.WT(d,b.vi,B);C.ZE(m,b.vi);c[0]?(b.Np&&(f=F.set(b.vi[0],0,0,D),C.WB(m,f,m)),m[0]*=C.sign(c[0])):m[0]=b.vi[0];c[1]?(b.Np&&(f=F.set(0,
b.vi[1],0,D),C.WB(m,f,m)),m[1]*=C.sign(c[1])):m[1]=b.vi[1];c[2]?(b.Np&&(f=F.set(0,0,b.vi[2],D),C.WB(m,f,m)),m[2]*=C.sign(c[2])):m[2]=b.vi[2];C.ZE(m,b.vi);f=b.influence;m=C.euler_to_quat(m,N);e=n.ub(b.qd,L);k.slerp(e,m,f,n.get_quat_view(a.A.D));n.set_trans(n.get_trans_view(a.A.D),b.qd);break;case 11:f=b.influence;p=n.Mb(b.Ra.A.D,D);d=n.ub(b.Ra.A.D,N);m=n.Mb(b.Ea,B);e=n.ub(b.Ea,L);C.Zt(m,p,f,n.get_trans_view(a.A.D));k.slerp(e,d,f,n.get_quat_view(a.A.D));n.set_trans(n.get_trans_view(a.A.D),b.qd);break;
case 16:c=n.get_quat_view(a.A.D);f=b.Ra.A.D;d=n.get_quat_view(b.Ra.A.D);e=n.Mb(b.Ea,B);m=n.ub(b.Ea,N);k.multiply(d,m,c);m=n.get_trans_view(a.A.D);n.transform_vec3(e,f,m);break;case 13:n.multiply(b.Ra.A.D,b.Ea,a.A.D);break;case 14:m=b.Ea;f=A;E.get_bone_tsr(b.Ra,b.vk,!0,!1,f);n.multiply(b.Ra.A.D,f,f);n.multiply(f,m,a.A.D);break;case 17:c=b.Ra,f=w.mR(c),m=n.get_trans_view(a.A.D),d=w.pv(f,"LEFT"),I=w.pv(f,"RIGHT"),e=w.pv(f,"TOP"),p=w.pv(f,"BOTTOM"),h="heights"==b.hor_units?e-p:I-d,m[0]=b.gw?d+h*b.Rr:
I-h*b.Rr,d="heights"==b.vert_units?e-p:I-d,m[1]=b.cy?e-d*b.Ts:p+d*b.Ts,w.rS(f)?m[2]=-b.distance:(m[2]=-1,F.normalize(m,m),F.scale(m,b.distance/Math.abs(m[2]),m)),n.transform_dir_vec3(m,c.A.D,m),f=n.get_trans_view(c.A.D),F.add(f,m,m),e=n.get_quat_view(a.A.D),c=n.get_quat_view(c.A.D),m=n.ub(b.Ea,L),k.multiply(c,m,e)}"CAMERA"==a.A.type&&a.A.nb!=w.MS_STATIC&&(m=a.A.pe,12==b.type&&(d=n.get_quat_view(b.Ra.A.D),m=F.transformQuat(m,d,G)),w.FJ(a),w.correct_up(a,m))}function v(a,b){switch(b.type){case 18:var d=
b.target.A.D,c=A;n.invert(a.A.D,c);n.multiply(c,d,c);E.set_bone_tsr(a,b.vk,c,!1)}a.qB=!0}function r(a,b){for(var d=0;d<a.length;d++){var c=a[d];if(!r(c.te,b)||c.name==b.name)return!1}return!0}var H=t("__physics"),E=t("__armature"),w=t("__camera"),n=t("__tsr"),C=t("__util"),k=t("__quat"),F=t("__vec3");a.xX=1;a.wX=2;a.BX=3;a.tX=5;a.yX=7;a.sX=8;a.vX=12;a.qX=13;a.rX=14;a.uX=15;a.zX=16;a.AX=17;a.pX=18;var u=new Float32Array(2),g=new Float32Array(2),D=new Float32Array(3),B=new Float32Array(3),N=new Float32Array(4),
L=new Float32Array(4),A=n.create(),G=new Float32Array(3);a.$D=function(a,b,g,m,f){var p=e(1);p.Ra=b;p.Ea=n.create();m=m?m:k.create();n.set_trans(g,p.Ea);n.set_scale(f,p.Ea);n.set_quat(m,p.Ea);p.qd=new Float32Array(a.A.D);c(a,p);d(a,p,0)};a.UM=function(a,b,g,m,f,p){var I=e(2);I.Ra=b;I.vk=g;I.qd=new Float32Array(a.A.D);I.Ea=n.create();n.set_trans(new Float32Array(m),I.Ea);n.set_quat(new Float32Array(f),I.Ea);n.set_scale(p,I.Ea);c(a,I);d(a,I,0)};a.SM=function(a,b,g,m,f,p,u,h){var I=e(12),r=n.get_quat_view(a.A.D),
R=n.get_quat_view(b.A.D);m?(k.copy(m,r),k.multiply(R,r,r)):m=k.create();I.Ra=b;I.Ea=n.create();n.set_trans(g,I.Ea);n.set_quat(m,I.Ea);I.CB=new Float32Array(R);I.QE=C.angle_wrap_0_2pi(f);I.SE=C.angle_wrap_0_2pi(p);I.TE=C.angle_wrap_periodic(u,-Math.PI,Math.PI);I.PE=C.angle_wrap_periodic(h,-Math.PI,Math.PI);I.qd=new Float32Array(a.A.D);c(a,I);d(a,I,0)};a.RM=function(a,b,g,m){var f=e(15);f.Ra=b;f.YI=m;f.qd=new Float32Array(a.A.D);f.Ea=n.create();n.set_trans(new Float32Array(g),f.Ea);c(a,f);d(a,f,0)};
a.WM=function(a,b,g,m){var f=e(16);f.Ra=b;f.qd=new Float32Array(a.A.D);f.Ea=n.create();n.set_trans(new Float32Array(g),f.Ea);n.set_quat(new Float32Array(m),f.Ea);n.set_scale(1,f.Ea);c(a,f);d(a,f,0)};a.ZZ=b;a.XM=h;a.OM=function(a,b,g,m){var f=e(5);f.Ra=b;f.Sz=g;f.dist_max=m;f.qd=new Float32Array(a.A.D);c(a,f);d(a,f,0)};a.VM=function(a,b,g){var m=e(7);m.Ra=b;m.Ea=n.create();m.qd=new Float32Array(a.A.D);n.set_trans(new Float32Array(g),m.Ea);c(a,m);d(a,m,0)};a.JM=f;a.KM=q;a.LM=l;a.lY=x;a.mY=y;a.append_stiff_viewport=
p;a.oW=function(a,b){a.uc&&d(a,a.uc,b)};a.jW=function(a,b){var d=a.A.fg[b];d.uc&&v(a,d.uc)};a.WN=function(a){return a.uc?!0:!1};a.remove=function(a,d){a.uc.Ra&&b(a.uc.Ra,a);d&&n.copy(a.uc.qd,a.A.D);a.uc=null};a.pZ=function(a){return a.uc?a.uc.type:null};a.Wg=function(a){a=a.uc;return!a||13!=a.type&&14!=a.type?!1:!0};a.ov=function(a){if((a=a.uc)&&13==a.type)return a.Ra.A.D;if(a&&14==a.type){var b=A;E.get_bone_tsr(a.Ra,a.vk,!0,!1,b);n.multiply(a.Ra.A.D,b,b);return b}return null};a.Ug=function(a){a=
a.uc;return!a||13!=a.type&&14!=a.type?null:a.Ea};a.RT=function(a,b){for(var d=b.A,c=0;c<a.constraints.length;c++){var g=a.constraints[c],k=g.type;if(g.target){var I=g.target.Ha;if("COPY_LOCATION"==k){var k=new Float32Array(n.get_trans_view(b.A.D)),u=new Float32Array(g.axes);f(b,I,k,u,g.use_offset,g.influence)}else if("COPY_ROTATION"==k)u=new Float32Array(g.axes),q(b,I,u,g.use_offset,g.influence);else if("COPY_TRANSFORMS"==k)l(b,I,g.influence);else if("TRACK_TO"==k){k=g.track_axis;if("TRACK_Y"==k)var r=
C.AXIS_Y;else"TRACK_NEGATIVE_Y"==k?r=C.AXIS_MY:"TRACK_X"==k?r=C.AXIS_X:"TRACK_NEGATIVE_X"==k?r=C.AXIS_MX:"TRACK_Z"==k?r=C.AXIS_Z:"TRACK_NEGATIVE_Z"==k&&(r=C.AXIS_MZ);k=g.up_axis;if("UP_X"==k)var D=C.AXIS_X;else"UP_Y"==k?D=C.AXIS_Y:"UP_Z"==k&&(D=C.AXIS_Z);h(b,I,r,D,g.use_target_z,g.influence)}}}if(b.parent){!b.kl&&b.od.dt&&b.parent.od.dt&&(b.Mp=!1);g=!1;for(c=0;c<b.S.length;c++)if(b.S[c].kb.Ac){g=!0;break}if(g&&H.RR(b))c=b.kl?n.copy(d.D,n.create()):d.D,n.multiply(b.parent.A.D,c,d.D);else if(b.kl||
!b.cs)if(c=n.copy(d.D,n.create()),b.vy&&"CAMERA"==b.parent.type){c={distance:b.vy.distance,rotation:n.get_quat_view(c)};switch(b.vy.EM){case "TOP_LEFT":c.top=0;c.left=0;break;case "TOP":c.top=0;c.left=.5;break;case "TOP_RIGHT":c.top=0;c.right=0;break;case "LEFT":c.top=.5;c.left=0;break;case "CENTER":c.top=.5;c.left=.5;break;case "RIGHT":c.top=.5;c.right=0;break;case "BOTTOM_LEFT":c.bottom=0;c.left=0;break;case "BOTTOM":c.bottom=0;c.left=.5;break;case "BOTTOM_RIGHT":c.bottom=0,c.right=0}p(b,b.parent,
c)}else x(b,b.parent,c);else c=n.copy(d.D,n.create()),y(b,b.parent,b.cs,c)}if("ARMATURE"==b.type)for(d=a.pose.bones,c=0;c<d.length;c++)if(g=d[c],r=g.constraints)for(D=0;D<r.length;D++)if(k=r[D],"COPY_TRANSFORMS"==k.type&&!k.subtarget&&!k.mute){var I=k.target.Ha,k=b,u=I,B=C.Vy,A=C.wt,I=e(18);I.vk=g.name;I.target=u;I.Ea=n.create();n.set_trans(new Float32Array(B),I.Ea);n.set_quat(new Float32Array(A),I.Ea);n.set_scale(1,I.Ea);for(var u=k,B=I,A=B.target,F=B.vk,z=u.A.fg[F],w=A.Dz,G=0;G<w;G++){var E=w[G];
if(E[0]==u&&E[1]==F){w.splice(G,1);break}}A.Dz.push([u,F]);z.uc=B;v(k,I)}};a.xh=function(a,b){return r(a.te,b)};a.yh=function(a,b){return a.name!=b.name}};b4w.module.__container=function(a,t){var e,c,b;function h(){u.getBoundingClientRect()}function f(a,b,d,c){C.BG?(d=d.getBoundingClientRect(),c[0]=a-d.left,c[1]=b-d.top):(B.clientX=a,B.clientY=b,B.view=window,a=new MouseEvent("b4w_convert",B),d.dispatchEvent(a),c[0]=a.offsetX,c[1]=a.offsetY);return c}function q(a,b,d,c){a.style.width=d+"px";a.style.height=c+"px";b&&(b.style.width=d+"px",b.style.height=c+"px")}function l(a,b,c){var e=u,f=g;c&&q(e,f,a,b);f&&(f.width=a,f.height=b,d.qn());c=Math.floor(a*
C.canvas_resolution_factor);b=Math.floor(b*C.canvas_resolution_factor);e.width=c;e.height=b;var f=Math.min(F.drawingBufferWidth,k.aB,k.fB[0]),I=Math.min(F.drawingBufferHeight,k.aB,k.fB[1]);if(c>f||b>I)v.warn("Canvas size exceeds platform limits, downscaling"),f=Math.min(f/c,f/b),c*=f,b*=f;e.width=Math.floor(c);e.height=Math.floor(b);r.KI(e.width,e.height,a?c/a:1);r.Pa()&&w.V(r.get_active().aj);p.xW(e.width,e.height);p.is_primary_loaded()&&(x.update(),r.update(E.get_timeline(),0),x.OJ())}var x=t("__anchors"),
y=t("__config"),p=t("__data"),d=t("__hud"),v=t("__print"),r=t("__scenes"),H=t("__subscene"),E=t("__time"),w=t("__transform"),n=t("__util"),C=y.L,k=y.zh,F=null,u=null,g=null,D=null,B={clientX:0,clientY:0};c=e=0;b=1;a.yg=function(a){F=a};a.get_canvas=function(){return u};a.get_canvas_hud=function(){return g};a.get_container=function(){return D};a.init=function(a,b){a&&a.parentNode?(u=a,g=b,D=a.parentNode):n.K("canvas container is not available")};a.insert_to_container=function(a,b){b=b||"LAST";switch(b){case "FIRST":D.insertBefore(a,
D.firstElementChild);break;case "JUST_BEFORE_CANVAS":D.insertBefore(a,u);break;case "JUST_AFTER_CANVAS":u.nextElementSibling?D.insertBefore(a,u.nextElementSibling):D.appendChild(a,u);break;case "LAST":D.appendChild(a,u);break;default:v.error(b+" invalid stack order")}};a.qG=function(){return e};a.pG=function(){return c};a.set_canvas_offsets=function(){};a.update_canvas_offsets=h;a.nV=function(a,d,g){e=a;c=d;b=g;h()};a.force_offsets_updating=function(){};a.client_to_canvas_coords=function(a,b,d){return f(a,
b,u,d)};a.get_coords_target_space=function(a,b,d){a.constructor==MouseEvent?(d[0]=a.offsetX,d[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches,f(b[0].clientX,b[0].clientY,a.target,d)):(d[0]=-1,d[1]=-1);return d};a.client_to_element_coords=f;a.Hq=function(a,d,c,g){c||(c=new Float32Array(2));c[0]=a*b;c[1]=d*b;g&&(a=g.width/e,c[0]*=a,c[1]*=a);return c};a.cX=function(a,d,c,g){c||(c=new Float32Array(2));c[0]=a/b;c[1]=d/b;g&&(a=g.width/e,c[0]/=a,
c[1]/=a)};a.MG=function(b){return b&&b.parentNode?b.parentNode==D?!0:a.MG(b.parentNode):!1};a.RG=function(){return C.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};a.zQ=function(a){var b=document.getElementsByTagName("script");a=n.Ii(a);for(var d=0;d<b.length;d++)if(b[d].src==a)return b[d];return null};a.resize=l;a.resize_to_container=function(a){var b=D,d=u,c=b.clientWidth,b=b.clientHeight;if(a||c!=d.clientWidth||b!=d.clientHeight){a=d.width;d=d.height;q(u,g,c,b);if(r.Pa()){var e=r.get_active();
if((e=r.Tb(e,H.Hg))&&e.enable_hmd_stereo){l(a,d,!1);return}}l(c,b,!1)}};a.reset=function(){D=g=u=F=null}};b4w.module.__controls=function(a,t){function e(a,b){b||(b=v.get_container());return{type:a,value:0,da:null,element:b,Va:!1,key:0,Jb:"",ji:!1,Bz:null,Az:function(){},zz:null,YE:function(){},Qi:null,from:new Float32Array(3),to:new Float32Array(3),JG:!1,Rv:!1,rs:0,cI:function(){},axis:"",Dg:0,Fp:new Float32Array(3),$w:new Float32Array(4),threshold:0,aI:new Float32Array(4),Ut:0,Tt:0,nI:0,Vt:0,wg:0,repeat:!1,GF:!1,gamepad_id:0,position:u.create(),orientation:n.create(),callback:function(){}}}function c(a){function b(){return{zk:new Float32Array(2),
Ho:!0,obj:null,identifier:-1,Si:0}}a||(a=v.get_container());for(var d=0;d<G.length;d++){var c=G[d];if(a==c.element)return c}c={element:a,Lr:!0,Ef:0,MA:!0,zw:0,Aw:0,Wm:0,Xm:0,hs:0,ks:0,Vh:new Float32Array(2),He:new Float32Array(2),Wh:new Float32Array(2),cf:new Float32Array(2),dy:0,JC:0,tJ:0,zf:new Uint8Array(256),By:0,uA:null,Hi:b(),fk:Array(10),NA:!1,sG:n.create(),Hv:0,Gv:0,Fv:0,xA:0,wA:0,Ev:Infinity,yB:null,xB:null,mB:null,iB:null,kB:null,HC:null,GC:null,lB:null,jB:null,HB:null,OZ:null,IC:null,FC:null,
EC:null,Rj:{}};for(d=0;10>d;++d)c.fk[d]=b();c.yB=function(a){c.NA||(r.NR(a,c.sG),c.NA=!0)};c.xB=function(a){a=u.copy(a,S);c.Fv=a[0];c.Gv=a[1];c.Hv=a[2];Infinity==c.Ev&&(c.Ev=a[0],c.wA=a[1],c.xA=a[2])};c.mB=function(a){c.By+=a*g.jT};c.iB=function(a){var b=r.get_device_by_type_element(r.DEVICE_MOUSE,c.element),b=r.get_vector_param(b,r.MOUSE_LOCATION,z);c.zw=b[0];c.Aw=b[1];c.Wm=b[0];c.Xm=b[1];if(3==c.Ef||0==c.Ef)c.Ef=1;c.which=a};c.kB=function(){var a=r.get_device_by_type_element(r.DEVICE_MOUSE,c.element),
a=r.get_vector_param(a,r.MOUSE_LOCATION,z),a=v.client_to_canvas_coords(a[0],a[1],z);c.Hi.Ho=!1;c.Hi.zk[0]=a[0];c.Hi.zk[1]=a[1]};c.HC=function(a){for(var b=0;b<a.length;++b){for(var d=a[b],m=null,e=null,g=0;g<c.fk.length;g++){var f=c.fk[g],p=3==f.Si||0==f.Si;if(f.identifier==d.identifier){p&&(e=f);break}else!m&&p&&(m=f,m.identifier=d.identifier)}if(d=e||m)m=v.client_to_canvas_coords(a[b].clientX,a[b].clientY,z),d.Ho=!1,d.Si=1,d.zk[0]=m[0],d.zk[1]=m[1]}};c.GC=function(a){for(var b=0;b<c.fk.length;++b){for(var d=
c.fk[b],m=!1,e=0;e<a.length;++e)if(a[e].identifier==d.identifier){m=!0;break}m||(0!=d.Si&&(d.Si=3),d.obj=null)}};c.lB=function(a){var b=r.get_device_by_type_element(r.DEVICE_MOUSE,c.element),b=r.get_vector_param(b,r.MOUSE_LOCATION,z);c.zw=b[0];c.Aw=b[1];c.Wm=b[0];c.Xm=b[1];0!=c.Ef&&(c.Ef=3);c.which=a};c.jB=function(a){D.Qv&&0==c.Ef||(c.Wm=a[0],c.Xm=a[1])};c.HB=function(a){c.hs+=a[0];c.ks+=a[1]};c.XG=function(a){2!=c.zf[a]&&(c.zf[a]=1,c.Lr=!1)};c.ZG=function(){for(var a=0;a<c.zf.length;a++)0!=c.zf[a]&&
(c.zf[a]=3,c.Lr=!1)};c.$G=function(a){c.Lr=!1;c.zf[a]=3};c.IC=function(a){c.MA=!1;if(1==a.length)c.Vh[0]=a[0].clientX,c.Vh[1]=-1,c.Wh[0]=a[0].clientY,c.Wh[1]=-1;else if(1<a.length){c.dy=c.JC=y(a);c.Vh[0]=a[0].clientX;c.Vh[1]=a[1].clientX;c.Wh[0]=a[0].clientY;c.Wh[1]=a[1].clientY;var b=a[0];a=a[1];c.tJ=Math.atan2(b.clientY-a.clientY,b.clientX-a.clientX)}c.He.set(c.Vh);c.cf.set(c.Wh)};c.FC=function(a){1===a.length?(c.He[0]=a[0].clientX,c.He[1]=-1,c.cf[0]=a[0].clientY,c.cf[1]=-1):1<a.length&&(c.He[0]=
a[0].clientX,c.He[1]=a[1].clientX,c.cf[0]=a[0].clientY,c.cf[1]=a[1].clientY,c.dy=y(a))};c.EC=function(a){0==a.length&&(c.MA=!0)};G.push(c);return c}function b(a,b){if(b in a.Rj&&0<a.Rj[b])a.Rj[b]+=1;else switch(a.Rj[b]=1,b){case "orientation_quat":var c=r.get_device_by_type_element(r.DEVICE_GYRO);c&&r.attach_param_cb(c,r.GYRO_ORIENTATION_ANGLES,a.yB);break;case "orientation_angles":(c=r.get_device_by_type_element(r.DEVICE_GYRO))&&r.attach_param_cb(c,r.GYRO_ORIENTATION_ANGLES,a.xB);break;case "mouse_wheel":(c=
r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.MOUSE_WHEEL,a.mB);break;case "mouse_down_which":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.MOUSE_DOWN_WHICH,a.iB);break;case "mouse_select":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.MOUSE_DOWN_WHICH,a.kB);break;case "touch_select":if(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))r.attach_param_cb(c,r.TOUCH_START,a.HC),r.attach_param_cb(c,
r.TOUCH_END,a.GC);break;case "mouse_up_which":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.MOUSE_UP_WHICH,a.lB);break;case "mouse_location":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.MOUSE_LOCATION,a.jB);break;case "mouse_pointerlock":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.attach_param_cb(c,r.rD,a.HB);break;case "keyboard_downed_keys":if(c=r.get_device_by_type_element(r.DEVICE_KEYBOARD,a.element))r.attach_param_cb(c,
r.KEYBOARD_DOWN,a.XG),r.attach_param_cb(c,r.qD,a.ZG),r.attach_param_cb(c,r.KEYBOARD_UP,a.$G);break;case "touch_start":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))&&r.attach_param_cb(c,r.TOUCH_START,a.IC);break;case "touch_move":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))&&r.attach_param_cb(c,r.TOUCH_MOVE,a.FC);break;case "touch_end":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))&&r.attach_param_cb(c,r.TOUCH_END,a.EC)}}function h(a,b){if(b in a.Rj&&0<a.Rj[b]&&
(--a.Rj[b],!a.Rj[b]))switch(b){case "orientation_quat":var c=r.get_device_by_type_element(r.DEVICE_GYRO);c&&r.detach_param_cb(c,r.GYRO_ORIENTATION_QUAT,a.yB);break;case "orientation_angles":(c=r.get_device_by_type_element(r.DEVICE_GYRO))&&r.detach_param_cb(c,r.GYRO_ORIENTATION_ANGLES,a.xB);break;case "mouse_wheel":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.detach_param_cb(c,r.MOUSE_WHEEL,a.mB);break;case "mouse_down_which":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&
r.detach_param_cb(c,r.MOUSE_DOWN_WHICH,a.iB);break;case "mouse_select":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.detach_param_cb(c,r.MOUSE_DOWN_WHICH,a.kB);break;case "touch_select":if(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))r.detach_param_cb(c,r.TOUCH_START,a.HC),r.detach_param_cb(c,r.TOUCH_END,a.GC);break;case "mouse_up_which":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.detach_param_cb(c,r.MOUSE_UP_WHICH,a.lB);break;case "mouse_location":(c=
r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.detach_param_cb(c,r.MOUSE_LOCATION,a.jB);break;case "mouse_pointerlock":(c=r.get_device_by_type_element(r.DEVICE_MOUSE,a.element))&&r.detach_param_cb(c,r.rD,a.HB);break;case "keyboard_downed_keys":if(c=r.get_device_by_type_element(r.DEVICE_KEYBOARD,a.element))r.detach_param_cb(c,r.KEYBOARD_DOWN,a.XG),r.detach_param_cb(c,r.qD,a.ZG),r.detach_param_cb(c,r.KEYBOARD_UP,a.$G);break;case "touch_start":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,
a.element))&&r.detach_param_cb(c,r.TOUCH_START,a.IC);break;case "touch_move":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))&&r.detach_param_cb(c,r.TOUCH_MOVE,a.FC);break;case "touch_end":(c=r.get_device_by_type_element(r.DEVICE_TOUCH,a.element))&&r.detach_param_cb(c,r.TOUCH_END,a.EC)}}function f(a,b){a.value=Number(b)}function q(a){for(var b=a.Uj,c=a.EU,d=0;d<b.length;d++)c[d]=b[d].value;return a.XS(c)}function l(a,b){a=a||N;var c=a.Uh;if(c){var d=a.kn;if(b){var m=c[b];if(m){for(var e=
m.Uj,g=0;g<e.length;g++){var f=e[g],p;p=L.indexOf(f);p=-1<p?A[p]:[];1==p.length?(x(f),f=L.indexOf(f),-1<f?(L.splice(f,1),A.splice(f,1)):F.K("Sensors cache is corrupted")):1<p.length&&p.splice(p.indexOf(m),1)}delete c[b];g=d.indexOf(m);-1<g?d.splice(g,1):F.K("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(c=B.indexOf(a),-1<c?B.splice(c,1):E.error("Wrong object"))}}else{d=[];for(g in c)d.push(g);for(g=0;g<d.length;g++)l(a,d[g])}K=!0}}function x(a){switch(a.type){case 90:w.remove_collision_test(a.Bz,
a.Jb,a.Az);a.Va=!0;break;case 100:w.clear_collision_impulse_test(a.zz);a.Va=!0;break;case 110:w.remove_ray_test(a.rs);a.Va=!0;break;case 140:a.Va=!0;break;case 20:var b=c(a.element);h(b,"keyboard_downed_keys");a.Va=!0;break;case 30:b=c(a.element);h(b,"mouse_wheel");a.Va=!0;break;case 40:b=c(a.element);h(b,"mouse_down_which");h(b,"mouse_up_which");h(b,"mouse_location");a.Va=!0;break;case 280:b=c(a.element);h(b,"mouse_pointerlock");a.Va=!0;break;case 50:b=c(a.element);h(b,"mouse_down_which");h(b,"mouse_up_which");
a.Va=!0;break;case 60:b=c(a.element);h(b,"touch_start");h(b,"touch_move");h(b,"touch_end");a.Va=!0;break;case 70:b=c(a.element);h(b,"touch_start");h(b,"touch_move");a.Va=!0;break;case 75:b=c(a.element);h(b,"touch_start");h(b,"touch_move");a.Va=!0;break;case 80:b=c(a.element);h(b,"touch_start");h(b,"touch_end");a.Va=!0;break;case 170:b=c(a.element);h(b,"mouse_select");h(b,"touch_select");h(b,"touch_start");h(b,"touch_end");h(b,"mouse_down_which");h(b,"mouse_up_which");a.Va=!0;break;case 180:case 190:b=
c(a.element);h(b,"orientation_angles");a.Va=!0;break;case 200:b=c(a.element);h(b,"orientation_quat");a.Va=!0;break;case 210:case 220:a.Va=!0}}function y(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function p(a){return 0==a?r.get_device_by_type_element(r.st):1==a?r.get_device_by_type_element(r.Jy):2==a?r.get_device_by_type_element(r.Ky):r.get_device_by_type_element(r.Ly)}var d=t("__config"),v=t("__container"),r=t("__input"),H=t("__objects"),E=t("__print"),
w=t("__physics"),n=t("__quat"),C=t("__time"),k=t("__tsr"),F=t("__util"),u=t("__vec3"),g=d.controls,D=d.L,B=[],N={},L=[],A=[],G=[],z=new Float32Array(2),I=new Float32Array(2),S=u.create(),m=n.create(),K=!1,U=0;a.CT_POSITIVE=10;a.CT_CONTINUOUS=20;a.CT_TRIGGER=30;a.CT_SHOT=40;a.CT_LEVEL=50;a.CT_CHANGE=60;a.PL_SINGLE_TOUCH_MOVE=0;a.PL_MULTITOUCH_MOVE_ZOOM=1;a.PL_MULTITOUCH_MOVE_PAN=2;a.PL_MULTITOUCH_MOVE_ROTATE=3;var Q=1;a.update=function(b,d){for(var e=0;e<G.length;e++){var g=G[e];g.Hi.Ho||(g.Hi.obj=
H.pick_object(g.Hi.zk[0],g.Hi.zk[1]),g.Hi.Ho=!0,g.uA=g.Hi.obj);for(var h=0;10>h;++h){var l=g.fk[h];l.Ho||(l.obj=H.pick_object(l.zk[0],l.zk[1]),l.Ho=!0,g.uA=l.obj)}}for(e=0;e<L.length;e++)if(g=L[e],l=b,h=d)switch(g.type){case 120:var v=g.Qi,R=k.Mb(v.A.D,S),v=k.ub(v.A.D,m),A=u.dist(g.Fp,R),w=g.aI;n.invert(g.$w,w);n.multiply(v,w,w);n.normalize(w,w);w=Math.abs(2*Math.acos(w[3]));A/=h;g.Ut=F.smooth(A,g.Ut,h,.3);g.da[0]=A;A=w/h;g.Tt=F.smooth(A,g.Tt,h,.3);g.da[1]=A;g.Ut>=g.threshold||g.Tt>=g.nI?f(g,1):f(g,
0);u.copy(R,g.Fp);n.copy(v,g.$w);g.Dg=l;break;case 130:v=g.Qi;R=k.Mb(v.A.D,S);v=Math.abs(R[1]-g.Fp[1])/h;g.Vt=F.smooth(v,g.Vt,h,.3);g.da=v;g.Vt>=g.threshold?f(g,1):f(g,0);u.copy(R,g.Fp);g.Dg=l;break;case 140:!g.Va&&0<=g.wg&&l-g.Dg>=g.wg&&(f(g,1),g.repeat?g.Dg=l:g.wg=-g.wg);break;case 150:g.Dg||(g.Dg=l);f(g,l-g.Dg);g.Dg=l;break;case 160:f(g,l);break;case 180:l=c(g.element);g.da[0]=l.Hv-l.xA;g.da[1]=l.Gv-l.wA;g.da[2]=l.Fv-l.Ev;break;case 190:l=c(g.element);g.da[0]=l.Hv;g.da[1]=l.Gv;g.da[2]=l.Fv;break;
case 200:l=c(g.element);n.copy(l.sG,g.da);break;case 210:h=r.get_device_by_type_element(r.DEVICE_HMD);r.get_vector_param(h,r.HMD_ORIENTATION_QUAT,g.da);break;case 220:h=r.get_device_by_type_element(r.DEVICE_HMD);r.get_vector_param(h,r.HMD_POSITION,g.da);break;case 240:h=p(g.gamepad_id);g.value=r.uR(h,g.key);break;case 250:h=p(g.gamepad_id);g.value=r.tR(h,g.key);break;case 260:h=p(g.gamepad_id);r.get_gamepad_position(h,g.da);f(g,1);break;case 270:h=p(g.gamepad_id);r.get_gamepad_orientation(h,g.da);
f(g,1);break;case 230:f(g,g.callback());break;case 30:l=c(g.element);f(g,l.By);break;case 40:l=c(g.element);if(!D.Qv||1==l.Ef||2==l.Ef)switch(R=l.Wm-l.zw,v=l.Xm-l.Aw,g.da.coords[0]=l.Wm,g.da.coords[1]=l.Xm,g.axis){case "X":f(g,R);break;case "Y":f(g,v);break;case "XY":h=Math.sqrt(R*R+v*v),f(g,h)}break;case 280:l=c(g.element);R=l.hs;v=l.ks;A=F.smooth(R,0,h,.1*Q);h=F.smooth(v,0,h,.1*Q);.01<Math.abs(R)||.01<Math.abs(v)?(l.hs-=A,l.ks-=h,g.da.coords[0]=A,g.da.coords[1]=h):(g.da.coords[0]=0,g.da.coords[1]=
0);f(g,Math.sqrt(R*R+v*v));break;case 50:l=c(g.element);f(g,0!=l.Ef|0);g.da.which=l.which;g.da.coords[0]=l.Wm;g.da.coords[1]=l.Xm;break;case 170:l=c(g.element);f(g,0);if(g.GF)l.uA==g.Qi&&f(g,1);else if(0!=l.Ef&&l.Hi.obj==g.Qi)f(g,1);else for(h=0;10>h;++h)if(R=l.fk[h],0!=R.Si&&R.obj==g.Qi){f(g,1);break}break;case 20:l=c(g.element);g.da=l.zf[g.key];1==g.da||l.zf[0]&&16==g.key?f(g,1):g.da||f(g,0);break;case 60:l=c(g.element);if(-1==l.He[1]&&-1==l.cf[1]){R=l.He[0]-l.Vh[0];v=l.cf[0]-l.Wh[0];h=Math.sqrt(R*
R+v*v);if(-1!=l.Vh[1]&&-1!=l.Wh[1]){var A=l.He[0]-l.Vh[1],w=l.cf[0]-l.Wh[1],x=Math.sqrt(A*A+w*w);x<h&&(R=A,v=w,h=x)}g.da.gesture=a.PL_SINGLE_TOUCH_MOVE}else h=z,h[0]=(l.He[0]+l.He[1])/2,h[1]=(l.cf[0]+l.cf[1])/2,v=I,v[0]=(l.Vh[0]+l.Vh[1])/2,v[1]=(l.Wh[0]+l.Wh[1])/2,R=h[0]-v[0],v=h[1]-v[1],h=Math.sqrt(R*R+v*v),g.da.gesture=a.PL_MULTITOUCH_MOVE_PAN;g.da.coords[0]=l.He[0];g.da.coords[1]=l.cf[0];switch(g.axis){case "X":f(g,R);break;case "Y":f(g,v);break;case "XY":f(g,h)}break;case 70:l=c(g.element);h=
l.dy-l.JC;g.da=a.PL_MULTITOUCH_MOVE_ZOOM;f(g,h);break;case 75:l=c(g.element);-1!=l.He[1]&&(h=Math.atan2(l.cf[0]-l.cf[1],l.He[0]-l.He[1]),g.da=a.PL_MULTITOUCH_MOVE_ROTATE,f(g,h-l.tJ));break;case 80:l=c(g.element),g.da.coords[0]=l.He[0],g.da.coords[1]=l.cf[0],l.MA?f(g,0):f(g,1)}for(e=0;e<B.length;e++)for(l=B[e],g=l.kn,h=0;h<g.length;h++)if(R=g[h],R.Gl!=U){R.Gl=U;w=R;v=0;switch(w.type){case a.CT_POSITIVE:v=(A=q(w))?1:0;break;case a.CT_CONTINUOUS:v=w.Fj;(A=q(w))?(v=1,w.Fj=1):1==v?(v=-1,w.Fj=-1):v=0;break;
case a.CT_TRIGGER:v=w.Fj;(A=q(w))&&-1==v?(v=1,w.Fj=1):A||1!=v?v=0:(v=-1,w.Fj=-1);break;case a.CT_SHOT:v=w.Fj;(A=q(w))&&-1==v?(v=1,w.Fj=1):A||1!=v?v=0:(v=0,w.Fj=-1);break;case a.CT_LEVEL:A=q(w);w.bH!=A?(v=1,w.bH=A):v=0;break;case a.CT_CHANGE:A=w.Uj;w=w.zS;for(x=0;x<A.length;x++){var y=A[x].value;v||y==w[x]||(v=1);w[x]=y}break;default:F.K("Wrong sensor manifold type: "+w.type)}if(v&&(A=l==N?null:l,K=!1,R.callback(A,R.id,v,R.KN),K)){e=-1;break}}for(e=0;e<B.length;e++)for(l=B[e],g=l.kn,h=0;h<g.length;h++)for(R=
g[h],l=R.Uj,R=0;R<l.length;R++)switch(v=l[R],v.type){case 30:f(v,0);break;case 40:f(v,0);break;case 60:f(v,0);break;case 70:f(v,0);break;case 75:f(v,0);break;case 80:f(v,0);break;case 140:f(v,0)}for(e=0;e<G.length;e++){g=G[e];if(!g.Lr){for(h=0;h<g.zf.length;h++)1==g.zf[h]?g.zf[h]=2:3==g.zf[h]&&(g.zf[h]=0);g.Lr=!0}1==g.Ef?g.Ef=2:3==g.Ef&&(g.Ef=0);for(h=0;h<g.fk.length;h++)l=g.fk[h],1==l.Si?l.Si=2:3==l.Si&&(l.Si=0);g.By=0;g.zw=g.Wm;g.Aw=g.Xm;g.zf[0]=0;g.Vh.set(g.He);g.Wh.set(g.cf);g.JC=g.dy;g.xA=g.Hv;
g.wA=g.Gv;g.Ev=g.Fv;g.NA=!1}U++};a.create_custom_sensor=function(a){var b=e(10);f(b,a);return b};a.create_keyboard_sensor=function(a){var b=e(20,document);b.key=a;b.Va=!0;return b};a.create_gamepad_btn_sensor=function(a,b){var c=e(240,document);b=b||r.rv();c.gamepad_id=b;c.key=a;c.Va=!0;return c};a.create_gamepad_axis_sensor=function(a,b){var c=e(250,document);b=void 0==b?r.rv():b;c.gamepad_id=b;c.key=a;c.Va=!0;return c};a.create_gamepad_position_sensor=function(a){var b=e(260,document);a=void 0===
a?r.rv():a;b.gamepad_id=a;b.Va=!0;b.da=u.create();return b};a.create_gamepad_orientation_sensor=function(a){var b=e(270,document);a=void 0===a?r.rv():a;b.gamepad_id=a;b.Va=!0;b.da=n.create();return b};a.create_collision_sensor=function(a,b,c){if(!a||!w.sa(a))return E.error("Wrong collision object"),null;var d=e(90);d.Bz=a;d.Jb=b;d.ji=c;d.da={coll_obj:null,coll_pos:c?new Float32Array(3):null,coll_norm:c?new Float32Array(3):null,coll_dist:0};d.Az=function(a,b,c,g,m){f(d,a);a=d.da;a.coll_obj=b;d.ji&&
(a.coll_pos.set(c),a.coll_norm.set(g),a.coll_dist=m)};d.Va=!0;return d};a.create_collision_impulse_sensor=function(a){if(!a||!a.N)return E.error("Wrong collision impulse object"),null;var b=e(100);b.zz=a;b.YE=function(a){f(b,a)};b.Va=!0;return b};a.create_ray_sensor=function(a,b,c,d,g,m,p){var k=e(110);k.Qi=a;k.from=b;k.to=c;k.Jb=d;k.JG=g;k.ji=m;k.Rv=p;k.da={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),rs:0};k.cI=function(a,b,c,d,g,m){k.JG?f(k,-1==b?
0:1):f(k,b);k.da.hit_fract=b;k.da.obj_hit=c;k.da.hit_time=d;k.ji&&(k.da.hit_pos.set(g),k.da.hit_norm.set(m))};k.Va=!0;return k};a.create_mouse_click_sensor=function(a){a=e(50,a);a.Va=!0;a.da={coords:new Float32Array(2),which:null};return a};a.create_mouse_wheel_sensor=function(a){a=e(30,a);a.Va=!0;return a};a.create_mouse_move_sensor=function(a,b){var c=e(40,b);c.axis=a||"XY";c.da={coords:new Float32Array(2)};c.Va=!0;return c};a.create_touch_move_sensor=function(a,b){var c=e(60,b);c.axis=a||"XY";
c.da={coords:new Float32Array(2),gesture:0};c.Va=!0;return c};a.create_touch_zoom_sensor=function(a){a=e(70,a);a.da=0;a.Va=!0;return a};a.create_touch_rotate_sensor=function(a){a=e(75,a);a.da=0;a.Va=!0;return a};a.create_touch_click_sensor=function(a){a=e(80,a);a.da={coords:new Float32Array(2)};a.Va=!0;return a};a.create_motion_sensor=function(a,b,c){if(!a)return E.error("Wrong collision object"),null;var d=e(120);d.Qi=a;var g=k.get_trans_view(a.A.D);a=k.get_quat_view(a.A.D);d.aI=new Float32Array(4);
d.Fp=new Float32Array(g);d.$w=new Float32Array(a);d.Ut=0;d.Tt=0;d.threshold=b||.1;d.nI=c||.1;d.Dg=0;d.da=new Float32Array([0,0]);return d};a.create_vertical_velocity_sensor=function(a,b){if(!a)return E.error("Wrong collision object"),null;var c=e(130);c.Qi=a;var d=k.get_trans_view(a.A.D),g=k.get_quat_view(a.A.D);c.Fp=new Float32Array(d);c.$w=new Float32Array(g);c.Vt=0;c.threshold=b||1;c.Dg=0;c.da=0;return c};a.create_timer_sensor=function(a,b){var c=e(140);c.wg=a;c.repeat=b;c.Va=!0;return c};a.reset_timer_sensor=
function(a,b,c,d){a=a||N;a=a.Uh;if(!a||!a[b])return E.error("reset_timer_sensor(): wrong object"),null;b=a[b].Uj[c];if(!b)return E.error("reset_timer_sensor(): sensor not found"),null;b.Dg=C.get_timeline();b.wg=d};a.create_elapsed_sensor=function(){var a=e(150);a.Dg=0;return a};a.create_gyro_delta_sensor=function(){var a=e(180,window);a.da=new Float32Array(3);r.get_device_by_type_element(r.DEVICE_GYRO)?f(a,1):f(a,0);a.Va=!0;return a};a.create_gyro_angles_sensor=function(){var a=e(190,window);a.da=
new Float32Array(3);r.get_device_by_type_element(r.DEVICE_GYRO)?f(a,1):f(a,0);a.Va=!0;return a};a.create_gyro_quat_sensor=function(){var a=e(200,window);a.da=n.create();r.get_device_by_type_element(r.DEVICE_GYRO)?f(a,1):f(a,0);a.Va=!0;return a};a.create_hmd_quat_sensor=function(){var a=e(210,window);a.da=n.create();r.get_device_by_type_element(r.DEVICE_HMD)?f(a,1):f(a,0);a.Va=!0;return a};a.create_hmd_position_sensor=function(){var a=e(220,window);a.da=u.create();r.get_device_by_type_element(r.DEVICE_HMD)?
f(a,1):f(a,0);a.Va=!0;return a};a.create_timeline_sensor=function(){return e(160)};a.create_selection_sensor=function(a,b){var c=e(170);c.Qi=a;c.GF=b;c.Va=!0;return c};a.create_callback_sensor=function(a,b){var c=e(230);c.callback=a;f(c,b);return c};a.create_plock_mouse_sensor=function(a){a=e(280,a);a.da={coords:new Float32Array(2)};a.Va=!0;return a};a.create_plock_sensor=function(a){a=e(290,a);a.Va=!0;return a};a.DU=f;a.get_sensor_value=function(a,b,c){a=a||N;a=a.Uh;if(!a||!a[b])return E.error("get_sensor_value(): wrong object"),
null;b=a[b].Uj[c];return b?b.value:(E.error("get_sensor_value(): sensor not found"),null)};a.get_sensor_payload=function(a,b,c){a=a||N;a=a.Uh;if(!a||!a[b])return E.error("get_sensor_payload(): wrong object"),null;b=a[b].Uj[c];return b?b.da:(E.error("get_sensor_payload(): sensor not found"),null)};a.cleanup=function(){B=[];N={};for(var a=0;a<L.length;a++)x(L[a]);L.length=0;A.length=0};a.check_sensor_manifold=function(a,b){a=a||N;if(!a.Uh)return!1;if(b&&a.Uh[b])return!0;if(!b)for(var c in a.Uh)return!0;
return!1};a.create_sensor_manifold=function(a,d,g,m,e,f,p){a=a||N;a.kn=a.kn||[];a.Uh=a.Uh||{};var k=a.Uh,h=a.kn;k[d]&&l(a,d);g={id:d,type:g,Uj:m.slice(0),XS:e,EU:Array(m.length),callback:f,KN:p,Fj:-1,bH:0,zS:Array(m.length),Gl:-1};k[d]=g;h.push(g);-1==B.indexOf(a)&&B.push(a);for(a=0;a<g.Uj.length;a++){k=d=g.Uj[a];if(k.Va){switch(k.type){case 90:w.append_collision_test(k.Bz,k.Jb,k.Az,k.ji);break;case 100:w.apply_collision_impulse_test(k.zz,k.YE);break;case 110:k.rs=w.append_ray_test(k.Qi,k.from,k.to,
k.Jb,k.cI,!1,!1,k.ji,k.Rv);k.da.rs=k.rs;break;case 140:k.Dg=C.get_timeline();0>k.wg&&(k.wg=-k.wg);break;case 20:h=c(k.element);b(h,"keyboard_downed_keys");break;case 30:h=c(k.element);b(h,"mouse_wheel");break;case 40:h=c(k.element);b(h,"mouse_down_which");b(h,"mouse_up_which");b(h,"mouse_location");break;case 280:h=c(k.element);b(h,"mouse_pointerlock");break;case 290:r.DM(k);break;case 50:h=c(k.element);b(h,"mouse_down_which");b(h,"mouse_up_which");break;case 60:h=c(k.element);b(h,"touch_start");
b(h,"touch_move");b(h,"touch_end");break;case 70:h=c(k.element);b(h,"touch_start");b(h,"touch_move");break;case 75:h=c(k.element);b(h,"touch_start");b(h,"touch_move");break;case 80:h=c(k.element);b(h,"touch_start");b(h,"touch_end");break;case 170:h=c(k.element);b(h,"mouse_select");b(h,"touch_select");b(h,"touch_start");b(h,"touch_end");b(h,"mouse_down_which");b(h,"mouse_up_which");break;case 180:case 190:h=c(k.element);b(h,"orientation_angles");break;case 200:h=c(k.element);b(h,"orientation_quat");
break;case 240:case 260:case 270:0==k.gamepad_id?r.get_device_by_type_element(r.st):1==k.gamepad_id?r.get_device_by_type_element(r.Jy):2==k.gamepad_id?r.get_device_by_type_element(r.Ky):r.get_device_by_type_element(r.Ly)}k.Va=!1}k=L.indexOf(d);-1==k?(L.push(d),A.push([g])):A[k].push(g)}K=!0};a.default_AND_logic_fun=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-1]};a.default_OR_logic_fun=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};
a.remove_sensor_manifold=l;a.reset=function(){for(var a=0;a<B.length;a++){var b=B[a],c=b.Uh,b=b.kn,d;for(d in c)delete c[d];b.length=0}for(a=0;a<L.length;a++)x(L[a]);B.length=0;L.length=0;A.length=0};a.debug=function(){E.log(String(B.length)+" objects with manifolds",B);E.log(String(L.length)+" sensors",L);for(var a=[],b=[],c=0;c<L.length;c++){var d=L[c];90==d.type&&a.push(d);110==d.type&&b.push(d)}E.log(String(a.length)+" collision sensors",a);E.log(String(b.length)+" ray sensors",b)};a.set_plock_smooth_factor=
function(a){Q=a}};b4w.module.__curve=function(a,t){function e(a,b,c,d,e){var f=d.length;e||(e=new Float32Array(f));for(var p=f+a,h=new Float32Array(p),l=1;l<=p-1;l++)h[l-1]=b>=c[l-1]&&b<c[l+1-1]?1:0;for(var n=2;n<=a;n++)for(l=1;l<=p-n;l++)h[l-1]=(h[l-1]?(b-c[l-1])*h[l-1]/(c[l+n-1-1]-c[l-1]):0)+(h[l+1-1]?(c[l+n-1]-b)*h[l+1-1]/(c[l+n-1]-c[l+1-1]):0);b==c[p-1]&&(h[f-1]=1);a=0;for(l=1;l<=f;l++)a+=h[l-1]*d[l-1];for(l=1;l<=f;l++)e[l-1]=a?h[l-1]*d[l-1]/a:0;return e}function c(a){a=a.dw;return a[a.length-1]}function b(a){a=
a.qF;return a[a.length-1]}function h(a,b,c,d,e,l,H,q){var p=a+(b-a)/2,n=f(p,d,e,l,H)-c;q=q?q:.01;return Math.abs(n)<q?p:0<n?h(a,p,c,d,e,l,H,q):h(p,b,c,d,e,l,H,q)}function f(a,b,c,d,e){var f=1-a;return b*f*f*f+3*c*f*f*a+3*d*f*a*a+e*a*a*a}var q=t("__util"),l=t("__vec3");a.dP=function(a){var b={},c=a.data;a=c.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var d=a.order_u;b.order=d;a=a.points;var f=a.length/5,h=[],l=f+d,f=f+2;h[0]=0;for(var x=2;x<=l;x++)h[x-1]=x>d&&x<f?h[x-2]+1:h[x-
2];b.dw=h;"2D"==c.dimensions?b.Sk=!1:"3D"==c.dimensions?b.Sk=!0:q.K("Wrong curve dimensions");d=[];h=[];for(c=0;c<a.length;c+=5)d.push(a[c]),d.push(a[c+1]),d.push(a[c+2]),b.Sk&&d.push(a[c+3]),h.push(a[c+4]);b.Ez=d;b.$C=h;a=[];for(var c=b.Ez,d=b.Sk?4:3,h=b.$C,l=b.dw,f=b.order,x=c.length/d,w=x+f,n=0,C=l[w-1]/999,k=0;1E3>k;k++){5E-6>l[w-1]-n&&(n=l[w-1]);for(var F=e(f,n,l,h),u=0;u<d;u++)for(var g=a[d*k+u]=0;g<x;g++)a[d*k+u]+=F[g]*c[d*g+u];n+=C}d=b.Sk?4:3;h=new Float32Array(1E3);h[0]=0;for(c=1;1E3>c;c+=
1)l=a[(c-1)*d],f=a[(c-1)*d+1],x=a[(c-1)*d+2],w=a[c*d],n=a[c*d+1],C=a[c*d+2],h[c]=h[c-1]+Math.sqrt((w-l)*(w-l)+(n-f)*(n-f)+(C-x)*(C-x));b.qF=h;return b};a.IV=function(a,b,f){f||(f=[]);b=Math.min(b,c(a));var d=a.Ez,h=a.Sk?4:3,p=a.$C,l=a.dw,q=a.order;a=d.length/h;var w=a+q;5E-6>l[w-1]-b&&(b=l[w-1]);w=new Float32Array(a);e(q,b,l,p,w);for(b=0;b<h;b++)for(p=f[b]=0;p<a;p++)f[b]+=w[p]*d[h*p+b]};a.FV=function(a,b,c){c||(c=[]);var d=a.Ez,e=a.Sk?4:3,f=a.$C,h=a.dw,p=a.order;a=d.length/e;var l=a+p;5E-6>h[l-1]-
b&&(b=h[l-1]);var l=new Float32Array(a),n=b;b=l;var q=f.length;b||(b=new Float32Array(q));var k=new Float32Array(q),F=new Float32Array(q),u=k,g=F;u||(u=new Float32Array(q));g||(g=new Float32Array(q));for(var D=q+p,B=new Float32Array(D),x=new Float32Array(D),y=1;y<=D-1;y++)B[y-1]=n>=h[y-1]&&n<h[y+1-1]?1:0;n==h[D-1]&&(B[q-1]=1);for(var A=2;A<=p;A++)for(y=1;y<=D-A;y++){var G=B[y-1]?B[y-1]/(h[y+A-1-1]-h[y-1]):0,z=B[y+1-1]?-B[y+1-1]/(h[y+A-1]-h[y+1-1]):0,I=x[y-1]?(n-h[y-1])*x[y-1]/(h[y+A-1-1]-h[y-1]):
0,t=x[y+1-1]?(h[y+A-1]-n)*x[y+1-1]/(h[y+A-1]-h[y+1-1]):0;B[y-1]=(B[y-1]?(n-h[y-1])*B[y-1]/(h[y+A-1-1]-h[y-1]):0)+(B[y+1-1]?(h[y+A-1]-n)*B[y+1-1]/(h[y+A-1]-h[y+1-1]):0);x[y-1]=G+z+I+t}for(y=1;y<=q;y++)u[y-1]=B[y-1],g[y-1]=x[y-1];h=0;for(p=1;p<=q;p++)h+=k[p-1]*f[p-1];n=0;for(p=1;p<=q;p++)n+=F[p-1]*f[p-1];for(p=1;p<=q;p++)b[p-1]=h?F[p-1]*f[p-1]/h+k[p-1]*f[p-1]*n/(h*h):0;for(f=0;f<e;f++)for(h=c[f]=0;h<a;h++)c[f]+=l[h]*d[e*h+f]};a.p_=c;a.HV=b;a.GV=function(a,e){if(0>=e)return 0;var f=c(a);if(e>=b(a))return f;
var d=a.qF,h=q.Yt(d,e,0,d.length-1);return f*(h+(e-d[h])/(d[h+1]-d[h]))/1E3};a.jw=function(a,b,c,d,e){return c+(e-d)*(a-c)/(b-d)};a.eH=function(a,b,c){var d=b[0];b=b[1];c=(c[1]-b)/(c[0]-d);return c*a+(b-c*d)};a.nE=function(a,b,c,d,e,l){return f(h(0,1,a,b[0],c[0],d[0],e[0],l),b[1],c[1],d[1],e[1])};a.qz=function(a,b,c,d,e){var f=new Float32Array(3),h=new Float32Array(3),p=new Float32Array(3),v=new Float32Array(3),n=new Float32Array(3),q=new Float32Array(3);l.copy(a[1],h);null==b?(l.copy(c[1],p),f[0]=
2*h[0]-p[0],f[1]=2*h[1]-p[1]):l.copy(b[1],f);null==c?(l.copy(b[1],f),p[0]=2*h[0]-f[0],p[1]=2*h[1]-f[1]):l.copy(c[1],p);l.subtract(h,f,v);l.subtract(p,h,n);b=l.length(v);c=l.length(n);0==b&&(b=1);0==c&&(c=1);if("AUTO"==d||"AUTO"==e)if(q[0]=n[0]/c+v[0]/b,q[1]=n[1]/c+v[1]/b,f=2.5614*l.length(q))"AUTO"==d&&l.scaleAndAdd(h,q,-(b/f),a[0]),"AUTO"==e&&l.scaleAndAdd(h,q,c/f,a[2]);"VECTOR"==d&&l.scaleAndAdd(h,v,-1/3,a[0]);"VECTOR"==e&&l.scaleAndAdd(h,n,1/3,a[2])};a.wO=function(a,b,c,d){var e=[],f=[],h,p,l;
e[0]=a[0]-b[0];e[1]=a[1]-b[1];f[0]=d[0]-c[0];f[1]=d[1]-c[1];l=d[0]-a[0];h=Math.abs(e[0]);p=Math.abs(f[0]);h+p&&h+p>l&&(h=l/(h+p),b[0]=a[0]-h*e[0],b[1]=a[1]-h*e[1],c[0]=d[0]-h*f[0],c[1]=d[1]-h*f[1])}};b4w.module.__debug=function(a,t){function e(a,b,d){var g=[],m;for(m in a)1<u.zj(a[m])&&g.push([m,a[m]]);g.sort(function(a,b){var c=u.zj(a[1]),d=u.zj(b[1]);return d!=c?d-c:a<b?-1:b<a?1:0});if(g.length){w.groupCollapsed(b+" "+d);w.ld("Property different variants (>1) | Property name");for(a=0;a<g.length;a++)w.groupCollapsed(u.zj(g[a][1]),g[a][0]),c(g[a][1]);w.groupEnd()}}function c(a){w.ld("Batches count for this property value | Property value");var b=[],c;for(c in a)b.push([c,a[c]]);b.sort(function(a,
b){return b[1]!=a[1]?b[1]-a[1]:a[0]<b[0]?-1:b[0]<a[0]?1:0});for(a=0;a<b.length;a++)w.ld(b[a][1],b[a][0]);w.groupEnd()}function b(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function h(){var a=r.mA();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function f(){var b=z;return b&&b.debug_view_mode==a.DV_RENDER_TIME}function q(a,b,c){var d=r.mA(),g=0;if(d)for(c&&d.endQuery(),c=0;c<a.length;c++){var m=a[c],e=d.aG(m),f=B.getParameter(d.$F());
e&&!f&&(g=d.bG(m)/1E6,b&&(g=u.smooth(g,b,1,10)),a.splice(c,1),c--)}else g=performance.now()-a.pop(),b&&(g=u.smooth(g,b,1,10));return g}function l(a,b){x(a)||u.K("Structure assertion failed: invalid first object value");x(b)||u.K("Structure assertion failed: invalid second object value");y(a,b)||u.K("Structure assertion failed: incompatible types");if(!(null==a||null==b||"object"!=typeof a||u.KA(a)||a instanceof Array)){for(var c in a)x(a[c])||u.K("Structure assertion failed: invalid value for key in the first object: "+
c),c in b||u.K("Structure assertion failed: missing key in the first object: "+c);for(c in b)x(b[c])||u.K("Structure assertion failed: invalid value for key in the second object: "+c),c in a||u.K("Structure assertion failed: missing key in the second object: "+c),y(a[c],b[c])||u.K("Structure assertion failed: incompatible types for key "+c)}}function x(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function y(a,b){if(typeof a!=typeof b)return!1;if(null!=a&&null!=b&&"object"==
typeof a){var c=a instanceof Array,d=b instanceof Array;if(c&&!d||!c&&d)return!1;c=u.KA(a);d=u.KA(b);if(c&&!d||!c&&d)return!1}return!0}var p=t("__batch"),d=t("__compat"),v=t("__config"),r=t("__extensions"),H=t("__graph"),E=t("__objects"),w=t("__print"),n=t("__scenes"),C=t("__subscene"),k=t("__textures"),F=t("__time"),u=t("__util"),g=v.L,D={},B=null,N={},L=[],A=-1,G=-1,z=null,I=null,S=!1,m={};a.DV_NONE=0;a.DV_OPAQUE_WIREFRAME=1;a.DV_TRANSPARENT_WIREFRAME=2;a.DV_FRONT_BACK_VIEW=3;a.DV_BOUNDINGS=4;a.DV_CLUSTERS_VIEW=
5;a.DV_BATCHES_VIEW=6;a.DV_RENDER_TIME=7;a.yg=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),c=0;c<b.length;c++){var d=b[c];d in a&&(D[a[d]]=d)}B=a};a.MU=function(a){z=a};a.hZ=function(){return z};a.vQ=function(a,b,c,d,g){m[a]||(m[a]={pV:b,pf:{}});c in m[a].pf||(m[a].pf[c]=d);g&&(m[a].pf[c]=0)};a.calc_vbo_garbage_byte_size=function(){var a=0,b;for(b in m)for(var c in m[b].pf)a+=m[b].pf[c];return a};a.show_vbo_garbage_info=
function(){var a={},b;for(b in m)for(var c in m[b].pf){var d=m[b].pf[c];if(d){var g=m[b].pV;g in a||(a[g]={DC:0,pf:{}});c in a[g].pf||(a[g].pf[c]=0);a[g].pf[c]+=d;a[g].DC+=d}}for(g in a){w.groupCollapsed(g,a[g].DC);for(c in a[g].pf)w.ld(c,a[g].pf[c]);w.groupEnd()}};a.print_batches_stat=function(){for(var a={},b="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),c=0,d=0,g=E.Sb(n.Gh(),"MESH",E.DATA_ID_ALL),m=0;m<g.length;m++)for(var f=
0;f<g[m].S.length;f++)for(var h=0;h<g[m].S[f].$.length;h++){var k=p.lO(g[m].S[f].$[h]),l=k.eb.Pf+"/"+k.eb.we;k["shaders_info.directives"]=k.eb.Ah;k["shaders_info.node_elements"]=k.eb.Ze;delete k.eb;for(var I=0;I<b.length;I++)delete k[b[I]];if(g[m].is_dynamic)d++;else{c++;k.type in a||(a[k.type]={});l in a[k.type]||(a[k.type][l]={});for(var u in k)u in a[k.type][l]||(a[k.type][l][u]={}),I=JSON.stringify(k[u]),I in a[k.type][l][u]||(a[k.type][l][u][I]=0),a[k.type][l][u][I]++}}w.group("Batches statistics:");
w.ld("STATIC/DYNAMIC count:",c+"/"+d);w.group("STATIC batches diversity:");for(var r in a)for(l in a[r])e(a[r][l],r,l);w.groupEnd();w.groupEnd()};a.uz=function(a){if(g.gl_debug){var b=B.getError();b!=B.NO_ERROR&&(b in D?u.K("GL Error: "+b+", gl."+D[b]+" ("+a+")"):u.K("Unknown GL error: "+b+" ("+a+")"))}};a.TN=function(){if(g.gl_debug||g.HE)switch(B.checkFramebufferStatus(B.FRAMEBUFFER)){case B.FRAMEBUFFER_COMPLETE:break;case B.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:w.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");
break;case B.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:w.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case B.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:w.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case B.FRAMEBUFFER_UNSUPPORTED:w.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case B.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:w.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");break;default:w.error("FRAMEBUFFER CHECK FAILED")}};
a.XN=function(){if(-1!=A)return A;var a=B.createFramebuffer();B.bindFramebuffer(B.FRAMEBUFFER,a);var b=k.Ck(k.Sl,!1);k.resize(b,1,1);B.framebufferTexture2D(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,b.pb,b.Bb,0);B.checkFramebufferStatus(B.FRAMEBUFFER)!=B.FRAMEBUFFER_COMPLETE?(A=!0,w.warn("depth-only issue was found")):A=!1;B.bindFramebuffer(B.FRAMEBUFFER,null);B.deleteFramebuffer(a);return A};a.bO=function(){if(1==g.ec)return!1;if(-1!=G)return G;B.bindRenderbuffer(B.RENDERBUFFER,B.createRenderbuffer());B.renderbufferStorageMultisample(B.RENDERBUFFER,
g.ec,B.RGBA8,1,1);var a=B.getRenderbufferParameter(B.RENDERBUFFER,B.RENDERBUFFER_SAMPLES);a!=g.ec?(G=!0,w.warn("multisample issue was found: requested "+g.ec+", got "+a),B.getError()==B.INVALID_OPERATION&&w.warn("the error from multisample issue detected, ignoring")):G=!1;B.bindRenderbuffer(B.RENDERBUFFER,null);return G};a.ZN=function(){return d.vz("Firefox")&&B.getError()==B.OUT_OF_MEMORY?(w.warn("Firefox/old GPUs cubemap issue was found."),!0):!1};a.iI=function(a,c,d){g.gl_debug&&(d=b(d),w.error("shader compilation failed:\n"+
d+"\n"+B.getShaderInfoLog(a)+" ("+c+")"))};a.mU=function(a,c,d,m){g.gl_debug&&(d=b(d),m=b(m),w.error("shader linking failed:\n"+d+"\n\n\n"+m+"\n"+B.getProgramInfoLog(a)+" ("+c+")"))};a.QB=function(a){if(g.show_hud_debug_info||a.type==C.iq)a.hr||a.Fk.push(h())};a.hU=function(a){"MAIN"==a.type&&f()&&a.Fk.push(h())};a.RB=function(a){if((g.show_hud_debug_info||a.type==C.iq)&&!a.hr){var b=q(a.Fk,a.vf,!0);b&&(a.vf=b)}};a.iU=function(a){if("MAIN"==a.type&&f()){var b=q(a.Fk,a.vf,!0);b&&(a.vf=b)}};a.PG=f;
a.TT=function(a){var b=q(a.Fk,a.vf,!1);b&&(a.vf=b)};a.SY=function(a){N[a]=a in N?N[a]+1:1};a.update=function(){for(var a in N)w.log(a,N[a]),N[a]=0};a.fbmsg=function(){for(var a=[performance.now()],b=0;b<arguments.length;b++){var c=arguments[b];if(u.is_vector(c))for(var d=0;d<c.length;d++)a.push(c[d]);else a.push(arguments[b])}L.push(a)};a.msg=function(){for(var a=1,b=0;b<L.length;b++){var c=L[b];c[1]==arguments[0]&&a++}c=[a];for(b=0;b<arguments.length;b++)if(a=arguments[b],u.is_vector(a))for(var d=
0;d<a.length;d++)c.push(a[d]);else c.push(arguments[b]);L.push(c)};var K=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];a.print_telemetry=function(a){a||(a=1);for(var b=0,c={},d=Math.max(0,performance.now()-1E3*a),g=0;g<L.length;g++){var m=L[g];a=m[0];if(!(a<d)){var e=String(m[1]);c[e]||(c[e]=K[b++%K.length]);a=["%c"+(a/1E3).toFixed(6),c[e],e];for(e=2;e<m.length;e++)a.push(m[e]);w.log.apply(this,a)}}L.splice(0)};a.plot_telemetry=function(a){a||(a=1);for(var b=
{},c=Math.max(0,performance.now()-1E3*a),d=0;d<L.length;d++){var g=L[d];a=g[0];if(!(a<c))for(var m=2;m<g.length;m++){var e=String(g[1]);3<g.length&&(e+="_"+String(m-2));b[e]||(b[e]=e+"\n");b[e]+=String(a)+" "+g[m]+"\n"}}a="";for(e in b)a+=b[e]+"\n\n";w.log(a);L.splice(0)};a.BY=function(a){function b(a){return-1<c.indexOf(a)?!0:!1}var c=navigator.userAgent.toLowerCase();switch(a.toLowerCase()){case "chrome":return b("mozilla")&&b("applewebkit")&&b("chrome");case "firefox":return b("mozilla")&&b("gecko")&&
b("firefox");case "msie":return b("mozilla")&&b("trident")&&b("msie");case "opera":return b("opera")&&b("presto");case "safari":return b("mozilla")&&b("applewebkit")&&b("safari")&&!b("chrome");default:return!1}};a.check_finite=function(a){if(u.is_vector(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};a.qY=function(a,b){a.constructor!=b&&u.K("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+b+">")};a.rY=l;a.sY=function(a){S?
l(a,I):S=!0;I=null!=a&&"object"==typeof a?u.Oq(a):a};a.fake_load=function(a,b,c,d,g){(a=a||null)||u.K("Stage load callback is undefined");b=b||5E3;c=c||0;d=d||100;100<d&&u.K("Max percentage must be less than 100");0>c&&u.K("Min percentage must be greater than 0");c>d&&u.K("Max percentage must be greater than min percentage");var m=F.animate(c,d,b,function(b){b=b.toFixed();a(b);100==b&&(F.clear_animation(m),g&&g())})};a.sT=function(a){return H.uF(a,function(a,b){var c=b.type+"("+b.name+")",d=b.inputs,
c=c+"\n\nINPUTS:";if(d.length)for(var g=0;g<d.length;g++)c+="\n"+d[g].identifier+": ",c=d[g].Ma?c+"linked":c+d[g].Ia;else c+="\n---";d=b.outputs;c+="\n\nOUTPUTS:";if(d.length)for(g=0;g<d.length;g++)c+="\n"+d[g].identifier+": ",c=d[g].Ma?c+("linked(default "+d[g].Ia+")"):c+"not used";else c+="\n---";g="";switch(b.type){case "GEOMETRY_UV":g="\nuv_layer: "+b.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":g="\ntexture: "+b.data.value.name+"\n("+b.data.value.Ao+")"}""==g&&(g="\n---");return c+
"\n\nDATA:"+g},function(b,c,d){b=H.$a(a,b);c=H.$a(a,c);return b.outputs[d[0]].identifier+"\n==>\n"+c.inputs[d[1]].identifier})};a.sv=function(){return B};a.cleanup=function(){z=null;m={}};a.reset=function(){B=null}};b4w.module.__extensions=function(a,t){function e(a){if(a in l)return l[a];var b=q.getExtension(a)||null;l[a]=b;h.log("%cGET EXTENSION","color: #"+(b?"0a0":"a00"),a);return b}function c(a){if(a in l)return l[a];switch(a){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":var b={};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":b=q;break;default:b=q.getExtension(a)||null}l[a]=b;h.log("%cGET EXTENSION (WebGL 2)","color: #"+
(b?"0a0":"a00"),a);return b}var b=t("__config"),h=t("__print"),f=b.L,q=null,l={};a.yg=function(a){q=a};a.lG=function(){return e("WEBGL_compressed_texture_s3tc")||e("WEBKIT_WEBGL_compressed_texture_s3tc")};a.kG=function(){return e("WEBKIT_WEBGL_compressed_texture_pvrtc")||e("WEBGL_compressed_texture_pvrtc")};a.jR=function(){return f.Gb?c("WEBGL_depth_texture"):e("WEBGL_depth_texture")||e("WEBKIT_WEBGL_depth_texture")};a.iA=function(){return e("EXT_texture_filter_anisotropic")||e("WEBKIT_EXT_texture_filter_anisotropic")};
a.nG=function(){return f.Gb?c("EXT_shader_texture_lod"):e("EXT_shader_texture_lod")};a.hR=function(){return e("WEBGL_debug_shaders")};a.get_renderer_info=function(){return e("WEBGL_debug_renderer_info")};a.gG=function(){return f.Gb?c("OES_element_index_uint"):e("OES_element_index_uint")};a.qA=function(){return f.Gb?c("OES_standard_derivatives"):e("OES_standard_derivatives")};a.mA=function(){var a=f.Gb?c("EXT_disjoint_timer_query_webgl2"):e("EXT_disjoint_timer_query");return null==a?a:a.createQueryEXT?
{createQuery:function(){return a.createQueryEXT()},beginQuery:function(b){a.beginQueryEXT(a.TIME_ELAPSED_EXT,b)},endQuery:function(){a.endQueryEXT(a.TIME_ELAPSED_EXT)},aG:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_AVAILABLE_EXT)},bG:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_EXT)},$F:function(){return a.GPU_DISJOINT_EXT}}:{createQuery:function(){return q.createQuery()},beginQuery:function(b){q.beginQuery(a.TIME_ELAPSED_EXT,b)},endQuery:function(){q.endQuery(a.TIME_ELAPSED_EXT)},
aG:function(a){return q.getQueryParameter(a,q.QUERY_RESULT_AVAILABLE)},bG:function(a){return q.getQueryParameter(a,q.QUERY_RESULT)},$F:function(){return a.GPU_DISJOINT_EXT}}};a.yR=function(){if(f.Gb)return c("ANGLE_instanced_arrays");var a=e("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(b,c,d,e,f){a.drawElementsInstancedANGLE(b,c,d,e,f)},vertexAttribDivisor:function(b,c){a.vertexAttribDivisorANGLE(b,c)},drawArraysInstanced:function(b,c,d,e){a.drawArraysInstancedANGLE(b,
c,d,e)}}};a.sA=function(){if(f.Gb)return c("OES_vertex_array_object");var a=e("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(b){a.bindVertexArrayOES(b)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(b){a.deleteVertexArrayOES(b)},isVertexArray:function(b){return a.isVertexArrayOES(b)}}};a.cleanup=function(){l={}};a.reset=function(){q=null}};b4w.module.__graph=function(a,t){function e(a,b,d){d||(d=null);c(a,b)?G.K("Graph already has node with given ID"):a.Z.push(b,d)}function c(a,b){for(var c=a.Z,d=0;d<c.length;d+=2)if(c[d]==b)return!0;return!1}function b(a,b,d,g){g||(g=null);c(a,b)&&c(a,d)?a.Ca.push(b,d,g):G.K("Wrong node IDs")}function h(a,b){c(a,b)||G.K("Node not found");for(var d=a.Z,g=0;g<d.length;g+=2)d[g]==b&&(d.splice(g,2),g-=2)}function f(a,b,c,d){B(a,b,c)||G.K("Edge not found");a=a.Ca;for(var g=0,m=0;m<a.length;m+=3)if(a[m]==
b&&a[m+1]==c){if(-1==d)a.splice(m,3);else{if(d==g){a.splice(m,3);break}g++}m-=3}}function q(a){a=a.Z;for(var b=-1,c=0;c<a.length;c+=2)b=Math.max(b,a[c]);return++b}function l(a,b){for(var c=a.Z,d=0;d<c.length;d+=2)if(c[d+1]==b)return c[d];return-1}function x(a){var b=[],c={};y(a,c);for(var d=a.Z,g=0;g<d.length;g+=2)0==u(a,d[g])&&p(a,d[g],c,b);return{Z:b,Ca:a.Ca.slice(0)}}function y(a,b){for(var c=a.Z,d=0;d<c.length;d+=2)b[c[d]]=!1}function p(a,b,c,d){if(!c[b]){c[b]=!0;for(var m=0;m<F(a,b);m++)p(a,
g(a,b,m),c,d);d.unshift(b,k(a,b))}}function d(a,b,c,e){if(!c[b]){c[b]=!0;if(10==e||30==e)for(var m=0;m<F(a,b);m++){var f=g(a,b,m);d(a,f,c,e)}if(20==e||30==e)for(m=0;m<u(a,b);m++)f=D(a,b,m),d(a,f,c,e)}}function v(a){for(var b=a.Ca,d=0;d<b.length;d+=3){var g=b[d+1];c(a,b[d])&&c(a,g)||(b.splice(d,3),d-=3)}}function r(a){for(var b=[],c=a.Z,d=0;d<c.length;d+=2){var g=c[d];F(a,g)||b.push(g)}return b}function H(a){var b=a.Z;a=a.Ca;for(var c=[],d=[],g=[],e=0;e<b.length;e++)g[b[2*e]]=e,c.push(e,b[2*e+1]);
for(e=0;e<a.length;e+=3)d.push(g[a[e]],g[a[e+1]],a[e+2]);return{Z:c,Ca:d}}function E(a,b,c){if(c.oi==c.al){for(var d=0,e=0;d<c.al;d++)-1!=c.pj[d]&&(a[e]=d,b[e]=c.pj[d],e++);return!0}if(c.al>c.Oo||c.yl>c.zl||c.Bp>c.Dp||c.Ap>c.Cp)return!1;for(var e=d=-1,m=!1;!m&&w(c,z,d,e);)if(d=z[0],e=z[1],n(c,d,e)){var f;f=c;m={};m.wr=f.wr;m.xr=f.xr;m.rB=f.rB;m.Tu=f.Tu;m.al=f.al;m.Oo=f.Oo;m.order=f.order;m.oi=m.Kw=f.oi;m.Ap=f.Ap;m.Bp=f.Bp;m.yl=f.yl;m.Cp=f.Cp;m.Dp=f.Dp;m.zl=f.zl;m.oq=-1;m.pj=f.pj;m.mm=f.mm;m.Hm=f.Hm;
m.Im=f.Im;m.Zm=f.Zm;m.$m=f.$m;m.px=f.px;f.px[0]+=1;var m=f=m,h=d,k=e,p=m.wr,l=m.xr,I=m.al,r=m.Oo,v=m.pj,B=m.mm,A=m.Hm,H=m.Im,G=m.Zm,q=m.$m;C(h<I);C(k<r);C(m.oi<I);C(m.oi<r);I=++m.oi;m.oq=h;A[h]||(A[h]=I,m.Ap++,G[h]&&m.yl++);G[h]||(G[h]=I,m.Bp++,A[h]&&m.yl++);H[k]||(H[k]=I,m.Cp++,q[k]&&m.zl++);q[k]||(q[k]=I,m.Dp++,H[k]&&m.zl++);v[h]=k;B[k]=h;for(v=0;v<u(p,h);v++)B=D(p,h,v),A[B]||(A[B]=I,m.Ap++,G[B]&&m.yl++);for(v=0;v<F(p,h);v++)B=g(p,h,v),G[B]||(G[B]=I,m.Bp++,A[B]&&m.yl++);for(v=0;v<u(l,k);v++)B=D(l,
k,v),H[B]||(H[B]=I,m.Cp++,q[B]&&m.zl++);for(v=0;v<F(l,k);v++)B=g(l,k,v),q[B]||(q[B]=I,m.Dp++,H[B]&&m.zl++);m=E(a,b,f);C(1>=f.oi-f.Kw);C(-1!=f.oq);B=f.wr;h=f.xr;k=f.oi;p=f.oq;l=f.pj;A=f.mm;I=f.Hm;H=f.Im;r=f.Zm;G=f.$m;if(f.Kw<k){I[p]==k&&(I[p]=0);for(q=0;q<u(B,p);q++)v=D(B,p,q),I[v]==k&&(I[v]=0);r[p]==k&&(r[p]=0);for(q=0;q<F(B,p);q++)v=g(B,p,q),r[v]==k&&(r[v]=0);B=l[p];H[B]==k&&(H[B]=0);for(q=0;q<u(h,B);q++)v=D(h,B,q),H[v]==k&&(H[v]=0);G[B]==k&&(G[B]=0);for(q=0;q<F(h,B);q++)v=g(h,B,q),G[v]==k&&(G[v]=
0);l[p]=-1;A[B]=-1;f.oi=f.Kw;f.oq=-1}}return m}function w(a,b,c,d){-1==c&&(c=0);-1==d?d=0:d++;var g=a.yl,e=a.zl,m=a.Bp,f=a.Dp,h=a.Ap,k=a.Cp,p=a.oi,l=a.al,n=a.Oo,u=a.pj,I=a.mm,r=a.Hm,v=a.Im,D=a.Zm,B=a.$m;if(g>p&&e>p)for(;c<l&&(-1!=u[c]||0==D[c]||0==r[c]);)c++,d=0;else if(m>p&&f>p)for(;c<l&&(-1!=u[c]||0==D[c]);)c++,d=0;else if(h>p&&k>p)for(;c<l&&(-1!=u[c]||0==r[c]);)c++,d=0;else if(0==c&&0!=a.order){for(r=0;r<l&&-1!=u[c=a.order[r]];)r++;r==l&&(c=l)}else for(;c<l&&-1!=u[c];)c++,d=0;if(g>p&&e>p)for(;d<
n&&(-1!=I[d]||0==B[d]||0==v[d]);)d++;else if(m>p&&f>p)for(;d<n&&(-1!=I[d]||0==B[d]);)d++;else if(h>p&&k>p)for(;d<n&&(-1!=I[d]||0==v[d]);)d++;else for(;d<n&&-1!=I[d];)d++;return c<l&&d<n?(b[0]=c,b[1]=d,!0):!1}function n(a,b,c){var d=a.wr,e=a.xr,m=a.Oo,f=a.pj,h=a.mm,p=a.Hm,l=a.Im,n=a.Zm,I=a.$m;C(b<a.al);C(c<m);C(-1==f[b]);C(-1==h[c]);if(!(0,a.rB)(k(d,b),k(e,c)))return!1;for(var r=m=0,v=0,A=0,z=0,H=0,w=0;w<F(d,b);w++){var q=g(d,b,w);if(-1!=f[q]){var G=f[q];if(!B(e,c,G)||!N(a.Tu,d,b,q,e,c,G))return!1}else p[q]&&
v++,n[q]&&m++,p[q]||n[q]||z++}for(w=0;w<u(d,b);w++)if(q=D(d,b,w),-1!=f[q]){if(G=f[q],!B(e,G,c)||!N(a.Tu,d,q,b,e,G,c))return!1}else p[q]&&v++,n[q]&&m++,p[q]||n[q]||z++;for(w=0;w<F(e,c);w++)if(G=g(e,c,w),-1!=h[G]){if(q=h[G],!B(d,b,q))return!1}else l[G]&&A++,I[G]&&r++,l[G]||I[G]||H++;for(w=0;w<u(e,c);w++)if(G=D(e,c,w),-1!=h[G]){if(q=h[G],!B(d,q,b))return!1}else l[G]&&A++,I[G]&&r++,l[G]||I[G]||H++;return v<=A&&m<=r&&z<=H}function C(a){a||G.K("Assertion failed")}function k(a,b){for(var c=a.Z,d=0;d<c.length;d+=
2)if(c[d]==b)return c[d+1];return null}function F(a,b){for(var c=a.Ca,d=0,g=0;g<c.length;g+=3)c[g]==b&&d++;return d}function u(a,b){for(var c=a.Ca,d=0,g=0;g<c.length;g+=3)c[g+1]==b&&d++;return d}function g(a,b,c){a=a.Ca;for(var d=0,g=0;g<a.length;g+=3)if(a[g]==b){if(d==c)return a[g+1];d++}return-1}function D(a,b,c){a=a.Ca;for(var d=0,g=0;g<a.length;g+=3)if(a[g+1]==b){if(d==c)return a[g];d++}return-1}function B(a,b,c){a=a.Ca;for(var d=0;d<a.length;d+=3)if(a[d]==b&&a[d+1]==c)return!0;return!1}function N(a,
b,c,d,g,e,f){for(var m=L(b,c,d),h=L(g,e,f),k=0;k<m;k++){for(var p=!1,l=0;l<h;l++)if(a(A(b,c,d,k),A(g,e,f,l))){p=!0;break}if(!p)return!1}return!0}function L(a,b,c){var d=0;a=a.Ca;for(var g=0;g<a.length;g+=3)a[g]==b&&a[g+1]==c&&d++;return d}function A(a,b,c,d){a=a.Ca;for(var g=0,e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==c){if(g==d)return a[e+2];g++}return null}var G=t("__util"),z=[-1,-1];a.Ry=-1;a.CX=10;a.nk=20;a.LX=30;a.create=function(){for(var a=arguments,b=[],c=[],d=0;d<a.length;d++){var g=a[d];switch(g.length){case 2:b.push(g[0],
g[1]);break;case 3:c.push(g[0],g[1],g[2]);break;default:G.K("Wrong graph constructor params")}}return{Z:b,Ca:c}};a.clone=function(a,b,c){if(b)for(var d=Array(a.Z.length),g=0;g<a.Z.length;g+=2)d[g]=a.Z[g],d[g+1]=b(a.Z[g+1]);else d=G.W(a.Z);if(c)for(b=Array(a.Ca.length),g=0;g<a.Ca.length;g+=3)b[g]=a.Ca[g],b[g+1]=a.Ca[g+1],b[g+2]=c(a.Ca[g+2]);else b=G.W(a.Ca);return a={Z:d,Ca:b}};a.KY=function(a,b){for(var c=[],d=[],g=0;g<a.length;g++)c.push(a[g][0],a[g][1]);for(g=0;g<b.length;g++)d.push(b[g][0],b[g][1],
b[g][2]);return{Z:c,Ca:d}};a.uh=e;a.uZ=c;a.Ec=b;a.If=h;a.ol=f;a.Sh=function(a,b,c,d){B(a,b,c)||G.K("Edge not found");a=a.Ca;for(var g=0;g<a.length;g+=3)if(a[g]==b&&a[g+1]==c&&a[g+2][0]==d[0]&&a[g+2][1]==d[1]){a.splice(g,3);break}};a.Y=function(a,b){if(-1==l(a,b)){var c=q(a);e(a,c,b);return c}G.K("Non-unique attribute")};a.kU=function(a,b,c,d,g){a=a.Ca;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==c&&a[e+2]==d&&(a[e+2]=g)};a.aE=function(a,c,d,g){d=d||[];g=g||[];for(var f={},m=0;m<a.Z.length;m+=2){var h=
a.Z[m],k=q(c);e(c,k,a.Z[m+1]);f[h]=k}for(m=0;m<a.Ca.length;m+=3){var k=f[a.Ca[m]],p=f[a.Ca[m+1]],h=a.Ca[m+2];b(c,k,p,h)}for(m=0;m<d.length;m+=3)k=f[d[m]],a=d[m+1],h=d[m+2],b(c,k,a,h);for(m=0;m<g.length;m+=3)d=g[m],p=f[g[m+1]],h=g[m+2],b(c,d,p,h)};a.yj=q;a.Nj=l;a.I=function(a,c,d,g){c=l(a,c);d=l(a,d);-1!=c&&-1!=d?b(a,c,d,g):G.K("Attributes not found")};a.ea=function(a,b){for(var c=a.Z,d=0;d<c.length&&!b(c[d],c[d+1]);d+=2);};a.oh=function(a,b){for(var c=a.Ca,d=0;d<c.length&&!b(c[d],c[d+1],c[d+2]);d+=
3);};a.hk=function(a,b,c){for(var d=a.Ca,g=0;g<d.length;g+=3)if(d[g+1]==b){var e=d[g];if(c(e,k(a,e),d[g+2]))break}};a.Cl=function(a,b,c){for(var d=a.Ca,g=0;g<d.length;g+=3)if(d[g]==b){var e=d[g+1];if(c(e,k(a,e),d[g+2]))break}};a.BC=x;a.VV=function(a){a=x(a).Z;for(var b=[],c=0;c<a.length;c+=2)b.push(a[c+1]);return b};a.IZ=function(){};a.wl=function(a,b,g){c(a,b)||G.K("No such node");var e={};y(a,e);d(a,b,e,g);b=[];for(var f in e)e[f]&&(f=Number(f),b.push(f,k(a,f)));a={Z:b,Ca:a.Ca.slice(0)};v(a);return a};
a.wz=v;a.FR=function(a){for(var b=[],c=a.Z,d=0;d<c.length;d+=2){var g=c[d];u(a,g)||b.push(g)}return b};a.Cr=r;a.match=function(a,b,c,d){var g={};g.wr=H(a);g.xr=H(b);g.rB=c||function(a,b){return a==b};g.Tu=d||function(a,b){return a==b};d=a.Z.length/2;var e=b.Z.length/2;g.al=d;g.Oo=e;g.order=0;g.oi=g.Kw=0;g.yl=g.Ap=g.Bp=0;g.zl=g.Cp=g.Dp=0;g.oq=-1;g.pj=Array(d);g.mm=Array(e);g.Hm=Array(d);g.Im=Array(e);g.Zm=Array(d);g.$m=Array(e);g.px=[1];for(c=0;c<d;c++)g.pj[c]=-1,g.Hm[c]=0,g.Zm[c]=0;for(c=0;c<e;c++)g.mm[c]=
-1,g.Im[c]=0,g.$m[c]=0;e=Array(d);d=Array(d);if(E(e,d,g)){for(c=0;c<e.length;c++)e[c]=a.Z[2*e[c]],d[c]=b.Z[2*d[c]];return[e,d]}return null};a.BR=function(a,b){for(var c=a.Z,d=1;d<c.length;d+=2)if(c[d]==b)return c[d-1];return null};a.$a=k;a.vg=F;a.zi=u;a.Vg=g;a.ng=D;a.iZ=L;a.Oc=A;a.replace=function(a,b,c){for(var d=a.Ca,g=q(a),f=0;f<b.length;f++){var m=b[f];h(a,m);for(var k=0;k<d.length;k+=3)d[k]==m&&(d[k]=g),d[k+1]==m&&(d[k+1]=g),d[k]==d[k+1]&&(d.splice(k,3),k-=3)}e(a,g,c)};a.$T=function(a,b,c,d,
g){B(a,b,c)||G.K("Edge not found");a=a.Ca;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==c&&(a[e]=d,a[e+1]=g)};a.jQ=function(a,b){function c(a,b){if(-1!=k.indexOf(a)){var d=k.slice(k.indexOf(a));if(-1!=g[d[d.length-1]].indexOf(d[0])){p.push([a,d[d.length-1]]);return}}k.push(a);for(d=0;d<b.length;d++)b[d]in g&&c(b[d],g[b[d]])}b||(b=r(a)[0]);var d=a.Ca;if(d.length&&-1!=d.indexOf(b)){for(var g={},e=0,h=0;h<d.length;h+=3)d[h+1]in g?g[d[h+1]].push(d[h]):g[d[h+1]]=[d[h]],e++;var k=[],p=[];c(b,g[b]);for(h=
0;h<p.length;h++)for(var l=e=0;l<d.length;l+=3)p[h][1]==d[l+1]&&p[h][0]==d[l]&&f(a,d[l],d[l+1],e),e++}};a.uF=function(a,b,c){var d=a.Z;a=a.Ca;var g;g="digraph debug {\n    node [shape=box];\n";for(var e=0;e<d.length;e+=2){var f=d[e],m=d[e+1],m=b?b(f,m):String(f);g+="    ";g+=String(f)+' [label="'+m.replace(/\"/g,'\\"')+'"];\n'}for(e=0;e<a.length;e+=3)b=a[e],d=a[e+1],m=a[e+2],g+="    ",g+=String(b)+" -> "+String(d),c&&(g+=' [label="'+c(b,d,m)+'"]'),g+=";\n";return g+"}"}};b4w.module.__ipc=function(a,t){function e(a,b,c){for(var g=0;g<v.length;g+=2)v[g+1]==a&&(d[g+Number(!b)]=c)}function c(a){for(var b=0;b<a.length;b++){var c=a[b],d=0,e;for(e in c){var f=c[e];switch(f.constructor){case Float32Array:d+=f.length;break;case Number:d+=1}}--d;c.len=d}}var b=!0;a.JK=0;a.lD=1;a.mD=2;a.DK=3;a.FK=4;a.GK=5;a.HK=6;a.KK=7;a.nD=8;a.Oy=9;a.oD=10;a.MK=11;a.pD=12;a.NK=13;a.LK=14;a.IK=15;a.EK=16;var h=a.lD,f=a.mD,q=a.nD,l=a.Oy,x=a.oD,y=a.pD;a.XL=100;a.yL=101;a.zL=102;a.AL=103;a.BL=
104;a.DL=105;a.CL=106;a.EL=107;a.FL=108;a.GL=109;a.HL=110;a.IL=111;a.JL=112;a.LL=113;a.ML=114;a.$L=115;a.NL=116;a.OL=117;a.PL=118;a.RL=119;a.SL=120;a.TL=121;a.VL=122;a.WL=123;a.YL=124;a.KL=125;a.bM=126;a.QL=127;a.CD=128;a.aM=129;a.cM=130;a.eM=131;a.fM=132;a.gM=133;a.hM=134;a.iM=135;a.jM=136;a.lM=137;a.mM=138;a.nM=139;a.DD=140;a.hq=141;a.oM=142;a.BD=143;a.pM=144;a.qM=145;a.ZL=146;a.UL=147;a.rM=148;a.dM=149;a.kM=150;var p=a.hq,d=b4w.worker_listeners,v=b4w.worker_namespaces,r={sg:y,ia:0,time:0,trans:new Float32Array(3),
quat:new Float32Array(4),Fi:new Float32Array(3),ci:new Float32Array(3),len:0},H={sg:q,sz:0,KB:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},E={sg:l,id:0,Vn:0,hit_fract:0,hit_time:0,len:0},w={sg:x,id:0,Vn:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},n={sg:h,dm:0,em:0,result:0,len:0},C={sg:f,dm:0,em:0,result:0,jm:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},k={sg:p,ia:0,trans:new Float32Array(3),quat:new Float32Array(4),
len:0},F=[r,H,E,w,n,C,k];a.IP=function(a,c){var g={Zv:a?!0:!1,lk:null,ii:[],Qg:""};if(c){var f=t("__util"),h=t("__container");g.lk={addEventListener:function(a,b){"message"!=a&&f.K("Wrong web worker event");e(g.Qg,g.Zv,b)},removeEventListener:function(a){"message"!=a&&f.K("Wrong web worker event");e(g.Qg,g.Zv,null)},postMessage:function(a){var b;a:{for(b=0;b<v.length;b+=2)if(v[b+1]==g.Qg){b=d[b+Number(!!g.Zv)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<v.length;a+=2)if(v[a+1]==
g.Qg){d.splice(a,2);v.splice(a,2);break}}};if(g.Zv){var k=b4w.get_namespace(t),p=f.Ys(k+"_worker");v.push(k);v.push(p);d.push(null);d.push(null);g.Qg=p;(h=h.zQ(a))?b?h.addEventListener("load",function(){b4w.require("__bindings",g.Qg)},!1):(b4w.cleanup("__bindings",g.Qg),b4w.cleanup("__ipc",g.Qg),b4w.require("__bindings",g.Qg)):(h=document.createElement("script"),h.src=a,h.defer="defer",h.async="async",h.addEventListener("load",function(){b=!1;b4w.require("__bindings",g.Qg)},!1),document.head.appendChild(h))}else g.Qg=
b4w.get_namespace(t)}else a?g.lk=new Worker(a):g.lk=self;return g};a.iN=function(a,b){function d(c){if(c.constructor==ArrayBuffer)c=new Float32Array(c);else if(c[0].constructor==ArrayBuffer){for(var g=0;g<c.length;g++)d(c[g]);return}g=c[0]|0;switch(g){case y:var e=r;e.ia=c[1]|0;e.time=c[2];e.trans[0]=c[3];e.trans[1]=c[4];e.trans[2]=c[5];e.quat[0]=c[6];e.quat[1]=c[7];e.quat[2]=c[8];e.quat[3]=c[9];e.Fi[0]=c[10];e.Fi[1]=c[11];e.Fi[2]=c[12];e.ci[0]=c[13];e.ci[1]=c[14];e.ci[2]=c[15];break;case q:e=H;e.sz=
c[1]|0;e.KB=c[2]|0;e.trans[0]=c[3];e.trans[1]=c[4];e.trans[2]=c[5];e.quat[0]=c[6];e.quat[1]=c[7];e.quat[2]=c[8];e.quat[3]=c[9];break;case l:e=E;e.id=c[1]|0;e.Vn=c[2]|0;e.hit_fract=c[3];e.hit_time=c[4];break;case x:e=w;e.id=c[1]|0;e.Vn=c[2]|0;e.hit_fract=c[3];e.hit_time=c[4];e.hit_pos[0]=c[5];e.hit_pos[1]=c[6];e.hit_pos[2]=c[7];e.hit_norm[0]=c[8];e.hit_norm[1]=c[9];e.hit_norm[2]=c[10];break;case h:e=n;e.dm=c[1]|0;e.em=c[2]|0;e.result=!!c[3];break;case f:e=C;e.dm=c[1]|0;e.em=c[2]|0;e.result=!!c[3];
e.jm[0]=c[4];e.jm[1]=c[5];e.jm[2]=c[6];e.coll_norm[0]=c[7];e.coll_norm[1]=c[8];e.coll_norm[2]=c[9];e.coll_dist=c[10];break;case p:e=k;e.ia=c[1]|0;e.trans[0]=c[2];e.trans[1]=c[3];e.trans[2]=c[4];e.quat[0]=c[5];e.quat[1]=c[6];e.quat[2]=c[7];e.quat[3]=c[8];break;default:e=c}b(a,g,e)}c(F);a.lk.addEventListener("message",function(a){d(a.data)},!1)};a.cleanup=function(){};a.na=function(a,b){if(a)switch(b){case y:var c=r,d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.ia;d[2]=c.time;d[3]=c.trans[0];d[4]=c.trans[1];
d[5]=c.trans[2];d[6]=c.quat[0];d[7]=c.quat[1];d[8]=c.quat[2];d[9]=c.quat[3];d[10]=c.Fi[0];d[11]=c.Fi[1];d[12]=c.Fi[2];d[13]=c.ci[0];d[14]=c.ci[1];d[15]=c.ci[2];a.ii.push(d.buffer);break;case q:c=H;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.sz;d[2]=c.KB;d[3]=c.trans[0];d[4]=c.trans[1];d[5]=c.trans[2];d[6]=c.quat[0];d[7]=c.quat[1];d[8]=c.quat[2];d[9]=c.quat[3];a.ii.push(d.buffer);break;case l:c=E;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.id;d[2]=c.Vn;d[3]=c.hit_fract;d[4]=c.hit_time;a.ii.push(d.buffer);
break;case x:c=w;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.id;d[2]=c.Vn;d[3]=c.hit_fract;d[4]=c.hit_time;d[5]=c.hit_pos[0];d[6]=c.hit_pos[1];d[7]=c.hit_pos[2];d[8]=c.hit_norm[0];d[9]=c.hit_norm[1];d[10]=c.hit_norm[2];a.ii.push(d.buffer);break;case h:c=n;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.dm;d[2]=c.em;d[3]=c.result;a.ii.push(d.buffer);break;case f:c=C;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.dm;d[2]=c.em;d[3]=c.result;d[4]=c.jm[0];d[5]=c.jm[1];d[6]=c.jm[2];d[7]=c.coll_norm[0];d[8]=c.coll_norm[1];
d[9]=c.coll_norm[2];d[10]=c.coll_dist;a.ii.push(d.buffer);break;case p:c=k;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.ia;d[2]=c.trans[0];d[3]=c.trans[1];d[4]=c.trans[2];d[5]=c.quat[0];d[6]=c.quat[1];d[7]=c.quat[2];d[8]=c.quat[3];a.ii.push(d.buffer);break;default:d=[];for(c=1;c<arguments.length;c++)d.push(arguments[c]);a.lk.postMessage(d)}};a.OT=function(a){a&&a.ii.length&&(a.lk.postMessage(a.ii),a.ii.length=0)};a.jG=function(a){switch(a){case y:return r;case q:return H;case l:return E;case x:return w;
case h:return n;case f:return C;case p:return k;default:return null}};a.terminate=function(a){a.lk.terminate();a.lk=null};a.Vv=function(a){return!!a.lk};a.QG=function(a){return!!a.Qg}};b4w.module.__hud=function(a,t){function e(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=0;a.shadowColor=null}function c(a){b(' SCENE "'+a.name+'"');b(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(a.J){var c=0,d=0,e=0;l.ea(a.J.wa,function(a,f){if(f.type!=x.qk){for(var h=Math.round(f.H.width)+"x"+Math.round(f.H.height),k=0,p=0;p<f.Za.length;p++)k+=f.Za[p].La.length;p=f.Ek;if(f.type==x.ud||f.type==x.jf)k*=6;var l=f.$b&&!f.xm,g=l?f.vf:0;f.enqueue||
(f.vf=0);var n=l?" (\u2713)":" (\u2715)",r=x.Rx(f);b(n,r,f.Wo,h,p,"of",k,"  ",g.toFixed(3));f.Ek=0;c+=k;l&&(d+=p,e+=g)}});return[c,d,e]}b("No INFO")}function b(){for(var a=80+20*d[0],b=arguments[0],c=1;c<arguments.length;c++){for(var e="",f=0;f<y[c]-String(arguments[c]).length;f++)e+=" ";b+=e+arguments[c]}d[0]++;p.fillText(b,30,a)}function h(a,b,c){b=a.zc*b;c.x=a.x+b;c.y=a.y;c.zc=a.zc-2*b;c.Ub=a.Ub}function f(a){return a.x+a.zc/2}function q(a){var b=p,c={x:0,y:0,zc:0,Ub:0},d=b.canvas.width,b=b.canvas.height;
c.x=0;c.y=0;c.zc=d;c.Ub=b;h(c,.01,c);d=.02*c.Ub;c.x=c.x;c.y+=d;c.zc=c.zc;c.Ub=c.Ub-2*d;d=c.zc/8;c.x+=d*a;c.y=c.y;c.zc=d;c.Ub=c.Ub;h(c,.02,c);return c}var l=t("__graph"),x=t("__subscene"),y=[5,30,4,10,5,3,5],p=null,d=[0,0];a.init=function(a){a=a.getContext("2d");e(a);return p=a};a.qn=function(){p&&e(p)};a.reset=function(){var a=p;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),d[0]=0,d[1]=0)};a.sV=function(a,e){var f=
p;if(f){f.textAlign="left";f.fillStyle="rgba(0,255,0,255)";b(" FPS",(1/e).toFixed(2));d[0]++;for(var h=f=0,l=0,n=0;n<a.length;n++){var r=c(a[n]),f=f+r[0],h=h+r[1],l=l+r[2];d[0]++}b(" ----------------------------------------------------------------");b("    ","TOTAL ACTIVE","","",h,"of",f,"  ",l.toFixed(3))}};a.print=function(){var a=p;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",b.apply(Math,arguments))};a.plot_array=function(a,b,c,d,e,h,l){var k=p;if(k){b=q(b);var n=b.Ub/5;b.x=b.x;b.y+=
4*n;b.zc=b.zc;b.Ub=n;k.textAlign="center";k.fillStyle="#00FF00";p.fillText(a,f(b),b.y-10);k.strokeStyle="#00FF00";k.lineWidth=.5;k.beginPath();k.moveTo(b.x,b.y);k.lineTo(b.x+b.zc,b.y);k.lineTo(b.x+b.zc,b.y+b.Ub);k.lineTo(b.x,b.y+b.Ub);k.closePath();k.stroke();if(!h&&!l)for(h=1E6,l=-1E6,a=0;a<c.length;a++)h=Math.min(h,c[a]),l=Math.max(l,c[a]);k.textAlign="right";p.fillText(String(h),b.x-10,b.y+b.Ub);p.fillText(String(l),b.x-10,b.y);k.textAlign="center";p.fillText(String(d),b.x,b.y+b.Ub+15);p.fillText(String(e),
b.x+b.zc,b.y+b.Ub+15);k.strokeStyle="#FF0000";k.lineWidth=1.5;k.beginPath();d=b.zc/(c.length-1);l=b.Ub/(l-h);for(a=0;a<c.length;a++)e=b.x+d*a,n=b.y+b.Ub-(c[a]-h)*l,a?k.lineTo(e,n):k.moveTo(e,n);k.stroke()}};a.draw_mixer_strip=function(a,b,c,d,e,h,l){var k=p;if(k)for(k.textAlign="center",k.fillStyle="#00FF00",k.font="bold 12px Courier",c=q(c),p.fillText(b?"["+a+"]":a,f(c),c.y),0<=h&&p.fillText(h?"[M]":"[ ]",f(c)-15,c.y+30),0<=l&&p.fillText(l?"[S]":"[ ]",f(c)+15,c.y+30),a={x:0,y:0,zc:0,Ub:0},b=0;b<
d.length;b++){h=d[b];var n="VOLUME"==h[0];if(n){l=c.y+350;var u=c.zc,g=a;g.x=c.x;g.y=l;g.zc=u;g.Ub=250}else{l=c.y+50+50*b;var u=c.zc,g=c.Ub,r=a;r.x=c.x;r.y=l;r.zc=u;r.Ub=g}l=k;var u=a,r=b==e,v=h[0],g=h[1],w=h[2],H=h[3],A=(H-w)/h[4],A=1>A?Math.floor(1/A-1E-5).toFixed(0).length:0;h=h[5]?Math.log(g/w)/Math.log(H/w):(g-w)/(H-w);l.textAlign="center";r?l.fillText("["+v+"]",f(u),u.y):l.fillText(v,f(u),u.y);l.strokeStyle="#00FF00";l.lineWidth=n?3:1;n?(l.textAlign="right",l.fillText(H.toFixed(A),f(u)-10,u.y+
15),l.textAlign="right",l.fillText(w.toFixed(A),f(u)-10,u.y+u.Ub-15)):(l.textAlign="right",l.fillText(w.toFixed(A),u.x+28,u.y+15),l.textAlign="left",l.fillText(H.toFixed(A),u.x+u.zc-28,u.y+15));l.beginPath();if(n){var G=u.y+15+(u.Ub-30)*(1-h);l.moveTo(f(u),u.y+15);l.lineTo(f(u),u.y+u.Ub-15);l.moveTo(f(u)-5,u.y+15);l.lineTo(f(u)+5,u.y+15);l.moveTo(f(u)-5,u.y+u.Ub-15);l.lineTo(f(u)+5,u.y+u.Ub-15);l.moveTo(f(u)-5,G);l.lineTo(f(u)+5,G)}else{var z=u.x+30+(u.zc-60)*h;l.moveTo(u.x+30,u.y+15);l.lineTo(u.x+
u.zc-30,u.y+15);l.moveTo(u.x+30,u.y+15-5);l.lineTo(u.x+30,u.y+15+5);l.moveTo(u.x+u.zc-30,u.y+15-5);l.lineTo(u.x+u.zc-30,u.y+15+5);l.moveTo(z,u.y+15-5);l.lineTo(z,u.y+15+5)}l.stroke();"EQ_Q"==v?(h=Math.log(1+1/(2*g*g)+Math.sqrt((2+1/(g*g))*(2+1/(g*g))/4-1))/Math.log(2),n?(l.textAlign="left",l.fillText(g.toFixed(A),f(u)+10,G),l.textAlign="left",l.fillText("("+h.toFixed(A+1)+")",f(u)+10,G+10)):(l.textAlign="right",l.fillText(g.toFixed(A),z,u.y+30),l.textAlign="left",l.fillText("("+h.toFixed(A+1)+")",
z,u.y+30))):n?(l.textAlign="left",l.fillText(g.toFixed(A),f(u)+10,G)):(l.textAlign="center",l.fillText(g.toFixed(A),z,u.y+30))}}};b4w.module.__material=function(a,t){function e(){return{name:"",type:"",Jc:"",Eg:!1,Md:null,Cg:[],ib:"",yc:!1,ny:!1,Fa:!1,oe:!1,my:!1,ht:!1,Lp:!1,ue:!1,Sj:!1,Bi:!1,Mr:!1,Om:!1,ih:0,Li:0,nd:0,Te:"",lc:new Float32Array(3),ee:0,Nu:0,Ou:0,fx:0,Lu:0,Mu:0,Eu:0,alpha:0,bf:"",ne:new Float32Array(3),Ls:0,Ix:0,Jx:0,mn:0,Gx:0,Hx:0,Jf:0,Ad:0,xd:0,ha:{Di:!1,shore_smoothing:!1,absorb_factor:0,foam_factor:0,nx:new Float32Array(3),qx:new Float32Array(3),ox:0,rx:0,wm:new Float32Array(3),gv:0,sss_strength:0,sss_width:0,
norm_uv_velocity:0,is_dynamic:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,Xv:!1,Hw:0,Iw:0,Ku:0,Vu:!1,lj:0,kj:0},Ri:{Fo:!1,lr:"",kr:""},gn:{reflect_factor:0,fresnel:0,fresnel_factor:0},wo:{size:0,Fr:0,ex:new Float32Array(3),kw:new Float32Array(3),dx:0,iw:0,Mx:0,$v:!1,Nx:0,Ox:0},od:{Kp:!1,Ui:!1,Tg:0,Pg:0,Jb:"",li:0,ki:0,mi:0}}}
var c=t("__util");a.eS=e;a.KO=function(){var a=e();a.name="DEFAULT";a.type="SURFACE";a.Jc=c.mv();a.Eg=!1;a.Md=null;a.Cg=[];a.ib="OPAQUE";a.yc=!1;a.ny=!1;a.Fa=!0;a.ht=!1;a.Lp=!1;a.Sj=!1;a.Om=!1;a.ih=0;a.Li=0;a.nd=0;a.Te="LAMBERT";a.lc.set([.8,.8,.8]);a.ee=.8;a.alpha=1;a.bf="COOKTORR";a.ne.set([1,1,1]);a.Ls=.5;a.mn=50;a.Jf=1;a.Ad=0;a.xd=1;a.ha.Di=!1;a.Ri.Fo=!1;a.gn.reflect_factor=0;a.gn.fresnel=0;a.gn.fresnel_factor=1.25;a.od.Kp=!1;return a};a.wW=function(a,c){c.name=a.name;c.type=a.type;c.Jc=a.uuid;
c.Eg=a.use_nodes;c.Md=a.node_tree;c.Cg=a.texture_slots;c.ib=a.game_settings.alpha_blend;c.yc=a.use_shadeless;c.ny=a.use_transparency;c.Fa=a.game_settings.use_backface_culling;c.oe=a.use_tangent_shading;c.my=a.use_orco_tex_coord;c.ht=a.use_vertex_color_paint;c.Lp=a.b4w_double_sided_lighting;c.ue=a.b4w_do_not_render;c.Sj=a.b4w_render_above_all;c.Bi=a.b4w_lens_flares;c.Mr=a.b4w_wettable;c.Om=a.b4w_refractive;c.ih=a.b4w_refr_bump;c.Li=a.pass_index;c.nd=a.offset_z;c.Te=a.diffuse_shader;c.lc.set(a.diffuse_color);
c.ee=a.diffuse_intensity;c.Nu=a.diffuse_toon_size;c.Ou=a.diffuse_toon_smooth;c.fx=a.roughness;c.Lu=a.diffuse_fresnel;c.Mu=a.diffuse_fresnel_factor;c.Eu=a.darkness;c.alpha=a.alpha;c.bf=a.specular_shader;c.ne.set(a.specular_color);c.Ls=a.specular_intensity;c.Ix=a.specular_toon_size;c.Jx=a.specular_toon_smooth;c.mn=a.specular_hardness;c.Gx=a.specular_ior;c.Hx=a.specular_slope;c.Jf=a.specular_alpha;c.Ad=a.emit;c.xd=a.ambient;var b=c.ha;b.Di=a.b4w_water;b.shore_smoothing=a.b4w_water_shore_smoothing;b.absorb_factor=
a.b4w_water_absorb_factor;b.foam_factor=a.b4w_foam_factor;b.nx.set(a.b4w_shallow_water_col);b.qx.set(a.b4w_shore_water_col);b.ox=a.b4w_shallow_water_col_fac;b.rx=a.b4w_shore_water_col_fac;b.wm.set(a.b4w_water_fog_color);b.gv=a.b4w_water_fog_density;b.sss_strength=a.b4w_water_sss_strength;b.sss_width=a.b4w_water_sss_width;b.norm_uv_velocity=a.b4w_water_norm_uv_velocity;b.is_dynamic=a.b4w_water_dynamic;b.waves_height=a.b4w_waves_height;b.waves_length=a.b4w_waves_length;b.dst_noise_scale0=a.b4w_water_dst_noise_scale0;
b.dst_noise_scale1=a.b4w_water_dst_noise_scale1;b.dst_noise_freq0=a.b4w_water_dst_noise_freq0;b.dst_noise_freq1=a.b4w_water_dst_noise_freq1;b.dir_min_shore_fac=a.b4w_water_dir_min_shore_fac;b.dir_freq=a.b4w_water_dir_freq;b.dir_noise_scale=a.b4w_water_dir_noise_scale;b.dir_noise_freq=a.b4w_water_dir_noise_freq;b.dir_min_noise_fac=a.b4w_water_dir_min_noise_fac;b.dst_min_fac=a.b4w_water_dst_min_fac;b.waves_hor_fac=a.b4w_water_waves_hor_fac;b.Xv=a.b4w_generated_mesh;b.Hw=a.b4w_water_num_cascads;b.Iw=
a.b4w_water_subdivs;b.Ku=a.b4w_water_detailed_dist;b.Vu=a.b4w_water_enable_caust;b.lj=a.b4w_water_caust_scale;b.kj=a.b4w_water_caust_brightness;b=c.Ri;b.Fo=a.b4w_terrain;b.lr=a.b4w_dynamic_grass_size;b.kr=a.b4w_dynamic_grass_color;b=c.gn;b.reflect_factor=a.raytrace_mirror.reflect_factor;b.fresnel=a.raytrace_mirror.fresnel;b.fresnel_factor=a.raytrace_mirror.fresnel_factor;b=c.wo;b.size=a.halo.size;b.Fr=a.halo.hardness;b.ex.set(a.halo.b4w_halo_rings_color);b.kw.set(a.halo.b4w_halo_lines_color);b.dx=
a.halo.ring_count;b.iw=a.halo.line_count;b.Mx=a.halo.star_tip_count;b.$v=a.b4w_halo_sky_stars;b.Nx=a.b4w_halo_stars_blend_height;b.Ox=a.b4w_halo_stars_min_height;b=c.od;b.Kp=a.b4w_collision;b.Ui=a.b4w_use_ghost;b.Tg=a.physics.friction;b.Pg=a.physics.elasticity;b.Jb=a.b4w_collision_id;b.li=a.b4w_collision_margin;b.ki=a.b4w_collision_group;b.mi=a.b4w_collision_mask};a.nO=function(a){a.name=a.name;a.type=a.type;a.Jc=a.Jc;a.Eg=a.Eg;a.Md=a.Md;a.Cg=a.Cg.slice();a.ib=a.ib;a.yc=a.yc;a.ny=a.ny;a.Fa=a.Fa;a.oe=
a.oe;a.my=a.my;a.ht=a.ht;a.Lp=a.Lp;a.ue=a.ue;a.Sj=a.Sj;a.Bi=a.Bi;a.Mr=a.Mr;a.Om=a.Om;a.ih=a.ih;a.Li=a.Li;a.nd=a.nd;a.Te=a.Te;a.lc.set(a.lc);a.ee=a.ee;a.Nu=a.Nu;a.Ou=a.Ou;a.fx=a.fx;a.Lu=a.Lu;a.Mu=a.Mu;a.Eu=a.Eu;a.alpha=a.alpha;a.bf=a.bf;a.ne.set(a.ne);a.Ls=a.Ls;a.Ix=a.Ix;a.Jx=a.Jx;a.mn=a.mn;a.Gx=a.Gx;a.Hx=a.Hx;a.Jf=a.Jf;a.Ad=a.Ad;a.xd=a.xd;var b=a.ha,c=a.ha;c.Di=b.Di;c.shore_smoothing=b.shore_smoothing;c.absorb_factor=b.absorb_factor;c.foam_factor=b.foam_factor;c.nx.set(b.nx);c.qx.set(b.qx);c.ox=b.ox;
c.rx=b.rx;c.wm=b.wm;c.gv=b.gv;c.sss_strength=b.sss_strength;c.sss_width=b.sss_width;c.norm_uv_velocity=b.norm_uv_velocity;c.is_dynamic=b.is_dynamic;c.waves_height=b.waves_height;c.waves_length=b.waves_length;c.dst_noise_scale0=b.dst_noise_scale0;c.dst_noise_scale1=b.dst_noise_scale1;c.dst_noise_freq0=b.dst_noise_freq0;c.dst_noise_freq1=b.dst_noise_freq1;c.dir_min_shore_fac=b.dir_min_shore_fac;c.dir_freq=b.dir_freq;c.dir_noise_scale=b.dir_noise_scale;c.dir_noise_freq=b.dir_noise_freq;c.dir_min_noise_fac=
b.dir_min_noise_fac;c.dst_min_fac=b.dst_min_fac;c.waves_hor_fac=b.waves_hor_fac;c.Xv=b.Xv;c.Hw=b.Hw;c.Iw=b.Iw;c.Ku=b.Ku;c.Vu=b.Vu;c.lj=b.lj;c.kj=b.kj;c=b=a.Ri;c.Fo=b.Fo;c.lr=b.lr;c.kr=b.kr;c=b=a.gn;c.reflect_factor=b.reflect_factor;c.fresnel=b.fresnel;c.fresnel_factor=b.fresnel_factor;c=b=a.wo;c.size=b.size;c.Fr=b.Fr;c.ex.set(b.ex);c.kw.set(b.kw);c.dx=b.dx;c.iw=b.iw;c.Mx=b.Mx;c.$v=b.$v;c.Nx=b.Nx;c.Ox=b.Ox;c=b=a.od;c.Kp=b.Kp;c.Ui=b.Ui;c.Tg=b.Tg;c.Pg=b.Pg;c.Jb=b.Jb;c.li=b.li;c.ki=b.ki;c.mi=b.mi;return a}};b4w.module.__renderer=function(a,t){function e(a){for(var c=a.H,g=a.Za,e=null,k=E.Mb(c.D,I),h=0;h<g.length;h++){var l=g[h];if(l.$b){var p=l.yb,n=l.La;if(p.Oi!=e){B.useProgram(p.Oi);for(var e=a,u=c,v=p,A=v.yJ,F=A.length;F--;){var G=A[F];G.qo(B,G.Ae,e,u)}if(v.Qo&&!v.Gw)for(v.EB.length||f(v),v=v.EB,A=v.length;A--;)G=v[A],G.qo(B,G.Ae,e,u);e=p.Oi}l.mf?(B.enable(B.SAMPLE_ALPHA_TO_COVERAGE),a.rb||B.enable(B.BLEND)):(B.disable(B.SAMPLE_ALPHA_TO_COVERAGE),a.rb||B.disable(B.BLEND));for(l=0;l<n.length;l++)if(A=
n[l],A.$b){v=A.ug;u=A.Aa;y.hU(u);y.PG()&&"DEBUG_VIEW"==u.type&&(u.cr=w.smooth(q.lN(u.ao),u.cr,1,15));if(K.alpha_sort&&u.hf){var G=v,A=A.Sv,F=k,x=u.ra;if(C.dist(F,A.tK)>K.alpha_sort_threshold*Math.min(A.oN,1)||G.rr)d.lW(x,A,G.D,F),C.copy(F,A.tK),G.rr=!1}for(var G=a,A=u,F=p,W=F.zJ,U=W.length;U--;)x=W[U],x.qo(B,x.Ae,v,A);if(F.Qo&&!F.Gw){F.es.length||f(F);W=F.es;for(U=W.length;U--;)x=W[U],x.qo(B,x.Ae,v,A);F.Qo=!1}B.depthMask(A.Qa);A.Fa?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE);x=A.ma;W=B;for(U=0;U<
x.length;U++){var O=x[U];W.activeTexture(W.TEXTURE0+U);W.bindTexture(O.pb,O.Bb);O.df&&W.generateMipmap(O.pb)}if(G.type==r.$d||G.type==r.pk){v=G;F=F.El;W=v.H.Rb;x=W.Bb;W=W.pb;U=v.Ng;for(O=0;6>O;O++){var L=b(O);K.xz?(B.bindTexture(B.TEXTURE_CUBE_MAP,x),B.texImage2D(L,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,D)):(B.uniformMatrix4fv(F.u_cube_view_matrix,!1,U[O]),B.uniform4fv(F.u_sky_tex_fac,v.pp),B.uniform3fv(F.u_sky_tex_color,v.np),B.uniform1f(F.u_sky_tex_dvar,v.op),B.uniform3fv(F.u_horizon_color,v.Ld),
B.uniform3fv(F.u_zenith_color,v.Xd),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,L,x,0),z(A,0));if(v.Po&&5!=O){var L=v,t=O,N=m;K.xz?N.set(D):(B.readPixels(191,191,1,1,B.RGBA,B.UNSIGNED_BYTE,N),255!=N[0]&&255!=N[1]&&255!=N[2]||B.readPixels(191,220,1,1,B.RGBA,B.UNSIGNED_BYTE,N));var S=N[0],Ca=N[1],N=N[2],S=S/255,Ca=Ca/255,N=N/255;4===t?(L.uf[3]=S,L.uf[7]=Ca,L.uf[11]=N):(L.uf[4*t]=S,L.uf[4*t+1]=Ca,L.uf[4*t+2]=N)}}K.Xx&&(B.bindTexture(W,x),B.generateMipmap(W),B.texParameteri(W,B.TEXTURE_MIN_FILTER,
H.Rl));G.Ek+=6}else if(G.type==r.Jn){v=A;A=F.El;x=G.H.Rb;F=x.Bb;W=x.pb;x=G.Ng;K.Xx&&(B.activeTexture(B.TEXTURE7),B.bindTexture(W,F),B.generateMipmap(W),B.texParameteri(W,B.TEXTURE_MIN_FILTER,H.Rl));for(W=0;5>W;++W)for(B.viewport(0,0,128*Math.pow(.5,W),128*Math.pow(.5,W)),U=W/4,O=0;6>O;O++)L=b(O),B.uniformMatrix4fv(A.u_cube_view_matrix,!1,x[O]),B.uniform1f(A.u_roughness,U),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,L,F,W),z(v,0);G.Ek+=30}else z(A,v.oy),G.Ek++;y.iU(u);y.PG()&&"MAIN"==
u.type&&q.mN(u.id,u.vf)}}}}function c(a){if(a){var b=(a.lb?B.COLOR_BUFFER_BIT:0)|(a.tb?B.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case r.Yd:a=g;break;case r.wd:a=k;break;case r.Yf:a=F;break;case r.Le:case r.ph:case r.Fn:a=u;break;case r.rh:case r.kq:case r.yt:a=g;break;default:a=K.background_color}}else b=B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT,a=K.background_color;B.colorMask(!0,!0,!0,!0);B.depthMask(!0);B.clearColor(a[0],a[1],a[2],a[3]);B.clear(b)}function b(a){switch(a){case 0:return B.TEXTURE_CUBE_MAP_POSITIVE_X;
case 1:return B.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return B.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return B.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return B.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return B.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function h(a){var b=p.sA(),c=a.uq,d=a.ra,g=d.Eb;a.ff.length=0;var e=1,m;for(m in g)e=Math.max(e,g[m].frames);for(g=0;g<e;g++){m=b.createVertexArray();G(m);d.Yg&&B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,d.Yg);for(var f=0;f<d.rd.length;f++){B.bindBuffer(B.ARRAY_BUFFER,d.rd[f].jk);for(var k=
0;k<c.length;k++){var h=c[k];h.ry==d.rd[f].type&&(B.enableVertexAttribArray(h.Ae),B.vertexAttribPointer(h.Ae,h.oc,h.vo,h.vo==B.FLOAT?!1:!0,0,h.Wt+h.hv*g),L(h.Ae,h.tm))}}G(null);a.ff.push(m)}}function f(a){var b=a.El,c=a.zJ,d=a.es,g=a.yJ,e=a.EB;c.length=0;d.length=0;g.length=0;e.length=0;for(var m in b){var f=!1,k=null,h=null;switch(m){case "u_proj_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Ab)};f=!0;break;case "u_view_refl_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Xp)};f=!0;
break;case "u_view_tsr":case "u_view_tsr_frag":k=function(a,b,c,d){d.xc?a.uniformMatrix3fv(b,!1,d.ss):a.uniformMatrix3fv(b,!1,d.Rf)};f=!0;break;case "u_view_tsr_inverse":k=function(a,b,c,d){d.xc?a.uniformMatrix3fv(b,!1,d.cx):a.uniformMatrix3fv(b,!1,d.uy)};f=!0;break;case "u_shadow_cast_billboard_view_tsr":k=function(a,b,c,d){a.uniformMatrix3fv(b,!1,d.Fs)};f=!0;break;case "u_view_proj_prev":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.IB)};f=!0;break;case "u_view_proj_matrix":k=function(a,b,c,d){a.uniformMatrix4fv(b,
!1,d.Qf)};f=!0;break;case "u_view_proj_inverse":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.ty)};f=!0;break;case "u_sky_vp_inverse":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.jh)};f=!0;break;case "u_camera_eye":case "u_camera_eye_frag":k=function(a,b,c,d){a.uniform3fv(b,E.Mb(d.D,I))};f=!0;break;case "u_camera_quat":k=function(a,b,c,d){a.uniform4fv(b,E.ub(d.D,S))};f=!0;break;case "u_view_max_depth":k=function(a,b,c,d){a.uniform1f(b,d.far)};f=!0;break;case "u_camera_range":k=function(a,b,c,d){a.uniform2f(b,
d.near,d.far)};f=!0;break;case "u_csm_center_dists":k=function(a,b,c,d){a.uniform4fv(b,d.Au)};break;case "u_height":k=function(a,b,c,d){a.uniform1f(b,d.height)};f=!0;break;case "u_pcf_blur_radii":k=function(a,b,c,d){a.uniform4fv(b,d.ap)};break;case "u_dof_dist":k=function(a,b,c,d){d.dof_on?a.uniform1f(b,d.dof_distance):a.uniform1f(b,0)};f=!0;break;case "u_dof_front_start":k=function(a,b,c,d){a.uniform1f(b,d.dof_front_start)};f=!0;break;case "u_dof_front_end":k=function(a,b,c,d){a.uniform1f(b,d.dof_front_end)};
f=!0;break;case "u_dof_rear_start":k=function(a,b,c,d){a.uniform1f(b,d.dof_rear_start)};f=!0;break;case "u_dof_rear_end":k=function(a,b,c,d){a.uniform1f(b,d.dof_rear_end)};f=!0;break;case "u_dof_bokeh_intensity":k=function(a,b,c,d){a.uniform1f(b,d.dof_bokeh_intensity)};f=!0;break;case "u_camera_direction":k=function(a,b,c,d){a.uniform3fv(b,d.direction)};f=!0;break;case "u_cam_water_depth":k=function(a,b,c){a.uniform1f(b,c.Gq)};f=!0;break;case "u_fog_color_density":k=function(a,b,c){a.uniform4fv(b,
c.Kd)};break;case "u_fog_params":k=function(a,b,c){a.uniform4fv(b,c.Af)};break;case "u_underwater_fog_color_density":k=function(a,b,c){a.uniform4fv(b,c.Yh)};break;case "u_bloom_key":k=function(a,b,c){a.uniform1f(b,c.Un)};break;case "u_average_lum_val":k=function(a,b,c){a.uniform1f(b,c.average_luminance)};break;case "u_mipmap_1x1":k=function(a,b,c){a.uniform1f(b,c.fw)};break;case "u_bloom_edge_lum":k=function(a,b,c){a.uniform1f(b,c.Tn)};break;case "u_time":k=function(a,b,c){a.uniform1f(b,c.time)};
f=!0;break;case "u_wind":k=function(a,b,c){a.uniform3fv(b,c.Zh)};f=!0;break;case "u_sky_tex_dvar":k=function(a,b,c){a.uniform1f(b,c.op)};break;case "u_sky_tex_fac":k=function(a,b,c){a.uniform4fv(b,c.pp)};break;case "u_sky_tex_color":k=function(a,b,c){a.uniform3fv(b,c.np)};break;case "u_horizon_color":k=function(a,b,c){a.uniform3fv(b,c.Ld)};break;case "u_zenith_color":k=function(a,b,c){a.uniform3fv(b,c.Xd)};break;case "u_environment_energy":k=function(a,b,c){a.uniform1f(b,c.kg)};break;case "u_bsdf_cube_sky_dim":k=
function(a,b,c){a.uniform1f(b,c.du)};f=!0;break;case "u_sky_color":k=function(a,b,c){a.uniform3fv(b,c.tl)};break;case "u_rayleigh_brightness":k=function(a,b,c){a.uniform1f(b,c.rayleigh_brightness)};break;case "u_mie_brightness":k=function(a,b,c){a.uniform1f(b,c.mie_brightness)};break;case "u_spot_brightness":k=function(a,b,c){a.uniform1f(b,c.spot_brightness)};break;case "u_scatter_strength":k=function(a,b,c){a.uniform1f(b,c.scatter_strength)};break;case "u_rayleigh_strength":k=function(a,b,c){a.uniform1f(b,
c.rayleigh_strength)};break;case "u_mie_strength":k=function(a,b,c){a.uniform1f(b,c.mie_strength)};break;case "u_rayleigh_collection_power":k=function(a,b,c){a.uniform1f(b,c.rayleigh_collection_power)};break;case "u_mie_collection_power":k=function(a,b,c){a.uniform1f(b,c.mie_collection_power)};break;case "u_mie_distribution":k=function(a,b,c){a.uniform1f(b,c.mie_distribution)};break;case "u_light_positions":k=function(a,b,c){a.uniform4fv(b,c.Rm)};break;case "u_light_directions":k=function(a,b,c){a.uniform3fv(b,
c.Tr)};break;case "u_light_color_intensities":k=function(a,b,c){a.uniform4fv(b,c.Qm)};break;case "u_sun_quaternion":k=function(a,b,c){a.uniform4fv(b,c.Ux)};break;case "u_sun_intensity":k=function(a,b,c){a.uniform3fv(b,c.Tx)};break;case "u_sun_direction":k=function(a,b,c){a.uniform3fv(b,c.Sx)};break;case "u_debug_view_mode":k=function(a,b,c){a.uniform1i(b,c.debug_view_mode)};break;case "u_debug_colors_seed":k=function(a,b,c){a.uniform1f(b,c.debug_colors_seed)};break;case "u_debug_render_time_threshold":k=
function(a,b,c){a.uniform1f(b,c.Gu)};break;case "u_subpixel_jitter":k=function(a,b,c){a.uniform2fv(b,c.QA)};f=!0;break;case "u_subsample_indices":k=function(a,b,c){a.uniform4fv(b,c.tS)};f=!0;break;case "u_radial_blur_step":k=function(a,b,c){a.uniform1f(b,c.ep)};break;case "u_god_rays_intensity":k=function(a,b,c){a.uniform1f(b,c.god_rays_intensity)};break;case "u_ssao_radius_increase":k=function(a,b,c){a.uniform1f(b,c.wp)};break;case "u_ssao_blur_discard_value":k=function(a,b,c){a.uniform1f(b,c.rp)};
f=!0;break;case "u_ssao_influence":k=function(a,b,c){a.uniform1f(b,c.vp)};break;case "u_ssao_dist_factor":k=function(a,b,c){a.uniform1f(b,c.sp)};break;case "u_texel_size":k=function(a,b,c){a.uniform2fv(b,c.Rs)};f=!0;break;case "u_normal_offset":k=function(a,b,c){a.uniform1f(b,c.self_shadow_normal_offset)};break;case "u_v_light_ts":k=function(a,b,c){a.uniform4fv(b,c.Qp)};f=!0;break;case "u_v_light_r":k=function(a,b,c){a.uniform4fv(b,c.Pp)};f=!0;break;case "u_v_light_tsr":k=function(a,b,c){a.uniformMatrix3fv(b,
!1,c.jt)};f=!0;break;case "u_p_light_matrix0":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Pj[0])};f=!0;break;case "u_p_light_matrix1":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Pj[1])};f=!0;break;case "u_p_light_matrix2":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Pj[2])};f=!0;break;case "u_p_light_matrix3":k=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Pj[3])};f=!0;break;case "u_outline_color":k=function(a,b,c){a.uniform3fv(b,c.Nh)};break;case "u_draw_outline":k=function(a,b,c){a.uniform1f(b,c.ir)};
f=!0;break;case "u_glow_mask_small_coeff":k=function(a,b,c){a.uniform1f(b,c.small_glow_mask_coeff)};f=!0;break;case "u_glow_mask_large_coeff":k=function(a,b,c){a.uniform1f(b,c.large_glow_mask_coeff)};f=!0;break;case "u_brightness":k=function(a,b,c){a.uniform1f(b,c.brightness)};break;case "u_contrast":k=function(a,b,c){a.uniform1f(b,c.contrast)};break;case "u_exposure":k=function(a,b,c){a.uniform1f(b,c.exposure)};break;case "u_saturation":k=function(a,b,c){a.uniform1f(b,c.saturation)};break;case "u_enable_hmd_stereo":k=
function(a,b,c){a.uniform1i(b,c.enable_hmd_stereo)};break;case "u_distortion_params":k=function(a,b,c){a.uniform4fv(b,c.sj)};break;case "u_chromatic_aberration_coefs":k=function(a,b,c){a.uniform4fv(b,c.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":k=function(a,b,c){a.uniform1f(b,c.yw)};f=!0;break;case "u_motion_blur_decay_threshold":k=function(a,b,c){a.uniform1f(b,c.mb_decay_threshold)};f=!0;break;case "u_model_tsr":h=function(a,b,c){a.uniformMatrix3fv(b,!1,c.D)};f=!0;break;case "u_model_tsr_inverse":h=
function(a,b,c){a.uniformMatrix3fv(b,!1,c.Dy)};f=!0;break;case "u_transb":h=function(a,b,c){a.uniform4fv(b,c.Wd)};f=!0;break;case "u_transa":h=function(a,b,c){a.uniform4fv(b,c.Ie)};f=!0;break;case "u_arm_rel_trans":h=function(a,b,c){a.uniform4fv(b,c.rq)};f=!0;break;case "u_arm_rel_quat":h=function(a,b,c){a.uniform4fv(b,c.qq)};f=!0;break;case "u_quat":h=function(a,b,c){a.uniform4fv(b,E.ub(c.D,S))};f=!0;break;case "u_quatsb":h=function(a,b,c){a.uniform4fv(b,c.Pd)};f=!0;break;case "u_quatsa":h=function(a,
b,c){a.uniform4fv(b,c.De)};f=!0;break;case "u_frame_factor":h=function(a,b,c){a.uniform1f(b,c.Bf)};f=!0;break;case "au_center_pos":h=function(a,b,c){a.uniform3fv(b,c.iu)};f=!0;break;case "au_wind_bending_amp":h=function(a,b,c){a.uniform1f(b,c.Tf)};f=!0;break;case "au_wind_bending_freq":h=function(a,b,c){a.uniform1f(b,c.Uf)};f=!0;break;case "au_detail_bending_freq":h=function(a,b,c){a.uniform1f(b,c.yf)};f=!0;break;case "au_detail_bending_amp":h=function(a,b,c){a.uniform1f(b,c.xf)};f=!0;break;case "au_branch_bending_amp":h=
function(a,b,c){a.uniform1f(b,c.sf)};f=!0;break;case "u_node_values":h=function(a,b,c,d){a.uniform4fv(b,d.Lh)};f=!0;break;case "u_node_rgbs":h=function(a,b,c,d){a.uniform3fv(b,d.je)};f=!0;break;case "u_lod_coverage":h=function(a,b,c,d){a.uniform1f(b,d.Xk.Qe)};f=!0;break;case "u_lod_cmp_logic":h=function(a,b,c,d){a.uniform1f(b,d.Xk.nu)};f=!0;break;case "u_diffuse_color":h=function(a,b,c,d){a.uniform4fv(b,d.lc)};f=!0;break;case "u_diffuse_intensity":h=function(a,b,c,d){a.uniform1f(b,d.ee)};f=!0;break;
case "u_diffuse_params":h=function(a,b,c,d){a.uniform2fv(b,d.zd)};f=!0;break;case "u_emit":h=function(a,b,c,d){a.uniform1f(b,d.Ad)};f=!0;break;case "u_ambient":h=function(a,b,c,d){a.uniform1f(b,d.xd)};f=!0;break;case "u_specular_color":h=function(a,b,c,d){a.uniform3fv(b,d.ne)};f=!0;break;case "u_specular_alpha":h=function(a,b,c,d){a.uniform1f(b,d.Jf)};f=!0;break;case "u_specular_params":h=function(a,b,c,d){a.uniform3fv(b,d.Fe)};f=!0;break;case "u_reflect_factor":h=function(a,b,c,d){a.uniform1f(b,
d.reflect_factor)};f=!0;break;case "u_mirror_factor":h=function(a,b,c,d){a.uniform1f(b,d.Vm)};f=!0;break;case "u_grass_map_dim":h=function(a,b,c,d){a.uniform3fv(b,d.jd)};f=!0;break;case "u_grass_size":h=function(a,b,c,d){a.uniform1f(b,d.Aj)};f=!0;break;case "u_scale_threshold":h=function(a,b,c,d){a.uniform1f(b,d.Cv)};f=!0;break;case "u_cube_fog":h=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.uf)};break;case "u_jitter_amp":h=function(a,b,c,d){a.uniform1f(b,d.aw)};f=!0;break;case "u_jitter_freq":h=function(a,
b,c,d){a.uniform1f(b,d.cw)};f=!0;break;case "u_wireframe_edge_color":h=function(a,b,c,d){a.uniform3fv(b,d.wireframe_edge_color)};break;case "u_cluster_id":h=function(a,b,c,d){a.uniform1f(b,d.Pq)};f=!0;break;case "u_batch_debug_id_color":h=function(a,b,c,d){a.uniform1f(b,d.Fu)};f=!0;break;case "u_batch_debug_main_render_time":h=function(a,b,c,d){a.uniform1f(b,d.cr)};f=!0;break;case "u_refr_bump":h=function(a,b,c,d){a.uniform1f(b,d.ih)};f=!0;break;case "u_line_width":h=function(a,b,c,d){a.uniform1f(b,
d.Sm)};f=!0;break;case "u_lamp_light_positions":h=function(a,b,c,d){a.uniform3fv(b,d.Io)};break;case "u_lamp_light_directions":h=function(a,b,c,d){a.uniform3fv(b,d.Pr)};break;case "u_lamp_light_color_intensities":h=function(a,b,c,d){a.uniform3fv(b,d.Or)};break;case "u_halo_size":h=function(a,b,c,d){a.uniform1f(b,d.Mv)};f=!0;break;case "u_halo_hardness":h=function(a,b,c,d){a.uniform1f(b,d.Jv)};f=!0;break;case "u_halo_rings_color":h=function(a,b,c,d){a.uniform3fv(b,d.Lv)};f=!0;break;case "u_halo_lines_color":h=
function(a,b,c,d){a.uniform3fv(b,d.Kv)};f=!0;break;case "u_halo_stars_blend":h=function(a,b,c,d){a.uniform1f(b,d.Nv)};f=!0;break;case "u_halo_stars_height":h=function(a,b,c,d){a.uniform1f(b,d.Ov)};f=!0;break;case "u_fresnel_params":h=function(a,b,c,d){a.uniform2fv(b,d.Fh)};f=!0;break;case "u_texture_scale":h=function(a,b,c,d){a.uniform3fv(b,d.mh)};f=!0;break;case "u_parallax_scale":h=function(a,b,c,d){a.uniform1f(b,d.parallax_scale)};f=!0;break;case "u_color_id":h=function(a,b,c){a.uniform3fv(b,c.yk)};
f=!0;break;case "u_diffuse_color_factor":h=function(a,b,c,d){a.uniform1f(b,d.ti)};f=!0;break;case "u_alpha_factor":h=function(a,b,c,d){a.uniform1f(b,d.Jg)};f=!0;break;case "u_specular_color_factor":h=function(a,b,c,d){a.uniform1f(b,d.$j)};f=!0;break;case "u_normal_factor":h=function(a,b,c,d){a.uniform1f(b,d.Vo)};f=!0;break;case "u_normalmap0_scale":h=function(a,b,c,d){a.uniform2fv(b,d.Oj[0])};f=!0;break;case "u_normalmap1_scale":h=function(a,b,c,d){a.uniform2fv(b,d.Oj[1])};f=!0;break;case "u_normalmap2_scale":h=
function(a,b,c,d){a.uniform2fv(b,d.Oj[2])};f=!0;break;case "u_normalmap3_scale":h=function(a,b,c,d){a.uniform2fv(b,d.Oj[3])};f=!0;break;case "u_foam_factor":h=function(a,b,c,d){a.uniform1f(b,d.foam_factor)};f=!0;break;case "u_foam_uv_freq":h=function(a,b,c,d){a.uniform2fv(b,d.fv)};f=!0;break;case "u_foam_mag":h=function(a,b,c,d){a.uniform2fv(b,d.ev)};f=!0;break;case "u_foam_scale":h=function(a,b,c,d){a.uniform2fv(b,d.pr)};f=!0;break;case "u_water_norm_uv_velocity":h=function(a,b,c,d){a.uniform1f(b,
d.Ml)};f=!0;break;case "u_shallow_water_col":h=function(a,b,c,d){a.uniform3fv(b,d.shallow_water_col)};f=!0;break;case "u_shore_water_col":h=function(a,b,c,d){a.uniform3fv(b,d.shore_water_col)};f=!0;break;case "u_water_shallow_col_fac":h=function(a,b,c,d){a.uniform1f(b,d.shallow_water_col_fac)};f=!0;break;case "u_water_shore_col_fac":h=function(a,b,c,d){a.uniform1f(b,d.shore_water_col_fac)};f=!0;break;case "u_p_length":h=function(a,b,c,d){a.uniform1f(b,d.Ja.$x)};f=!0;break;case "u_p_cyclic":h=function(a,
b,c,d){a.uniform1i(b,d.Ja.cyclic)};f=!0;break;case "u_p_max_lifetime":h=function(a,b,c,d){a.uniform1f(b,d.Ja.hw)};f=!0;break;case "u_p_fade_in":h=function(a,b,c,d){a.uniform1f(b,d.Ja.vj)};f=!0;break;case "u_p_fade_out":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Ue)};f=!0;break;case "u_p_size":h=function(a,b,c,d){a.uniform1f(b,d.Ja.size)};f=!0;break;case "u_p_alpha_start":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Mt)};f=!0;break;case "u_p_alpha_end":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Lt)};f=!0;break;
case "u_p_nfactor":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Ro)};f=!0;break;case "u_p_gravity":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Dv)};f=!0;break;case "u_p_mass":h=function(a,b,c,d){a.uniform1f(b,d.Ja.bh)};f=!0;break;case "u_p_color_ramp":h=function(a,b,c,d){a.uniform4fv(b,d.Ja.qu)};f=!0;break;case "u_p_wind_fac":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Cy)};f=!0;break;case "u_p_time":h=function(a,b,c,d){a.uniform1f(b,d.Ja.time)};f=!0;break;case "u_p_tilt":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Yx)};
f=!0;break;case "u_p_tilt_rand":h=function(a,b,c,d){a.uniform1f(b,d.Ja.Zx)};f=!0;break;case "u_position":h=function(a,b,c,d){a.uniform3fv(b,d.Xl)};f=!0;break;case "u_va_frame_factor":h=function(a,b,c){a.uniform1f(b,c.py)};f=!0;break;case "u_refl_plane":h=function(a,b,c){a.uniform4fv(b,c.xc)};f=!0;break;case "u_outline_intensity":h=function(a,b,c){a.uniform1f(b,c.Ki)};f=!0;break;case "u_obj_info":h=function(a,b,c,d){a.uniform3fv(b,d.Xo)},f=!0}h&&(h={name:m,qo:h,Ae:b[m]},f?c.push(h):d.push(h));k&&(h=
{name:m,qo:k,Ae:b[m]},f?g.push(h):e.push(h))}if(d.length||e.length){a=a.FB;for(var l in a)delete a[l];for(l=0;l<d.length;l++)h=d[l],a[h.name]=h;for(l=0;l<e.length;l++)h=e[l],a[h.name]=h}else a.Gw=!0}var q=t("__batch"),l=t("__camera"),x=t("__config"),y=t("__debug"),p=t("__extensions"),d=t("__geometry"),v=t("__quat"),r=t("__subscene"),H=t("__textures"),E=t("__tsr"),w=t("__util"),n=t("__version"),C=t("__vec3"),k=[1,0,0,1],F=[1,1,1,1],u=[0,0,0,1],g=[0,0,0,0],D=new Uint8Array([91.8,142.8,.96*255,255]),
B=null,N=null,L=null,A=null,G=null,z=null,I=new Float32Array(3),S=v.create(),m=new Uint8Array(4),K=x.L;a.yg=function(a){var b=K.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);B=a};a.uj=function(a){if(a.$b&&!a.xm)if(a.type==r.xt){y.QB(a);var d=a.H;B.bindFramebuffer(B.READ_FRAMEBUFFER,d.sr);B.bindFramebuffer(B.DRAW_FRAMEBUFFER,
d.Ve);var g=0;d.Rb&&(g|=B.COLOR_BUFFER_BIT);d.wf&&(g|=B.DEPTH_BUFFER_BIT);B.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,g,B.NEAREST);y.RB(a);y.uz("draw resolve")}else if(a.type==r.Iy)y.QB(a),d=a.H,B.bindFramebuffer(B.FRAMEBUFFER,d.sr),B.bindTexture(B.TEXTURE_2D,d.Rb.Bb),B.copyTexSubImage2D(B.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),y.RB(a),y.uz("draw copy");else{y.QB(a);d=a.H;B.bindFramebuffer(B.FRAMEBUFFER,d.Ve);a.tq&&(g=d.Rb,B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,
g.pb,g.Bb,0));B.viewport(0,0,d.width,d.height);a.type!=r.ud&&a.type!=r.jf&&c(a);a.rb?B.enable(B.BLEND):B.disable(B.BLEND);a.Sc?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST);switch(a.type){case r.wd:B.enable(B.POLYGON_OFFSET_FILL);B.polygonOffset(a.self_shadow_polygon_offset,a.self_shadow_polygon_offset);B.cullFace(B.BACK);break;case r.Zd:case r.Xf:B.disable(B.POLYGON_OFFSET_FILL);B.cullFace(B.FRONT);break;case r.qh:B.enable(B.POLYGON_OFFSET_FILL);B.polygonOffset(-4,-4);B.cullFace(B.BACK);break;case r.Yd:if(1<
K.ec||K.yU){B.enable(B.POLYGON_OFFSET_FILL);B.polygonOffset(-2,-2);break}default:B.disable(B.POLYGON_OFFSET_FILL),B.cullFace(B.BACK)}if(a.type==r.ud||a.type==r.jf)for(var d=a.H,g=d.Rb.Bb,f=0;6>f;f++){var m=b(f);d.fc=a.Ng[f];E.from_mat4(d.fc,d.Rf);l.IN(d);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,m,g,0);c(a);for(var m=a.Za,k=0;k<m.length;k++)for(var h=0;h<m[k].La.length;h++){var p=m[k].La[h];p.$b=p.Tz[f]}e(a)}else e(a);y.RB(a);y.uz("draw subscene: "+r.Rx(a))}};a.clear=function(a){B.bindFramebuffer(B.FRAMEBUFFER,
a.H.Ve);c(a)};a.Rt=function(a){var b=a.uq;b.length=0;var c=a.ra,g=c.Eb,e=a.yb.attributes,f;for(f in e){var m=g[f],k=d.uo(f),l=d.vR(f),p=d.oG(f);b.push({ry:k,vo:l,Ae:e[f],Wt:m.offset*p,hv:1<m.frames?m.length*p:0,oc:m.oc,tm:m.tm})}if("DEBUG"==n.type())for(f in g)k=d.uo(f),b=d.BU(c.rd,k),b=c.rd[b],m=a.eb.Pf+" | "+a.eb.we,k=g[f].length*g[f].frames*d.oG(f),y.vQ(b.PP,m,f,k,f in e);K.Zy&&h(a)};a.hN=h;a.iO=function(a){for(var b=p.sA(),c=0;c<a.ff.length;c++)b.deleteVertexArray(a.ff[c]);a.ff.length=0};a.kO=
function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({ry:d.ry,vo:d.vo,Ae:d.Ae,Wt:d.Wt,hv:d.hv,oc:d.oc,tm:d.tm})}return b};a.gN=f;a.fE=function(a){var b=a.yb,c=a.ma;a=a.Mf;B.useProgram(b.Oi);for(var d=0;d<c.length;d++)B.uniform1i(b.El[a[d]],d)};a.bx=function(a,b,c,d,g,e){B.bindFramebuffer(B.FRAMEBUFFER,a);B.readPixels(b,c,d,g,B.RGBA,B.UNSIGNED_BYTE,e);B.bindFramebuffer(B.FRAMEBUFFER,null);return e};a.iW=function(a){var b=a.yb;b.Gw||(B.useProgram(b.Oi),b.es.length||f(b),b=b.FB.u_cube_fog,
b.qo(B,b.Ae,null,a))};a.gU=function(a,b){var c=B.createFramebuffer();B.bindFramebuffer(B.FRAMEBUFFER,c);if(H.Eo(a)){var d=a.gf;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.RENDERBUFFER,d)}else if(H.Go(a)){var g=a,d=g.Bb,g=g.pb==B.TEXTURE_CUBE_MAP?B.TEXTURE_CUBE_MAP_NEGATIVE_Z:g.pb;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,g,d,0)}H.Eo(b)?(d=b.gf,B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,d)):H.Go(b)&&(g=b,d=g.Bb,g=g.pb,B.framebufferTexture2D(B.FRAMEBUFFER,
B.DEPTH_ATTACHMENT,g,d,0));y.TN();B.bindFramebuffer(B.FRAMEBUFFER,null);return c};a.fU=function(a,b,c,d,g){null==a?(B.bindFramebuffer(B.FRAMEBUFFER,a),B.viewport(0,0,d,g),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT)):(H.Eo(b)?B.deleteRenderbuffer(b.gf):H.Go(b)&&B.deleteTexture(b.Bb),H.Eo(c)?B.deleteRenderbuffer(c.gf):H.Go(c)&&B.deleteTexture(c.Bb),B.deleteFramebuffer(a))};a.yZ=function(){};a.$P=function(a,b,c,d,g,e){a=a.Bb;B.viewport(0,0,c,c);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,
b,a,0);b=q.yu("FLIP_CUBEMAP_COORDS");a=b.yb;B.activeTexture(B.TEXTURE0);B.bindTexture(B.TEXTURE_2D,g);var f=g=0;c!=d&&(g=1/(6*d),f=1/(4*d));B.uniform1i(a.El.u_tex_number,e);B.uniform2fv(a.El.u_delta,[g,f]);B.useProgram(a.Oi);z(b,0);B.bindTexture(B.TEXTURE_2D,null)};a.aQ=function(a,b,c,d,g){B.bindFramebuffer(B.FRAMEBUFFER,d);d=a.Bb;a=a.pb;B.bindTexture(a,d);B.viewport(0,0,b,c);B.texImage2D(a,0,B.RGBA,b,c,0,B.RGBA,B.UNSIGNED_BYTE,null);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,a,d,0);
b=q.yu("NONE");c=b.yb;B.activeTexture(B.TEXTURE0);B.bindTexture(a,g);B.useProgram(c.Oi);z(b,0);B.bindFramebuffer(B.FRAMEBUFFER,null);B.bindTexture(a,null)};a.cleanup=function(){};a.PU=function(){var a=p.yR(),b=p.sA();K.YD=a?!0:!1;K.Zy=b?!0:!1;a?(N=function(b,c,d,g){a.drawElementsInstanced(B.TRIANGLES,b,c,d,g)},L=function(b,c){a.vertexAttribDivisor(b,c)},A=function(b,c,d){a.drawArraysInstanced(B.TRIANGLES,b,c,d)}):(N=function(a,b,c){B.drawElements(B.TRIANGLES,a,b,c)},L=function(){},A=function(a,b){B.drawArrays(B.TRIANGLES,
a,b)});b?(G=function(a){b.bindVertexArray(a)},z=function(a,b){var c=a.ra;G(a.ff[b]);c.Yg?N(c.count,c.Fm,0,c.Jm):A(0,c.count,c.Jm);G(null)}):z=function(a,b){for(var c=a.ra,d=a.uq,g=0;g<c.rd.length;g++){B.bindBuffer(B.ARRAY_BUFFER,c.rd[g].jk);for(var e=0;e<d.length;e++){var f=d[e];f.ry==c.rd[g].type&&(B.enableVertexAttribArray(f.Ae),B.vertexAttribPointer(f.Ae,f.oc,f.vo,f.vo==B.FLOAT?!1:!0,0,f.Wt+f.hv*b),L(f.Ae,f.tm))}}c.Yg?(B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,c.Yg),N(c.count,c.Fm,0,c.Jm)):A(0,c.count,
c.Jm);for(g=0;g<d.length;g++)f=d[g],B.disableVertexAttribArray(f.Ae)}};a.reset=function(){G=A=L=N=B=null}};b4w.module.__shaders=function(a,t){function e(){return{Pf:"",we:"",Ah:[],Ze:[],status:0,St:0,Wx:0}}function c(a){var b=e();b.Pf=a.Pf;b.we=a.we;b.Ah=G.W(a.Ah);b.Ze=G.W(a.Ze);b.status=a.status;b.St=a.St;b.Wx=a.Wx;return b}function b(a,b,c){var d=a.Ah;"string"==typeof c?(a=h(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function h(a,b){for(var c=a.Ah,d=0;d<c.length;d++)if(c[d][0]==b)return c[d];return!1}function f(a,b){var c=a+b;if(!(c in Q)){var d=E(S.shaders_path,
a),g=E(S.shaders_path,b),d=n(d),g=n(g),e;for(e in g)d[e]=g[e];g=[];for(e in d)g.push([e,d[e]]);Q[c]=g}return Q[c]}function q(a,b){return a+b}function l(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(q,0)}function x(a,b){var c=H(a.type),d=H(b.type),g=a.bm,e=b.bm;return c>d?-1:c<d?1:g>e?-1:g<e?1:0}function y(a){if(z.Gb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=T}else b=ia;a=a.split(";").map(function(a){return(a=
a.match(b))&&{type:a[2],bm:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return d(a,Z,I.tw)}function p(a,b,c){a=a.split(";");for(var g=[],e=0;e<a.length;e++){var f=a[e].match(ra);f&&g.push({type:f[2],bm:f[4]?parseInt(f[4],10):1})}return d(g,b,c)}function d(a,b,c){function d(){for(var c=0;h<a.length;){var d=a[h];if(3!=H(d.type))break;c+=r(d.type)*d.bm;h++}m=k+c;if(m>wa)return!1;v(b,k,c,0,3);return!0}function g(){for(var c=wa-m,d=c,g=c;h<a.length;){var e=a[h];if(2!=H(e.type))break;e=r(e.type)*
e.bm;if(e<=d)d-=e;else if(e<=g)g-=e;else return!1;h++}g=c-g;v(b,m,c-d,0,2);v(b,wa-g,g,2,2);return!0}function e(){for(;h<a.length;){for(var d=a[h],d=r(d.type)*d.bm,g=-1,e=c+1,f=-1,m=0;4>m;m++){var k=pa;k[0]=0;k[1]=1;var l;l=b;for(var p=m,n=d,u=k;fa<l.length&&15===l[fa];)fa++;for(;0<wa&&15===l[wa];)wa--;if(wa-fa<n)l=!1;else{for(var p=1<<p,V=0,I=-1,A=l.length+1,M=!1,ea=fa;ea<=wa;ea++)ea<wa&&!(l[ea]&p)?M||(V=ea,M=!0):(M&&(M=ea-V,M>=n&&M<A&&(A=M,I=V)),M=!1);0>I?l=!1:(u[0]=I,u[1]=A,l=!0)}l&&k[1]<e&&(f=
k[0],e=k[1],g=m)}if(0>g)return!1;v(b,f,d,g,1);h++}return!0}if(!a.length)return!0;for(var f=0;f<c;f++)b[f]=0;wa=c;a.sort(x);var m=0,k=0,h=0;return function(){for(;h<a.length;){var c=a[h];if(4!=H(c.type))break;k+=r(c.type)*c.bm;h++}if(k>wa)return!1;fa=k;v(b,0,k,0,4);return!0}()&&d()&&g()&&e()}function v(a,b,c,d,g){for(var e=0,f=0;f<g;f++)e|=1<<d+f;for(f=0;f<c;f++)a[b+f]|=e}function r(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function H(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function E(a,b){var c=a+b;if(K[c])return K[c];if(U){var d=U[b];if(!d)return null;d=t("__gpp_parser").WZ.parse(d)}else if(d=t("shader_texts")[b],!d)return null;return K[c]=d}function w(a,b){for(var c={},d=b.Ah||[],g=0;g<d.length;g++)c[d[g][0]]=[d[g][1]];for(g=0;g<b.Ze.length;g++)c["USE_NODE_"+b.Ze[g].id]=["1"];z.Gb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],
c.GLSL_IN=["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],z.Xx?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=z.Sq&&!z.zs?["sampler2DShadow"]:["sampler2D"];for(var e in c)c[e][0].constructor!=String&&A.warn("Warning! The value of a directive '"+e+"' is not of type string.");return c}function n(a){function b(a){"var"==a.a?d[a.c]=a.b.join(""):"include"==a.a&&(a=E(S.shaders_path,
S.RI+a.F),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var g=0;g<a.length;g++)c(a[g],b,d);else if(a instanceof Object&&a){b&&b(a);for(g in a)c(a[g],b,d);d&&d(a)}}var d={};c(a,b);return d}function C(a,b,c){function d(b){b=b.f;for(var c=0;c<b.length;c++){var h=b[c];switch(h.a){case "cond":a:for(var h=h.f,r=0;r<h.length;r++){var V=h[r];switch(V.a){case "if":case "elif":if(g(V.j)){d(V.l);break a}break;case "else":d(V.l);break a;case "ifdef":V.c in n&&d(V.l);break;case "ifndef":V.c in n||d(V.l)}}break;
case "include":h=h.F;r=E(S.shaders_path,S.RI+h);v.push("include/"+h);d(r);v.pop();break;case "var":break;case "define":n[h.c]=h.b;break;case "error":G.K("Shader error: #error "+h.b.join(" "));break;case "line":break;case "pragma":p.push("#pragma "+h.c+" "+h.b.join(" "));break;case "undef":delete n[h.c];break;case "warning":A.warn("Shader warning: #warning "+h.b.join(" "));break;case "extension":h=k(h.b,n,u,!1);p.push("#extension "+h.join(" "));break;case "version":h=k(h.b,n,u,!1),p.push("#version "+
h.join(" "));case "#":break;case "node":I[h.c]=h;break;case "nodes_global":h=l;for(r=0;r<h.length;r++){var V=h[r],ea=I[V.id];if(ea)for(var ya=0,q=0;q<ea.B.length;q++){var z=ea.B[q];if("node_param"==z.a){var w;if("PARTICLE_INFO"==V.id&&z.g)if(1==n.PARTICLE_BATCH)switch(w=!1,ya){case 0:w=D(V.Ya,"PART_INFO_IND")||D(V.Ya,"PART_INFO_AGE")||D(V.Ya,"PART_INFO_LT")||D(V.Ya,"PART_INFO_SIZE");break;case 1:w=D(V.Ya,"PART_INFO_LOC");break;case 2:w=D(V.Ya,"PART_INFO_VEL");break;case 3:w=D(V.Ya,"PART_INFO_A_VEL");
break;case 4:w=D(V.Ya,"PART_INFO_IND")}else w=!1;else w=!0;w&&(z=z.i.join(" ")+" ","vert"==a?z+=V.Je[ya]:"frag"==a&&(z+=V.aa[ya],null!==V.Zo[ya]&&(z+="="+V.Zo[ya])),z+=";",m(f(z)));ya++}}}break;case "nodes_main":h=l;for(r=0;r<h.length;r++)if(V=h[r],ea=I[V.id]){ya={};M=x=H=0;q=ea;z=V;w=q;for(var B={},W=0;W<w.C.length;W++){var ka=w.C[W];B[ka.c]=[ka.b.join("")]}w=B;for(B=0;B<z.Ya.length;B++)W=z.Ya[B][0],W in w&&(w[W]=[z.Ya[B][1]]);for(B=W=0;B<q.B.length;B++)ka=q.B[B],"node_out"==ka.a&&(w["USE_OUT_"+
ka.c]=[-1<F.indexOf(z.outputs[W])|0],W++);q=w;z=V;w=ea.B;B=ya;W=q;for(ka=0;ka<w.length;ka++){var la=w[ka];switch(la.a){case "node_in":var ta=z.inputs[H];if(null!==z.HA[H]){if(("MATERIAL_BEGIN"==z.id&&3===H||!W.MATERIAL_EXT&&("MATERIAL_BEGIN"==z.id&&4===H||"MATERIAL_END"==z.id&&3===H||"MATERIAL_END"==z.id&&4===H||"MATERIAL_END"==z.id&&5===H)||"TEXTURE_COLOR"==z.id||"TEXTURE_NORMAL"==z.id)&&la.g){B[la.c]=z.HA[H];H++;continue}var y=la.i.join(" ")+" ",y=y+(ta+"="+z.HA[H]+";");m(f(y))}B[la.c]=ta;H++;break;
case "node_out":ta=z.outputs[x];if(!la.g||-1<F.indexOf(ta))y=la.i.join(" ")+" ",y+=ta+";",m(f(y)),B[la.c]=ta;x++;break;case "node_param":"vert"==a?ta=z.Je[M]:"frag"==a&&(ta=z.aa[M]),B[la.c]=ta,M++}}p.push("{");e(V,ea.u,ya,q);p.push("}")}break;case "txt":m(h.b);break;default:G.K("Unknown element type: "+h.a)}}}function g(a,b){var c;c=k(a,n,u,!0,b);for(var d=[],g=0;g<c.length;g++)if(c[g]instanceof Object)switch(c[g].a){case "conditional_expr":var e=d.pop(),f=d.pop();d.pop()?d.push(f):d.push(e);break;
case "logical_or_expr":for(var f=d.pop(),M=0;M<c[g].o-1;M++)e=d.pop(),f=f||e;d.push(f);break;case "logical_and_expr":f=d.pop();for(M=0;M<c[g].o-1;M++)e=d.pop(),f=f&&e;d.push(f);break;case "logical_bitor_expr":f=d.pop();for(M=0;M<c[g].o-1;M++)f|=d.pop();d.push(f);break;case "logical_bitxor_expr":f=d.pop();for(M=0;M<c[g].o-1;M++)f^=d.pop();d.push(f);break;case "logical_bitand_expr":f=d.pop();for(M=0;M<c[g].o-1;M++)f&=d.pop();d.push(f);break;case "equal_expr":e=d.pop();f=d.pop();d.push(f==e);break;case "non_equal_expr":e=
d.pop();f=d.pop();d.push(f!=e);break;case "le_expr":e=d.pop();f=d.pop();d.push(f<=e);break;case "ge_expr":e=d.pop();f=d.pop();d.push(f>=e);break;case "l_expr":e=d.pop();f=d.pop();d.push(f<e);break;case "g_expr":e=d.pop();f=d.pop();d.push(f>e);break;case "left_shift_expr":f=d.pop();e=d.pop();d.push(f<<e);break;case "right_shift_expr":f=d.pop();e=d.pop();d.push(f>>e);break;case "add_expr":f=d.pop();e=d.pop();d.push(f+e);break;case "sub_expr":f=d.pop();e=d.pop();d.push(f-e);break;case "mul_expr":f=d.pop();
e=d.pop();d.push(f*e);break;case "div_expr":f=d.pop();e=d.pop();d.push(f/e);break;case "mod_expr":f=d.pop();e=d.pop();d.push(f%e);break;case "pre_inc_expr":case "post_inc_expr":e=d.pop();d.push(++e);break;case "pre_dec_expr":case "post_dec_expr":e=d.pop();d.push(--e);break;case "positive_expr":e=d.pop();d.push(+e);break;case "negative_expr":e=d.pop();d.push(-e);break;case "one_compl_expr":e=d.pop();d.push(~e);break;case "logic_negative_expr":e=d.pop();d.push(!e);break;default:G.K("Unknown operation type: "+
c[g].a)}else e=c[g],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(e)?(d.push(0),0!=e.indexOf("USE_NODE_")&&(f=v[v.length-1],f in r||(r[f]=[]),-1==r[f].indexOf(e)&&(r[f].push(e),A.error("Undefined directive '"+e+"' in shader '"+f+"'. Should it be defined with #var/#node_var or #define?")))):d.push(parseFloat(c[g]));1==d.length?c=d[0]:(G.K("Incorrect expression: "+c.join(" ")),c=void 0);return c}function e(a,b,c,d){for(var f=0;f<b.length;f++){var M=b[f];switch(M.a){case "node_cond":a:for(var h=a,M=M.f,k=c,l=d,
p=0;p<M.length;p++){var u=M[p];switch(u.a){case "node_if":case "node_elif":if(g(u.j,l)){e(h,u.u,k,l);break a}break;case "node_else":e(h,u.u,k,l);break a;case "node_ifdef":(u.c in n||u.c in l)&&e(h,u.u,k,l);break;case "node_ifndef":u.c in n||u.c in l||e(h,u.u,k,l)}}break;case "txt":h=[];for(k=0;k<M.b.length;k++)l=M.b[k],l in c?h.push(c[l]):h.push(l);m(h,d)}}}function f(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function m(b,c){var d=b;if(!z.Gb&&"frag"==a){var g=d.join(" ");W&&(g.match(/[^;]*;/)?
(g=g.replace(/[^;]*;/,""),W=!1):g="");g=g.replace(/GLSL_OUT [^;]*;/g,"");g.match(/GLSL_OUT(?:$| [^;]*)/)&&(g=g.replace(/GLSL_OUT(?:$| [^;]*)/,""),W=!0);g=g.replace(/ {2,}/g," ");(g=g.trim())?d=g.split(" "):d=[]}b=d;b.length&&(d=k(b,n,u,!1,c),p.push(d.join(" ")))}function k(a,b,c,d,g){var e=[];h(a,b,c,d,e,g);return e}function h(a,b,c,d,g,e){for(var f=0;f<a.length;f++){var M=a[f];if(e&&M in e)M=e[M];else if(M in b)M=b[M];else{g.push(M);continue}0==M.length&&d?g.push(0):h(M,b,c,d,g,e)}}var l=c.Ze,p=
[],n=w(a,c),u={},v=[c[a]],r={},I={},F=[],q;for(q in l)for(var B in l[q].inputs)F.push(l[q].inputs[B]);var W=!1;d(b);var H=0,x=0,M=0;return p.join("\n")}function k(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function F(a){W.deleteProgram(a.Oi);W.deleteShader(a.wy);W.deleteShader(a.jv);delete m[a.oV]}function u(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return g(a);case 2:return"vec2("+g(a[0])+","+g(a[1])+")";case 3:return"vec3("+g(a[0])+","+g(a[1])+","+g(a[2])+
")";case 4:return"vec4("+g(a[0])+","+g(a[1])+","+g(a[2])+","+g(a[3])+")";case 9:return"mat3("+g(a[0])+","+g(a[1])+","+g(a[2])+","+g(a[3])+","+g(a[4])+","+g(a[5])+","+g(a[6])+","+g(a[7])+","+g(a[8])+")";case 16:return"mat4("+g(a[0])+","+g(a[1])+","+g(a[2])+","+g(a[3])+","+g(a[4])+","+g(a[5])+","+g(a[6])+","+g(a[7])+","+g(a[8])+","+g(a[9])+","+g(a[10])+","+g(a[11])+","+g(a[12])+","+g(a[13])+","+g(a[14])+","+g(a[15])+")";default:G.K("Wrong glsl value dimension")}}function g(a){return a%1?String(a):String(a)+
".0"}function D(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var B=t("__assets"),N=t("__config"),L=t("__debug"),A=t("__print"),G=t("__util"),z=N.L,I=N.zh,S=N.$e,m={},K={},U=null,Q={},R="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf irradiance_skybox.glslf r_convolution_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.HD=0;a.yK=1;a.xK=2;a.BK=4;a.AK=8;a.zK=16;a.vK=32;var ga=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,ra=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,T=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,ia=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
ha=/(?:\W|^)discard(\W|$)/,pa=new Int16Array(2),Z=null,ma=null,aa=null,fa=0,wa=0,da=[],W=null,Ga=!1;a.yg=function(a){W=a};a.gS=e;a.oO=c;a.oa=b;a.kR=h;a.NU=function(a){a.Ah=G.W(f(a.Pf,a.we));b(a,"PRECISION",N.L.precision);"highp"==N.L.precision?b(a,"EPSILON",u(1E-6)):b(a,"EPSILON",u(1E-4));b(a,"CONSTANTS_HACK",z.hC|0);b(a,"SRGB",z.srgb_type);b(a,"COMPARED_MODE",z.Sq|0)};a.rZ=function(a){return a.Pf};a.kZ=function(a){return a.we};a.dR=function(a){var b=JSON.stringify(a.Pf)+JSON.stringify(a.we)+JSON.stringify(a.Ah)+
JSON.stringify(a.Ze),d=m[b];if(d)return d;var g=a.we,e=E(S.shaders_path,a.Pf),g=E(S.shaders_path,g);if(!e||!g)return null;var e=C("vert",e,a),g=C("frag",g,a),d=0,f=l(g,ga);a.Wx=f;f>I.dB&&(d|=1);Z||(Z=new Uint32Array(I.tw));ma||(ma=new Uint32Array(I.$A));aa||(aa=new Uint32Array(I.uw));p(g,ma,I.$A)||(d|=2);p(e,aa,I.uw)||(d|=4);f=z.Gb?(e.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(e.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.St=f;f>I.eB&&(d|=
8);y(g)||(d|=16);a.status=d;if(0===a.status){var d=W,h=k(d,e,d.VERTEX_SHADER),n=k(d,g,d.FRAGMENT_SHADER),f=d.createProgram();d.attachShader(f,h);d.attachShader(f,n);d.linkProgram(f);for(var h={wy:h,jv:n,Oi:f,attributes:{},El:{},es:G.Bk(),EB:G.Bk(),FB:{},Qo:!0,Gw:!1,zJ:G.Bk(),yJ:G.Bk(),eb:c(a),oV:b,vG:!!g.match(ha),Mg:!0},u=d.getProgramParameter(f,d.ACTIVE_ATTRIBUTES),n=0;n<u;n++){var r=d.getActiveAttrib(f,n).name;h.attributes[r]=d.getAttribLocation(f,r)}u=d.getProgramParameter(f,d.ACTIVE_UNIFORMS);
for(n=0;n<u;n++)r=d.getActiveUniform(f,n).name.split("[0]").join(""),h.El[r]=d.getUniformLocation(f,r);m[b]=d=h;f=!W.getShaderParameter(d.jv,W.COMPILE_STATUS);h=!W.getShaderParameter(d.wy,W.COMPILE_STATUS);n=!W.getProgramParameter(d.Oi,W.LINK_STATUS);f?L.iI(d.jv,b,g):h?L.iI(d.wy,b,e):n&&L.mU(d.Oi,b,e,g);if(f||h||n)a.status|=32,d=null}else d=null;return d};a.PS=function(){Ga=!1;if(b4w.module_check("shader_texts"))Ga=!0;else{for(var a=[],b=B.AT_TEXT,c=0;c<R.length;c++){var d=G.Ii(S.shaders_path+R[c]);
a.push({id:R[c],type:b,url:d})}b=function(a,b){U||(U={});U[b]=a};a.length?B.enqueue(a,b,function(){Ga=!0}):A.error("Shaders have not been found.")}};a.LE=function(){return Ga};a.OY=function(){return da};a.fG=function(){return m};a.cleanup=function(){for(var a in m)F(m[a]);for(var b in K)delete K[b];for(var c in da)delete da[c];aa=ma=Z=null;Q={}};a.hO=F;a.PY=function(a){var b=a.Ah;A.log("Shader: "+a.Pf+" "+a.we+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)A.log("  "+b[a][0],b[a][1])};
a.X=u;a.ME=function(a,b){return b in a.El?!0:!1};a.reset=function(){W=null}};b4w.module.__geometry=function(a,t){function e(){return{length:0,frames:1,oc:0,offset:0,tm:0}}function c(a,b){for(var c=b.a_tbn,d=b.a_position,g=d.length,e=1;e<a.vb.length;e++)for(var f=a.vb[e].Gr,h=a.vb[e].mg.a_position,k=0;k<g;k++)d[k]+=f*h[k];d=Z.vv(c);for(e=0;e<d;e++){g=Z.identity(wa);for(k=1;k<a.vb.length;k++)if(h=a.vb[k].mg.a_tbn,f=a.vb[k].Gr)h=Z.Em(h,e,da),f=Z.slerp(Z.identity(W),h,f,da),Z.Dw(f,g,g);k=Z.Em(c,e,da);k=Z.Dw(g,k,da);Z.Pi(c,k,e)}}function b(a){return 65536<a.Wa?ia.gG()?!1:!0:!1}
function h(a){return 0<a.za.length?!0:!1}function f(a,b,c){if(!h(a))return a;c||ha.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.Wa*(b||1)+", will use drawArrays","color: #aa0");b=a.za;c=a.Wa;var d=a.xa,g=a.la,e;for(e in d){var f=d[e],k=u(f,c);d[e]=q(b,f,k)}for(d=0;d<g.length;d++){var m=g[d];for(e in m)f=m[e],k=u(f,c),m[e]=q(b,f,k)}for(d=0;d<a.vb.length;d++){e=a.vb[d].mg;for(var l in e)f=e[l],k=u(f,c),e[l]=q(b,f,k)}a.Wa=b.length;a.za=new Uint16Array(0);return a}function q(a,
b,c){if(0==b.length)return new Float32Array(0);for(var d=new Float32Array(a.length*c),g=0;g<a.length;g++)for(var e=a[g],f=0;f<c;f++)d[c*g+f]=b[c*e+f];return d}function l(){return{fe:null,kc:z(),Fm:0,count:0,Eb:{},usage:0,$n:0,bo:0,rd:[],Yg:null,vb:null,Jm:1,Mg:!0}}function x(a,b,c,d){if("a_normal"==b)return d=Z.Am(d),x(a,"a_tbn",c,d);var g=a.Eb,f=g[b],h=Q(b);if(f)c&&f.oc!=c&&aa.K('invalid num_comp for "'+b+'"'),R(a.kc,b,d,f.offset);else{f=S(a.kc,h);-1==f&&(a.kc.push(I(h,0)),f=a.kc.length-1);var h=
a.kc[f].Jl,k=new h.constructor(h.length+d.length);k.set(h);a.kc[f].Jl=k;R(a.kc,b,d,h.length);b=g[b]=e();b.oc=c;b.offset=h.length;b.length=d.length}v(a);return a}function y(a,b){if("a_normal"==b){for(var c=y(a,"a_tbn"),d=Z.vv(c),g=new Float32Array(3*d),e=0;e<d;e++){var f=Z.CR(c,e,Ga);g.set(f,3*e)}return g}if(c=a.Eb[b])return d=Q(b),ga(b,K(a.kc,d).subarray(c.offset,c.offset+c.length),new Float32Array(c.length));aa.K("extract_array_float() failed; invalid name: "+b)}function p(b,c){var d;switch(c){case a.Gn:case a.cq:d=
ca.STATIC_DRAW;break;case a.tt:d=ca.DYNAMIC_DRAW;break;default:aa.K("Wrong draw_mode")}b.usage=d}function d(a,b,c){function d(a,b){g[a]||(g[a]=0);g[a]+=b}var g={},e;for(e in a[0]){var f=a[0][e],h=Q(e);d(h,f.length*a.length)}for(e in b)f=b[e],h=Q(e),d(h,f.length);if(c){a=c.Vs.length;h=Q("a_part_ts");d(h,4*a);h=Q("a_part_r");d(h,4*a);b=c.$o;for(e in b)h=Q(e),d(h,b[e].oc*a);c=c.Qx;for(e in c)h=Q(e),d(h,a)}return g}function v(a){a.fe?(a.Yg||(a.Yg=ca.createBuffer()),ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,
a.Yg),ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,a.fe,a.usage),a.$n=a.fe.byteLength):a.$n=0;for(var b=a.bo=0;b<a.kc.length;b++){var c=a.kc[b].type,d=S(a.rd,c);-1==d&&(a.rd.push({jk:null,type:c,PP:aa.CJ()}),d=a.rd.length-1);c=a.rd[d];c.jk||(c.jk=ca.createBuffer());ca.bindBuffer(ca.ARRAY_BUFFER,c.jk);ca.bufferData(ca.ARRAY_BUFFER,a.kc[b].Jl,a.usage);a.bo+=a.kc[b].Jl.byteLength}}function r(a,b){a.va=T.Wn(a.va,b);a.Cb=T.mz(a.Cb,b);a.tc=T.bu(a.tc,b);a.cd=T.nz(a.cd,b)}function H(a){for(var b=a[0],c=a[0],d=G("JOIN_"+
a.length+"_SUBMESHES"),g=0,e=0;e<a.length;e++)g+=a[e].za.length;d.za=new Uint32Array(g);var f=g=0;if(0<a[0].vb.length)for(var h=0;h<a[0].vb.length;h++){for(e=0;e<a.length;e++)g+=a[e].vb[h].mg.a_position.length,f+=Z.vv(a[e].vb[h].mg.a_tbn);e={a_position:new Float32Array(g),a_tbn:Z.create(f)};d.vb.push({Gr:a[0].vb[h].Gr,mg:e})}for(e=g=0;e<a.length;e++)g+=a[e].Wa;d.Wa=g;for(var k in c.xa){for(e=g=0;e<a.length;e++)g+=a[e].xa[k].length;d.xa[k]=new Float32Array(g)}for(k in c.la[0]){for(e=g=0;e<a.length;e++)g+=
a[e].la[0][k].length;for(e=0;e<c.la.length;e++)d.la[e]=d.la[e]||{},d.la[e][k]=new Float32Array(g)}e=d.Zc;e.va=T.mu(b.Zc.va);f=g=0;h=[];for(c=0;c<a.length;c++){var m=a[c],l=m.za,p=m.Wa,n=m.xa;k=m.Zc.tc;T.Zu(e.va,m.Zc.va);T.lQ(e.tc,k);T.aA(m.Zc.cd,h);for(k=0;k<l.length;k++)d.za[g+k]=l[k]+f;var g=g+l.length,r;for(r in n){var l=n[r],v=f*u(l,p);d.xa[r].set(l,v)}for(k=0;k<m.la.length;k++){var n=m.la[k],I=d.la[k];for(r in n)l=n[r],v=f*u(l,p),I[r].set(l,v)}f+=p}e.Cb=T.uu(aa.f32(h),!0);if(0<d.vb.length)for(c=
0;c<d.vb.length;c++)for(r=d.vb[c].mg,k=g=e=0;k<a.length;k++)f=a[k].vb[c].mg,r.a_position.set(f.a_position,e),r.a_tbn.set(f.a_tbn,g),e+=f.a_position.length,g+=f.a_tbn.length;a[0].We&&(d.We={Vs:b.We.Vs,rC:b.We.rC,dJ:!0,Qx:b.We.Qx,$o:b.We.$o,Su:b.We.Su});return d}function E(a,b,c){b=b.Zc;for(var d=T.Re(),g=T.zu(),e=[],f=0;f<c.length;f++)T.Wn(a.Zc.va,c[f],d),T.Zu(b.va,d),T.nz(a.Zc.cd,c[f],g),T.aA(g,e);b.Cb=T.uu(aa.f32(e),!0);b.cd=T.BO(b.Cb);b.tc=T.wu(b.Cb)}function w(a,b,c,d,g,e){var h=a.submeshes[b],
m=h.base_length,l=G("SUBMESH_"+a.name+"_"+a.materials[b].name);l.Wa=m;var p=!1;if(k(c,"a_texcoord")){var u=null,r=a.materials[b];b=a.submeshes[b];if(r.Cg.length)switch(r=r.Cg[0],r.texture_coords){case "UV":u=C(b,r.uv_layer||a.active_uv_name,a.name);break;case "ORCO":for(var v=a.b4w_boundings.bb_src,u=new Float32Array(2*b.base_length),r=(v.max_x+v.min_x)/2,I=(v.max_y+v.min_y)/2,A=v.max_x-v.min_x,v=v.max_y-v.min_y,V=0,D=0;D<b.position.length;D+=3)u[V++]=(b.position[D]-r)/A+.5,u[V++]=(b.position[D+1]-
I)/v+.5}null===u&&(u=new Float32Array(2*b.base_length));b=u}else b=new Float32Array(0);if(k(c,"a_orco_tex_coord")){for(var u=a.b4w_boundings.bb_src,r=new Float32Array(3*h.base_length),I=h.position,A=u.max_x-u.min_x,v=u.max_y-u.min_y,V=u.max_z-u.min_z,z=D=0;z<I.length;z+=3)A?r[D++]=aa.clamp(parseFloat(((I[z]-u.min_x)/A).toFixed(5)),0,1):r[D++]=.5,v?r[D++]=aa.clamp(parseFloat(((I[z+1]-u.min_y)/v).toFixed(5)),0,1):r[D++]=.5,V?r[D++]=aa.clamp(parseFloat(((I[z+2]-u.min_z)/V).toFixed(5)),0,1):r[D++]=.5;
u=r}else u=new Float32Array(0);r=h.group;if(k(c,"a_influence")&&d){I=new Float32Array(4*m);A=r.length/m;v=new Float32Array(A);for(V=0;V<A;V++){v[V]=-1;for(var M in d)if(D=d[M],D.fK===V){v[V]=D.Pz;break}}z=3<A?A:4;d=new Float32Array(z);M=new Uint32Array(z);for(var V=new Float32Array(4),D=new Float32Array(z),z=new Uint32Array(z),ea=new Float32Array(4),q=0;q<m;q++)d.set(D),M.set(z),V.set(ea),I.set(F(r,A,q,m,v,d,M,V),4*q)}else I=new Float32Array(0);d=I;g=g?aa.W(g):{};g.a_color={Dm:!0};g.a_color.src=k(c,
"a_color")&&a.active_vcol_name?[{name:a.active_vcol_name,ah:7}]:[];l.xa.a_texcoord=b;l.xa.a_influence=d;l.xa.a_orco_tex_coord=u;d=l.xa;M=h.vertex_colors;b=h.color;u=a.name;r=[];for(I=0;I<M.length;I++)r.push(M[I].name);for(var w in g)if(I=g[w].src,I.length){for(v=A=0;v<I.length;v++)A+=aa.hn(I[v].ah);d[w]=new Float32Array(A*m);for(v=V=0;v<I.length;v++){var B=I[v].name,D=I[v].ah,z=aa.lI(D),ea=r.indexOf(B);if(-1==ea)ha.warn('vertex color "'+B+'" for mesh "'+u+'" not found'),q=7;else{for(var q=M[ea].mask,
W,H=W=0;H<ea;H++)W+=aa.hn(M[H].mask);W*=m}H=aa.hn(q);(D&q)!==D&&ha.error("Wrong color extraction from "+B+" to "+w+' for the mesh "'+u+'".');for(B=0;B<m;B++)for(var x=0;3>x;x++)if(z[x]){var y=aa.gp(q,x);d[w][B*A+(V+aa.gp(D,x))]=-1==ea?0:b[W+B*H+y]}V+=H}}else d[w]=new Float32Array(0);w=a.name;W=l.xa;if(e)for(var la in e)W[e[la]]=C(h,la,w);l.za=new Uint32Array(h.indices);la=h.position.length/m/3;w=k(c,"a_tbn")&&h.tbn.length?!0:!1;W=k(c,"a_shade_tangs")&&h.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&
(p=!0);for(g=0;g<la;g++){e=n(h,m,w,W,g);if(p)if(d={},d.name=a.b4w_shape_keys[g].name,l.vb.push(d),g){d.mg=e;d.Gr=a.b4w_shape_keys[g].value;continue}else d.mg=n(h,m,w,W,g),d.Gr=1;l.la.push(e)}if(1<la&&!p){a=l.la[0];e={};for(var E in a)e[E]=new Float32Array(a[E]);l.la.push(e)}k(c,"a_polyindex")&&(f(l,1,!0),l.xa.a_polyindex=N(l));h=h.boundings;c=l.Zc;c.va=T.Re();c.va.max_x=h.bb.max_x;c.va.max_y=h.bb.max_y;c.va.max_z=h.bb.max_z;c.va.min_x=h.bb.min_x;c.va.min_y=h.bb.min_y;c.va.min_z=h.bb.min_z;E=h.rbb;
a=h.caxis_x;m=h.caxis_y;p=h.caxis_z;e=h.be_ax;c.Cb=T.gz(a,m,p,h.be_cen);fa.scale(c.Cb.Sa,e[0],c.Cb.Sa);fa.scale(c.Cb.Ta,e[1],c.Cb.Ta);fa.scale(c.Cb.Ua,e[2],c.Cb.Ua);c.tc=T.wu(c.Cb);fa.copy(E.rbb_c,c.cd.U);fa.copy(a,c.cd.Sa);fa.copy(m,c.cd.Ta);fa.copy(p,c.cd.Ua);h=E.rbb_s;fa.scale(c.cd.Sa,h[0],c.cd.Sa);fa.scale(c.cd.Ta,h[1],c.cd.Ta);fa.scale(c.cd.Ua,h[2],c.cd.Ua);return l}function n(a,b,c,d,g){var e={},f=new Float32Array(3*b),h=Z.create(c?b:0),k=g*b*3;f.set(a.position.subarray(k,k+3*b),0);c&&Z.copy(a.tbn,
g*b,b,h);d&&(c=new Float32Array(3*b),c.set(a.shade_tangs.subarray(0,3*b),0),e.a_shade_tangs=c);e.a_position=f;e.a_tbn=h;return e}function C(a,b,c){var d=2*a.base_length,g=a.uv_layers.indexOf(b);if(-1==g)return ha.warn('uv layer "'+b+'" for mesh "'+c+'" not found'),new Float32Array(d);b=g*d;return a.texcoord.subarray(b,b+d)}function k(a,b){return-1<a.indexOf(b)?!0:!1}function F(b,c,d,e,f,h,k,m){for(var l=!0,p=0;p<c;p++){var n=b[p*e+d];if(-1!==n){var u=f[p];-1!==u&&(h[p]=n,k[p]=u,l=!1)}}if(l)return m;
g(h,k,a.Ty,!1);for(p=b=0;4>p;p++)b+=h[p];if(.01>b)return m;for(p=0;4>p;p++)h[p]/=b;if(.01>Math.abs(h[0]-1))m[0]=k[0]+1;else for(p=0;4>p;p++)m[p]=k[p]+h[p];return m}function u(a,b){if(0==b)return 0;var c=a.length,d=c/b;d!=Math.floor(d)&&aa.K("Array size mismatch during geometry calculation: array length="+c+", base length="+b);return d}function g(b,c,d,g){for(var e=b.length,f=e,h=!1,k=g?-1:1;1<f||h;){1<f&&(f=Math.floor(f/1.247330950103979));for(var h=!1,m=0;f+m<e;m++)if(d==a.Ty?0>k*(b[m]-b[m+f]):b[m]<
b[m+f]&&g)h=b[m],b[m]=b[m+f],b[m+f]=h,h=c[m],c[m]=c[m+f],c[m+f]=h,h=!0}}function D(a,b,c){var d=[],g=[];fa.subtract(b,a,d);fa.subtract(c,a,g);fa.normalize(d,d);fa.normalize(g,g);a=aa.clamp(fa.dot(d,g),-1,1);return Math.acos(a)}function B(a,b){var c=[];if(h(b))for(var d=b.za,g=d.length/3,e=0;e<g;e++){var f=new Float32Array(9),k=d[3*e];f[0]=a[3*k];f[1]=a[3*k+1];f[2]=a[3*k+2];k=d[3*e+1];f[3]=a[3*k];f[4]=a[3*k+1];f[5]=a[3*k+2];k=d[3*e+2];f[6]=a[3*k];f[7]=a[3*k+1];f[8]=a[3*k+2];c[e]=f}else for(e=0;e<a.length;e++)f=
new Float32Array(9),f[0]=a[9*e],f[1]=a[9*e+1],f[2]=a[9*e+2],f[3]=a[9*e+3],f[4]=a[9*e+4],f[5]=a[9*e+5],f[6]=a[9*e+6],f[7]=a[9*e+7],f[8]=a[9*e+8],c[e]=f;return c}function N(a){for(var b=new Float32Array(a.Wa),c=0;c<a.Wa;c++)b[c]=c%3/2;return b}function L(a,b,c){var d=fa.dist(a,b);a=fa.dist(a,c);b=fa.dist(b,c);c=(d+a+b)/2;return c*(c-d)*(c-a)*(c-b)}function A(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),c=new Float32Array(8*a),d=0;d<a;d++)c.set(b,8*d);return c}function G(a){return{name:a,Wa:0,za:null,
la:[],xa:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},vb:[],Zc:{va:T.Re(),Cb:T.Yq(),tc:T.vu(),cd:T.zu()},We:null}}function z(a){var b=[],c;for(c in a)b.push(I(c,a[c]));return b}function I(a,b){return{Jl:new (U(a))(b),type:a}}function S(a,b){for(var c=0;c<a.length;c++)if(a[c].type==b)return c;return-1}function m(a,b){var c=S(a,b);return-1==c?null:a[c].jk}function K(a,b){var c=S(a,b);return-1==c?null:a[c].Jl}function U(a){switch(a){case "float":return Float32Array;
case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function Q(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}
function R(a,b,c,d){var g=Q(b);ra(b,c,a[S(a,g)].Jl.subarray(d))}function ga(a,b,c){switch(Q(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=aa.UI(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=aa.AJ(b[a])}return c}function ra(a,b,c){switch(Q(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=aa.mo(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=aa.BJ(b[a])}return c}var T=t("__boundings"),ia=t("__extensions"),ha=t("__print"),
pa=t("__quat"),Z=t("__tbn"),ma=t("__tsr"),aa=t("__util"),fa=t("__vec3"),wa=Z.create(),da=Z.create(),W=Z.create(),Ga=new Float32Array(3),O=new Float32Array(3),ua=new Float32Array(3),ba=pa.create(),ja=new Float32Array(8);a.cq=10;a.tt=20;a.Ty=0;a.JX=1;a.Gn=a.cq;var ca=null;a.Kn="float";a.MX="short";a.NX="unsigned_byte";a.yg=function(a){ca=a};a.lJ=function(a,g,h){b(a)&&f(a);var k=a.za,m=a.Wa,n=a.la,r={},I;for(I in a.xa)I in h&&!h[I].Dm||(r[I]=a.xa[I]);h=l();0<a.vb.length&&c(a,n[0]);I=a.We;if(k.length){var A=
k.length;if(65536>=m)var k=new Uint16Array(k),D=ca.UNSIGNED_SHORT;else k=new Uint32Array(k),D=ca.UNSIGNED_INT}else A=m,k=null;for(var F=d(n,r,I),F=z(F),q={},w=0;w<F.length;w++)q[F[w].type]=0;var G={},V;for(V in r){var B=r[V],W=B.length;if(W){var H=Q(V),w=G[V]=e();w.length=W;w.oc=u(B,m);w.offset=q[H];R(F,V,B,q[H]);q[H]+=W}}r=n.length;for(V in n[0])if(B=n[0][V],H=Q(V),W=B.length,B=u(B,m),W)for(w=G[V]=e(),w.length=W,w.frames=r,w.oc=B,w.offset=q[H],1<r&&(w=G[V+"_next"]=e(),w.length=W,w.frames=r,w.oc=
B,w.offset=q[H]+W),w=0;w<r;w++)B=n[w][V],H=Q(V),R(F,V,B,q[H]),q[H]+=W;if(I){n=I.Vs;V=I.rC;var r=I.$o,W=I.Qx,H=I.dJ,m={a_part_ts:{data:[],oc:4},a_part_r:{data:[],oc:4}},M;for(M in r)m[M]={data:[],oc:r[M].oc};for(M in W)m[M]={data:[],oc:1};for(B=0;B<n.length;B++){w=n[B];H&&V&&!I.Su&&(w=ma.multiply(V,n[B],ja));!H&&I.Su&&fa.subtract(n[B],V,n[B]);m.a_part_ts.data.push(w[0],w[1],w[2],w[3]);m.a_part_r.data.push(w[4],w[5],w[6],w[7]);for(M in r)for(var w=r[M].oc,ea=0;ea<w;ea++)m[M].data.push(r[M].data[B*w+
ea]);for(M in W)m[M].data.push(W[M][0])}for(M in m)n=Q(M),R(F,M,m[M].data,q[n]),V=e(),V.oc=m[M].oc,V.offset=q[n],V.tm=1,V.length=m[M].data.length,G[M]=V,q[n]+=V.length;h.Jm=I.Vs.length}h.count=A;h.fe=k;h.kc=F;h.Fm=D;h.Eb=G;p(h,g);v(h);h.vb=a.vb;return h};a.QV=c;a.pS=b;a.oS=h;a.Px=f;a.EJ=function(a,b,c){p(a,b);a.count=c.length;a.fe=c;a.Fm=c instanceof Uint16Array?ca.UNSIGNED_SHORT:ca.UNSIGNED_INT};a.DJ=x;a.Zz=y;a.SZ=function(a){a.usage=ca.STATIC_DRAW};a.YS=function(a){a.usage=ca.DYNAMIC_DRAW};a.PC=
v;a.Zs=function(a,b,c,d){ca.bindBuffer(ca.ARRAY_BUFFER,a.rd[S(a.rd,b)].jk);ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*d,c)};a.fO=function(a){a.Yg&&ca.deleteBuffer(a.Yg);for(var b=0;b<a.rd.length;b++)a.rd[b].jk&&ca.deleteBuffer(a.rd[b].jk);a.rd.length=0};a.wG=function(a,b){return a.submeshes[b].base_length?!1:!0};a.uC=function(a,b){for(var c=0;c<a.la.length;c++){var d=a.la[c].a_position;ma.transform_vectors(d,b,d,0);d=a.la[c].a_tbn;Z.zH(d,b,d);(d=a.la[c].a_shade_tangs)&&0<d.length&&ma.transform_dir_vectors(d,
b,d,0)}(c=a.xa.au_center_pos)&&c.length&&ma.transform_vectors(c,b,c,0);r(a.Zc,b)};a.PV=function(a,b){var c=a.xa.au_center_pos;if(c&&c.length){var d=new Float32Array(c);ma.transform_vectors(d,b,d,0);for(var g=0;g<a.la.length;g++)for(var e=0;e<d.length;e++)a.la[g].a_position[e]+=d[e]-c[e];c.set(d)}else aa.K('Attribute "au_center_pos" is missing in particle submesh');r(a.Zc,b)};a.wN=r;a.OV=function(a,b){var c=a.Wa,d;for(d in b){var g=b[d].length;a.xa[d]=new Float32Array(g*c);for(var e=0;e<c;e++)for(var f=
0;f<g;f++)a.xa[d][e*g+f]=b[d][f]}};a.kJ=H;a.ZS=function(a,b,c){if(!a.Wa)return G("EMPTY");var d=c.length;65536<a.Wa*d&&!ia.gG()&&f(a,d);var g=a.za,e=a.Wa,h=a.xa,k=a.la,m;for(m in b){var l=b[m].length,p=l*e;h[m]=new Float32Array(p);for(var n=0;n<e;n++)for(p=0;p<l;p++)h[m][n*l+p]=b[m][p]}b=G("CLONE_"+d+"_SUBMESHES");b.Wa=e*d;b.za=new Uint32Array(g.length*d);for(n=0;n<d;n++)for(l=g.length*n,m=e*n,p=0;p<g.length;p++)b.za[l+p]=g[p]+m;for(var r in h)for(g=h[r],p=g.length*d,l=u(g,e),b.xa[r]=new Float32Array(p),
n=0;n<d;n++)m=e*l*n,b.xa[r].set(g,m);for(r in k[0])for(n=0;n<k.length;n++)for(g=k[n][r],p=g.length*d,l=u(g,e),b.la[n]=b.la[n]||{},b.la[n][r]=new Float32Array(p),p=0;p<d;p++)switch(h=c[p],m=e*l*p,r){case "a_position":ma.transform_vectors(g,h,b.la[n][r],m);break;case "a_tbn":ma.$V(g,h,b.la[n][r],m);break;case "a_shade_tangs":ma.transform_tangents(g,h,b.la[n][r],m);break;default:aa.K("Wrong attribute name: "+r)}E(a,b,c);return b};a.AE=E;a.av=w;a.qQ=function(a){var b=a.Wa,c=a.la[0].a_position,d=new Float32Array(12*
b);a=new Uint32Array(4*a.za.length);for(var g=new Float32Array(4*b),e=0;e<b;e++){d[12*e]=c[3*e];d[12*e+1]=c[3*e+1];d[12*e+2]=c[3*e+2];d[12*e+3]=c[3*e];d[12*e+4]=c[3*e+1];d[12*e+5]=c[3*e+2];d[12*e+6]=c[3*e];d[12*e+7]=c[3*e+1];d[12*e+8]=c[3*e+2];d[12*e+9]=c[3*e];d[12*e+10]=c[3*e+1];d[12*e+11]=c[3*e+2];a[6*e]=4*e+2;a[6*e+1]=4*e+1;a[6*e+2]=4*e;a[6*e+3]=4*e+2;a[6*e+4]=4*e;a[6*e+5]=4*e+3;var f=Math.random();g[4*e]=f;g[4*e+1]=f;g[4*e+2]=f;g[4*e+3]=f}c=G("HALO");c.la[0]={};c.Wa=4*b;c.la[0].a_position=d;c.xa.a_halo_bb_vertex=
A(b);c.xa.a_random_vals=g;c.za=a;return c};a.OR=k;a.KF=function(a,b,c){for(var d=[],g=0;g<a.submeshes.length;g++){var e=w(a,g,b,null,c,null);e.Wa&&d.push(e)}return d.length?1==d.length?d[0]:H(d):G("EMPTY")};a.lW=function(a,b,c,d){var g=a.fe,e=y(a,"a_position"),f=b.gT,h=b.hT;b=b.XP;for(var k=g,m=k.length/3,l=0;l<m;l++){var p=k[3*l],n=k[3*l+1],u=k[3*l+2],r=e[3*p+1],v=e[3*p+2],I=e[3*n+1],A=e[3*n+2],M=e[3*u+1],ea=e[3*u+2];f[3*l]=(e[3*p]+e[3*n]+e[3*u])/3;f[3*l+1]=(r+I+M)/3;f[3*l+2]=(v+A+ea)/3}ma.transform_vectors(f,
c,h);c=h.length/3;for(e=0;e<c;e++)f=h[3*e]-d[0],k=h[3*e+1]-d[1],m=h[3*e+2]-d[2],b[e]=f*f+k*k+m*m;d=g;g=b.length;if(!(2>g))for(h=g,e=!1;1<h||e;)for(1<h&&(h=Math.floor(h/1.247330950103979)),e=!1,c=0;h+c<g;c++)0>b[c]-b[c+h]&&(e=b[c],b[c]=b[c+h],b[c+h]=e,e=d,f=c,k=c+h,m=e[3*f],l=e[3*f+1],p=e[3*f+2],e[3*f]=e[3*k],e[3*f+1]=e[3*k+1],e[3*f+2]=e[3*k+2],e[3*k]=m,e[3*k+1]=l,e[3*k+2]=p,e=!0);g=d;ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,a.Yg);ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,g,ca.DYNAMIC_DRAW)};a.yV=g;a.yE=
function(a,b,c){for(var d=b.length/3,g=a.length/3,e=[],f=Array(3),h=Array(3),k=Array(3),m=0;m<g;m++){for(var l=a[3*m],p=a[3*m+1],n=a[3*m+2],u=0;3>u;u++)f[u]=b[3*l+u],h[u]=b[3*p+u],k[u]=b[3*n+u];if(c)var u=D(f,h,k),r=D(h,k,f),v=Math.PI-u-r;else v=r=u=1;var I=e,A;A=f;var M=k,ea=[],F=[],w=[];fa.subtract(h,A,ea);fa.subtract(M,A,F);fa.cross(ea,F,w);fa.normalize(w,w);A=w;for(M=0;3>M;M++)ea=3*p+M,F=3*n+M,I[3*l+M]=u*A[M],I[ea]=r*A[M],I[F]=v*A[M]}if(c)for(var z in c)for(m=c[z],a=0;3>a;a++){b=3*m[0]+a;for(g=
1;g<m.length;g++)f=3*m[g]+a,e[b]+=e[f];for(g=1;g<m.length;g++)f=3*m[g]+a,e[f]=e[b]}for(m=0;m<d;m++){c=m;z=e;a=new Float32Array(3);for(b=0;3>b;b++)g=3*c+b,a[b]=z[g];fa.normalize(a,a);for(b=0;3>b;b++)g=3*c+b,z[g]=a[b]}return e};a.zE=function(a,b,c){for(var d={},g=b.length/3,e=0;e<g;e++){var f=String(b[3*e])+String(b[3*e+1])+String(b[3*e+2]);d[f]=[]}b=a.length;for(e=0;e<b;e++)g=a[e],f=String(c[3*g])+String(c[3*g+1])+String(c[3*g+2]),f in d&&d[f].push(g);return d};a.gA=function(a,b,c,d){var g;g=B(a.la[0].a_position,
a);if(c){var e;e=a.la[0].a_tbn;for(var f=Z.vv(e),h=new Float32Array(3*f),k=0;k<f;k++){var m=Z.ub(e,k,ba),m=fa.transformQuat(aa.AXIS_Y,m,Ga);h[3*k]=m[0];h[3*k+1]=m[1];h[3*k+2]=m[2]}e=B(h,a)}h=g.length;k=new Float32Array(h);f=Ga;for(a=0;a<h;a++){var l=g[a];f.set(l.subarray(0,3));O.set(l.subarray(3,6));ua.set(l.subarray(6));k[a]=Math.sqrt(L(f,O,ua))}f=new Float32Array(h);f[0]=k[0];for(a=1;a<h;a++)f[a]=f[a-1]+k[a];h=f[k.length-1];k=[];for(a=0;a<b;a++){var m=h*aa.hh(d),m=aa.Yt(f,m,0,f.length-1),l=c?e[m]:
g[m],p=d;(m=Ga)||(m=new Float32Array(3));var n=l[0],u=l[1],r=l[2],v=l[3],I=l[4],A=l[5],M=l[6],ea=l[7],l=l[8],D=aa.hh(p),p=aa.hh(p);1<D+p&&(D=1-D,p=1-p);var F=1-D-p;m[0]=F*n+D*v+p*M;m[1]=F*u+D*I+p*ea;m[2]=F*r+D*A+p*l;c?(k[a]=new Float32Array(4),fa.normalize(m,m),m=pa.rotationTo(aa.AXIS_Y,m,ba),k[a][0]=m[0],k[a][1]=m[1],k[a][2]=m[2],k[a][3]=m[3]):(k[a]=new Float32Array(3),k[a][0]=m[0],k[a][1]=m[1],k[a][2]=m[2])}return k};a.$u=N;a.x_=L;a.SF=A;a.qI=function(a,b,c){a=a.la[0].a_position;for(var d=0;d<a.length;d+=
3)a[d]=(a[d]-c[0])*b[0]+c[0],a[d+1]=(a[d+1]-c[1])*b[1]+c[1],a[d+2]=(a[d+2]-c[2])*b[2]+c[2]};a.cz=function(a,b,c){var d=a.S[0].$;a=a.A.Ag;for(var g=1;g<a.length;g++)a[g].name==b&&(a[g].value=c);for(g=0;g<d.length;g++)if(!d[g].Sg&&d[g].ef&&!d[g].rj){b=d[g].ra;c=Q("a_position");var e=K(b.kc,c);ca.bindBuffer(ca.ARRAY_BUFFER,m(b.rd,c));var f=b.Eb.a_position;c=d[g];var h=a;if(f){for(var k=f.offset,f=f.length+k,l=c.ra.vb[0].mg.a_position,p=k;p<f;p++)e[p]=l[p-k];for(p=1;p<c.ra.vb.length;p++){var l=c.ra.vb[p].mg.a_position,
n=h[p].value;if(n)for(var u=k;u<f;u++)e[u]+=n*l[u-k]}ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*k,e.subarray(k))}e=Q("a_tbn");c=K(b.kc,e);ca.bindBuffer(ca.ARRAY_BUFFER,m(b.rd,e));h=b.Eb.a_tbn;b=c;c=a;if(h){e=h.offset;h=h.length+e;k=d[g].ra.vb;f=k[0].mg.a_tbn;p=Z.identity(wa);for(l=e;l<h;l+=Z.GD){for(var n=Z.identity(W),u=(l-e)/Z.GD,r=1;r<k.length;r++){var v=c[r].value;if(v){var I=Z.Em(k[r].mg.a_tbn,u,da),v=Z.slerp(p,I,v,da);Z.Dw(v,p,n)}}u=Z.Em(f,u,da);n=Z.Dw(n,u,da);b[l]=aa.mo(n[0]);b[l+1]=aa.mo(n[1]);
b[l+2]=aa.mo(n[2]);b[l+3]=aa.mo(n[3])}ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*e,b.subarray(e))}}};a.check_shape_keys=function(a){return a.A.ef};a.get_shape_keys_names=function(a){var b=[];if(a.A)for(var c=1;c<a.A.Ag.length;c++)b.push(a.A.Ag[c].name);return b};a.get_shape_key_value=function(a,b){if(a.A)for(var c=1;c<a.A.Ag.length;c++)if(b==a.A.Ag[c].name)return a.A.Ag[c].value;return 0};a.AA=function(a,b){var c=a.A.Ag;if(c)for(var d=1;d<c.length;d++)if(c[d].name==b)return!0;return!1};a.Bj=function(a){return a&&
a.A&&a.A.ve?!0:!1};a.draw_line=function(b,c,d){var g=b.ra;if(g){for(var e=d?c.length/3/2:c.length/3-1,f=new Float32Array(12*e),h=new Float32Array(12*e),k=new Uint16Array(6*e),m=0;m<e;m++){if(d)var l=6*m,p=6*m+3;else l=3*m,p=3*(m+1);var n=c[l],u=c[l+1],l=c[l+2],r=c[p],I=c[p+1],p=c[p+2],A=r-n,D=I-u,F=p-l;f[12*m]=n;f[12*m+1]=u;f[12*m+2]=l;h[12*m]=A;h[12*m+1]=D;h[12*m+2]=F;f[12*m+3]=r;f[12*m+4]=I;f[12*m+5]=p;h[12*m+3]=-A;h[12*m+4]=-D;h[12*m+5]=-F;f[12*m+6]=n;f[12*m+7]=u;f[12*m+8]=l;h[12*m+6]=-A;h[12*
m+7]=-D;h[12*m+8]=-F;f[12*m+9]=r;f[12*m+10]=I;f[12*m+11]=p;h[12*m+9]=A;h[12*m+10]=D;h[12*m+11]=F;k[6*m]=4*m;k[6*m+1]=4*m+1;k[6*m+2]=4*m+2;k[6*m+3]=4*m;k[6*m+4]=4*m+3;k[6*m+5]=4*m+1}d=0;for(var M in g.Eb)c=g.Eb[M],d+=f.length/3*c.oc;c={};c["float"]=d;d=g.kc=z(c);a.EJ(g,b.Bh,k);b=0;for(M in g.Eb)switch(c=g.Eb[M],M){case "a_position":R(d,M,f,b);c.offset=b;c.length=f.length;b+=c.length;break;case "a_direction":R(d,M,h,b);c.offset=b;c.length=h.length;b+=c.length;break;default:c.offset=b,c.length=f.length/
3*c.oc,k=new Float32Array(c.length),R(d,M,k,b),b+=c.length}v(g)}};a.mO=function(a){if(a){var b=l();if(a.fe)switch(a.Fm){case ca.UNSIGNED_SHORT:b.fe=new Uint16Array(a.fe);break;case ca.UNSIGNED_INT:b.fe=new Uint32Array(a.fe)}else b.fe=null;for(var c=b,d=a.kc,g=[],e=0;e<d.length;e++){var f=d[e].Jl,h=d[e].type;g.push({Jl:new f.constructor(f),type:h})}c.kc=g;b.Fm=a.Fm;b.count=a.count;b.Eb=aa.W(a.Eb);b.usage=a.usage;b.$n=a.$n;b.bo=a.bo;b.Yg=null;b.Sv=aa.W(a.Sv);b.vb=aa.W(a.vb);b.Jm=a.Jm;b.Mg=a.Mg}else b=
null;return b};a.$g=G;a.pO=function(a){var b=G(a.name);b.Wa=a.Wa;b.za=aa.W(a.za);b.la=aa.W(a.la);b.xa=aa.W(a.xa);b.vb=aa.W(a.vb);T.ni(a.Zc.va,b.Zc.va);T.Xn(a.Zc.Cb,b.Zc.Cb);T.Ak(a.Zc.tc,b.Zc.tc);T.vO(a.Zc.cd,b.Zc.cd);b.We=aa.W(a.We);return b};a.reset=function(){ca=null};a.hS=z;a.BU=S;a.qZ=m;a.rA=K;a.fR=U;a.uo=Q;a.oG=function(a){switch(Q(a)){case "float":return aa.Yi;case "short":return aa.jq;case "unsigned_byte":return aa.Fy;default:return aa.Yi}};a.vR=function(a){switch(Q(a)){case "float":return ca.FLOAT;
case "short":return ca.SHORT;case "unsigned_byte":return ca.UNSIGNED_BYTE;default:return ca.FLOAT}};a.kt=R;a.C_=function(a,b){switch(Q(a)){case "short":return aa.UI(b);case "unsigned_byte":return aa.AJ(b)}return b};a.B_=function(a,b){switch(Q(a)){case "short":return aa.mo(b);case "unsigned_byte":return aa.BJ(b)}return b};a.pY=ga;a.nY=ra};b4w.module.__objects=function(a,t){function e(a){var b=a.S;a=a.A;for(var c=0;c<b.length;c++){var d=b[c].kb;d.J.outline&&a.Ki&&ha.nU(d)}}function c(a){a.A.Ki=0;a=sa.indexOf(a);-1!=a&&sa.splice(a,1)}function b(a){if(a.ko)for(var b=a.S,c=0;c<b.length;c++)ha.HJ(b[c].kb,a)}function h(a,b){for(var c=a.S,d=b.S,g=0;g<c.length;g++){for(var e=!1,h=0;h<d.length;h++)if(c[g].kb==d[h].kb){e=!0;break}e||f(b,c[g].kb)&&Q.Nt(b,c[g].kb)}}function f(a,b){return!b.RD&&"SPEAKER"==a.type||!b.AM&&"LAMP"==a.type?!1:!0}function q(a){var b=
a.b4w_do_not_batch,c=a.b4w_collision,d=a.b4w_vehicle,g=a.b4w_floating,e=a.b4w_character,f=R.QR(a),h=K.vE(a),m=0<a.data.b4w_shape_keys.length,k=a.b4w_dynamic_geometry,p=l(a);if(!(b=D.uE(a)||b||c||d||m||g||f||e||h||k))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(c=a.materials[b],c.ha.Di||c.Bi||y(c.Md)){b=!0;break a}b=!1}return b||p}function l(a){var b=!1,c=a.constraints.length;if(c){for(var d=null,c=c-1;0<=c;c--){var g=a.constraints[c];if("LOCKED_TRACK"!=g.type||"REFLECTION PLANE"!=g.name){d=g;break}}if(!d||
!d.target)return!1;a=d.target;d=a.type;if(a.parent)return d=a.parent.type,"MESH"==d?b=b||q(a.parent):"EMPTY"==d?b=b||x(a.parent):b=!0,b;"MESH"==d?b=b||q(a):"EMPTY"==d?b=b||x(a):b=!0}return b}function x(a){var b=K.vE(a),c=a.b4w_do_not_batch,d=!!a.b4w_anchor,g=l(a);return D.uE(a)||b||c||d||g}function y(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var c=a[b];if("VECT_TRANSFORM"==c.type){var d=c.convert_from,g=c.convert_to,e=c.outputs[0];if(!(!e.is_linked||"WORLD"==d&&"CAMERA"==g||"CAMERA"==
d&&"WORLD"==g||"OBJECT"==d&&"OBJECT"==g))return!0}if("NORMAL_MAP"==c.type&&(d=c.space,e=c.outputs[0],e.is_linked&&("OBJECT"==d||"BLENDER_OBJECT"==d))||"TEX_COORD"==c.type&&c.outputs[3].is_linked||"OBJECT_INFO"==c.type&&(e=c.outputs[1],d=c.outputs[3],c.outputs[0].is_linked||e.is_linked||d.is_linked))return!0}return!1}function p(a){if(H(a,ca.ALL,!1,-1)){for(var b=1,c;;){c="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!H(a+c,ca.ALL,!1,-1))break;b++}ra.error('Object "'+a+'" already exists. Name was replaced by "'+
a+c+'".');return c}return""}function d(a,b,c){b=ca[b]||[];for(var d=[],g=0;g<b.length;g++){var e=b[g];if(e.A.de==c||-1==c)for(var f=e.S,h=0;h<f.length;h++)f[h].kb==a&&d.push(e)}return d}function v(a,b){var c=ca[a]||[];if(-1==b)return c;for(var d=[],g=0;g<c.length;g++){var e=c[g];e.A.de==b&&d.push(e)}return d}function r(a,b,c,d){for(var g=0;g<a.S.length;g++)for(var e=a.S[g].$,f=0;f<e.length;f++){var h=e[f];h.ra&&(h.ra.Mg=b);h.Mg=b;h.yb&&(h.yb.Mg=c);""!==h.ie&&(h=U.wv(h.ie))&&(h.UE=d)}}function H(a,
b,c,d,g){for(var e=null,f=0;f<b.length;f++){var h=b[f];if(!((c?h.Fd:h.name)!=a||h.A.de!=d&&-1!=d||g&&h.Uk||(e=h,Q.get_dg_parent(e))))break}return e}function E(a){ca.ALL.push(a);ca[a.type]||(ca[a.type]=[]);ca[a.type].push(a);var b=a.A.Nd;if(null!=b)for(var c=0;c<V.length;c++){var d=V[c];d.A.Nd==b&&d.us.push(a)}}function w(a,b,c){if(!b.Cj)return!0;a=a.Xk;if(a.si!=a.Qe)if(a.gt){var d=da.sign(a.si-a.Qe);a.Qe+=d*aa.iR()/.4;a.Qe=da.clamp(a.Qe,0,1)}else a.Qe=a.si;d="STATIC"==b.type?b.Vr:W.add(b.se.U,b.rw,
xa);c=W.dist(d,c);0==a.zo?(d=Math.max(b.qg-a.yo/2,0),b=b.pg+a.xo/2):-1==a.zo?(d=b.qg+a.yo/2,b=b.pg+a.xo/2):(d=Math.max(b.qg-a.yo/2,0),b=Math.max(b.pg-a.xo/2,0));a.zo=c<d?-1:c<b?0:1;a.si=c<d||c>b?0:1;a.nu=a.si?1:-1;Math.abs(c-a.Ww)>ba.lod_leap_smooth_threshold&&(0==a.Qe||1==a.Qe)&&(a.Qe=a.si);a.Ww=c;return!!a.si||0!=a.Qe}function n(a,b){r(a,!0,!1,!0);for(var c=v("ALL",-1),d=0;d<c.length;d++){var g=c[d];g!=a&&r(g,!1,!1,!1)}ha.gI(a,b);for(d=0;d<a.S.length;d++)for(g=a.S[d].$.length-1;0<=g;g--){var e=
a.S[d].$[g];0!=e.cc.length&&-1==e.cc.indexOf(b)||Q.rI(a.S[d],g)}ga.sa(a)&&ga.remove_object(a);for(d=0;d<c.length;d++)c[d]!=a&&r(c[d],!0,!0,!0);D.SP(a,b);c=a.rk.Ha;a.rk.Ha=a;return c}function C(a,b){a.rk.Ha=b;r(a,!0,!0,!0)}function k(a,b,c,d){var g=c.Xe.el.indexOf(d);b=a.nc[a.Xe.el.indexOf(b)];c.nc[g]=b;a=b.name;b.name=d;for(d=0;d<c.nc.length;d++)c.Xe.Km[d]=d!=g;return a}function F(a,b,c,d){for(var g=0;g<c.nc.length;g++)c.Xe.Km[g]=!1;a.nc[a.Xe.el.indexOf(b)].name=d}function u(a,b,c,d,g){for(var e=
1;e<a.A.Ag.length;e++)I.cz(a,a.A.Ag[e].name,a.A.Ag[e].value);if(D.is_animated(a))for(e=0;e<a.pa.length;e++){var f=a.pa[e];if(f)switch(f.type){case D.OBJ_ANIM_TYPE_PARTICLES:D.set_frame(a,D.kA(a,e),e);break;case D.OBJ_ANIM_TYPE_MATERIAL:if(f.Uo)for(var h=f.Uo.length-1;0<=h;h--)-1!=f.Uo[h].cc.indexOf(b)&&f.Uo.splice(h,1)}}d&&B.PA(a,b,function(b){if(b.Ja){var c=b.Ja.name;if(d[c]){var g=b.Ja.Yn!=d[c].Yn;b.Ja=R.XE(d[c]);g&&R.set_factor(a,c,b.Ja.Yn)}}},"PARTICLES");g&&(e=B.gb(a,b,"MAIN"))&&(e.lc.set(g.lc),
e.ee=g.ee,e.ti=g.ti,e.zd.set(g.zd),e.ne.set(g.ne),e.$j=g.$j,e.Fe.set(g.Fe),e.Jf=g.Jf,e.Ad=g.Ad,e.xd=g.xd,e.Jg=g.Jg,e.Vm=g.Vm,e.Vo=g.Vo,e.reflect_factor=g.reflect_factor,e.ih=g.ih,e.Fh.set(g.Fh),e.parallax_scale=g.parallax_scale,e.mh.set(g.mh),e.shallow_water_col.set(g.shallow_water_col),e.shallow_water_col_fac=g.shallow_water_col_fac,e.shore_water_col.set(g.shore_water_col),e.shore_water_col_fac=g.shore_water_col_fac,e.foam_factor=g.foam_factor,e.Ml=g.Ml,e.Lh=g.Lh.slice(),e.je=g.je.slice());B.PA(a,
b,function(b){for(var d=0;d<b.rf.length;d++){var g=b.rf[d],e=b.ma[d];if("IMAGE"==e.source||"ENVIRONMENT"==e.source){var f=ma.zv(c,g);f&&e.Pk!=f.Pk&&ma.hV(a,g,f)}}})}function g(a,b){for(var c=a[b],d=b+1;d<a.length;d++)c+="%join%"+a[d];return c}var D=t("__animation"),B=t("__batch"),N=t("__boundings"),L=t("__camera"),A=t("__config"),G=t("__constraints"),z=t("__container"),I=t("__geometry"),S=t("__lights"),m=t("__material"),K=t("__nla"),U=t("__nodemat"),Q=t("__obj_util"),R=t("__particles"),ga=t("__physics"),
ra=t("__print"),T=t("__primitives"),ia=t("__quat"),ha=t("__scenes"),pa=t("__subscene"),Z=t("__sfx"),ma=t("__textures"),aa=t("__time"),fa=t("__transform"),wa=t("__tsr"),da=t("__util"),W=t("__vec3"),Ga=t("__armature"),O=t("__anchors"),ua=t("__renderer"),ba=A.L,ja=A.Xc,ca={ALL:[]},Ca=0,la=0,V=[],sa=[],xa=new Float32Array(3),J=new Float32Array(4);a.Ny=0;a.My=1;a.Hd=2;a.DATA_ID_ALL=-1;a.update=function(a){for(var b=0;b<sa.length;b++){var d=sa[b],g=d,f=a,h=0,m=g.PH;0==m.ay&&(m.ay=f);f-=m.ay;if(m.PB&&f/
m.wg>=m.PB)c(g);else{f%=m.wg;if(f<m.zB)switch(m=f/(m.zB/5),f=Math.floor(m),f){case 0:h=(m-f)/2;break;case 1:h=(m-f)/2+.5;break;case 2:h=1;break;case 3:h=1-(m-f)/2;break;case 4:h=.5-(m-f)/2}g.A.Ki=h}d.A.Ki&&e(d)}if(a=ca.ARMATURE)for(b=0;b<a.length;b++)d=a[b],d.qB&&(fa.V(d),d.qB=!1)};a.set_outline_intensity=function(a,b){a.A.Ki=b;e(a)};a.apply_outline_anim=function(a,b,c,d){var g=a.PH;g.ay=0;g.zB=b;g.wg=c;g.PB=d;-1==sa.indexOf(a)&&sa.push(a)};a.clear_outline_anim=c;a.jF=function(a,b){var c=Q.Zq(b?"%meta_world%"+
a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==c.type)for(var d=0;d<a.data.materials.length;d++)c.nc.push(a.data.materials[d]);for(d=0;d<a.Id.length;d++)Q.Nt(c,a.Id[d]);a.Ha=c;if(b)c.Jc=a.uuid,c.Uk=!1,c.rm=a.Nn,c.is_dynamic=a.bj,c.A=Q.Zn(c.type),c.et=a.b4w_use_default_animation,c.Yl=D.az(a.b4w_anim_behavior);else{c.Jc=a.uuid;c.Uk=!1;c.rm=a.Nn;c.is_dynamic=a.bj;c.Kr=a.QD||!1;c.Cf=a.b4w_vehicle;c.is_character=a.b4w_character;c.Mm=a.b4w_floating;c.Mp=a.b4w_collision;
c.Jb=a.b4w_collision_id;c.tu=a.b4w_correct_bounding_offset;d=a.game;c.od={fs:d.physics_type,Ui:d.use_ghost,YJ:d.use_sleep,bh:d.mass,cK:d.velocity_min,bK:d.velocity_max,tF:d.damping,mI:d.rotation_damping,QS:d.lock_location_x,RS:d.lock_location_y,SS:d.lock_location_z,TS:d.lock_rotation_x,US:d.lock_rotation_y,VS:d.lock_rotation_z,li:d.collision_margin,ki:d.collision_group,mi:d.collision_mask,SC:d.use_collision_bounds,pu:d.collision_bounds_type,dt:d.use_collision_compound};if(d=a.b4w_vehicle_settings)c.Of=
{name:d.name,Hf:d.part,SV:d.suspension_rest_length,vC:d.suspension_compression,xC:d.suspension_stiffness,wC:d.suspension_damping,aD:d.wheel_friction,VB:d.roll_influence,cB:d.max_suspension_travel_cm,qr:d.force_max,Eq:d.brake_max,yp:d.steering_max,Lo:d.max_speed_angle,er:d.delta_tach_angle,Ms:d.speed_ratio,Os:d.steering_ratio,Jr:d.inverse_control,vm:d.floating_factor,An:d.water_lin_damp,Bn:d.water_rot_damp,nJ:d.synchronize_position};if(d=a.b4w_floating_settings)c.no={name:d.name,Hf:d.part,vm:d.floating_factor,
An:d.water_lin_damp,Bn:d.water_rot_damp,nJ:d.synchronize_position};if(d=a.b4w_character_settings)c.GE={hX:d.walk_speed,xU:d.run_speed,LV:d.step_height,wS:d.jump_strength,kX:d.waterline};for(d=0;d<a.constraints.length;d++){var g=a.constraints[d];"RIGID_BODY_JOINT"==g.type&&c.GB.push({target:g.target.Ha,GT:g.pivot_type,HT:g.pivot_x,IT:g.pivot_y,JT:g.pivot_z,Sa:g.axis_x,Ta:g.axis_y,Ua:g.axis_z,VW:g.use_limit_x,WW:g.use_limit_y,XW:g.use_limit_z,RW:g.use_angular_limit_x,SW:g.use_angular_limit_y,TW:g.use_angular_limit_z,
IS:g.limit_max_x,JS:g.limit_max_y,KS:g.limit_max_z,LS:g.limit_min_x,MS:g.limit_min_y,NS:g.limit_min_z,CS:g.limit_angle_max_x,DS:g.limit_angle_max_y,ES:g.limit_angle_max_z,FS:g.limit_angle_min_x,GS:g.limit_angle_min_y,HS:g.limit_angle_min_z})}d=c.A=Q.Zn("MESH"===c.type?c.is_dynamic?"DYNAMIC":"STATIC":c.type);a.parent?(c.parent=a.parent.Ha,"BONE"==a.parent_type&&"ARMATURE"==a.parent.type&&(c.cs=a.parent_bone),a.pinverse_tsr&&(c.Uw=wa.create(),wa.copy(a.pinverse_tsr,c.Uw))):a.dg_parent&&(c.parent=a.dg_parent.Ha,
c.kl=!0);var g=a.location,e=a.scale[0];da.LB(a.rotation_quaternion,J);fa.set_translation(c,g);fa.set_rotation(c,J);fa.set_scale(c,e);c.et=a.b4w_use_default_animation;c.Yl=D.az(a.b4w_anim_behavior);a.b4w_object_tags&&(c.ww={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});c.Du=a.b4w_custom_prop;a.b4w_viewport_alignment&&(c.vy={EM:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});d.hide=a.b4w_hidden_on_load;d.yG=
a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":Ga.Jp(a,c);g=d.fg;e=D.HN(g);a.b4w_animation_mixing?(d.Pd=new Float32Array(e.Ob),d.De=new Float32Array(e.Ob),d.Wd=new Float32Array(e.trans),d.Ie=new Float32Array(e.trans)):(d.Pd=e.Ob,d.De=e.Ob,d.Wd=e.trans,d.Ie=e.trans);for(var f in g){var h=g[f];1==h.ju.length&&Ga.kW(h,!0,e.trans,e.Ob)}d.ls=e;d.Bf=0;d.ej=a.b4w_animation_mixing;break;case "MESH":d.hj=B.nN(a.data.b4w_boundings.bb);c.KG=a.data.is_boundings_overridden;d.ue=a.b4w_do_not_render;d.pl=
ja.outlining_overview_mode||a.b4w_selectable;d.Mw=a.b4w_selectable;d.Xc=ja.outlining_overview_mode||a.b4w_outlining;d.Lw=a.b4w_outlining;d.Nw=ja.outlining_overview_mode||a.b4w_outline_on_select;d.Kg=a.b4w_billboard;d.yq=a.b4w_pres_glob_orientation;d.Aq="BASIC";d.zq="SPHERICAL"==a.b4w_billboard_geometry;f=d.Ji;f.fl=a.b4w_outline_settings.outline_duration;f.hl=a.b4w_outline_settings.outline_period;f.il=a.b4w_outline_settings.outline_relapses;d.pl&&(d.yk=da.TF(Ca),Ca++);for(f=0;f<a.data.b4w_vertex_anim.length;f++)g=
a.data.b4w_vertex_anim[f],c.ad.push({name:g.name,Ba:g.frame_start,jb:g.frame_end,tY:g.averaging,uY:g.averaging_interval,FM:g.allow_nla});c.A.ad=c.ad.length?!0:!1;"MESH"!=a.type&&da.K("Wrong object type: "+a.name);f=c.A;if(a.data.b4w_shape_keys.length)for(f.ef=!0,g=0;g<a.data.b4w_shape_keys.length;g++)e={},e.value=a.data.b4w_shape_keys[g].value,e.name=a.data.b4w_shape_keys[g].name,f.Ag.push(e);else f.ef=!1;d.af=a.b4w_shadow_cast;d.Td=a.b4w_shadow_receive;d.Ee=a.b4w_shadow_cast_only&&d.af;d.le=a.b4w_reflexible;
d.Rd=a.b4w_reflexible_only&&d.le;d.Qd=a.b4w_reflective;d.Rh=a.b4w_reflection_type;if(!d.Qd)for(f=c.nc,g=0;g<f.length;g++)e=f[g],!e.Eg||-1==e.Md.It.indexOf("BSDF_GLOSSY")&&-1==e.Md.It.indexOf("BSDF_DIFFUSE")||(c.A.Qd=!0,c.A.Rh="CUBE");d.gg=a.b4w_caustics;if(d.Ke=a.b4w_wind_bending)d.En=a.b4w_wind_bending_angle,f=B.oK(da.deg_to_rad(a.b4w_wind_bending_angle),d.hj,a.scale[0]),d.Tf=f,d.Uf=a.b4w_wind_bending_freq,d.yf=a.b4w_detail_bending_freq,d.xf=a.b4w_detail_bending_amp,d.sf=a.b4w_branch_bending_amp,
d.Jj=a.b4w_main_bend_stiffness_col,f=a.b4w_detail_bend_colors,d.Se.TA=f.leaves_stiffness_col,d.Se.SA=f.leaves_phase_col,d.Se.AB=f.overall_stiffness_col;d.ve=a.b4w_dynamic_geometry;if(d.ve)for(c.rk=a,f=0;f<c.nc.length;f++)c.Xe.el.push(c.nc[f].name),c.Xe.Km.push(!1);f=c.nc[0];d.Tg=f.od.Tg;d.Pg=f.od.Pg;d.qg=0;d.pg=Q.Py;d.Li=a.pass_index;break;case "LINE":d.va=N.Re();d.Cb=N.Yq();d.wh=N.Re();d.uk=N.Yq();break;case "CAMERA":L.MN(a,c);L.eN(c);break;case "LAMP":S.xS(a,c);break;case "SPEAKER":c.ka=Z.aP();
d=!1;for(f=0;f<c.S.length;f++)if(c.S[f].kb.Qc){d=!0;break}d&&Z.Jp(a,c);break;case "EMPTY":f=N.Re(),d.va=f,f=N.vu(),d.tc=f,a.field&&(c.ko={type:a.field.type,hJ:a.field.strength}),a.b4w_anchor&&(c.anchor={type:a.b4w_anchor.type,fo:a.b4w_anchor.detect_visibility,Gk:a.b4w_anchor.element_id,eT:a.b4w_anchor.max_width})}}E(c);return c};a.zW=function(a,b){var c=b.A;if("MESH"==b.type){var d=D.dG(a);if(d){var g=d.Ha,e=g.A.ls,f=b.A,m=a.data;b.Qt=g;m=m.vertex_groups;if(m.length){var g=g.A.fg,k=0,l={},p;for(p in g){var n=
da.keysearch("name",p,m);n&&(l[p]={fK:n.index,gi:g[p].gi,Pz:k++})}f.hi=l;p=k;m=D.iG();f.Jh=p;p>2*m?(f.Vk=!1,ra.error('too many bones for "'+a.name+'" / '+f.Jh+" bones (max "+m+" with blending, "+2*m+" without blending). Skinning will be disabled.")):f.Vk=!0}e=D.rQ(e.trans,e.Ob,c.hi);d.b4w_animation_mixing?(c.Pd=new Float32Array(e.Ob),c.De=new Float32Array(e.Ob),c.Wd=new Float32Array(e.trans),c.Ie=new Float32Array(e.trans)):(c.Pd=e.Ob,c.De=e.Ob,c.Wd=e.trans,c.Ie=e.trans);c.rq=new Float32Array(4);c.qq=
ia.create();c.ls=e;c.Bf=0}if(c.Qd)if(c=b.A,"CUBE"==c.Rh)c.ce=la++;else if("PLANE"==c.Rh){a:{d=a.constraints;for(e=0;e<d.length;e++)if(f=d[e],"LOCKED_TRACK"==f.type&&"REFLECTION PLANE"==f.name){if(f.target&&f.target.Ha){d=f.target.Ha;break a}ra.warn('Reflection plane target for object: "'+b.name+"\" is not present on the scene. Using object's Z-axis.")}d=null}d||(d=da.Ys("%reflection%"),d=Q.Zq(d,"EMPTY"),e=Q.Zn("EMPTY"),d.A=e,h(b,d),G.$D(d,b,[0,0,0],null,1),E(d));e=null;for(f=0;f<V.length;f++)if(V[f]==
d){e=f;break}null==e&&(e=V.length,V.push(d));d.A.Nd=e;c.Nd=e;d.us.push(b)}}};a.qW=b;a.JY=h;a.VN=f;a.AW=function(a){for(var b=0;b<a.length;b++){var c=a[b];!c.A||"DYNAMIC"!=c.A.type&&"CAMERA"!=c.A.type||fa.V(c);c.et&&D.MH(c)&&(D.apply_def(c),c.pa.length&&D.play(c,null,D.SLOT_ALL))}};a.wE=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.bj||a.parent&&a.parent.bj)return!0;switch(a.type){case "MESH":return q(a);case "EMPTY":return x(a);default:return!0}};a.get_meta_tags=function(a){return da.W(a.ww)};
a.get_custom_prop=function(a){return a.Du};a.cleanup=function(){la=Ca=0;V.length=0;sa.length=0;ca={ALL:[]}};a.copy=function(a,b,c){var d=Q.get_dg_parent(a),d=d?Q.UF(d.name,b):b,g=p(d);b=Q.Zq(d+g,a.type,b+g);b.Uk=a.Uk;b.rk=a.rk;b.Xe.el=Q.Wq(a.Xe.el);b.Xe.Km=Q.Wq(a.Xe.Km);b.is_dynamic=a.is_dynamic;b.Kr=a.Kr;b.et=a.et;b.rm=a.rm;b.A=Q.yz(a.A);b.A.Cj=!1;b.ww=Q.Xq(a.ww);b.Du=Q.Xq(a.Du);h(a,b);b.On=Q.Wq(a.On);b.parent=Q.Wq(a.parent);b.kl=a.kl;b.cs=a.cs;b.ad=Q.Wq(a.ad);b.Yl=a.Yl;!a.N||a.Cf||a.is_character||
a.Mm||(b.Mp=a.Mp,b.N=null);b.Jb=a.Jb;b.tu=a.tu;b.od=Q.Xq(a.od);d=[];for(g=0;g<a.S.length;g++){var e=b.S[g],f=a.S[g].$;if(c){for(var k=e.$,l=0;l<f.length;l++)if(!f[l].Sg){var n=Q.Xq(f[l]);n.ra=I.mO(f[l].ra);Q.bg(b,e.kb,n);d.push(f[l].ra)}for(l=0;l<f.length;l++)if(f[l].Sg){n=Q.Xq(f[l]);Q.bg(b,e.kb,n);for(var u=0;u<d.length;u++)d[u]==f[l].ra&&(n.ra=k[u].ra)}for(l=0;l<k.length;l++)k[l].ra&&I.PC(k[l].ra),ba.Zy&&k[l].ra&&ua.hN(k[l]),k[l].cl=B.UQ(k[l],b.A,b.Jc),B.fW(k[l]);ma.rV(k)}else for(l=0;l<f.length;l++)Q.bg(b,
e.kb,f[l])}for(d=0;d<a.nc.length;d++)b.nc.push(m.nO(a.nc[d]));Q.aC(b,!1);E(b);b.A.LA=!0;b.A.Wv=c;b.A.yk=da.TF(Ca);Ca++;return b};a.eG=function(a,b){var c=[],d=a.animation_data,g=a.data?a.data.animation_data:null;d&&d.action&&(d=d.action,(d.J.type==D.OBJ_ANIM_TYPE_OBJECT||d.J.type==D.OBJ_ANIM_TYPE_ARMATURE&&"ARMATURE"==a.type||d.J.type==D.xL&&"LAMP"==a.type||d.J.type==D.wL&&b)&&c.push(D.DG(null,d)));g&&g.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&c.push(D.DG(null,g.action));"MESH"==a.type&&c.push.apply(c,
D.$Q(a));b&&c.push.apply(c,D.aR(a));return c};a.update_boundings=function(a){for(var b=a.A,c=null,d=a.S[0].$,g=0;g<d.length;g++){var e=d[g],f=a.S[0].eg[g];if(e.ra&&f.qf&&f.Oe){var h=I.uo("a_position");if(h=I.rA(e.ra.kc,h)){var m=e.ra.Eb.a_position.offset,k=e.ra.Eb.a_position.length+m;B.tW(e,h.subarray(m,k));Q.PJ(e,b.D,f);"MAIN"==e.type&&(c?N.Zu(c,e.sb.Oe):c=N.mu(e.sb.Oe))}}}c=c||N.Re();if(b.Kg)Q.KJ(a,c);else{f=[];for(g=0;g<d.length;g++)if(e=d[g],"MAIN"==e.type&&(h=I.uo("a_position"),h=I.rA(e.ra.kc,
h)))e=d[g].ra.Eb,m=e.a_position.offset,k=e.a_position.length+m,f.push(h.subarray(m,k));Q.GW(a,c,f)}if(ba.debug_view)for(g=0;g<d.length;g++)if("DEBUG_VIEW"===d[g].type&&d[g].rj){a=b.Cb;b=T.fA(1,a.U);I.qI(b,[a.Sa[0],a.Ta[1],a.Ua[2]],a.U);I.Px(b,1,!0);b.xa.a_polyindex=I.$u(b);B.eW(d[g],b);break}};a.Sb=d;a.mG=function(a,b,c){b=ca[b]||[];for(var d=[],g=0;g<b.length;g++){var e=b[g];if(!(e.A.de!=c&&-1!=c||e.Uk))for(var f=e.S,h=0;h<f.length;h++)f[h].kb==a&&d.push(e)}return d};a.get_all_objects=v;a.get_first_character=
function(a){var b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(ga.uG(d))for(var g=d.S,e=0;e<g.length;e++)if(g[e].kb==a)return d}return null};a.Yo=r;a.get_selectable_objects=function(){var a=[],b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.pl&&!d.Uk&&a.push(d)}return a};a.get_outlining_objects=function(){var a=[],b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.Xc&&!d.Uk&&a.push(d)}return a};a.Vc=function(b,c,d,g){var e=null,f=ca.ALL;switch(b){case a.Ny:e=H(c,f,!0,d,
g);break;case a.My:a:{for(b=0;b<f.length;b++)if(e=f[b],e.Fd==d&&(e.A.de==g||-1==g)){var h=Q.get_dg_parent(e);if(h&&h.Fd==c)break a}e=null}break;case a.Hd:a:{for(g=0;g<f.length;g++){b=f[g];for(var e=c.length-1,h=b,m=!0;0<=e&&m;)m=h&&h.Fd==c[e]&&(h.A.de==d||-1==d),h&&(h=Q.get_dg_parent(h)),e--;if(m&&!h){e=b;break a}}e=null}}return e};a.get_world_by_name=function(a,b){return H("%meta_world%"+a,ca.WORLD,!0,b)};a.Av=function(a){return a.Fd.replace("%meta_world%","")};a.pick_object=function(b,c){var g=
ha.Gh();if(!g)return ra.error("No active scene"),null;var e=ha.Tb(g,pa.Hg);e&&e.enable_hmd_stereo&&(e=z.get_canvas(),b=e.clientHeight/2,c=e.clientWidth/2);if(e=O.ET(b,c))return e;e=ha.FT(g,b,c);if(!e)return null;for(var g=d(g,"MESH",-1),f=0;f<g.length;f++){var h=g[f].A,m=h.yk;if(m&&3>Math.abs(255*m[0]-e[0])&&3>Math.abs(255*m[1]-e[1])&&3>Math.abs(255*m[2]-e[2]))return h.Xc&&h.Nw&&(ja.outlining_overview_mode?a.apply_outline_anim(g[f],ja.fl,ja.hl,ja.il):(e=h.Ji,a.apply_outline_anim(g[f],e.fl,e.hl,e.il))),
g[f]}return null};a.set_wind_params=function(a,c){for(var g=d(a,"EMPTY",-1),e=0;e<g.length;e++){var f=g[e];if(f.ko&&"WIND"===f.ko.type){var h=f;break}}if(!h)return ra.error("There is no wind on the scene"),0;"number"==typeof c.wind_dir&&(g=da.deg_to_rad(c.wind_dir),W.set(Math.sin(g),-Math.cos(g),0,xa),da.dir_to_quat(xa,da.AXIS_Z,J),fa.set_rotation(h,J));"number"==typeof c.wind_strength&&(h.ko.hJ=c.wind_strength);b(h)};a.remove_object=function(a){G.WN(a)&&G.remove(a);var b=ca.ALL,c=ca[a.type],d=b.indexOf(a);
a=c.indexOf(a);-1!=d&&b.splice(d,1);-1!=a&&c.splice(a,1)};a.tT=E;a.VZ=function(a){return ca[a.type]&&-1<ca[a.type].indexOf(a)};a.uW=function(a,b){if(a.A.Cj){var c=a.A,d=b.J;if(c.Cj)for(var g=fa.get_translation(b.aj,xa),e=0;e<a.S.length;e++)if(a.S[e].kb==b)for(var f=0;f<a.S[e].$.length;f++){var h=a.S[e].$[f],m=h.Xk,k="SHADOW"==h.type&&"RECEIVE"==h.zb&&!ba.ys;ba.lod_smooth_transitions&&!k&&(k=d.WS,"ALL"==k||"NON-OPAQUE"==k&&(h.rb||h.cj))&&(m.gt=!0);w(h,c,g);m.Qe=m.si;m.yo=Math.min(d.jH,.6*c.Hj);m.xo=
Math.min(d.jH,.6*c.Ij)}}};a.vW=w;a.TU=function(a){var b=a.A,c=b.Tf,d=b.Uf,g=b.yf,e=b.xf,f=b.sf;a=a.S;for(b=0;b<a.length;b++)for(var h=a[b].$,m=0;m<h.length;m++){var k=h[m].ra,l=k.Eb,p=l.au_wind_bending_amp,M=l.au_wind_bending_freq,n=l.au_detail_bending_amp,u=l.au_detail_bending_freq,l=l.au_branch_bending_amp;if(M){var r=Array.apply(null,Array(M.length)).map(function(){return d});I.Zs(k,I.Kn,new Float32Array(r),M.offset)}p&&(r=Array.apply(null,Array(p.length)).map(function(){return c}),I.Zs(k,I.Kn,
new Float32Array(r),p.offset));n&&(r=Array.apply(null,Array(n.length)).map(function(){return e}),I.Zs(k,I.Kn,new Float32Array(r),n.offset));u&&(r=Array.apply(null,Array(u.length)).map(function(){return g}),I.Zs(k,I.Kn,new Float32Array(r),u.offset));l&&(r=Array.apply(null,Array(l.length)).map(function(){return f}),I.Zs(k,I.Kn,new Float32Array(r),l.offset))}};a.inherit_material=function(a,b,c,g){if(a.A.ve&&c.A.ve){var e=B.gb(a,b,"MAIN"),f=null;B.PA(c,g,function(a){f||(f={});a.Ja&&(f[a.Ja.name]=a.Ja)},
"PARTICLES");for(var h=n(c,g),m=k(a,b,c,g),l=ha.get_active(),p=0;p<c.S.length;p++){var r=c.S[p].kb;ha.set_active(r);var v=d(r,"LAMP",0),M=c.S[p].$;c.S[p].$=[];c.S[p].eg=[];B.YF(r,[c.rk],v,[]);B.xu(c,ha.tv(r),r);ha.dE(r,[c]);ha.append_object(r,c,!1,!0);for(v=0;v<M.length;v++)Q.bg(c,r,M[v])}F(a,b,c,m);C(c,h);u(c,g,a,f,e);ha.set_active(l)}};a.create_line=function(a){a=a||"";a+=p(a);a=Q.Zq(a,"LINE");a.A=Q.Zn("EMPTY");a.is_dynamic=!0;B.XF(ha.Gh(),[a]);ha.append_object(ha.Gh(),a);E(a);return a};a.TQ=function(a,
b){var c=b.A,d=N.mu(c.hj);c.Kg?Q.KJ(b,d):Q.FW(b,d,a.data.b4w_boundings)};a.set_nodemat_value=function(a,b,c,d){for(var g=Q.is_world(a),e=0;e<a.S.length;e++)for(var f=a.S[e].$,h=0;h<f.length;h++){var m=f[h];if(g||-1!=m.cc.indexOf(b))m.Lh[c]=d}g&&ha.hy(a)};a.set_nodemat_rgb=function(a,b,c,d,g,e){for(var f=Q.is_world(a),h=0;h<a.S.length;h++)for(var m=a.S[h].$,k=0;k<m.length;k++){var l=m[k];if(f||-1!=l.cc.indexOf(b))l.je[3*c]=d,l.je[3*c+1]=g,l.je[3*c+2]=e}f&&ha.hy(a)};a.get_nodemat_value=function(a,b){return a.Lh[b]};
a.get_nodemat_rgb=function(a,b,c){c[0]=a.je[3*b];c[1]=a.je[3*b+1];c[2]=a.je[3*b+2];return c};a.Br=function(a,b,c){b=g(b,c);for(c=0;c<a.length;c+=3)if(a[c]==b)return 4*a[c+1]+a[c+2];return null};a.Ar=function(a,b,c){b=g(b,c);for(c=0;c<a.length;c+=2)if(a[c]==b)return a[c+1];return null}};b4w.module.__obj_util=function(a,t){function e(a){a={type:a,de:0,D:H.nm(),Dy:H.nm(),pivot:new Float32Array(3),wc:new Float32Array(3),Qk:0,Rk:0,LA:!1,Wv:!1,yk:null,Ki:0,Al:!1,pe:w.create(),use_panning:!1,nb:0,Sp:1,Rp:1,Tp:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,Jd:!1,dof_object:null,Vb:null,Xa:null,Kb:null,Ed:null,Dd:null,ke:null,ui:!0,Ji:{fl:1,hl:1,il:0},ce:-1,Nd:-1,xc:new Float32Array(4),Tg:0,Pg:0,Cj:!1,Vr:new Float32Array(3),
rw:new Float32Array(3),qg:0,pg:Infinity,Hj:0,Ij:0,ue:!1,af:!1,Td:!1,Ee:!1,le:!1,Rd:!1,Qd:!1,Rh:"",Ke:!1,ve:!1,Nc:!1,hide:!1,yG:!1,pl:!1,Mw:!1,Xc:!1,Lw:!1,Nw:!1,Tk:!1,is_visible:!1,rr:!1,En:0,Tf:0,Uf:0,yf:0,xf:0,sf:0,Jj:"",Se:{TA:"",SA:"",AB:""},cm:!1,iu:new Float32Array(3),Kg:!1,yq:!1,Aq:"",zq:!1,Bf:0,oy:0,py:0,Jh:0,zm:!1,ad:!1,ef:!1,Ag:[],Vk:!1,ej:!1,nf:1,Qn:0,Pn:1,dj:null,Kh:!1,fi:new Int8Array([-1,-1]),mp:[],vw:[],sx:[],Pd:null,De:null,Wd:null,Ie:null,Bl:null,ll:null,fg:null,hi:null,ls:null,rq:null,
qq:null,hj:v.Re(),va:v.Re(),wh:v.Re(),tc:v.vu(),se:v.vu(),Cb:v.Yq(),uk:v.Yq(),cd:v.zu(),jE:v.zu(),xq:v.bS(),vq:v.$R(),wq:v.aS(),Li:0};w.copy(E.AXIS_Z,a.pe);return a}function c(a){return{kb:a,Vv:!1,$:[],eg:[],Mi:[],qj:null,iC:[],Ur:0,LH:!1,ja:[],SI:[]}}function b(a){if(!(a instanceof Object))return a;var c=null,d=null,g=null,e=null,f=null,h=null;a.ma&&(c=a.ma,a.ma=null);a.Mf&&(d=a.Mf,a.Mf=null);a.rf&&(g=a.rf,a.rf=null);a.vb&&(e=a.vb,a.vb=null);a.yb&&(f=a.yb,a.yb=null);a.ff&&(h=a.ff,a.ff=null);var k;
k=a.constructor;switch(k){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:k=new k(a);break;case Array:k=new k(a.length);for(var l=0;l<a.length;l++)k[l]=b(a[l]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:k=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:k=null;break;case Function:k=a;break;default:for(l in k=new k,a)k[l]=b(a[l])}c&&
(k.ma=c,a.ma=c);d&&(k.Mf=d,a.Mf=d);g&&(k.rf=g,a.rf=g);e&&(k.vb=e,a.vb=e);f&&(k.yb=f,a.yb=f);h&&(k.ff=E.Bk(),a.ff=h);return k}function h(a,b){v.ni(b,a.va);v.Wn(a.va,a.D,a.wh)}function f(a,b,c){a.tc=v.xE(b,c);v.bu(a.tc,a.D,a.se)}function q(a,b,c,d,e,f){a.Cb=v.gz(b,c,d,f);w.scale(a.Cb.Sa,e[0],a.Cb.Sa);w.scale(a.Cb.Ta,e[1],a.Cb.Ta);w.scale(a.Cb.Ua,e[2],a.Cb.Ua);v.mz(a.Cb,a.D,a.uk)}function l(a,b,c,d){a.xq=v.mE(b,d);a.vq=v.kE(c,d);a.wq=v.lE(b,d)}function x(a,b,c,d,e,f){a.cd=v.rU(f,b,c,d,e);v.nz(a.cd,a.D,
a.jE)}function y(a,b,c){v.Wn(a.sb.Oe,b,c.Oe);a.Hl&&v.mz(a.sb.qf,b,c.qf);v.bu(a.sb.Pe,b,c.Pe)}function p(a,b){for(var c=a.S,d=0;d<c.length;d++){var e=c[d];if(e.kb==b)return e}return null}function d(a){return a.kl?a.parent:a.parent?d(a.parent):null}var v=t("__boundings"),r=t("__config"),H=t("__tsr"),E=t("__util"),w=t("__vec3"),n=t("__vec4"),C=r.L;a.Py=Infinity;a.Zn=e;a.yz=function(a){var b=e(a.type);b.de=a.de;H.copy(a.D,b.D);H.copy(a.Dy,b.Dy);w.copy(a.pivot,b.pivot);w.copy(a.wc,b.wc);b.Qk=a.Qk;b.Rk=
a.Rk;b.LA=a.LA;b.Wv=a.Wv;a.yk&&(b.yk=w.clone(a.yk));b.Ki=a.Ki;b.Al=a.Al;w.copy(a.pe,b.pe);b.use_panning=a.use_panning;b.nb=a.nb;b.Sp=a.Sp;b.Rp=a.Rp;b.Tp=a.Tp;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.Jd=a.Jd;b.dof_object=a.dof_object;b.Vb=E.W(a.Vb);b.Xa=E.W(a.Xa);b.Kb=E.W(a.Kb);b.Ed=E.W(a.Ed);
b.Dd=E.W(a.Dd);b.ke=a.ke;b.ui=a.ui;b.Ji.fl=a.Ji.fl;b.Ji.hl=a.Ji.hl;b.Ji.il=a.Ji.il;b.ce=a.ce;b.Nd=a.Nd;b.xc=a.xc;b.Tg=a.Tg;b.Pg=a.Pg;b.Cj=a.Cj;w.copy(a.Vr,b.Vr);w.copy(a.rw,b.rw);b.qg=a.qg;b.pg=a.pg;b.Hj=a.Hj;b.Ij=a.Ij;b.ue=a.ue;b.af=a.af;b.Td=a.Td;b.Ee=a.Ee;b.le=a.le;b.Rd=a.Rd;b.Qd=a.Qd;b.Rh=a.Rh;b.Ke=a.Ke;b.ve=a.ve;b.Nc=a.Nc;b.hide=a.hide;b.pl=a.pl;b.Mw=a.Mw;b.Xc=a.Xc;b.Lw=a.Lw;b.Nw=a.Nw;b.Tk=a.Tk;b.is_visible=a.is_visible;b.rr=a.rr;b.En=a.En;b.Tf=a.Tf;b.Uf=a.Uf;b.yf=a.yf;b.xf=a.xf;b.sf=a.sf;b.Jj=
a.Jj;b.Se=a.Se;b.cm=a.cm;w.copy(a.iu,b.iu);b.Kg=a.Kg;b.yq=a.yq;b.Aq=a.Aq;b.zq=a.zq;b.Bf=a.Bf;b.oy=a.oy;b.py=a.py;b.Jh=a.Jh;b.zm=a.zm;b.ad=a.ad;b.ef=a.ef;b.Ag=E.W(a.Ag);b.Vk=a.Vk;b.ej=a.ej;b.nf=a.nf;b.Qn=a.Qn;b.Pn=a.Pn;b.fi.set(a.fi);b.mp=E.W(a.mp);b.vw=E.W(a.vw);b.sx=E.W(a.sx);b.Pd=E.W(a.Pd);b.De=E.W(a.De);b.Wd=E.W(a.Wd);b.Ie=E.W(a.Ie);b.fg=E.W(a.fg);b.hi=E.W(a.hi);b.ls=E.W(a.ls);b.rq=E.W(a.rq);b.qq=E.W(a.qq);v.ni(a.hj,b.hj);v.ni(a.va,b.va);v.ni(a.wh,b.wh);v.Ak(a.tc,b.tc);v.Ak(a.se,b.se);v.Xn(a.Cb,
b.Cb);v.Xn(a.uk,b.uk);v.sO(a.vq,b.vq);v.uO(a.xq,b.xq);v.tO(a.wq,b.wq);b.Li=a.Li;return b};a.Zq=function(a,b,c){c||(c=a);return{name:a,Jc:E.mv(),Fd:c,type:b,nc:[],Uk:!0,rk:null,Xe:{el:[],Km:[]},is_dynamic:!1,Kr:!1,et:!1,KG:!1,A:null,uc:null,ka:null,Db:null,Qt:null,anchor:null,ko:null,ww:null,Du:null,S:[],ad:[],te:E.Bk(),Dz:E.Bk(),pa:[],us:[],Ye:[],On:[],Uh:null,kn:[],parent:null,kl:!1,cs:"",vy:null,Uw:null,Mp:!1,Jb:"",tu:"AUTO",Cf:!1,is_character:!1,Mm:!1,jz:!1,N:null,R:null,Rg:null,Of:null,no:null,
GE:null,GB:[],od:{fs:"NO_COLLISION",Ui:!1,YJ:!1,bh:0,cK:0,bK:0,tF:0,mI:0,QS:!1,RS:!1,SS:!1,TS:!1,US:!1,VS:!1,li:0,ki:0,mi:0,SC:!1,pu:"BOX",dt:!1},PH:{ay:0,zB:0,wg:0,PB:0},Yl:0,rm:[],qB:!1,BH:!1,Wr:[]}};a.FZ=c;a.Wq=function(a){return a instanceof Array?a.slice():a};a.Xq=b;a.is_dynamic=function(a){return a.is_dynamic};a.mb=function(a){return"MESH"==a.type&&a.is_dynamic};a.Nt=function(a,b){a.S.push(c(b))};a.bg=function(a,b,c){var d=a.A;a=p(a,b);a.$.push(c);b=v.EG();y(c,d.D,b);a.eg.push(b)};a.KJ=function(a,
b){var c=a.A,d=Math.max(Math.abs(b.max_x),Math.abs(b.min_x)),e=Math.max(Math.abs(b.max_y),Math.abs(b.min_y)),k=Math.max(Math.abs(b.max_z),Math.abs(b.min_z)),k=Math.sqrt(d*d+e*e+k*k),d=Math.sqrt(d*d+e*e),e=v.Re();e.max_x=e.max_y=e.max_z=k;e.min_x=e.min_y=e.min_z=-k;h(c,e);f(c,k,[0,0,0]);q(c,[1,0,0],[0,1,0],[0,0,1],[k,k,k],[0,0,0]);a.is_dynamic?l(c,d,d,e):x(c,[1,0,0],[0,1,0],[0,0,1],[k,k,k],[0,0,0])};a.FW=function(a,b,c){var d=a.A,e=c.bs_rad,k=c.bc_rad,p=c.bs_cen,n=c.be_cen,u=c.caxis_x,r=c.caxis_y,
v=c.caxis_z,I=c.be_ax,w=c.rbb.rbb_c;c=c.rbb.rbb_s;h(d,b);f(d,e,p);b=a.is_dynamic;q(d,b?u:[1,0,0],b?r:[0,1,0],b?v:[0,0,1],I,n);a.is_dynamic?l(d,k,k,d.va):x(d,u,r,v,c,w)};a.GW=function(a,b,c){for(var d=a.A,e=b.max_x-b.min_x,k=b.max_y-b.min_y,p=b.max_z-b.min_z,n=(b.max_x+b.min_x)/2,u=(b.max_y+b.min_y)/2,r=(b.max_z+b.min_z)/2,v=n,I=r,w=Math.max(e,Math.max(k,p))/2,m=Math.max(e,p)/2,H=[n/(e?e:1),u/(k?k:1),r/(p?p:1)],F=.5,y=0;y<c.length;y++)for(var E=c[y],C=0;C<E.length;C+=3){var t=E[C],T=E[C+1],ia=E[C+
2],ha=Math.sqrt((n-t)*(n-t)+(u-T)*(u-T)+(r-ia)*(r-ia));if(ha>w)var pa=n-w*(t-n)/ha,Z=u-w*(T-u)/ha,ha=r-w*(ia-r)/ha,n=(pa+t)/2,u=(Z+T)/2,r=(ha+ia)/2,w=Math.sqrt((n-t)*(n-t)+(u-T)*(u-T)+(r-ia)*(r-ia));Z=Math.sqrt((v-t)*(v-t)+(I-ia)*(I-ia));Z>m&&(pa=v-m*(t-v)/Z,ha=I-m*(ia-I)/Z,v=(pa+t)/2,I=(ha+ia)/2,m=Math.sqrt((v-t)*(v-t)+(I-ia)*(I-ia)));t/=e?e:1;T/=k?k:1;ia/=p?p:1;ha=Math.sqrt((H[0]-t)*(H[0]-t)+(H[1]-T)*(H[1]-T)+(H[2]-ia)*(H[2]-ia));ha>F&&(pa=H[0]-F*(t-H[0])/ha,Z=H[1]-F*(T-H[1])/ha,ha=H[2]-F*(ia-H[2])/
ha,H[0]=(pa+t)/2,H[1]=(Z+T)/2,H[2]=(ha+ia)/2,F=Math.sqrt((H[0]-t)*(H[0]-t)+(H[1]-T)*(H[1]-T)+(H[2]-ia)*(H[2]-ia)))}c=e?e*H[0]:b.max_x;v=k?k*H[1]:b.max_y;H=p?p*H[2]:b.max_z;e*=F;k*=F;p*=F;h(d,b);f(d,w,[n,u,r]);q(d,[1,0,0],[0,1,0],[0,0,1],[e,k,p],[c,v,H]);a.is_dynamic?l(d,m,m,d.va):x(d,[(d.va.max_x-d.va.min_x)/2,0,0],[0,(d.va.max_y-d.va.min_y)/2,0],[0,0,(d.va.max_z-d.va.min_z)/2],[1,1,1],[(d.va.max_x+d.va.min_x)/2,(d.va.max_y+d.va.min_y)/2,(d.va.max_z+d.va.min_z)/2])};a.PJ=y;a.$Z=function(a,b){for(var c=
a.S,d=0;d<c.length;d++)if(c[d].kb==b){c.splice(d,1);break}};a.Da=p;a.JJ=function(a,b){for(var c=0;c<a.length;c++)n.copy(b,a[c].A.xc)};a.aC=function(a,b,c){for(var d=0;d<a.S.length;d++){var e=a.S[d];c&&e.kb!=c||(e.Vv=b)}};a.rI=function(a,b){a.$.splice(b,1);a.eg.splice(b,1)};a.yv=function(a,b){for(var c=[],d=b?C.tH-1:C.tH,e=0;e<a.length;e++){var f=a[e];f.Db.ZF&&c.length<d&&c.push(f)}return c.length?c:a[0]?[a[0]]:[]};a.iT=function(a,b){H.identity(b.D);b.yk=null;a.A=b};a.JE=function(a,b){if(b.b4w_enable_soft_particles&&
0<b.b4w_particles_softness){var c=b.material-1,d=a.nc;if(0<=c&&c<d.length&&("ADD"==d[c].ib||"ALPHA"==d[c].ib||"ALPHA_SORT"==d[c].ib))return!0}return!1};a.aO=function(a){a=a.S;for(var b=0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++)for(var e=c[d].eb.Ah,f=0;f<e.length;f++){var h=e[f];if("USE_MODEL_TSR_INVERSE"==h[0]&&"1"==h[1])return!0}return!1};a.UF=function(a,b){return a+"*"+b};a.get_parent=function(a){return a.kl?null:a.parent};a.get_dg_parent=d;a.lA=function(a,b){for(var c=[],g=0;g<b.length;g++){var e=
b[g];d(e)==a&&c.push(e)}return c};a.get_object_data_id=function(a){return a.A.de};a.is_mesh=function(a){return"MESH"===a.type};a.is_armature=function(a){return"ARMATURE"===a.type};a.is_speaker=function(a){return"SPEAKER"===a.type};a.is_camera=function(a){return"CAMERA"===a.type};a.is_lamp=function(a){return"LAMP"===a.type};a.is_empty=function(a){return"EMPTY"===a.type};a.is_line=function(a){return"LINE"===a.type};a.is_world=function(a){return"WORLD"===a.type}};b4w.module.__particles=function(a,t){function e(){v.K("_rand() undefined")}function c(a,b){return{name:a,Pw:b,time:0,Xw:-1,Op:!1,Yn:1,Ba:0,jb:0,$x:0,Sr:0,hw:0,cyclic:0,bh:0,Ro:0,Dv:0,vj:0,Ue:0,Cy:0,size:0,Mt:0,Lt:0,ru:0,qu:new Float32Array(16),Ew:!1,positions:null,ms:null,Vx:null,Qs:null,co:null,dr:null,ig:null,Ow:null,Yx:0,Zx:0}}function b(a,b,c,g,e,f){var h=a.co,l=a.ig,p=a.time;a=a.Xw;for(var k=0;k<h.length;k+=4){var r=h[k];if(p>a&&p>=r&&r>a||p<a&&(r>a||p>=r))for(r=0;8>r;r++)l[8*k+r]=g[r],w[r]=
g[r];else for(r=0;8>r;r++)w[r]=l[8*k+r];r=n;r[0]=b[3*k];r[1]=b[3*k+1];r[2]=b[3*k+2];d.transform_vec3(r,w,r);e[3*k]=r[0];e[3*k+1]=r[1];e[3*k+2]=r[2];var u=x.Em(c,k,E);x.zH(u,w,u);x.Pi(f,u,k);for(r=1;4>r;r++)e[3*(k+r)]=e[3*k],e[3*(k+r)+1]=e[3*k+1],e[3*(k+r)+2]=e[3*k+2],x.Pi(f,u,k+r)}}function h(a){a?(v.JV(a),e=function(){return v.YT()}):e=function(){return Math.random()}}var f=t("__config"),q=t("__batch"),l=t("__geometry"),x=t("__tbn"),y=t("__textures"),p=t("__time"),d=t("__tsr"),v=t("__util"),r=t("__vec3"),
H=f.L,E=x.create(),w=new Float32Array(8),n=new Float32Array(3),C=[];a.XE=function(a){var b=c(a.name,a.type);b.time=a.time;b.Xw=a.Xw;b.Op=a.Op;b.Yn=a.Yn;b.Ba=a.Ba;b.jb=a.jb;b.$x=a.$x;b.Sr=a.Sr;b.hw=a.hw;b.cyclic=a.cyclic;b.bh=a.bh;b.Ro=a.Ro;b.Dv=a.Dv;b.vj=a.vj;b.Ue=a.Ue;b.Cy=a.Cy;b.size=a.size;b.Mt=a.Mt;b.Lt=a.Lt;b.ru=a.ru;b.qu.set(a.qu);b.Ew=a.Ew;b.positions=v.W(a.positions);b.ms=v.W(a.ms);b.Vx=v.W(a.Vx);b.Qs=v.W(a.Qs);b.co=v.W(a.co);b.dr=v.W(a.dr);b.ig=v.W(a.ig);b.Ow=v.W(a.Ow);b.Yx=a.Yx;b.Zx=a.Zx;
return b};a.update=function(){for(var a=0;a<C.length;a++)for(var c=C[a],d=c.S,g=0;g<d.length;g++)for(var e=c,f=d[g].$,h=0;h<f.length;h++){var l=f[h],p=l.Ja;p&&p.Op&&!l.Sg&&(b(p,p.positions,p.Vx,e.A.D,p.ms,p.Qs),p.Ew=!0)}};a.tB=function(a){a=a.S;for(var b=0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++)if(c[d].Ja)return!0;return!1};a.uB=function(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,f=0;f<e.length;f++){var h=e[f].Ja;if(h&&h.name==b)return!0}return!1};a.KH=function(a){a=a.S;for(var b=
0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++){var e=c[d].Ja;if(e&&"EMITTER"==e.Pw)return!0}return!1};a.yN=function(a){return 0<a.particle_systems.length};a.xN=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};a.QR=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};a.VO=function(a,b,d){var e=a.Ja=c(b.name,b.settings.type);
e.Ba=b.settings.frame_start;e.jb=b.settings.frame_end;e.$x=(e.jb-e.Ba)/p.Cd();e.Sr=b.settings.lifetime;e.hw=e.Sr/p.Cd();e.cyclic=b.settings.b4w_cyclic?1:0;e.bh=b.settings.mass;e.Ro=b.settings.normal_factor;e.Dv=9.81*b.settings.effector_weights.gravity;e.vj=b.settings.b4w_fade_in/p.Cd();e.Ue=b.settings.b4w_fade_out/p.Cd();e.Cy=b.settings.effector_weights.wind;e.Op="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var f,h,l;a.Er?(f=d.wo.size,h=d.wo.Fr,30>h?(h=.5,l=.9):40>h?(h=.1,l=1):50>h?(h=0,l=.8):
(h=0,l=.5)):(f=b.settings.particle_size,l=h=1);e.size=f;e.Mt=h;e.Lt=l;d.Eg&&"BILLBOARD"==b.settings.render_type&&(q.xb(a,"NODES",1),q.xb(a,"PARTICLE_BATCH",1),a.wb=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&H.Kt&&(b=b[0].texture,f=[],y.EN(b.color_ramp,y.ED,f),f=new Uint8Array(f.map(function(a){return v.clamp(255*a,0,255)})),f=y.iF(f,y.ED),q.vh(a,f,"u_color_ramp_tex",b.name),q.xb(a,"USE_COLOR_RAMP",1));d=d.Cg;a=[-1,
0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(d[0]&&"STRAND"==d[0].texture_coords&&d[0].texture&&"BLEND"==d[0].texture.type&&d[0].texture.use_color_ramp){d=d[0].texture.color_ramp.elements;b=Math.min(4*d.length,a.length);for(f=0;f<b;f+=4)h=d[f/4],a[f]=h.position,a[f+1]=h.color[0],a[f+2]=h.color[1],a[f+3]=h.color[2];e.ru=d.length}e.qu.set(a)};a.OQ=function(a,c,d,g){var f=a.Ja,k=g.D;g=d.settings.count;var n=d.settings.frame_start/p.Cd(),u=d.settings.frame_end/p.Cd(),A=d.settings.lifetime/p.Cd(),w=d.settings.lifetime_random,
q=d.settings.emit_from,I=d.settings.factor_random;if(d.settings.use_rotations)var H=d.settings.angular_velocity_mode,m=d.settings.angular_velocity_factor;else H="NONE",m=0;var y=d.settings.b4w_randomize_emission,F=d.settings.b4w_cyclic;f.Yx=d.settings.billboard_tilt;f.Zx=d.settings.billboard_tilt_random;h(d.seed);var C;c=l.KF(c,["a_position","a_tbn"],null);switch(q){case "VERT":var t=c.la[0].a_position;C=c.la[0].a_tbn;d=t.length/3;c=[];for(q=0;q<g;q++){var ga=Math.round((d-1)*e());c.push(ga);c.push(ga);
c.push(ga);c.push(ga)}d=[];for(q=0;q<c.length;q++)d.push(t[3*c[q]]),d.push(t[3*c[q]+1]),d.push(t[3*c[q]+2]);t=new Float32Array(d);d=x.create(c.length);for(q=0;q<c.length;q++)ga=x.Em(C,c[q],E),x.Pi(d,ga,q);C=d;break;case "FACE":t=[];C=[];v.Tv(0,C);d=l.gA(c,g,!1,C);v.Tv(0,C);c=l.gA(c,g,!0,C);C=x.create(4*d.length);for(q=0;q<d.length;q++)t.push(d[q][0],d[q][1],d[q][2]),t.push(d[q][0],d[q][1],d[q][2]),t.push(d[q][0],d[q][1],d[q][2]),t.push(d[q][0],d[q][1],d[q][2]),x.Pi(C,c[q],4*q),x.Pi(C,c[q],4*q+1),
x.Pi(C,c[q],4*q+2),x.Pi(C,c[q],4*q+3);t=new Float32Array(t);break;case "VOLUME":v.K("Particle emission from volume is not supported");break;default:v.K("Wrong emit from option")}C=[t,C];t=C[0];C=C[1];f.positions=new Float32Array(t);f.Vx=new Float32Array(C);f.ms=new Float32Array(t.length);f.Qs=new Float32Array(C.length);c=[];u=(u-n)/g;for(d=0;d<g;d++)q=y?u*d+10*u*(.5-e()):u*d,F||(q+=n),c.push(q),c.push(q),c.push(q),c.push(q);n=new Float32Array(c);f.co=new Float32Array(n);f.dr=new Float32Array(n);if(f.Op){f.ig=
new Float32Array(8*n.length);for(y=0;y<8*n.length;y++)for(F=0;8>F;F++)f.ig[8*y+F]=k[F];b(f,t,C,k,t,C)}k=l.$g("EMITTER_PARTICLES");y=v.pi();y.a_position=t;y.a_tbn=C;k.la[0]=y;a.Bh=l.tt;a=[];for(y=0;y<g;y++)a.push(4*y,4*y+2,4*y+1,4*y,4*y+3,4*y+2);a=new Uint16Array(a);k.za=a;k.xa.a_p_bb_vertex=l.SF(g);k.Wa=t.length/3;a=[];w=A*w;for(y=0;y<g;y++)F=w*e(),a.push(A-F),a.push(A-F),a.push(A-F),a.push(A-F);A=k.xa;w=[];for(y=0;y<g;y++)F=Math.random(),w.push(a[4*y],n[4*y],F),w.push(a[4*y+1],n[4*y+1],F),w.push(a[4*
y+2],n[4*y+2],F),w.push(a[4*y+3],n[4*y+3],F);w=new Float32Array(w);A.a_p_data=w;A=k.xa;w=[];for(a=0;a<g;a++){n=[e()-.5,e()-.5,e()-.5];r.normalize(n,n);w.push(I*n[0]);w.push(I*n[1]);w.push(I*n[2]);switch(H){case "NONE":w.push(0);break;case "SPIN":case "VELOCITY":w.push(m);break;case "RAND":w.push(2*m*(e()-.5));break;default:v.K("Undefined velocity factor")}n=w.slice(-4);for(y=0;12>y;y++)w.push(n[y%4])}g=new Float32Array(w);A.a_p_vels=g;f.Ow=new Float32Array(k.xa.a_p_data);return k};a.iV=function(a,
b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,f=0;f<e.length;f++){var h=e[f].Ja;h&&h.name==b&&!e[f].Sg&&(h.Xw=h.time,h.time=c)}};a.QT=function(a){for(var b=a.Wa,c=a.la[0].a_position,d=[],e=[],f=0;f<b;f++)e.push(c[3*f]),d.push(c[3*f+1]),e.push(c[3*f+2]);d=new Float32Array(d);e=new Float32Array(e);a.xa.a_lf_dist=d;a.xa.a_lf_bb_vertex=e;return a};a.set_size=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,f=0;f<e.length;f++){var h=e[f].Ja;h&&h.name==b&&(h.size=c)}};a.set_normal_factor=
function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,f=0;f<e.length;f++){var h=e[f].Ja;h&&h.name==b&&(h.Ro=c)}};a.mZ=function(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,f=0;f<e.length;f++){var h=e[f].Ja;if(h&&h.name==b)return h.Ro}return 0};a.set_factor=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,f=0;f<e.length;f++){var h=e[f],p=h.Ja;if(p&&p.name==b){p.Yn=c;var k=p.co;if(1==c)var n=k;else if(0==c)for(var n=p.dr,r=0;r<n.length;r+=4)n[r]=1E4,n[r+1]=n[r],
n[r+2]=n[r],n[r+3]=n[r];else for(var v=4/c,n=p.dr,u=0,r=0;r<n.length;r+=4)r>=u?(n[r]=k[r],u+=v):n[r]=1E4,n[r+1]=n[r],n[r+2]=n[r],n[r+3]=n[r];h=h.ra;if(h.Eb.a_p_data){p=p.Ow;for(r=0;r<p.length;r+=3)p[r+1]=n[Math.round(r/3)];l.DJ(h,"a_p_data",3,p)}}}};a.NW=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,f=0;f<e.length;f++){var h=e[f].Ja;if(h&&h.Op)for(var l=0;l<8*h.co.length;l++)h.ig[8*l]=b[0],h.ig[8*l+1]=b[1],h.ig[8*l+2]=b[2],h.ig[8*l+3]=b[3],h.ig[8*l+4]=c[0],h.ig[8*l+5]=c[1],h.ig[8*
l+6]=c[2],h.ig[8*l+7]=c[3]}};a.EW=function(a,b,c){a.xa.a_tbn=x.create(4*c);x.identity(a.xa.a_tbn);if(b.ds){for(var d=[],e=0;e<c;e++)d.push(e,e,e,e);a.xa[b.ds.name]=new Float32Array(d)}};a.DW=function(a){-1==C.indexOf(a)&&C.push(a)};a.cU=function(a){a=C.indexOf(a);-1!=a&&C.splice(a,1)};a.cleanup=function(){C.length=0}};b4w.module.__primitives=function(a,t){function e(a,b,c,e){for(var d=[],f=[],h=[],p=a*b,r=2*c/(a-1),k=2*e/(b-1),v=0;v<a;v++)for(var u=-c+v*r,g=0;g<b;g++)if(f.push(u,-e+g*k,0),h.push(v/(a-1),g/(b-1)),v&&g){var D=v*b+g,B=D-1,y=(v-1)*b+g,t=y-1;d.push(D,B,y);d.push(B,t,y)}a=x.pi();a.a_position=new Float32Array(f);a.a_tbn=l.create(p);p=q.$g("GRID_PLANE");p.la[0]=a;p.xa.a_texcoord=new Float32Array(h);p.za=new Uint32Array(d);p.Wa=f.length/3;return p}function c(a){var b=a.length;b%4&&x.K("Wrong array");for(var c=
[],e=[],f=0;f<b;f+=4){var p=a[f+1],w=a[f+2],n=a[f+3];h(a[f],e);h(p,e);h(w,e);h(n,e);c.push(f,f+1,f+2);c.push(f,f+2,f+3)}a=x.pi();a.a_position=new Float32Array(e);a.a_tbn=l.create(b/4);b=q.$g("FROM_QUADS");b.la[0]=a;b.za=new Uint32Array(c);b.Wa=e.length/3;return b}function b(a,b){var c=3*b;return[a[c],a[c+1],a[c+2]]}function h(a,b){b.push(a[0],a[1],a[2])}var f=t("__config"),q=t("__geometry"),l=t("__tbn"),x=t("__util"),y=f.L;a.SQ=function(){var a=q.$g("LINE"),b=x.pi();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.la[0]=b;a.za=new Uint32Array(1);a.Wa=1;return a};a.nv=function(){var a=e(2,2,1,1);a.name="PLANE";return a};a.dZ=e;a.NQ=function(a,b,c){function d(a,b){return 1==a%2&&(0==b||b==p-1)||1==b%2&&(0==a||a==h-1)?!0:!1}var e=c/=Math.pow(2,a-1),f=c,h=b+1,p=b+1;b=[];c=[];for(var v=0,k=0,F=0,u=-1,g=[],D=0;D<a;D++){for(var B=2*e/(h-1),t=2*f/(p-1),L=[],A=[],G=0,z=0;z<h;z++){for(var I=-e+z*B,S=[],m=0;m<p;m++){var K=-f+m*t;if(I>-k&&I<k&&K>-F&&K<F)S.push(-1),G++;else{for(var U=
null,Q=0;Q<g.length;Q+=3)if(I==g[Q]&&K==g[Q+1]){U=g[Q+2];break}Q=null!==U?U:u+1;d(z,m)?(S.push(-2),G++):(null==U&&(m&&m!=p-1&&z&&z!=h-1?U=B:(U=D==a-1?B:2*B,L.push(I,K,Q)),c.push(I,K,U),v++,u++),S.push(Q));if(z&&m)if(1==z)if(d(z-1,m)){if(1<m){var K=Q-1,U=A[z-1][m+1],R=U-1;b.push(R,K,Q)}else U=A[z-1][m+1],R=U-1;b.push(U,R,Q)}else d(z,m)||(K=Q-1,U=A[z-1][m],b.push(U,K,Q));else if(z==h-1){if(!d(z,m))if(m==p-1)K=Q-1,U=A[z-1][m-1],R=A[z-2][m],b.push(U,K,Q),b.push(R,U,Q);else{var K=Q-1,U=A[z-1][m],R=U-1,
ga=U+1;b.push(R,K,Q);b.push(U,R,Q);b.push(ga,U,Q);2==m&&(ga=A[z-2][m-2],b.push(R,ga,K))}}else 1==m?d(z,m-1)?(K=A[z-1][m],U=A[z-1][m-1],b.push(K,U,Q)):(K=S[m-1],U=A[z-1][m],R=A[z-2][m-1],b.push(U,K,Q),b.push(U,R,K)):m==p-1?d(z,m)||(K=S[m-1],U=A[z-1][m-1],R=A[z-2][m],b.push(U,K,Q),b.push(R,U,Q)):-1!=A[z-1][m]&&-1!=A[z-1][m-1]&&-1!=S[m-1]?(K=S[m-1],U=A[z-1][m],R=A[z-1][m-1],b.push(U,K,Q),b.push(U,R,K),m==p-2&&d(z,m+1)&&(ga=A[z-1][m+1],b.push(ga,U,Q))):m==p-2&&d(z,m+1)&&(U=A[z-1][m],ga=A[z-1][m+1],b.push(ga,
U,Q))}}A.push(S)}g=L;k=e;F=f;e*=2;f*=2}2E4>k&&(a=-(2*k)/(h-1),c.push(-2E4,-2E4,a),c.push(-2E4,2E4,a),c.push(-k,-F,a),c.push(-k,F,a),c.push(2E4,-2E4,a),c.push(2E4,2E4,a),c.push(k,-F,a),c.push(k,F,a),Q=u+1,b.push(Q+1,Q+2,Q+3,Q+1,Q+0,Q+2,Q+2,Q+4,Q+6,Q+2,Q+0,Q+4,Q+1,Q+7,Q+5,Q+1,Q+3,Q+7,Q+7,Q+4,Q+5,Q+6,Q+4,Q+7),v+=8);a=x.pi();a.a_position=new Float32Array(c);a.a_tbn=l.create(v);l.nB(a.a_tbn,[.707,0,0,.707],a.a_tbn);e=q.$g("MULTIGRID_PLANE");e.la[0]=a;e.za=new Uint32Array(b);e.Wa=c.length/3;y.nK&&(q.Px(e,
1,!0),a.a_polyindex=q.$u(e));return e};a.cZ=function(a){var b=a.length;b%3&&x.K("Wrong array");for(var c=[],e=[],f=0;f<b;f+=3){var l=a[f+1],p=a[f+2];h(a[f],e);h(l,e);h(p,e);c.push(f,f+1,f+2)}a=x.pi();a.a_position=new Float32Array(e);b=q.$g("FROM_TRIANGLES");b.la[0]=a;b.za=new Uint32Array(c);b.Wa=e.length/3;return b};a.bZ=c;a.PQ=function(a){a=x.$W(a);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);
b.push(a[4],a[5],a[6],a[7]);a=c(b);a.name="FRUSTUM";return a};a.gd=function(){var a=q.$g("FULLSCREEN_TRI"),b=x.pi();b.a_position=new Float32Array([0,0,1,0,0,1]);a.la[0]=b;a.za=new Uint32Array([0,1,2]);a.Wa=3;return a};a.QQ=function(){var a=q.$g("FULLSCREEN_QUAD"),b=x.pi();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.la[0]=b;a.za=new Uint32Array([0,2,1,1,2,3]);a.Wa=4;return a};a.MQ=function(){var a=q.$g("BILLBOARD"),b=x.pi();b.a_bb_vertex=q.SF(1);a.la[0]=b;a.za=new Uint32Array([0,2,1,0,3,
2]);a.Wa=4;return a};a.fA=function(a,c){var d=q.$g("UV_SPHERE"),e,f,p=[],w=[],n=[];for(f=0;8>=f;f++)for(e=0;16>=e;e++){var y=e/16,k=f/8;w.push(-a*Math.cos(2*y*Math.PI)*Math.sin(k*Math.PI)+c[0],a*Math.cos(k*Math.PI)+c[1],a*Math.sin(2*y*Math.PI)*Math.sin(k*Math.PI)+c[2])}for(f=y=0;8>f;f++)for(e=0;16>e;e++){var k=b(w,17*f+e+1),x=b(w,17*f+e),u=b(w,17*(f+1)+e),g=b(w,17*(f+1)+e+1);Math.abs(k[1])==a+c[1]?(h(k,p),h(u,p),h(g,p),n.push(y,y+1,y+2),y+=3):Math.abs(u[1])==a+c[1]?(h(k,p),h(x,p),h(u,p),n.push(y,
y+1,y+2),y+=3):(h(k,p),h(x,p),h(u,p),h(g,p),n.push(y,y+1,y+2),n.push(y,y+2,y+3),y+=4)}e={};e.a_position=p;w=q.zE(n,w,p);w=q.yE(n,p,w);e.a_tbn=l.Am(w);d.la[0]=e;d.za=n;d.Wa=p.length/3;return d};a.WF=function(a){var b=q.$g("INDEX"),c=x.pi();c.a_index=new Float32Array(3*a);for(var e=new Uint16Array(3*a),f=0;f<3*a;f++)c.a_index[f]=f,e[f]=f;b.la[0]=c;b.za=e;b.Wa=3*a;return b}};b4w.module.__prerender=function(a,t){function e(a,b){return a.Pl-b.Pl}function c(a,b){var c=a.ug;c.is_visible=!1;if(c.hide)return!1;var d=b.H,e=b.type==x.wd?d.mw:y.Mb(d.D,r),f=a.Aa;if(!q.vW(f,c,e))return!1;c.is_visible=!0;if(b.type==x.qh)f=b.debug_view_mode==h.DV_BOUNDINGS?f.rj:!f.rj;else{if(!(c=b.type==x.rh&&0==c.Ki)&&(c=!f.tj&&a.rt)){var d=d.Bm,e=a.rt.Pe,c=a.rt.qf,l=f.Hl,f=e.U;if(p.EV(f,d,e.ab))c=!0;else if(l)var e=c.Sa,l=c.Ta,v=c.Ua,f=c.U,c=p.gQ(f,d,e,l,v);else c=!1}f=c?!1:!0}return f}function b(a){var b=
a.Ja;if(b&&b.Ew){a=a.ra;f.YS(a);var c=a.Eb;f.kt(a.kc,"a_position",b.ms,c.a_position.offset);f.kt(a.kc,"a_tbn",b.Qs,c.a_tbn.offset);f.PC(a)}}var h=t("__debug"),f=t("__geometry"),q=t("__objects"),l=t("__renderer"),x=t("__subscene"),y=t("__tsr"),p=t("__util"),d=t("__vec3"),v=[x.Hb,x.bd,x.Zd,x.ud,x.Xf,x.jf,x.Yd,x.Gg,x.wd,x.Yf,x.rh,x.qh,x.Le,x.ph],r=new Float32Array(3);a.dn=function(a){if(-1<v.indexOf(a.type)){for(var f=!1,h=a.type==x.ud||a.type==x.jf,p=a.Za,q=0;q<p.length;q++){for(var k=p[q],H=k.La,u=
!1,g=0;g<H.length;g++){var D=H[g],B=D.Aa;if(h)for(var t=0;6>t;t++)a.H.Bm=a.pm[t],D.Tz[t]=c(D,a),D.Tz[t]&&(u=f=!0,b(B));else D.$b=c(D,a),D.$b&&(u=f=!0,b(B));a.Na&&(B.yb.Qo=!0);D.$b?(B=y.Mb(a.H.D,r),D.rt?(t=D.rt.Pe,B=d.squaredDistance(t.U,B)+t.ab*t.ab):B=Infinity,D.Pl=B):D.Pl=Infinity}H.sort(e);0<H.length&&(p.Pl=H[0]);k.$b=u}a.Na=!1;switch(a.type){case x.qh:break;default:a.type==x.Hb||a.type==x.Yf||a.type==x.Yd||a.type==x.Zd||a.type==x.ud||f?a.$b=!0:(a.$b&&l.clear(a),a.$b=!1)}}else if(a.Na){p=a.Za;
for(q=0;q<p.length;q++)for(H=p[q].La,g=0;g<H.length;g++)D=H[g],B=D.Aa,B.yb.Qo=!0;a.Na=!1}a.Zr&&x.xV(a)}};b4w.module.__print=function(a){function t(a,b){var c=[];-1<a[0].indexOf("%c")?c.push(a[0].replace("%c","%c"+b+": ")):c.push(b+": "+a[0]);for(var d=1;d<a.length;d++)c.push(a[d]);return c}function e(){f++;var a=t(arguments,"B4W ERROR");console.error.apply(console,a)}function c(a){a in l||(l[a]=a,e([a]))}function b(a,b){c(a+"() is deprecated, use "+b+"() instead.")}var h=!1,f=0,q=0,l={};a.jV=function(a){h=a};a.ld=function(){console.log.apply(console,arguments)};a.log=function(){if(h){var a=t(arguments,
"B4W LOG");console.log.apply(console,a)}};a.aF=t;a.error=e;a.ga=c;a.fd=b;a.RY=function(a,e){switch(1<e.length){case !0:c(a+"() is deprecated, use "+e.slice(0,-1).join("(), ")+"() or "+e[e.length-1]+"() instead.");break;case !1:b(a,e[0])}};a.Yu=function(a,b){void 0===b?c('Config option "'+a+'" is deprecated.'):c('Config option "'+a+'" is deprecated, use "'+b+'" instead.')};a.warn=function(){q++;var a=t(arguments,"B4W WARN");console.warn.apply(console,a)};a.info=function(){var a=t(arguments,"B4W INFO");
console.info.apply(console,a)};a.mQ=function(){f++;var a=t(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};a.nQ=function(){q++;var a=t(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};a.time=function(){h&&console.time.apply(console,arguments)};a.timeEnd=function(){h&&console.timeEnd.apply(console,arguments)};a.group=function(){console.group.apply(console,arguments)};a.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};a.groupEnd=function(){console.groupEnd.apply(console,
arguments)};a.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};a.JR=function(){return q};a.lR=function(){return f};a.clear_errors_warnings=function(){f=q=0}};b4w.module.print=b4w.module.__print;b4w.module.__reformer=function(a,t){function e(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},b("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node RGB Curves",a,
"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",b("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,b("node material",a,"alpha"));"darkness"in
a||(a.darkness=1,b("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,b("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,b("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,b("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,b("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",b("node material",a,"specular_shader"));
"specular_ior"in a||(a.specular_ior=4,b("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,b("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,b("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,b("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,b("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,b("node material",
a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",b("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,b("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,b("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,b("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,b("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=
a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",b("node "+a.type,a,"convert_from")),"convert_to"in a||(a.convert_to="WORLD",b("node "+
a.type,a,"convert_to")),"vector_type"in a||(a.vector_type="POINT",b("node "+a.type,a,"vector_type"))}}function c(a){if(a=a.nla_tracks)for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.strips.length;e++){var g=d.strips[e];"action"in g||(g.action=null,b("strip",g,"action"));"action_frame_start"in g||(g.action_frame_start=0,b("strip",g,"action_frame_start"));"action_frame_end"in g||(g.action_frame_end=g.frame_end-g.frame_start,b("strip",g,"action_frame_end"));"repeat"in g||(g.repeat=1,b("strip",g,"repeat"));
"use_reverse"in g||(g.use_reverse=!1,b("strip",g,"use_reverse"));"scale"in g||(g.scale=1,b("strip",g,"scale"))}}function b(a,b,c){c=c+">>"+a;c in g||(g[c]={tC:[],jI:"undefined",type:a});g[c].tC.push(b.name)}function h(a,b,c){c=c+">>"+a;c in g||(g[c]={tC:[],jI:"deprecated",type:a});g[c].tC.push(b.name)}function f(a){v.warn(a)}function q(a,b){b||(b=a.name+"_COPY");var c=a.materials,d=a.submeshes;a.materials=null;a.submeshes=null;var e=E.W(a);a.materials=c;a.submeshes=d;e.name=b;e.materials=a.materials.slice(0);
e.submeshes=[];for(c=0;c<d.length;c++){var g=E.Oq(d[c]);e.submeshes.push(g)}return e}function l(a,b,c){if(1<c){for(var d=a.length/c,e=b.length/c,g=new Float32Array(a.length+b.length),f=0,h=0;h<c;h++)g.set(a.subarray(d*h,d*(h+1)),f),f+=d,g.set(b.subarray(e*h,e*(h+1)),f),f+=e;return g}return E.NF(a,b)}var x=t("__boundings"),y=t("__config"),p=t("__curve"),d=t("__mat4"),v=t("__print"),r=t("__quat"),H=t("__tbn"),E=t("__util"),w=t("__vec3"),n=t("__mat3"),C=t("__logic_nodes"),k=t("__animation"),F=y.L,u=
[5,4],g={},D=n.create(),B=H.create(),N=r.create();a.KE=function(a){return-1!=E.dK(a,u)};a.UN=function(a){g={};var d=a.worlds;if(0==d.length){v.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var l={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",
use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};d.push(l)}for(var p=0;p<d.length;p++){l=d[p];"use_sky_blend"in l||(b("world",l,"use_sky_blend"),l.use_sky_blend=!1);"use_sky_paper"in l||(b("world",l,"use_sky_paper"),l.use_sky_paper=!1);"use_sky_real"in l||(b("world",l,"use_sky_real"),l.use_sky_real=!1);"b4w_sky_settings"in l&&"rayleigh_brightness"in l.b4w_sky_settings||(b("world",l,"rayleigh_brightness"),l.b4w_sky_settings=
{render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in l||(b("world",l,"fog_settings"),l.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in l&&(l.fog_settings.use_custom_color=
!0,l.fog_settings.color=l.b4w_fog_color),"b4w_fog_density"in l&&0<l.b4w_fog_density&&(l.fog_settings.depth=1/l.b4w_fog_density));"render_sky"in l.b4w_sky_settings||(b("world",l,"render_sky"),l.b4w_sky_settings.render_sky=!1);for(var k=l.texture_slots,n=0;n<k.length;n++){var m=k[n];"blend_type"in m||(m.blend_type="MIX",b("world_texture_slot",m,"blend_type"));"use_map_blend"in m||(m.use_map_blend=!1,b("world_texture_slot",m,"use_map_blend"));"use_map_horizon"in m||(m.use_map_horizon=!0,b("world_texture_slot",
m,"use_map_horizon"));"use_map_zenith_up"in m||(m.use_map_zenith_up=!1,b("world_texture_slot",m,"use_map_zenith_up"));"use_rgb_to_intensity"in m||(m.use_rgb_to_intensity=!1,b("world_texture_slot",m,"use_rgb_to_intensity"));"invert"in m||(m.invert=!1,b("world_texture_slot",m,"invert"));"color"in m||(m.color=[1,0,1],b("world_texture_slot",m,"color"));"blend_factor"in m||(m.blend_factor=0,b("world_texture_slot",m,"blend_factor"));"horizon_factor"in m||(m.horizon_factor=1,b("world_texture_slot",m,"horizon_factor"));
"zenith_up_factor"in m||(m.zenith_up_factor=0,b("world_texture_slot",m,"zenith_up_factor"));"zenith_down_factor"in m||(m.zenith_down_factor=0,b("world_texture_slot",m,"zenith_down_factor"));"default_value"in m||(m.default_value=1,b("world_texture_slot",m,"default_value"))}"b4w_use_default_animation"in l||(b("world",l,"b4w_use_default_animation"),l.b4w_use_default_animation=!1);"b4w_anim_behavior"in l||(b("world",l,"b4w_anim_behavior"),l.b4w_anim_behavior="CYCLIC")}n=a.scenes;for(p=0;p<n.length;p++)k=
n[p],m=k.world,"timeline_markers"in k||(k.timeline_markers=null,b("scene",k,"timeline_markers")),"boolean"==typeof k.b4w_enable_physics&&(k.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in k||(k.b4w_reflection_quality="MEDIUM",b("scene",k,"b4w_reflection_quality")),"b4w_use_nla"in k||(k.b4w_use_nla=!1,b("scene",k,"b4w_use_nla")),"fps"in k||(k.fps=24,b("scene",k,"fps")),"b4w_nla_cyclic"in k||(k.b4w_nla_cyclic=!1,b("scene",k,"b4w_nla_cyclic")),"b4w_logic_nodes"in k||(k.b4w_logic_nodes=[],b("scene",
k,"b4w_logic_nodes")),"b4w_detect_collisions"in k&&(h("scene",k,"b4w_detect_collisions"),delete k.b4w_detect_collisions),"audio_doppler_speed"in k||(k.audio_doppler_speed=343.3),"audio_doppler_factor"in k||(k.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in k||(k.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},b("scene",k,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in k||(k.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in
k||(k.b4w_enable_bloom=!1,b("scene",k,"b4w_enable_bloom")),"b4w_enable_motion_blur"in k||(k.b4w_enable_motion_blur=!1,b("scene",k,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in k||(k.b4w_enable_color_correction=!1,b("scene",k,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in k||(k.b4w_antialiasing_quality="MEDIUM",b("scene",k,"b4w_antialiasing_quality")),"b4w_tags"in k||(k.b4w_tags={title:"",description:""},b("scene",k,"b4w_tags")),"b4w_lod_smooth_type"in k||(k.b4w_lod_smooth_type=
"OFF",b("scene",k,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in k||(k.b4w_lod_hyst_interval=0,b("scene",k,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in k||(k.b4w_enable_object_selection="AUTO",b("scene",k,"b4w_enable_object_selection")),"b4w_enable_outlining"in k||(k.b4w_enable_outlining="AUTO",b("scene",k,"b4w_enable_outlining")),"b4w_enable_glow_materials"in k||(k.b4w_enable_glow_materials="AUTO",b("scene",k,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in k||(k.b4w_enable_anchors_visibility=
"AUTO",b("scene",k,"b4w_enable_anchors_visibility")),"b4w_outline_color"in k||(k.b4w_outline_color=[1,1,1],b("scene",k,"b4w_outline_color")),"b4w_outline_factor"in k||(k.b4w_outline_factor="b4w_glow_factor"in k?k.b4w_glow_factor:1,b("scene",k,"b4w_outline_factor")),"b4w_shadow_settings"in k||(b("scene",k,"b4w_shadow_settings"),d=m.b4w_shadow_settings,k.b4w_shadow_settings=d?d:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,
first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),d=k.b4w_shadow_settings,"csm_resolution"in d||(b("scene",k,"b4w_shadow_settings.csm_resolution"),d.csm_resolution=2048),"blur_samples"in d||(b("scene",k,"b4w_shadow_settings.blur_samples"),d.blur_samples="16x"),"soft_shadows"in d||(b("scene",k,"b4w_shadow_settings.soft_shadows"),d.soft_shadows=!0),"self_shadow_polygon_offset"in d||(b("scene",k,"b4w_shadow_settings.self_shadow_polygon_offset"),
d.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in d||(b("scene",k,"b4w_shadow_settings.self_shadow_normal_offset"),d.self_shadow_normal_offset=.01),"b4w_enable_csm"in d||(b("scene",k,"b4w_shadow_settings.b4w_enable_csm"),d.b4w_enable_csm=!1),"csm_num"in d||(b("scene",k,"b4w_shadow_settings.csm_num"),d.csm_num=1),"csm_first_cascade_border"in d||(b("scene",k,"b4w_shadow_settings.csm_first_cascade_border"),d.csm_first_cascade_border=10),"first_cascade_blur_radius"in d||(b("scene",k,"b4w_shadow_settings.first_cascade_blur_radius"),
d.first_cascade_blur_radius=3),"csm_last_cascade_border"in d||(b("scene",k,"b4w_shadow_settings.csm_last_cascade_border"),d.csm_last_cascade_border=100),"last_cascade_blur_radius"in d||(b("scene",k,"b4w_shadow_settings.last_cascade_blur_radius"),d.last_cascade_blur_radius=1.5),"fade_last_cascade"in d||(b("scene",k,"b4w_shadow_settings.fade_last_cascade"),d.fade_last_cascade=!0),"blend_between_cascades"in d||(b("scene",k,"b4w_shadow_settings.blend_between_cascades"),d.blend_between_cascades=!0),"b4w_ssao_settings"in
k||(b("scene",k,"b4w_ssao_settings"),d=m.b4w_ssao_settings,k.b4w_ssao_settings=d?d:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),d=k.b4w_ssao_settings,"dist_factor"in d||(b("scene",k,"b4w_ssao_settings.dist_factor"),d.dist_factor=0),"samples"in d||(b("scene",k,"b4w_ssao_settings.samples"),d.samples=16),"hemisphere"in d||(b("scene",k,"b4w_ssao_settings.hemisphere"),d.hemisphere=!1),"blur_depth"in d||(b("scene",k,"b4w_ssao_settings.blur_depth"),d.blur_depth=!1),"blur_discard_value"in
d||(b("scene",k,"b4w_ssao_settings.blur_discard_value"),d.blur_discard_value=1),"b4w_bloom_settings"in k||(b("scene",k,"b4w_bloom_settings"),d=m.b4w_bloom_settings,k.b4w_bloom_settings=d?d:{key:.2,blur:4,edge_lum:1}),"key"in k.b4w_bloom_settings||(b("scene",k,"b4w_bloom_settings.key"),k.b4w_bloom_settings.key=.2),"blur"in k.b4w_bloom_settings||(b("scene",k,"b4w_bloom_settings.blur"),k.b4w_bloom_settings.blur=4),"edge_lum"in k.b4w_bloom_settings||(b("scene",k,"b4w_bloom_settings.edge_lum"),k.b4w_bloom_settings.edge_lum=
1),"adaptive"in k.b4w_bloom_settings||(b("scene",k,"b4w_bloom_settings.adaptive"),k.b4w_bloom_settings.adaptive=!0),"average_luminance"in k.b4w_bloom_settings||(b("scene",k,"b4w_bloom_settings.average_luminance"),k.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in k||(b("scene",k,"b4w_motion_blur_settings"),d=m.b4w_motion_blur_settings,k.b4w_motion_blur_settings=d?d:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in k.b4w_motion_blur_settings||(b("scene",
k,"b4w_motion_blur_settings.motion_blur_factor"),k.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in k.b4w_motion_blur_settings||(b("scene",k,"b4w_motion_blur_settings.motion_blur_decay_threshold"),k.b4w_motion_blur_settings.motion_blur_decay_threshold=.01),"b4w_color_correction_settings"in k||(b("scene",k,"b4w_color_correction_settings"),d=m.b4w_color_correction_settings,k.b4w_color_correction_settings=d?d:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in
k||(b("scene",k,"b4w_god_rays_settings"),d=m.b4w_god_rays_settings,k.b4w_god_rays_settings=d?d:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in k.b4w_god_rays_settings||(b("scene",k,"b4w_god_rays_settings.steps_per_pass"),k.b4w_god_rays_settings.steps_per_pass=10),"b4w_glow_settings"in k||(b("scene",k,"b4w_glow_settings"),k.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},d=k.b4w_glow_settings,
"b4w_render_glow_over_blend"in m&&(d.render_glow_over_blend=m.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in m&&(d.small_glow_mask_coeff=m.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in m&&(d.large_glow_mask_coeff=m.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in m&&(d.small_glow_mask_width=m.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in m&&(d.large_glow_mask_width=m.b4w_large_glow_mask_width)),m=k.b4w_render_shadows,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(k.b4w_render_shadows=
m?"ON":"OFF"),m=k.b4w_render_reflections,"OFF"!=m&&"ON"!=m&&(k.b4w_render_reflections=m?"ON":"OFF"),m=k.b4w_render_refractions,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(k.b4w_render_refractions=m?"ON":"OFF"),"b4w_render_dynamic_grass"in k||(b("scene",k,"b4w_render_dynamic_grass"),k.b4w_render_dynamic_grass="AUTO"),k.b4w_nla_script&&h("scene",k,"b4w_nla_script"),"audio_distance_model"in k||(b("scene",k,"audio_distance_model"),k.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in k||(b("scene",k,"b4w_custom_prop"),
k.b4w_custom_prop=null);k=a.meshes;for(p=0;p<k.length;p++){m=k[p];m.b4w_boundings||(b("mesh",m,"b4w_boundings"),m.b4w_boundings={},d=m.b4w_boundings,d.bb=m.b4w_bounding_box?m.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},d.bb_src=m.b4w_bounding_box_source?m.b4w_bounding_box_source:m.b4w_bounding_box,d.bs_cen=m.b4w_bounding_sphere_center?m.b4w_bounding_sphere_center:[0,0,0],d.bc_cen=m.b4w_bounding_cylinder_center?m.b4w_bounding_cylinder_center:[0,0,0],d.be_cen=m.b4w_bounding_ellipsoid_center?
m.b4w_bounding_ellipsoid_center:[0,0,0],m.b4w_bounding_ellipsoid_axes?d.be_ax=m.b4w_bounding_ellipsoid_axes:(n=d.bb,d.be_ax=[(n.max_x-n.min_x)/2,(n.max_y-n.min_y)/2,(n.max_z-n.min_z)/2]),m.b4w_rotated_bounding_box?d.rbb=m.b4w_rotated_bounding_box:(n=d.bb,d.rbb={rbb_c:[(n.max_x+n.min_x)/2,(n.max_y+n.min_y)/2,(n.max_z+n.min_z)/2],rbb_s:[1,1,1]}),d.caxis_x=m.b4w_cov_axis_x?m.b4w_cov_axis_x:[1,0,0],d.caxis_y=m.b4w_cov_axis_y?m.b4w_cov_axis_y:[0,1,0],d.caxis_z=m.b4w_cov_axis_z?m.b4w_cov_axis_z:[0,0,1]);
"is_boundings_overridden"in m||(b("mesh",m,"is_boundings_overridden"),m.is_boundings_overridden=!1);"b4w_shape_keys"in m||(m.b4w_shape_keys=[],b("mesh",m,"b4w_shape_keys"));d=!0;for(l=0;l<m.submeshes.length;l++){var r=m.submeshes[l];"boundings"in r||(d=!1,r.boundings={be_ax:m.b4w_bounding_ellipsoid_axes,be_cen:m.b4w_bounding_ellipsoid_center,bb:{max_x:m.b4w_bounding_box.max_x,max_y:m.b4w_bounding_box.max_y,max_z:m.b4w_bounding_box.max_z,min_x:m.b4w_bounding_box.min_x,min_y:m.b4w_bounding_box.min_y,
min_z:m.b4w_bounding_box.min_z}});"uv_layers"in r||(b("submesh",m,"uv_layers"),r.uv_layers=m.uv_textures);"be_ax"in r.boundings||(r.boundings.be_ax=m.b4w_bounding_ellipsoid_axes);"be_cen"in r.boundings||(r.boundings.be_cen=m.b4w_bounding_ellipsoid_center);"bb"in r.boundings||(r.boundings.bb=m.b4w_bounding_box);"rbb"in r.boundings||(n=m.b4w_bounding_box,r.boundings.rbb={rbb_c:[(n.max_x+n.min_x)/2,(n.max_y+n.min_y)/2,(n.max_z+n.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in r.boundings||(r.boundings.caxis_x=
[1,0,0]);"caxis_y"in r.boundings||(r.boundings.caxis_y=[0,1,0]);"caxis_z"in r.boundings||(r.boundings.caxis_z=[0,0,1])}d||b("mesh",m,"submesh_bd");n=m;d=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];l=null;for(r=0;r<d.length;r++)n[d[r]]&&(l?(n[d[r]]=!1,v.warn('WARNING property "'+d[r]+'" of object "'+n.name+'" has been set to "false". Foreground property "'+l+'" already exists.')):l=d[r]);for(n=0;n<m.b4w_vertex_anim.length;n++)d=
m.b4w_vertex_anim[n],"allow_nla"in d||(b('mesh["b4w_vertex_anim"]',m,"allow_nla"),d.allow_nla=!0);"active_uv_name"in m||(b("mesh",m,"active_uv_name"),m.active_uv_name="")}n=a.cameras;for(p=0;p<n.length;p++)k=n[p],k.type||(k.type="PERSP",b("camera",k,"type")),"b4w_eye_target_dist"in k&&(delete k.b4w_eye_target_dist,h("camera",k,"b4w_eye_target_dist")),"b4w_hover_zero_level"in k||(k.b4w_hover_zero_level=0,b("camera",k,"b4w_hover_zero_level")),"b4w_trans_velocity"in k||(k.b4w_trans_velocity=1,b("camera",
k,"b4w_trans_velocity")),"b4w_rot_velocity"in k||(k.b4w_rot_velocity=1,b("camera",k,"b4w_rot_velocity")),"b4w_zoom_velocity"in k||(k.b4w_zoom_velocity=.1,b("camera",k,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in k||(k.b4w_use_target_distance_limits=k.b4w_use_distance_limits||!1,b("camera",k,"b4w_use_target_distance_limits")),"b4w_use_zooming"in k||(k.b4w_use_zooming=k.b4w_use_distance_limits||!1,b("camera",k,"b4w_use_zooming")),"b4w_distance_min"in k||(k.b4w_distance_min=1,b("camera",
k,"b4w_distance_min")),"b4w_distance_max"in k||(k.b4w_distance_max=100,b("camera",k,"b4w_distance_max")),"b4w_horizontal_translation_min"in k||(k.b4w_horizontal_translation_min=-100,b("camera",k,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in k||(k.b4w_horizontal_translation_max=100,b("camera",k,"b4w_horizontal_translation_max")),"b4w_vertical_translation_min"in k||(k.b4w_vertical_translation_min=-100,b("camera",k,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in
k||(k.b4w_vertical_translation_max=100,b("camera",k,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in k||(k.b4w_use_horizontal_clamping=!1,b("camera",k,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in k||(k.b4w_rotation_left_limit=-Math.PI,b("camera",k,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in k||(k.b4w_rotation_right_limit=Math.PI,b("camera",k,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in k||(k.b4w_horizontal_clamping_type="LOCAL",b("camera",
k,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in k||(k.b4w_use_vertical_clamping=!1,b("camera",k,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in k||(k.b4w_rotation_down_limit=-Math.PI/2,b("camera",k,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in k||(k.b4w_rotation_up_limit=Math.PI/2,b("camera",k,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in k||(k.b4w_vertical_clamping_type="LOCAL",b("camera",k,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in k||(k.b4w_hover_angle_min=
Math.PI/6,b("camera",k,"b4w_hover_angle_min")),"b4w_hover_angle_max"in k||(k.b4w_hover_angle_max=Math.PI/6,b("camera",k,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in k||(k.b4w_enable_hover_hor_rotation=!0,b("camera",k,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in k||(k.b4w_use_panning=!0,b("camera",k,"b4w_use_panning")),"b4w_use_pivot_limits"in k||(k.b4w_use_pivot_limits=!1,k.b4w_pivot_z_min=0,k.b4w_pivot_z_max=10,b("camera",k,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in k||(k.b4w_dof_bokeh=
!1,b("camera",k,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in k||(k.b4w_dof_bokeh_intensity=.3,b("camera",k,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in k||(k.b4w_dof_foreground_blur=!1,b("camera",k,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in k||(k.b4w_dof_front_start=0,b("camera",k,"b4w_dof_front_start")),"b4w_dof_front_end"in k||(k.b4w_dof_front_end=k.b4w_dof_front,b("camera",k,"b4w_dof_front_end")),"b4w_dof_rear_start"in k||(k.b4w_dof_rear_start=0,b("camera",k,"b4w_dof_rear_start")),
"b4w_dof_rear_end"in k||(k.b4w_dof_rear_end=k.b4w_dof_rear,b("camera",k,"b4w_dof_rear_end")),"sensor_fit"in k||(k.sensor_fit="VERTICAL",b("camera",k,"sensor_fit"));n=a.lamps;for(p=0;p<n.length;p++)if(k=n[p],"b4w_generate_shadows"in k||(k.b4w_generate_shadows=!1,b("lamp",k,"b4w_generate_shadows")),"b4w_dynamic_intensity"in k||(k.b4w_dynamic_intensity=!1,b("lamp",k,"b4w_dynamic_intensity")),"use_diffuse"in k||(k.use_diffuse=!0,b("lamp",k,"use_diffuse")),"use_specular"in k||(k.use_specular=!0,b("lamp",
k,"use_specular")),"clip_start"in k||(k.clip_start=.1,b("lamp",k,"clip_start")),"clip_end"in k||(k.clip_end=30,b("lamp",k,"clip_end")),"POINT"==k.type||"SPOT"==k.type)"use_sphere"in k||(k.use_sphere=!1,b("lamp",k,"use_sphere")),F.pH&&(k.type="SUN");n=a.speakers;for(p=0;p<n.length;p++)k=n[p],"b4w_behavior"in k||(k.b4w_behavior=k.b4w_background_music?"BACKGROUND_SOUND":"POSITIONAL"),"b4w_auto_play"in k||(k.b4w_auto_play=!1,b("speaker",k,"b4w_auto_play")),"b4w_enable_doppler"in k||(k.b4w_enable_doppler=
!1,b("speaker",k,"b4w_enable_doppler")),"b4w_delay"in k||(k.b4w_delay=0),"b4w_delay_random"in k||(k.b4w_delay_random=0),"b4w_volume_random"in k||(k.b4w_volume_random=0),"b4w_pitch_random"in k||(k.b4w_pitch_random=0),"b4w_fade_in"in k||(k.b4w_fade_in=0),"b4w_fade_out"in k||(k.b4w_fade_out=0),"b4w_loop"in k||(k.b4w_loop=!1),"b4w_loop_start"in k||(k.b4w_loop_start=0,b("speaker",k,"b4w_loop_start")),"b4w_loop_end"in k||(k.b4w_loop_end=0,b("speaker",k,"b4w_loop_end")),k.animation_data&&c(k.animation_data);
n=a.textures;for(p=0;p<n.length;p++)k=n[p],"b4w_anisotropic_filtering"in k||(k.b4w_anisotropic_filtering="OFF",b("texture",k,"b4w_anisotropic_filtering")),"b4w_water_foam"in k||(k.b4w_water_foam=!1,b("texture",k,"b4w_water_foam")),"b4w_foam_uv_freq"in k||(k.b4w_foam_uv_freq=[1,1],b("texture",k,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in k||(k.b4w_foam_uv_magnitude=[1,1],b("texture",k,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in k||(k.b4w_parallax_steps=5,b("material",k,"b4w_parallax_steps")),
"b4w_parallax_lod_dist"in k||(k.b4w_parallax_lod_dist=10,b("material",k,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in k||(k.b4w_shore_dist_map=!1,b("texture",k,"b4w_shore_dist_map")),"b4w_shore_boundings"in k||(k.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],b("texture",k,"b4w_shore_boundings")),"b4w_max_shore_dist"in k||(k.b4w_max_shore_dist=100,b("texture",k,"b4w_max_shore_dist")),"b4w_disable_compression"in k||(k.b4w_disable_compression=!1,b("texture",k,"b4w_disable_compression")),"b4w_source_type"in
k||(k.b4w_source_type="",b("texture",k,"b4w_source_type")),"b4w_source_id"in k||(k.b4w_source_id="",b("texture",k,"b4w_source_id")),"b4w_source_size"in k||(k.b4w_source_size=1024,b("texture",k,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in k||(k.b4w_enable_canvas_mipmapping=!0,b("texture",k,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in k||(k.b4w_nla_video=!1,b("texture",k,"b4w_nla_video"));n=a.images;for(p=0;p<n.length;p++)k=n[p],"colorspace_settings_name"in k||(k.colorspace_settings_name=
"sRGB",b("image",k,"colorspace_settings_name"));d=a.materials;for(p=0;p<d.length;p++){l=d[p];"ALPHA_ANTIALIASING"==l.game_settings.alpha_blend&&(F.qH?l.game_settings.alpha_blend="CLIP":2>F.ec&&(v.warn('Material "'+l.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),l.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in l||(l.use_tangent_shading=!1,b("material",l,"use_tangent_shading"));"b4w_node_mat_type"in l&&h("material",l,"b4w_node_mat_type");
"b4w_skydome"in l&&h("material",l,"b4w_skydome");"b4w_procedural_skydome"in l&&h("material",l,"b4w_procedural_skydome");"b4w_lens_flares"in l||(l.b4w_lens_flares=!1,b("material",l,"b4w_lens_flares"));"LENS_FLARES"===l.name&&(l.b4w_lens_flares||v.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),l.b4w_lens_flares=!0);l.b4w_water&&("b4w_water_shore_smoothing"in l||(l.b4w_water_shore_smoothing=!1,b("material",l,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in
l||(l.b4w_water_dynamic=!1,b("material",l,"b4w_water_dynamic")),"b4w_waves_height"in l||(l.b4w_waves_height=1,b("material",l,"b4w_waves_height")),"b4w_waves_length"in l||(l.b4w_waves_length=1,b("material",l,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in l||(l.b4w_water_dst_noise_scale0=.05,b("material",l,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in l||(l.b4w_water_dst_noise_scale1=.03,b("material",l,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in l||(l.b4w_water_dst_noise_freq0=
1.3,b("material",l,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in l||(l.b4w_water_dst_noise_freq1=1,b("material",l,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in l||(l.b4w_water_dir_min_shore_fac=.4,b("material",l,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in l||(l.b4w_water_dir_freq=.5,b("material",l,"b4w_water_dir_freq")),"b4w_water_dir_noise_scale"in l||(l.b4w_water_dir_noise_scale=.05,b("material",l,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in
l||(l.b4w_water_dir_noise_freq=.07,b("material",l,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in l||(l.b4w_water_dir_min_noise_fac=.5,b("material",l,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in l||(l.b4w_water_dst_min_fac=.2,b("material",l,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in l||(l.b4w_water_waves_hor_fac=5,b("material",l,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in l||(l.b4w_water_absorb_factor=6,b("material",l,"b4w_water_absorb_factor")),"b4w_water_fog_color"in
l||(l.b4w_water_fog_color=[.5,.7,.7],b("material",l,"b4w_water_fog_color")),"b4w_foam_factor"in l||(l.b4w_foam_factor=5,b("material",l,"b4w_foam_factor")),"b4w_generated_mesh"in l||(l.b4w_generated_mesh=!1,b("material",l,"b4w_generated_mesh")),"b4w_water_num_cascads"in l||(l.b4w_water_num_cascads=5,b("material",l,"b4w_water_num_cascads")),"b4w_water_subdivs"in l||(l.b4w_water_subdivs=64,b("material",l,"b4w_water_subdivs")),"b4w_water_detailed_dist"in l||(l.b4w_water_detailed_dist=1E3,b("material",
l,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in l||(l.b4w_water_enable_caust=!1,b("material",l,"b4w_water_enable_caust")),"b4w_water_caust_scale"in l||(l.b4w_water_caust_scale=.25,b("material",l,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in l||(l.b4w_water_caust_brightness=.5,b("material",l,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in l||(l.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in l||(l.b4w_dynamic_grass_color="");"diffuse_intensity"in l||(l.diffuse_intensity=
1,b("material",l,"diffuse_intensity"));"b4w_use_ghost"in l||(l.b4w_use_ghost=!1);"b4w_collision_margin"in l||(l.b4w_collision_margin=.04,b("material",l,"b4w_collision_margin"));"b4w_collision_group"in l||(l.b4w_collision_group=128,b("material",l,"b4w_collision_group"));"b4w_collision_mask"in l||(l.b4w_collision_mask=127,b("material",l,"b4w_collision_mask"));"b4w_do_not_render"in l||(l.b4w_do_not_render=!1,b("material",l,"b4w_do_not_render"));"HALO"!=l.type||"b4w_halo_sky_stars"in l||(l.b4w_halo_sky_stars=
!1,b("material",l,"b4w_halo_sky_stars"));"HALO"!=l.type||"b4w_halo_stars_blend_height"in l||(l.b4w_halo_stars_blend_height=10,b("material",l,"b4w_halo_stars_blend_height"));"HALO"!=l.type||"b4w_halo_stars_min_height"in l||(l.b4w_halo_stars_min_height=0,b("material",l,"b4w_halo_stars_min_height"));"specular_shader"in l||(l.specular_shader="COOKTORR",b("material",l,"specular_shader"));"diffuse_shader"in l||(l.diffuse_shader="LAMBERT",b("material",l,"diffuse_shader"));"roughness"in l||(l.roughness=.5,
b("material",l,"roughness"));"diffuse_fresnel"in l||(l.diffuse_fresnel=.1,b("material",l,"diffuse_fresnel"));"diffuse_fresnel_factor"in l||(l.diffuse_fresnel_factor=.5,b("material",l,"diffuse_fresnel_factor"));"specular_slope"in l||(l.specular_slope=.2,b("material",l,"specular_slope"));"specular_toon_size"in l||(l.specular_toon_size=.5,b("material",l,"specular_toon_size"));"specular_toon_smooth"in l||(l.specular_toon_smooth=.1,b("material",l,"specular_toon_smooth"));"specular_alpha"in l||(l.specular_alpha=
1,b("material",l,"specular_alpha"));"b4w_wettable"in l||(l.b4w_wettable=!1,b("material",l,"b4w_wettable"));"b4w_refractive"in l||(l.b4w_refractive=!1,b("material",l,"b4w_refractive"));"b4w_refr_bump"in l||(l.b4w_refr_bump=0,b("material",l,"b4w_refr_bump"));"b4w_shallow_water_col"in l||(l.b4w_shallow_water_col=[0,.8,.3],b("material",l,"b4w_shallow_water_col"));"b4w_shore_water_col"in l||(l.b4w_shore_water_col=[0,.9,.2],b("material",l,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in l||(l.b4w_shallow_water_col_fac=
1,b("material",l,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in l||(l.b4w_shore_water_col_fac=.5,b("material",l,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in l||(l.b4w_water_sss_strength=5.9,b("material",l,"b4w_water_sss_strength"));"b4w_water_sss_width"in l||(l.b4w_water_sss_width=.45,b("material",l,"b4w_water_sss_width"));"b4w_render_above_all"in l||(l.b4w_render_above_all=!1,b("material",l,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in l||(l.b4w_water_norm_uv_velocity=
.05,b("material",l,"b4w_water_norm_uv_velocity"));"specular_ior"in l||(l.specular_ior=1,b("material",l,"specular_ior"));"darkness"in l||(l.darkness=0,b("material",l,"darkness"));"diffuse_toon_size"in l||(l.diffuse_toon_size=0,b("material",l,"diffuse_toon_size"));"diffuse_toon_smooth"in l||(l.diffuse_toon_smooth=0,b("material",l,"diffuse_toon_smooth"));"pass_index"in l||(l.pass_index=0,b("material",l,"pass_index"));k=l.texture_slots;for(n=0;n<k.length;n++)m=k[n],"blend_type"in m||(m.blend_type="MIX",
b("texture_slot",m,"blend_type"));if(l.node_tree){k=l.node_tree.nodes;for(n=0;n<k.length;n++)e(k[n]);l.node_tree.animation_data&&c(l.node_tree.animation_data)}}m=a.node_groups;for(p=0;p<m.length;p++)for(k=m[p].node_tree.nodes,n=0;n<k.length;n++)e(k[n]);k=a.objects;for(p=0;p<k.length;p++){m=k[p];switch(m.type){case "MESH":"b4w_dynamic_geometry"in m||(m.b4w_dynamic_geometry=!1);"b4w_reflexible"in m||(m.b4w_reflexible=!1);"b4w_reflexible_only"in m||(m.b4w_reflexible_only=!1);"b4w_reflective"in m||(m.b4w_reflective=
!1);"b4w_reflection_type"in m||(m.b4w_reflection_type="PLANE",b("object",m,"b4w_reflection_type"));"b4w_wind_bending"in m||(m.b4w_wind_bending=!1,b("object",m,"b4w_wind_bending"));"b4w_wind_bending_angle"in m||(m.b4w_wind_bending_angle=10,m.b4w_wind_bending_freq=.25,b("object",m,"wind bending params"));"b4w_detail_bending_amp"in m||(m.b4w_detail_bending_amp=.1,m.b4w_branch_bending_amp=.3,b("object",m,"detail bending params"));"b4w_detail_bending_freq"in m||(m.b4w_detail_bending_freq=1,b("object",
m,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in m||(m.b4w_main_bend_stiffness_col="",b("object",m,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in m||(m.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},b("object",m,"b4w_detail_bend_colors"));"b4w_caustics"in m||(m.b4w_caustics=!1);"vertex_groups"in m&&m.vertex_groups.length&&m.data&&0==m.data.vertex_groups.length&&(m.data.vertex_groups=m.vertex_groups,delete m.vertex_groups,b("object",
m,"vertex_groups"));"b4w_vertex_anim"in m&&m.b4w_vertex_anim.length&&m.data&&0==m.data.b4w_vertex_anim.length&&(m.data.b4w_vertex_anim=m.b4w_vertex_anim,delete m.b4w_vertex_anim,b("object",m,"b4w_vertex_anim"));"b4w_do_not_render"in m||(m.b4w_do_not_render=!1);"b4w_hidden_on_load"in m||(m.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in m||(m.b4w_hide_chldr_on_load=!1);"use_ghost"in m.game||(m.game.use_ghost=!1);"use_sleep"in m.game||(m.game.use_sleep=!1);"velocity_min"in m.game||(m.game.velocity_min=
0);"velocity_max"in m.game||(m.game.velocity_max=0);"collision_group"in m.game||(m.game.collision_group=1);"collision_mask"in m.game||(m.game.collision_mask=255);n=m;d=n.game;l=d.collision_bounds_type;d.use_collision_bounds&&"BOX"!=l&&"CYLINDER"!=l&&"CONE"!=l&&"SPHERE"!=l&&"CAPSULE"!=l&&"EMPTY"!=l&&(v.error("Wrong collision bounds type "+l+". Disable physics for object "+n.name),n.b4w_collision=!1,n.b4w_floating=!1,n.b4w_vehicle=!1,n.b4w_character=!1);"b4w_vehicle_settings"in m?m.b4w_vehicle_settings&&
("steering_ratio"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.steering_ratio=10),"steering_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.steering_max=1),"inverse_control"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.inverse_control=!1),"force_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.force_max=1500),"brake_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.brake_max=100),"speed_ratio"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in
m.b4w_vehicle_settings||(m.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_stiffness=20),"suspension_damping"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in m.b4w_vehicle_settings||
(m.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.floating_factor=3),"floating_factor"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in
m.b4w_vehicle_settings||(m.b4w_vehicle_settings.water_rot_damp=.9)):(m.b4w_vehicle_settings=null,b("object",m,"b4w_vehicle_settings"));"b4w_floating_settings"in m?m.b4w_floating_settings&&("floating_factor"in m.b4w_floating_settings||(m.b4w_floating_settings.floating_factor=3),"water_lin_damp"in m.b4w_floating_settings||(m.b4w_floating_settings.water_lin_damp=.8),"water_rot_damp"in m.b4w_floating_settings||(m.b4w_floating_settings.water_rot_damp=.8)):(m.b4w_floating_settings=null,b("object",m,"b4w_floating_settings"));
"b4w_character_settings"in m?m.b4w_character_settings&&("walk_speed"in m.b4w_character_settings||(m.b4w_character_settings.walk_speed=4),"run_speed"in m.b4w_character_settings||(m.b4w_character_settings.run_speed=8),"step_height"in m.b4w_character_settings||(m.b4w_character_settings.step_height=.25),"jump_strength"in m.b4w_character_settings||(m.b4w_character_settings.jump_strength=5),"waterline"in m.b4w_character_settings||(m.b4w_character_settings.waterline=0)):(m.b4w_character_settings=null,b("object",
m,"b4w_character_settings"));"b4w_selectable"in m||(m.b4w_selectable=!1,b("object",m,"b4w_selectable"));"b4w_outlining"in m||(m.b4w_outlining=!1,b("object",m,"b4w_outlining"));"b4w_outline_on_select"in m||(m.b4w_outline_on_select=!1,b("object",m,"b4w_outline_on_select"));"b4w_billboard"in m||(m.b4w_billboard=!1,b("object",m,"b4w_billboard"));"b4w_billboard_geometry"in m||(m.b4w_billboard_geometry="SPHERICAL",b("object",m,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in m||(m.b4w_pres_glob_orientation=
!1,b("object",m,"b4w_pres_glob_orientation"));"b4w_outline_settings"in m||("b4w_glow_settings"in m?m.b4w_outline_settings=m.b4w_glow_settings:(m.b4w_outline_settings={},m.b4w_outline_settings.outline_duration=1,m.b4w_outline_settings.outline_period=1,m.b4w_outline_settings.outline_relapses=0),b("object",m,"b4w_outline_settings"));"lod_levels"in m||(m.lod_levels=[],b("object",m,"lod_levels"));"b4w_animation_mixing"in m||(m.b4w_animation_mixing=!1,b("object",m,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in
m||(m.b4w_anchor=null,b("object",m,"b4w_anchor")),!m.b4w_anchor||"max_width"in m.b4w_anchor||(m.b4w_anchor.max_width=250)}"collision_margin"in m.game||(m.game.collision_margin=.04,b("object",m,"collision_margin"));"b4w_anim_behavior"in m||(m.b4w_anim_behavior=m.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",b("object",m,"b4w_anim_behavior"));if(!("rotation_quaternion"in m)){n=[0,0,0,1];E.euler_to_quat(m.rotation_euler,n);var d=n,l=n[0],r=n[1],u=n[2];d[0]=n[3];d[1]=l;d[2]=r;d[3]=u;m.rotation_quaternion=
n;b("object",m,"rotation_quaternion")}"webgl_do_not_batch"in m&&(m.b4w_do_not_batch=m.webgl_do_not_batch)&&h("object",m,"webgl_do_not_batch");"b4w_shadow_cast_only"in m||(m.b4w_shadow_cast_only=!1,b("object",m,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in m||(m.b4w_correct_bounding_offset="AUTO",b("object",m,"b4w_correct_bounding_offset"));d=m.particle_systems;for(n=0;n<d.length;n++)l=d[n],r=l.settings,"use_rotation_dupli"in r||(r.use_rotation_dupli=!1,b("particle_settings",r,"use_rotation_dupli")),
"use_whole_group"in r||(r.use_whole_group=!1,b("particle_settings",r,"use_whole_group")),l.transforms||(l.transforms=new Float32Array,b("particle_system",l,"transforms")),"b4w_billboard_align"in r||(r.b4w_billboard_align="VIEW",b("particle_settings",r,"b4w_billboard_align")),"b4w_dynamic_grass"in r||(r.b4w_dynamic_grass=!1,b("object",r,"b4w_dynamic_grass")),"b4w_dynamic_grass_scale_threshold"in r||(r.b4w_dynamic_grass_scale_threshold=.01,b("object",r,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in
r||(r.b4w_initial_rand_rotation=!1,b("particle_settings",r,"b4w_initial_rand_rotation")),"b4w_rotation_type"in r||(r.b4w_rotation_type="Z",b("particle_settings",r,"b4w_rotation_type")),"b4w_rand_rotation_strength"in r||(r.b4w_rand_rotation_strength=1,b("particle_settings",r,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in r||(r.b4w_hair_billboard=!1,b("particle_settings",r,"b4w_hair_billboard")),"b4w_hair_billboard_type"in r||(r.b4w_hair_billboard_type="BASIC",b("particle_settings",r,"b4w_hair_billboard_type")),
"b4w_hair_billboard_jitter_amp"in r||(r.b4w_hair_billboard_jitter_amp=0,b("particle_settings",r,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in r||(r.b4w_hair_billboard_jitter_freq=0,b("particle_settings",r,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in r||(r.b4w_hair_billboard_geometry="SPHERICAL",b("particle_settings",r,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in r||(r.b4w_wind_bend_inheritance="PARENT",b("particle_settings",r,"b4w_wind_bend_inheritance")),
"b4w_shadow_inheritance"in r||(r.b4w_shadow_inheritance="PARENT",b("particle_settings",r,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in r||(r.b4w_reflection_inheritance="PARENT",b("particle_settings",r,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in r||(r.b4w_vcol_from_name="",b("particle_settings",r,"b4w_vcol_from_name")),"b4w_vcol_to_name"in r||(r.b4w_vcol_to_name="",b("particle_settings",r,"b4w_vcol_to_name")),"b4w_coordinate_system"in r||(r.b4w_coordinate_system="LOCAL",b("particle_settings",
r,"b4w_coordinate_system")),"b4w_allow_nla"in r||(r.b4w_allow_nla=!0,b("particle_settings",r,"b4w_allow_nla")),"b4w_enable_soft_particles"in r||(r.b4w_enable_soft_particles=!1,b("particle_settings",r,"b4w_enable_soft_particles")),"b4w_particles_softness"in r||(r.b4w_particles_softness=1,b("particle_settings",r,"b4w_particles_softness")),"billboard_tilt"in r||(r.billboard_tilt=0,b("particle_settings",r,"billboard_tilt")),"billboard_tilt_random"in r||(r.billboard_tilt_random=0,b("particle_settings",
r,"billboard_tilt_random")),"use_rotations"in r||(r.use_rotations=!1,b("particle_settings",r,"use_rotations"));"constraints"in m||(m.constraints=[],b("object",m,"constraints"));d=m.constraints;for(n=0;n<d.length;n++)l=d[n],"influence"in l||(l.influence=1),"axes"in l||(l.axes=[1,1,1]);d=m.modifiers;for(n=0;n<d.length;n++){a:{l=d[n];switch(l.type){case "ARRAY":if(!("fit_type"in l)){v.error("WARNING Incomplete modifier "+String(l.type)+' for "'+m.name+'", reexport "'+a.b4w_filepath_blend+'" scene');
l=!1;break a}}l=!0}l||(d.splice(n,1),n--)}"animation_data"in m||(m.animation_data={action:null,nla_tracks:[]},b("object",m,"animation_data"));m.animation_data&&("action"in m.animation_data||(m.animation_data.action=null,f("no action in animation data "+m.name)),"nla_tracks"in m.animation_data||(m.animation_data.nla_tracks=[],f("no NLA in animation data "+m.name)),c(m.animation_data));"b4w_collision_id"in m||(m.b4w_collision_id="",b("object",m,"b4w_collision_id"));"b4w_viewport_alignment"in m||(m.b4w_viewport_alignment=
null,b("object",m,"b4w_viewport_alignment"));"pinverse_tsr"in m||(m.pinverse_tsr=null,b("object",m,"pinverse_tsr"));"b4w_cluster_data"in m||(m.b4w_cluster_data={cluster_id:-1,cluster_center:null},b("object",m,"b4w_cluster_data"));"pass_index"in m||(m.pass_index=0,b("object",m,"pass_index"));"b4w_custom_prop"in m||(b("object",m,"b4w_custom_prop"),m.b4w_custom_prop=null);(0>m.scale[0]||0>m.scale[1]||0>m.scale[2])&&f('negative scale for object "'+m.name+'", can lead to some errors');n=m.scale;0==n[0]&&
0==n[1]&&0==n[2]?n=!0:(d=Math.abs((n[1]-n[2])/n[1]),n=.005>Math.abs((n[0]-n[1])/n[0])&&.005>d);n||f("non-uniform scale for object "+m.name)}for(var q in g)p=g[q],n=q.match(/.*?(?=>>|$)/i)[0],v.warn('Property "'+String(n)+'" is '+p.jI+' for "'+p.type+'". To fix this, reexport '+a.b4w_filepath_blend)};a.RN=function(a,b){"num_channels"in a||(a.num_channels=1,f('B4W Warning: no channels number in animation fcurve for "'+b.name+'" action, reexport scene'))};a.aN=function(a){var b;a:{b=a.modifiers;for(var c=
0;c<b.length;c++){var e=b[c].type;if("ARRAY"==e||"CURVE"==e){b=!0;break a}}b=!1}if(!b)return null;b=q(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var g=a[c];switch(g.type){case "ARRAY":for(var e=b,f=g,h=0,k=0,u=0,y=new Float32Array(16),g=[],F=1;F<f.count;F++){f.use_constant_offset&&(h+=f.constant_offset_displace[0],k+=f.constant_offset_displace[1],u+=f.constant_offset_displace[2]);if(f.use_relative_offset)var C=e.b4w_boundings.bb,h=h+(C.max_x-C.min_x)*f.relative_offset_displace[0],
k=k+(C.max_y-C.min_y)*f.relative_offset_displace[1],u=u+(C.max_z-C.min_z)*f.relative_offset_displace[2];E.WV(h,k,u,y);for(var t=C=q(e),T=y,L=n.fromMat4(T,D),L=r.fromMat3(L,N),ha=0;ha<t.submeshes.length;ha++){var pa=t.submeshes[ha];E.cp(pa.position,T,pa.position,0);H.nB(pa.tbn,L,pa.tbn)}g.push(C)}for(F=0;F<g.length;F++)for(f=e,h=g[F],k=0;k<f.submeshes.length;k++)if(u=f.submeshes[k],y=h.submeshes[k],C=u.base_length,t=u.indices.length,C)for(var Z in u)switch(Z){case "base_length":u[Z]+=y[Z];break;case "boundings":break;
case "indices":u[Z]=E.aW(u[Z],y[Z]);for(T=t;T<u[Z].length;T++)u[Z][T]+=C;break;case "position":u[Z]=l(u[Z],y[Z],u[Z].length/C/3);break;case "tbn":u[Z]=l(u[Z],y[Z],u[Z].length/C/4);break;case "shade_tangs":u[Z]=l(u[Z],y[Z],u[Z].length/C/3);break;case "group":u[Z]=l(u[Z],y[Z],u[Z].length/C);break;case "texcoord":u[Z]=l(u[Z],y[Z],u.uv_layers.length);break;case "color":u[Z]=l(u[Z],y[Z],u.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:v.warn('array_mesh_join(): unknown submesh property "'+
Z+'"'),u[Z]=E.NF(u[Z],y[Z])}break;case "CURVE":for(e=b,F=p.dP(g.object),f=new Float32Array(16),k=F.Sk?4:3,h=new Float32Array(k),k=new Float32Array(k),u=new Float32Array(3),y=new Float32Array(4),C=new Float32Array(4),t=new Float32Array(3),T=new Float32Array(3),L=new Float32Array(3),ha=0;ha<e.submeshes.length;ha++){var ma=e.submeshes[ha],pa=ma.position,ma=ma.tbn,aa;a:{aa=g.deform_axis;switch(aa){case "POS_X":case "NEG_X":aa=0;break a;case "POS_Y":case "NEG_Y":aa=1;break a;case "POS_Z":case "NEG_Z":aa=
2;break a;default:E.K("Wrong deform axis value "+aa)}aa=void 0}t[0]=0;t[1]=0;t[2]=0;t[aa]=1;for(var fa=p.HV(F),wa=0;wa<pa.length/3;wa++){L[0]=pa[3*wa];L[1]=pa[3*wa+1];L[2]=pa[3*wa+2];var da=L[aa],W=p.GV(F,da);p.IV(F,W,h);u[0]=h[0];u[1]=h[1];u[2]=h[2];p.FV(F,W,k);T[0]=k[0];T[1]=0;T[2]=k[2];w.normalize(T,T);r.rotationTo(t,T,y);0>da?(h[0]=T[0],h[1]=T[1],h[2]=T[2],w.scale(h,da,h),w.add(u,h,u)):da>fa&&(h[0]=T[0],h[1]=T[1],h[2]=T[2],w.scale(h,da-fa,h),w.add(u,h,u));d.fromRotationTranslation(y,u,f);F.Sk&&
(r.setAxisAngle(t,h[3],C),w.transformQuat(L,C,L));L[aa]=0;w.transformMat4(L,f,L);pa[3*wa]=L[0];pa[3*wa+1]=L[1];pa[3*wa+2]=L[2];da=H.Em(ma,wa,B);H.nB(da,y,da);H.Pi(ma,da,wa)}}}x.ZT(b)}return b};a.fN=function(a,b){function c(b,c){var d=b[0];if(1<b.length)for(var e=1;e<b.length;e++)d+="*"+b[e];for(e=0;e<a.length;e++){var g=a[e];if(g.name==d)for(var f in c)g[f]=c[f]}}function d(a,b){for(var d in a)c(a[d],b)}for(var e=b.b4w_logic_nodes,g=0;g<e.length;g++)for(var h=e[g],l=0;l<h.length;l++){var p=h[l],n=
{register1:"variable1",register2:"variable2",registerd:"variabled"},r;for(r in n)r in p&&(p[n[r]]=p[r]);for(var u in p.variables)"boolean"!=typeof p.variables[u][0]&&(p.variables[u]=[!1,p.variables[u]]);0<=["MATH","CONDJUMP","PAGEPARAM","REGSTORE"].indexOf(p.type)&&("variable1"in p&&(p.variables.id0=[!1,p.variable1]),"variable2"in p&&(p.variables.id1=[!1,p.variable2]),"variabled"in p&&(p.variables.vd=[!1,p.variabled]));for(var v in p.links)v.startsWith("id")||delete p.links[v];var n=p.common_usage_names,
q=p.variables;switch(p.type){case "SELECT":for(var w=0;w<a.length;w++)n=a[w],n.name==p.object&&(n.b4w_selectable=!0);p.bools||(p.bools={});p.bools.not_wait||(p.bools.not_wait=!1);f('Logic nodes type "SELECT" is deprecated');break;case "SWITCH_SELECT":d(p.objects_paths,{b4w_selectable:!0});if(p.links instanceof Array){f('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');n={};q=0;for(w in p.objects_paths)n[w]=p.links[q],q++;p.links=n}break;case "SELECT_PLAY":f('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+
b.name+'"');p.mute=!0;break;case "SELECT_PLAY_ANIM":f('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":p.bools||(p.bools={});void 0===p.bools.ch&&(p.bools.ch=!1);p.P.id0||d(p.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":d(p.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":d(p.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":d(p.objects_paths,{b4w_do_not_batch:!0});
switch(n.space_type){case "WORLD":n.space_type=C.vL;break;case "PARENT":n.space_type=C.uL;break;case "LOCAL":n.space_type=C.tL}break;case "OUTLINE":d(p.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":p.condition&&(n.condition=p.condition);if("cnd"in p.floats)n.condition=p.floats.cnd;else switch(n.condition){case "GEQUAL":n.condition=C.tD;break;case "LEQUAL":n.condition=C.vD;break;case "GREATER":n.condition=C.uD;break;case "LESS":n.condition=C.wD;break;case "NOTEQUAL":n.condition=C.xD;break;
case "EQUAL":n.condition=C.sD}void 0!=p.number1&&(p.input1=p.number1);void 0!=p.number2&&(p.input2=p.number2);p.bools||(p.bools={});p.bools.str&&(n.variable_type="STRING");switch(n.variable_type){case "NUMBER":n.variable_type=C.Qy;break;case "STRING":n.variable_type=C.zD;break;case "OBJECT":n.variable_type=C.yD}void 0===n.variable_type&&(n.variable_type=C.Qy,p.floats.inp1=p.input1,p.floats.inp2=p.input2);void 0===q.id0&&(q.id0=q.v1,q.id1=q.v2);break;case "SEND_REQ":p.bools||(p.bools={});p.strings||
(p.strings={});void 0===p.bools.ct&&(p.bools.ct=!1);void 0!=p.url&&(p.bools.url=!1,p.strings.url=p.url);break;case "MATH":void 0!=p.number1&&(p.input1=p.number1);void 0!=p.number2&&(p.input2=p.number2);void 0!=p.input1&&(p.floats.inp1=p.input1);void 0!=p.input2&&(p.floats.inp2=p.input2);switch(p.operation){case "DIV":p.operation=C.aL;break;case "SUB":p.operation=C.jL;break;case "MUL":p.operation=C.fL;break;case "ADD":p.operation=C.WK;break;case "RAND":p.operation=C.gL;break;case "SIN":p.operation=
C.iL;break;case "COS":p.operation=C.$K;break;case "TAN":p.operation=C.kL;break;case "ARCSIN":p.operation=C.YK;break;case "ARCCOS":p.operation=C.XK;break;case "ARCTAN":p.operation=C.ZK;break;case "LOG":p.operation=C.bL;break;case "MIN":p.operation=C.dL;break;case "MAX":p.operation=C.cL;break;case "ROUND":p.operation=C.hL;break;case "MOD":p.operation=C.eL;break;case "ABS":p.operation=C.VK}void 0===q.id0&&(q.id0=q.v1,q.id1=q.v2);break;case "REGSTORE":p.floats||(p.floats={});p.strings||(p.strings={});
void 0!=p.number1&&(p.input1=p.number1);if(void 0!=p.input1)switch(typeof p.input1){case "number":p.floats.inp1=p.input1;n.variable_type="NUMBER";break;default:p.strings.inp1=p.input1,n.variable_type="STRING"}switch(n.variable_type){case "NUMBER":n.variable_type=C.Qy;break;case "STRING":n.variable_type=C.zD;break;case "OBJECT":n.variable_type=C.yD,d(p.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":p.bools||(p.bools={});void 0===p.bools.hsh&&(p.bools.hsh=!1);p.floats||(p.floats={});void 0===
p.floats.ptp&&(p.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":p.bools||(p.bools={});void 0===p.bools.env&&(p.bools.env=!1);void 0===p.bools.id0&&(p.bools.id0=!1);p.bools.id0||c(p.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==p.type&&((p=n.param_anim_behavior)||(p="FINISH_STOP"),n.param_anim_behavior=k.az(p));break;case "STRING":switch(n.string_operation){case "JOIN":n.string_operation=C.qL;break;case "FIND":n.string_operation=C.pL;break;case "REPLACE":n.string_operation=C.rL;break;
case "SPLIT":n.string_operation=C.sL;break;case "COMPARE":n.string_operation=C.oL}if("cnd"in p.floats)n.condition=p.floats.cnd;else switch(n.condition){case "GEQUAL":n.condition=C.tD;break;case "LEQUAL":n.condition=C.vD;break;case "GREATER":n.condition=C.uD;break;case "LESS":n.condition=C.wD;break;case "NOTEQUAL":n.condition=C.xD;break;case "EQUAL":n.condition=C.sD}break;case "REDIRECT":void 0!=p.url&&(p.bools.url=!1,p.strings.url=p.url);break;case "SET_CAMERA_MOVE_STYLE":switch(n.camera_move_style){case "STATIC":n.camera_move_style=
C.RK;break;case "TARGET":n.camera_move_style=C.SK;break;case "EYE":n.camera_move_style=C.PK;break;case "HOVER":n.camera_move_style=C.QK}break;case "ENTRYPOINT":p.bools||(p.bools={});void 0===p.bools.js&&(p.bools.js=!1);p.bools.js&&(p.mute=!0);break;case "JS_CALLBACK":for(r in p=n.js_cb_params,p)switch(p[r]){case "OBJECT":p[r]=C.TK;break;case "VARIABLE":p[r]=C.UK}}}}};b4w.module.__scenegraph=function(a,t){function e(a,b){var c=[];z.oh(a,function(b,d,e){-1<c.indexOf(e)?z.kU(a,b,d,e,C(e)):c.push(e)});z.ea(a,function(a,d){for(var e=0;e<d.fb.length;e++){var g=d.fb[e];b||d.type!=m.Zd&&d.type!=m.ud&&d.type!=m.Gg||(g.$c=!0);-1<c.indexOf(g)?d.fb[e]=C(g):c.push(g)}})}function c(a,c){z.ea(a,function(b,d){d.type==m.bD&&z.hk(a,b,function(a,b){if(b.type==m.bi)for(var c=0;c<b.fb.length;c++){var d=b.fb[c];d.ba=K.T;d.fa=K.T}});c||z.hk(a,b,function(a,b,c){"DEPTH"==c.from&&(c.$c=
!0)})});z.ea(a,function(c){var d={};b(a,c,d);for(var e in d){c=d[e];for(var g=c[0],f=0;f<c.length;f++)if(c[f].ba==K.T){g=c[f];break}for(var h=c[0],f=0;f<c.length;f++)if(c[f].fa==K.T){h=c[f];break}for(var l=c[0],f=0;f<c.length;f++)if(!c[f].$c){l=c[f];break}for(f=0;f<c.length;f++)c[f].ba=g.ba,c[f].fa=h.fa,c[f].$c=l.$c}})}function b(a,c,d){z.hk(a,c,function(c,e,g){g.active&&g.from==g.to&&(d[g.from]=d[g.from]||[],-1==d[g.from].indexOf(g)&&d[g.from].push(g),b(a,c,d))});z.Cl(a,c,function(a,b,c){c.active&&
(d[c.from]=d[c.from]||[],-1==d[c.from].indexOf(c)&&d[c.from].push(c))});c=z.$a(a,c);if(c.type==m.bi)for(var e=0;e<c.fb.length;e++){var g=c.fb[e];d[g.from].push(g)}}function h(a){var b=[m.bi,m.Sy,m.zt,m.Zd,m.ud,m.iq];R.Gb||b.push(m.eD);var c=z.BC(a),d=[];z.ea(c,function(a,e){for(var g=0;g<e.fb.length;g++){var h=e.fb[g];-1<b.indexOf(e.type)&&(h.Fl=!0);var k=y(d,h,f(h));h.Oa=k;e.nh[g]=k}for(g=0;g<e.nh.length;g++)k=e.nh[g],x(d,k);z.Cl(c,a,function(g,h,k){if(!k.Oa){if(-1<b.indexOf(e.type))k.Fl=!0;else if((g=
q(c,a,k.from))&&k.active&&!k.Oa){l(d,g);k.Oa=g;return}g=y(d,k,f(k));k.Oa=g}});z.hk(c,a,function(a,b,c){x(d,c.Oa)});z.Cl(c,a,function(a,b,c){c.Oa&&"NONE"==c.to&&x(d,c.Oa)})})}function f(a){var b=a.to,c=a.active,d=a.Oa;a.to="";a.active=!1;a.Oa=null;var e=U.BE(a);a.to=b;a.active=c;a.Oa=d;return e}function q(a,b,c){var d=null;z.hk(a,b,function(a,b,e){if(e.active&&e.from==e.to&&e.from==c&&e.Oa)return d=e.Oa,!0});z.Cl(a,b,function(a,b,e){if(e.active&&e.from==c&&e.Oa)return d=e.Oa,!0});return d}function l(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.AC===b&&d.ts++}}function x(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.AC===b&&d.ts&&d.ts--}}function y(a,b,c){if(b.cn)return l(a,b.cn.Oa),b.cn.Oa;if(b.Fl)return p(b);for(var d=null,e=0;e<a.length;e++){var g=a[e];if(g.id==c&&0===g.ts){d=g;break}}if(d&&!R.LF)return d.ts++,d.AC;b=p(b);a.push({id:c,ts:1,AC:b});return b}function p(a){var b=a.Wj*a.size,c=a.Xj*a.size,d=a.ly,e=a.df;switch(a.from){case "COLOR":return a.$c?(d=K.Ck(a.tg?K.Et:K.Dt,d,e),K.resize(d,
b,c)):(d=K.Ck(K.sh,d,e),K.resize(d,b,c),K.dC(d,a.ba,a.fa)),d;case "DEPTH":return a.$c?(d=K.Ck(a.tg?K.Ct:K.Bt,d,e),K.resize(d,b,c)):(d=K.Ck(K.Sl,d,e),K.resize(d,b,c),K.dC(d,a.ba,a.fa)),d;case "CUBEMAP":return d=K.JO(b,e);case "SCREEN":case "NONE":return null;default:U.K("Wrong slink param: "+a.from)}}function d(a,b){var c=!1;z.oh(a,function(d,e,g){if(g&&(d=z.$a(a,d),e=z.$a(a,e),b(g,!1,d,e)))return c=!0});c||z.ea(a,function(a,c){for(var d=0;d<c.fb.length;d++)if(b(c.fb[d],!0,c,null))return!0})}function v(a){z.ea(a,
function(b,c){if(c.type!=m.qk){var d=c.H;z.Cl(a,b,function(a,b,c){c.Oa&&c.active&&c.Oa&&(L.jx(d,c.from,c.Oa),c.from==c.to&&b.H&&L.jx(b.H,c.from,c.Oa))});for(var e=0;e<c.fb.length;e++){var g=c.fb[e];g.active&&g.from==g.to&&L.jx(d,g.from,c.nh[e])}!d.Rb&&!d.wf||d.Ve||(d.Ve=I.gU(d.Rb,d.wf))}});z.ea(a,function(b,c){if(c.type==m.xt||c.type==m.Iy){var d=u(a,c);c.H.sr=d[0].H.Ve}})}function r(a){var b=null,c=0;z.ea(a,function(a,d){if(d.type==Q.Ps){if(c==Q.RV)return b=d,!0;c++}});return b}function H(a,b){var c=
z.Nj(a,b),d=m.Hc("NONE"),e=z.Y(a,d),g=z.Cr(a)[0];z.oh(a,function(b,c){c==g&&z.$T(a,b,g,b,e)});var f=E(b,a);z.oh(a,function(e,g,h){if(e==c){if(f){e=m.$q();z.Y(a,e);g=n("COLOR","RESOLVE",1,1,1,!0,!0);g.tg=!0;g.$c=!0;var l=n("DEPTH","RESOLVE",1,1,1,!0,!0);l.tg=!0;l.$c=!0;z.I(a,b,e,g);z.I(a,b,e,l);b=e}z.I(a,b,d,n(Q.tV,"u_color",h.size,h.Wj,h.Xj,h.qn,h.Ot));return!0}});z.Ec(a,e,g,n("SCREEN","NONE",.5,.5,.5,!0,!0))}function E(a,b){var c=!1,d=z.Nj(b,a);z.vg(b,d)&&(c=z.Vg(b,d,0),d=z.Oc(b,d,c,0),"COLOR"==
d.from&&"COLOR"==d.to||"DEPTH"==d.from&&"DEPTH"==d.to?(d=z.$a(b,c),c=E(d,b)):c="RESOLVE"==d.to);return c}function w(a,b,c,d){var e=c.ja,g=b.Pv,f=b.anaglyph_use,h=b.Qh.Mi,l=b.Qh.Vw;b=z.wl(a,z.BR(a,d),z.nk);var k=[],p=[],r=[];b=z.clone(b,function(b){var d;if(-1<ra.indexOf(b.type))p.push(b),d=b;else{d=m.qO(b);if(d.type==m.Zd)for(var f=0;f<h.length;f++)if(h[f][0]==b){h[f]=[b,d];d.H.xc=b.H.xc;c.ja.push(d.H);break}if(b.type==m.Xf)for(f=0;f<h.length;f++){if(l[f][0]==b){l[f]=[b,d];d.H=h[f][1].H;break}}else-1<
e.indexOf(b.H)&&(g?(L.sw(b.H,L.kf),L.sw(d.H,L.Ne),d.xm=!0):(L.sw(b.H,L.Dc),L.sw(d.H,L.Lc)),e.push(d.H));var n=z.Nj(a,b);z.hk(a,n,function(a,b,c){-1<ra.indexOf(b.type)&&k.push([b,d,c])});if(b.type!==m.bi)for(f=0;f<b.fb.length;f++)d.fb[f].cn=b.fb[f];b=!0;for(f=0;f<z.zi(a,n);f++){var u=z.ng(a,n,f),u=z.$a(a,u);-1==ra.indexOf(u.type)&&(b=!1)}b&&r.push(d)}return d},function(a){var b=C(a,!0);b.cn=a;return b});for(var u=0;u<p.length;u++)z.If(b,z.Nj(b,p[u]));z.wz(b);f=m.FP(g,f);u=z.Y(a,f);if(R.Uv)var v=m.Hc("NONE"),
q=n("COLOR","u_color",1,1,1,!0,!0);else v=m.Hz(),q=n("COLOR","COPY",1,1,1,!0,!0);q.ba=K.T;q.fa=K.T;z.Y(a,v);z.I(a,d,v,q);var w=n("COLOR","u_sampler_left",1,1,1,!0,!0);w.Fl=!0;w.ba=K.T;w.fa=K.T;z.I(a,v,f,w);if(!d.bc){if(R.Uv)var w=m.Hc("NONE"),D=n("COLOR","u_color",1,1,1,!0,!0);else w=m.Hz(),D=n("COLOR","COPY",1,1,1,!0,!0);z.Y(b,w);D.cn=q;var A=z.Cr(b)[0],A=z.$a(b,A);z.I(b,A,w,D)}w=n("COLOR","u_sampler_right",1,1,1,!0,!0);d.bc&&(w.cn=q);w.ba=K.T;w.fa=K.T;z.aE(b,a,[z.Cr(b)[0],u,w]);for(u=0;u<k.length;u++)z.I(a,
k[u][0],k[u][1],k[u][2]);d=n("SCREEN","NONE",0,0,0,!1,!1);for(u=0;u<r.length;u++)z.I(a,v,r[u],d);z.oh(a,function(b,c,d){z.$a(a,b).type===m.bi&&(d.cn=null)});return f}function n(a,b,c,d,e,g,f){return{from:a,to:b,size:c,Wj:d,Xj:e,qn:g,Ot:f,active:!0,Oa:null,tg:!1,$c:!1,ba:K.Me,fa:K.Me,Fl:!1,ly:!1,df:!1}}function C(a,b){var c=n(a.from,a.to,a.size,a.Wj,a.Xj,a.qn,a.Ot);c.active=a.active;!b&&a.Oa&&U.K("Failed to clone slink with attached texture");c.Oa=a.Oa;c.tg=a.tg;c.$c=a.$c;c.ba=a.ba;c.fa=a.fa;c.Fl=
a.Fl;c.ly=a.ly;c.df=a.df;return c}function k(a,b,c){if(b.type==c)return!0;b=g(a,b);for(var d=0;d<b.length;d++)if(k(a,b[d],c))return!0;return!1}function F(a,b,c){if(b.type==c)return!0;b=u(a,b);for(var d=0;d<b.length;d++)if(F(a,b[d],c))return!0;return!1}function u(a,b){var c=z.Nj(a,b);c==z.Ry&&U.K("Subscene not in graph");for(var d=[],e=z.zi(a,c),g=0;g<e;g++){var f=z.ng(a,c,g);f!=c&&d.push(z.$a(a,f))}return d}function g(a,b){var c=z.Nj(a,b);c==z.Ry&&U.K("Subscene not in graph");for(var d=[],e=z.vg(a,
c),g=0;g<e;g++){var f=z.Vg(a,c,g);f!=c&&d.push(z.$a(a,f))}return d}function D(a){var b=[],c=[];d(a,function(a){a.Oa&&-1==b.indexOf(a.Oa)&&(b.push(a.Oa),c.push(a.Oa,b.length-1))});return c}function B(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.qn){var d=a.Wj,e=a.Xj;Math.round(d)!=d&&(d=d.toFixed(2));Math.round(e)!=e&&(e=e.toFixed(2));c=c+((1==d?"":d)+"Sx"+((1==e?"":e)+"S"))+(a.Ot?" FACT":" VIEW")}else d=a.Wj,e=a.Xj,c+=a.size*d+"x"+a.size*e;if("SCREEN"!=a.from){c+=" ";if(a.$c)c+=
"RR";else{var d=a.ba,e=a.fa,g="";d==K.T?g+="L":d==K.Me&&(g+="N");e==K.T?g+="L":e==K.Me&&(g+="N");c+=g}for(d=0;d<b.length;d+=2)b[d]==a.Oa&&(c+=" "+b[d+1])}return c+")\\n"}var N=t("__batch"),L=t("__camera"),A=t("__config"),G=t("__debug"),z=t("__graph"),I=t("__renderer"),S=t("__shaders"),m=t("__subscene"),K=t("__textures"),U=t("__util"),Q=A.qm,R=A.L,ga=A.ip,ra=[m.Zi,m.wd,m.ud,m.jf];a.cO=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;
default:return!0}};a.Gp=d;a.YO=function(a,b,d,f){function l(c){var d=L.Mc(ia,!0);b.ja.push(d);d=m.om(c,d,!1,I,E,Y,na,ya,a.xl);z.Y(k,d);c==m.Gg?(z.I(k,p[0],d,n("COLOR","COLOR",1,1,1,!0,!0)),d.fb.push(n("DEPTH","DEPTH",1,1,1,!0,!0))):(c=Aa&&p[0].type==m.xt?Va:p[0],z.I(k,Va,d,za),z.I(k,c,d,Ya));Ma&&(z.I(k,Ma,d,Ra),z.I(k,Ma,d,Ja));for(c=0;c<D.length;c++)z.I(k,D[c],d,A[c]);rb&&z.I(k,rb,d,vb);if(W.length){var e=W.length;for(c=0;c<e;c++)z.I(k,W[c],d,y[c])}if(B.length)for(c=0;c<B.length;c++)z.I(k,B[c],d,
x[c]);jc&&z.I(k,jc,d,Pd);return d}var k=z.create(),p=[],q=[],D=[],A=[],W=[],y=[],B=[],x=[],F=[],E=a.yS,I=a.sd,t=a.shore_smoothing,la=a.vV,V=a.ssao,sa=a.god_rays,N=a.Qh,J=a.rH,T=a.uN,S=a.motion_blur,ra=a.compositing,ta=a.antialiasing,na=a.Ol,Y=a.qK,ya=a.Yc,Ka=a.fT,va=a.QN,X=a.LR,Ea=a.wT,Fa=a.dof,M=a.TP,ea=a.refractions,qa=!!f.length,Aa=1<R.ec;R.ys=R.ys&&!!ya&&!(Aa&&V);var Pa=R.ys,Ya=n("COLOR","COLOR",1,1,1,!0,!0),za=n("DEPTH","DEPTH",1,1,1,!0,!0);if(Aa){var ha=C(za);Ya.tg=!0;Ya.$c=!0;za.tg=!0;za.$c=
!0}var ia=b.ja[0];if(a.Nc){var Ma=m.rP();z.Y(k,Ma);var pa=ga.Dr;Ma.H.width=pa;Ma.H.height=pa;var Ra=n("DEPTH","u_grass_map_depth",pa,1,1,!1,!1);R.Gb||(Ra.ba=K.T,Ra.fa=K.T);var Ja=n("COLOR","u_grass_map_color",pa,1,1,!1,!1);Ja.ba=K.T;Ja.fa=K.T}else Ja=Ra=Ma=null;if(ya){L.OC(ia,ya);for(var ka=0;ka<ya.Ih.length;ka++)for(var ic=ya.csm_num,oa=0;oa<ic;oa++){var P=m.AP(oa,ka,ya,E);z.Y(k,P);D.push(P);var pa=ya.csm_resolution,Ha=P.H;b.SI.push(Ha);Ha.width=pa;Ha.height=pa;P.lb=!0;var Za=0<ka?ka:oa;if(R.zs){A.push(n("COLOR",
"u_shadow_map"+Za,pa,1,1,!1,!1));var Wa=n("DEPTH","DEPTH",pa,1,1,!1,!1);Wa.$c=!0;P.fb.push(Wa)}else{var Da=n("DEPTH","u_shadow_map"+Za,pa,1,1,!1,!1);R.Sq&&(Da.ba=K.T,Da.fa=K.T,Da.ly=!0);A.push(Da);(G.XN()||R.TI)&&P.fb.push(n("COLOR","COLOR",pa,1,1,!1,!1))}Ma&&(z.I(k,Ma,P,Ra),z.I(k,Ma,P,Ja))}}if(N&&N.HH&&!qa)for(oa=0;oa<N.HH;oa++){Ha=L.Gc(L.Kc);Ha.width=a.Og;Ha.height=a.Og;L.zI(Ha,Math.PI/2,.1,100);L.set_projection(Ha,!1);var Xa=m.om(m.ud,Ha,!1,I,E,Y,na,null,a.xl);Xa.Ng=U.RQ();for(ka=0;6>ka;ka++)Xa.pm.push(L.NO());
z.Y(k,Xa);var Cb=n("CUBEMAP","u_cube_reflection",a.Og,1,1,!1,!1);Cb.ba=K.T;Cb.fa=K.T;x.push(Cb);if(!N.zA){var Hb=n("CUBEMAP","u_sky_reflection",a.Og,1,1,!1);Hb.df=!0;Hb.ba=K.Rl;Hb.fa=K.T;F.push(Hb)}Ma&&(z.I(k,Ma,Xa,Ra),z.I(k,Ma,Xa,Ja));if(N.tG){var Ba=m.om(m.jf,Ha,!1,I,E,Y,na,null,a.xl);Ba.Ng=Xa.Ng;Ba.pm=Xa.pm;z.Y(k,Ba);var hb=n("DEPTH","DEPTH",a.Og,1,1,!1,!1),Xb=n("COLOR","COLOR",a.Og,1,1,!1,!1);z.I(k,Xa,Ba,hb);z.I(k,Xa,Ba,Xb);B.push(Ba);N.Kz.push(Ba);Ma&&(z.I(k,Ma,Ba,Ra),z.I(k,Ma,Ba,Ja))}else{var $a=
n("DEPTH","DEPTH",a.Og,1,1,!1,!1);Xa.fb.push($a);B.push(Xa)}N.qj.push(Xa)}if(N&&0<N.eI.length&&!qa)for(ka=0;ka<N.eI.length;ka++)Ha=L.Mc(ia,!0),Ha.xc=new Float32Array(4),b.ja.push(Ha),Xa=m.om(m.Zd,Ha,!1,I,E,Y,na,null,a.xl),z.Y(k,Xa),Cb=n("COLOR","u_plane_reflection",1,a.Ph,a.Ph,!0,!0),Cb.ba=K.T,Cb.fa=K.T,y.push(Cb),Ma&&(z.I(k,Ma,Xa,Ra),z.I(k,Ma,Xa,Ja)),N.tG?(Ba=m.om(m.Xf,Ha,!1,I,E,Y,na,null,a.xl),z.Y(k,Ba),hb=n("DEPTH","DEPTH",1,a.Ph,a.Ph,!0,!0),Xb=n("COLOR","COLOR",1,a.Ph,a.Ph,!0,!0),Xb.ba=K.Me,Xb.fa=
K.Me,z.I(k,Xa,Ba,hb),z.I(k,Xa,Ba,Xb),N.Vw.push([Ba]),W.push(Ba),Ma&&(z.I(k,Ma,Ba,Ra),z.I(k,Ma,Ba,Ja))):($a=n("DEPTH","DEPTH",1,a.Ph,a.Ph,!0,!0),Xa.fb.push($a),W.push(Xa)),N.Mi.push([Xa]);if(ya){var Yb=L.Mc(ia,!0);b.ja.push(Yb);var mb=m.BP(Yb,E);z.Y(k,mb);mb.self_shadow_normal_offset=ya.self_shadow_normal_offset;for(oa=0;oa<D.length;oa++)P=D[oa],z.I(k,P,mb,A[oa]);if(Pa){if(Da=n("DEPTH","DEPTH",1,1,1,!0,!0),Aa){Da.tg=!0;Da.$c=!0;var Mb=m.$q();z.Y(k,Mb);var Wc=n("COLOR","RESOLVE",1,1,1,!0,!0);Wc.tg=
!0;Wc.$c=!0;var Ec=n("DEPTH","RESOLVE",1,1,1,!0,!0);Ec.tg=!0;Ec.$c=!0;z.I(k,mb,Mb,Wc);z.I(k,mb,Mb,Ec)}}else Aa?Da=n("DEPTH","DEPTH",1,1,1,!0,!0):R.zs?(Da=n("DEPTH","DEPTH",1,1,1,!0,!0),Da.$c=!0):Da=za;if(V){var Ta=n("COLOR","u_color",1,1,1,!0,!0),ib=n("DEPTH","u_depth",1,1,1,!0,!0),ab=L.Mc(ia,!0);b.ja.push(ab);var Ib=a.KV,$b=m.DP(ab,Y,Ib);z.Y(k,$b);var Fc=n("COLOR","u_ssao_mask",1,1,1,!0,!0);z.I(k,mb,$b,Ta);z.I(k,mb,$b,ib);var ac=L.Mc(ia,!0);b.ja.push(ac);var Nb=m.EP(ac,Ib);z.Y(k,Nb);var sb=n("COLOR",
"u_shadow_mask",1,1,1,!0,!0);z.I(k,$b,Nb,Fc);z.I(k,mb,Nb,ib)}Ma&&(z.I(k,Ma,mb,Ra),z.I(k,Ma,mb,Ja))}else mb=null;var Va=m.om(m.Hb,ia,!Pa,I,E,Y,na,null,a.xl);z.Y(k,Va);ya&&(Pa?z.I(k,mb,Va,Da):mb.fb.push(Da));if(Aa){var zb=m.$q();z.Y(k,zb);q.push(zb);var Jb=n("COLOR","RESOLVE",1,1,1,!0,!0);Jb.tg=!0;Jb.$c=!0;var Db=n("DEPTH","RESOLVE",1,1,1,!0,!0);Db.tg=!0;Db.$c=!0;z.I(k,Va,zb,Jb);z.I(k,Va,zb,Db)}else q.push(Va);mb&&(Fc?z.I(k,Nb,Va,sb):z.I(k,Pa&&Aa?Mb:mb,Va,n("COLOR","u_shadow_mask",1,1,1,!0,!0)));Ma&&
(z.I(k,Ma,Va,Ra),z.I(k,Ma,Va,Ja));if(W.length)for(var kc=W.length,ka=0;ka<kc;ka++)z.I(k,W[ka],Va,y[ka]);if(B.length)for(ka=0;ka<B.length;ka++)z.I(k,B[ka],Va,x[ka]);p=q;q=[];if(!qa&&a.rO){var wc=Q.enabled&&(Q.Ps===m.Le||Q.Ps===m.ph),Ha=L.Mc(ia,!0);wc||(Ha.width=Ha.height=1);b.ja.push(Ha);var xc=m.lF(Ha,!1,E);z.Y(k,xc);if(a.ai){Ha=L.Mc(ia,!0);wc||(Ha.width=Ha.height=1);b.ja.push(Ha);var yc=m.lF(Ha,!0,E);z.Y(k,yc);z.I(k,xc,yc,n("COLOR","COLOR",1,1,1,wc,!0));z.I(k,xc,yc,n("DEPTH","DEPTH",1,1,1,wc,!0))}}else xc=
null;if(!J.refractions&&!ea||qa)jc=null;else{if(Aa)jc=zb;else{if(R.Uv)var jc=m.Hc("NONE"),lc=n("COLOR","u_color",1,1,1,!0,!0);else jc=m.Hz(),lc=n("COLOR","COPY",1,1,1,!0,!0);z.Y(k,jc);z.I(k,p[0],jc,lc)}var Pd=n("COLOR","u_refractmap",1,1,1,!0,!0)}if(M&&(ea||t||la)){var Jd=L.Mc(ia,!0);b.ja.push(Jd);var rb=m.oP(Jd);z.Y(k,rb);z.I(k,Aa?zb:Va,rb,n("DEPTH","u_depth",1,1,1,!0,!0));var vb=n("COLOR","u_scene_depth",1,1,1,!0,!0);vb.ba=K.Me;vb.fa=K.Me}else rb=null;if(a.Bv){var jb=l(m.bd);q.push(jb);p=q;q=[]}if(a.glow_materials){var Tb=
L.Mc(ia,!0);b.ja.push(Tb);var pb=m.om(m.Yd,Tb,!1,I,E,Y,na);z.Y(k,pb);rb&&z.I(k,rb,pb,vb);jc&&z.I(k,jc,pb,Pd);Ma&&(z.I(k,Ma,pb,Ra),z.I(k,Ma,pb,Ja));if(W.length)for(kc=W.length,ka=0;ka<kc;ka++)z.I(k,W[ka],pb,y[ka]);if(B.length)for(ka=0;ka<B.length;ka++)z.I(k,B[ka],pb,x[ka]);a.Bv&&z.I(k,pb,jb,n("SCREEN","NONE",0,0,0,!1,!1));z.I(k,Aa?zb:Va,pb,Aa?ha:za);var bb=m.Hc("X_GLOW_BLUR");bb.zb="GLOW_MASK_SMALL";bb.Ge=a.xi.small_glow_mask_width;var mc=n("COLOR","u_color",1,1,1,!0,!0);mc.ba=K.T;mc.fa=K.T;z.Y(k,
bb);z.I(k,pb,bb,mc);var Ob=m.Hc("Y_GLOW_BLUR");Ob.zb="GLOW_MASK_SMALL";Ob.Ge=a.xi.small_glow_mask_width;var nc=n("COLOR","u_color",1,.5,.5,!0,!0);nc.ba=K.T;nc.fa=K.T;z.Y(k,Ob);z.I(k,bb,Ob,nc);var Nc=m.Hc("X_GLOW_BLUR");Nc.zb="GLOW_MASK_LARGE";Nc.Ge=a.xi.large_glow_mask_width;var Xc=n("COLOR","u_color",1,.5,.5,!0,!0);Xc.ba=K.T;Xc.fa=K.T;z.Y(k,Nc);z.I(k,Ob,Nc,Xc);var id=m.Hc("Y_GLOW_BLUR");id.zb="GLOW_MASK_LARGE";id.Ge=a.xi.large_glow_mask_width;var jd=n("COLOR","u_color",1,.25,.25,!0,!0);jd.ba=K.T;
jd.fa=K.T;z.Y(k,id);z.I(k,Nc,id,jd);var cd=L.Mc(ia,!0);b.ja.push(cd);var Gc=m.pP(cd,a);z.Y(k,Gc);var wb=n("COLOR","u_src_color",1,1,1,!0,!0);wb.ba=K.T;wb.fa=K.T;if(a.Bv)if(Aa){var zc=m.$q();z.Y(k,zc);z.I(k,jb,zc,Jb);z.I(k,jb,zc,Db);z.I(k,zc,Gc,wb)}else z.I(k,jb,Gc,wb);else z.I(k,Aa?zb:Va,Gc,wb);var oc=n("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);oc.ba=K.T;oc.fa=K.T;z.I(k,Ob,Gc,oc);var Hc=n("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);Hc.ba=K.T;Hc.fa=K.T;z.I(k,id,Gc,Hc);p=[Gc];q=[]}a.Bv||(jb=l(m.bd),
q.push(jb),p=q,q=[]);if(R.debug_view){Ha=L.Mc(ia,!0);b.ja.push(Ha);var xb=m.nP(Ha);q.push(xb);z.Y(k,xb);z.I(k,p[0],xb,Ya);z.I(k,p[0],xb,za);Ma&&(z.I(k,Ma,xb,Ra),z.I(k,Ma,xb,Ja));G.MU(xb);p=q;q=[]}if(Aa){var Eb=m.$q();z.Y(k,Eb);q.push(Eb);z.I(k,p[0],Eb,Jb);z.I(k,p[0],Eb,Db);p=q;q=[]}var tb=p.slice(0);if(!qa&&a.GM){Ha=L.Mc(ia,!0);b.ja.push(Ha);var nb=m.iP(Ha);z.Y(k,nb);z.I(k,p[0],nb,Aa?ha:za)}if(sa&&M&&!qa){var Kb=X.Zk,kd=X.intensity,Oc=X.ul,fb=p[0],Pc=I?!0:!1,bc=n("DEPTH","u_input",1,1,1,!0,!0),Ic=
n("COLOR","u_input",1,.25,.25,!0,!0);Ic.ba=K.T;Ic.fa=K.T;var cc=Kb/Oc,Yc=L.Mc(ia,!0);b.ja.push(Yc);var Ub=m.Iz(Yc,Pc,Kb,!0,cc,E,Oc);z.Y(k,Ub);z.I(k,fb,Ub,bc);var cc=Kb/Oc*.5,Pb=L.Mc(ia,!0);b.ja.push(Pb);var yb=m.Iz(Pb,Pc,Kb,!1,cc,E,Oc);z.Y(k,yb);z.I(k,Ub,yb,Ic);var cc=Kb/Oc*.25,Ac=L.Mc(ia,!0);b.ja.push(Ac);var kb=m.Iz(Ac,Pc,Kb,!1,cc,E,Oc);z.Y(k,kb);z.I(k,yb,kb,Ic);var Jc=m.qP(kd,E);q.push(Jc);z.Y(k,Jc);var pc=n("COLOR","u_main",1,1,1,!0,!0);pc.ba=K.T;pc.fa=K.T;z.I(k,fb,Jc,pc);var Qc=n("COLOR","u_god_rays",
1,1,1,!0,!0);Qc.ba=K.T;Qc.fa=K.T;z.I(k,kb,Jc,Qc);p=q;q=[]}if(T&&!qa){var fb=p[0],Fb=m.tP();z.Y(k,Fb);pc=n("COLOR","u_input",1,1,1,!0,!0);pc.ba=K.T;pc.fa=K.T;z.I(k,fb,Fb,pc);var Lb=T.key,Bc=T.edge_lum,qc=L.Mc(ia,!0);b.ja.push(qc);var qb=m.uP(Lb,Bc,E,qc);z.Y(k,qb);var Qb=n("COLOR","u_luminance",1,.25,.25,!0,!0);Qb.ba=K.T;Qb.fa=K.T;if(T.adaptive){var ub=m.jP();z.Y(k,ub);ub.H.width=1;ub.H.height=1;var Ab=n("COLOR","u_input",1,.25,.25,!0,!0);Ab.df=!0;Ab.ba=K.Rl;Ab.fa=K.T;if(R.Gb)Qb.df=!0,Qb.ba=K.Rl,z.I(k,
Fb,ub,Ab);else{var Sa=m.$O(),rc=n("COLOR","u_color",1,.25,.25,!0,!0);z.Y(k,Sa);z.I(k,Fb,Sa,rc);z.I(k,Sa,ub,Ab)}z.I(k,ub,qb,n("COLOR","u_average_lum",1,1,1,!1,!1));qb.Vl=!0}else qb.Vl=!1,qb.average_luminance=T.average_luminance;z.I(k,fb,qb,n("COLOR","u_main",1,1,1,!0,!0));z.I(k,Fb,qb,Qb);for(var Rb=qb,dc=1,cb=[],oa=0;5>oa;oa++)bb=m.Hc("X_BLOOM_BLUR"),bb.Ge=a.xi.small_glow_mask_width,mc=n("COLOR","u_color",1,dc,dc,!0,!0),mc.ba=K.T,mc.fa=K.T,z.Y(k,bb),z.I(k,Rb,bb,mc),dc/=2,Ob=m.Hc("Y_BLOOM_BLUR"),Ob.Ge=
a.xi.small_glow_mask_width,nc=n("COLOR","u_color",1,dc,dc,!0,!0),nc.ba=K.T,nc.fa=K.T,z.Y(k,Ob),z.I(k,bb,Ob,nc),Rb=Ob,Ob.Sn=dc,bb.Sn=dc,cb.push(Ob,dc);var Vb=m.kP(T.blur);z.Y(k,Vb);for(oa=0;oa<cb.length;oa+=2){var Ob=cb[oa],Cc=cb[oa+1],oc=n("COLOR","u_bloom_level_"+(oa/2).toString(),1,Cc,Cc,!0,!0);oc.ba=K.T;oc.fa=K.T;z.I(k,Ob,Vb,oc)}z.I(k,fb,Vb,n("COLOR","u_main",1,1,1,!0,!0));q.push(Vb);p=q;q=[]}if(Fa&&M&&!qa){var fb=p[0],gb=L.Mc(ia,!0);b.ja.push(gb);if(d.dof_bokeh){var Rc=n("COLOR","u_color",1,1,
1,!0,!0);Rc.ba=K.T;Rc.fa=K.T;var Kc=n("DEPTH","u_depth",1,1,1,!0,!0),sc=n("COLOR","u_color",1,.5,.5,!0,!0);sc.ba=K.Me;sc.fa=K.Me;var Sb=n("COLOR","u_color",1,.5,.5,!0,!0);Sb.ba=K.Me;Sb.fa=K.Me;var Sc=n("COLOR","u_blurred1",1,.5,.5,!0,!0);Sc.ba=K.T;Sc.fa=K.T;var dd=n("COLOR","u_blurred2",1,.5,.5,!0,!0);dd.ba=K.T;dd.fa=K.T;var ed=tb[0];if(d.Jd){var Gb=L.Mc(ia,!0);b.ja.push(Gb);var Dc=m.Gz(Gb,"COC_FOREGROUND");Gb.dof_distance=d.dof_distance;Gb.dof_object=d.dof_object;Gb.dof_front_start=d.dof_front_start;
Gb.dof_front_end=d.dof_front_end;Gb.dof_rear_start=d.dof_rear_start;Gb.dof_rear_end=d.dof_rear_end;Gb.dof_power=d.dof_power;Gb.dof_bokeh=d.dof_bokeh;Gb.dof_bokeh_intensity=d.dof_bokeh_intensity;Gb.Jd=d.Jd;Gb.dof_on=!0;z.Y(k,Dc);z.I(k,fb,Dc,Rc);z.I(k,ed,Dc,Kc);var yd=m.Hc("X_ALPHA_BLUR");z.Y(k,yd);z.I(k,Dc,yd,sc);var ec=m.Hc("Y_ALPHA_BLUR");z.Y(k,ec);z.I(k,yd,ec,Sb);var db=L.Mc(ia,!0),fc=m.Gz(db,"COC_COMBINE");b.ja.push(db);db.dof_distance=d.dof_distance;db.dof_object=d.dof_object;db.dof_front_start=
d.dof_front_start;db.dof_front_end=d.dof_front_end;db.dof_rear_start=d.dof_rear_start;db.dof_rear_end=d.dof_rear_end;db.dof_power=d.dof_power;db.dof_bokeh=d.dof_bokeh;db.dof_bokeh_intensity=d.dof_bokeh_intensity;db.Jd=d.Jd;db.dof_on=!0;z.Y(k,fc);z.I(k,fb,fc,Rc);z.I(k,ed,fc,Kc);z.I(k,ec,fc,n("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else db=L.Mc(ia,!0),b.ja.push(db),fc=m.Gz(db,"COC_ALL"),db.dof_distance=d.dof_distance,db.dof_object=d.dof_object,db.dof_front_start=d.dof_front_start,db.dof_front_end=d.dof_front_end,
db.dof_rear_start=d.dof_rear_start,db.dof_rear_end=d.dof_rear_end,db.dof_power=d.dof_power,db.dof_bokeh=d.dof_bokeh,db.dof_bokeh_intensity=d.dof_bokeh_intensity,db.Jd=d.Jd,db.dof_on=!0,z.Y(k,fc),z.I(k,fb,fc,Rc),z.I(k,ed,fc,Kc);var Wb=m.Hc("X_DOF_BLUR");Wb.H.dof_bokeh_intensity=d.dof_bokeh_intensity;z.Y(k,Wb);z.I(k,fc,Wb,sc);var eb=m.Hc("Y_DOF_BLUR");eb.H.dof_bokeh_intensity=d.dof_bokeh_intensity;z.Y(k,eb);z.I(k,Wb,eb,Sb);var lb=m.Hc("Y_DOF_BLUR");lb.H.dof_bokeh_intensity=d.dof_bokeh_intensity;z.Y(k,
lb);z.I(k,Wb,lb,Sb);var gc=m.mF(gb);gb.dof_distance=d.dof_distance;gb.dof_object=d.dof_object;gb.dof_front_start=d.dof_front_start;gb.dof_front_end=d.dof_front_end;gb.dof_rear_start=d.dof_rear_start;gb.dof_rear_end=d.dof_rear_end;gb.dof_power=d.dof_power;gb.dof_bokeh=d.dof_bokeh;gb.dof_bokeh_intensity=d.dof_bokeh_intensity;gb.Jd=d.Jd;gb.dof_on=!0;q.push(gc);z.Y(k,gc);z.I(k,fb,gc,n("COLOR","u_sharp",1,1,1,!0,!0));z.I(k,eb,gc,Sc);z.I(k,lb,gc,dd)}else{var Zc=n("COLOR","u_color",1,1,1,!0,!0);Zc.ba=K.T;
Zc.fa=K.T;var hc=n("COLOR","u_color",1,1,1,!0,!0);hc.ba=K.T;hc.fa=K.T;Wb=m.Hc("X_BLUR");z.Y(k,Wb);z.I(k,fb,Wb,Zc);var $c=m.Hc("Y_BLUR");z.Y(k,$c);z.I(k,Wb,$c,hc);var $d=tb[0],gc=m.mF(gb);gb.dof_distance=d.dof_distance;gb.dof_object=d.dof_object;gb.dof_front_start=d.dof_front_start;gb.dof_front_end=d.dof_front_end;gb.dof_rear_start=d.dof_rear_start;gb.dof_rear_end=d.dof_rear_end;gb.dof_power=d.dof_power;gb.dof_bokeh=d.dof_bokeh;gb.dof_bokeh_intensity=d.dof_bokeh_intensity;gb.Jd=d.Jd;gb.dof_on=!0;q.push(gc);
z.Y(k,gc);z.I(k,fb,gc,n("COLOR","u_sharp",1,1,1,!0,!0));z.I(k,$c,gc,n("COLOR","u_blurred",1,1,1,!0,!0));z.I(k,$d,gc,n("DEPTH","u_depth",1,1,1,!0,!0))}p=q;q=[]}if(a.ai){var fd=l(m.Gg);q.push(fd);p=q;q=[]}if(S&&!qa){var Kd=p[0],ld=m.vP(Ka.mb_decay_threshold,Ka.mb_factor);q.push(ld);z.Y(k,ld);z.I(k,Kd,ld,n("COLOR","u_mb_tex_curr",1,1,1,!0,!0));ld.fb.push(n("COLOR","u_mb_tex_accum",1,1,1,!0,!0));p=q;q=[]}if(!qa&&a.outline){var fb=p[0],Ld=L.Mc(ia,!0);b.ja.push(Ld);var Qd=m.xP(Ld,E);z.Y(k,Qd);var sd=m.Hc("X_EXTEND"),
ae=n("COLOR","u_color",1,1,1,!0,!0),Zb=n("COLOR","u_outline_mask",1,1,1,!0,!0);Zb.ba=K.T;Zb.fa=K.T;sd.Nm=!0;z.Y(k,sd);z.I(k,Qd,sd,ae);var ad=n("COLOR","u_color",1,.5,.5,!0,!0);ad.ba=K.T;ad.fa=K.T;var zd=m.Hc("Y_EXTEND");zd.Nm=!0;z.Y(k,zd);z.I(k,sd,zd,ad);Wb=m.Hc("X_BLUR");Wb.Nm=!0;z.Y(k,Wb);z.I(k,zd,Wb,ad);var Rd=n("COLOR","u_color",1,.25,.25,!0,!0);Rd.ba=K.T;Rd.fa=K.T;var Ad=n("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);Ad.ba=K.T;Ad.fa=K.T;$c=m.Hc("Y_BLUR");$c.Nm=!0;z.Y(k,$c);z.I(k,Wb,$c,Rd);
var tc=m.wP(Ea);z.Y(k,tc);var Bd=n("COLOR","u_outline_src",1,1,1,!0,!0);Bd.ba=K.T;Bd.fa=K.T;z.I(k,fb,tc,Bd);z.I(k,Qd,tc,Zb);z.I(k,$c,tc,Ad);q.push(tc);p=q;q=[]}e(k,M);if((a.anaglyph_use||a.Pv||a.Gs)&&!qa){var Sd=w(k,a,b,p[0]);q.push(Sd);p=q;q=[]}if(ra&&!qa){var fb=p[0],md=m.mP(va.brightness,va.contrast,va.exposure,va.saturation),td=n("COLOR","u_color",1,1,1,!0,!0);td.ba=K.T;td.fa=K.T;(a.anaglyph_use||a.Pv||a.Gs)&&!qa&&(td.Fl=!0);z.Y(k,md);z.I(k,fb,md,td);q.push(md);p=q;q=[]}if(!p[0].bc||p[0].type==
m.bi||p[0].type==m.xt){var ud=m.Hc("NONE");z.Y(k,ud);var Cd=n("COLOR","u_color",1,1,1,!0,!0);Cd.ba=K.T;Cd.fa=K.T;z.I(k,p[0],ud,Cd);q.push(ud);p=q;q=[]}if(ta){fb=p[0];if(R.smaa){var nd=n("COLOR","u_color",1,1,1,!0,!1);nd.ba=K.T;nd.fa=K.T;var Dd=m.Jz(m.yt,a);z.Y(k,Dd);z.I(k,fb,Dd,nd);var od=m.Jz(m.kq,a);z.Y(k,od);z.I(k,Dd,od,nd);var Td=n("COLOR","u_search_tex",1,1,1,!1,!1),uc=n("COLOR","u_area_tex",1,1,1,!1,!1);Td.ba=K.T;Td.fa=K.T;uc.ba=K.T;uc.fa=K.T;od.fb.push(Td);od.fb.push(uc);var vd=m.Jz(m.zt,a);
z.Y(k,vd);z.I(k,fb,vd,nd);var Ed=n("COLOR","u_blend",1,1,1,!0,!1);Ed.ba=K.T;Ed.fa=K.T;z.I(k,od,vd,Ed);q.push(vd)}else{var vc=m.hP(a);z.Y(k,vc);var ob=n("COLOR","u_color",1,1,1,!0,!1);ob.ba=K.T;ob.fa=K.T;(a.anaglyph_use||a.Pv||a.Gs)&&!qa&&(ob.Fl=!0);z.I(k,fb,vc,ob);q.push(vc)}p=q;q=[]}q.push(p[0]);xc&&(yc?q.push(yc):q.push(xc));nb&&q.push(nb);pa=1;if(a.yx.hI){var Xd=a.yx,Md=a.Ol,wd=Md.ln,pa=wd?wd.sJ:pa,Fd=m.CP(Md,E,Xd,pa);z.Y(k,Fd);q.push(Fd);if(F.length){var Tc=m.sP(E,pa);z.Y(k,Tc);z.I(k,Fd,Tc,F[0]);
var Lc=n("CUBEMAP","u_irradiance",a.Og,1,1,!1);Lc.df=!1;Lc.ba=K.T;Lc.fa=K.T;z.I(k,Tc,Va,Lc);jb&&z.I(k,Tc,jb,Lc);pb&&z.I(k,Tc,pb,Lc);fd&&z.I(k,Tc,fd,Lc);q.push(Tc);var Uc=m.zP(E);z.Y(k,Uc);z.I(k,Fd,Uc,F[0]);var gd=n("CUBEMAP","u_cube_r_convolution",a.Og,1,1,!1);gd.df=!1;gd.ba=K.Rl;gd.fa=K.T;z.I(k,Uc,Va,gd);jb&&z.I(k,Uc,jb,gd);pb&&z.I(k,Uc,pb,gd);fd&&z.I(k,Uc,fd,gd);var pd=m.lP();z.Y(k,pd);var qd=n("COLOR","u_brdf",512,1,1,!1);qd.ba=K.T;qd.fa=K.T;z.I(k,pd,Va,qd);jb&&z.I(k,pd,jb,qd);pb&&z.I(k,pd,pb,
qd);fd&&z.I(k,pd,fd,qd)}}var Mc=m.nF();z.Y(k,Mc);for(oa=0;oa<q.length;oa++){var Bb=q[oa];switch(Bb.type){case m.Le:case m.ph:z.I(k,Bb,Mc,n("COLOR","NONE",1,1,1,wc,!1));z.I(k,Bb,Mc,n("DEPTH","NONE",1,1,1,wc,!1));break;case m.$d:z.I(k,Bb,Mc,n("CUBEMAP","u_sky",pa,1,1,!1));break;case m.pk:var Gd=n("CUBEMAP","u_irradiance",pa,1,1,!1);Gd.df=!0;Gd.ba=K.Me;Gd.fa=K.Me;z.I(k,Tc,Mc,Gd);break;case m.Fn:z.I(k,Bb,Mc,n("COLOR","NONE",1,1,1,!0,!1));break;default:if(qa){var hd=f[0],xd=n("COLOR","OFFSCREEN",1,1,1,
!0,!0);xd.Oa=hd;z.I(k,q[oa],Mc,xd);for(ka=1;ka<f.length;ka++){var Nd=f[ka],Hd=m.Hc("NONE");z.Y(k,Hd);z.I(k,q[oa],Hd,n("COLOR","SCALE",1,1,1,!0,!0));var rd=Nd.Yj/hd.Yj,xd=n("COLOR","OFFSCREEN",1,rd,rd,!0,!0);xd.Oa=Nd;z.I(k,Hd,Mc,xd)}}else z.I(k,q[oa],Mc,n("SCREEN","NONE",1,1,1,!0,!1))}}zb&&!g(k,zb).length&&(z.If(k,z.Nj(k,zb)),z.wz(k));e(k,M);c(k,M);if(Q.enabled){var Ud=r(k);Ud&&H(k,Ud)}h(k);v(k);ya&&z.ea(k,function(a,b){if(b.type==m.Yf||b.type==m.bd||b.type==m.Gg){for(var c=0,d=u(k,b),e=0,g=0;g<d.length;g++){var f=
d[g];f.type==m.wd&&(e++,b.Pj=b.Pj||[],b.Pj[0<f.zg?f.zg:c]=f.H.Ab,c++)}b.Qp&&b.Pp||(R.qw?b.jt=new Float32Array(9*e):(b.Qp=new Float32Array(4*e),b.Pp=new Float32Array(4*e)))}});if(!N.zA)for(oa=0;oa<x.length;oa++)x[oa].active=!1;return k};a.lT=function(a,b,c){var d=[];z.ea(a,function(b,c){if(-1==ra.indexOf(c.type)&&c.fb.length&&k(a,c,m.Hg))for(var e=0;e<c.fb.length;e++){var g=c.fb[e];-1==d.indexOf(g)&&d.push(g)}});z.oh(a,function(b,c,e){b=z.$a(a,b);c=z.$a(a,c);-1==ra.indexOf(b.type)&&k(a,c,m.Hg)&&-1==
d.indexOf(e)&&d.push(e)});for(var e=0;e<d.length;e++)d[e].Wj*=b,d[e].Xj*=c};a.Sd=function(a,b,c){var d=a.Ge;a.Rs[0]=b*a.Fb[0]*d;a.Rs[1]=c*a.Fb[1]*d};a.pd=function(a,b){a.Ge=b};a.XO=function(){var a=z.create(),b=m.yP(),c=L.Gc(L.rc);c.width=512;c.height=512;b.H=c;z.Y(a,b);b.fb.push(n("COLOR","u_color",512,1,1,!1,!1));c=m.nF();z.Y(a,c);z.I(a,b,c,n("COLOR","NONE",512,1,1,!1,!1));h(a);v(a);return a};a.yQ=function(a){var b=null;z.ea(a,function(a,c){return c.H&&null===c.H.Ve?(b=c,!0):!1});return b};a.Tc=
function(a,b,c){a=u(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};a.uv=function(a,b,c){a=u(a,b);b=[];for(var d=0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};a.tZ=k;a.vZ=F;a.xR=u;a.DR=g;a.Lb=function(a,b){var c=null;z.ea(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};a.OP=function(a){var b="digraph scenegraph {\n",b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',c=D(a);z.ea(a,function(a,
d){var e=b+="    ",g=m.Rx(d);if(d.H){for(var g=g+"\\n",f=0;f<c.length;f+=2){var k=d.H.Rb;c[f]==k&&(g=K.Eo(k)?g+("CR"+c[f+1]+" "):g+("C"+c[f+1]+" "))}for(f=0;f<c.length;f+=2)k=d.H.wf,c[f]==k&&(g=K.Eo(k)?g+("DR"+c[f+1]):g+("D"+c[f+1]))}d.fb.length&&(g+="\\n-----\\n");for(f=0;f<d.fb.length;f++)g+=B(d.fb[f],c);b=e+(String(a)+' [label="'+g+'" color="black" style="'+((d.type==m.qk?"dotted":d.enqueue?"solid":"dashed")+",bold")+'"];\n')});z.oh(a,function(a,d,e){b+="    ";b+=String(a)+" -> "+String(d)+' [label="'+
B(e,c)+'" style="'+(e.active?"solid":"dotted")+'"];\n'});return b+="}"};a.ZO=function(a){a=z.VV(a);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.enqueue&&b.push(d)}return b};a.lm=function(a,b,c){var d=z.Nj(a,b);z.hk(a,d,function(a,b,d){if(d.active){switch(d.from){case "COLOR":case "CUBEMAP":var e=b.H.Rb;break;case "DEPTH":e=b.H.wf;break;case "SCREEN":e=null;break;case m.ud:return;default:U.K("Wrong slink")}switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;
default:e||U.K("Connection of SCREEN is forbidden"),e.gf&&U.K("Batch texture can't use renderbuffer"),S.ME(c.yb,d.to)&&N.vh(c,e,d.to)}}});for(a=0;a<b.fb.length;a++){var d=b.fb[a],e=b.nh[a];switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;default:e.gf&&U.K("Batch texture can't use renderbuffer"),S.ME(c.yb,d.to)&&N.vh(c,e,d.to)}}}};b4w.module.__subscene=function(a,t){function e(a,b){a.Wo=b;a.Tr=new Float32Array(3*b);a.Rm=new Float32Array(4*b);a.Qm=new Float32Array(4*b)}function c(a){a={type:a,zb:"",xm:!1,rb:!1,Qw:!1,tq:!1,Po:!1,Ek:0,vf:0,Fk:[],debug_view_mode:0,debug_colors_seed:0,Gu:1,hr:!1,time:0,H:null,Ng:null,pm:[],Za:[],fb:[],nh:[],Zh:new Float32Array(3),jd:new Float32Array(3),Kd:new Float32Array(4),Af:new Float32Array(4),uf:new Float32Array(16),op:0,kg:0,Wo:0,Tr:null,Rm:null,Qm:null,dH:null,Ld:new Float32Array(3),Xd:new Float32Array(3),
pp:new Float32Array(4),Tx:new Float32Array(3),Sx:new Float32Array([0,0,1]),Ux:new Float32Array(4),np:new Float32Array(3),xx:"",du:0,an:0,ir:0,Nm:!1,Nh:new Float32Array(3),Sf:!1,Gq:0,Yh:new Float32Array(4),Wi:0,gg:!1,lj:0,hu:new Float32Array(2),kj:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,tl:new Float32Array(3),
tp:!1,qp:!1,rp:0,wp:0,vp:0,sp:0,on:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Zk:0,ep:0,ul:0,ar:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,Qp:null,Pp:null,jt:null,Pj:null,bc:!1,kv:"",Un:0,Rn:0,Tn:0,Vl:!0,average_luminance:0,Bq:0,or:0,mb_decay_threshold:0,mb_factor:0,yw:0,ns:"",ou:"",QA:new Float32Array(2),fw:0,$t:2,Sn:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,Rs:new Float32Array(2),
Fb:new Float32Array(2),sj:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,zg:0,Zr:!0,wx:!1,Ex:!1,Ax:!1,Bx:!1,Dx:!1,Cx:!1,vx:"",sn:!1,tn:!1,un:!1,$b:!0,enqueue:!0,lb:!0,tb:!0,Sc:!0,Na:!0,Ge:1};a.Fb[0]=1;a.Fb[1]=1;a.sj[2]=.5;a.sj[3]=.5;a.on=8;return a}function b(a,b){return a==b?0:a>b?1:-1}function h(a,c){return b(a.mf,c.mf)||b(a.Dj,c.Dj)||b(a.nd,c.nd)||b(a.yb.vG,c.yb.vG)||b(a.Pl,c.Pl)}var f=t("__camera"),q=t("__config"),l=t("__util"),x=t("__boundings"),y=q.Xc;
a.Hb=0;a.bd=1;a.Gg=2;a.Zd=3;a.ud=4;a.Xf=5;a.jf=6;a.Yd=7;a.wd=8;a.Yf=9;a.Zi=10;a.gc=11;a.gq=13;a.xt=14;a.Le=15;a.ph=16;a.qh=17;a.Fn=18;a.hD=19;a.At=20;a.Uy=21;a.bD=22;a.kq=23;a.yt=24;a.Sy=25;a.zt=26;a.Hy=27;a.bi=28;a.Gy=29;a.fq=30;a.rh=31;a.In=32;a.Hn=33;a.ut=34;a.$d=35;a.Iy=36;a.Hg=37;a.LUMINANCE=38;a.eD=39;a.vt=40;a.$p=41;a.vM=42;a.qk=43;a.iq=44;a.FD=45;a.pk=46;a.Jn=47;a.fD=48;a.AP=function(a,b,h,l){var d=c(8);d.ar=a;d.self_shadow_polygon_offset=h.self_shadow_polygon_offset;d.zg=b;switch(h.Ih[b]){case "SPOT":case "POINT":d.H=
f.Gc(f.Kc);f.zI(d.H,h.bJ[b],h.Nq[b],h.Mq[b]);break;default:d.H=f.Gc(f.$i)}e(d,l);return d};a.qO=function(a){var b=c(a.type);b.zb=a.zb;b.xm=a.xm;b.$b=a.$b;b.enqueue=a.enqueue;b.lb=a.lb;b.tb=a.tb;b.Sc=a.Sc;b.rb=a.rb;b.Qw=a.Qw;b.tq=a.tq;b.Po=a.Po;b.Na=a.Na;b.Ek=0;b.vf=0;b.Fk=[];b.debug_view_mode=a.debug_view_mode;b.debug_colors_seed=a.debug_colors_seed;b.Gu=a.Gu;b.hr=a.hr;b.time=a.time;b.H=f.Mc(a.H,!0);b.Ng=l.W(a.Ng);b.pm=l.W(a.pm);b.Za=l.W(a.Za);b.fb=l.W(a.fb);b.nh=l.W(a.nh);b.Zh.set(a.Zh);b.jd.set(a.jd);
b.Kd.set(a.Kd);b.Af.set(a.Af);b.uf.set(a.uf);b.op=a.op;b.kg=a.kg;b.Wo=a.Wo;b.Tr=l.W(a.Tr);b.Rm=l.W(a.Rm);b.Qm=l.W(a.Qm);b.dH=l.W(a.dH);b.Ld.set(a.Ld);b.Xd.set(a.Xd);b.pp.set(a.pp);b.Tx.set(a.Tx);b.Sx.set(a.Sx);b.Ux.set(a.Ux);b.np.set(a.np);b.xx=a.xx;b.du=a.du;b.an=a.an;b.ir=a.ir;b.Nm=a.Nm;b.Nh.set(a.Nh);b.Sf=a.Sf;b.Gq=a.Gq;b.Yh.set(a.Yh);b.Wi=a.Wi;b.gg=a.gg;b.lj=a.lj;b.hu.set(a.hu);b.kj=a.kj;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.mie_brightness=
a.mie_brightness;b.rayleigh_brightness=a.rayleigh_brightness;b.spot_brightness=a.spot_brightness;b.mie_strength=a.mie_strength;b.rayleigh_strength=a.rayleigh_strength;b.scatter_strength=a.scatter_strength;b.mie_collection_power=a.mie_collection_power;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_distribution=a.mie_distribution;b.tl.set(a.tl);b.tp=a.tp;b.qp=a.qp;b.rp=a.rp;b.wp=a.wp;b.vp=a.vp;b.sp=a.sp;b.on=a.on;b.ssao_only=a.ssao_only;b.ssao_white=a.ssao_white;b.brightness=a.brightness;
b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;b.god_rays_intensity=a.god_rays_intensity;b.Zk=a.Zk;b.ep=a.ep;b.ul=a.ul;b.ar=a.ar;b.self_shadow_polygon_offset=a.self_shadow_polygon_offset;b.self_shadow_normal_offset=a.self_shadow_normal_offset;b.Qp=l.W(a.Qp);b.Pp=l.W(a.Pp);b.jt=l.W(a.jt);b.Pj=l.W(a.Pj);b.bc=a.bc;b.kv=a.kv;b.Un=a.Un;b.Rn=a.Rn;b.Tn=a.Tn;b.Vl=a.Vl;b.average_luminance=a.average_luminance;b.Bq=a.Bq;b.or=a.or;b.mb_decay_threshold=a.mb_decay_threshold;b.mb_factor=a.mb_factor;
b.yw=a.yw;b.ns=a.ns;b.ou=a.ou;b.QA.set(a.QA);b.fw=a.fw;b.$t=a.$t;b.Sn=a.Sn;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.Ge=a.Ge;b.Rs.set(a.Rs);b.Fb.set(a.Fb);b.sj.set(a.sj);b.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);b.enable_hmd_stereo=a.enable_hmd_stereo;b.zg=a.zg;b.Zr=a.Zr;b.wx=a.wx;b.Ex=a.Ex;b.Ax=a.Ax;b.Bx=a.Bx;b.Dx=a.Dx;b.Cx=a.Cx;
b.vx=a.vx;b.sn=a.sn;b.tn=a.tn;b.un=a.un;return b};a.rP=function(){var a=c(10);a.H=f.Gc(f.th);return a};a.Hc=function(a){var b=c(11);b.lb=!1;b.tb=!1;b.Sc=!1;b.bc=!0;b.H=f.Gc(f.rc);b.ns=a;switch(a){case "NONE":b.Fb[0]=1;b.Fb[1]=1;break;case "GRAYSCALE":b.Fb[0]=1;b.Fb[1]=1;break;case "X_BLUR":b.Fb[0]=1;b.Fb[1]=0;break;case "Y_BLUR":b.Fb[0]=0;b.Fb[1]=1;break;case "X_GLOW_BLUR":b.Fb[0]=1;b.Fb[1]=0;break;case "Y_GLOW_BLUR":b.Fb[0]=0;b.Fb[1]=1;break;case "X_BLOOM_BLUR":b.Fb[0]=1;b.Fb[1]=0;break;case "Y_BLOOM_BLUR":b.Fb[0]=
0;b.Fb[1]=1;break;case "X_DOF_BLUR":b.Fb[0]=1;b.Fb[1]=1;break;case "Y_DOF_BLUR":b.Fb[0]=1;b.Fb[1]=1;break;case "X_ALPHA_BLUR":b.Fb[0]=1;b.Fb[1]=0;b.Ge=3;break;case "Y_ALPHA_BLUR":b.Fb[0]=0;b.Fb[1]=1;b.Ge=3;break;case "X_EXTEND":b.Fb[0]=1;b.Fb[1]=0;break;case "Y_EXTEND":b.Fb[0]=0;b.Fb[1]=1;break;default:l.K("Wrong postprocessing effect: "+a)}return b};a.pP=function(a,b){var d=c(13);d.lb=!1;d.tb=!1;d.Sc=!1;d.small_glow_mask_coeff=b.xi.small_glow_mask_coeff;d.large_glow_mask_coeff=b.xi.large_glow_mask_coeff;
d.small_glow_mask_width=b.xi.small_glow_mask_width;d.large_glow_mask_width=b.xi.large_glow_mask_width;d.H=a;d.bc=!0;return d};a.om=function(a,b,f,h,q,y,w,n,x){var d=c(a);0==a?(d.lb=!0,d.tb=f,d.rb=!1):1==a?(d.lb=!1,d.tb=!1,d.rb=!0):2==a?(d.lb=!1,d.tb=!0,d.rb=!0):3==a||4==a?(d.lb=!0,d.tb=!0,d.rb=!1):5==a||6==a?(d.lb=!1,d.tb=!1,d.rb=!0):7==a?(d.lb=!0,d.tb=!1,d.rb=!0):l.K("wrong main subscene type");d.rb&&n&&(d.self_shadow_normal_offset=n.self_shadow_normal_offset);d.H=b;if(a=w.ln)d.pp.set([a.rE,a.AG,
a.sK,a.rK]),d.np.set(a.color),d.op=a.Ia;d.Ld.set(w.Ld);d.Xd.set(w.Xd);d.kg=w.kg;d.Kd=y.Kd;d.Af=y.Af;h&&(h.Kd&&d.Yh.set(h.Kd),d.Wi=h.Wi,h.gg&&x&&(d.gg=!0,d.lj=h.ON,d.kj=h.NN,d.hu.set(h.PN)));e(d,q);return d};a.$q=function(){var a=c(14);a.bc=!0;a.H=f.Gc(f.rc);return a};a.lF=function(a,b,f){var d=c(15);b&&(d.type=16,d.lb=!1,d.tb=!0);d.enqueue=!1;d.H=a;e(d,f);return d};a.nP=function(a){var b=c(17);b.$b=!1;b.lb=!1;b.tb=!1;b.H=a;return b};a.iP=function(a){var b=c(18);b.lb=!0;b.tb=!1;b.H=a;return b};a.BP=
function(a,b){var d=c(9);d.H=a;e(d,b);return d};a.oP=function(a){var b=c(19);b.lb=!1;b.tb=!1;b.H=a;b.bc=!0;return b};a.DP=function(a,b,e){var d=c(20);d.lb=!1;d.tb=!1;d.Sc=!1;d.H=a;d.Kd=b.Kd;d.Yh.set(b.Kd);d.wp=e.radius_increase;d.tp=e.UR;d.vp=e.influence;d.sp=e.dist_factor;d.on=e.zU;d.bc=!0;return d};a.EP=function(a,b){var d=c(21);d.lb=!1;d.tb=!1;d.Sc=!1;d.H=a;d.qp=b.vN;d.rp=b.blur_discard_value;d.bc=!0;return d};a.hP=function(a){var b=c(22);b.lb=!1;b.tb=!1;b.Sc=!1;b.Ge=1/a.fp;b.kv=a.SD;b.H=f.Gc(f.rc);
b.bc=!0;return b};a.Jz=function(a,b){var d=c(a);d.lb=23==a||24==a?!0:!1;d.tb=!1;d.Sc=!1;d.Ge=1/b.fp;d.H=f.Gc(f.rc);23==a&&(d.tS=new Float32Array(4));d.bc=!0;return d};a.mP=function(a,b,e,h){var d=c(27);d.lb=!1;d.tb=!1;d.Sc=!1;d.H=f.Gc(f.rc);d.brightness=a;d.contrast=b;d.exposure=e;d.saturation=h;d.bc=!0;return d};a.vP=function(a,b){var d=c(28);d.lb=!1;d.tb=!1;d.Sc=!1;d.H=f.Gc(f.rc);d.tq=!0;d.mb_decay_threshold=a;d.mb_factor=b;d.bc=!0;return d};a.Gz=function(a,b){var d=c(29);d.lb=!1;d.tb=!1;d.Sc=!1;
d.H=a;d.Ge=d.H.dof_power;d.ou=b;d.bc=!0;return d};a.mF=function(a){var b=c(30);b.lb=!1;b.tb=!1;b.Sc=!1;b.H=a;b.Ge=b.H.dof_power;b.bc=!0;return b};a.xP=function(a,b){var d=c(31);d.Sc=!1;d.H=a;e(d,b);return d};a.wP=function(a){var b=c(32);y.outlining_overview_mode?b.Nh.set(y.Nh):b.Nh.set(a.Nh);b.an=a.an;b.or=5;b.Bq=3;b.Sc=!1;b.H=f.Gc(f.rc);b.bc=!0;return b};a.Iz=function(a,b,f,h,l,q,w){var d=c(33);d.lb=!1;d.tb=!1;d.Sc=!1;d.Ld=new Float32Array([1,1,1]);d.Xd=new Float32Array([1,1,1]);d.kg=1;d.Qw=h;d.Sf=
b;d.ep=l;d.Zk=f;d.ul=w;d.H=a;e(d,q);return d};a.qP=function(a,b){var d=c(34);d.lb=!1;d.tb=!1;d.Sc=!1;d.H=f.Gc(f.rc);d.god_rays_intensity=a;e(d,b);d.bc=!0;return d};a.CP=function(a,b,h,r){var d=c(35);d.enqueue=!1;d.lb=!1;d.tb=!1;d.Sc=!1;var p=f.Gc(f.rc);p.width=r;p.height=r;d.H=p;d.Ng=l.eA();e(d,b);d.Ld=new Float32Array([1,1,1]);d.Xd=new Float32Array([1,1,1]);d.kg=1;d.tl.set(h.tl);d.procedural_skydome=h.procedural_skydome;d.use_as_environment_lighting=h.use_as_environment_lighting;d.rayleigh_brightness=
h.rayleigh_brightness;d.mie_brightness=h.mie_brightness;d.spot_brightness=h.spot_brightness;d.scatter_strength=h.scatter_strength;d.rayleigh_strength=h.rayleigh_strength;d.mie_strength=h.mie_strength;d.rayleigh_collection_power=h.rayleigh_collection_power;d.mie_collection_power=h.mie_collection_power;d.mie_distribution=h.mie_distribution;if(a){d.Ld.set(a.Ld);d.Xd.set(a.Xd);d.kg=a.kg;if(b=a.ln)d.pp.set([b.rE,b.AG,b.sK,b.rK]),d.np.set(b.color),d.op=b.Ia,d.wx=b.invert,d.Ex=b.XJ,d.Ax=b.SJ,d.Bx=b.TJ,d.Dx=
b.VJ,d.Cx=b.UJ,d.vx=b.sE;d.sn=a.sn;d.tn=a.tn;d.un=a.un;d.xx=a.ie}return d};a.sP=function(a,b){var d=c(46);d.enqueue=!1;d.lb=!1;d.tb=!1;d.Sc=!1;var h=f.Gc(f.rc);h.width=b;h.height=b;d.H=h;d.Ng=l.eA();e(d,a);return d};a.zP=function(a){var b=c(47);b.enqueue=!1;b.lb=!1;b.tb=!1;b.Sc=!1;var h=f.Gc(f.rc);h.width=128;h.height=128;b.H=h;b.Ng=l.eA();e(b,a);return b};a.lP=function(){var a=c(48);a.enqueue=!1;a.lb=!1;a.tb=!1;a.Sc=!1;var b=f.Gc(f.rc);b.width=512;b.height=512;a.H=b;return a};a.Hz=function(){var a=
c(36);a.lb=!1;a.tb=!1;a.H=f.Gc(f.rc);a.bc=!0;return a};a.FP=function(a,b){var d=c(37);d.lb=!1;d.tb=!1;d.zb=a?"HMD":b?"ANAGLYPH":"SIDEBYSIDE";d.H=f.Gc(f.rc);d.bc=!0;return d};a.tP=function(){var a=c(38);a.lb=!1;a.tb=!1;a.H=f.Gc(f.rc);a.bc=!0;return a};a.jP=function(){var a=c(39);a.lb=!1;a.tb=!1;a.H=f.Gc(f.rc);a.bc=!0;return a};a.$O=function(){var a=c(45);a.lb=!1;a.tb=!1;a.H=f.Gc(f.rc);a.bc=!0;return a};a.uP=function(a,b,f,h){var d=c(40);d.lb=!1;d.tb=!1;d.Un=a;d.Tn=b;d.H=h;e(d,f);d.bc=!0;return d};
a.kP=function(a){var b=c(41);b.lb=!1;b.tb=!1;b.H=f.Gc(f.rc);b.Rn=a;b.$t=5;b.bc=!0;return b};a.MY=function(a){var b=c(42);b.lb=!1;b.tb=!1;b.H=a;b.bc=!0;return b};a.nF=function(){var a=c(43);a.enqueue=!1;return a};a.yP=function(){var a=c(44);a.bc=!0;return a};a.Rx=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";
case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.ns.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";
case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";
case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};a.Rc=function(a,b){for(var c=b.Aa,d=c.yb,e=c.mf,f=0;f<a.Za.length;f++){var h=a.Za[f].La,l=h.indexOf(b);if(-1!=l&&(h.splice(l,1),!h.length)){a.Za.splice(f,1);break}}f=a.rb?c.nd:0;a:{h=a.Za;for(l=0;l<h.length;l++){var p=h[l];if(p.yb==d&&p.mf==e&&p.nd==f&&p.Dj==c.Dj){h=p;break a}}h=null}h?h.La.push(b):(a.Za.push({yb:d,La:[b],
mf:e,nd:f,Dj:c.Dj,$b:!0,Pl:Infinity}),a.Zr=!0)};a.Ai=function(a,b,c){b={$b:!0,Tz:[!0,!0,!0,!0,!0,!0],ug:b,Aa:a,rt:c||null,Sv:null,Pl:Infinity};a.hf&&a.ra.fe&&(c=a.ra.fe,b.Sv={gT:new Float32Array(c.length),hT:new Float32Array(c.length),XP:new Float32Array(c.length/3),tK:new Float32Array(3),oN:x.GN(a.sb.Oe)});return b};a.xV=function(a){a.Za.sort(h);a.Zr=!1}};b4w.module.__texcomp=function(a,t){function e(a,b,c,e){var d=new Int32Array(c,0,31),p,r,n,q,k,v;if(542327876!=d[0])return f.error("Invalid magic number in DDS header"),0;if(!d[20]&4)return f.error("Unsupported format, must contain a FourCC code"),0;p=d[21];switch(p){case l:r=8;n=b?b.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case x:r=16;n=b?b.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case y:r=16;n=b?b.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return f.error("Unsupported FourCC code:",h(p)),null}v=
1;d[2]&131072&&!1!==e&&(v=Math.max(1,d[7]));q=d[4];k=d[3];d=d[1]+4;if(b)for(p=0;p<v;++p)e=Math.max(4,q)/4*Math.max(4,k)/4*r,b=new Uint8Array(c,d,e),a.compressedTexImage2D(a.TEXTURE_2D,p,n,q,k,0,b),d+=e,q=Math.max(.5*q,1),k=Math.max(.5*k,1);else if(p==l){c=b=new Uint16Array(c);r=d/2;n=q;d=new Uint16Array(4);b=new Uint16Array(n*k);for(var u,g,D,B,t,L,A=n/4,G=k/4,z=0;z<G;z++)for(var I=0;I<A;I++)p=r+4*(z*A+I),d[0]=c[p],d[1]=c[p+1],u=d[0]&31,g=d[0]&2016,D=d[0]&63488,B=d[1]&31,t=d[1]&2016,L=d[1]&63488,
d[2]=5*u+3*B>>3|5*g+3*t>>3&2016|5*D+3*L>>3&63488,d[3]=5*B+3*u>>3|5*t+3*g>>3&2016|5*L+3*D>>3&63488,u=c[p+2],g=4*z*n+4*I,b[g]=d[u&3],b[g+1]=d[u>>2&3],b[g+2]=d[u>>4&3],b[g+3]=d[u>>6&3],g+=n,b[g]=d[u>>8&3],b[g+1]=d[u>>10&3],b[g+2]=d[u>>12&3],b[g+3]=d[u>>14],u=c[p+3],g+=n,b[g]=d[u&3],b[g+1]=d[u>>2&3],b[g+2]=d[u>>4&3],b[g+3]=d[u>>6&3],g+=n,b[g]=d[u>>8&3],b[g+1]=d[u>>10&3],b[g+2]=d[u>>12&3],b[g+3]=d[u>>14];a.texImage2D(a.TEXTURE_2D,0,a.RGB,q,k,0,a.RGB,a.UNSIGNED_SHORT_5_6_5,b);e&&a.generateMipmap(a.TEXTURE_2D)}else return f.error("No manual decoder for",
h(p),"and no native support"),0;return v}function c(a,b,c,f,h){var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=function(){if(200==d.status){a.bindTexture(a.TEXTURE_2D,f);var c=e(a,b,d.response,!0);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<c?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}h&&h(f)};d.send(null)}function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}
function h(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var f=t("__print"),q=t("__util"),l=b("DXT1"),x=b("DXT3"),y=b("DXT5");a.PW=e;a.QW=function(a,b,c){var d=new Uint32Array(c,0,13);if(55727696==d[0]){var e=d[7],f=d[6],h=d[11],l=52+d[12];switch(d[2]){case 0:var p=2,k=1;break;case 1:p=2;k=3;break;case 2:p=4;k=0;break;case 3:p=4;k=2;break;default:q.K("Unsupported PVR V3 format.")}}else if(559044176==d[11]){e=d[2];f=d[1];h=d[3];l=d[0];h++;var v=d[4]&255,d=0<d[10];25==v?(p=4,k=d?
2:0):24==v?(p=2,k=d?3:1):q.K("Unsupported PVR V2 format.")}else q.K("Unsupported PVR version.");v=2==p?8:4;d=4;switch(k){case 0:var u=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:u=b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:u=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:u=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=v*d*p/8;for(p=0;p<h;p++){var k=Math.max(e>>p,1),g=Math.max(f>>p,1),D=k/v,y=g/d;2>D&&(D=2);2>y&&(y=2);D=D*y*b;y=new Uint8Array(c,l,D);a.compressedTexImage2D(a.TEXTURE_2D,p,u,k,g,0,y);
l+=D}};a.rG=function(a,b){switch(b){case "dds":var c=new Int32Array(a,0,31);return{width:c[4],height:c[3]};case "pvr":c=new Uint32Array(a,0,13);if(55727696==c[0])var d=c[7],c=c[6];else d=c[2],c=c[1];return{width:d,height:c}}};a.eR=function(a,b){var c=1;if("dds"==b){var d=new Int32Array(a,0,31),e=d[21];switch(e){case l:c=6;break;case x:case y:c=4;break;default:f.error("Unsupported FourCC code:",h(e))}}else if("pvr"==b)if(d=new Uint32Array(a,0,13),55727696==d[0])switch(d[2]){case 0:c=12;break;case 1:c=
16;break;case 2:c=6;break;case 3:c=8}else e=d[4]&255,d=0<d[10],25==e?c=d?8:6:24==e&&(c=d?16:12);return c};a.QZ=function(a,b,e,f){var d=a.createTexture();c(a,b,e,d,f);return d}};b4w.module.__textures=function(a,t){function e(){la||(la=J.createFramebuffer());return la}function c(){Ca||(Ca=J.createTexture());return Ca}function b(){return{type:0,source:"",Ks:"",width:0,height:0,Uq:1,anisotropic_filtering:0,Yj:1024,Hk:!1,Lg:null,pb:0,Bb:null,gf:null,Ci:!1,Yp:-1,hb:null,lt:"",$k:0,Dh:0,Ba:0,hc:0,Kk:0,eh:!1,Th:1,df:!1,yH:0,Gd:null,Cs:0,Bs:0,Vj:-1,Es:!1,ql:-1,mt:!1,RC:!1,ik:!1,Il:!1,repeat:!0,Pk:"",Ao:"",Gm:"",EA:"",DA:"",Ok:""}}function h(a,b,c){a.Gm=b.uuid;a.Ao=b.filepath;a.EA=
b.source;a.DA=b.name;a.Pk=aa.Ii(c+b.filepath);a.Ok=b.Ig;-1==V.ma.indexOf(a)&&(V.ma.push(a),V.Ko.push(!1))}function f(a,b,c){var d=-1<b.indexOf(".pvr");a.Ok=-1<b.indexOf(".dds")?"dds":d?"pvr":"";a.Ao=b;a.Pk=c;a.Gm=aa.mv();V.ma.push(a);V.Ko.push(!0)}function q(c,d,e){var g=b();g.type=c;g.source="NONE";g.df=e;if(c==a.Dt||c==a.Bt||c==a.Et||c==a.Ct)g.gf=J.createRenderbuffer();else{var f=J.TEXTURE_2D,h=J.createTexture();J.bindTexture(f,h);J.texParameteri(f,J.TEXTURE_MAG_FILTER,J.LINEAR);e?J.texParameteri(f,
J.TEXTURE_MIN_FILTER,La[ua.ck]):J.texParameteri(f,J.TEXTURE_MIN_FILTER,J.LINEAR);J.texParameteri(f,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(f,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);e=n(g);var k=C(g),l=F(g);J.texImage2D(f,0,k,1,1,0,e,l,c==a.Sl?null:new Uint8Array([204,204,204,255]));ua.Sq&&d&&J.texParameterf(f,J.TEXTURE_COMPARE_MODE,J.COMPARE_REF_TO_TEXTURE);J.bindTexture(f,null);g.pb=f;g.Bb=h}return g}function l(a){var b=a.pb;J.bindTexture(b,a.Bb);var c=n(a),d=C(a),e=F(a),g=a.Lg.canvas;J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,
!0);J.texImage2D(b,0,d,c,e,g);J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,!1);a.Hk&&J.generateMipmap(b);J.bindTexture(b,null);a.width=g.width;a.height=g.height}function x(a){var b=a.pb;J.bindTexture(b,a.Bb);J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,!0);4!=a.hb.length?a.eh?d(a,a.hb,a.width*a.Th,a.height*a.Th,!1):J.texImage2D(b,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,a.hb):J.texImage2D(b,0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,a.hb);J.bindTexture(b,null)}function y(a){var b=a.pb;J.bindTexture(b,a.Bb);J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,
!0);a.eh?d(a,a.Gd[a.Vj],a.width*a.Th,a.height*a.Th,!1):J.texImage2D(b,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,a.Gd[a.Vj]);J.bindTexture(b,null)}function p(){ca||(ca=document.createElement("canvas"));return ca}function d(a,b,d,g,f){f||(r(J.TEXTURE_2D),J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,b));J.bindTexture(J.TEXTURE_2D,null);b=e();f=c();fa.aQ(a,d,g,b,f)}function v(a,b,c){for(var d=0;6>d;d++){var e=Ua[d],g=Ia[d],f=p();f.width=c;f.height=c;var h=f.getContext("2d");h.translate(c/2,c/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==
e?(h.rotate(Math.PI/2),h.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==e?(h.rotate(Math.PI/2),h.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==e||"TEXTURE_CUBE_MAP_POSITIVE_Z"==e?h.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=e&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=e||h.scale(-1,1);h.drawImage(a,g[0]*b,g[1]*b,b,b,-c/2,-c/2,c,c);ua.sF?J.texImage2D(J[e],0,J.RGBA,c,c,0,J.RGBA,J.UNSIGNED_BYTE,new Uint8Array(h.getImageData(0,0,c,c).data.buffer)):J.texImage2D(J[e],0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,f)}}function r(a){J.bindTexture(a,
null);var b=c();J.bindTexture(a,b);J.texParameteri(a,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(a,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);J.texParameteri(a,J.TEXTURE_MAG_FILTER,J.LINEAR);J.texParameteri(a,J.TEXTURE_MIN_FILTER,J.LINEAR)}function H(a,b,g){var f=a.source,h=a.Bb,k=a.pb,l=a.Ok,m=a.Ao,n;J.bindTexture(k,h);a.repeat?(J.texParameteri(k,J.TEXTURE_WRAP_S,J.REPEAT),J.texParameteri(k,J.TEXTURE_WRAP_T,J.REPEAT)):(J.texParameteri(k,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(k,J.TEXTURE_WRAP_T,
J.CLAMP_TO_EDGE));a.Ci||"NODE_TEX"==f?J.texParameteri(k,J.TEXTURE_MIN_FILTER,J.LINEAR):J.texParameteri(k,J.TEXTURE_MIN_FILTER,La[ua.ck]);a.anisotropic_filtering&&J.texParameterf(k,pa.iA().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(n=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==f)if(n)J.texImage2D(k,0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(l){n=ia.rG(b,l);g=aa.Lq(n.width)||aa.Lq(n.height);if(n.width>ba.dc||n.height>ba.dc){Z.error('Image "'+
m+'" has unsupported size: '+n.width+"x"+n.height+". Max available: "+ba.dc+"x"+ba.dc+".");return}f=n.width;n=n.height;if(g||"pvr"==l)a.eh=!0,r(k),f=w(f*a.Th),n=w(n*a.Th);"dds"==l?ia.PW(J,pa.lG(),b,!0):"pvr"==l&&ia.QW(J,pa.kG(),b);a.eh&&(d(a,null,f,n,!0),J.bindTexture(k,h),J.generateMipmap(k));a.width=f;a.height=n;a.Uq=ia.eR(b,l)}else{J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,!0);a.Ci?ua.Ds?(f=b[0].width,n=b[0].height):(f=b.videoWidth,n=b.videoHeight):(f=b.width,n=b.height);a.width=f;a.height=n;if(f>ba.dc||
n>ba.dc)Z.warn('Image "'+m+'" has unsupported size: '+f+"x"+n+". Max available: "+ba.dc+"x"+ba.dc+". Reduced image size will be used."),a.Th=Math.min(ba.dc/f,ba.dc/n),a.eh=!0;a.Ci&&(g in xa||(xa[g]={}),xa[g][a.lt]=a,ua.Ds?(a.Gd=b,a.Cs=b.length,a.Dh=a.Bs*a.$k/b.length,b=b[0]):(a.hb=b,a.hb.loop=a.ik,a.Dh=b.duration?a.$k/b.duration:ma.Cd(),ja.AF||(b.playbackRate=ma.Cd()/a.Dh,ja.RE&&2<b.playbackRate&&(b.playbackRate=2)),E(a)));f=w(a.width*a.Th);n=w(a.height*a.Th);a.eh||ua.kI?(m=p(),l=m.getContext("2d"),
m.width=f,m.height=n,l.drawImage(b,0,0,a.width,a.height,0,0,f,n),ua.sF?J.texImage2D(k,0,J.RGBA,f,n,0,J.RGBA,J.UNSIGNED_BYTE,new Uint8Array(l.getImageData(0,0,f,n).data.buffer)):J.texImage2D(k,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,m)):ua.Gb||!aa.Lq(a.width)&&!aa.Lq(a.height)?J.texImage2D(k,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,b):(d(a,b,f,n,!1),a.eh=!0);a.width=f;a.height=n;a.Ci||(J.bindTexture(k,h),J.generateMipmap(k))}else if("ENVIRONMENT_MAP"==f)if(n){for(h=0;6>h;h++)J.texImage2D(J["TEXTURE_CUBE_MAP_"+Ua[h]],
0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){Z.error('Cubemap Image "'+m+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}h=b.width/3;h>ba.rg?(Z.warn('Cubemap Image "'+m+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*ba.rg+"x"+2*ba.rg+". Reduced image size will be used."),m=w(ba.rg/h*h),a.eh=!0):(m=w(h),!ua.Gb&&
(3*m>ba.dc||2*m>ba.dc)&&(a.eh=!0));if(a.eh||ua.xs)v(b,h,m);else{l=b;f=m;r(J.TEXTURE_2D);J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,l);J.bindTexture(J.TEXTURE_2D,null);for(l=0;6>l;l++)J.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,J.RGBA,f,f,0,J.RGBA,J.UNSIGNED_BYTE,null);J.bindTexture(a.pb,null);l=e();J.bindFramebuffer(J.FRAMEBUFFER,l);n=c();for(l=0;6>l;l++)fa.$P(a,J[Ua[l]],f,h,n,l);J.bindFramebuffer(J.FRAMEBUFFER,null);J.bindTexture(a.pb,a.Bb);J.texParameteri(a.pb,J.TEXTURE_MIN_FILTER,
La[ua.ck]);J.texParameteri(a.pb,J.TEXTURE_MAG_FILTER,J.LINEAR)}ha.ZN()&&(Z.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),v(b,h,ra.AD));a.width=3*m;a.height=2*m;J.generateMipmap(k)}else"NODE_TEX"==f&&(J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,!1),J.texImage2D(k,0,J.RGBA,b.width,b.height,0,J.RGBA,J.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);J.bindTexture(k,null)}function E(a){a.hb.oncanplay=function(){N(a)&&x(a)}}function w(a){return aa.Lq(a)?aa.clamp(Math.pow(2,
(a|0).toString(2).length),2,ba.dc):a}function n(b){var c;switch(b.type){case a.sh:c=J.RGBA;break;case a.Ft:c=J.RGB;break;case a.lq:c=J.RGBA;break;case a.mq:c=J.RGB;break;case a.Sl:c=J.DEPTH_COMPONENT;break;default:aa.K("Wrong texture type")}return c}function C(b){var c;switch(b.type){case a.sh:c=ua.Gb?J.RGBA8:J.RGBA;break;case a.Ft:c=ua.Gb?J.RGB8:J.RGB;break;case a.lq:c=ua.Gb?J.RGBA8:J.RGBA;break;case a.mq:c=ua.Gb?J.RGB8:J.RGB;break;case a.Sl:c=ua.Gb?k(ba.eo):J.DEPTH_COMPONENT;break;default:aa.K("Wrong texture type")}return c}
function k(a){switch(a){case 16:a=J.DEPTH_COMPONENT16;break;case 24:a=J.DEPTH_COMPONENT24;break;case 32:a=J.DEPTH_COMPONENT32F;break;default:a=J.DEPTH_COMPONENT24}return a}function F(b){var c;switch(b.type){case a.sh:c=J.UNSIGNED_BYTE;break;case a.Ft:c=J.UNSIGNED_BYTE;break;case a.lq:c=J.FLOAT;break;case a.mq:c=J.FLOAT;break;case a.Sl:c=J.UNSIGNED_INT;break;default:aa.K("Wrong texture type")}return c}function u(a){a.hb?a.hb.play():a.Gd&&(a.Es=!0);a.mt=!1}function g(a){a.hb?a.hb.pause():a.Gd&&(a.Es=
!1);a.mt=!0}function D(a){a.hb?a.hb.currentTime=a.hc/a.Dh:a.Gd&&(a.Vj=L(a,a.hc),y(a))}function B(a){return a.hb?!a.hb.paused:a.Gd?a.Es:!1}function N(a){return a.hb||a.Gd?a.hb?2<=a.hb.readyState:!0:0}function L(a,b){return Math.round(b*a.Cs/a.$k)}function A(a,b){if(da.is_dynamic(a))return z(a,b);for(var c=a.Wr,d=0;d<c.length;d++){var e=z(c[d],b);if(e)return e}return null}function G(a,b,c){if(da.is_dynamic(a))I(a,b,c);else{a=a.Wr;for(var d=0;d<a.length;d++)I(a[d],b,c)}}function z(a,b){var c=a.S;if(c.length)for(var c=
c[0].$,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type||"SKY"==e.type)for(var g=0;g<e.ma.length;g++)if(e.rf[g]==b)return e.ma[g]}return null}function I(a,b,c){a=a.S;if(a.length){a=a[0].$;for(var d=0;d<a.length;d++){var e=a[d];if("MAIN"==e.type)for(var g=0;g<e.ma.length;g++)if(e.rf[g]==b){var f=e.ma[g];e.ma[g]=c;Q(f)}}}}function S(a,b){var c=a.S;if(c.length)for(var c=c[0].$,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type)for(var g=0;g<e.ma.length;g++){var f=e.ma[g],h=e.rf[g];-1==b.indexOf(h)&&"NODE_TEX"!=
f.source&&b.push(h)}}}function m(a,b,c){var d=a.elements;a=a.interpolation;for(var e=0;e<b;e++){var g=e/(b-1),f=K(d,g,!0),h=U(d,g,!0);if(f&&h)if("CONSTANT"==a)c.push.apply(c,f.color);else{var k=c,l=f,m=h;l==m?k.push.apply(k,l.color):(k.push(W.jw(m.color[0],m.position,l.color[0],l.position,g)),k.push(W.jw(m.color[1],m.position,l.color[1],l.position,g)),k.push(W.jw(m.color[2],m.position,l.color[2],l.position,g)),k.push(W.jw(m.color[3],m.position,l.color[3],l.position,g)))}h&&!f&&c.push.apply(c,h.color);
f&&!h&&c.push.apply(c,f.color)}}function K(a,b,c){for(var d=null,e=0;e<a.length;e++){var g=c?b-a[e].position:b-a[e][1][0];0<=g&&(d?g<=(c?b-d.position:b-a[e][1][0])&&(d=a[e]):d=a[e])}return d}function U(a,b,c){for(var d=null,e=0;e<a.length;e++){var g=c?a[e].position-b:a[e][1][0]-b;0<=g&&(d?g<=(c?d.position-b:d[1][0]-b)&&(d=a[e]):d=a[e])}return d}function Q(a){var b;if(!(b=ua.enable_texture_cache))a:{b=wa.get_all_objects("ALL",wa.DATA_ID_ALL);for(var c=0;c<b.length;c++){var d=b[c];if(R(d,a)){b=!0;break a}for(var d=
d.Wr,e=0;e<d.length;e++)if(R(d[e],a)){b=!0;break a}}b=!1}b||(a.Bb&&J.deleteTexture(a.Bb),a=V.ma.indexOf(a),-1!=a&&(V.ma.splice(a,1),V.Ko.splice(a,1)))}function R(a,b){for(var c=0;c<a.S.length;c++)for(var d=a.S[c].$,e=0;e<d.length;e++)for(var g=d[e].ma,f=0;f<g.length;f++)if(g[f]==b)return!0}function ga(a,b){for(var c=0;c<V.ma.length;c++){var d=V.ma[c];if(d.Pk==a&&d.type==b.type&&d.source==b.source&&d.repeat==b.repeat&&d.anisotropic_filtering==b.anisotropic_filtering&&d.Il==b.Il)return d}return null}
var ra=t("__compat"),T=t("__config"),ia=t("__texcomp"),ha=t("__debug"),pa=t("__extensions"),Z=t("__print"),ma=t("__time"),aa=t("__util"),fa=t("__renderer"),wa=t("__objects"),da=t("__obj_util"),W=t("__curve"),Ga=t("__vec3"),O=t("__scenes"),ua=T.L,ba=T.zh,ja=T.ka,ca=null,Ca=null,la=null;a.Me=0;a.T=0;a.uM=0;a.sM=0;a.tM=0;a.Rl=0;a.sh=10;a.Ft=20;a.lq=30;a.mq=40;a.Sl=50;a.Dt=60;a.Bt=70;a.Et=80;a.Ct=90;a.gD=128;a.uK=128;a.ED=128;var V={ma:[],Ko:[]},sa={},xa={},J=null,La,Ua="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),
Ia=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.yg=function(b){La=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.Me=b.NEAREST;a.T=b.LINEAR;a.uM=b.NEAREST_MIPMAP_NEAREST;a.sM=b.LINEAR_MIPMAP_NEAREST;a.tM=b.NEAREST_MIPMAP_LINEAR;a.Rl=b.LINEAR_MIPMAP_LINEAR;J=b};a.gZ=function(a,b){return b in sa&&a in sa[b]?sa[b][a].Lg:null};a.z_=function(a,b){return b in sa&&a in sa[b]?(l(sa[b][a]),!0):!1};a.ZD=h;a.Ck=q;a.JO=function(c,d){var e=J.createTexture(),g=J.TEXTURE_CUBE_MAP;
J.bindTexture(g,e);J.texParameteri(g,J.TEXTURE_MAG_FILTER,J.LINEAR);d?J.texParameteri(g,J.TEXTURE_MIN_FILTER,La[ua.ck]):J.texParameteri(g,J.TEXTURE_MIN_FILTER,J.LINEAR);J.texParameteri(g,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(g,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);for(var f=0;6>f;f++)J.texImage2D(J[Ua[f]],0,J.RGBA,c,c,0,J.RGBA,J.UNSIGNED_BYTE,null);J.bindTexture(g,null);g=b();g.type=a.sh;g.source="NONE";g.width=3*c;g.height=2*c;g.Uq=1;g.df=d;g.Bb=e;g.pb=J.TEXTURE_CUBE_MAP;return g};a.kx=function(a,
b){var c=a.pb;J.bindTexture(c,a.Bb);for(var d=0;6>d;d++)J.texImage2D(J[Ua[d]],0,J.RGBA,b,b,0,J.RGBA,J.UNSIGNED_BYTE,null);J.bindTexture(c,null);a.width=3*b;a.height=2*b};a.dC=function(a,b,c){var d=a.pb;J.bindTexture(d,a.Bb);b&&J.texParameteri(d,J.TEXTURE_MIN_FILTER,b);c&&J.texParameteri(d,J.TEXTURE_MAG_FILTER,c);J.bindTexture(d,null)};a.resize=function(b,c,d){c=Math.max(c,1);d=Math.max(d,1);if(b.width!=c||b.height!=d){switch(b.type){case a.Dt:J.bindRenderbuffer(J.RENDERBUFFER,b.gf);J.renderbufferStorage(J.RENDERBUFFER,
J.RGB565,c,d);J.bindRenderbuffer(J.RENDERBUFFER,null);break;case a.Bt:J.bindRenderbuffer(J.RENDERBUFFER,b.gf);J.renderbufferStorage(J.RENDERBUFFER,k(ba.eo),c,d);J.bindRenderbuffer(J.RENDERBUFFER,null);break;case a.Et:J.bindRenderbuffer(J.RENDERBUFFER,b.gf);J.renderbufferStorageMultisample(J.RENDERBUFFER,ua.ec,J.RGBA8,c,d);J.bindRenderbuffer(J.RENDERBUFFER,null);break;case a.Ct:J.bindRenderbuffer(J.RENDERBUFFER,b.gf);J.renderbufferStorageMultisample(J.RENDERBUFFER,ua.ec,k(ba.eo),c,d);J.bindRenderbuffer(J.RENDERBUFFER,
null);break;default:var e=b.pb;J.bindTexture(e,b.Bb);var g=n(b),f=C(b),h=F(b);b.df&&(ua.Gb||(d=Math.max(c,d),c=w(d),d=w(d)),b.yH=Math.round(Math.log(Math.max(c,d))/Math.log(2)+.5));J.texImage2D(e,0,f,c,d,0,g,h,null);J.bindTexture(e,null)}c>ba.dc||d>ba.dc?aa.K('Slink texture "'+b.type+'" has unsupported size: '+c+"x"+d+". Max available: "+ba.dc+"x"+ba.dc+"."):(b.width=c,b.height=d)}};a.GP=function(c,d,e,g,f){var k=c.type;if("BLEND"==k)return null;var m=c.image,n=b();n.type=a.sh;n.width=1;n.height=
1;if(ua.bz){var p=c.b4w_anisotropic_filtering;"DEFAULT"===p&&(p=d);"OFF"!==p&&ua.anisotropic_filtering&&(n.anisotropic_filtering=parseFloat(p.split("x")[0]))}if("REPEAT"!=c.extension||c.b4w_shore_dist_map)n.repeat=!1;if(m){"IMAGE"==k&&"MOVIE"==m.source&&(n.Ci=!0,n.lt=c.name,n.Ba=c.frame_start,n.hc=c.frame_offset,n.Kk=c.frame_duration,n.RC=c.use_auto_refresh,n.ik=c.use_cyclic,n.$k=c.movie_length,n.Il=c.b4w_nla_video,0!=n.hc&&Z.warn('Frame offset for texture "'+c.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));
n.source=k;d=aa.Ii(f+m.filepath);if(d=ga(d,n))return d;h(n,m,f)}d=new Uint8Array([204,204,204,255]);switch(k){case "IMAGE":f=J.createTexture();m=J.TEXTURE_2D;J.bindTexture(m,f);J.texImage2D(m,0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,d);break;case "NONE":if("NONE"==c.b4w_source_type)return null;f=J.createTexture();m=J.TEXTURE_2D;n.source=c.b4w_source_type;if("SCENE"==n.source){if(!c.b4w_source_id)return null;g=aa.keysearch("name",c.b4w_source_id,e);if(!g)return null;n.Ks=c.b4w_source_id;n.Yj=c.b4w_source_size;
g.$f=g.$f||[];g.$f.push(n);J.bindTexture(m,f);J.texImage2D(m,0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,d)}else"CANVAS"==n.source&&(e=c.b4w_source_id,d=c.b4w_source_size,n.Ks=e,n.Hk=c.b4w_enable_canvas_mipmapping,c=document.createElement("canvas"),c.width=d,c.height=d,n.Lg=c.getContext("2d"),g in sa||(sa[g]={}),sa[g][e]=n,J.bindTexture(m,f));break;case "ENVIRONMENT_MAP":f=J.createTexture();m=J.TEXTURE_CUBE_MAP;J.bindTexture(m,f);c="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");
for(g=0;6>g;g++)J.texImage2D(J["TEXTURE_CUBE_MAP_"+c[g]],0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,d);break;default:return Z.error('texture "'+c.name+'" has unsupported type "'+k+'"'),null}n.Bb=f;n.pb=m;"NONE"==k?(n.Hk?J.texParameteri(m,J.TEXTURE_MIN_FILTER,La[ua.ck]):J.texParameteri(m,J.TEXTURE_MIN_FILTER,J.LINEAR),n.anisotropic_filtering&&J.texParameterf(m,pa.iA().TEXTURE_MAX_ANISOTROPY_EXT,n.anisotropic_filtering),"CANVAS"==n.source&&l(n)):(J.generateMipmap(m),J.bindTexture(m,null));return n};a.OW=
l;a.NJ=x;a.MJ=y;a.at=H;a.pz=w;a.Go=function(a){return a&&(a.Bb||a.gf)?!0:!1};a.Eo=function(a){return a&&a.gf?!0:!1};a.JZ=function(b){return b.type==a.lq||b.type==a.mq?!0:!1};a.HR=function(b){var c=0;switch(b.type){case a.sh:case a.Ft:c=4;break;case a.lq:case a.mq:c=16;break;case a.Sl:c=3;break;case a.Dt:case a.Bt:c=2;break;case a.Et:c=4*ua.ec;break;case a.Ct:c=3*ua.ec}return c};a.cleanup=function(){if(!ua.Ds)for(var a in xa)for(var b in xa[a])xa[a][b].hb.pause(),xa[a][b].hb.src="",xa[a][b].hb.load();
V.ma.length=0;V.Ko.length=0;sa={};xa={}};a.pause=function(){for(var a in xa)for(var b in xa[a]){var c=xa[a][b];B(c)&&g(c)}};a.reset=function(){for(var a in xa)for(var b in xa[a])D(xa[a][b])};a.play=function(a){for(var b in xa)for(var c in xa[b]){var d=xa[b][c];a&&!d.mt||u(d)}};a.tA=function(a,b){return b in xa&&a in xa[b]?xa[b][a]:null};a.XC=function(a){return a.Il};a.play_video=u;a.pause_video=g;a.reset_video=D;a.QU=function(a,b,c){c in xa&&a in xa[c]&&(a=xa[c][a],a.hb?a.hb.currentTime=b/a.Dh:a.Gd&&
(a.Vj=b,y(a)))};a.jK=B;a.kK=N;a.gK=function(a){return a.hb||a.Gd?a.hb?Math.round(a.hb.currentTime*a.Dh):a.Vj:0};a.iK=function(a){return a.hb||a.Gd?a.hb?a.hc:L(a,a.hc):0};a.bX=function(a){if(!a.hb&&!a.Gd)return 0;var b=Math.min(a.Kk,a.$k-a.hc);return a.hb?a.hc+b:L(a,a.hc+b)};a.ix=function(a,b){return Math.round(b*a.Bs*(ma.Cd()/a.Dh))};a.hK=function(a){return Math.min(a.Kk,a.$k-a.hc)};a.aX=L;a.cR=function(a,b){var c=A(a,b);return c&&"CANVAS"==c.source?c.Lg:null};a.zv=A;a.hV=G;a.get_texture_names=function(a){var b=
[];if(da.is_dynamic(a))S(a,b);else{a=a.Wr;for(var c=0;c<a.length;c++)S(a[c],b)}return b};a.rV=function(a){for(var c={},d=0;d<a.length;d++){for(var e=a[d].ma,g=a[d].Mf,f=[],h=[],k=0;k<e.length;k++){var m=e[k],M=g[k];if("CANVAS"==m.source)if(M in c)m=c[M];else{var n=e[k],m=b();m.source="CANVAS";m.width=n.width;m.height=n.height;m.Hk=n.Hk;m.type=n.type;n=document.createElement("canvas");n.width=m.width;n.height=m.height;m.Lg=n.getContext("2d");m.pb=J.TEXTURE_2D;m.Bb=J.createTexture();J.bindTexture(J.TEXTURE_2D,
m.Bb);m.Hk?J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,La[ua.ck]):J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR);J.bindTexture(J.TEXTURE_2D,null);n=m;n.Lg.drawImage(e[k].Lg.canvas,0,0);l(n);c[M]=m}f.push(m);h.push(M)}a[d].ma=f}};a.oQ=function(a,b){for(var c=[],d=0;d<a.length;d++)m(a[d].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return aa.clamp(255*a,0,255)}))};a.EN=m;a.sQ=function(a,b){for(var c=
new Float32Array(3),d=new Float32Array(3),e=[],g=0;g<a.length;g++){for(var f=a[g].data.value,h=[],k=f.curve_mapping.curves_data,l=f.curve_mapping.curve_extend,m=f.curve_mapping.curves_handle_types,f=0;f<k.length;f++){for(var n=l[f],p=k[f],r=[],u=m[f],q=0;q<p.length;q++)r.push([new Float32Array(3),new Float32Array(p[q].concat(0)),new Float32Array(3)]);W.qz(r[0],null,r[1],u[0],u[0]);for(q=1;q<r.length-1;q++)W.qz(r[q],r[q-1],r[q+1],u[q],u[q]);W.qz(r[r.length-1],r[r.length-2],null,u[r.length-1],u[r.length-
1]);if(2<r.length){if("AUTO"==u[0]){Ga.subtract(r[0][2],r[0][1],c);q=Ga.length(c);Ga.copy(r[1][0],d);d[0]<r[0][1][0]&&(d[0]=r[0][1][0]);Ga.subtract(d,r[0][1],d);var w=Ga.length(d);1E-8<w&&(Ga.scale(d,q/w,d),Ga.add(r[0][1],d,r[0][2]),Ga.subtract(r[0][1],d,r[0][0]))}p=r.length-1;"AUTO"==u[0]&&(Ga.subtract(r[p][0],r[p][1],c),q=Ga.length(c),Ga.copy(r[p-1][2],d),d[0]>r[p][1][0]&&(d[0]=r[p][1][0]),Ga.subtract(d,r[p][1],d),w=Ga.length(d),1E-8<w&&(Ga.scale(d,q/w,d),Ga.add(r[p][1],d,r[p][0]),Ga.subtract(r[p][1],
d,r[p][2])))}for(p=0;p<r.length-1;p++)W.wO(r[p][1],r[p][2],r[p+1][0],r[p+1][1]);p=[];3>=k.length?(q=Math.round(-b/2),u=Math.round(b/2)):(q=0,u=b);for(;q<u;q++){var w=q/(u-1),v=K(r,w,!1),D=U(r,w,!1);v&&D?p.push(W.nE(w,v[1],v[2],D[0],D[1],.001)):D&&!v?"EXTRAPOLATED"==n?(w=D[1][0]==D[2][0]?D[1][1]:W.eH(w,D[1],D[2]),p.push(w)):p.push(D[1][1]):v&&!D&&("EXTRAPOLATED"==n?(w=v[0][0]==v[1][0]?v[1][1]:W.eH(w,v[0],v[1]),p.push(w)):p.push(v[1][1]))}h.push(p)}e.push(h)}c=[];for(q=0;q<e.length;q++)for(h=e[q],f=
0;f<h[0].length;f++)3>=h.length?(d=aa.clamp(127.5*(h[0][f]+1),0,255),g=aa.clamp(127.5*(h[1][f]+1),0,255),k=aa.clamp(127.5*(h[2][f]+1),0,255),p=255):(d=aa.clamp(255*h[0][f],0,255),g=aa.clamp(255*h[1][f],0,255),k=aa.clamp(255*h[2][f],0,255),p=aa.clamp(255*h[3][f],0,255)),c.push(d,g,k,p);return new Uint8Array(c)};a.iF=function(b,c){var d=q(a.sh,!1);d.source="NODE_TEX";d.repeat=!1;H(d,{width:c,height:b.length/(4*c),data:b});return d};a.change_image=function(a,c,d,e,g){var h=aa.Ii(g);if("WORLD"!=a.type){var k=
ga(h,c);if(!k){k=b();k.type=c.type;k.anisotropic_filtering=c.anisotropic_filtering;k.source=c.source;k.Ks=c.Ks;k.width=c.width;k.height=c.height;k.Uq=c.Uq;k.Yj=c.Yj;k.Hk=c.Hk;k.Lg=c.Lg;k.pb=c.pb;k.Bb=c.Bb;k.gf=c.gf;k.Ci=c.Ci;k.Yp=c.Yp;k.hb=c.hb;k.lt=c.lt;k.$k=c.$k;k.Dh=c.Dh;k.Ba=c.Ba;k.hc=c.hc;k.Kk=c.Kk;k.eh=c.eh;k.Th=c.Th;k.Gd=c.Gd;k.Cs=c.Cs;k.Bs=c.Bs;k.Vj=c.Vj;k.Es=c.Es;k.ql=c.ql;k.mt=c.mt;k.RC=c.RC;k.ik=c.ik;k.Il=c.Il;k.repeat=c.repeat;k.Ao=c.Ao;k.Pk=c.Pk;k.Gm=c.Gm;k.EA=c.EA;k.DA=c.DA;k.Ok=c.Ok;
var l=k;J.bindTexture(c.pb,c.Bb);var m=J.getTexParameter(c.pb,J.TEXTURE_MAG_FILTER),M=J.getTexParameter(c.pb,J.TEXTURE_MIN_FILTER),n=J.getTexParameter(c.pb,J.TEXTURE_WRAP_S);c=J.getTexParameter(c.pb,J.TEXTURE_WRAP_T);l.Bb=J.createTexture();J.bindTexture(l.pb,l.Bb);J.texParameteri(l.pb,J.TEXTURE_MAG_FILTER,m);J.texParameteri(l.pb,J.TEXTURE_MIN_FILTER,M);J.texParameteri(l.pb,J.TEXTURE_WRAP_S,n);J.texParameteri(l.pb,J.TEXTURE_WRAP_T,c);J.bindTexture(l.pb,null);f(k,g,h);H(k,e,0)}G(a,d,k)}else k=c,f(k,
g,h),H(k,e,0),O.pW(a,k),O.hy(a)};a.VE=Q;a.xe=function(a){return a.texture.J};a.pU=function(){J=null};a.hG=function(){return V.ma};a.bR=function(a){a=V.ma.indexOf(a);return-1==a?!1:V.Ko[a]};a.IU=function(a){a=V.ma.indexOf(a);-1!=a&&(V.Ko[a]=!0)}};b4w.module.__assets=function(a,t){function e(){return H.LG()?t(H.$e.fu).data:null}function c(){var a={Jt:null,BM:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,d=new Int8Array(c),e=0;e<c;e++)d[e]=b.charCodeAt(e);return d.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Jt=c;a.readyState=1},send:function(){a.status=
404;a.readyState=4;var b=e();b&&a.Jt in b&&(a.status=200,b[a.Jt]&&(a.response=a.BM(b[a.Jt])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function b(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];20===e.state&&c++;if(c>=g.dT)break;if(10===e.state)switch(e.state=20,c++,e.type){case a.AT_JSON_ZIP:case a.AT_ARRAYBUFFER:case a.AT_ARRAYBUFFER_ZIP:h(e,"arraybuffer");break;case a.AT_JSON:h(e,"json");break;case a.AT_TEXT:h(e,"text");break;case a.AT_AUDIOBUFFER:f(e);
break;case a.AT_IMAGE_ELEMENT:q(e);break;case a.AT_AUDIO_ELEMENT:l(e);break;case a.AT_VIDEO_ELEMENT:x(e);break;case a.AT_SEQ_VIDEO_ELEMENT:y(e);break;default:k.K("Wrong asset type: "+e.type)}}}function h(b,d){var g=b.url.split("?v=")[0];if(g in L)"json"==d?b.Yb(k.W(L[g]),b.id,b.type,b.url,b.param):b.Yb(L[g],b.id,b.type,b.url,b.param);else{var f=e(),h=f&&b.url in f?new c:new XMLHttpRequest,f=null;if("GET"==b.request_method)h.open("GET",b.url,!0);else if("POST"==b.request_method)switch(h.open("POST",
b.url,!0),b.type){case a.AT_TEXT:f="text/plain";break;case a.AT_JSON:f="application/json"}if(b.overwrite_header)for(var l in b.overwrite_header)"Content-Type"==l?f=b.overwrite_header[l]:h.setRequestHeader(l,b.overwrite_header[l]);f&&h.setRequestHeader("Content-Type",f);"text"==d?(h.overrideMimeType("text/plain"),h.responseType="text"):"json"==d?(h.overrideMimeType("application/json"),h.responseType="text"):h.responseType=d;h.onreadystatechange=function(){if(40!=b.state&&4==h.readyState){if(200==h.status||
0==h.status){var c=h.response;if(!c||"arraybuffer"==d&&0==c.byteLength)n.error("empty responce when trying to get "+b.url),b.Yb(null,b.id,b.type,b.url,b.param);else{switch(b.type){case a.AT_JSON_ZIP:try{c=w.Bo(c,{to:"string"})}catch(ga){n.error(ga+" (parsing gzipped file "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}case a.AT_JSON:try{c=JSON.parse(c,b.uS)}catch(ga){n.error(ga+" (parsing JSON "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}break;case a.AT_ARRAYBUFFER_ZIP:try{c=
w.Bo(c).buffer}catch(ga){n.error(ga+" (parsing gzipped file "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}}b.ye&&(L[g]=b.type==a.AT_JSON||b.type==a.AT_JSON_ZIP?k.W(c):c);b.Yb(c,b.id,b.type,b.url,b.param)}}else n.error(h.status+" when trying to get "+b.url),b.Yb(null,b.id,b.type,b.url,b.param);b.state=30}};h.addEventListener("progress",function(a){a.lengthComputable&&b.ZH(a.loaded/a.total)},!1);h.send(b.post_data)}}function f(a){var b=a.url.split("?v=")[0];if(b in z)a.Yb(z[b],a.id,a.type,
a.url,a.param),a.state=30;else{"GET"!=a.request_method&&k.K("Unsupported request type for audio buffer");var d=(b=e())&&a.url in b?new c:new XMLHttpRequest;d.open("GET",a.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=a.state&&4==d.readyState)if(200==d.status||0==d.status){var b=d.response;b?C.RP(b,function(b){a.Yb(b,a.id,a.type,a.url,a.param);a.state=30;a.ye&&(z[a.url.split("?v=")[0]]=b)},function(){n.error("failed to decode "+a.url);a.Yb(null,a.id,a.type,a.url,a.param);
a.state=30}):(n.error("empty responce when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)}else n.error(d.status+" when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30};d.send()}}function q(a){var b=a.url.split("?v=")[0];if(b in A)a.Yb(A[b],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&k.K("Unsupported request type for image element");var c=document.createElement("img");u.allow_cors&&(c.crossOrigin="Anonymous");c.onload=function(){40!=
a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30,a.ye&&(A[a.url.split("?v=")[0]]=c))};c.addEventListener("error",function(){40!=a.state&&(n.error("could not load image: "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)},!1);if((b=e())&&a.url in b)if(b[a.url]){var g=d(a.url);c.src="data:"+g+";base64,"+b[a.url]}else E.is_ie11()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url}}function l(a){var b=
a.url.split("?v=")[0];if(b in G)a.Yb(G[b],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&k.K("Unsupported request type for audio element");var c=document.createElement("audio");u.allow_cors&&(c.crossOrigin="Anonymous");c.addEventListener("loadeddata",function(){40!=a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30,a.ye&&(G[a.url.split("?v=")[0]]=c))},!1);c.addEventListener("error",function(){40!=a.state&&(n.error("could not load sound: "+a.url),a.Yb(null,a.id,a.type,a.url,
a.param),a.state=30)},!1);c.addEventListener("stalled",function(){40!=a.state&&(n.error("could not load sound: "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)},!1);if((b=e())&&a.url in b)if(b[a.url]){var d=v(a.url);c.src="data:"+d+";base64,"+b[a.url];40!=a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30)}else E.is_ie11()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url,u.is_mobile_device&&c.load();
u.hB&&(c.autoplay=!0,c.pause());setTimeout(function(){c.CM=1},5E3)}}function x(a){function b(){40!=a.state&&(n.error("could not load video: "+a.url,a.param),a.Yb(null,a.id,a.type,a.url),a.state=30)}var c=a.url.split("?v=")[0];if(c in A)a.Yb(A[c],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&k.K("Unsupported request type for video element");var d=document.createElement("video");d.muted=!0;u.allow_cors&&(d.crossOrigin="Anonymous");d.addEventListener("loadeddata",function(){d.removeEventListener("error",
b,!1);40!=a.state&&(a.Yb(d,a.id,a.type,a.url,a.param),a.state=30,a.ye&&(A[a.url.split("?v=")[0]]=d))},!1);d.addEventListener("error",b,!1);if((c=e())&&a.url in c)if(c[a.url]){var g=r(a.url);d.src="data:"+g+";base64,"+c[a.url];40!=a.state&&d.addEventListener("loadeddata",function(){a.Yb(d,a.id,a.type,a.url,a.param);a.state=30},!1)}else E.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),d.dispatchEvent(c);else d.src=a.url,u.is_mobile_device&&
d.load();if(u.hB||u.HG)d.autoplay=!0,d.pause();setTimeout(function(){d.CM=1},1E4)}}function y(a){function b(b){a.Yb(b,a.id,a.type,a.url,a.param);a.state=30;a.ye&&(A[a.url.split("?v=")[0]]=b)}var d=a.url.split("?v=")[0];if(d in A)a.Yb(A[d],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&k.K("Unsupported request type for seq video element");var g=(d=e())&&a.url in d?new c:new XMLHttpRequest;g.open("GET",a.url,!0);g.responseType="arraybuffer";g.onreadystatechange=function(){if(40!=
a.state&&4==g.readyState)if(200==g.status||0==g.status){var c=g.response;c?p(c,b):(n.error("empty responce when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)}else n.error(g.status+" when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30};g.addEventListener("progress",function(b){b.lengthComputable&&a.ZH(b.loaded/b.total)},!1);g.send()}}function p(a,b){for(var c=new Int32Array(a),d=new Int8Array(a),e=c[3],g={images:[],tE:[],Dh:c[4]},f=20,h=0;h<e;h++){var k=
c[f/4],l=new Blob([d.subarray(f+4,f+4+k)],{type:"image/jpg"}),n=document.createElement("img");n.src=window.URL.createObjectURL(l);g.images.push(n);g.tE.push(l);f+=k+8-k%4}n.onload=function(){for(var a=0;a<g.images.length;a++)window.URL.revokeObjectURL(g.images[a].src);delete g.tE;b(g)}}function d(a){var b="image";switch(k.nA(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function v(a){var b="audio";switch(k.nA(a).toLowerCase()){case "ogv":case "ogg":b+="/ogg";
break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function r(a){var b="video";switch(k.nA(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var H=t("__config"),E=t("__compat"),w=t("__pako_inflate"),n=t("__print"),C=t("__sfx"),k=t("__util"),F=t("__version"),u=H.L,g=H.be;a.AT_ARRAYBUFFER=10;a.AT_ARRAYBUFFER_ZIP=20;a.AT_JSON=30;a.AT_JSON_ZIP=40;a.AT_TEXT=50;a.AT_AUDIOBUFFER=60;a.AT_IMAGE_ELEMENT=
70;a.AT_AUDIO_ELEMENT=80;a.AT_VIDEO_ELEMENT=90;a.AT_SEQ_VIDEO_ELEMENT=100;var D=[],B=0,N={},L={},A={},G={},z={};a.Kx=function(a){a=a.split(".");var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};a.oZ=function(a){if(N[a])return N[a];var b=g.prevent_caching?a+"?v="+F.get_build_version():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)k.K("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return N[a]=
b;k.K("Error XHR: responce is empty, GET "+a)}};a.cleanup=function(){for(var a=0;a<D.length;a++)D[a].state=40;D=[];B=0;N={}};a.enqueue=function(a,c,d,f,h){for(var k=0;k<a.length;k++){var l=a[k],l={id:l.id,type:l.type,url:l.url,ye:l.ye,request_method:l.request_method?l.request_method:"GET",overwrite_header:l.overwrite_header?l.overwrite_header:null,post_data:l.post_data?l.post_data:null,param:l.param?l.param:null,state:10,Yb:c||function(){},QH:d||function(){},ZH:f||function(){},uS:h||null,RH:B};if(g.prevent_caching){var m=
e();m&&l.url in m||(l.url+="?v="+F.get_build_version())}D.push(l)}b(D);B++};a.update=function(){b(D);for(var a=D,c=0,d=!0,e=0;e<a.length;e++){var g=a[e];g.RH===a[c].RH?30!==g.state&&(d=!1):(d&&(a[e-1].QH(),d=e-c,a.splice(c,d),e-=d),c=e,d=30===a[e].state?!0:!1);e===a.length-1&&d&&(g=a[e],a.splice(c),g.QH())}};a.$N=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};a.jO=function(){L={};A={};G={};z={}}};b4w.module.__loader=function(a,t){function e(b,d,e,g){var f=C,h=H.create(),k;for(k in d){var l=c(d[k]);if(g&&l.Wb||!b&&l.ic)l.Hs=!0;H.Y(h,l)}for(k in d)for(l=d[k],l.name=k,b=0;b<l.inputs.length;b++)H.I(h,d[l.inputs[b]],l,null);d=c({name:"out",Ib:a.wK,Zb:function(a,b,c,d,e){b.Nb&&(f.qC=!0);r(b)||(b.status=2);b.iH(b.id,!0);e(b,c);E.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},Xb:5});if(e)e=H.Cr(h);else{k=H.clone(h);do{e=H.Cr(k);l=[];for(b=0;b<e.length;b++){g=e[b];var n=H.$a(k,g);n.Qb&&
l.push(g)}for(b=0;b<l.length;b++)H.If(k,l[b]);l.length&&H.wz(k)}while(l.length)}H.Y(h,d);for(b=0;b<e.length;b++)g=e[b],n=H.$a(h,g),d.inputs.push(n.name),H.I(h,n,d,null);return h}function c(a){a.Qb=a.Qb||!1;a.Ib||0===a.Ib||(a.Ib=a.ae);a.inputs=a.inputs||[];a.Lm=a.Lm||!1;a.Hs=a.Hs||!1;a.Xb=a.Xb||0;a.Wb=a.Wb||!1;a.ic=a.ic||!1;a.status=0;a.RZ=0;a.hH=0;a.Jq=a.Jq||null;return a}function b(a,b,c){b.$E(c,b);b.status=3;a.Xy--;n.debug_loading&&E.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.Ss)+"ms","color: #f0f;");b.oC=null;b.$E=null;n.debug_loading||(b.lh=null);b.ak=null}function h(a,b){for(var c=[],d=[],e=0;e<b.length;e++){var f=b[e];H.$a(a.lh,f).Lm&&(H.Cl(a.lh,f,function(d){var e=!0;H.hk(a.lh,d,function(a,b){if(!b.Lm)return e=!1,1});e&&-1==c.indexOf(d)&&-1==b.indexOf(d)&&c.push(d)}),d.push(e))}for(e=d.length-1;0<=e;e--)b.splice(d[e],1);return c}function f(a){function b(b,c){var d=H.$a(a.lh,b),e=H.$a(a.lh,c),g=e.Ib-d.Ib;g||(g=d.Qb-e.Qb);return g}var c=[],d=a.ak,e=!1;do{var f=h(a,
d);c.push.apply(c,d);0<f.length&&(e=!0);d=f}while(0<f.length);e&&c.sort(b);a.ak=c;return a.ak.length}function q(a,b,c){if(b.Hs)return b.Lm=!0,n.debug_loading&&E.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),x(a,b),!1;if(n.debug_loading&&0==b.status){var d=l(a);E.log("%cTHREAD "+a.id+": "+d+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.Ss)+"ms ","color: #f0f;")}if(!b.Zb&&!b.wk&&!b.Iq)return x(a,b),!1;if(0==b.status&&(b.status++,b.Zb))return b.Zb(c,a,b,b.Jq,x,y),!0;
if(1==b.status){if(b.wk)return b.wk(c,a,b,b.Jq,x,y),!0;b.status++}return 2==b.status&&(b.status++,b.Iq)?(b.Iq(c,a,b,b.Jq,x,y),!0):!1}function l(a){if(0==a.Lx)return 100;var b=0;H.ea(a.lh,function(c,d){a.do_not_load_resources&&d.Wb||(b+=d.hH*d.Xb)});return w.trunc(100*b/a.Lx)}function x(a,b){b.Lm=!0;b.status=3;p(a,b,1);if(n.debug_loading){var c=l(a);E.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.Ss)+"ms ","color: #f0f;")}}function y(a,b,c){1>c?p(a,b,c):
b.status++}function p(a,b,c){var d=C;if(b.Zb||b.wk||b.Iq)if(b.hH=c,b=l(a),a.rF!=b||1==c)a.oC(b,performance.now()-a.Ss,a.id),a.rF=b,d.XA=!0}function d(a,b){var c=null;H.ea(a.lh,function(a,d){if(d.name==b)return c=d,1});return c}function v(){return 0==C.Xy}function r(a){return a&&(3==a.status||4==a.status)}var H=t("__graph"),E=t("__print"),w=t("__util"),n=t("__config").L;a.ae=0;a.Fg=1;a.wK=2;var C=null;a.oA=function(){return C};a.kF=function(){var a={Nf:[],Nz:0,Xy:0,qC:!1,XA:!1};return C=a};a.oF=function(a,
b,c,d,f,h,l,n,p){var g=C,k=g.Nf.length,r={id:k,Nb:0==k,status:0,wi:b,qE:"",iH:c||function(){},gH:n||!1,E_:h,Ss:0,rF:0,Lx:0,TB:!1,oC:d||function(){},$E:f||function(){},lh:null,ak:null,BA:!1,yA:!1,FA:!1,og:p};a=e(r.Nb,a,h,l);r.lh=a;b=[];c=H.FR(a);for(d=0;d<c.length;d++)b.push(c[d]);r.ak=b;H.ea(a,function(a,b){!(b.Zb||b.wk||b.Iq)||r.do_not_load_resources&&b.Wb||(r.Lx+=b.Xb)});g.Nf.push(r);g.Xy++;return r.id};a.IW=function(c){var d=C;if(d&&!v())if(d.XA)d.XA=!1;else{var e=performance.now();do{var g=d.Nf[d.Nz],
h=c[g.id];if(!r(g))if(0==g.status&&(g.status=1,g.Ss=performance.now(),g.oC(0,0,g.id),n.debug_loading&&E.log("%cTHREAD "+g.id+": 0% LOADING START 0ms","color: #f0f;")),f(g)){var k=g,l=k.ak.length;do{var p=H.$a(k.lh,k.ak[0]),w=q(k,p,h);p.Ib==a.Fg&&(k.TB=!0);p=k.ak.shift();k.ak.push(p);l--}while(!w&&0!=l)}else b(d,g,h);d.qC&&(d.Nz=(d.Nz+1)%d.Nf.length);if(g.TB){g.TB=!1;break}}while(16>performance.now()-e)}};a.TD=function(a){var c=C;b(c,a,null);a.status=4;a.Nb&&(c.qC=!0);a.iH(a.id,!1)};a.r_=y;a.ux=function(a,
b){var c=d(a,b);null!==c&&(c.Hs=!0)};a.Lm=v;a.UV=r;a.is_primary_loaded=function(a){var b=C;if(!b)return!1;a|=0;return b.Nf[a]&&(3==b.Nf[a].status||2==b.Nf[a].status)};a.MR=function(b){if(n.debug_loading){var c=C;return c&&c.Nf[b]&&c.Nf[b].lh?H.uF(c.Nf[b].lh,function(b,c){if(c.Hs)return"SKIPPED\n("+c.name+")";var d=c.name+"\n",e=[];e.push(c.Ib==a.Fg?"ASYNC":"SYNC");c.Qb&&e.push("BKG");c.Wb&&e.push("RES");return d+e.join(" | ")},null):null}E.error("Debug mode isn't enabled. Can not retrieve the graph.")};
a.cleanup=function(){C=null}};b4w.module.__logic_nodes=function(a,t){function e(){return function(a,c,d,e){d=e[1];var g=e[2];e=b(e[0],g.Pb);if(-1==e.state){for(var f=0;f<e.CU;f++)if(N.get_sensor_value(a,c,f)){for(var h=0;h<e.hx.length;h++)if(e.hx[h]==f){d.So==e.TV?(F.is_play(d.Ga)&&(e.state=-3),g.Pb.Zg||(e.state=1,e.Is=e.VA[h])):(e.state=1,e.Is=e.VA[h]);e.cC=f;return}e.cC=f}e.state=0}}}function c(a,b){return{name:a.name,type:a.type,label:a.label,Ka:a.slot_idx_order,Is:a.slot_idx_jump,Ba:a.frame_range[0],jb:a.frame_range[1],FQ:a.frame_range_mask?
a.frame_range_mask[0]:!0,EQ:a.frame_range_mask?a.frame_range_mask[1]:!0,AT:a.param_name,uT:a.operation,mute:a.mute,DF:a.object,ag:a.anim_name,CT:a.parse_json_vars,BT:a.parse_json_paths,md:a.objects_paths,GH:a.nodes_paths,ya:a.floats,P:a.bools,O:a.variables,bk:a.strings,Yk:a.logic_functions,mH:a.logic_node_trees,YA:a.materials_names,QI:a.shader_nd_type,Fc:a.common_usage_names,iQ:a.encode_json_vars,hQ:a.encode_json_paths,TV:b,JB:aa[a.type]?aa[a.type]:l,Yw:!1,fH:a.links,Hr:[],dA:-1,lw:null,cC:-1}}function b(a,
b,c){var d=b.Ep+1-a.Hr.length;if(0<d){for(var e=0;e<d;e++)e==d-1?a.Hr.push({ob:{},Is:-1,state:-1,hx:[],by:-1,Cc:{},Bc:n.SLOT_ALL,vc:null}):a.Hr.push(0);c&&c(a,a.Hr[b.Ep],b)}return a.Hr[b.Ep]}function h(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function f(a,b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function q(a,b,c){switch(b.state){case 2:c.qa=a.Ka}}function l(a,b,c){switch(b.state){case 1:g.error("Unknown node type: "+a.type);break;case 2:c.qa=a.Ka}}function x(a,c){for(var d=a.Z,e=0;e<d.length;e++){var g=d[e];"SWITCH_SELECT"==
g.type&&g!=c&&(b(g,a.Pb).state=-3)}}function y(a,c,d){var f=u.get_selectable_objects(),k=b(a,d.Pb);k.hx=[];k.VA=[];for(var l in a.md){var m=a.P[l]?h(a.O[l],c.G,d.Pb.G):u.Vc(u.Hd,a.md[l],0),m=f.indexOf(m);if(-1==m){g.error("logic script error: non-selectable object:",a.md[l][a.md[l].length-1]);return}k.hx.push(m);k.VA.push(a.fH[l])}k.CU=f.length;k=[];for(l=0;l<f.length;l++)k.push(N.create_selection_sensor(f[l],!1));f=e();N.create_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+E(a.label),N.CT_SHOT,
k,N.default_OR_logic_fun,f,[a,c,d])}function p(a,b,c,d,e){return c?h(a.O[b],d,e):u.Vc(u.Hd,a.md[b],0)}function d(a){var b=a.Pb.gm;return 1>=b.length?a.Z:b[b.length-1].ow.ur.Z}function v(a,b){var d=a.b4w_logic_nodes,e=b.Df,g=b.Yk;b.state=1;for(var f=-1,h=0;h<d.length;h++){for(var k={Z:[],Pb:{kb:a,qa:0,Zg:!1,QC:!1,Ep:h,gm:[],G:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},l=d[h],m=0;m<l.length;m++){var n=c(l[m],k);k.Z.push(n)}switch(k.Z[0].type){case "ENTRYPOINT":f++;k.Pb.Ep=f;e.push(k);break;case "DEF_FUNC":n=
k.Z[0],k.Pb=null,g.push({id:[n.mH.id0,n.Yk.id0],ur:k})}}for(h=0;h<e.length;h++)for(k=e[h],d=0;d<k.Z.length;d++)n=k.Z[d],n.mute||n.JB(n,b,k.Pb,0,0);for(h=0;h<g.length;h++)for(e=g[h].ur,d=0;d<e.Z.length;d++)n=e.Z[d],n.mute||n.JB(n,b,0,0,0);var g=a.timeline_markers,p;for(p in g)b.Js.push(g[p]);b.Js.sort(function(a,b){return a-b});b.state=2;fa.push(b)}function r(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function H(a){switch(typeof a){case "string":return r(a,
1);case "number":return r(a,0);default:return r(a,1)}}function E(a){da[a]||(da[a]=0);var b=a+"_"+da[a],b=b.replace(/ /g,"_").replace(/\//g,"_");da[a]++;return b}function w(a,b){switch(b){case 0:return a.ya;case 1:return a.bk;case 2:return a.md}}var n=t("__animation"),C=t("__assets"),k=t("__camera"),F=t("__nla"),u=t("__objects"),g=t("__print"),D=t("__scenes"),B=t("__config"),N=t("__controls"),L=t("__batch"),A=t("__geometry"),G=t("__mat3"),z=t("__mat4"),I=t("__physics"),S=t("__quat"),m=t("__sfx"),K=
t("__time"),U=t("__transform"),Q=t("__tsr"),R=t("__util"),ga=t("__vec3"),ra=t("__obj_util"),T=new Float32Array(4),ia=new Float32Array(3),ha=new Float32Array(3),pa=new Float32Array(2),Z=new Float32Array(9),ma=new Float32Array(16);a.Qy=0;a.zD=1;a.yD=2;a.aL=0;a.jL=1;a.fL=2;a.WK=3;a.gL=4;a.iL=5;a.$K=6;a.kL=7;a.YK=8;a.XK=9;a.ZK=10;a.bL=11;a.dL=12;a.cL=13;a.hL=14;a.eL=15;a.VK=16;a.qL=0;a.pL=1;a.rL=2;a.sL=3;a.oL=4;a.tD=0;a.vD=1;a.uD=2;a.wD=3;a.xD=4;a.sD=5;a.vL=0;a.uL=1;a.tL=2;a.RK=0;a.SK=1;a.PK=2;a.QK=3;
a.TK=0;a.UK=1;var aa={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.gm.push({EE:null,G:c.G,ow:null}),c.qa=a.Ka}},HIDE:function(a,c,d){function e(a,b){f||(b.obj=u.Vc(u.Hd,a.md.id0,0),b.obj||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var f=a.P.id0;switch(c.state){case 2:var k=b(a,d,e);c=f?h(a.O.id0,c.G,d.G):k.obj;a.P.ch?D.Kq(c,!0):D.hm(c,!0);d.qa=a.Ka}},SHOW:function(a,c,d){function e(a,b){f||(b.obj=u.Vc(u.Hd,a.md.id0,0),b.obj||(g.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0))}var f=a.P.id0;switch(c.state){case 2:var k=b(a,d,e);c=f?h(a.O.id0,c.G,d.G):k.obj;a.P.ch?D.Kq(c,!1):D.hm(c,!1);d.qa=a.Ka}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.O.vd;b=b.G;var e=c.G,g;a:{g=a.AT;var h=a.ya.ptp,k=a.P.hsh,l=B.get("url_params");if(l&&g in l)g=Number(l[g]);else{if(k=k?location.hash:location.search)for(k=k.slice(1).split("&"),l=0;l<k.length;l++){var m=k[l].split("=");if(1<m.length&&m[0]==g){g=r(m[1],h);break a}}g=0}}f(d,b,e,g);c.qa=a.Ka}},SWITCH_SELECT:function(a,
c,d){function e(a,b){b.state=-3}switch(c.state){case 2:var g=b(a,d,e);if(-3==g.state)g.state=-2,x(c.Df[d.Ep],a),y(a,c,c.Df[d.Ep]);else if(-2==g.state)g.state=-1;else if(0==g.state||1==g.state){if(a.O.vd&&a.O.vd[1]){var h=u.get_selectable_objects();f(a.O.vd,c.G,d.G,h[g.cC])}d.qa=g.state?g.Is:a.Ka;g.state=-3;N.remove_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+E(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:g.error("Logic script error: node is deprecated. Node: ",a.name),a.mute=!0}},
PLAY:function(a,c,e,g){switch(c.state){case 1:F.sC();a.P.not_wait||(a.P.not_wait=!1);break;case 2:var f=b(a,e);switch(f.state){case -1:if(F.is_play(c.Ga))if(c.Lz==c.So&&e.Zg)break;else{var h=c.So;if(h){h.Pb.qa=d(h)[h.Pb.qa].Ka;var h=c.So,k=h.Pb.gm,l=k.length,m=[];1>=l&&m.push(h.Z);for(var n=1;n<l;n++)m.push(k[n].ow.ur.Z);for(n=0;n<m.length;n++)for(k=0;k<m[n].length;k++)l=m[n][k],"PLAY"==l.type&&(b(l,h.Pb).state=-1)}}e.Zg=!a.P.not_wait;c.So=c.Lz;f.state=0;a.FQ&&(F.bV(a.Ba),F.FI(g));if(a.EQ)F.eC(a.jb);
else{g=F.get_frame(g);var h=-1,p;for(p in c.Js)if(g<c.Js[p]){h=p;break}0<=h?F.eC(c.Js[h]):F.eC(F.get_frame_end())}F.WH(null);a.P.not_wait&&(e.qa=a.Ka,f.state=-1,e.Zg=!1);break;case 0:F.is_play()||(e.qa=a.Ka,f.state=-1,e.Zg=!1);break;case 1:e.qa=a.Ka;f.state=-1;c.So=null;e.Zg=!1;break;default:R.K("Unknown state of "+a.name),f.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.P.url?r(h(a.O.url,b.G,c.G),1):a.bk.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var d=
-1==a.O.id0[1]?a.ya.inp1:r(h(a.O.id0,b.G,c.G),0),e=-1==a.O.id1[1]?a.ya.inp2:r(h(a.O.id1,b.G,c.G),0),g=0;switch(a.uT){case 3:g=d+e;break;case 2:g=d*e;break;case 1:g=d-e;break;case 0:0==e&&R.K("Division by zero in Logic script");g=d/e;break;case 4:g=Math.random()*(e-d)+d;break;case 5:g=Math.sin(d);break;case 6:g=Math.cos(d);break;case 7:g=Math.tan(d);break;case 8:g=Math.asin(d);break;case 9:g=Math.acos(d);break;case 10:g=Math.atan(d);break;case 11:g=Math.log(d);break;case 12:g=Math.min(d,e);break;case 13:g=
Math.max(d,e);break;case 14:g=Math.round(d);break;case 15:g=d%e;break;case 16:g=Math.abs(d)}f(a.O.vd,b.G,c.G,g);c.qa=a.Ka}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=a.Fc.variable_type,e=w(a,d),g=!1;if(2==d){var f=a.P.id0?h(a.O.id0,b.G,c.G):u.Vc(u.Hd,a.md.id0,0);b=a.P.id1?h(a.O.id1,b.G,c.G):u.Vc(u.Hd,a.md.id1,0);switch(a.Fc.condition){case 5:f==b&&(g=!0);break;case 4:f!=b&&(g=!0)}}else switch(f=-1==a.O.id0[1]?e.inp1:r(h(a.O.id0,b.G,c.G),d),b=-1==a.O.id1[1]?e.inp2:r(h(a.O.id1,b.G,c.G),
d),a.Fc.condition){case 5:f==b&&(g=!0);break;case 4:f!=b&&(g=!0);break;case 3:f<b&&(g=!0);break;case 2:f>b&&(g=!0);break;case 1:f<=b&&(g=!0);break;case 0:f>=b&&(g=!0)}c.qa=g?a.Is:a.Ka}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.P.vs)var d=h(a.O.vs,b.G,c.G);else var d=a.Fc.variable_type,e=w(a,d),d=2==d?u.Vc(u.Hd,e.id0,0):e.inp1;f([a.P["new"]&&a.P.gl||a.O.vd[0],a.O.vd[1]],b.G,c.G,d);c.qa=a.Ka}},PLAY_ANIM:function(a,c,e){function f(a,b){for(var c=-1,d=0;8>d;d++){var e=a.pa[d];if(e&&e.fj&&
n.jJ(e.fj)==n.jJ(b))if(-1!=c)c=d;else return-1}return c}function k(a,b,d){b.obj=m?u.get_world_by_name(a.DF[0],0):p(a,"id0",l,c.G,d.G);b.obj||l||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var l=a.P.id0,m=a.P.env;switch(c.state){case 2:var r=b(a,e,k);m||(r.obj=l?h(a.O.id0,c.G,e.G):r.obj);0!=r.state||n.is_play(r.obj,r.Bc)||(r.state=1);switch(r.state){case -1:for(var q in c.Df){var w=c.Df[q],v=d(w),D=w.Pb.qa;-1!=D&&(v=v[D],w=b(v,w.Pb),"PLAY_ANIM"==v.type&&v!=a&&0==w.state&&
w.obj==r.obj&&(w.state=1))}q=a.Fc.param_anim_behavior;""==a.ag?(n.apply_def(r.obj),n.set_behavior(r.obj,q,n.SLOT_ALL)):(w=f(r.obj,a.ag),-1==w?(r.Bc=n.uV(r.obj,a.ag),n.apply(r.obj,null,a.ag,r.Bc)):r.Bc=w,n.set_behavior(r.obj,q,r.Bc));a.P.not_wait||(e.Zg=!0);n.play(r.obj,null,r.Bc);r.state=0;a.P.not_wait&&(e.qa=a.Ka,r.state=-1);break;case 0:break;case 1:a.P.not_wait||(e.Zg=!1);e.qa=a.Ka;r.state=-1;break;default:R.K("Unknown state of "+a.name),r.state=-1}}},SELECT_PLAY:q,SEND_REQ:function(a,c,d){function e(a,
d,e,g,h){a=JSON.stringify(a);d=h[1];e=b(h[0],d);f(h[0].O.dst,c.G,d.G,a);e.state=1}var g=b(a,d);switch(c.state){case 2:switch(g.state){case -1:g.state=0;var g=a.P.url?r(h(a.O.url,c.G,d.G),1):a.bk.url,k={};a.P.ct&&(k["Content-Type"]=a.bk.ct);"GET"==a.Fc.request_type?C.enqueue([{id:g,type:C.AT_JSON,url:g,overwrite_header:k,param:[a,d]}],e,null,null,null):"POST"==a.Fc.request_type&&C.enqueue([{id:g,type:C.AT_JSON,url:g,overwrite_header:k,request_method:"POST",post_data:r(h(a.O.dst1,c.G,d.G),1),param:[a,
d]}],e,null,null,null);break;case 1:g.state=-1,d.qa=a.Ka}}},INHERIT_MAT:function(a,c,d){function e(a,b){for(var c=0;2>c;c++)b.ob["id"+c]=u.Vc(u.Hd,a.md["id"+c],0),b.ob["id"+c]||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}switch(c.state){case 2:c=b(a,d,e),u.inherit_material(c.ob.id0,a.YA.id0,c.ob.id1,a.YA.id1),d.qa=a.Ka}},SET_SHADER_NODE_PARAM:function(a,c,d){function e(a,b){a.md.id0&&(b.ob.id0=u.Vc(u.Hd,a.md.id0,0),a.md.id0||(g.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0),a.GH.id0.unshift(a.YA.id0))}switch(c.state){case 2:var f=b(a,d,e).ob.id0,k=a.GH.id0,l=k[0],m=L.gb(f,l,"MAIN");d.qa=a.Ka;if(null===m)g.error('Material "'+l+'" was not found in the object "'+f.name+'".');else{if("ShaderNodeRGB"==a.QI){var n=u.Ar(m.Ff,k,1);u.set_nodemat_rgb(f,l,n,a.P.id0?r(h(a.O.id0,c.G,d.G),0):a.ya.id0,a.P.id1?r(h(a.O.id1,c.G,d.G),0):a.ya.id1,a.P.id2?r(h(a.O.id2,c.G,d.G),0):a.ya.id2)}"ShaderNodeValue"==a.QI&&(n=u.Br(m.Gf,k,1),u.set_nodemat_value(f,l,n,a.P.id0?r(h(a.O.id0,
c.G,d.G),0):a.ya.id0))}}},DELAY:function(a,c,d,e,g){e=b(a,d);switch(c.state){case 2:-1==e.state?(e.state=0,e.by=0,d.Zg=!0):0==e.state&&(e.by+=g,(a.P.dl?r(h(a.O.dl,c.G,d.G),0):a.ya.dl)<e.by&&(e.state=-1,d.qa=a.Ka,d.Zg=!1))}},APPLY_SHAPE_KEY:function(a,c,d){function e(a,b){var c=b.ob.id0=u.Vc(u.Hd,a.md.id0,0);c||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);var d=a.Fc.sk;A.check_shape_keys(c)?A.AA(c,d)||(g.error("Wrong key name:",d),a.mute=!0):(g.error("No shape keys in object:",
c.name),a.mute=!0)}switch(c.state){case 2:var f=b(a,d,e);A.cz(f.ob.id0,a.Fc.sk,a.P.skv?r(h(a.O.skv,c.G,d.G),0):a.ya.skv);d.qa=a.Ka}},OUTLINE:function(a,c,d){function e(a,b){f||(b.obj=u.Vc(u.Hd,a.md.id0,0),b.obj||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),b.obj&&b.obj.A&&b.obj.A.Xc||(g.error("Can't evaluate 'Outline' logic node: wrong object"),a.mute=!0))}var f=a.P.id0;switch(c.state){case 2:var k=b(a,d,e),k=f?h(a.O.id0,c.G,d.G):k.obj;switch(a.Fc.outline_operation){case "PLAY":c=
k.A.Ji;u.apply_outline_anim(k,c.fl,c.hl,c.il);break;case "STOP":u.clear_outline_anim(k);break;case "INTENSITY":u.set_outline_intensity(k,a.P["in"]?r(h(a.O["in"],c.G,d.G),0):a.ya["in"])}d.qa=a.Ka}},MOVE_CAMERA:function(a,c,d){function e(a,b,c,d){switch(k.get_move_style(a)){case k.MS_TARGET_CONTROLS:k.fC(a,b,c);break;case k.MS_EYE_CONTROLS:case k.MS_STATIC:U.set_tsr(a,d);break;case k.MS_HOVER_CONTROLS:ga.sub(c,b,ia),ga.normalize(ia,ia),k.DI(a,c),ha[0]=ia[0],ha[1]=0,ha[2]=ia[2],b=ga.dot(ha,ia),c=Math.acos(b/
(ga.length(ha)*ga.length(ia))),b=ia[2]?Math.atan(ia[0]/ia[2]):0<ia[0]?0:Math.PI,0<ia[2]&&0<ia[0]?pa[1]=-(Math.PI+pa[1]):0<ia[2]&&0>ia[0]?pa[1]=-(Math.PI+pa[1]):0>ia[2]&&0>ia[0]?(pa[0]+=Math.PI,b=-(Math.PI-b)):0>ia[2]&&0<ia[0]&&(pa[0]+=Math.PI,b-=Math.PI),k.eV(a,b+Math.PI,-c)}U.V(a);I.sync_transform(a)}function f(a,b,c,d){z.lookAt(b,c,R.AXIS_Z,ma);z.invert(ma,ma);G.fromMat4(ma,Z);S.fromMat3(Z,T);S.normalize(T,T);a=Q.get_scale(a.A.D);Q.set_sep(b,a,T,d)}function l(a,b,d){(b.ob.ca=p(a,"id0",m,c.G,d.G))||
m||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.ob.tr=p(a,"id1",n,c.G,d.G);b.ob.tr||n||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.ob.ta=p(a,"id2",u,c.G,d.G);b.ob.ta||u||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.Cc={wJ:new Float32Array(3),vJ:new Float32Array(3),JA:new Float32Array(3),zC:new Float32Array(3),rJ:new Float32Array(3),IA:new Float32Array(3),Dl:new Float32Array(8),Ti:new Float32Array(8),
Ir:new Float32Array(8)}}var m=a.P.id0,n=a.P.id1,u=a.P.id2;switch(c.state){case 2:var q=b(a,d,l),w=m?h(a.O.id0,c.G,d.G):q.ob.ca,v=u?h(a.O.id2,c.G,d.G):q.ob.ta,y=Q.get_trans_view((n?h(a.O.id1,c.G,d.G):q.ob.tr).A.D),v=Q.get_trans_view(v.A.D);switch(q.state){case -1:var A=a.P.dur?r(h(a.O.dur,c.G,d.G),0):a.ya.dur;if(0==A){f(w,y,v,q.Cc.Ti);e(w,y,v,q.Cc.Ti);d.qa=a.Ka;break}a=Q.get_trans_view(w.A.D);ga.copy(a,q.Cc.wJ);var B=k.get_move_style(w);B==k.MS_HOVER_CONTROLS?ga.copy(w.A.wc,q.Cc.zC):B==k.MS_STATIC||
B==k.MS_EYE_CONTROLS?(Q.copy(w.A.D,q.Cc.Dl),f(w,y,v,q.Cc.Ti)):ga.copy(w.A.pivot,q.Cc.zC);ga.copy(y,q.Cc.vJ);ga.copy(v,q.Cc.rJ);q.state=0;A=K.animate(0,1,1E3*A,function(a){D.Pa()&&(B==k.MS_STATIC||B==k.MS_EYE_CONTROLS?Q.interpolate(q.Cc.Dl,q.Cc.Ti,R.smooth_step(a),q.Cc.Ir):(q.Cc.IA=ga.lerp(q.Cc.zC,q.Cc.rJ,R.smooth_step(a),q.Cc.IA),q.Cc.JA=ga.lerp(q.Cc.wJ,q.Cc.vJ,R.smooth_step(a),q.Cc.JA)),e(w,q.Cc.JA,q.Cc.IA,q.Cc.Ir),1==a&&(q.state=1))});break;case 1:K.clear_animation(A),q.state=-1,d.qa=a.Ka}}},SET_CAMERA_MOVE_STYLE:function(a,
c,d){function e(a,b){f.id0||(b.ob.id0=u.Vc(u.Hd,a.md.id0,0))||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);f.pvo&&!f.id1&&(b.ob.id1=u.Vc(u.Hd,a.md.id1,0))}var f=a.P;switch(c.state){case 2:var l=b(a,d,e),m=f.id0?h(a.O.id0,c.G,d.G):l.ob.id0,n=m.A;l.LN={Al:n.Al,use_panning:n.use_panning,Vb:n.Vb,Xa:n.Xa,Kb:n.Kb,Dd:n.Dd,Ed:n.Ed,ke:n.ke,ui:n.ui};if(ra.is_camera(m)){var n=m.A,p=l.LN;k.pt(m);switch(a.Fc.camera_move_style){case 0:n.nb=k.MS_STATIC;break;case 2:n.nb=k.MS_EYE_CONTROLS;
var q=Q.get_trans_view(n.D);k.LI(m,q,null,p.Vb,p.Xa);break;case 3:n.nb=k.MS_HOVER_CONTROLS;var q=Q.get_trans_view(n.D),w=ia;a.P.pvo?(l=f.id1?h(a.O.id1,c.G,d.G):l.ob.id1,w=Q.get_trans_view(l.A.D)):(w[0]=a.P.pvx?r(h(a.O.pvx,c.G,d.G),0):a.ya.pvx,w[1]=a.P.pvy?r(h(a.O.pvy,c.G,d.G),0):a.ya.pvy,w[2]=a.P.pvz?r(h(a.O.pvz,c.G,d.G),0):a.ya.pvz);k.MI(m,q,w,p.Kb,p.Xa,p.Dd,p.Ed,p.ui);break;case 1:n.nb=k.MS_TARGET_CONTROLS,q=Q.get_trans_view(n.D),w=ia,a.P.pvo?(l=f.id1?h(a.O.id1,c.G,d.G):l.ob.id1,w=Q.get_trans_view(l.A.D)):
(w[0]=a.P.pvx?r(h(a.O.pvx,c.G,d.G),0):a.ya.pvx,w[1]=a.P.pvy?r(h(a.O.pvy,c.G,d.G),0):a.ya.pvy,w[2]=a.P.pvz?r(h(a.O.pvz,c.G,d.G),0):a.ya.pvz),k.NI(m,q,w,p.Vb,p.Xa,p.Kb,p.ke,p.use_panning)}ha[0]=a.P.vtr?r(h(a.O.vtr,c.G,d.G),0):a.ya.vtr;ha[1]=a.P.vro?r(h(a.O.vro,c.G,d.G),0):a.ya.vro;ha[2]=a.P.vzo?r(h(a.O.vzo,c.G,d.G),0):a.ya.vzo;ha[0]=R.clamp(ha[0],0,Infinity);ha[1]=R.clamp(ha[1],0,Infinity);ha[2]=R.clamp(ha[2],0,.99);n.Sp=ha[0];n.Rp=ha[1];n.Tp=ha[2];U.V(m);I.sync_transform(m);k.Co(m)}else g.error("Logic script error: object is not a Camera. Node: ",
a.name);d.qa=a.Ka}},SET_CAMERA_LIMITS:function(a,c,d){function e(a,b){var c;f.id0||(c=b.ob.id0=u.Vc(u.Hd,a.md.id0,0),c||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var f=a.P;switch(c.state){case 2:var l=b(a,d,e),l=f.id0?h(a.O.id0,c.G,d.G):l.ob.id0;if(ra.is_camera(l)){switch(l.A.nb){case k.MS_TARGET_CONTROLS:if(a.P.dsl){var m=a.P.dslmin?r(h(a.O.dslmin,c.G,d.G),0):a.ya.dslmin,n=a.P.dslmax?r(h(a.O.dslmax,c.G,d.G),0):a.ya.dslmax,p={};p.min=Math.max(m,0);p.max=Math.max(n,
0);k.uI(l,p)}a.P.vrl&&(m=a.P.vrldown?r(h(a.O.vrldown,c.G,d.G),0):a.ya.vrldown,n=a.P.vrlup?r(h(a.O.vrlup,c.G,d.G),0):a.ya.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==a.Fc.cam_lim_vert_rot_space_type,k.mx(l,p));a.P.hrl&&(m=a.P.hrlleft?r(h(a.O.hrlleft,c.G,d.G),0):a.ya.hrlleft,n=a.P.hrlright?r(h(a.O.hrlright,c.G,d.G),0):a.ya.hrlright,p={},p.left=m,p.right=n,p.camera_space="CAMERA"==a.Fc.cam_lim_hor_rot_space_type,k.lx(l,p));a.P.pvl&&(m=a.P.pvlmin?r(h(a.O.pvlmin,c.G,d.G),0):a.ya.pvlmin,c=a.P.pvlmax?
r(h(a.O.pvlmax,c.G,d.G),0):a.ya.pvlmax,p={},p.min_z=m,p.max_z=c,k.GI(l,p));break;case k.MS_HOVER_CONTROLS:a.P.htl&&(m=a.P.htlmin?r(h(a.O.htlmin,c.G,d.G),0):a.ya.htlmin,n=a.P.htlmax?r(h(a.O.htlmax,c.G,d.G),0):a.ya.htlmax,p={},p.min=m,p.max=n,k.CI(l,p));a.P.vtl&&(m=a.P.vtlmin?r(h(a.O.vtlmin,c.G,d.G),0):a.ya.vtlmin,n=a.P.vtlmax?r(h(a.O.vtlmax,c.G,d.G),0):a.ya.vtlmax,p={},p.min=m,p.max=n,k.JI(l,p));a.P.vrl&&(m=a.P.vrldown?r(h(a.O.vrldown,c.G,d.G),0):a.ya.vrldown,n=a.P.vrlup?r(h(a.O.vrlup,c.G,d.G),0):
a.ya.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==a.Fc.cam_lim_vert_rot_space_type,k.hover_set_vertical_limits(l,p));a.P.dsl&&(m=a.P.dslmin?r(h(a.O.dslmin,c.G,d.G),0):a.ya.dslmin,n=a.P.dslmax?r(h(a.O.dslmax,c.G,d.G),0):a.ya.dslmax,p={},p.min=Math.max(m,0),p.max=Math.max(n,0),k.hover_set_distance_limits(l,p));break;case k.MS_EYE_CONTROLS:a.P.vrl&&(m=a.P.vrldown?r(h(a.O.vrldown,c.G,d.G),0):a.ya.vrldown,n=a.P.vrlup?r(h(a.O.vrlup,c.G,d.G),0):a.ya.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==
a.Fc.cam_lim_vert_rot_space_type,k.mx(l,p)),a.P.hrl&&(m=a.P.hrlleft?r(h(a.O.hrlleft,c.G,d.G),0):a.ya.hrlleft,n=a.P.hrlright?r(h(a.O.hrlright,c.G,d.G),0):a.ya.hrlright,p={},p.left=m,p.right=n,p.camera_space="CAMERA"==a.Fc.cam_lim_hor_rot_space_type,k.lx(l,p))}U.V(l);I.sync_transform(l)}else g.error("Logic script error: object is not a Camera. Node: ",a.name);d.qa=a.Ka}},MOVE_TO:function(a,c,d){function e(a,b){U.set_tsr(a,b);U.V(a);I.sync_transform(a)}function f(a,b,d){b.ob.id0=p(a,"id0",k,c.G,d.G);
b.ob.id0||k||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.ob.id1=p(a,"id1",m,c.G,d.G);b.ob.id1||m||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.vc={zF:new Float32Array(8),Qz:new Float32Array(8),GG:new Float32Array(8)}}var l=a.P,k=l.id0,m=l.id1;switch(c.state){case 2:var n=b(a,d,f),q=l.id0?h(a.O.id0,c.G,d.G):n.ob.id0;if(q.is_dynamic)switch(Q.copy(q.A.D,n.vc.zF),Q.copy((l.id1?h(a.O.id1,c.G,d.G):n.ob.id1).A.D,n.vc.Qz),n.state){case -1:l=
a.P.dur?r(h(a.O.dur,c.G,d.G),0):a.ya.dur;if(0==l){e(q,n.vc.Qz);d.qa=a.Ka;break}n.state=0;var u=K.animate(0,1,1E3*l,function(a){D.Pa()&&(n.vc.GZ=Q.interpolate(n.vc.zF,n.vc.Qz,R.smooth_step(a),n.vc.GG),e(q,n.vc.GG),1==a&&(n.state=1))});break;case 1:K.clear_animation(u),n.state=-1,d.qa=a.Ka}else g.error("Logic script error: object '"+q.name+"' must be dynamic. Node: ",a.name),d.qa=a.Ka}},TRANSFORM_OBJECT:function(a,c,d){function e(a,b,c){0==c?U.set_tsr(a,b):U.set_tsr_rel(a,b);U.V(a);I.sync_transform(a)}
var f=a.P.id0,l=b(a,d,function(a,b,d){b.obj=p(a,"id0",f,c.G,d.G);b.obj||f||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.vc={Fx:0,Dl:new Float32Array(8),Ti:new Float32Array(8),Ir:new Float32Array(8)}});switch(c.state){case 2:var k=f?h(a.O.id0,c.G,d.G):l.obj;switch(l.state){case -1:ha[0]=a.P.trx?r(h(a.O.trx,c.G,d.G),0):a.ya.trx;ha[1]=a.P["try"]?r(h(a.O["try"],c.G,d.G),0):a.ya["try"];ha[2]=a.P.trz?r(h(a.O.trz,c.G,d.G),0):a.ya.trz;ia[0]=a.P.rox?r(h(a.O.rox,c.G,
d.G),0)*Math.PI/180:a.ya.rox;ia[1]=a.P.roy?r(h(a.O.roy,c.G,d.G),0)*Math.PI/180:a.ya.roy;ia[2]=a.P.roz?r(h(a.O.roz,c.G,d.G),0)*Math.PI/180:a.ya.roz;var m=a.P.sc?h(a.O.sc,c.G,d.G):a.ya.sc;R.euler_to_quat(ia,T);Q.set_sep(ha,m,T,l.vc.Ti);l.vc.Fx=a.Fc.space_type;switch(l.vc.Fx){case 0:U.get_tsr(k,l.vc.Dl);break;case 1:U.get_tsr_rel(k,l.vc.Dl);break;case 2:U.get_tsr_rel(k,l.vc.Dl),Q.multiply(l.vc.Dl,l.vc.Ti,l.vc.Ti)}m=a.P.dur?r(h(a.O.dur,c.G,d.G),0):a.ya.dur;if(0==m){e(k,l.vc.Ti,l.vc.Fx);d.qa=a.Ka;break}l.state=
0;m=K.animate(0,1,1E3*m,function(a){D.Pa()&&(Q.interpolate(l.vc.Dl,l.vc.Ti,R.smooth_step(a),l.vc.Ir),e(k,l.vc.Ir,l.vc.Fx),1==a&&(l.state=1))});break;case 1:K.clear_animation(m),l.state=-1,d.qa=a.Ka}}},SPEAKER_PLAY:function(a,c,d){function e(a,b,d){b.obj=p(a,"id0",f,c.G,d.G);b.obj||f||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var f=a.P.id0;switch(c.state){case 1:void 0==a.P.not_wait&&(a.P.not_wait=!0);break;case 2:var l=b(a,d,e);l.obj=f?h(a.O.id0,c.G,d.G):l.obj;m.is_playing(l.obj)||
0!=l.state||(l.state=1);switch(l.state){case -1:for(var k in c.Df){var n=c.Df[k].Pb.qa;-1!=n&&(n=c.Df[k].Z[n],"SPEAKER_PLAY"==n.type&&n!=a&&0==l.state&&n.obj==a.obj&&(n.state=1))}a.P.not_wait||(d.Zg=!0);m.play_def(l.obj);l.state=0;break;case 0:a.P.not_wait&&(d.qa=a.Ka,l.state=-1);break;case 1:a.P.not_wait||(d.Zg=!1);d.qa=a.Ka;l.state=-1;break;default:R.K("Unknown state of "+a.name),l.state=-1}}},SPEAKER_STOP:function(a,c,d){function e(a,b,d){b.obj=p(a,"id0",f,c.G,d.G);b.obj||f||(g.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0)}var f=a.P.id0;switch(c.state){case 2:var l=b(a,d,e);m.stop(f?h(a.O.id0,c.G,d.G):l.obj);d.qa=a.Ka}},STOP_ANIM:function(a,c,d){function e(a,b,d){b.obj=l?u.get_world_by_name(a.DF[0],0):p(a,"id0",f,c.G,d.G);b.obj||f||(g.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var f=a.P.id0,l=a.P.env;switch(c.state){case 2:var k=b(a,d,e);k.obj=f?h(a.O.id0,c.G,d.G):k.obj;n.stop(k.obj,n.SLOT_ALL);a.P.rst&&n.set_first_frame(k.obj,n.SLOT_ALL);d.qa=a.Ka}},STOP_TIMELINE:function(a,
b,c,d){switch(b.state){case 2:a.P.rst&&F.FI(d),F.sC(),c.qa=a.Ka}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d=0,e="{",f;for(f in a.O){0<d&&(e+=", ");var l=h(a.O[f],b.G,c.G),e=e+('"'+a.O[f][1]+'": ');try{e+=JSON.stringify(l)}catch(Ca){e=l?e+('{"name": "'+l.name+'", "type": "'+l.type+'"}'):e+"Object"}++d}g.log(a.Fc.msg,e+"}");c.qa=a.Ka}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.P.id0?r(h(a.O.id0,b.G,c.G),1):a.bk.id0,e=a.P.id1?r(h(a.O.id1,b.G,c.G),1):a.bk.id1,g=0;switch(a.Fc.string_operation){case 0:g=
d+e;break;case 1:g=d.indexOf(e);break;case 2:g=d.replace(e,a.P.id2?r(h(a.O.id2,b.G,c.G),1):a.bk.id2);break;case 3:var l=a.O,g=d.substring(0,d.indexOf(e));f(l.dst1,b.G,c.G,d.substring(d.indexOf(e)+1,d.length));""==h(l.dst,b.G,c.G)&&(g=h(l.dst1,b.G,c.G),f(l.dst1,b.G,c.G,""));break;case 4:switch(a.Fc.condition){case 5:g=d==e?1:0;break;case 4:g=d!=e?1:0;break;case 3:g=d<e?1:0;break;case 2:g=d>e?1:0;break;case 1:g=d<=e?1:0;break;case 0:g=d>=e?1:0}}f(a.O.dst,b.G,c.G,g);c.qa=a.Ka}},GET_TIMELINE:function(a,
b,c,d){switch(b.state){case 2:d=a.P.nla?r(F.get_frame(d),0):r(K.get_frame(d),0),f(a.O.vd,b.G,c.G,d),c.qa=a.Ka}},JSON:function(a,b,c){function d(a,b,c,d){for(var e=0;e<b.length;e++){for(var g=b[e].split("."),f=a,h=c[e],l=0;l<g.length&&(f=f[g[l]],void 0!==f&&null!==f);l++);f=H(f);d[h]=f}}function e(a,b,c,d){d||(d={});for(var e=0;e<b.length;e++){var g=b[e].split("."),f=d,h=c[e];if(h in a){for(var l=0;l<g.length-1;l++)void 0===f[g[l]]&&(f[g[l]]=isNaN(g[l+1])?{}:[]),f=f[g[l]];f[g[g.length-1]]=H(a[h])}}}
switch(b.state){case 2:switch(a.Fc.json_operation){case "PARSE":try{var l=JSON.parse(r(h(a.O.jsn,b.G,c.G),1));d(l,a.BT,a.CT,c.G)}catch(ca){g.error("logic script error: non valid JSON string")}break;case "ENCODE":l={},e(c.G,a.hQ,a.iQ,l),l=r(JSON.stringify(l),1),f(a.O.jsn,b.G,c.G,l)}c.qa=a.Ka}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var d=a.P.cb?r(h(a.O.cb,b.G,c.G),1):a.bk.cb,e=[],l=0,k="id"+l,m=a.Fc.js_cb_params;k in m;)k=0==m[k]?u.Vc(u.Hd,a.md[k],0):h(a.O[k],b.G,c.G),e.push(k),l++,
k="id"+l;m=[];l=0;for(k="out"+l;k in a.O;)k=h(a.O[k],b.G,c.G),m.push(k),l++,k="out"+l;l=1;if(d in wa){if(l=!wa[d](e,m))for(d=0;d<m.length;d++)k="out"+d,k in a.O&&f(a.O[k],b.G,c.G,H(m[d]))}else g.error("logic script error: no custom callback with id "+d);l&&(c.qa=a.Ka)}},EMPTY:q,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date,e,g,h,l,k;"L"==a.Fc.time_type?(e=d.getFullYear(),g=d.getMonth(),h=d.getDate(),l=d.getHours(),k=d.getMinutes(),d=d.getSeconds()):(e=d.getUTCFullYear(),g=d.getUTCMonth(),
h=d.getUTCDate(),l=d.getUTCHours(),k=d.getUTCMinutes(),d=d.getUTCSeconds());a.P.y&&f(a.O.y,b.G,c.G,e);a.P.M&&f(a.O.M,b.G,c.G,g);a.P.d&&f(a.O.d,b.G,c.G,h);a.P.h&&f(a.O.h,b.G,c.G,l);a.P.m&&f(a.O.m,b.G,c.G,k);a.P.s&&f(a.O.s,b.G,c.G,d);c.qa=a.Ka}},ELAPSED:function(a,b,c,d,e){switch(b.state){case 2:f(a.O.s,b.G,c.G,e),c.qa=a.Ka}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.mH.id0;for(var d=a.Yk.id0,e=0;e<b.Yk.length;e++){var g=b.Yk[e];if(g.id[0][0]==c[0]&&g.id[0][1]==c[1]&&g.id[1]==d){a.dA=e;break}}break;
case 2:d={};c.qy={};for(e in a.O){var g=a.O[e][1],f=a.bk[e];d[f]=c.G[g];e.startsWith("out")&&(c.qy[g]=f)}c.gm.push({EE:a,G:d,ow:b.Yk[a.dA]});c.G=d;c.QC=!0;c.qa=b.Yk[a.dA].ur.Z[0].Ka}},DEF_FUNC:q,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.O);for(var d in b)b[d].startsWith("id")||b.splice(d,1);a.lw=b;break;case 2:var e=h(a.O.v,b.G,c.G);for(d in a.lw)if(e==h(a.O[a.lw[d]],b.G,c.G)){c.qa=a.fH[a.lw[d]];return}c.qa=a.Ka}}},fa=[],wa={},da={};a.dS=function(a,b){var c={de:b,sI:a.name,state:0,
So:null,kb:a,Lz:null,Df:[],Yk:[],Js:[],G:{},qy:{}};a.kY=c;v(a,c)};a.update=function(a,b){var c=F.GR();if(!(0>=c))for(var d=0;d<fa.length;d++)for(var e=d,g=a,f=b,h=c,l=fa[e],k=0;k<fa[e].Df.length;k++){l.Lz=fa[e].Df[k];var m=fa[e].Df[k],n=l,p=g,r=f,q=h;m.Pb.QC=!1;var u=m.Pb.gm,w=1>=u.length?m.Z:u[u.length-1].ow.ur.Z;if(w.length){for(var v=0;v<w.length;v++)w[v].Yw=!1;for(v=0;v<w.length;v++){if(0<=m.Pb.qa)var D=w[m.Pb.qa];else{if(1<m.Pb.gm.length){n=m.Pb.gm.pop().EE;u=u[u.length-1];m.Pb.qa=n.Ka;n=m.Pb.G;
m.Pb.G=u.G;for(var y in m.Pb.qy)m.Pb.G[y]=n[m.Pb.qy[y]]}break}if(D.Yw)break;if(D.mute)if("ENTRYPOINT"==D.type)break;else m.Pb.qa=D.Ka,D.Yw=!0;else if(D.JB(D,n,m.Pb,p,r,q),D.Yw=!0,m.Pb.QC)break}}}};a.NM=function(a,b){wa[a]=b};a.bU=function(a){delete wa[a]};a.vU=function(a,b){for(var c=0;c<fa.length;c++)if(fa[c].sI==a){for(var c=fa[c],d=0;d<c.Df.length;d++){var e=c.Df[d].Z[0];if(e.name==b){e.P.js&&(e.mute=!1);c.Df[d].Pb.qa=0;break}}break}};a.cleanup=function(){fa.length=0;wa={};da={}}};b4w.module.__main=function(a,t){function e(a,b,d){var e=c.get_canvas();if(e.toBlob)e.toBlob(a,b,d);else{d=atob(e.toDataURL(b,d).split(",")[1]);for(var e=new Uint8Array(d.length),f=0;f<d.length;f++)e[f]=d.charCodeAt(f);a(new Blob([e],{type:b||"image/png"}))}}var c=t("__container"),b=null,h="image/png",f=1,q="",l=!1,x=!1;a.canvas_data_url=function(a,c,d,e){l=x="undefined"===typeof e?e:!0;b=a;h=c||h;f=d||f};a.frame=function(){var a=b;a&&(l&&q&&URL.revokeObjectURL(q),e(function(b){navigator.msSaveOrOpenBlob?
a(b):(q=URL.createObjectURL(b),a(q))},h,f),b=null,h="image/png",f=1)}};b4w.module.__math=function(a,t){function e(a,b){for(var c=a[1],d=1,e=2;e<a.length;e++)4!=e&&8!=e&&Math.abs(a[e])>Math.abs(c)&&(c=a[e],d=e);for(var f=Math.floor(d/3),d=d%3,c=.5*Math.atan(2*c/(a[3*f+f]-a[3*d+d])),e=0;e<b.length;e++)b[e]=e&&4!=e&&8!=e?0:1;b[d+3*f]=-Math.sin(c);b[f+3*d]=Math.sin(c);b[f+3*f]=Math.cos(c);b[d+3*d]=Math.cos(c);return b}function c(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function b(a,b){for(var c=a.content[b];0<b;){var d=(b+1>>1)-1,e=a.content[d];if(a.jn(c)<a.jn(e))a.content[d]=
c,a.content[b]=e,b=d;else break}}function h(a,b){for(var c=a.content.length,d=a.content[b],e=a.jn(d);;){var f=b+1<<1,h=f-1,l=null;if(h<c){var g=a.jn(a.content[h]);g<e&&(l=h)}f<c&&a.jn(a.content[f])<(null===l?e:g)&&(l=f);if(null!==l)a.content[b]=a.content[l],a.content[l]=d,b=l;else break}}function f(a,b,c,d){return c-q(d-a,0,c,d)+b}function q(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*
a+.984375)+b}var l=t("__mat3"),x=t("__vec3"),y=new Float32Array(3),p=new Float32Array(9),d=new Float32Array(9),v=new Float32Array(9),r=new Float32Array(9);a.get_pline_directional_vec=function(a,b){b=b||new Float32Array(3);b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.get_pline_initial_point=function(a,b){b=b||new Float32Array(3);return x.copy(a,b)};a.set_pline_initial_point=function(a,b){x.copy(b,a)};a.set_pline_directional_vec=function(a,b){x.normalize(b,y);a[3]=y[0];a[4]=y[1];a[5]=y[2]};a.calc_pline_point=
function(a,b,c){c=c||new Float32Array(3);c[0]=a[0]+a[3]*b;c[1]=a[1]+a[4]*b;c[2]=a[2]+a[5]*b;return c};a.JN=function(a,b){b[0]=0;b[1]=0;for(var c=b[2]=0;c<a.length;c+=3)b[0]+=a[c],b[1]+=a[c+1],b[2]+=a[c+2];return x.scale(b,3/a.length,b)};a.FN=function(a,b,c){for(var d=0;d<c.length;d++)c[d]=0;for(d=0;d<a.length;d+=3){var e=a[d]-b[0],f=a[d+1]-b[1],h=a[d+2]-b[2];c[0]+=e*e;c[1]+=e*f;c[2]+=e*h;c[4]+=f*f;c[5]+=f*h;c[8]+=h*h}c[3]=c[1];c[6]=c[2];c[7]=c[5];for(d=0;d<c.length;d++)c[d]*=3/a.length;return c};
a.wQ=function(a,b){var f=l.copy(a,p);if(5E-4>c(f))return l.identity(b);var h=e(f,d),q=l.transpose(h,v);l.multiply(f,q,r);l.multiply(h,r,f);for(var k=l.copy(h,b),y=1;5E-4<=c(f)&&100>y;)h=e(f,d),q=l.transpose(h,v),l.multiply(f,q,r),l.multiply(h,r,f),l.multiply(h,k,k),y++;return k};a.point_plane_dist=function(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]};a.qN=function(a){return{content:[],jn:a}};a.pE=function(a,c){a.content.push(c);b(a,a.content.length-1)};a.rN=function(a){var b=a.content[0],c=a.content.pop();
0<a.content.length&&(a.content[0]=c,h(a,0));return b};a.wY=function(a,c){var d=a.content.indexOf(c),e=a.content.pop();d!==a.content.length-1&&(a.content[d]=e,a.jn(e)<a.jn(c)?b(d):h(d))};a.sN=function(a,c){b(a,a.content.indexOf(c))};a.linear_tween=function(a,b,c,d){return c*a/d+b};a.ease_in_quad=function(a,b,c,d){return c*(a/=d)*a+b};a.ease_out_quad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b};a.ease_in_out_quad=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};a.ease_in_cubic=function(a,
b,c,d){return c*(a/=d)*a*a+b};a.ease_out_cubic=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b};a.ease_in_out_cubic=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b};a.ease_in_quart=function(a,b,c,d){return c*(a/=d)*a*a*a+b};a.ease_out_quart=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b};a.ease_in_out_quart=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};a.ease_in_quint=function(a,b,c,d){return c*(a/=d)*a*a*a*a+b};a.ease_out_quint=function(a,b,c,d){return c*
((a=a/d-1)*a*a*a*a+1)+b};a.ease_in_out_quint=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};a.ease_in_sine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b};a.ease_out_sine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b};a.ease_in_out_sine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b};a.ease_in_expo=function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b};a.ease_out_expo=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b};a.ease_in_out_expo=
function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};a.ease_in_circ=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b};a.ease_out_circ=function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b};a.ease_in_out_circ=function(a,b,c,d){return 1>(a/=d/2)?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};a.ease_in_elastic=function(a,b,c,d){var e=0,f=c;if(0==a)return b;if(1==(a/=d))return b+c;e||(e=.3*d);f<Math.abs(c)?(f=c,c=e/4):c=e/(2*
Math.PI)*Math.asin(c/f);return-(f*Math.pow(2,10*--a)*Math.sin(2*(a*d-c)*Math.PI/e))+b};a.ease_out_elastic=function(a,b,c,d){var e,f=0,h=c;if(0==a)return b;if(1==(a/=d))return b+c;f||(f=.3*d);h<Math.abs(c)?(h=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/h);return h*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b};a.ease_in_out_elastic=function(a,b,c,d){var e,f=0,h=c;if(0==a)return b;if(2==(a/=d/2))return b+c;f||(f=.3*d*1.5);h<Math.abs(c)?(h=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/h);return 1>a?-.5*h*Math.pow(2,
10*--a)*Math.sin(2*(a*d-e)*Math.PI/f)+b:h*Math.pow(2,-10*--a)*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b};a.ease_in_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*(a/=d)*a*((e+1)*a-e)+b};a.ease_out_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b};a.ease_in_out_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b};a.ease_in_bounce=f;a.ease_out_bounce=q;a.ease_in_out_bounce=
function(a,b,c,d){return a<d/2?.5*f(2*a,0,c,d)+b:.5*q(2*a-d,0,c,d)+.5*c+b}};b4w.module.__navmesh=function(a,t){function e(a,c){function d(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.Ll,g=c.Ll,f=[],h=0;h<e.length;h++)0<=b(g,e[h])&&f.push(e[h]);if(2>f.length)return[];0<=b(f,e[0])&&0<=b(f,e[e.length-1])&&d(e);0<=b(f,g[0])&&0<=b(f,g[g.length-1])&&d(g);f=[];for(h=0;h<e.length;h++)0<=b(g,e[h])&&f.push(e[h]);return f}function c(a){function b(a){for(var c=a.fh,d=0;d<c.length;d++){var e=c[d];void 0==e.island&&(e.island=a.island,b(e))}}a=a.MT;for(var c=[],d=0,e=0;e<a.length;e++){var g=
a[e];void 0==g.island&&(g.island=d++,b(g));c[g.island]||(c[g.island]=[]);c[g.island].push(a[e])}return c}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function h(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var d={},g=a.Vp,f=0;f<g.length;f++)g[f][0]=parseFloat(g[f][0].toFixed(2)),g[f][1]=parseFloat(g[f][1].toFixed(2)),g[f][2]=parseFloat(g[f][2].toFixed(2));d.Vp=a.Vp;a=c(a);d.OA=[];for(f=0;f<a.length;f++){for(var g=
[],h=a[f],l=0;l<h.length;l++){for(var k=[],m=h[l],n=0;n<m.fh.length;n++)k.push(b(h,m.fh[n]));for(var p=[],n=0;n<m.fh.length;n++)p.push(e(m,m.fh[n]));m.ed[0]=parseFloat(m.ed[0].toFixed(2));m.ed[1]=parseFloat(m.ed[1].toFixed(2));m.ed[2]=parseFloat(m.ed[2].toFixed(2));g.push({id:b(h,m),fh:k,Ll:m.Ll,ed:m.ed,Wc:m.Wc,NT:p,bA:0,vr:0,Ub:0,xO:1,YC:!1,closed:!1,parent:null})}d.OA.push(g)}return d}function f(a,b,c,d,e){function g(a,b){C.subtract(a,b,F);return C.dot(F,F)}function f(a,b){for(var c=[],d=0;d<b.fh.length;d++)c.push(a[b.fh[d]]);
return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.bA=0;c.vr=0;c.Ub=0;c.xO=1;c.YC=!1;c.closed=!1;c.parent=null}})(a);var h=E.qN(function(a){return a.bA});for(E.pE(h,b);0<h.content.length;){var l=E.rN(h);if(l===c){a=l;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}l.closed=!0;for(var k=f(a,l),m=0,n=k.length;m<n;m++){var p=k[m];if(!p.closed){var r=l.vr+C.dist(p.ed,l.ed),q=p.YC;if(!q||r<p.vr)p.YC=!0,p.parent=l,p.Ub=p.Ub||g(p.ed,e)+g(p.ed,d),p.vr=r,p.bA=p.vr+p.Ub,q?E.sN(h,
p):E.pE(h,p)}}}return[]}function q(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function l(a,b,c,d){b=C.subtract(b,a,F);a=C.subtract(c,a,u);a=C.cross(b,a,F);return n.sign(C.dot(d,a))}function x(a,b){C.subtract(a,b,F);return 1E-5>C.dot(F,F)}function y(a,b,c){var d=C.subtract(b.right,b.left,F),e=c.Wc,g=b.Wc;c=Math.acos(C.dot(e,g));e=n.sign(C.dot(d,C.cross(e,g,u)));c*=-e;e=w.identity(A);w.translate(e,b.left,e);w.rotate(e,c,d,e);w.translate(e,C.scale(b.left,-1,u),e);w.multiply(a,e,a)}function p(a,b,c,
d,e,f,h,l,m){for(var n=w.identity(N),p=e;p<c;p++)if(a[p].OG&&(p>e||!p)){var r,u=b,v=d;r=a[p].left;var A=a[p].right,x=f,z=n,t=C.create(),G=C.transformMat4(r,z,g);G[3]=1;z=C.transformMat4(A,z,F);z=C.subtract(z,G,D);u=C.subtract(v,u,F);x=C.cross(x,u,B);.01>Math.abs(C.dot(x,z))?v=.5:(C.normalize(x,x),x[3]=-C.dot(x,v),v=-k.dot(x,G)/k.dot(x,z));A=C.subtract(A,r,F);r=C.scaleAndAdd(r,A,v,t);q(h,r);l&&q(m,a[p].Wc);p&&y(n,a[p],a[p-1])}}function d(a,b){function c(b,c){D=v=u=c;h=f=g=b;C.copy(b,k);C.copy(b,n);
C.copy(a[u].Wc,r)}var d=[],e=[],g,f,h,k,n,r,u=0,v=0,D=0;g=a[0].right;f=a[0].left;h=a[0].right;k=C.copy(f,G);n=C.copy(h,z);r=C.copy(a[0].Wc,m);q(d,g);b&&q(e,a[0].Wc);for(var A=w.identity(L),B=1;B<a.length;B++){var t=a[B].left,F=a[B].right,E=C.transformMat4(t,A,I),H=C.transformMat4(F,A,S);a[B].OG&&y(A,a[B],a[B-1]);if(0>=l(g,n,H,r)){var N=x(g,h);if(N||0<l(g,k,H,r))h=F,C.copy(H,n),D=B;else{(t=x(k,g))||p(a,k,v,g,u,r,d,b,e);A=w.identity(A);c(f,v);B=u;t||(q(d,g),b&&q(e,a[B].Wc));continue}}0<=l(g,k,E,r)&&
((N=x(g,f))||0>l(g,n,E,r)?(f=t,C.copy(E,k),v=B):((t=x(n,g))||p(a,n,D,g,u,r,d,b,e),A=w.identity(A),c(h,D),B=u,t||(q(d,g),b&&q(e,a[B].Wc))))}A=a.length-1;B=a[A].left;(t=x(g,B))||p(a,k,A,g,u,r,d,b,e);t&&u||q(d,B);return b?(q(e,a[A].Wc),{positions:new Float32Array(d),normals:new Float32Array(e)}):{positions:new Float32Array(d),normals:null}}function v(a,b,c,d,e){for(var g=null,f=Number.MAX_VALUE,h=0;h<a.length;h++){var l=a[h],k=e(c,l.ed,l.Ll,b,f);k<f&&(g=l,f=k)}return 0<d&&f>d?null:g}function r(a,b,c,
d,e){a.push({left:b,right:c,OG:d,Wc:e})}var H=t("__geometry"),E=t("__math"),w=t("__mat4"),n=t("__util"),C=t("__vec3"),k=t("__vec4"),F=C.create(),u=C.create(),g=k.create(),D=k.create(),B=k.create(),N=w.create(),L=w.create(),A=w.create(),G=C.create(),z=C.create(),I=C.create(),S=C.create(),m=C.create();a.oT=function(a){var b=H.rA(a.kc,H.Kn),c=a.fe;a=[];for(var d=0;d<c.length;d+=3)a.push({za:new Uint32Array([c[d],c[d+1],c[d+2]]),ed:new Float32Array(3),Wc:new Float32Array(3)});c=[];for(d=0;d<b.length;d+=
3){var e=new Float32Array(3);e[0]=b[d];e[1]=b[d+1];e[2]=b[d+2];c.push(e)}for(b=0;b<a.length;b++)d=a[b],C.add(c[d.za[0]],c[d.za[1]],F),C.add(F,c[d.za[2]],F),C.scale(F,1/3,d.ed);for(b=0;b<a.length;b++){var d=a[b],e=C.subtract(c[d.za[1]],c[d.za[0]],F),g=C.subtract(c[d.za[2]],c[d.za[0]],u),e=C.cross(e,g,F);C.normalize(e,e);C.copy(e,d.Wc)}for(var f={},b=[],d=[],l,k,m=Math.pow(10,4),e=0,g=c.length;e<g;e++)l=c[e],k=Math.round(l[0]*m)+"_"+Math.round(l[1]*m)+"_"+Math.round(l[2]*m),void 0===f[k]?(f[k]=e,b.push(l),
d[e]=b.length-1):d[e]=d[f[k]];f=[];e=0;for(g=a.length;e<g;e++)for(l=a[e],l.za[0]=d[l.za[0]],l.za[1]=d[l.za[1]],l.za[2]=d[l.za[2]],l=[l.za[0],l.za[1],l.za[2]],k=0;3>k;k++)if(l[k]==l[(k+1)%3]){f.push(e);break}for(e=f.length-1;0<=e;e--)a.splice(f[e],1);for(e=c.length=0;e<b.length;e++)c.push(b[e]);d=[];for(b=e=0;b<a.length;b++)g=a[b],d.push({id:e++,Ll:g.za,ed:g.ed,Wc:g.Wc,fh:[]});a={MT:d,Vp:c};c={};for(b=0;b<d.length;b++)for(e=0;3>e;e++)g=d[b].Ll[e],f=d[b].Ll[(e+1)%3],g=g>f?f+"-"+g:g+"-"+f,g in c||(c[g]=
[]),c[g].push(d[b]);d=Object.keys(c);b=0;for(f=d.length;b<f;b++)for(g=d[b],e=0;e<c[g].length;e++)for(l=e+1;l<c[g].length;l++)c[g][e].fh.push(c[g][l]),c[g][l].fh.push(c[g][e]);return h(a)};a.navmesh_get_island=function(a,b,c){for(var d=null,e=Number.MAX_VALUE,g=a.OA,f=0;f<g.length;f++)for(var h=0;h<g[f].length;h++){var l=g[f][h];C.subtract(l.ed,b,F);l=c(b,l.ed,l.Ll,a.Vp,e);l<e&&(d=f,e=l)}return d};a.sS=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(c[b[e]]);b=!1;c=-1;for(var e=d.length,g=e-
1;++c<e;g=c)(d[c][1]<=a[1]&&a[1]<d[g][1]||d[g][1]<=a[1]&&a[1]<d[c][1])&&a[0]<(d[g][0]-d[c][0])*(a[1]-d[c][1])/(d[g][1]-d[c][1])+d[c][0]&&(b=!b);return b?!0:!1};a.navmesh_find_path=function(a,b,c,e){var g;g=a.OA[e.island];var h=a.Vp,l=v(g,h,b,e.allowed_distance,e.distance_to_closest);g=l?(h=v(g,h,c,e.allowed_distance,e.distance_to_farthest))?f(g,l,h,b,c):null:null;if(g&&g.length)if(e.do_not_pull_string)if(c=g,e.return_normals){b=new Float32Array(3*c.length);for(g=0;g<c.length;g++)b.set(c[g].ed,3*g);
c={positions:b,normals:null}}else{b=new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(g=0;g<c.length;g++)b.set(c[g].ed,3*g),a.set(c[g].Wc,3*g);c={positions:b,normals:a}}else{a=a.Vp;e=e.return_normals;l=[];r(l,b,b,!1,g[0]&&g[0].Wc||n.AXIS_Z);for(b=0;b<g.length;b++){var k=g[b];if(h=g[b+1]){var m=.999>Math.abs(C.dot(k.Wc,h.Wc));a:{for(var p=0;p<k.fh.length;p++)if(k.fh[p]===h.id){k=k.NT[p];break a}k=void 0}r(l,a[k[0]],a[k[1]],m,h.Wc)}}r(l,c,c,!1,l[l.length-1].Wc);c=d(l,e)}else c=null;return c}};b4w.module.__nla=function(a,t){function e(a,b){for(var c=d.WQ(),e=[],g=0,f=0;f<a.length;f++){var h=a[f];""!=h.pq?h=k.keysearch("uuid",h.pq,c):(h=h.ag,h=k.keysearch("name",h,c)||k.keysearch("name",h+"_B4W_BAKED",c));if(h){var h=h.fcurves,l=[],n;for(n in h)l.push(n);e.push(l)}}for(f=0;f<e.length;f++){c=!1;for(n=0;n<f;n++)if(k.dN(e[f],e[n])){a[f].Bc=a[n].Bc;c=!0;break}c||(a[f].Bc=b+g++)}return g}function c(){return{type:"CLIP",Ba:0,jb:0,Tj:!1,paused:!1,ag:"",pq:"",Bc:0,Ym:null,tk:0,Tl:0,IF:0,HF:0,WJ:!1,
scale:1,repeat:1,VD:0}}function b(a,c,d){if(a.animation_data){var e=a.animation_data.nla_tracks;if(e)for(var g=0;g<e.length;g++)e[g].Ym=d,c.push(e[g])}a=a.nodes;for(g=0;g<a.length;g++)if(e=a[g],e.node_group){var f=e.node_group.node_tree;if(f){var h=d.slice();h.push(e.name);b(f,c,h)}}}function h(a,b){var c=Math.round(a)-b.Ba;b.ik&&(c%=b.Kk,0>c&&(c+=b.Kk));return b.hc+c}function f(a,b){var c=(b-u)*C.Cd()+a.hc;c>a.Ba?(c-=a.Ba,a.cyclic&&(c%=a.jb-a.Ba+1),c+=a.Ba):c=a.Ba;return c}function q(a,b){a=k.clamp(a,
b.Ba,b.jb);var c=a==b.jb?b.VD:b.tk+(a-b.Ba)/b.scale%(b.Tl-b.tk);b.WJ&&(c=b.Tl-c+b.tk);return c}function l(a,b){for(var d=[],e=0;e<a.length;e++){var g=a[e],f=g.strips;if(f)for(var h=0;h<f.length;h++){var l=f[h],k=c();k.type=l.type;k.Ba=l.frame_start;k.jb=l.frame_end;k.Bc=b;k.tk=l.action_frame_start;k.Tl=l.action_frame_end;k.WJ=l.use_reverse;k.scale=l.scale;k.repeat=l.repeat;l.action&&(k.ag=l.action.name,k.pq=l.action.uuid,k.Ym=g.Ym);d.push(k)}}return d}function x(a){return("SPEAKER"==a.type||"LAMP"==
a.type)&&a.data.animation_data&&a.data.animation_data.nla_tracks.length?!0:!1}function y(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],d=c.Md;if(c=c.Eg&&d)a:{if(d.animation_data&&(c=d.animation_data.nla_tracks)&&c.length){c=!0;break a}d=d.nodes;for(c=0;c<d.length;c++);c=!1}if(c)return!0}return!1}function p(a,b){var c=E.get_active();if(c.Ga){var d=f(c.Ga,b);c.Ga.hc-=d-a;c.Ga.po=!0}}var d=t("__animation"),v=t("__objects"),r=t("__obj_util"),
H=t("__print"),E=t("__scenes"),w=t("__sfx"),n=t("__textures"),C=t("__time"),k=t("__util"),F=[],u=-1;a.Jp=function(a,d){for(var g,f=null,h=d.S.length-1;0<=h&&(g=d.S[h],!g.kb.b4w_use_nla||(f=g,!g.kb.RD));h--);if(g=f){g.LH=!0;f=0;if((h=a.animation_data)&&h.nla_tracks.length){var k=h.nla_tracks;if(r.is_armature(d)||r.is_camera(d)||r.is_mesh(d)||r.is_empty(d)||r.is_line(d)||r.is_lamp(d)||r.is_speaker(d)||r.is_world(d))k=l(k,f),k.length&&(d.Ye=d.Ye.concat(k),f++)}x(a)&&(k=a.data.animation_data.nla_tracks,
k=l(k,f),k.length&&(d.Ye=d.Ye.concat(k),f++));if(r.is_mesh(d))for(var n=d.nc,h=0;h<n.length;h++){var p=n[h];p.Eg&&p.Md&&(k=[],b(p.Md,k,[p.name]),k=l(k,f),k.length&&(f+=e(k,f),d.Ye=d.Ye.concat(k)))}if(r.is_world(d))a.use_nodes&&a.node_tree&&(k=[],b(a.node_tree,k,[a.name]),k=l(k,f),k.length&&(e(k,f),d.Ye=d.Ye.concat(k)));else{for(h=0;h<a.particle_systems.length;h++)k=a.particle_systems[h],n=k.settings,"EMITTER"==n.type&&n.b4w_allow_nla&&(n=c(),n.type="CLIP",n.Ba=g.kb.frame_start,n.jb=g.kb.frame_end+
1,n.ag=k.name,n.Bc=f,n.tk=n.Ba,n.Tl=n.jb,d.Ye.push(n),f++);g=f+1;for(h=0;h<d.ad.length;h++)k=d.ad[h],k.FM&&(f=g,n=c(),n.type="CLIP",n.Ba=k.Ba,n.jb=k.jb,n.ag=k.name,n.Bc=f,n.tk=n.Ba,n.Tl=n.jb,d.Ye.push(n))}}};a.HW=function(a,b,d){a.Ga||(a.Ga={Ba:a.frame_start,jb:a.frame_end,hc:0,Qr:-1,ps:a.frame_end,qs:a.frame_start,xn:null,cyclic:b,ob:[],ma:[],sI:a.name,Wk:!1,po:!1,UB:!0},F.push(a.Ga));b=a.Ga;for(var e=v.mG(a,"ALL",d),g=0;g<e.length;g++){var f=e[g];if(f.Ye.length){b.ob[d]||(b.ob[d]=[]);for(var h=
0;h<f.S.length;h++){var l=f.S[h];l.kb==a&&l.LH&&b.ob[d].push(f)}for(var h=f.Ye,l=b,n=f.name,p=0;p<h.length;p++){var m=h[p];l.Ba>m.jb||l.jb<m.Ba?(H.warn("NLA: Strip is out of scene range: "+(n+" ["+m.Ba+":"+m.jb+"]")),h.splice(p,1),p--):m.ag||"CLIP"!=m.type||(H.warn('NLA: no action in strip for object "'+n+'".'),h.splice(p,1),p--)}f=f.Ye;h=b;for(l=0;l<f.length;l++){for(var n=f[l],p=h.Ba,m=h.jb+1,r=0;r<f.length;r++){var q=f[r];n.Bc==q.Bc&&(q.jb<=n.Ba&&(p=n.Ba),q.Ba>=n.jb&&(m=Math.min(m,q.Ba)))}n.IF=
p;n.HF=m;n.VD=n.repeat%1?n.tk+n.repeat%1*(n.Tl-n.tk):n.Tl}}}a=a.J.Wp;for(g=0;g<a.length;g++)e=a[g].J,e.Il&&(e.hb||e.Gd)&&e.Yp==d&&(f=c(),f.type="VIDEO",e.ik?(f.Ba=0,f.jb=b.jb):(f.Ba=k.clamp(e.Ba,0,b.jb),f.jb=k.clamp(e.Ba+e.Kk,0,b.jb)),f.ag=a[g].name,b.ma.push(e))};a.PT=function(){for(var a=0;a<F.length;a++)for(var b=F[a],c=0;c<b.ob.length;c++){var e=b.ob[c];if(e)for(a=0;a<e.length;a++)for(var f=e[a],h=f.Ye,l=0;l<h.length;l++){var k=h[l];d.ZR(f,k.Ym,k.Jc,k.ag,k.Bc)}}};a.start=function(){u=0};a.GR=
function(){return u};a.lZ=function(a){return a.Ga?a.Ga.hc:null};a.g_=function(a,b){return a.Ga?(a.Ga.hc=b,!0):!1};a.update=function(a,b){if(!(0>u)){0==u&&(u=a);for(var c=0;c<F.length;c++){var e=F[c];e.Wk&&(e.hc-=C.Cd()*b);var g=f(e,a);if((!e.Wk||e.po)&&g>=e.ps)if(e.cyclic){var g=e,l=a;g.xn&&g.xn();p(g.qs,l);g.UB=!0;g=f(g,l)}else{var l=e,r=g;l.Wk=!0;l.hc-=r-l.ps;l.xn&&l.xn()}if(!e.Wk||e.po){for(var l=e,r=g,v=0;v<l.ob.length;v++){var y=l.ob[v];if(y)for(var D=0;D<y.length;D++){for(var m=y[D],x=m.Ye,
t=0;t<x.length;t++){var E=x[t];"SOUND"==E.type&&r<l.Qr-1E-6&&(E.Tj=!1)}for(t=0;t<x.length;t++)switch(E=x[t],E.type){case "CLIP":if(E.IF<=r&&r<E.HF&&!E.Tj){var v=m,H=E,ga=H.Ym;""!=H.pq?d.ZM(v,ga,H.pq,H.Bc):d.apply(v,ga,H.ag,H.Bc);d.set_behavior(v,d.AB_FINISH_STOP,H.Bc);ga=q(H.Ba,H);d.set_frame(v,ga,H.Bc);for(v=0;v<x.length;v++)x[v]!=E&&x[v].Bc==E.Bc&&(x[v].Tj=!1);E.Tj=!0}E.Tj&&(H=m,ga=q(r,E),1E-6<Math.abs(ga-d.kA(H,E.Bc))&&d.set_frame(H,ga,E.Bc));break;case "SOUND":if((r<l.Qr-1E-6||l.Qr<E.Ba)&&E.Ba<=
r&&r<E.jb&&!E.Tj){var H=m,ra=E,ga=(ra.Ba-r)/C.Cd(),ra=(ra.jb-ra.Ba)/C.Cd();w.play(H,ga,ra);E.Tj=!0}l.Qr<E.jb&&E.jb<=r&&E.Tj&&(E.Tj=!1)}}}l=a;r=e;y=g;for(D=0;D<r.ma.length;D++)if(m=r.ma[D],m.hb||m.Gd){x=n.gK(m);t=m;E=k.clamp(h(y,t),t.hc,t.hc+n.hK(t)-1);t.Gd&&(E=n.aX(t,E),E==t.Cs&&E--);t=E;E=n.iK(m);H=v=!1;if(r.po||r.UB)H=!0;r.Wk||(ga=h(y,m),ga=m.hc<=ga&&ga<=m.hc+n.hK(m),ra=n.jK(m),m.ik&&t==E&&(H=!0),ra||x==t||(H=!0),ga&&!ra?n.play_video(m):ga&&ra?v=!0:!ga&&ra&&(m.hb&&x<t?v=!0:n.pause_video(m)));H?
(n.QU(m.lt,t,m.Yp),m.Gd&&(m.ql=n.ix(m,l))):v&&n.kK(m)&&(m.hb?n.NJ(m):(x=n.ix(m,l),x!=m.ql&&(m.Vj=t,n.MJ(m)),m.ql=x))}e.Qr=g}e.po=!1;e.UB=!1}}};a.cleanup=function(a){if(0==a)F.length=0,u=-1;else for(var b=0;b<F.length;b++)F[b].ob[a]=null};a.vE=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||x(a)||y(a)?!0:!1};a.set_frame=p;a.get_frame=function(a){var b=E.get_active();return b.Ga?f(b.Ga,a):-1};a.sC=function(){var a=E.get_active();if(a.Ga){a.Ga.Wk=!0;for(var a=a.Ga.ma,b=0;b<a.length;b++)n.pause_video(a[b])}};
a.WH=function(a){var b=E.get_active();b.Ga&&(b.Ga.Wk=!1,a?b.Ga.xn=a:b.Ga.xn=null)};a.get_frame_start=function(){var a=E.get_active();return a.Ga?a.Ga.Ba:-1};a.get_frame_end=function(){var a=E.get_active();return a.Ga?a.Ga.jb:-1};a.is_play=function(){var a=E.get_active();return a.Ga?!a.Ga.Wk:!1};a.check_nla=function(){var a=E.get_active();return a.Ga?a.b4w_use_nla:!1};a.check_logic_nodes=function(){var a=E.get_active();return a.Ga?0<a.b4w_logic_nodes.length:!1};a.set_range=function(a,b){var c=E.get_active();
if(c.Ga)c.Ga.qs=a,c.Ga.ps=b;else return!1};a.eC=function(a){var b=E.get_active();b.Ga&&(b.Ga.ps=a)};a.bV=function(a){var b=E.get_active();b.Ga&&(b.Ga.qs=a)};a.reset_range=function(){var a=E.get_active();if(a.Ga)a=a.Ga,a.qs=a.Ba,a.ps=a.jb;else return!1};a.set_cyclic=function(a){var b=E.get_active();if(b.Ga)b.Ga.cyclic=a;else return!1};a.clear_callback=function(){var a=E.get_active();a.Ga&&(a.Ga.xn=null)};a.FI=function(a){var b=E.get_active().Ga;b&&(b.hc=-(a-u)*C.Cd()+b.qs,b.po=!0)};a.get_frame_end=
function(){var a=E.get_active().Ga;return a?a.jb:null}};b4w.module.__camera=function(a,t){function e(a,b,c,d,e){Ia.set_translation(a,b);c&&k(a,b,c);B(a,d);N(a,e)}function c(a,b,c,d,e,f,g,h){var l=a.A;Ia.set_translation(a,b);l.pivot.set(c);k(a,b,c);B(a,d);N(a,e);z(a,f);I(a,g);l.use_panning=h}function b(a,b,c,d,e,f,g,h){var l=a.A;Ia.set_translation(a,b);l.wc.set(c);k(a,b,c);G(a,d);L(a,e);S(a,f);m(a,g);l.ui=h}function h(a,b,c){var d=a.A,e=ta.get_trans_view(d.D),f=ta.get_quat_view(d.D),d=Qa;d.set(na.AXIS_Z);d[3]=0;a=v(a,M)[1];f=na.quat_to_dir(f,na.AXIS_MZ,
Aa);V.set_pline_initial_point(Ja,e);V.set_pline_directional_vec(Ja,f);if(!na.line_plane_intersect(d,-b,Ja,c)||Math.abs(a)<va)xa.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),c[0]=e[0],c[1]=e[1],c[2]=0;return c}function f(b){for(var c=b.A,d=0;d<b.S.length;d++){var e=b.S[d].ja[0];if(e.type==a.re)switch(c.nb){case a.MS_TARGET_CONTROLS:var f=ta.get_trans_view(c.D);c.Qk=Y.dist(f,c.pivot);c.Rk=e.mc;break;
case a.MS_HOVER_CONTROLS:f=ta.get_trans_view(c.D),c.Qk=Y.dist(f,c.wc),c.Rk=e.mc}}}function q(a){a={type:a,name:"",WI:1,width:0,height:0,Ve:null,sr:null,Rb:null,wf:null,qb:0,mc:0,lo:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,kd:ya.create(),D:new Float32Array(9),fc:new Float32Array(16),Xp:new Float32Array(16),nt:{trans:Y.create(),angle:0},Ab:new Float32Array(16),Qf:new Float32Array(16),ty:new Float32Array(16),IB:new Float32Array(16),jh:new Float32Array(16),direction:new Float32Array(3),Rf:ta.nm(),
uy:ta.nm(),ss:ta.nm(),cx:ta.nm(),Fs:ta.nm(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,Jd:!1,dof_on:!1,mw:new Float32Array(3),Bm:x(),vl:0,Lf:0,xc:null,ri:null,br:null,Au:new Float32Array(4),ap:new Float32Array(4)};a.kd[0]=a.kd[2]=0;a.kd[1]=a.kd[3]=0;return a}function l(a,b){var c=q(a.type);c.name=a.name;c.WI=a.WI;c.width=a.width;c.height=a.height;b||(c.Ve=a.Ve,c.sr=a.sr,c.Rb=a.Rb,c.wf=a.wf);c.qb=a.qb;
c.lo=a.lo;c.mc=a.mc;c.near=a.near;c.far=a.far;c.left=a.left;c.right=a.right;c.top=a.top;c.bottom=a.bottom;ya.copy(a.kd,c.kd);ta.copy(a.D,c.D);la.copy(a.fc,c.fc);la.copy(a.Xp,c.Xp);c.nt=na.W(a.nt);la.copy(a.Ab,c.Ab);la.copy(a.Qf,c.Qf);la.copy(a.ty,c.ty);la.copy(a.IB,c.IB);la.copy(a.jh,c.jh);c.direction.set(a.direction);ta.copy(a.Rf,c.Rf);ta.copy(a.uy,c.uy);ta.copy(a.ss,c.ss);ta.copy(a.cx,c.cx);ta.copy(a.Fs,c.Fs);c.dof_distance=a.dof_distance;c.dof_front_start=a.dof_front_start;c.dof_front_end=a.dof_front_end;
c.dof_rear_start=a.dof_rear_start;c.dof_rear_end=a.dof_rear_end;c.dof_power=a.dof_power;c.dof_bokeh_intensity=a.dof_bokeh_intensity;c.dof_object=a.dof_object;c.dof_bokeh=a.dof_bokeh;c.Jd=a.Jd;c.dof_on=a.dof_on;Y.copy(a.mw,c.mw);var d=a.Bm,e=c.Bm;ya.copy(d.left,e.left);ya.copy(d.right,e.right);ya.copy(d.top,e.top);ya.copy(d.bottom,e.bottom);ya.copy(d.near,e.near);ya.copy(d.far,e.far);c.vl=a.vl;c.Lf=a.Lf;a.xc&&(c.xc=ya.clone(a.xc));if(a.ri){d=a.ri.length;c.ri=Array(d);for(e=0;e<d;e++)c.ri[e]=Y.clone(a.ri[e]);
c.br=new Float32Array(a.br)}ya.copy(a.Au,c.Au);ya.copy(a.ap,c.ap);return c}function x(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function y(b){switch(b){case "STATIC":return a.MS_STATIC;case "TARGET":return a.MS_TARGET_CONTROLS;case "EYE":return a.MS_EYE_CONTROLS;case "HOVER":return a.MS_HOVER_CONTROLS;default:na.K("Unknown move style")}}
function p(b){var c=q(b);if(b==a.rc)return c;switch(b){case a.Kc:E(c,Ka,.1,1E3);break;case a.re:E(c,2.5,.1,1E3);break;case a.lf:break;case a.th:break;case a.$i:break;case a.Dc:case a.Lc:case a.kf:case a.Ne:na.K("Stereo camera may only be created from perspective one");break;default:na.K("Unknown camera type")}return c}function d(b,c,d){b.type!=a.Dc&&b.type!=a.Lc&&b.type!=a.kf&&b.type!=a.Ne&&na.K("set_stereo_params(): wrong camera type");if(b.type==a.Dc||b.type==a.Lc)b.vl=c;b.Lf=d;ma(b,!1);if(La.Pa()&&
(c=La.get_active(),b=c.J.Yc))for(c=sa.Da(La.Mk(c),c).ja,d=0;d<c.length;d++)Ga(c[d],b)}function v(a,b){var c=ta.get_quat_view(a.A.D);return r(c,b)}function r(a,b){var c=na.quat_to_dir(a,na.AXIS_Z,Aa),d=na.quat_to_dir(a,na.AXIS_MY,Pa),e=-Math.asin(c[2]/Y.length(c)),c=Math.abs(e)>Math.PI/4?Y.scale(d,-na.sign(e),Ya):Y.scale(c,-na.sign(d[2]),Ya),f=Math.atan(Math.abs(c[0]/c[1]));0<d[2]&&(e=na.sign(e)*Math.PI-e);d=f;0<c[1]&&(d=Math.PI-d);0>c[0]&&(d=2*Math.PI-d);b[0]=d;b[1]=e;return b}function H(a){switch(a.lo){case "AUTO":return 1<
a.qb?ba(a)?a.mc/a.qb:2*Math.atan(Math.tan(a.mc/2)/a.qb):a.mc;case "HORIZONTAL":return ba(a)?a.mc/a.qb:2*Math.atan(Math.tan(a.mc/2)/a.qb);case "VERTICAL":return a.mc}}function E(b,c,d,e){switch(b.type){case a.Kc:case a.Dc:case a.Lc:b.mc=c;b.qb=1;break;case a.re:b.mc=c;b.qb=1;break;case a.kf:case a.Ne:break;default:na.K("set_frustum(): Unsupported camera type: "+b.type)}b.near=d;b.far=e}function w(b,c){var d=ta.Mb(c.A.D,Aa),e=ta.ub(c.A.D,za),f=la.fromRotationTranslation(e,d,Na);la.invert(f,b.fc);if(La.Pa())var f=
La.get_active(),g=La.Tb(f,Ua.Hg);if(b.type==a.Dc||g&&g.enable_hmd_stereo&&b.type==a.kf)b.fc[12]+=b.Lf/2;else if(b.type==a.Lc||g&&g.enable_hmd_stereo&&b.type==a.Ne)b.fc[12]-=b.Lf/2;if(b.xc){ta.from_mat4(b.fc,b.ss);ta.invert(b.ss,b.cx);var f=b.xc[0],g=b.xc[1],h=b.xc[2],l=b.xc[3],k=b.Xp;k[0]=1-2*f*f;k[1]=-2*f*g;k[2]=-2*f*h;k[3]=0;k[4]=-2*f*g;k[5]=1-2*g*g;k[6]=-2*g*h;k[7]=0;k[8]=-2*f*h;k[9]=-2*g*h;k[10]=1-2*h*h;k[11]=0;k[12]=-2*f*l;k[13]=-2*g*l;k[14]=-2*h*l;k[15]=1;la.multiply(b.fc,b.Xp,b.fc);n(b,!0);
Y.transformMat4(d,b.Xp,d)}ta.from_mat4(b.fc,b.Rf);ta.invert(b.Rf,b.uy);ta.set_sep(d,1,e,b.D);fa(b)}function n(a,b){ma(a,!0);var c=Qa,d=Na;la.invert(a.fc,d);la.transpose(d,d);ya.transformMat4(a.xc,d,c);d=Ma;d[0]=(na.sign(c[0])+a.Ab[8])/a.Ab[0];d[1]=(na.sign(c[1])+a.Ab[9])/a.Ab[5];d[2]=-1;d[3]=(1+a.Ab[10])/a.Ab[14];ya.scale(c,2/(c[0]*d[0]+c[1]*d[1]+c[2]*d[2]+c[3]*d[3]),c);a.Ab[2]=c[0];a.Ab[6]=c[1];a.Ab[10]=c[2]+1;a.Ab[14]=c[3];aa(a);b||fa(a)}function C(a,b,c){c=Y.subtract(c,b,Aa);Y.length(c)&&(Y.normalize(c,
c),c=na.oI(na.AXIS_MZ,c,za),Ia.set_rotation(a,c));Ia.set_translation(a,b)}function k(a,b,c){var d=a.A,e=D(a);C(a,b,c);e?(b=Y.copy(d.pe,Aa),Y.negate(b,b),u(a,b,!0)):u(a,d.pe,!0)}function F(a,b){for(var c=a.A,d=b.ja,e=ta.ub(c.D,za),e=na.quat_to_dir(e,na.AXIS_MZ,Aa),f=ta.Mb(c.D,Pa),g=b.SI,h=0;h<g.length;h++){var l=g[h];Y.copy(e,l.direction);ta.Mb(c.D,l.mw)}for(h=0;h<d.length;h++)l=d[h],w(l,a),Y.copy(e,l.direction),l.dof_object&&l.dof_on&&(c=Ia.get_translation(l.dof_object,Ya),c=Y.dist(f,c),l.dof_distance=
c)}function u(b,c,d){var e=b.A,f=ta.get_quat_view(e.D),h=na.quat_to_dir(f,na.AXIS_Z,Aa);Y.normalize(h,h);if(.999999<Math.abs(Y.dot(c,h)))h=J.identity(za);else{var l=Y.cross(c,h,Pa);Y.normalize(l,l);e.nb==a.MS_TARGET_CONTROLS?e.Al&&Y.negate(l,l):(e=na.quat_to_dir(f,na.AXIS_MY,Ya),0<Y.dot(e,c)&&Y.negate(l,l));e=na.quat_to_dir(f,na.AXIS_X,Ya);Y.normalize(e,e);var k=na.clamp(Y.dot(e,l),-1,1),h=-.999999>=k?J.setAxisAngle(h,Math.acos(k),za):J.rotationTo(e,l,za);J.normalize(h,h)}J.multiply(h,f,f);d&&(d=
na.quat_to_dir(f,na.AXIS_Y,Aa),0>Y.dot(c,d)&&J.rotateZ(f,Math.PI,f));g(b)}function g(b){var c=b.A;c.nb==a.MS_TARGET_CONTROLS&&(c.Al=D(b))}function D(a){a=ta.get_quat_view(a.A.D);return 0>na.quat_to_dir(a,na.AXIS_Y,Aa)[2]}function B(b,c){var d=b.A;if(c){d.Vb=d.Vb||{};d.Vb.left=c.left;d.Vb.right=c.right;d.Vb.Jo=c.left;d.Vb.hp=c.right;d.Vb.camera_space=!!c.camera_space;var e=b.A;!(d=e.Vb)||e.nb!=a.MS_EYE_CONTROLS&&e.nb!=a.MS_TARGET_CONTROLS||(e=v(b,M),d.camera_space?(d.left+=e[0],d.right+=e[0]):(d.Jo-=
e[0],d.hp-=e[0]),d.left=na.angle_wrap_0_2pi(d.left),d.right=na.angle_wrap_0_2pi(d.right),d.Jo=na.angle_wrap_0_2pi(d.Jo),d.hp=na.angle_wrap_0_2pi(d.hp))}else d.Vb=null}function N(a,b){var c=a.A;b?(c.Xa=c.Xa||{},c.Xa.down=b.down,c.Xa.up=b.up,c.Xa.io=b.down,c.Xa.Ip=b.up,c.Xa.camera_space=!!b.camera_space,A(a)):c.Xa=null}function L(a,b){var c=a.A;if(!b){var d=v(a,M);b={down:d[1],up:d[1]}}c.Xa=c.Xa||{};c.Xa.down=b.down;c.Xa.up=b.up;A(a);c.Kb&&c.Xa&&Z(a)}function A(b){var c=b.A,d=c.Xa;if(d)switch(c.nb){case a.MS_EYE_CONTROLS:case a.MS_TARGET_CONTROLS:b=
v(b,M);d.camera_space?(d.up+=b[1],d.down+=b[1]):(d.Ip-=b[1],d.io-=b[1]);d.up=na.angle_wrap_periodic(d.up,-Math.PI,Math.PI);d.down=na.angle_wrap_periodic(d.down,-Math.PI,Math.PI);d.Ip=na.angle_wrap_periodic(d.Ip,-Math.PI,Math.PI);d.io=na.angle_wrap_periodic(d.io,-Math.PI,Math.PI);break;case a.MS_HOVER_CONTROLS:d.up=na.angle_wrap_periodic(d.up,-Math.PI,Math.PI),d.down=na.angle_wrap_periodic(d.down,-Math.PI,Math.PI),d.up=na.clamp(d.up,-Math.PI/2,0),d.down=na.clamp(d.down,-Math.PI/2,0)}}function G(a,
b){var c=a.A;if(!b){var d=Ia.$r(a,c.wc);b={min:d,max:d}}c.Kb=c.Kb||{};c.Kb.min=b.min;c.Kb.max=b.max;c.Kb&&c.Xa&&Z(a)}function z(a,b){var c=a.A;b?(c.Kb=c.Kb||{},c.Kb.min=b.min,c.Kb.max=b.max):c.Kb=null}function I(a,b){var c=a.A;b?(c.ke=c.ke||{},c.ke.min_z=b.min_z,c.ke.max_z=b.max_z):c.ke=null}function S(a,b){var c=a.A;b?(c.Dd=c.Dd||{},c.Dd.min=b.min,c.Dd.max=b.max):c.Dd=null}function m(a,b){var c=a.A;b?(c.Ed=c.Ed||{},c.Ed.min=b.min,c.Ed.max=b.max):c.Ed=null}function K(b){var c=b.A;if(sa.is_camera(b))for(var d=
b.S,e=0;e<d.length;e++){var f=d[e].ja;if(f[0].type===a.re){switch(c.nb){case a.MS_TARGET_CONTROLS:var g=ta.get_trans_view(c.D),g=Y.dist(g,c.pivot),g=g/c.Qk*c.Rk;break;case a.MS_HOVER_CONTROLS:g=ta.get_trans_view(c.D);g=Y.distance(g,c.wc);g=g/c.Qk*c.Rk;break;default:g=f[0].mc}for(var h=0;h<f.length;h++){var l=f[h];l.mc=g;ma(l,!0)}F(b,d[e])}}}function U(b){var c=b.A,d=c.nb;if(d===a.MS_TARGET_CONTROLS||d===a.MS_EYE_CONTROLS){if(c.Vb){var e=c.Vb.left,f=c.Vb.right,g=v(b,M);(g=d==a.MS_TARGET_CONTROLS?na.fm(g[0],
e,f):na.fm(g[0],f,e))&&(d==a.MS_TARGET_CONTROLS?R(b,g,0):ra(b,g,0))}c.Xa&&(e=c.Xa.down,f=c.Xa.up,g=v(b,M),(g=d==a.MS_TARGET_CONTROLS?na.fm(g[1],f,e):na.fm(g[1],e,f))&&(d==a.MS_TARGET_CONTROLS?R(b,0,g):ra(b,0,g)));if(d===a.MS_TARGET_CONTROLS&&c.Kb){var g=b.A,e=ta.get_trans_view(g.D),f=Y.subtract(e,g.pivot,Aa),h=Y.length(f);h>g.Kb.max?(Y.scale(f,g.Kb.max/h,f),Y.add(g.pivot,f,e)):h<g.Kb.min&&(h=ta.get_quat_view(g.D),h=na.quat_to_dir(h,na.AXIS_MZ,Pa),Y.scale(h,100*g.Kb.min,h),Y.add(f,h,f),Y.scale(f,-g.Kb.min/
Y.length(f),f),Y.add(g.pivot,f,e))}}d===a.MS_TARGET_CONTROLS&&c.ke&&(c=b.A,g=c.pivot[2],e=na.clamp(c.pivot[2],c.ke.min_z,c.ke.max_z),e!=g&&(g=Y.set(0,0,e-g,Aa),Y.add(c.pivot,g,c.pivot),c=ta.get_trans_view(c.D),Y.add(c,g,c)));d===a.MS_HOVER_CONTROLS&&(d=b.A,d.Dd&&(g=na.clamp(d.wc[0],d.Dd.min,d.Dd.max)-d.wc[0],d.wc[0]+=g,c=ta.get_trans_view(d.D),c[0]+=g),d.Ed&&(g=na.clamp(d.wc[1],d.Ed.min,d.Ed.max)-d.wc[1],d.wc[1]+=g,c=ta.get_trans_view(d.D),c[1]+=g),d=b.A,c=v(b,M)[1],(d=na.fm(c,d.Xa.up,d.Xa.down))&&
ia(b,0,d))}function Q(a,b,c,d){a=v(a,qa);d[0]=b-a[0];d[1]=c-a[1];return d}function R(a,b,c){var d=a.A;pa(a,a.A.pivot,b,c);a=v(a,ea);a=na.angle_wrap_periodic(a[1],-Math.PI,Math.PI);d.Al=Math.abs(a)>Math.PI/2}function ga(a,b,c){b=Q(a,b,c,ea);R(a,b[0],b[1])}function ra(a,b,c){var d=a.A;if(b||c)a=J.identity(za),b&&(b=J.setAxisAngle(d.pe,b,Oa),J.multiply(a,b,a)),b=ta.get_quat_view(d.D),c&&(d=na.quat_to_dir(b,na.AXIS_X,Aa),c=J.setAxisAngle(d,c,Oa),J.normalize(c,c),J.multiply(a,c,a)),J.multiply(a,b,b),J.normalize(b,
b)}function T(a,b,c){var d=ta.ub(a.A.D,za),d=r(d,M);ra(a,b-d[0],c-d[1])}function ia(a,b,c){var d=a.A;d.ui||(b=0);pa(a,d.wc,b,c);c&&Z(a)}function ha(a,b,c){b=Q(a,b,c,ea);ia(a,b[0],b[1])}function pa(a,b,c,d){var e=a.A;if(c||d){a=J.identity(za);c&&(c=J.setAxisAngle(na.AXIS_Z,c,Oa),J.multiply(a,c,a));c=ta.get_quat_view(e.D);if(d){var f=na.quat_to_dir(c,na.AXIS_X,Aa);d=J.setAxisAngle(f,d,Oa);J.normalize(d,d);J.multiply(a,d,a)}d=ta.get_trans_view(e.D);na.tU(d,b,a,d);J.multiply(a,c,c);J.normalize(c,c)}}
function Z(a){var b=a.A,c=v(a,M)[1],d=a.A;a=d.Xa;d=d.Kb;a.down-a.up?(c=(a.down-c)/(a.down-a.up),c=Math.max(c,0)):c=0;c=c*(d.max-d.min)+d.min;a=ta.get_trans_view(b.D);d=ta.get_quat_view(b.D);d=na.quat_to_dir(d,na.AXIS_MZ,Aa);Y.normalize(d,d);Y.scale(d,c,d);Y.subtract(b.wc,d,a)}function ma(b,c){switch(b.type){case a.Kc:case a.lf:la.perspective(H(b),b.qb,b.near,b.far,b.Ab);break;case a.re:case a.th:var d=H(b),e=d*b.qb;la.ortho(-e,e,-d,d,b.near,b.far,b.Ab);break;case a.$i:la.ortho(b.left,b.right,b.bottom,
b.top,b.near,b.far,b.Ab);break;case a.Dc:case a.Lc:var e=Math.tan(H(b)/2),d=b.near*e,f=b.qb*b.vl*e;b.type==a.Dc?(e=f-b.Lf/2,f+=b.Lf/2):(e=f+b.Lf/2,f-=b.Lf/2);e=-(b.near/b.vl*e);f*=b.near/b.vl;la.frustum(e,f,-d,d,b.near,b.far,b.Ab);b.left=e;b.right=f;break;case a.kf:case a.Ne:La.Pa()&&(d=La.get_active(),(d=La.Tb(d,Ua.Hg))&&d.enable_hmd_stereo?(d=Math.tan(b.kd[1]),e=Math.tan(b.kd[2]),f=Math.tan(b.kd[3]),b.top=b.near*Math.tan(b.kd[0]),b.right=b.near*d,b.bottom=-b.near*e,b.left=-b.near*f,la.frustum(b.left,
b.right,b.bottom,b.top,b.near,b.far,b.Ab)):(b.top=b.near*Math.tan(H(b)/2),b.bottom=-b.top,b.right=b.top*b.qb,b.left=-b.right,la.perspective(H(b),b.qb,b.near,b.far,b.Ab)));break;case a.rc:return;default:na.K("Wrong camera type: "+b.type)}aa(b);c||fa(b)}function aa(a){la.translate(a.Ab,a.nt.trans,a.Ab);la.rotateZ(a.Ab,a.nt.angle,a.Ab)}function fa(a){wa(a);da(a);na.$z(a.Qf,a.Bm)}function wa(a){la.copy(a.fc,a.Qf);la.multiply(a.Ab,a.Qf,a.Qf);la.invert(a.Qf,a.ty)}function da(a){la.copy(a.fc,a.jh);a.jh[12]=
0;a.jh[13]=0;a.jh[14]=0;a.jh[15]=1;la.multiply(a.Ab,a.jh,a.jh);la.invert(a.jh,a.jh)}function W(b,c,d,e,f){e||(e=new Float32Array(24));c||(c=b.near);d||(d=b.far);var g,h,l,k,m,n,M,p;switch(b.type){case a.rc:na.K("Extraction from NONE camera is not possible");break;case a.Kc:case a.lf:g=c*Math.tan(H(b)/2);k=-g;h=g*b.qb;l=-h;m=d/c*g;p=-m;n=m*b.qb;M=-n;break;case a.re:case a.th:k=H(b);l=k*b.qb;g=m=k;h=n=l;k=p=-k;l=M=-l;break;case a.$i:g=m=b.top;h=n=b.right;k=p=b.bottom;l=M=b.left;break;case a.Dc:case a.Lc:m=
c/b.near;g=c*Math.tan(H(b)/2);k=-g;h=b.right*m;l=b.left*m;M=d/c;m=g*M;p=-m;n=h*M;M*=l;break;case a.kf:case a.Ne:m=c/b.near;g=b.top*m;k=b.bottom*m;h=b.right*m;l=b.left*m;M=d/c;m=g*M;p=k*M;n=h*M;M*=l;break;default:na.K("Wrong camera type: "+b.type)}e[0]=l;e[1]=k;e[2]=-c;e[3]=h;e[4]=k;e[5]=-c;e[6]=h;e[7]=g;e[8]=-c;e[9]=l;e[10]=g;e[11]=-c;e[12]=M;e[13]=p;e[14]=-d;e[15]=M;e[16]=m;e[17]=-d;e[18]=n;e[19]=m;e[20]=-d;e[21]=n;e[22]=p;e[23]=-d;f&&(c=Na,la.invert(b.fc,c),na.cp(e,c,e,0));return e}function Ga(a,
b){if(b.enable_csm){var c=b.csm_num;if(!a.ri){var d=b.csm_num;a.ri=Array(d);for(var e=0;e<d;e++)a.ri[e]=new Float32Array(3);a.br=new Float32Array(d)}for(d=0;d<c;d++){var e=d?O(b,a,d-1):a.near,f=O(b,a,d),e=W(a,e,f,Ra),e=ca.sR(e);a.ri[d].set(e.U);a.br[d]=e.ab;a.Au[d]=Y.length(e.U);a.ap[d]=ua(b.first_cascade_blur_radius,b.last_cascade_blur_radius,c,d)}}else a.ap[0]=b.first_cascade_blur_radius}function O(a,b,c){var d=a.csm_num,e=na.clamp(a.csm_first_cascade_border,b.near,b.far);a=na.clamp(a.csm_last_cascade_border,
b.near,b.far);return na.clamp(ua(e,a,d,c),b.near,b.far)}function ua(a,b,c,d){switch(d){case 0:break;case c-1:a=b;break;default:a=0==a?0:a*Math.pow(b/a,d/(c-1))}return a}function ba(b){switch(b.type){case a.re:case a.th:case a.$i:return!0;default:return!1}}function ja(a,b){b||(b=new Float32Array(3));var c=ta.get_trans_view(a.A.D);Y.copy(c,b);return b}var ca=t("__boundings"),Ca=t("__container"),la=t("__mat4"),V=t("__math"),sa=t("__obj_util"),xa=t("__print"),J=t("__quat"),La=t("__scenes"),Ua=t("__subscene"),
Ia=t("__transform"),ta=t("__tsr"),na=t("__util"),Y=t("__vec3"),ya=t("__vec4");a.rc=10;a.Kc=20;a.re=30;a.lf=40;a.th=50;a.$i=60;a.Dc=70;a.Lc=80;a.kf=90;a.Ne=100;a.MS_STATIC=0;a.MS_TARGET_CONTROLS=2;a.MS_EYE_CONTROLS=3;a.MS_HOVER_CONTROLS=4;var Ka=na.deg_to_rad(40),va=na.deg_to_rad(.5),X=new Float32Array([1,1,1,1]),Ea=new Float32Array([-1,-1,1,1]),Fa=new Float32Array([0,0,-1,1]),M=new Float32Array(2),ea=new Float32Array(2),qa=new Float32Array(2),Aa=new Float32Array(3),Pa=new Float32Array(3),Ya=new Float32Array(3),
za=new Float32Array(4),Oa=new Float32Array(4),Qa=new Float32Array(4),Ma=new Float32Array(4),Na=new Float32Array(16),Ra=new Float32Array(24),Ja=new Float32Array(6);a.MN=function(d,g){var k=g.A,m=d.data;switch(m.type){case "PERSP":var n=p(a.Kc);n.lo=m.sensor_fit;E(n,m.angle,m.clip_start,m.clip_end);break;case "ORTHO":n=p(a.re),n.lo=m.sensor_fit,E(n,m.ortho_scale/2,m.clip_start,m.clip_end)}n.name=g.name;var M=g.S;M[0].ja.push(n);for(var r=1;r<M.length;r++){var q=l(n,!1);M[r].ja.push(q)}k.nb=y(m.b4w_move_style);
k.dof_distance=m.dof_distance;n=m.dof_object;k.dof_object=n?n.Ha:null;k.dof_front_start=m.b4w_dof_front_start;k.dof_front_end=m.b4w_dof_front_end;k.dof_rear_start=m.b4w_dof_rear_start;k.dof_rear_end=m.b4w_dof_rear_end;k.dof_power=m.b4w_dof_power;k.dof_bokeh=m.b4w_dof_bokeh;k.dof_bokeh_intensity=m.b4w_dof_bokeh_intensity;k.Jd=m.b4w_dof_foreground_blur;k.Sp=m.b4w_trans_velocity;k.Rp=m.b4w_rot_velocity;k.Tp=m.b4w_zoom_velocity;n=g.A.nb;M=d.data;r=null;n!=a.MS_TARGET_CONTROLS&&n!=a.MS_EYE_CONTROLS||!M.b4w_use_horizontal_clamping||
(r={left:M.b4w_rotation_left_limit,right:M.b4w_rotation_right_limit,camera_space:"LOCAL"==M.b4w_horizontal_clamping_type},n==a.MS_EYE_CONTROLS&&(r.left*=-1,r.right*=-1));n=r;M=g.A.nb;r=d.data;q=null;M!=a.MS_TARGET_CONTROLS&&M!=a.MS_EYE_CONTROLS||!r.b4w_use_vertical_clamping?M==a.MS_HOVER_CONTROLS&&r.b4w_use_zooming&&(r.b4w_hover_angle_min<=r.b4w_hover_angle_max?(q={down:r.b4w_hover_angle_min,up:r.b4w_hover_angle_max},q.down*=-1,q.up*=-1):xa.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):
(q={down:r.b4w_rotation_down_limit,up:r.b4w_rotation_up_limit,camera_space:"LOCAL"==r.b4w_vertical_clamping_type},M==a.MS_TARGET_CONTROLS&&(q.down*=-1,q.up*=-1));var M=q,r=g.A.nb,q=d.data,u=null;r==a.MS_TARGET_CONTROLS&&q.b4w_use_target_distance_limits&&q.b4w_distance_min<=q.b4w_distance_max?u={min:q.b4w_distance_min,max:q.b4w_distance_max}:r===a.MS_HOVER_CONTROLS&&q.b4w_use_zooming&&(q.b4w_distance_min<=q.b4w_distance_max?u={min:q.b4w_distance_min,max:q.b4w_distance_max}:xa.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));
r=u;q=d.data;u=null;g.A.nb==a.MS_HOVER_CONTROLS&&q.b4w_use_horizontal_clamping&&q.b4w_horizontal_translation_min<=q.b4w_horizontal_translation_max&&(u={min:q.b4w_horizontal_translation_min,max:q.b4w_horizontal_translation_max});var q=u,u=d.data,v=null;g.A.nb==a.MS_HOVER_CONTROLS&&u.b4w_use_vertical_clamping&&u.b4w_vertical_translation_min<=u.b4w_vertical_translation_max&&(v={min:u.b4w_vertical_translation_min,max:u.b4w_vertical_translation_max});var u=v,v=d.data,ea=null;g.A.nb==a.MS_TARGET_CONTROLS&&
v.b4w_use_pivot_limits&&(ea={min_z:v.b4w_pivot_z_min,max_z:v.b4w_pivot_z_max});v=ea;switch(k.nb){case a.MS_EYE_CONTROLS:k=ta.get_trans_view(g.A.D);e(g,k,null,n,M);break;case a.MS_TARGET_CONTROLS:k=ta.get_trans_view(g.A.D);c(g,k,m.b4w_target,n,M,r,v,m.b4w_use_panning);break;case a.MS_HOVER_CONTROLS:k=ta.get_trans_view(g.A.D),n=h(g,d.data.b4w_hover_zero_level,Pa),b(g,k,n,r,M,q,u,m.b4w_enable_hover_hor_rotation)}U(g);f(g)};a.LI=e;a.NI=c;a.MI=b;a.Co=f;a.Mc=l;a.NO=x;a.UZ=y;a.Gc=p;a.yY=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.Rb;
case "DEPTH":return!!a.wf;case "SCREEN":return!a.Rb&&!a.wf;default:na.K("Wrong attachment type: "+b)}};a.jx=function(a,b,c){switch(b){case "COLOR":case "CUBEMAP":a.Rb=c;break;case "DEPTH":a.wf=c;break;case "SCREEN":a.Rb=null;a.wf=null;break;default:na.K("Wrong attachment type: "+b)}};a.fZ=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.Rb;case "DEPTH":return a.wf;case "SCREEN":return null;default:na.K("Wrong attachment type: "+b)}};a.sw=function(b,c){(b.type!=a.Kc||c!=a.Dc&&c!=a.Lc&&
c!=a.kf&&c!=a.Ne)&&na.K("make_stereo(): wrong camera type");b.type=c;d(b,6,.065)};a.fV=d;a.get_camera_angles=v;a.jA=r;a.get_camera_angles_char=function(a,b){v(a,b);b[0]=na.angle_wrap_0_2pi(b[0]+Math.PI);b[1]*=-1;return b};a.set_fov=function(b,c){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:b.mc=c}};a.get_fov=function(b){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:return b.mc;default:return 0}};a.IR=H;a.zI=E;a.AI=function(b,c,d,e,f){switch(b.type){case a.Kc:case a.Dc:case a.Lc:case a.re:b.mc=
d;b.qb=1;break;case a.lf:case a.th:b.mc=d;b.qb=c/d;break;case a.kf:case a.Ne:break;default:na.K("set_frustum2(): Unsupported camera type: "+b.type)}b.near=e;b.far=f};a.SU=function(b,c,d,e,f,g,h){switch(b.type){case a.$i:b.left=c;b.right=d;b.bottom=e;b.top=f;b.near=g;b.far=h;break;default:na.K("set_frustum_asymmetric(): Unsupported camera type: "+b.type)}};a.get_move_style=function(a){return a.A.nb};a.kV=w;a.HI=n;a.gC=function(b,c,d){var e=Aa;e[0]=0;e[1]=0;e[2]=-1;Y.transformQuat(e,d,e);e[0]+=c[0];
e[1]+=c[1];e[2]+=c[2];var f=Pa;f[0]=0;f[1]=1;f[2]=0;Y.transformQuat(f,d,f);la.lookAt(c,e,f,b.fc);d=La.get_active();d=La.Tb(d,Ua.Hg);if(b.type==a.Dc||d&&d.enable_hmd_stereo&&b.type==a.kf)b.fc[12]+=b.Lf/2;else if(b.type==a.Lc||d&&d.enable_hmd_stereo&&b.type==a.Ne)b.fc[12]-=b.Lf/2;ta.from_mat4(b.fc,b.Rf);wa(b);da(b);ta.set_trans(c,b.D)};a.EI=C;a.YU=k;a.nW=F;a.mW=function(b){var c=b.A;U(b);K(b);switch(c.nb){case a.MS_TARGET_CONTROLS:var e=ta.get_trans_view(c.D),f=ta.get_quat_view(c.D);na.ax(e,f,c.pivot,
na.AXIS_MZ);for(f=0;f<b.S.length;f++)for(var h=b.S[f].ja,l=0;l<h.length;l++){var k=h[l];k.type!=a.Dc&&k.type!=a.Lc||d(k,Y.dist(e,c.pivot),k.Lf)}u(b,c.pe);break;case a.MS_EYE_CONTROLS:b.uc||u(b,c.pe)}g(b)};a.correct_up=u;a.FJ=g;a.lx=B;a.mx=N;a.hover_set_vertical_limits=L;a.hover_set_distance_limits=G;a.uI=z;a.GI=I;a.CI=S;a.JI=m;a.BW=K;a.d_=R;a.l_=ga;a.a_=function(a,b,c){ra(a,b,c)};a.j_=function(a,b,c){T(a,b,c)};a.c_=ra;a.k_=T;a.b_=ia;a.eV=ha;a.sU=function(b,c,d){var e=b.A.nb;e===a.MS_TARGET_CONTROLS?
R(b,c,d):e===a.MS_EYE_CONTROLS?ra(b,c,d):e===a.MS_HOVER_CONTROLS?ia(b,c,d):e===a.MS_STATIC&&ra(b,c,d)};a.dV=function(b,c,d){var e=b.A.nb;e===a.MS_TARGET_CONTROLS?ga(b,c,d):e===a.MS_EYE_CONTROLS?T(b,c,d):e===a.MS_HOVER_CONTROLS?ha(b,c,d):e===a.MS_STATIC&&T(b,c,d)};a.KZ=function(b){switch(b.type){case a.Kc:case a.re:case a.Dc:case a.Lc:return!0;default:return!1}};a.XQ=function(b){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:var c;a:{switch(b.lo){case "AUTO":c=1<b.qb?b.mc:ba(b)?b.mc*b.qb:2*
Math.atan(Math.tan(b.mc/2)*b.qb);break a;case "HORIZONTAL":c=b.mc;break a;case "VERTICAL":c=ba(b)?b.mc*b.qb:2*Math.atan(Math.tan(b.mc/2)*b.qb);break a}c=void 0}return Math.min(H(b),c);default:return xa.error("get_angular_diameter(): Unsupported camera type: "+b.type),0}};a.HU=function(b,c){switch(b.type){case a.lf:case a.th:xa.error("set_aspect(): Unsupported camera type: "+b.type);break;default:b.qb=c}};a.eZ=function(a){return a.qb};a.set_projection=ma;a.JU=function(b,c,d,e,f){var g=1/Math.max(f,
e);switch(b.type){case a.rc:case a.Kc:case a.lf:f/=2;e/=2;d=-(d-f)/f*Math.tan(H(b)/2);c=(c-e)/e*Math.tan(H(b)/2)*b.qb;e=b.near*(d+g);f=b.near*(c+g);d=b.near*(d-g);c=b.near*(c-g);la.frustum(c,f,d,e,b.near,b.far,b.Ab);break;case a.re:case a.th:d=-d/f;c/=e;e=H(b);f=e*b.qb;la.ortho(-f+(c-g)*(f+f),-f+(c+g)*(f+f),e+(d-g)*(e+e),e+(d+g)*(e+e),b.near,b.far,b.Ab);break;case a.$i:d=-d/f,c/=e,e=b.top+(d+g)*(b.top-b.bottom),f=b.left+(c+g)*(b.right-b.left),d=b.top+(d-g)*(b.top-b.bottom),c=b.left+(c-g)*(b.right-
b.left),la.ortho(c,f,d,e,b.near,b.far,b.Ab)}aa(b);fa(b)};a.IN=da;a.pQ=W;a.eN=function(a){a=a.A;var b=ca.Re();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.va=b;var c=ca.xE(1,na.f32([0,0,0]));a.tc=c;a.vq=ca.kE(1,b);a.xq=ca.mE(1,b);a.wq=ca.lE(1,b)};a.is_static_camera=function(b){return sa.is_camera(b)&&b.A&&b.A.nb==a.MS_STATIC};a.is_target_camera=function(b){return sa.is_camera(b)&&b.A&&b.A.nb==a.MS_TARGET_CONTROLS};a.is_eye_camera=function(b){return sa.is_camera(b)&&b.A&&b.A.nb==
a.MS_EYE_CONTROLS};a.is_hover_camera=function(b){return sa.is_camera(b)&&b.A&&b.A.nb==a.MS_HOVER_CONTROLS};a.is_ortho_camera=function(b){return sa.is_camera(b)&&b.A&&b.S[0].ja[0].type==a.re};a.OC=Ga;a.KP=O;a.project_point=function(b,c,d){b=b.S[0].ja[0];switch(b.type){case a.Kc:case a.lf:case a.re:case a.th:case a.Dc:case a.Lc:case a.kf:case a.Ne:case a.rc:var e=Qa;e.set(c);e[3]=1;ya.transformMat4(e,b.Qf,e);c=-e[1]/e[3];d[0]=(e[0]/e[3]+1)/2*b.width;d[1]=(c+1)/2*b.height;Ca.cX(d[0],d[1],d,b);2<d.length&&
(d[2]=(e[2]/Math.abs(e[3])+1)/2);return d;default:return xa.error("Non-compatible camera"),d}};a.mR=function(a){return a.S[0].ja[0]};a.pv=function(b,c){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:var d=Math.tan(H(b)/2);switch(c){case "LEFT":return-d*b.qb;case "RIGHT":return d*b.qb;case "TOP":return d;case "BOTTOM":return-d}break;case a.re:case a.th:switch(c){case "LEFT":return-H(b)*b.qb;case "RIGHT":return H(b)*b.qb;case "TOP":return H(b);case "BOTTOM":return-H(b)}break;case a.$i:switch(c){case "LEFT":return b.left;
case "RIGHT":return b.right;case "TOP":return b.top;case "BOTTOM":return b.bottom}break;case a.kf:case a.Ne:d=La.get_active();if((d=La.Tb(d,Ua.Hg))&&d.enable_hmd_stereo)switch(c){case "LEFT":return-Math.tan(Math.min(b.kd[1],b.kd[3]));case "RIGHT":return Math.tan(Math.min(b.kd[1],b.kd[3]));case "TOP":return Math.tan(Math.min(b.kd[0],b.kd[2]));case "BOTTOM":return-Math.tan(Math.min(b.kd[0],b.kd[2]))}else switch(d=Math.tan(H(b)/2),c){case "LEFT":return-d*b.qb;case "RIGHT":return d*b.qb;case "TOP":return d;
case "BOTTOM":return-d}break;default:na.K("Unknown camera type")}};a.rS=ba;a.fC=function(a,b,c){a=a.A;ta.set_trans(b,a.D);Y.copy(c,a.pivot)};a.DI=function(a,b){var c=a.A,d=Y.subtract(b,c.wc,Aa),e=ta.get_trans_view(c.D),d=Y.add(d,e,d);Ia.set_translation(a,d);Y.copy(b,c.wc)};a.gV=function(a,b){var c=a.A,d=Y.subtract(b,c.pivot,Aa),e=ta.get_trans_view(c.D),d=Y.add(d,e,d);Ia.set_translation(a,d);Y.copy(b,c.pivot)};a.jZ=ja;a.i_=function(c,d){c.A.nb=d;c.A.Vb=null;c.A.Xa=null;c.A.Kb=null;c.A.Dd=null;c.A.Ed=
null;f(c);switch(d){case a.MS_HOVER_CONTROLS:var e=ta.get_trans_view(c.A.D),g=h(c,0,Pa);b(c,e,g,null,null,null,null,c.A.ui);break;case a.MS_TARGET_CONTROLS:e=ja(c,Aa),g=ta.get_quat_view(c.A.D),g=na.quat_to_dir(g,na.AXIS_MZ,Pa),g=Y.scaleAndAdd(e,g,10,g),Y.copy(g,c.A.pivot)}};a.pt=function(a){a=a.A;a.nb=0;Y.set(0,0,0,a.pivot);Y.set(0,0,0,a.wc);a.Al=!1;a.use_panning=!1;a.Vb=null;a.Xa=null;a.Kb=null;a.Dd=null;a.Ed=null;a.ke=null;a.ui=!0};a.set_eye_distance=function(a,b){for(var c=0;c<a.length;c++){var e=
a[c];70!=e.type&&80!=e.type&&90!=e.type&&100!=e.type||d(e,e.vl,b)}};a.set_hmd_fov=function(a,b,c){var d=La.get_active();a=sa.Da(a,d).ja;for(d=0;d<a.length;d++){var e=a[d];if(90==e.type||100==e.type)90==e.type&&ya.copy(b,e.kd),100==e.type&&ya.copy(c,e.kd),e.xc?n(e,!1):ma(e,!1)}};a.h_=function(a,b,c){var d=La.get_active();a=sa.Da(a,d).ja;for(d=0;d<a.length;d++){var e=a[d];if(90==e.type||100==e.type)90==e.type&&b&&la.copy(b,e.Ab),100==e.type&&c&&la.copy(c,e.Ab),aa(e),fa(e)}};a.aV=function(b,c){for(var d=
La.get_active(),d=sa.Da(b,d).ja,e,f,g,h,l,k,m,n,M=0;M<d.length;M++){var p=d[M];if(p.type==a.rc&&p.near||p.type==a.Kc||p.type==a.lf){e=p.near;f=la.invert(c,Na);h=ya.transformMat4(X,f,Qa);g=h[0]*e;h=h[1]*e;k=ya.transformMat4(Ea,f,Qa);l=k[0]*e;k=k[1]*e;f=ya.transformMat4(Fa,f,Qa);f=-f[2]*f[3];m=la.frustum(l,g,k,h,e,f,Na);n=(g-l)/(h-k);break}}for(M=0;M<d.length;M++)if(p=d[M],p.type==a.rc||p.type==a.Kc||p.type==a.lf)p.far=f,p.near=e,p.right=g,p.top=h,p.left=l,p.bottom=k,p.qb=n,p.mc=Math.atan(h/e)-Math.atan(k/
e),la.copy(m,p.Ab),aa(p),fa(p)}};b4w.module.__lights=function(a,t){function e(a){h.scale(a.color,a.jg,a.Rq)}var c=t("__tsr"),b=t("__util"),h=t("__vec3"),f=new Float32Array(3);a.xS=function(a,l){var q=a.data,y=l.Db={name:"",type:q.type,YH:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),Rq:new Float32Array(3),wF:0,TC:!1,nn:0,Ns:0,Nq:.1,Mq:30,ZF:!1,CH:!1,FF:!1,rn:!0,vn:!0,jg:1,distance:25,UY:"INVERSE_SQUARE"};y.name=l.name;y.rn=q.use_diffuse;y.vn=q.use_specular;var p=c.get_quat_view(l.A.D),p=b.quat_to_dir(p,
b.AXIS_Z,f);h.normalize(p,p);y.direction.set(p);y.color[0]=q.color[0];y.color[1]=q.color[1];y.color[2]=q.color[2];y.jg=y.wF=q.energy;e(y);y.distance=q.distance;y.TC=q.use_sphere;y.Nq=q.clip_start;y.Mq=q.clip_end;if("POINT"===y.type||"SPOT"===y.type)y.distance=q.distance;"SPOT"===y.type?(y.Ns=q.spot_blend,y.nn=q.spot_size):"POINT"===y.type&&(y.nn=Math.PI/2);y.ZF=q.b4w_generate_shadows;y.FF=q.b4w_dynamic_intensity};a.set_light_color=function(a,b){a.color[0]=b[0];a.color[1]=b[1];a.color[2]=b[2];e(a)};
a.WU=function(a,b){a.Ns=b};a.VU=function(a,b){a.distance=b};a.XU=function(a,b){a.nn=b};a.set_light_energy=function(a,b){a.jg=b;e(a)};a.sW=function(a){var e=a.Db;if(e){a=c.get_quat_view(a.A.D);b.quat_to_dir(a,b.AXIS_Z,e.direction);h.normalize(e.direction,e.direction);if("SUN"==e.type){a=Math.acos(h.dot(e.YH,b.nq));var f=Math.acos(h.dot(e.direction,b.nq));e.CH=Math.floor(a/.025)!=Math.floor(f/.025)?!0:!1}h.copy(e.direction,e.YH)}}};b4w.module.__scenes=function(a,t){function e(){Ta||(Ta=c(ab));return Ta}function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.$f||!c.$f.length)return c}return null}function b(){ib||Wa.K("No active scene available");return ib}function h(a,b,c){if(!f(a,b,c))return null;c=a.b4w_shadow_settings;var d={};c.csm_resolution>hb.dc?(d.csm_resolution=hb.dc,Na.error("Shadow map texture has unsupported size. Changed to "+hb.dc+".")):d.csm_resolution=c.csm_resolution;Ba.shadow_blur_samples=Ba.shadow_blur_samples?
Ba.shadow_blur_samples:c.blur_samples;d.wV=c.soft_shadows;a=za.yv(b,Ba.ssao&&a.b4w_enable_ssao);d.self_shadow_polygon_offset=c.self_shadow_polygon_offset;d.self_shadow_normal_offset=c.self_shadow_normal_offset;d.enable_csm=c.b4w_enable_csm&&1==a.length;c.b4w_enable_csm&&1<c.csm_num&&1<a.length&&Na.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");d.Ih=[];d.bJ=[];d.Nq=[];d.Mq=[];for(b=0;b<a.length;b++)d.Ih.push(a[b].Db.type),d.bJ.push(a[b].Db.nn),d.Nq.push(a[b].Db.Nq),
d.Mq.push(a[b].Db.Mq),"SPOT"!=d.Ih[b]&&"POINT"!=d.Ih[b]||!d.enable_csm||(Na.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),d.enable_csm=!1);d.enable_csm?(d.csm_num=c.csm_num,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=c.fade_last_cascade,d.blend_between_cascades=c.blend_between_cascades):
(d.csm_num=1,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=!1,d.blend_between_cascades=!1);return d}function f(a,b,c){if(0!=b.length&&Ba.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var d=!1,e=!1;a=Ba.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<c.length;b++){var f=
c[b];f.b4w_shadow_cast&&(d=!0);f.b4w_shadow_receive&&(e=!0);if((a||d)&&e)return!0}return!1}function q(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].Db.type)return!0;return!1}function l(a){if(!Ba.shore_smoothing)return!1;a=da(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.ha.Di&&c.ha.shore_smoothing)return!0}return!1}function x(a){for(var b=0;b<a.length;b++)for(var c=a[b].particle_systems,d=0;d<c.length;d++)if(za.JE(a[b].Ha,c[d].settings))return!0;return!1}function y(a){for(var b=da(a),c=[],d=0;d<b.length;d++){var e=
b[d];if(e.ha.Di){for(var f={},g=0;g<a.length;g++)for(var h=a[g],l=h.Ha.nc,k=0;k<l.length;k++)l[k]==e&&(f.Wi=h.location[2]);f.Kd=new Float32Array(4);f.Kd.set(e.ha.wm);f.Kd[3]=e.ha.gv;e.ha.is_dynamic?(f.jr=!0,f.waves_height=e.ha.waves_height,f.waves_length=e.ha.waves_length,f.dst_noise_scale0=e.ha.dst_noise_scale0,f.dst_noise_scale1=e.ha.dst_noise_scale1,f.dst_noise_freq0=e.ha.dst_noise_freq0,f.dst_noise_freq1=e.ha.dst_noise_freq1,f.dir_min_shore_fac=e.ha.dir_min_shore_fac,f.dir_freq=e.ha.dir_freq,
f.dir_noise_scale=e.ha.dir_noise_scale,f.dir_noise_freq=e.ha.dir_noise_freq,f.dir_min_noise_fac=e.ha.dir_min_noise_fac,f.dst_min_fac=e.ha.dst_min_fac,f.waves_hor_fac=e.ha.waves_hor_fac):(f.jr=!1,f.waves_height=0,f.waves_length=0);f.gg=e.ha.Vu;f.ON=e.ha.lj;f.NN=e.ha.kj;f.PN=new Float32Array([.3,.7]);f.rl=null;e=e.Cg;for(g=0;g<e.length;g++)h=e[g].texture,!0===h.b4w_shore_dist_map&&"FILE"==h.image.source&&(f.rl=h.image,f.kC=h.image.size[0],f.bB=h.b4w_max_shore_dist,h=h.b4w_shore_boundings,f.kp=[(h[0]+
h[1])/2,(h[2]+h[3])/2],f.lp=[h[0]-h[1],h[2]-h[3]]);c.push(f)}}if(0<c.length){f=c[0];if(!f.jr)for(d=0;d<c.length;d++)c[d].jr&&(f=c[d]);return f}return null}function p(a){function b(a){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d];"GROUP"==e.type&&e.node_group&&b(e.node_group.node_tree);"GROUP"==e.type&&"B4W_REFRACTION"==e.node_tree_name&&(c.refractions=!0);"BSDF_TRANSPARENT"==e.type&&(c.refractions=!0)}}}var c={refractions:!1};a=da(a);for(var d=0;d<a.length;d++){var e=a[d];e.Om&&(c.refractions=
!0);e.Md&&b(e.Md)}return c}function d(a,b,c){if(Ba.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var d=0,e=!1,f=!1,g=0;g<b.length;g++){var h=b[g];h.A.Qd&&"CUBE"==h.A.Rh&&d++;if(h.us.length){for(var l=null,k=0;k<a.length;k++)if(a[k]==h){l=k;break}null==l&&a.push(h)}}for(g=0;g<c.length;g++){b=c[g];b.b4w_reflexible&&(e=!0);a:if(b.b4w_reflexible){b=b.Ha.nc;for(h=0;h<b.length;h++)if(l=b[h].ib,"OPAQUE"!=l&&"CLIP"!=l&&"ALPHA_ANTIALIASING"!=l){b=!0;break a}b=!1}else b=
void 0;b&&(f=!0)}return{eI:a,HH:d,qj:[],Kz:[],Mi:[],Vw:[],zA:e,tG:f}}function v(a,b){var c=a.b4w_sky_settings,d={};d.hI=c.render_sky||c.procedural_skydome;d.procedural_skydome=c.procedural_skydome;d.use_as_environment_lighting=c.use_as_environment_lighting;d.tl=c.color;d.rayleigh_brightness=c.rayleigh_brightness;d.mie_brightness=c.mie_brightness;d.spot_brightness=c.spot_brightness;d.scatter_strength=c.scatter_strength;d.rayleigh_strength=c.rayleigh_strength;d.mie_strength=c.mie_strength;d.rayleigh_collection_power=
c.rayleigh_collection_power;d.mie_collection_power=c.mie_collection_power;d.mie_distribution=c.mie_distribution;d.le=c.reflexible;d.Rd=c.reflexible_only;!b&&c.procedural_skydome&&Na.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return d}function r(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.UR=a.hemisphere;b.vN=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;b.dist_factor=a.dist_factor;b.zU=a.samples;
return b}function H(a){if(!Ba.bloom||!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function E(a){var b={};a=a.b4w_motion_blur_settings;b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function w(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=
a.saturation;return b}function n(a){var b={};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.Zk=a.max_ray_length;b.ul=a.steps_per_pass;return b}function C(a){var b={};b.Nh=a.b4w_outline_color;b.an=a.b4w_outline_factor;return b}function k(a){var b={};a=a.b4w_glow_settings;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b}function F(a,b){var c=a.light_settings,
d={};d.kg=c.environment_energy;d.ft=c.use_environment_light;d.Vz=c.environment_color;d.Ld=a.horizon_color.slice(0);d.Xd=a.zenith_color.slice(0);d.tn=a.use_sky_paper;d.sn=a.use_sky_blend;d.un=a.use_sky_real;d.zx=null;d.ln=null;d.Xu=null;d.ie="";b.render_sky&&a.use_nodes&&a.node_tree&&(c=Aa.bF(a.node_tree,a.uuid,"MAIN",null),d.ie=c.id);c=!0;if(d.ft&&"SKY_TEXTURE"==d.Vz&&(!b.procedural_skydome||!b.use_as_environment_lighting)){for(var e=null,f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_environment_lighting&&
!a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];break}e?d.Xu=e:c=!1}for(f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];e.texture.image&&(c=!0,d.zx=e,f=Math.min(hb.rg,Ha.pz(e.texture.image.size[0]/3)),d.ln={sJ:f,rE:e.blend_factor,AG:e.horizon_factor,sK:e.zenith_up_factor,rK:e.zenith_down_factor,color:e.color,Ia:e.default_value,invert:e.invert,XJ:e.use_rgb_to_intensity,sE:e.blend_type,SJ:e.use_map_blend,TJ:e.use_map_horizon,
VJ:e.use_map_zenith_up,UJ:e.use_map_zenith_down});break}d.ft=d.ft?c:!1;return d}function u(a){var b=a.fog_settings,c={};c.UW=b.use_fog;c.intensity=b.intensity;c.depth=b.depth;c.start=b.start;c.height=b.height;c.tQ=b.falloff;c.color=b.use_custom_color?b.color.slice(0):a.horizon_color.slice(0);a=c.color;c.Kd=new Float32Array([a[0],a[1],a[2],1/c.depth]);c.Af=new Float32Array([c.intensity,c.depth,c.start,c.height]);return c}function g(a,b){if(!Ba.Nc)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;
case "ON":return!0}for(var c=!1,d=!1,e=0;e<b.length;e++){for(var f=b[e],g=f.Ha.nc,h=0;h<g.length;h++)g[h].Ri.Fo&&(c=!0);f=f.particle_systems;for(h=0;h<f.length;h++)g=f[h].settings,"HAIR"==g.type&&g.b4w_dynamic_grass&&(d=!0);if(c&&d)return!0}return!1}function D(a,b){if(Xb.outlining_overview_mode)return!0;if(Ba.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Ha.A.pl)return!0;return!1}else return!1}function B(a,
b){if(Xb.outlining_overview_mode)return!0;if(Ba.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Ha.A.Xc)return!0;return!1}else return!1}function N(a,b){if(Ba.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)for(var d=b[c].Ha.nc,e=0;e<d.length;e++)if(Aa.IE(d[e]))return!0;return!1}else return!1}function L(a,b){if(Ba.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return b.refractions}else return!1}function A(a){for(var b=0;b<a.length;b++)for(var c=a[b].Ha.nc,d=0;d<c.length;d++){var e=c[d];if(e.Sj&&"OPAQUE"!=e.ib&&"CLIP"!=e.ib&&"ALPHA_ANTIALIASING"!=e.ib)return!0}return!1}function G(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++){var d=b[c].Ha;if(d.anchor&&d.anchor.fo)return!0}return!1}}function z(a,b){for(var c=ba(a,[P.Hb,P.bd,P.Yd]),d=0;d<c.length;d++)c[d].du=
b}function I(a,b,c,d,e,f){for(var g=b.A,h=za.Da(b,e),l=h.$,k=0;k<l.length;k++){var n=l[k];if(!(n.Ee||n.Rd||"MAIN"!=n.type&&"NODES_GLOW"!=n.type&&"PARTICLES"!=n.type&&"LINE"!=n.type)&&("OPAQUE"==n.zb&&"OPAQUE"==d||"BLEND"==n.zb&&"BLEND"==d||"XRAY"==n.zb&&"XRAY"==d||"NODES_GLOW"==n.type&&"GLOW"==d)){if(!f&&(m(n,a,b,c,d,e),!Y.Ic(n)))if("DEBUG"===Cb.type())Y.Pt(n,"error.glslv","error.glslf"),Y.Ic(n);else continue;var M=P.Ai(n,g,h.eg[k]);P.Rc(a,M);ka.lm(c,a,n);U(n)}}}function S(a){a.Xk.gt&&Y.xb(a,"USE_LOD_SMOOTHING",
1)}function m(a,b,c,d,e,f){var g=c.A,h=f.J,l=za.Da(c,f),k="NO_SHADOWS";c=ba(f,[P.wd]);if(c.length&&a.Td){switch(e){case "OPAQUE":k="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":k="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":k="NO_SHADOWS";break;case "SHADOW":k="SHADOW_MASK_GENERATION";break;default:Wa.K("Wrong subscene type")}for(var m=0;m<c.length;m++)Y.eE(a,f.J.Yc)}m="NO_SOFT_SHADOWS";if(h.Yc&&h.Yc.wV)switch(Ba.shadow_blur_samples){case "16x":m="POISSON_X_16";
break;case "8x":m="POISSON_X_8";break;case "4x":m="POISSON_X_4"}c=a.eb;oa.oa(c,"SHADOW_USAGE",k);oa.oa(c,"POISSON_DISK_NUM",m);S(a);a.Nc&&(m=ka.Lb(d,P.Zi))&&Q(a,m,g);K(c,b.H);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.wb){e=b.Wo;oa.oa(c,"NUM_LIGHTS",e);oa.oa(c,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);oa.oa(c,"REFLECTION_PASS","REFL_PASS_NONE");oa.oa(c,"SSAO_ONLY",0);if(e=h.sd)oa.oa(c,"WATER_EFFECTS",1),oa.oa(c,"WAVES_HEIGHT",oa.X(e.waves_height)),oa.oa(c,"WAVES_LENGTH",oa.X(e.waves_length)),oa.oa(c,"WATER_LEVEL",
oa.X(e.Wi));if(b.gg&&a.gg){oa.oa(c,"CAUSTICS",1);if(m=h.Yc){g=m.Ih;for(m=k=0;m<g.length;m++)"SUN"==g[m]&&(k=m);oa.oa(c,"SUN_NUM",k)}oa.oa(c,"CAUST_SCALE",oa.X(b.lj));oa.oa(c,"CAUST_SPEED",oa.X(b.hu,2));oa.oa(c,"CAUST_BRIGHT",oa.X(b.kj))}b=l.qj;g=l.Mi;l=ka.Lb(d,P.$d);if(-1!==a.Mf.indexOf("u_mirrormap"))oa.oa(c,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Qd&&b)h.Qh.zA?(Y.vh(a,b.H.Rb,"u_cube_reflection"),oa.oa(c,"REFLECTION_TYPE","REFL_CUBE")):(b.xm=!0,m=ka.Lb(d,P.pk),g=ka.Lb(d,P.Jn),m&&g?(Y.vh(a,
m.H.Rb,"u_cube_irradiance"),Y.vh(a,g.H.Rb,"u_cube_r_convolution"),oa.oa(c,"REFLECTION_TYPE","REFL_PBR")):(b=(l=ka.Lb(d,P.$d))?l.H.Rb:b.H.Rb,Y.vh(a,b,"u_cube_reflection"),oa.oa(c,"REFLECTION_TYPE","REFL_CUBE")));else if(a.Qd&&g)for(m=0;m<g.length;m++)b=g[m].H.Rb,Y.vh(a,b,"u_plane_reflection"),oa.oa(c,"REFLECTION_TYPE","REFL_PLANE");else oa.oa(c,"REFLECTION_TYPE","REFL_NONE");l?a.Qu?(b=l.H.Rb,Y.vh(a,b,"u_sky")):l.procedural_skydome&&(a.uf=l.uf,oa.oa(c,"PROCEDURAL_FOG",1)):oa.oa(c,"PROCEDURAL_FOG",0);
b=h.Ol;b.ft&&(oa.oa(c,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.Vz?(b.Xu?(l=b.Xu.texture,b=Ha.xe(b.Xu),Y.vh(a,b,"u_sky_texture",l.name)):l&&(b=l.H.Rb,Y.vh(a,b,"u_sky_texture")),oa.oa(c,"SKY_TEXTURE",1)):"SKY_COLOR"==b.Vz&&oa.oa(c,"SKY_COLOR",1));b=h.qK;b.UW&&(oa.oa(c,"USE_FOG",1),oa.oa(c,"FOG_TYPE",b.tQ));a.Qj&&a.rb?(Ba.Iu&&oa.oa(c,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.wb||"NODES_GLOW"==a.type?(oa.oa(c,"REFRACTIVE",1),h.refractions?oa.oa(c,"USE_REFRACTION",1):oa.oa(c,"USE_REFRACTION",
0)):h.refractions?oa.oa(c,"REFRACTIVE",1):oa.oa(c,"REFRACTIVE",0),(h.rH.refractions||h.refractions)&&oa.oa(c,"HAS_REFRACT_TEXTURE",1)):(oa.oa(c,"REFRACTIVE",0),oa.oa(c,"USE_REFRACTION",0),oa.oa(c,"USE_REFRACTION_CORRECTION",0));a.Sf&&(Ba.shore_smoothing&&a.Cn&&ka.Lb(d,P.hD)?oa.oa(c,"SHORE_SMOOTHING",1):oa.oa(c,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?oa.oa(c,"DYNAMIC",1):oa.oa(c,"DYNAMIC",0));"PARTICLES"==a.type&&oa.oa(c,"COLOR_RAMP_LENGTH",a.Ja.ru);if(!a.Sg)for(a=a.ma,d=0;d<a.length;d++)if(b=
a[d],"SCENE"==b.source)for(h=0;h<ab.length;h++)for(c=ab[h],e=ab[h].$f,l=0;l<e.length;l++)e[l]==b&&Fa.I(Ib,c,f,null)}}function K(a,b){b.type==Ka.re||b.type==Ka.th||b.type==Ka.$i?oa.oa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):oa.oa(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function U(a){8<a.ma.length&&Na.warn(a.type,"too many textures used - "+a.ma.length+' (max 8), materials "'+a.cc.join(", ")+'"')}function Q(a,b,c){a.jd=b.jd;var d=b.jd[0],e=b.jd[1],f=b.jd[2];c=c.va;c=Math.max(c.max_x-c.min_x,c.max_y-c.min_y);f=
0==f?c:Math.max(f,c);b.jd[2]=f;b=b.H;Ka.AI(b,f/2,f/2,-e,-d);Ka.set_projection(b,!1);d=a.Aj||0;d=0==d?c:Math.max(d,c);a.Aj=d}function R(a,b,c,d,e,f){for(var g=b.A,h=za.Da(b,e),l=h.$,k=0;k<l.length;k++){var n=l[k];if(("MAIN"==n.type||"PARTICLES"==n.type||"LINE"==n.type)&&"REFLECT"==n.zb&&n.rb==d){if(a.type==P.Zd||a.type==P.Xf){var M;a:{var p=e.J.Qh.Mi;for(M=0;M<p.length;M++)for(var r=0;r<p[M].length;r++)if(p[M][r]==a)break a;p=e.J.Qh.Vw;for(M=0;M<p.length;M++)for(r=0;r<p[M].length;r++)if(p[M][r]==a)break a;
M=null}if(M==g.Nd)continue}else if(M=na(e,a),M==g.ce)continue;if(!f&&(m(n,a,b,c,"REFLECT",e),M=n.eb,oa.oa(M,"WATER_EFFECTS",0),a.type==P.Zd||a.type==P.Xf?oa.oa(M,"REFLECTION_PASS","REFL_PASS_PLANE"):oa.oa(M,"REFLECTION_PASS","REFL_PASS_CUBE"),oa.oa(M,"TEXTURE_NORM",0),!Y.Ic(n)))if("DEBUG"===Cb.type())Y.Pt(n,"error.glslv","error.glslf"),Y.Ic(n);else continue;M=P.Ai(n,g,h.eg[k]);P.Rc(a,M);ka.lm(c,a,n);U(n)}}}function ga(a){aa(a);var b=ja(a,P.Hb),c=!0,d=a.J.Yc;Fa.ea(a.J.wa,function(e,f){f.type===P.wd&&
(T(f,a,b.H,d,c),c=!1)})}function ra(a){Fa.ea(a.J.wa,function(a,b){b.type===P.In&&(b.ir=1)})}function T(a,b,c,d,e){if(0!=a.Za.length){var f=a.H;Za.copy(c.D,f.D);Za.copy(c.Rf,f.Fs);if("SUN"===d.Ih[a.zg]||"HEMI"===d.Ih[a.zg]){var g=c.D,h=kc;ya.oX(h);for(var l=0;l<a.Za.length;l++)for(var k=a.Za[l].La,m=0;m<k.length;m++){var n=k[m].Aa,M=k[m].ug;if(n.Nc){var p=Za.ub(g,sb),r=Da.transformQuat(Wa.AXIS_MZ,p,Nb),p=-r[0],r=r[1],q=Za.Mb(g,Nb),p=q[0]-n.Aj*(1+p)/2,r=q[1]-n.Aj*(1-r)/2,M=ya.Wn(n.sb.Oe,M.D,wc),M=M.max_z-
M.min_z,q=wc;q.min_x=p;q.min_y=r;q.min_z=n.jd[0]-M;q.max_x=p+n.Aj;q.max_y=r+n.Aj;q.max_z=n.jd[1]+M}else q=M.wh;l||m?ya.Zu(h,q):ya.ni(q,h)}g=ya.JF(h,Jb);Wa.cp(g,f.fc,g);if(d.enable_csm){b=Da.copy(c.ri[a.ar],ac);d=qa.invert(c.fc,zb);Wa.cp(b,d,b);Wa.cp(b,f.fc,b);a=c.br[a.ar];if(e)for(xc=0,yc=-Infinity,e=2;e<g.length;e+=3)xc=Math.min(xc,g[e]),yc=Math.max(yc,g[e]);e=kc;e.max_x=b[0]+a;e.max_y=b[1]+a;e.max_z=yc;e.min_x=b[0]-a;e.min_y=b[1]-a;e.min_z=xc}else{c=e=kc;d=Db;d.set(g);g=$b/9;h=qa.identity(zb);qa.rotate(h,
g,Wa.AXIS_MZ,h);k=l=-1;for(m=0;10>m;m++){n=ya.fz(d,0,d.length,wc);M=(n.max_x-n.min_x)*(n.max_y-n.min_y);if(-1==l||.1<l-M)l=M,k=m,ya.ni(n,c);Wa.cp(d,h,d)}c=k*g;0<c&&(d=qa.identity(zb),qa.rotate(d,c,Wa.AXIS_MZ,d),qa.multiply(d,f.fc,f.fc),Za.from_mat4(f.fc,f.Rf));c=e.max_x-e.min_x;d=e.max_y-e.min_y;c&&d&&(g=Math.abs(c-d)/2,2<c/d?(e.max_y+=g,e.min_y-=g):2<d/c&&(e.max_x+=g,e.min_x-=g));e.max_x+=.005;e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;ia(a,b.J.wa)}Ka.SU(f,e.min_x,e.max_x,
e.min_y,e.max_y,-e.max_z,-e.min_z);Ka.set_projection(f,!1)}else"SPOT"!==d.Ih[a.zg]&&"POINT"!==d.Ih[a.zg]||Ka.set_projection(f,!1)}}function ia(a,b){for(var c=a.H,d=ka.DR(b,a),e=0;e<d.length;e++){var f=d[e];if(f.type==P.Hb||f.type==P.Yf||f.type==P.bd||f.type==P.Gg)if(Ba.qw)f.jt.set(c.Rf,9*a.zg);else{var g=Za.get_trans_view(c.Rf),h=Za.get_scale(c.Rf),l=Za.get_quat_view(c.Rf);Xa.set(g[0],g[1],g[2],h,Va);f.Qp.set(Va,4*a.zg);f.Pp.set(l,4*a.zg)}}}function ha(a,b,c,d,e){for(var f=b.A,g=za.Da(b,d),h=g.$,
l=0;l<h.length;l++){var k=h[l];if("COLOR_ID"==k.type&&(a.type==P.Le&&"COLOR_ID"==k.zb||a.type==P.ph&&"COLOR_ID_XRAY"==k.zb)){if(!e&&(m(k,a,b,c,"COLOR_ID",d),Y.xb(k,"USE_OUTLINE",0),!Y.Ic(k)))continue;k=P.Ai(k,f,g.eg[l]);P.Rc(a,k)}}}function pa(a,b){Z(a,b);for(var c=0;c<a.te.length;c++)a.te[c].parent==a&&pa(a.te[c],b)}function Z(a,b){a.A.hide=b;if(za.is_lamp(a))for(var c=0;c<a.S.length;c++)for(var d=a.S[c],e=ba(d.kb,mb),f=0;f<e.length;f++){var g=e[f],h=a.A,l=a.Db,k=d.Ur,m=l.rn&&!h.hide?1:0;g.Rm[4*
k+3]=m;m=l.vn&&!h.hide?1:0;g.Qm[4*k+3]=m;g.Na=!0}}function ma(a,b){for(var c=ba(b,mb),d=a.Db,e=a.A,f=za.Da(a,b),g=Za.get_trans_view(e.D),e=Za.get_quat_view(e.D),h=0;h<c.length;h++){var l=c[h],k=l,m=a.A,n=a.Db,M=f.Ur,p=Za.get_trans_view(a.A.D),r=n.Rq;k.Tr.set(n.direction,3*M);Va[0]=p[0];Va[1]=p[1];Va[2]=p[2];Va[3]=n.rn&&!m.hide?1:0;k.Rm.set(Va,4*M);Va[0]=r[0];Va[1]=r[1];Va[2]=r[2];Va[3]=n.vn&&!m.hide?1:0;k.Qm.set(Va,4*M);k.Na=!0;switch(d.type){case "SUN":l.Ux.set(e);l.Tx=d.Rq;Da.copy(d.direction,l.Sx);
l.type==P.$d&&l.procedural_skydome&&(l.Po=d.CH,wa(b,l));break;case "HEMI":case "POINT":case "SPOT":break;default:Na.error("Unknown light type: "+d.type+'".')}l=l.Za;for(k=0;k<l.length;k++)for(m=l[k].La,n=0;n<m.length;n++)M=m[n].Aa,M.Pm&&Y.UU(M,a)}c=ja(b,P.Hb).H;f=f.iC;d=b.J.Yc;for(h=0;h<f.length;h++)l=f[h],Ka.gC(l.H,g,e),T(l,b,c,d,!0),ia(l,b.J.wa)}function aa(a){var b=Pa.Sb(a,"LAMP",Pa.DATA_ID_ALL),b=za.yv(b,Ba.ssao&&a.b4w_enable_ssao);if(b.length)for(var c=0;c<b.length;c++)for(var d=b[c],e=d.A,f=
Za.Mb(e.D,ac),e=Za.ub(e.D,sb),g=0;g<d.S.length;g++){var h=d.S[g],l=h.iC;if(h.kb==a)for(h=0;h<l.length;h++)Ka.gC(l[h].H,f,e)}}function fa(a){var b=ja(a,P.$d);b&&wa(a,b)}function wa(a,b){Qa.dn(b);Ja.uj(b);if(b.Po)for(var c=ba(a,Mb),d=0;d<c.length;d++)for(var e=c[d].Za,f=0;f<e.length;f++)for(var g=e[f].La,h=0;h<g.length;h++){var l=g[h];l.$b&&(l=l.Aa,Y.SN(l)&&Ja.iW(l))}if(c=ja(a,P.pk))Qa.dn(c),Ja.uj(c);if(c=ja(a,P.Jn))Qa.dn(c),Ja.uj(c);if(c=ja(a,P.fD))Qa.dn(c),Ja.uj(c)}function da(a){for(var b=[],c=0;c<
a.length;c++)for(var d=a[c].Ha.nc,e=0;e<d.length;e++){var f=d[e];-1==b.indexOf(f)&&b.push(f)}return b}function W(a,b,c,d){X.RG()&&(b*=window.devicePixelRatio,c*=window.devicePixelRatio);var f=e();f&&(f=f.J,b*=f.fp,c*=f.fp);b*=a.Wj;c*=a.Xj;d[0]=Math.floor(b);d[1]=Math.floor(c);return d}function Ga(a,b,c){a=W(a,b,c,Fc);return a[0]>hb.dc||a[1]>hb.dc?(Na.warn("Texture size exceeds platform limits, downscaling"),Math.min(hb.dc/a[0],hb.dc/a[0])):1}function O(a,b,c){for(var d=a.J,e=za.Da(a.aj,a).ja,f=0!=
c?b/c:1,g=0;g<e.length;g++){var h=e[g];Ka.HU(h,f);Ka.set_projection(h,!1);d.Yc&&Ka.OC(h,d.Yc)}if(d.Yc){d.Fw=!0;d=ba(a,[P.Yf]);for(g=0;g<d.length;g++)d[g].Na=!0;d=ba(a,[P.bd]);for(g=0;g<d.length;g++)d[g].Na=!0}ua(a,b,c)}function ua(a,b,c){var d=a.J.wa,e=Infinity;ka.Gp(d,function(a){a.qn&&(e=Math.min(e,Ga(a,b,c)))});ka.Gp(d,function(f,g,h,l){if(f.qn){var k,m;l&&l.type==P.qk||h.bc&&!f.Ot?(k=b*f.Wj,m=c*f.Xj):(m=W(f,b,c,Fc),k=m[0]*e,m=m[1]*e);if(g)for(g=0;g<h.fb.length;g++)h.fb[g]==f&&Ha.resize(f.Oa,k,
m);else switch(Ha.Go(f.Oa)&&(Ha.resize(f.Oa,k,m),f.Oa.df&&(l.fw=f.Oa.yH)),f=h.H,f.width=k,f.height=m,h.type){case P.fq:Ca(a,{dof_power:h.H.dof_power});break;case P.gq:V(a,{small_glow_mask_width:h.small_glow_mask_width,large_glow_mask_width:h.large_glow_mask_width});break;case P.$p:la(a,{blur:h.Rn});break;case P.FD:f.width=f.Rb.width;f.height=f.Rb.height;break;case P.In:h=ka.Tc(d,h,P.gc);f=ka.Tc(d,h,P.gc);m=ka.Tc(d,f,P.gc);g=ka.Tc(d,m,P.gc);ka.Sd(h,1/k,1/k);ka.Sd(f,1/k,1/k);ka.Sd(m,1/k,1/k);ka.Sd(g,
1/k,1/k);break;default:ka.Sd(h,1/k,1/m)}}})}function ba(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];a.J.wa&&Fa.ea(a.J.wa,function(a,b){b.type==e&&c.push(b)})}return c}function ja(a,b){return ka.Lb(a.J.wa,b)}function ca(a){var b=e();b&&Fa.ea(b.J.wa,function(b,c){var d=c.H;d&&d.type==Ka.Ne&&(c.xm=a)})}function Ca(a,b){var c=ba(a,[P.fq]);if(!c.length)return Na.error("DOF is not enabled on the scene. Check camera settings"),0;for(var d=0;d<c.length;d++){var e=c[d],f=b,g=a,h=e.H.dof_bokeh,l=h?ba(g,
[P.Gy]):[],g=g.J.wa;if("boolean"==typeof f.dof_on&&(e.H.dof_on=f.dof_on,h))for(var k=0;k<l.length;k++)l[k].H.dof_on=f.dof_on;if("number"==typeof f.dof_distance&&(e.H.dof_distance=f.dof_distance,h))for(k=0;k<l.length;k++)l[k].H.dof_distance=f.dof_distance;if("number"==typeof f.dof_front_start&&(e.H.dof_front_start=f.dof_front_start,h))for(k=0;k<l.length;k++)l[k].H.dof_front_start=f.dof_front_start;if("number"==typeof f.dof_front_end&&(e.H.dof_front_end=f.dof_front_end,h))for(k=0;k<l.length;k++)l[k].H.dof_front_end=
f.dof_front_end;if("number"==typeof f.dof_rear_start&&(e.H.dof_rear_start=f.dof_rear_start,h))for(k=0;k<l.length;k++)l[k].H.dof_rear_start=f.dof_rear_start;if("number"==typeof f.dof_rear_end&&(e.H.dof_rear_end=f.dof_rear_end,h))for(k=0;k<l.length;k++)l[k].H.dof_rear_end=f.dof_rear_end;"number"==typeof f.dof_bokeh_intensity&&(e.H.dof_bokeh_intensity=f.dof_bokeh_intensity,h&&(l=ka.uv(g,e,P.gc),l[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity,l[1].H.dof_bokeh_intensity=f.dof_bokeh_intensity,l[0]=ka.Tc(g,
l[0],P.gc),l[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity));if("number"==typeof f.dof_power)if(h){f=f.dof_power;e.H.dof_power=f;var f=f/2,h=e.H.width,k=e.H.height,m=[1/h,0],n=[1/h*.5,1/k*.866],M=[-1/h*.5,1/k*.866],l=ka.uv(g,e,P.gc);ka.pd(l[0],f);ka.Sd(l[0],M[0],M[1]);ka.pd(l[1],f);ka.Sd(l[1],n[0],n[1]);l[0]=ka.Tc(g,l[0],P.gc);ka.pd(l[0],f);ka.Sd(l[0],m[0],m[1]);e.H.Jd&&(l[0]=ka.Tc(g,l[0],P.Gy),l[0]=ka.Tc(g,l[0],P.gc),ka.Sd(l[0],1/h,1/k),l[0]=ka.Tc(g,l[0],P.gc),ka.Sd(l[0],1/h,1/k))}else e.H.dof_power=
f.dof_power,l=ka.Tc(g,e,P.gc),g=ka.Tc(g,l,P.gc),ka.pd(l,e.H.dof_power),ka.Sd(l,1/e.H.width,1/e.H.height),ka.pd(g,e.H.dof_power),ka.Sd(g,1/e.H.width,1/e.H.height)}}function la(a,b){var c=ba(a,[P.vt]),d=ba(a,[P.$p]);if(!c.length||!d.length)return Na.error("Bloom is not enabled on the scene"),0;if("number"==typeof b.key)for(var e=0;e<c.length;e++)c[e].Un=b.key,c[e].Na=!0;if("number"==typeof b.edge_lum)for(e=0;e<c.length;e++)c[e].Tn=b.edge_lum,c[e].Na=!0;if("number"==typeof b.blur)for(e=0;e<d.length;e++){d[e].Rn=
b.blur;for(var f=a.J.wa,g=d[e].H.width/.5,h=d[e].H.height/.5,l=ka.uv(f,d[e],P.gc),k=0;k<l.length;++k){var m=l[k],n=ka.Tc(f,m,P.gc),M=g*m.Sn,p=h*m.Sn;ka.pd(m,b.blur);ka.Sd(m,1/M,1/p);ka.pd(n,b.blur);ka.Sd(n,1/M,1/p)}}if("number"==typeof b.average_luminance)for(e=0;e<c.length;e++)c[e].Vl||(c[e].average_luminance=b.average_luminance,c[e].Na=!0)}function V(a,b){var c=ba(a,[P.gq]);if(!c.length)return Na.error("Glow is not enabled on the scene"),null;for(var d=0;d<c.length;d++){for(var e=c[d],f=b,g=a.J.wa,
h=ka.xR(g,e),l=0;l<h.length;++l){var k=h[l];if(k.type==P.gc&&"GLOW_MASK_LARGE"==k.zb)var m=k;if(k.type==P.gc&&"GLOW_MASK_SMALL"==k.zb)var n=k}h=ka.Tc(g,m,P.gc);g=ka.Tc(g,n,P.gc);"number"==typeof f.small_glow_mask_coeff&&(e.small_glow_mask_coeff=f.small_glow_mask_coeff,e.Na=!0);"number"==typeof f.large_glow_mask_coeff&&(e.large_glow_mask_coeff=f.large_glow_mask_coeff,e.Na=!0);"number"==typeof f.small_glow_mask_width&&(e.small_glow_mask_width=f.small_glow_mask_width,ka.pd(n,f.small_glow_mask_width),
ka.Sd(n,1/e.H.width,1/e.H.height),n.Na=!0,ka.pd(g,f.small_glow_mask_width),ka.Sd(g,1/e.H.width,1/e.H.height),g.Na=!0);"number"==typeof f.large_glow_mask_width&&(e.large_glow_mask_width=f.large_glow_mask_width,ka.pd(m,f.large_glow_mask_width),ka.Sd(m,1/e.H.width,1/e.H.height),m.Na=!0,ka.pd(h,f.large_glow_mask_width),ka.Sd(h,1/e.H.width,1/e.H.height),h.Na=!0)}}function sa(a,b,c){var d=a.J,e=d.sd;if(!e.jr)return e.Wi;var f=e.waves_height,g=e.waves_length,h=e.Wi,l=Da.length(d.Zh)||1;a=ja(a,P.Hb).time;
a*=l;l=Fc;l[0]=20/g*(b-.25*a);l[1]=20/g*(c-.25*a);var k=Wa.FE(l);l[0]=17/g*(c+.1*a);l[1]=17/g*(b+.1*a);var l=k+Wa.FE(l)-1,m=e.dst_noise_scale0,k=e.dst_noise_scale1,n=e.dst_noise_freq0,M=e.dst_noise_freq1,p=Fc;p[0]=m*(b+n*a);p[1]=m*(c+n*a);m=Wa.mC(p);p[0]=k*(c-M*a);p[1]=k*(b-M*a);k=f*m*Wa.mC(p);e.rl?(M=(b-e.kp[0])/e.lp[0],p=(e.kp[1]+c)/e.lp[1],M+=.5,p+=.5,1<M||0>M||1<p||0>p?b=k:(d=Wa.cG(d.jC,e.kC,M,p),M=e.dir_noise_scale,p=e.dir_noise_freq,m=Math.sqrt(d),n=Math.max(m,e.dst_min_fac),b=f*Math.max(d,
e.dir_min_shore_fac)*Math.sin(m/(g/e.bB/Math.PI)+e.dir_freq*a)*Math.max(Wa.mC([M/g*(b+p*a),M/g*(c+p*a)]),e.dir_min_noise_fac)*(1-n)+k*n,l*=d)):b=k;return h+(b+.05*l)}function xa(a,b){a.Nm&&a.type==P.gc&&b.$b!=a.$b&&(a.$b=b.$b);b.$b||a.type!=P.In||(a.ir=0)}function J(a,b,c,d){var e=Fa.$a(a,b);Ka.jx(e.H,c,d);e.tq=!0;Fa.Cl(a,b,function(b,e,f){f.active&&f.from==c&&ka.cO(f)&&La(a,b,f.to,d)});Fa.hk(a,b,function(b,e,f){f.active&&f.from==c&&f.from==f.to&&J(a,b,c,d)})}function La(a,b,c,d){a=Fa.$a(a,b).Za;
for(b=0;b<a.length;b++)for(var e=a[b].La,f=0;f<e.length;f++)Y.lU(e[f].Aa,d,c)}function Ua(a){for(var b=ba(a,[P.Zi]),c=0;c<b.length;c++){var d=b[c],e=d.H,f=a.aj.A,g=Za.Mb(f.D,ac),h=Nb;h[0]=0;h[1]=0;h[2]=-d.jd[2]/2;d=Za.ub(f.D,sb);Da.transformQuat(h,d,h);h[0]+=g[0];h[1]+=g[1];h[2]=0;Ra.identity(d);Ka.gC(e,h,d)}}function Ia(a,b){Fa.ea(a,function(c,d){if(d.type==P.bi){d.fb[0]&&d.nh[0]||Wa.K("Wrong MOTION_BLUR subscene");var e=d.fb[0],f=d.nh[0];d.nh[0]=d.H.Rb;Fa.Cl(a,c,function(b,c,d){d.active&&La(a,b,
d.to,f)});J(a,c,e.from,f);La(a,c,e.to,d.nh[0]);d.yw=Math.exp(-b/d.mb_factor)}})}function ta(a){return a.J.Zh}function na(a,b){if(!a.J.Qh)return null;for(var c=a.J.Qh.qj,d=0;d<c.length;d++)if(c[d]==b)return d;c=a.J.Qh.Kz;for(d=0;d<c.length;d++)if(c[d]==b)return d;return null}var Y=t("__batch"),ya=t("__boundings"),Ka=t("__camera"),va=t("__config"),X=t("__container"),Ea=t("__debug"),Fa=t("__graph"),M=t("__hud"),ea=t("__input"),qa=t("__mat4"),Aa=t("__nodemat"),Pa=t("__objects"),Ya=t("__textures"),za=
t("__obj_util"),Oa=t("__physics"),Qa=t("__prerender"),Ma=t("__primitives"),Na=t("__print"),Ra=t("__quat"),Ja=t("__renderer"),ka=t("__scenegraph"),ic=t("__sfx"),oa=t("__shaders"),P=t("__subscene"),Ha=t("__textures"),Za=t("__tsr"),Wa=t("__util"),Da=t("__vec3"),Xa=t("__vec4"),Cb=t("__version"),Hb=va.qm,Ba=va.L,hb=va.zh,Xb=va.Xc,$a=va.ip,Yb=[P.Zi,P.wd,P.Hb,P.bd,P.Gg,P.Yd,P.Zd,P.ud,P.Xf,P.jf,P.Le,P.ph,P.Yf,P.rh,P.qh];a.IX=Yb;var mb=[P.Hb,P.bd,P.Gg,P.Yd,P.Zd,P.ud,P.Hn,P.ut,P.$d,P.Xf,P.jf,P.vt,P.Yf,P.wd,
P.Le,P.ph,P.rh],Mb=[P.Hb,P.At,P.bd,P.Gg,P.Yd,P.Zd,P.ud,P.Xf,P.jf],Wc=[P.wd,P.Hb,P.bd,P.Gg,P.Yd,P.Zd,P.ud,P.Xf,P.jf,P.Le,P.ph,P.Yf,P.Hn,P.rh,P.qh],Ec=[P.Hb,P.bd,P.Gg,P.Yd,P.Zd,P.ud,P.Xf,P.jf],Ta=null,ib=null,ab=[],Ib=null,$b=Math.PI/2,Fc=new Float32Array(2),ac=new Float32Array(3),Nb=new Float32Array(3),sb=new Float32Array(4),Va=new Float32Array(4),zb=new Float32Array(16),Jb=new Float32Array(24),Db=new Float32Array(24),kc=ya.Re(),wc=ya.Re(),xc=0,yc=-Infinity,jc=new Uint8Array(4);a.LY=function(){return{}};
a.set_active=function(a){ib=a;ic.GU(a)};a.ST=function(a,b){var c=a.J,d=ka.ZO(c.wa);if(a==b){O(a,X.qG(),X.pG());for(var e=0;e<d.length;e++)a.J.fn.push(d[e])}else for(e=a.$f[0],O(a,e.Yj,e.Yj),e=0;e<d.length;e++)b.J.fn.push(d[e]);d=ba(a,Wc);for(e=0;e<d.length;e++)d[e].Zh.set(c.Zh);for(e=0;e<c.fn.length;e++)c.fn[e].type==P.wd&&Ja.uj(c.fn[e])};a.Gh=e;a.bv=c;a.get_active=b;a.Pa=function(){return ib?!0:!1};a.Mk=function(a){return a.aj};a.yr=function(){return ab};a.xv=function(){if(1==ab.length)return ab;
for(var a=0;a<ab.length;a++){var b=ab[a].J.wa;Fa.ea(b,function(b,c){for(var d=c.Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){for(var h=f[g],l=h.Aa.ma,k=h.Aa.rf,m=null,n=0;n<l.length;n++)if("SCENE"==l[n].source&&l[n].Ks==ab[a].name&&c.type!=P.Iy){Na.error('Texture-scene loop detected. A scene is rendered to texture "'+k[n]+'" yet this texture belongs to the same scene.');m=h.Aa;break}if(m)for(l=m.ma,m.ma=[],m.Mf=[],Y.hW(m,null),Y.Ic(m),P.Rc(c,h),n=0;n<l.length;n++)Ya.VE(l[n])}})}for(var c=
[],a=0;a<ab.length;a++)if(b=ab[a],!b.$f.length){b=Fa.Nj(Ib,b);Fa.jQ(Ib,b);b=Fa.wl(Ib,b,Fa.nk);b=Fa.BC(b);Fa.ea(b,function(a,b){c.push(b)});break}return c};a.PM=function(a,b,c,e,f){a.$f=a.$f||[];a.Ga=null;var m=a.J,M=za.Da(a.aj,a),z=a.aj.A;m.Wp=[];var V=a.world;m.yS=c.length;m.xl=q(c);m.yx=v(V,m.xl);m.Ol=F(V,m.yx);m.qK=u(V);if(V=!a.$f.length)a:{if("HMD"==Ba.stereo){if(M.ja[0].type!=Ka.Kc){Na.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ba.stereo="NONE";V=!1;break a}if(!ea.can_use_device(ea.DEVICE_HMD)){Na.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");
Ba.stereo="NONE";V=!1;break a}}V="HMD"==Ba.stereo}m.Pv=V;if(V=!a.$f.length)M.ja[0].type!=Ka.Kc&&"ANAGLYPH"==Ba.stereo?(Na.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ba.stereo="NONE",V=!1):V="ANAGLYPH"==Ba.stereo;m.anaglyph_use=V;if(V=!a.$f.length)M.ja[0].type!=Ka.Kc&&"SIDEBYSIDE"==Ba.stereo?(Na.warn("Side-by-side stereo is disabled for the non-perspective camera"),Ba.stereo="NONE",V=!1):V="SIDEBYSIDE"==Ba.stereo;m.Gs=V;m.GM=!m.anaglyph_use&&!m.Gs&&G(a,f);m.Qh=d(a,b,e);m.uN=
H(a);m.fT=E(a);m.QN=w(a);m.LR=n(a);m.wT=C(a);m.xi=k(a);m.dof=Ba.dof&&(0<z.dof_distance||z.dof_object);m.motion_blur=Ba.motion_blur&&a.b4w_enable_motion_blur;m.compositing=Ba.compositing&&a.b4w_enable_color_correction;m.antialiasing=Ba.antialiasing&&1==Ba.ec&&"NONE"!=a.b4w_antialiasing_quality;m.ssao=Ba.ssao&&a.b4w_enable_ssao;m.god_rays=Ba.god_rays&&a.b4w_enable_god_rays&&m.xl;m.TP=Ba.Iu;m.Bv=a.b4w_glow_settings.render_glow_over_blend;m.KV=r(a);f=p(e);m.rH=f;m.refractions=L(a,f);m.Yc=h(a,c,e);m.sd=
y(e);m.ai=A(e);m.vV=x(e);m.shore_smoothing=l(e);m.Nc=g(a,e);m.rO=D(a,e);m.outline=B(a,e);m.glow_materials=N(a,e);m.WS=a.b4w_lod_smooth_type;m.jH=a.b4w_lod_hyst_interval;switch(Ba.reflection_quality?Ba.reflection_quality:a.b4w_reflection_quality){case "LOW":m.Og=$a.pF;m.Ph=$a.UH;break;case "MEDIUM":m.Og=$a.MP;m.Ph=$a.LT;break;case "HIGH":m.Og=$a.LP;m.Ph=$a.KT;break;default:m.Og=$a.pF,m.Ph=$a.UH}X.RG()?(Na.log("%cENABLE HIDPI MODE","color: #00a"),m.SD="AA_QUALITY_LOW",m.fp=1,Ba.ec=1):1<Ba.ec?(Na.log("%cENABLE MSAA RENDERING: "+
Ba.ec+"x","color: #00a"),m.fp=1):(m.SD="AA_QUALITY_"+a.b4w_antialiasing_quality,m.fp=Ba.quality===va.P_ULTRA?1.33:1);c=a.$f.sort(function(a,b){return b.Yj-a.Yj});m.wa=ka.YO(m,M,z,c);m.fn=[];m.Fw=!1;m.oB=!1;m.pB=!1;m.Zh=new Float32Array(3);ab.push(a);Ib||(Ib=Fa.create());Fa.Y(Ib,a);for(m=0;m<b.length;m++)za.aC(b[m],!0,a);a=X.get_container();X.resize(a.clientWidth,a.clientHeight,!0)};a.QM=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d].J;e&&e.Ci&&(e.Yp=c,a.J.Wp.push(b[d]))}};a.tv=function(a){return a.J.wa};
a.VF=function(a,b){Fa.ea(b,function(c,d){var e=null;switch(d.type){case P.gc:e=Y.yu(d.ns);break;case P.At:e=Y.eP(d);break;case P.Uy:e=Y.fP(d);break;case P.hD:e=Y.LO();break;case P.Hn:e=Y.PO(d.Qw,d.Sf,d.ul);break;case P.ut:e=Y.QO();break;case P.bi:e=Y.TO();break;case P.Gy:e=Y.EO(d.ou);break;case P.fq:var e=Y.MO(d),f=d.H.dof_power;if(d.H.dof_bokeh){var f=f/2,g=ka.uv(b,d,P.gc);ka.pd(g[0],f);ka.pd(g[1],f);g[0]=ka.Tc(b,g[0],P.gc);ka.pd(g[0],f)}else{var g=ka.Tc(b,d,P.gc),h=ka.Tc(b,g,P.gc);ka.pd(g,f);ka.pd(h,
f)}break;case P.In:var e=Y.UO(),f=ka.Tc(b,d,P.gc),g=ka.Tc(b,f,P.gc),h=ka.Tc(b,g,P.gc),l=ka.Tc(b,h,P.gc);ka.pd(g,d.Bq);ka.pd(f,d.Bq);ka.pd(l,d.or*d.an);ka.pd(h,d.or*d.an);break;case P.gq:e=Y.OO();break;case P.Hy:e=Y.FO();break;case P.bD:e=Y.zO(d);break;case P.Sy:case P.yt:case P.kq:case P.zt:e=Y.cP(d.type);break;case P.Hg:e=Y.gP(d.zb);break;case P.$d:e=Y.IO(a,d);break;case P.pk:e=Y.GO();break;case P.Jn:e=Y.HO();break;case P.fD:e=Y.DO();break;case P.LUMINANCE:e=Y.RO();break;case P.eD:e=Y.AO();break;
case P.vt:e=Y.SO(d.Vl);break;case P.$p:e=Y.CO(d.$t);break;case P.FD:e=Y.yu("NONE");break;case P.vM:e=Y.HP();break;case P.Fn:e=Y.yO();break;case P.iq:e=Y.WO()}e&&(f=P.Ai(e,za.Zn("NONE")),P.Rc(d,f),ka.lm(b,d,e),U(e))})};a.append_object=function(a,b,c,d){switch(b.type){case "MESH":case "LINE":case "WORLD":var e=a.J.wa,f=b.A;!ka.Lb(e,P.wd)&&f.Td&&(f.Td=!1);f=ba(a,Yb);(c||d)&&Oa.append_object(b,a);for(d=0;d<f.length;d++){var g=f[d],h=b,l=e,k=a,n=c;switch(g.type){case P.Hb:I(g,h,l,"OPAQUE",k,n);break;case P.bd:I(g,
h,l,"BLEND",k,n);break;case P.Gg:I(g,h,l,"XRAY",k,n);break;case P.Yd:I(g,h,l,"GLOW",k,n);break;case P.Zd:case P.ud:R(g,h,l,!1,k,n);break;case P.Xf:case P.jf:R(g,h,l,!0,k,n);break;case P.Yf:for(var M=za.Da(h,k),p=M.$,r=0;r<p.length;r++){var q=p[r];if("SHADOW"==q.type&&"RECEIVE"==q.zb&&q.Td){if(!n&&(m(q,g,h,l,"SHADOW",k),!Y.Ic(q)))continue;var u=P.Ai(q,h.A,M.eg[r]);P.Rc(g,u);ka.lm(l,g,q);U(q)}}break;case P.wd:M=!1;p=h.A;h=za.Da(h,k);r=h.$;q=ka.Lb(l,P.Zi);for(u=0;u<r.length;u++){var v=r[u];if("SHADOW"==
v.type&&"CAST"==v.zb){M=!0;if(!n){S(v);var ea=g.Wo;Y.xb(v,"NUM_LIGHTS",ea);Y.xb(v,"NUM_LFACTORS",ea%2?Math.floor(ea/2)+1:ea/2);K(v.eb,g.H);oa.oa(v.eb,"SHADOW_USAGE","SHADOW_CASTING");v.Nc&&q&&Q(v,q,p);Y.xb(v,"SHADOW_TEX_RES",oa.X(k.J.Yc.csm_resolution));if(!Y.Ic(v))continue}v.Nc&&(k.J.Yc.cQ=!0);ea=P.Ai(v,p,h.eg[u]);P.Rc(g,ea);ka.lm(l,g,v);U(v)}}M&&(h=k.J.Yc,n=ka.Lb(l,P.Hb),T(g,k,n.H,h,!0));break;case P.Le:ha(g,h,l,k,n);break;case P.ph:ha(g,h,l,k,n);break;case P.rh:M=h.A;p=za.Da(h,k);r=p.$;for(q=0;q<
r.length;q++)if(u=r[q],"COLOR_ID"==u.type&&"OUTLINE"==u.zb){if(!n&&(m(u,g,h,l,"COLOR_ID",k),Y.xb(u,"USE_OUTLINE",1),!Y.Ic(u)))continue;u=P.Ai(u,M,p.eg[q]);P.Rc(g,u)}break;case P.Zi:l=h.A;h=za.Da(h,k);k=h.$;for(M=0;M<k.length;M++)if(p=k[M],"GRASS_MAP"==p.type){if(!n&&!Y.Ic(p))if("DEBUG"===Cb.type())Y.Pt(p,"error.glslv","error.glslf"),Y.Ic(p);else continue;p=P.Ai(p,l,h.eg[M]);P.Rc(g,p);p=g.H;v=l.wh;r=g.jd[0];q=g.jd[1];u=g.jd[2];0==r&&0==q?(r=v.min_z,q=v.max_z):(r=Math.min(r,v.min_z),q=Math.max(q,v.max_z));
v=1E-4*(q-r);r-=v;q+=v;g.jd[0]=r;g.jd[1]=q;Ka.AI(p,u/2,u/2,-q,-r);Ka.set_projection(p,!1)}break;case P.qh:for(M=h.A,h=za.Da(h,k),k=h.$,p=0;p<k.length;p++)if(r=k[p],"DEBUG_VIEW"==r.type){if(!n&&(r.Nc&&(q=ka.Lb(l,P.Zi))&&Q(r,q,M),!Y.Ic(r)))if("DEBUG"===Cb.type())Y.Pt(r,"error.glslv","error.glslf"),Y.Ic(r);else break;q=P.Ai(r,M,h.eg[p]);P.Rc(g,q);ka.lm(l,g,r);U(r)}}}break;case "LAMP":ma(b,a)}c=za.Da(b,a);e=c.$;for(f=0;f<e.length;f++)null==e[f].yb&&"PHYSICS"!=e[f].type&&(za.rI(c,f),f--);za.aC(b,!0,a)};
a.cS=function(a,b){if(a&&a.J&&a.J.wa){var c=a.J.wa,d=ka.Lb(a.J.wa,P.$d);if(d){var e=null;ka.Gp(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==P.$d&&d.type==P.qk)return e=a.Oa,!0});if(e){var f=$a.Bu,g=Y.zr(b,a);if(g&&g.wb)g=Aa.AR(Aa.wv(g.ie).wa),-1!=g&&(f=Ya.pz(g/2));else if(g=a.J.Ol.ln)f=g.sJ;f=Math.min(f,hb.rg);d.H.width=f;d.H.height=f;Ha.kx(e,f);z(a,f);if(d=ka.Lb(a.J.wa,P.pk)){d.H.width=f;d.H.height=f;var h=null;ka.Gp(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==P.pk&&d.type==P.Hb)return h=
a.Oa,!0});h&&Ha.kx(h,f)}if(f=ka.Lb(a.J.wa,P.Jn)){f.H.width=128;f.H.height=128;var l=null;ka.Gp(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==P.Jn&&d.type==P.Hb)return l=a.Oa,!0});l&&Ha.kx(l,128)}}}}};a.pW=function(a,b){for(var c=a.S,d=0;d<c.length;d++){var e=c[d].kb,f=e.J.wa,g=ka.Lb(e.J.wa,P.$d);if(g){var h=null;ka.Gp(f,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==P.$d&&d.type==P.pk)return h=a.Oa,!0});h&&(f=Ya.pz(b.height/2),f=Math.min(f,hb.rg),g.H.width=f,g.H.height=f,Ha.kx(h,f),z(e,f))}}};
a.bC=function(a){a.J.Fw=!0};a.JW=function(a,b){Fa.ea(b,function(b,c){c.type===P.wd&&(Za.copy(a.D,c.H.D),Za.copy(a.Rf,c.H.Fs))})};a.A_=ia;a.gR=function(a,b){for(var c=a.J.Yc,d=new Float32Array(c.csm_num),e=0;e<c.csm_num;e++)d[e]=Ka.KP(c,b,e);return d};a.Kq=pa;a.hm=Z;a.is_hidden=function(a){return a.A.hide};a.gI=function(a,b){for(var c=0;c<a.S.length;c++)for(var d=ba(a.S[c].kb,Yb),e=0;e<d.length;e++)for(var f=d[e].Za,g=0;g<f.length;g++)for(var h=f[g].La,l=h.length-1;0<=l;l--){var k=h[l];if(k.ug==a.A)if(k.Aa){if("undefined"==
typeof b||-1!=k.Aa.cc.indexOf(b)||0==k.Aa.cc.length)Y.WE(k.Aa),h.splice(l,1)}else h.splice(l,1)}};a.rW=function(a,b){for(var c=a.Db,d=za.Da(a,b).Ur,e=ba(b,mb),f=0;f<e.length;f++){var g=e[f];g.Qm.set(c.Rq,4*d);g.Na=!0}};a.$s=ma;a.hy=function(a){a=a.S;for(var b=0;b<a.length;b++)fa(a[b].kb)};a.iy=fa;a.LW=wa;a.cleanup=function(){for(var a=0;a<ab.length;a++){var b=ab[a];Fa.ea(b.J.wa,function(a,b){if(b.type!=P.qk){var c=b.H;Ja.fU(c.Ve,c.Rb,c.wf,c.width,c.height);for(var c=b.Za,d=0;d<c.length;d++)for(var e=
c[d].La,f=0;f<e.length;f++){var g=e[f].Aa;g&&Y.WE(g)}}});b.J.wa=null;b.J.fn=[]}ib=Ta=null;ab.length=0;Ib=null};a.oH=function(a,b,c){a=Ka.pQ(a,a.near,a.far,null,!0);var d=Ma.PQ(a);a=za.Zn("DYNAMIC");a.wh=a.va={max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12};a.se=a.tc=ya.pN();var e=a.se.ab;a.uk=a.Cb=ya.gz([e,0,0],[0,e,0],[0,0,e],a.se.U);c=Y.bP(d,c);c.tj=!0;c=P.Ai(c,a);P.Rc(b,c)};a.nZ=function(a){return[a.frame_start,a.frame_end]};a.KI=function(a,b,c){X.nV(a,b,c);ib&&O(ib,a,b)};
a.Bg=ba;a.Tb=ja;a.dU=function(){ca(!1)};a.eU=function(){ca(!0)};a.get_environment_colors=function(a){a=ja(a,P.Hb);var b=a.Ld,c=a.Xd,d=[],e=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];e[0]=c[0];e[1]=c[1];e[2]=c[2];return[a.kg,d,e]};a.set_environment_colors=function(a,b,c,d){for(var e=ba(a,mb),f=0;f<e.length;f++){var g=e[f];g.Ld.set(c);g.Xd.set(d);g.kg=b;g.Na=!0}(b=ka.Lb(a.J.wa,P.$d))&&wa(a,b)};a.get_sky_params=function(a){if((a=ja(a,P.$d))&&a.procedural_skydome){var b={};b.color=Array(3);Da.copy(a.tl,b.color);
b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;return b}return null};a.pR=function(a){return ba(a,
Mb)[0].Af[0]};a.nR=function(a){return ba(a,Mb)[0].Af[1]};a.qR=function(a){return ba(a,Mb)[0].Af[2]};a.oR=function(a){return ba(a,Mb)[0].Af[3]};a.xI=function(a,b){for(var c=ba(a,Mb),d=0;d<c.length;d++){var e=c[d];e.Af[0]=b;e.Na=!0}};a.vI=function(a,b){for(var c=ba(a,Mb),d=0;d<c.length;d++){var e=c[d];e.Af[1]=b;e.Na=!0}};a.yI=function(a,b){for(var c=ba(a,Mb),d=0;d<c.length;d++){var e=c[d];e.Af[2]=b;e.Na=!0}};a.wI=function(a,b){for(var c=ba(a,Mb),d=0;d<c.length;d++){var e=c[d];e.Af[3]=b;e.Na=!0}};a.get_fog_color_density=
function(a,b){var c=b||[],d=ba(a,Mb)[0].Kd;c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];return c};a.set_fog_color_density=function(a,b){for(var c=ba(a,Mb),d=0;d<c.length;d++){var e=c[d];e.Kd.set(b);e.Na=!0}};a.get_ssao_params=function(a){var b=ja(a,P.At),c=ja(a,P.Uy);a=ja(a,P.Hb);if(!b)return null;var d={};d.quality=b.on;d.use_hemisphere=b.tp;d.use_blur_depth=c.qp;d.blur_discard_value=c.rp;d.radius_increase=b.wp;d.influence=b.vp;d.dist_factor=b.sp;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};
a.get_dof_params=function(a){a=ja(a,P.fq);if(!a)return null;var b={};b.dof_on=a.H.dof_on;b.dof_distance=a.H.dof_distance;b.dof_front_start=a.H.dof_front_start;b.dof_front_end=a.H.dof_front_end;b.dof_rear_start=a.H.dof_rear_start;b.dof_rear_end=a.H.dof_rear_end;b.dof_power=a.H.dof_power;b.dof_bokeh=a.H.dof_bokeh;b.dof_bokeh_intensity=a.H.dof_bokeh_intensity;b.dof_object=a.H.dof_object;return b};a.set_dof_params=Ca;a.get_god_rays_params=function(a){var b=ba(a,[P.Hn]);a=ja(a,P.ut);if(!b||!a)return null;
var c={};c.god_rays_max_ray_length=b[0].Zk;c.god_rays_intensity=a.god_rays_intensity;c.god_rays_steps=Y.hd(b[0].Za[0].La[0].Aa,"STEPS_PER_PASS")[1];return c};a.set_god_rays_params=function(a,b){var c=ba(a,[P.Hn]),d=ba(a,[P.ut]);if(!c.length||!d.length)return Na.error("God Rays are not enabled on the scene"),0;if("number"==typeof b.god_rays_intensity)for(var e=0;e<d.length;e++)d[e].god_rays_intensity=b.god_rays_intensity;if("number"==typeof b.god_rays_max_ray_length)for(var f=b.god_rays_max_ray_length,
e=0;e<c.length;e++)c[e].Zk=f,c[e].ep=f/c[e].ul/(e+1),c[e].Na=!0;if("number"==typeof b.god_rays_steps)for(var g=oa.X(b.god_rays_steps,1),f=c[0].Zk,e=0;e<c.length;e++){c[e].ul=g;c[e].ep=f/g/(e+1);c[e].Na=!0;var h=c[e].Za[0].La[0],l=h.Aa;Y.xb(l,"STEPS_PER_PASS",g);Y.Ic(l);P.Rc(c[e],h)}for(e=0;e<d.length;e++)d.Na=!0};a.get_bloom_params=function(a){var b=ja(a,P.vt);a=ja(a,P.$p);if(!b||!a)return null;var c={};c.key=b.Un;c.edge_lum=b.Tn;c.blur=a.Rn;c.adaptive=b.Vl;c.average_luminance=b.average_luminance;
return c};a.set_bloom_params=la;a.get_glow_material_params=function(a){a=ja(a,P.gq);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};a.set_glow_material_params=V;a.get_wind_params=function(a){var b=ta(a);a=Da.length(b);if(0==a)return null;var b=Wa.rad_to_deg(Math.atan2(b[0],-b[1])),c={};c.wind_dir=b;c.wind_strength=a;return c};
a.AU=function(a){a.J.oB=!0};a.get_water_surface_level=sa;a.get_water_mat_params=function(a,b){var c=a.J.sd,d=ja(a,P.Hb);d&&c&&(b.waves_height=c.waves_height,b.waves_length=c.waves_length,b.water_fog_density=d.Yh[3],c=b.water_fog_color=[],c[0]=d.Yh[0],c[1]=d.Yh[1],c[2]=d.Yh[2])};a.set_water_params=function(a,b){var c=a.J.sd;if(!c)return Na.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof b.dst_noise_scale0&&(c.dst_noise_scale0=b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&
(c.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&(c.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(c.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(c.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(c.dir_freq=b.dir_freq);"number"==typeof b.dir_noise_scale&&(c.dir_noise_scale=b.dir_noise_scale);"number"==typeof b.dir_noise_freq&&(c.dir_noise_freq=b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&
(c.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&(c.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(c.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(c.jr=b.water_dynamic);for(var d=ba(a,Ec),e=0;e<d.length;e++){var f=d[e];"number"==typeof b.water_fog_density&&c.Kd&&(f.Yh[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&c.Kd&&f.Yh.set(b.water_fog_color);f.Na=!0}};a.get_shore_dist=function(a,b,c){var d=a.J.sd;if(!d.rl)return 100;var e=
d.bB;a=d.Wi;var f=(b[0]-d.kp[0])/d.lp[0],g=(d.kp[1]+b[1])/d.lp[1],f=f+.5,g=g+.5;if(!(1<f||0>f||1<g||0>g))return d=e*Wa.cG(ib.J.jC,d.kC,f,g),b=(a-b[2])*c,b=Math.sqrt(d*d+b*b)};a.update=function(a,c){for(var d=b().aj.A,e=0;e<ab.length;e++){var f=ab[e],g=f.J.wa,h=f.J;if(h.sd)var l=Za.get_trans_view(d.D),k=l[2]-sa(f,l[0],l[1]);for(l=0;l<h.Wp.length;l++){var m=h.Wp[l].J,n=m.hb,p=m.Gd;if(!(f.b4w_use_nla&&m.Il||!n&&!p)&&Ha.jK(m)){var r=Ha.gK(m),q=Ha.iK(m);n&&Ba.is_mobile_device&&(q-=5);var u=Ha.bX(m);r>=
u&&m.ik||r<q?(Ha.reset_video(m),p&&(m.ql=Ha.ix(m,a))):r>=u&&!m.ik?Ha.pause_video(m):Ha.kK(m)&&(n?Ha.NJ(m):(n=Ha.ix(m,a),n!=m.ql&&(Ha.MJ(m),m.Vj++),m.ql=n))}}Fa.ea(g,function(b,c){-1<Wc.indexOf(c.type)&&(c.time=a);h.sd&&(c.Gq=k)})}for(e=0;e<ab.length;e++)if(f=ab[e],h=f.J,g=h.wa,d=h.fn,d.length)for(h.Fw&&(ga(f),h.Fw=!1),h.oB&&(Ua(f),h.oB=!1),h.pB&&(ra(f),h.pB=!1),h.motion_blur&&Ia(g,c),f=ka.Lb(g,P.rh),l=0;l<d.length;l++)g=d[l],Qa.dn(g),f&&xa(g,f),Ja.uj(g);Ba.show_hud_debug_info&&M.sV(ab,c)};a.nU=function(a){a.J.pB=
!0};a.hA=function(a){var b=[];Fa.ea(a.J.wa,function(a,c){b.push(c)});return b};a.get_cam_water_depth=function(){var a=ja(ib,P.bd),b=ib;return a||b.J.sd?a.Gq:null};a.LJ=function(a){Fa.ea(a.J.wa,function(a,b){b.Na=!0})};a.LU=function(a,c){a.debug_view_mode=c;a.$b=c!=Ea.DV_NONE;a.rb=c==Ea.DV_TRANSPARENT_WIREFRAME;a.Na=!0;for(var d=b(),e=0;e<Ec.length;e++)for(var f=ba(d,[Ec[e]]),g=0;g<f.length;g++)f[g].hr=c==Ea.DV_RENDER_TIME};a.KU=function(a,b){a.debug_colors_seed=b;a.Na=!0};a.cV=function(a,b){a.Gu=
b;a.Na=!0};a.lV=function(a,b){for(var c=a.Za,d=0;d<c.length;d++)for(var e=c[d].La,f=0;f<e.length;f++){var g=e[f].Aa;Da.copy(b,g.wireframe_edge_color);g.yb.Qo=!0}};a.HJ=function(a,b){var c=b.ko,d=a.J.Zh;if(c&&"WIND"==c.type&&d){var e=Za.get_quat_view(b.A.D);Da.transformQuat(Wa.AXIS_Z,e,d);Da.normalize(d,d);Da.scale(d,c.hJ,d);c=ba(a,Wc);for(e=0;e<c.length;e++)c[e].Zh.set(d);return!0}return!1};a.FT=function(a,b,c){var d=ja(a,P.Le);if(d){var e=Hb.enabled&&(Hb.Ps===P.Le||Hb.Ps===P.ph);if(e)var f=X.Hq(b,
c,Fc,d.H);else{var g=X.get_canvas();Ka.JU(d.H,b,c,g.clientWidth,g.clientHeight)}Qa.dn(d);d.$b&&Ja.uj(d);(a=ja(a,P.ph))?(qa.copy(d.H.Ab,a.H.Ab),qa.copy(d.H.Qf,a.H.Qf),Wa.$z(a.H.Qf,a.H.Bm),Qa.dn(a),a.$b&&Ja.uj(a),b=a.H):b=d.H;if(d.$b||a&&a.$b)return e?(f[1]=b.height-f[1],Ja.bx(b.Ve,f[0],f[1],1,1,jc)):Ja.bx(a?a.H.Ve:d.H.Ve,0,0,1,1,jc)}else Na.error("Object Selection is not available on the scene");return null};a.set_outline_color=function(a){for(var c=b(),c=ba(c,[P.In]),d=0;d<c.length;d++){var e=c[d];
e.Nh.set(a);e.Na=!0}};a.sZ=ta;a.get_meta_tags=function(a){var b={title:"",description:""};a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};a.get_custom_prop=function(a){return a.b4w_custom_prop};a.GJ=function(a,b){var c=ac;Da.negate(b,c);for(var d=0;6>d;d++){var e=a.Ng[d],f=a.pm[d],g=a.H;qa.translate(Wa.CK[d],c,e);qa.multiply(g.Ab,e,g.Qf);Wa.$z(g.Qf,f)}};a.IJ=function(a,b,c){Wa.XV(b,c,Wa.AXIS_Z,a.H.xc)};a.dE=function(a,b,c){var d=a.J.Qh;if(d&&b)for(var e=0;e<b.length;e++){var f=
b[e],g=za.Da(f,a);if(-1!=f.A.Nd){var h=d.Mi,l=d.Vw,f=f.A.Nd;l.length&&f<l.length?g.Mi=l[f]:h.length&&f<h.length&&(g.Mi=h[f])}else-1!=f.A.ce&&(h=d.qj,l=d.Kz,f=f.A.ce,l.length?g.qj=l[f]:h.length&&(g.qj=h[f]))}if(c)for(b=za.yv(c,Ba.ssao&&a.b4w_enable_ssao),c=a.J.Yc,e=0;e<b.length;e++)if(g=za.Da(b[e],a),c)for(d=ba(a,[P.wd]),f=0;f<d.length;f++)e==d[f].zg&&g.iC.push(d[f])};a.marker_frame=function(a,b){return a.timeline_markers[b]};a.set_hmd_params=function(a){var c=b();if(c=ja(c,P.Hg))a.distortion_coefs&&
(c.sj[0]=a.distortion_coefs[0],c.sj[1]=a.distortion_coefs[1],c.Na=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.Na=!0),a.base_line_factor&&(c.sj[2]=a.base_line_factor,c.Na=!0),a.inter_lens_factor&&(c.sj[3]=a.inter_lens_factor,c.Na=!0),null!=a.enable_hmd_stereo&&
(c.enable_hmd_stereo=a.enable_hmd_stereo,c.Na=!0)};a.Cw=function(b,c){for(var d=ab,e=0;e<d.length;e++)ka.lT(a.tv(d[e]),b,c)};a.cW=function(a){for(var b=Pa.Sb(a,"LAMP",Pa.DATA_ID_ALL),c=ba(a,Yb),d=0;d<c.length;d++)for(var e=c[d],f=e.Za,g=0;g<f.length;g++)for(var h=f[g].La,l=0;l<h.length;l++){var k=h[l],m=k.Aa;"MAIN"==m.type&&(Y.gW(m,b,a),Y.Ic(m),P.Rc(e,k))}};a.dI=function(a){for(var b=0;b<ab.length;b++)Fa.ea(ab[b].J.wa,function(b,c){for(var d=c.Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){var h=
f[g];h.Aa==a&&P.Rc(c,h)}})}};b4w.module.__physics=function(a,t){function e(a,b){for(var c=a.te,d=0;d<c.length;d++)c[d].od.dt&&b.push(c[d]),e(c[d],b)}function c(a,b,c){for(var d=a.Ac.La,e=0;e<d.length;e++)for(var f=d[e].N,g=0;g<f.tf.length;g++){var h=f.tf[g];"ANY"!=h.Jb&&c!=h.Jb||k(h,a,b)}}function b(a,b,c){if(m.Vv(a))switch(b){case m.JK:var d=h(a);d.Ac.pK=!0;m.na(a,m.XL,Date.now()-performance.now(),ma.max_fps,ma.oz?aa.PF:0);break;case m.KK:U.ld("URANIUM:",c.slice(1));break;case m.FK:U.error(c);break;case m.GK:S.fbmsg.apply(this,
c.slice(1));break;case m.pD:if(a=f(c.ia)){var e=a;a=c.trans;d=c.quat;b=c.Fi;var l=c.ci,k=e.N;k.Cu=c.time;c=T.get_scale(e.A.D);T.set_sep(a,c,d,k.Mz);ha.copy(b,k.Fi);ha.copy(l,k.ci)}break;case m.nD:(a=f(c.sz))&&T.set_sep(c.trans,1,c.quat,a.R.os[c.KB]);break;case m.HK:if(d=f(c[1]))a=c[4],d=d.Rg.au[c[2]],ra.set_translation(d,c[3]),ra.set_rotation(d,a),ra.V(d);break;case m.NK:if(a=f(c[1]))a.R.speed=c[2];break;case m.lD:d=h(a);q(d,c.dm,c.em,c.result,null,null,0);break;case m.mD:d=h(a);q(d,c.dm,c.em,c.result,
c.jm,c.coll_norm,c.coll_dist);break;case m.DK:if(a=f(c[1]))a=a.N,a.im&&a.im(c[2]);break;case m.Oy:case m.oD:d=h(a);if(a=d.Ac.ml[c.id])d=f(c.Vn),b==m.Oy?(b=a.callback,b(a.id,c.hit_fract,d,c.hit_time)):(b=c.hit_fract,l=c.hit_time,k=c.hit_pos,e=a.callback,k?e(a.id,b,d,l,k,c.hit_norm):e(a.id,b,d,l));break;case m.MK:g(c.id);break;case m.LK:a=da.indexOf(a);U.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+
" ms");break;case m.IK:wa=c[1];break;case m.EK:a=da.indexOf(a);U.log("Worker: #"+String(a));U.log(c[1]);break;default:U.error("Wrong message: "+b)}}function h(a){for(var b=0;b<da.length;b++)if(da[b]==a)return W[b]}function f(a){return Ga[a]||null}function q(a,b,c,d,e,g,h){a=a.Ac.La;for(var k=0;k<a.length;k++)for(var m=a[k].N,n=0;n<m.tf.length;n++){for(var p=m.tf[n],r=p.jl,q=!1,u=0;u<r.length;u++){var v=r[u];if(v[0]===b&&v[1]===c){p.bs[u]=d;q=!0;break}}q&&(r=l(p),e&&p.kz!=b&&(q=e,u=g,v=h,q[0]+=u[0]*
v,q[1]+=u[1]*v,q[2]+=u[2]*v,u[0]*=-1,u[1]*=-1,u[2]*=-1),p.callback(r,r?p.kz==b?f(c):f(b):null,e,g,h))}}function l(a){a=a.bs;for(var b=!1,c=0;c<a.length;c++)b=b||a[c];return b}function x(){ba.body++;return ba.body}function y(a){var b=ua.indexOf(a);return-1==b?(ua.push(a),ua.length-1):b}function p(a,b){return{ia:a,type:b,bh:0,Yv:!1,sl:!0,Cf:!1,is_character:!1,mS:!1,su:null,Jb:"",Qq:0,HY:{},tf:[],im:null,Cu:0,Mz:new Float32Array([0,0,0,1,0,0,0,1]),Fi:new Float32Array(3),ci:new Float32Array(3),gu:new Float32Array(3),
Fq:new Float32Array(4),Xr:null}}function d(a,b){switch(a){case "BOX":var c=b.va;break;case "CYLINDER":c=b.xq;break;case "CONE":c=b.wq;break;case "SPHERE":c=b.tc;break;case "CAPSULE":c=b.vq}return c}function v(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);
"object"===typeof a.U&&(b.center=a.U);"number"===typeof a.ab&&(b.radius=a.ab);"number"===typeof a.height&&(b.height=a.height);return b}function r(a,b,c,d,e){var f=T.get_trans_view(a.A.D),g=T.invert(b.A.D,Ca),h=new Float32Array(3);T.transform_vec3(f,g,h);switch(b.R.type){case 10:b=b.Of;a=a.A.va;m.na(e,m.AL,c,h,b.SV,b.VB,(a.max_z-a.min_z)/2,d);break;case 20:m.na(e,m.zL,c,h,a.jz)}}function H(a){return a.N&&a.N.su}function E(a,b,c,d,e,f,g,h,l,k){var n;ba.uc++;n=ba.uc.toString(16);var p=b.N.ia;m.na(w(p),
m.HL,n,a,h,p,c,d,e.N.ia,f,g,l,k);b.N.su=n}function w(a){for(var b=0;b<W.length;b++)for(var c=W[b].Ac.La,d=0;d<c.length;d++)if(c[d].N.ia==a)return da[b];return null}function n(a){var b=a.N;if(b=b?0===b.bh?!0:!0===b.Yv?!0:!1===b.sl?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=T.Mb(a.A.D,ja),c=T.ub(a.A.D,ca),b=b[0]!=a.N.gu[0]||b[1]!=a.N.gu[1]||b[2]!=a.N.gu[2]||c[0]!=a.N.Fq[0]||c[1]!=a.N.Fq[1]||c[2]!=a.N.Fq[2]||c[3]!=a.N.Fq[3];if(b){var b=a.N,d=a.A,c=m.jG(m.hq);c.ia=b.ia;var e=T.Mb(d.D,
c.trans),d=T.ub(d.D,c.quat);ha.copy(e,b.gu);Q.copy(d,b.Fq);"DYNAMIC"==b.type&&Q.identity(c.quat);m.na(w(b.ia),m.hq)}a=a.te;for(b=0;b<a.length;b++)n(a[b])}function C(a,b,c,d,e){e=e||new Float32Array(3);a=T.get_quat_view(a.A.D);e[0]=b;e[1]=c;e[2]=d;ha.transformQuat(e,a,e)}function k(a,b,c){var d=a.jl,e=a.bs,f=a.kz,g=[],h=a.Jb;g||ia.K("At least one destination required");for(var l=0;l<b.Ac.La.length;l++){var k=b.Ac.La[l];if("ANY"==h||k.N.Jb==h&&"NAVMESH"!=k.N.type)k=k.N.ia,g&&-1==g.indexOf(k)&&g.push(k)}for(b=
0;b<g.length;b++)h=g[b],f<h&&!F(d,f,h)?(d.push([f,h]),e.push(!1)):f>h&&!F(d,h,f)&&(d.push([h,f]),e.push(!1));m.na(c,m.yL,f);m.na(c,m.GL,d,a.ji)}function F(a,b,c){for(var d=0;d<a.length;d++)if(a[d][0]==b&&a[d][1]==c)return!0;return!1}function u(a){a.N&&a.N.im&&(a=a.N,m.na(w(a.ia),m.TL,a.ia),a.im=null)}function g(a){var b=B(a),c=D(a).Ac;c.ml[a]&&(delete c.ml[a],c.OB.splice(c.OB.indexOf,1),m.na(b,m.bM,a))}function D(a){for(var b=0;b<W.length;b++){var c=W[b];if(c.Ac.ml[a])return c}return null}function B(a){for(var b=
0;b<W.length;b++)if(W[b].Ac.ml[a])return da[b];return null}function N(a,b,c){if(b.zp){a=a.N.ia;var d=b.jo*b.qr,e=b.Dq*b.Eq,f=-b.xp*b.yp*2*Math.PI/b.Os;b.Jr&&(f*=-1);switch(b.type){case 10:m.na(c,m.qM,a,d,e,f);break;case 20:m.na(c,m.pM,a,d,e,f)}}}function L(a){return a.Cf&&"CHASSIS"==a.Of.Hf}function A(a){return a.Cf&&"HULL"==a.Of.Hf}function G(a){return"NAVMESH"==a.od.fs}function z(a){return a.Mm&&"MAIN_BODY"==a.no.Hf}var I=t("__config"),S=t("__debug"),m=t("__ipc"),K=t("__obj_util"),U=t("__print"),
Q=t("__quat"),R=t("__scenes"),ga=t("__subscene"),ra=t("__transform"),T=t("__tsr"),ia=t("__util"),ha=t("__vec3"),pa=t("__version"),Z=t("__navmesh"),ma=I.N,aa=I.L,fa=I.be,wa=0,da=[],W=[],Ga={},O=[],ua=["ANY"],ba={body:0,uc:0,bI:0},ja=new Float32Array(3),ca=new Float32Array(4),Ca=T.create(),la=T.create();a.fS=function(a){a.Ac={pK:!1,La:[],ml:{},OB:[]};var c=ma.bt;fa.prevent_caching&&(c+="?v="+pa.get_build_version());U.log("%cLOAD PHYSICS","color: #0a0",ma.wn?"Using Separate Worker Thread,":"Using Same Thread,",
"Max FPS: "+ma.max_fps);U.log("%cPHYSICS PATH","color: #0a0",c);var d=m.IP(c,!ma.wn);m.iN(d,b);da.push(d);W.push(a);ma.ping&&setInterval(function(){m.na(d,m.ZL,performance.now())},1E3)};a.dO=function(a){return a.Ac?a.Ac.pK:!0};a.cleanup=function(){for(var a=0;a<da.length;a++)m.terminate(da[a]);da.length=0;W.length=0;Ga={};O.length=0;ua=["ANY"];for(var b in ba)ba[b]=0};a.append_object=function(a,b){if(b.Ac){var f;a:{for(var g=0;g<W.length;g++)if(W[g]==b){f=da[g];break a}f=void 0}var h=[];a.od.dt&&
e(a,h);var l=b.Ac.La;if(L(a)||A(a)||a.is_character||z(a)||a.Mp){var k=G(a),n;if(k){var q=x(),u=p(q,"NAVMESH"),w=K.Da(a,b).$;u.Xr=null;for(var D=0;D<w.length;D++){var B=w[D];if("PHYSICS"==B.type){u.Xr=Z.oT(B.ra);break}}n=u}else{var t=f,C=a.A,F=a.od,M=F.fs,ea=x();if("CAMERA"==a.type)var qa=F.SC?F.pu:"BOX",V=d(qa,C),R=.5,I=0;else if("EMPTY"==a.type)qa="EMPTY",V=null,I=R=0;else{var qa=F.SC?F.pu:"BOX",V=d(qa,C),sa=T.get_scale(C.D);if(1!=sa){var ga=V;switch(qa){case "BOX":ga.min_x*=sa;ga.max_x*=sa;ga.min_y*=
sa;ga.max_y*=sa;ga.min_z*=sa;ga.max_z*=sa;break;case "CYLINDER":case "CONE":case "CAPSULE":ga.height*=sa;ga.ab*=sa;break;case "SPHERE":ga.ab*=sa}}R=C.Tg;I=C.Pg}var S=T.get_trans_view(C.D),ba=T.get_quat_view(C.D),ra=F.Ui,ua=F.YJ,ja=F.bh,ka=F.cK,ic=F.bK,oa=F.tF,P=F.mI,Ha=a.Jb,Za=y(Ha),Wa=F.li,Da=F.ki,Xa=F.mi,Cb=C.tc.ab,Hb=v(V),Ba=a.tu,hb;var Xb=qa;if(h.length){var ha=[],aa={};aa.quat=new Float32Array([0,0,0,1]);aa.trans=new Float32Array(3);aa.worker_bounding=Hb;aa.bounding_type=Xb;ha.push(aa);var mb=
T.invert(C.D,Ca),pa=ca,fa=T.get_quat_view(C.D);Q.invert(fa,pa);for(var ma=0;ma<h.length;ma++){var Ta={},wa=h[ma],ab=wa.od.pu,Ib=new Float32Array(4),$b=new Float32Array(3),Fc=T.get_trans_view(wa.A.D),ac=T.get_quat_view(wa.A.D);T.transform_vec3(Fc,mb,$b);Q.multiply(pa,ac,Ib);Ta.trans=$b;Ta.quat=Ib;Ta.bounding_type=ab;Ta.worker_bounding=v(d(ab,wa.A));ha.push(Ta)}hb=ha}else hb=[];m.na(t,m.DL,ea,S,ba,M,ra,ua,ja,ka,ic,oa,P,Za,Wa,Da,Xa,qa,Hb,Cb,R,I,hb,Ba);Ga[ea]=a;O.push(a);var Nb=p(ea,"BOUNDING");Nb.type=
M;Nb.bh=ja;Nb.Yv=ra;Nb.Jb=Ha;Nb.Qq=Za;n=Nb}var sb=n;a.N=sb;var Va={Aa:null,N:sb};k||(l.push(Va),c(b,f,sb.Jb))}else for(var zb=K.Da(a,b).$,Jb=0;Jb<zb.length;Jb++){var Db=zb[Jb],kc;if(kc="PHYSICS"==Db.type){var wc;a:{for(var xc=b.Ac.La,yc=0;yc<xc.length;yc++){var jc=xc[yc].Aa;if(jc&&jc.id==Db.id){wc=!0;break a}}wc=!1}kc=!wc}if(kc)if(Db.Vd.Wa)if(Db.Sf&&b.J.sd){var lc=Db,Pd=b,Jd=f,rb=Pd.J.sd;m.na(Jd,m.ML,rb.Wi);if(lc.jX){var vb={};vb.dst_noise_scale0=lc.dst_noise_scale0;vb.dst_noise_scale1=lc.dst_noise_scale1;
vb.dst_noise_freq0=lc.dst_noise_freq0;vb.dst_noise_freq1=lc.dst_noise_freq1;vb.dir_min_shore_fac=lc.dir_min_shore_fac;vb.dir_freq=lc.dir_freq;vb.dir_noise_scale=lc.dir_noise_scale;vb.dir_noise_freq=lc.dir_noise_freq;vb.dir_min_noise_fac=lc.dir_min_noise_fac;vb.dst_min_fac=lc.dst_min_fac;vb.waves_hor_fac=lc.waves_hor_fac;var jb=rb.waves_height,Tb=rb.waves_length;rb.rl?m.na(Jd,m.BD,vb,rb.lp[0],rb.lp[1],rb.kp[0],rb.kp[1],rb.bB,jb,Tb,rb.kC,Pd.J.jC):m.na(Jd,m.BD,vb,0,0,0,0,0,jb,Tb,0,null)}}else{var pb;
if(Db.Ui){var bb=a,mc=Db,Ob=f,nc=x(),Nc=mc.Vd,Xc=Nc.la[0].a_position,id=Nc.za||null,jd=mc.Jb,cd=y(jd),Gc=mc.li,wb=mc.ki,zc=mc.mi,oc=T.get_trans_view(bb.A.D);m.na(Ob,m.JL,nc,Xc,id,oc,cd,Gc,wb,zc);var Hc=p(nc,"STATIC_MESH");Hc.Yv=!0;Hc.Jb=jd;Hc.Qq=cd;pb=Hc}else{var xb=a,Eb=Db,tb=f,nb=x(),Kb=Eb.Vd,kd=Kb.la[0].a_position,Oc=Kb.za||null,fb=T.get_trans_view(xb.A.D),Pc=Eb.Tg,bc=Eb.Pg,Ic=Eb.Jb,cc=y(Ic);m.na(tb,m.LL,nb,kd,Oc,fb,Pc,bc,cc,Eb.li,Eb.ki,Eb.mi);var Yc=p(nb,"STATIC_MESH");Yc.Jb=Ic;Yc.Qq=cc;pb=Yc}sb=
pb;a.N=sb;Va={Aa:Db,N:sb};l.push(Va);c(b,f,sb.Jb)}else U.error("Object "+a.name+" has collision material with no assigned vertices")}if(L(a)||A(a)){var Ub=f,Pb=a.N.ia;L(a)?(a.R.type=10,m.na(Ub,m.EL,Pb,a.R.vC,a.R.xC,a.R.wC,a.R.aD,a.R.cB)):A(a)&&(a.R.type=20,m.na(Ub,m.CL,Pb,a.R.vm,a.R.An,a.R.Bn));if(a.R.en){var yb=a.R.en;switch(a.R.type){case 10:r(yb[0],a,Pb,!0,Ub);r(yb[1],a,Pb,!0,Ub);r(yb[2],a,Pb,!1,Ub);r(yb[3],a,Pb,!1,Ub);break;case 20:for(var Ac=0;Ac<yb.length;Ac++)r(yb[Ac],a,Pb,!1,Ub)}}N(a,a.R,
f)}else if(a.is_character){var kb=f,Jc=a.A,pc=a.N,Qc=Jc.va.max_z-Jc.va.min_z,Fb=pc.ia,Lb=a.GE,Bc=Lb.hX,qc=Lb.xU,qb=Lb.LV,Qb=Lb.wS,ub=Lb.kX,Ab=ia.VP(a);m.na(kb,m.FL,Fb,Ab,Qc,Bc,qc,qb,Qb,ub);pc.is_character=!0}else if(z(a)){var Sa=f,rc=a.N.ia;m.na(Sa,m.IL,rc,a.Rg.vm,a.Rg.An,a.Rg.Bn);if(a.Rg.au)for(var Rb=a.Rg.au,dc=0;dc<Rb.length;dc++){var cb=Rb[dc],Vb=T.get_trans_view(cb.A.D),Cc=T.invert(a.A.D,Ca),gb=new Float32Array(3);T.transform_vec3(Vb,Cc,gb);m.na(Sa,m.BL,rc,gb,cb.jz)}a.N.mS=!0}for(Jb=0;Jb<O.length;Jb++){var Rc=
O[Jb];if(Rc.N){var Kc=Rc;if(!H(Kc))for(var sc=0;sc<Kc.GB.length;sc++){var Sb=Kc.GB[sc],Sc=Sb.target,dd=Sb.GT;if(Sc.N){var ed=new Float32Array([Sb.HT,Sb.IT,Sb.JT]),Gb=ia.euler_to_quat(new Float32Array([Sb.Sa,Sb.Ta,Sb.Ua]),new Float32Array(4));"HINGE"==dd&&Q.rotateY(Gb,Math.PI/2,Gb);var Dc=T.identity(Ca),Dc=T.set_trans(ed,Dc),Dc=T.set_quat(Gb,Dc),yd=T.multiply(Kc.A.D,Dc,Ca),ec=T.invert(Sc.A.D,la),db=T.multiply(ec,yd,ec),fc=T.get_trans_view(db),Wb=T.get_quat_view(db),eb=Sb,lb={};lb.use_limit_x=eb.VW;
lb.use_limit_y=eb.WW;lb.use_limit_z=eb.XW;lb.use_angular_limit_x=eb.RW;lb.use_angular_limit_y=eb.SW;lb.use_angular_limit_z=eb.TW;lb.limit_max_x=eb.IS;lb.limit_min_x=eb.LS;lb.limit_max_y=eb.JS;lb.limit_min_y=eb.MS;lb.limit_max_z=eb.KS;lb.limit_min_z=eb.NS;lb.limit_angle_max_x=eb.CS;lb.limit_angle_min_x=eb.FS;lb.limit_angle_max_y=eb.DS;lb.limit_angle_min_y=eb.GS;lb.limit_angle_max_z=eb.ES;lb.limit_angle_min_z=eb.HS;E(dd,Kc,ed,Gb,Sc,fc,Wb,lb,null,null)}}}}}};a.xQ=f;a.update=function(a,b){for(var c=0;c<
da.length;c++){var d=da[c],e=a;d&&m.QG(d)&&m.na(d,m.rM,e,b);for(var f=0;f<O.length;f++){var g=O[f],h=g.N;if(h.sl&&h.Cu){var l=m.QG(d)?e-h.Cu:performance.now()/1E3-h.Cu,l=Math.min(l,10/ma.max_fps),l=l-1/ma.max_fps;aa.pT&&(l=0);var k=Ca;T.iS(h.Mz,l,h.Fi,h.ci,Ca);ra.set_tsr(g,k);ra.V(g);n(g);if(g.R)for(var h=g,l=h.R.en,k=h.A.D,p=Ca,r=0;r<l.length;r++){var q=l[r];T.multiply(k,h.R.os[r],p);ra.set_tsr(q,p);ra.V(q)}g.R&&g.R.zp&&(p=g,l=p.R,h=l.zp)&&(r=p.R.eJ,T.multiply(p.A.D,p.R.fJ,h.A.D),k=ja,T.transform_dir_vec3(r,
p.A.D,k),p=ca,Q.setAxisAngle(k,-l.xp*l.yp*2*Math.PI,p),l=T.get_quat_view(h.A.D),Q.multiply(p,l,l),ra.V(h));g.R&&g.R.nC&&(p=g,l=p.R,h=l.nC)&&(r=p.R.$I,T.multiply(p.A.D,p.R.aJ,h.A.D),k=ja,T.transform_dir_vec3(r,p.A.D,k),p=ca,r=Math.abs(l.speed)*l.Ms,r>l.Lo&&(r=l.Lo),Q.setAxisAngle(k,-r,p),l=T.get_quat_view(h.A.D),Q.multiply(p,l,l),Q.normalize(l,l),ra.V(h));g.R&&g.R.yC&&(k=g,h=k.R,g=h.yC)&&(p=k.R.oJ,T.multiply(k.A.D,k.R.pJ,g.A.D),l=ja,T.transform_dir_vec3(p,k.A.D,l),k=ca,Q.setAxisAngle(l,-Math.abs(h.jo)*
h.er,k),h=T.get_quat_view(g.A.D),Q.multiply(k,h,h),Q.normalize(h,h),ra.V(g))}}m.OT(d);d=W[c];(e=d.J.sd)&&0<e.waves_height&&(d=R.Tb(d,ga.Hb),e=ha.length(d.Zh)||1,m.na(da[c],m.oM,d.time*e))}};a.VQ=function(){return W[0]};a.pause=function(){for(var a=0;a<da.length;a++)m.na(da[a],m.YL)};a.resume=function(){for(var a=0;a<da.length;a++)m.na(da[a],m.cM)};a.enable_simulation=function(a){(a=a.N)||ia.K("No object physics");if(!a.sl){var b=a.ia,c=w(b);a.sl=!0;m.na(c,m.WL,b)}};a.disable_simulation=function(a){(a=
a.N)||ia.K("No object physics");if(a.sl){var b=a.ia,c=w(b);a.sl=!1;m.na(c,m.VL,b)}};a.gx=function(a){return!!a.Ac};a.sa=function(a){return!!a.N};a.has_dynamic_physics=function(a){return(a=a.N)&&a.sl&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.bh&&0==a.Yv?!0:!1};a.has_simulated_physics=function(a){return(a=a.N)&&a.sl?!0:!1};a.set_gravity=function(a,b,c,d){a=a.N.ia;m.na(w(a),m.nM,a,b,c,d)};a.PR=H;a.apply_constraint=E;a.clear_constraint=function(a){a=a.N;m.na(w(a.ia),m.aM,a.su);a.su=null};a.pull_to_constraint_pivot=
function(b,c,d,e,f,g){c=T.set_sep(c,1,d,Ca);f=T.set_sep(f,1,g,la);T.invert(c,c);T.multiply(f,c,c);ra.get_tsr(e,f);T.multiply(f,c,c);ra.set_tsr(b,c);ra.V(b);e=T.get_trans_view(b.A.D);f=T.get_quat_view(b.A.D);a.set_transform(b,e,f)};a.set_transform=function(a,b,c){var d=a.N,e=m.jG(m.hq),f=T.Mb(a.A.D,e.trans);a=T.ub(a.A.D,e.quat);T.set_sep(f,1,a,d.Mz);e.ia=d.ia;ha.copy(b,e.trans);Q.copy(c,e.quat);m.na(w(d.ia),m.hq)};a.sync_transform=n;a.apply_velocity=function(a,b,c,d){var e=ja;C(a,b,c,d,e);a=a.N.ia;
b=Math.abs(0);c=Math.abs(0);d=Math.abs(0);var f=Math.abs(e[0]),g=Math.abs(e[1]),h=Math.abs(e[2]);e[0]=f?e[0]/f*Math.max(f,b):0;e[1]=g?e[1]/g*Math.max(g,c):0;e[2]=h?e[2]/h*Math.max(h,d):0;m.na(w(a),m.DD,a,e[0],e[1],e[2])};a.apply_velocity_world=function(a,b,c,d){a=a.N.ia;m.na(w(a),m.DD,a,b,c,d)};a.apply_force=function(a,b,c,d,e){var f=ja;e?(f[0]=b,f[1]=c,f[2]=d):C(a,b,c,d,f);a=a.N.ia;m.na(w(a),m.NL,a,f[0],f[1],f[2])};a.apply_torque=function(a,b,c,d){var e=ja;C(a,b,c,d,e);a=a.N.ia;m.na(w(a),m.PL,a,
e[0],e[1],e[2])};a.set_angular_velocity=function(a,b,c,d){a=a.N.ia;m.na(w(a),m.dM,a,b,c,d)};a.set_character_move_dir=function(a,b,c){a=a.N.ia;m.na(w(a),m.gM,a,b,c)};a.set_character_move_type=function(a,b){var c=a.N.ia;m.na(w(c),m.hM,c,b)};a.set_character_walk_velocity=function(a,b){var c=a.N.ia;m.na(w(c),m.mM,c,b)};a.set_character_run_velocity=function(a,b){var c=a.N.ia;m.na(w(c),m.jM,c,b)};a.set_character_fly_velocity=function(a,b){var c=a.N.ia;m.na(w(c),m.eM,c,b)};a.character_jump=function(a){a=
a.N.ia;m.na(w(a),m.RL,a)};a.character_rotation_inc=function(a,b,c){a=a.N.ia;m.na(w(a),m.SL,a,b,c)};a.set_character_rotation=function(a,b,c){a=a.N.ia;m.na(w(a),m.iM,a,b,c)};a.set_character_rotation_h=function(a,b){var c=a.N.ia;m.na(w(c),m.fM,c,b)};a.set_character_rotation_v=function(a,b){var c=a.N.ia;m.na(w(c),m.lM,c,b)};a.set_character_vert_move_dir_angle=function(a,b){var c=a.N.ia;m.na(w(c),m.kM,c,b)};a.append_collision_test=function(a,b,c,d){var e=a.N;if(!e.Xr){for(var f=e.ia,g=0;g<e.tf.length;g++)if(a=
e.tf[g],a.Jb==b&&a.callback==c)return;a={kz:f,ji:d||!1,Jb:b,callback:c,jl:[],bs:[]};e.tf.push(a);b=w(f);k(a,h(b),b)}};a.remove_collision_test=function(a,b,c){a=a.N;for(var d=w(a.ia),e=h(d),f=0;f<a.tf.length;f++){var g=a.tf[f];if(g.Jb==b&&g.callback==c){if(l(g)){var k=ha.set(0,0,0,ja);g.callback(!1,null,k,k,0)}a.tf.splice(f,1);f--;for(var k=d,g=g.jl,n=e.Ac.La,p=0;p<n.length;p++)for(var r=n[p].N,q=0;q<r.tf.length;q++)for(var u=r.tf[q],v=0;v<u.jl.length;v++)for(var y=u.jl[v],x=0;x<g.length;x++){var M=
g[x];y[0]==M[0]&&y[1]==M[1]&&(g.splice(x,1),x--)}g.length&&m.na(k,m.CD,g)}}};a.apply_collision_impulse_test=function(a,b){a.N&&a.N.im&&u(a);var c=a.N;m.na(w(c.ia),m.OL,c.ia);c.im=b};a.clear_collision_impulse_test=u;a.append_ray_test=function(a,b,c,d,e,f,g,l,k){var n;ba.bI++;n=ba.bI;a={id:n,ia:a?a.N.ia:0,from:new Float32Array(b),to:new Float32Array(c),Jb:d,Qq:y(d),hE:f,DN:g,ji:l,Rv:k,callback:e};b=w(a.ia)||da[0];c=h(b).Ac;c.ml[n]=a;c.OB.push(a);m.na(b,m.KL,a.id,a.ia,a.from,a.to,a.Qq,a.hE,a.DN,a.ji,
a.Rv);return n};a.remove_ray_test=g;a.change_ray_test_from_to=function(a,b,c){var d=B(a),e=D(a).Ac.ml[a];e&&!e.hE&&(e.from.set(b),e.to.set(c),m.na(d,m.QL,a,b,c))};a.SG=function(a){return D(a).Ac.ml[a]?!0:!1};a.vehicle_throttle=function(a,b){var c=a.R;c.jo=b;N(a,c,w(a.N.ia))};a.vehicle_steer=function(a,b){var c=a.R;c.xp=b;N(a,c,w(a.N.ia))};a.vehicle_brake=function(a,b){var c=a.R;c.Dq=b;N(a,c,w(a.N.ia))};a.is_vehicle_chassis=L;a.is_vehicle_hull=A;a.MZ=G;a.lS=function(a){if(!a.Cf)return!1;a=a.Of.Hf;
return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};a.kS=function(a){return a.Cf?"BOB"==a.Of.Hf?!0:!1:!1};a.nS=function(a){return a.Mm?"BOB"==a.no.Hf?!0:!1:!1};a.UG=function(a){return a.Cf&&"STEERING_WHEEL"==a.Of.Hf?!0:!1};a.TG=function(a){return a.Cf&&"SPEEDOMETER"==a.Of.Hf?!0:!1};a.VG=function(a){return a.Cf&&"TACHOMETER"==a.Of.Hf?!0:!1};a.get_vehicle_speed=function(a){return a.R.speed};a.mX=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;
case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.uG=function(a){return a.N&&a.N.is_character};a.LZ=z;a.rR=function(){return wa};a.QP=function(){for(var a=0;a<da.length;a++)m.na(da[a],m.UL)};a.remove_object=function(a){var b=a.N.ia;if("BOUNDING"==a.N.type){var c=O.indexOf(a);-1==c&&U.error("Object "+a.name+" doesn't have bounding physics");delete Ga[b];O.splice(c,1)}for(var c=w(b),d=h(c),e=d.Ac.La,f=[],g=0;g<e.length;g++)for(var k=e[g].N,n=0;n<k.tf.length;n++)for(var p=
k.tf[n],r=0;r<p.jl.length;r++){var q=p.jl[r],v=p.bs[r];if(q[0]==b||q[1]==b)p.jl.splice(r,1),p.bs.splice(r,1),r--,v&&!l(p)&&(v=ha.set(0,0,0,ja),p.callback(!1,null,v,v,0)),f.push(q)}f.length&&m.na(c,m.CD,f);a.N&&a.N.im&&u(a);a=d.Ac.La;for(d=0;d<a.length;d++)a[d].N.ia==b&&(a.splice(d,1),d--);m.na(c,m.$L,b)};a.RR=function(a){var b=a.od;return a.Cf||a.Mm||a.is_character||a.Mp&&!b.Ui&&0<b.bh&&("DYNAMIC"==b.fs||"RIGID_BODY"==b.fs)}};b4w.module.__data=function(a,t){function e(a,b){Ba[b.id]=null;hb[b.id]=null}function c(a,b,c,d){a instanceof ArrayBuffer?(a=Ua.rG(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);Aa.log("%cLOAD IMAGE "+d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(Xb)&&c&&Aa.warn("image",b,"is not from app root.")}function b(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,k,m){if(d){Aa.log("%cLOAD METADATA","color: #616",m);f=P.gJ(d.b4w_format_version);switch(P.dK(f,Da.Um)){case -1:f[0]<
Da.Um[0]?P.K("JSON version is too old relative to B4W engine: "+P.Kl(f)+", required: "+P.Kl(Da.Um)+". Reexport scene with the latest B4W addon to fix it."):Aa.warn("JSON version is a bit old relative to B4W engine: "+P.Kl(f)+", required: "+P.Kl(Da.Um)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:f[0]>Da.Um[0]?P.K("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):Aa.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}Da.WA=
f;for(var n in d)a[n]=d[n];b.Nb&&($a=Oa.bv(a.scenes));(d=a.binaries[0].binfile)?b.qE=d:(Y.ux(b,"load_binaries"),Y.ux(b,"prepare_bindata"));Da.is_mobile_device||Y.ux(b,"mobile_media_start");Da.antialiasing&&Da.smaa||Y.ux(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)n=a.b4w_export_errors[d],(b.Nb&&"PRIMARY"==n.type||"ALL"==n.type)&&Aa.mQ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=
0;d<a.b4w_export_warnings.length;d++)n=a.b4w_export_warnings[d],(b.Nb&&"PRIMARY"==n.type||"ALL"==n.type)&&Aa.nQ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.og&&C(a);e(b,c)}else k==V.AT_JSON_ZIP?(Aa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",l),V.enqueue([{id:l,type:V.AT_JSON,url:l,ye:b.og}],h,null,g)):Y.TD(b)}var l=b.wi;l||P.K("Nothing requested");if(Da.assets_gzip_available){d=l+".gz";var k=V.AT_JSON_ZIP}else d=
l,k=V.AT_JSON;V.enqueue([{id:d,type:k,url:d,ye:b.og}],h,null,g)}function h(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,k,m){d?(Aa.log("%cLOAD BINARY","color: #616",m),a.bin_data=d,f=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[f,d],f=P.gJ(a.b4w_format_version),d[0]!=f[0]&&P.K("BIN version does not match to JSON version: "+P.Kl(d)+", required: "+P.Kl(Da.Um)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=f[1]&&Aa.warn("BIN version does not match to JSON version: "+
+P.Kl(d)+", required: "+P.Kl(Da.Um)+". Some compatibility issues can occur. Reexport scene to fix it."),e(b,c)):k==V.AT_ARRAYBUFFER_ZIP?(Aa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",l),V.enqueue([{id:l,type:V.AT_ARRAYBUFFER,url:l,ye:b.og}],h,null,g)):Y.TD(b)}var l=ba(b.wi)+b.qE;l||P.K("Binary data is missing");if(Da.assets_gzip_available){d=l+".gz";var k=V.AT_ARRAYBUFFER_ZIP}else d=l,k=V.AT_ARRAYBUFFER;V.enqueue([{id:d,type:k,url:d,ye:b.og}],h,null,g)}function f(a,
b,c,d,e){Ma.LE()&&e(b,c)}function q(a,b,c,d,e){d=a.bin_data;var f=a.binaries[0],g=a.objects,h=a.meshes;a=a.actions;for(var k=P.YN(),m=["indices"],n=["position","texcoord","texcoord2","shade_tangs"],M=["normal","tangent"],p=["group"],r=["color"],q=0;q<h.length;q++)for(var u=h[q].submeshes,v=0;v<u.length;v++){for(var ea in u[v]){var w=u[v][ea][1];if(-1!=m.indexOf(ea)){var y=u[v][ea][0]*P.kD+f["int"]+12,x=u[v],D=ea,A=d;if(k)var B=new Uint32Array(A,y,w);else for(var B=new Uint32Array(w),A=new DataView(A),
z=0;z<w;z++)B[z]=A.getUint32(y+z*P.kD,!0);x[D]=B}else if(-1!=n.indexOf(ea))y=u[v][ea][0]*P.Yi+f["float"]+12,u[v][ea]=l(d,y,w,k);else if(-1!=M.indexOf(ea)){y=u[v][ea][0]*P.jq+f["short"]+12;x=u[v];D=ea;A=d;B=new Float32Array(w);A=new DataView(A);for(z=0;z<w;z++)B[z]=A.getInt16(y+z*P.jq,!0)/32767;x[D]=B}else if(-1!=p.indexOf(ea)){y=u[v][ea][0]*P.jq+f.ushort+12;x=u[v];D=ea;A=d;B=new Float32Array(w);A=new DataView(A);for(z=0;z<w;z++)B[z]=A.getUint16(y+z*P.jq,!0)/65535;x[D]=B}else if(-1!=r.indexOf(ea)){y=
u[v][ea][0]*P.Fy+f.uchar+12;x=u[v];D=ea;A=d;B=new Float32Array(w);A=new DataView(A);for(z=0;z<w;z++)B[z]=A.getUint8(y+z*P.Fy)/255;x[D]=B}}w=u[v];if(h[q].b4w_shape_keys.length)for(y=w.base_length,x=w.normal.length/y/3,w.tbn=Ra.Am(w.normal.subarray(0,3*y),w.tangent.subarray(0,4*y),Ra.create(w.normal.length/3)),D=1;D<x;D++)for(A=D*y,B=0;B<y;B++){var t=w.normal.subarray(3*B,3*(B+1)),qa=Ha.add(w.normal.subarray(3*(A+B),3*(A+B+1)),t,mb),z=Ra.identity(Ec);if(w.tangent.length){var C=w.tangent.subarray(4*
B,4*(B+1)),F=Za.add(w.tangent.subarray(4*(A+B),4*(A+B+1)),C,Mb),t=Ra.Am(t,C),qa=Ra.Am(qa,F);Ra.mT(qa,t,z)}else qa=Pa.rotationTo(t,qa,Wc),Ra.set_quat(z,qa,0);Ra.Pi(w.tbn,z,A+B)}else w.tbn=Ra.Am(w.normal,w.tangent);delete u[v].normal;delete u[v].tangent;"texcoord2"in u[v]&&(w=new Float32Array(u[v].texcoord.length+u[v].texcoord2.length),w.set(u[v].texcoord),w.set(u[v].texcoord2,u[v].texcoord.length),u[v].texcoord=w,delete u[v].texcoord2)}for(ea=0;ea<g.length;ea++)for(h=g[ea].particle_systems,m=0;m<h.length;m++)n=
h[m],n.transforms=l(d,n.transforms[0]*P.Yi+f["float"]+12,n.transforms[1],k);for(g=0;g<a.length;g++){ea=a[g];h=ea.fcurves;m=ea.frame_range;M=m[0];p=m[1];r=la.ZQ(M,p);m=null;0>r&&(r=0);var u=q=!1,E;for(E in h)q|=-1<E.indexOf("rotation_euler"),u|=-1<E.indexOf("rotation_quaternion");n=[];for(E in h)if(q&&u&&-1<E.indexOf("rotation_euler"))delete h[E];else{var v=h[E],H;for(H in v)w=v[H],y=l(d,f["float"]+w.bin_data_pos[0]*P.Yi+12,w.bin_data_pos[1],k),x=new Float32Array(r),m||(m=new Int8Array(r)),la.bN(w,
y,x,m,M,p),w.Zf=x;-1<E.indexOf("rotation_euler")&&(la.uQ(h[E]),n.push(E))}for(M=0;M<n.length;M++)p=n[M],r=p.replace("euler","quaternion"),h[r]=h[p],delete h[p];ea.yM=m}e(b,c)}function l(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)d[e]=a.getFloat32(b+e*P.Yi,!0)}return d}function x(a,b,c,e,f){var g=a.cameras,h=a.groups,l=a.materials,k=a.meshes,m=a.node_groups,n=a.objects,q=a.particles,u=a.scenes,v=a.speakers,ea=a.lamps,w=a.textures,y=a.worlds;
m||(Aa.warn('"node_groups" datablock undefined. reexport main scene.'),m=a.node_groups=[]);for(var x="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),A={},z=0;z<x.length;z++)for(var t=a[x[z]],F=0;F<t.length;F++){var E=t[F];A[E.uuid]=E}for(var G=0;G<u.length;G++){for(var va=u[G],ic=va.objects,R=0;R<ic.length;R++)N(ic,R,A);va.camera&&N(va,"camera",A);va.world&&N(va,"world",A)}for(G=0;G<h.length;G++)for(var X=
h[G].objects,R=0;R<X.length;R++)N(X,R,A);for(G=0;G<n.length;G++){var L=n[G];L.dupli_group&&N(L,"dupli_group",A);L.parent&&N(L,"parent",A);L.dg_parent&&N(L,"dg_parent",A);var W=L.animation_data;W&&D(W,A);switch(L.type){case "MESH":L.data||P.K("mesh not found for object "+L.name);N(L,"data",A);for(var K=!1,O=L.modifiers,R=0;R<O.length;R++){var Ka=O[R];"ARMATURE"==Ka.type?(K&&Aa.warn('Object "'+L.name+'" has more than one armature modifiers. Only the first one will be used.'),K=!0,N(Ka,"object",A)):
"CURVE"==Ka.type&&N(Ka,"object",A)}var I=L.particle_systems;if(I)for(R=0;R<I.length;R++)N(I[R],"settings",A);break;case "ARMATURE":N(L,"data",A);for(var V=L.pose.bones,Q=L.data.bones,R=0;R<V.length;R++){var ga=V[R];ga.bone=Q[ga.bone];var oa=ga.constraints;if(oa)for(var J=0;J<oa.length;J++){var Pa=oa[J];Pa.target&&N(Pa,"target",A)}for(var S=ga.parent_recursive,J=0;J<S.length;J++)S[J]=V[S[J]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":N(L,"data",A)}if(oa=L.constraints)for(R=0;R<oa.length;R++)Pa=
oa[R],Pa.target&&N(Pa,"target",A);var sa=L.lod_levels;if(sa)for(R=0;R<sa.length;R++){var U=sa[R];U.object&&N(U,"object",A)}}for(G=0;G<k.length;G++)for(var Ga=k[G].materials,R=0;R<Ga.length;R++)N(Ga,R,A);for(G=0;G<l.length;G++){for(var Ha=l[G],Da=Ha.texture_slots,R=0;R<Da.length;R++)N(Da[R],"texture",A);var Ba=Ha.node_tree;Ba&&B(Ba,A)}for(G=0;G<m.length;G++)(Ba=m[G].node_tree)&&B(Ba,A);for(G=0;G<w.length;G++){var Hb=w[G],ua=Hb.type;"IMAGE"!=ua&&"ENVIRONMENT_MAP"!=ua||N(Hb,"image",A)}for(G=0;G<g.length;G++){var Za=
g[G];Za.dof_object&&N(Za,"dof_object",A)}for(G=0;G<v.length;G++){var za=v[G];za.sound&&N(za,"sound",A);(W=za.animation_data)&&D(W,A)}for(G=0;G<q.length;G++){for(var da=q[G],Da=da.texture_slots,R=0;R<Da.length;R++)N(Da[R],"texture",A);da.dupli_group&&N(da,"dupli_group",A);da.dupli_object&&N(da,"dupli_object",A)}for(G=0;G<ea.length;G++)(W=ea[G].animation_data)&&D(W,A);for(G=0;G<y.length;G++){var Va=y[G];if(Da=Va.texture_slots)for(R=0;R<Da.length;R++)N(Da[R],"texture",A);(W=Va.animation_data)&&D(W,A);
(Ba=Va.node_tree)&&B(Ba,A)}Ya.UN(a);C(a);for(var Ea=ba(b.wi),Xb=a.textures,Fa=b.Nb?a.scenes[0].b4w_anisotropic_filtering:$a.b4w_anisotropic_filtering,ca=0;ca<Xb.length;ca++){var ja=Xb[ca];b.Nb||"SCENE"!=ja.b4w_source_type||(ja.b4w_source_id="");var Wa=Ja.GP(ja,Fa,a.scenes,b.id,Ea);ja.J=Wa}for(var Xa={},ha=a.objects,Ma=0;Ma<ha.length;Ma++){var zb=ha[Ma];if("MESH"===zb.type&&!zb.particle_systems.length)for(var ia=zb.data,Z=ia.name,Y=ia.submeshes,aa=ia.materials,xa=0;xa<Y.length;xa++)0!==Y[xa].base_length||
Xa[Z]||(aa[xa]&&Aa.warn('material "'+aa[xa].name+'" is not assigned to any face (object "'+zb.name+'").'),Xa[Z]=!0)}var Db=[];a.materials=[];for(var mb=a.meshes,kc=0;kc<mb.length;kc++){var Jb=mb[kc];if(0==Jb.materials.length){var pa=ya.KO();Jb.materials.push(pa);-1==Db.indexOf(pa.Jc)&&(Db.push(pa.Jc),a.materials.push(pa))}else for(var ma=0;ma<Jb.materials.length;ma++){var fa=Jb.materials[ma],Na=ya.eS();ya.wW(fa,Na);Jb.materials[ma]=Na;-1==Db.indexOf(Na.Jc)&&(Db.push(Na.Jc),a.materials.push(Na))}}for(var Ca=
a.actions,Mb=b.id,Yb=0;Yb<Ca.length;Yb++){var na=Ca[Yb];na.zM=Mb;la.IM(na)}for(var Ra={lH:[],nw:[]},La=a.scenes,ta=0;ta<La.length;ta++)for(var Ua=La[ta],wa=La[ta].objects,Ta=0;Ta<wa.length;Ta++)ra(Ua,wa,wa[Ta],null,Ra);for(ta=0;ta<Ra.nw.length;ta++)for(var Ia=Ra.nw[ta],Ta=0;Ta<Ia.Jw.length;Ta++){var Wc=Ia.Jw[Ta],ib=Ia.DH[Ta],ab=Ia.$B[Ta],Ib=Ia.vB[Ta];Ia.kH[Ta].object=ib;for(var Ec=0;Ec<Ib.length;Ec++)P.YM(Ib[Ec],ib);for(var sb=Wc,Nb=ab,$b=0;$b<Nb.length;$b++){for(var ac=Nb[$b].objects,Zb=0;Zb<ac.length;Zb++){var ad=
ac[Zb].dupli_group;ad&&T(sb,ad)}var zd=ac.indexOf(sb);-1<zd&&ac.splice(zd,1)}}!b.Nb&&1<a.scenes.length&&(a.scenes=[Oa.bv(a.scenes)],Aa.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var Rd=b.Nb?$a:Oa.bv(a.scenes);ka.RU($a.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf($a),1),a.scenes.unshift($a));for(var Ad=0;Ad<a.scenes.length;Ad++){var tc=a.scenes[Ad];tc.J={};tc.RD=tc==Rd;tc.AM=b.Nb;var Bd;if(Bd=Cb.enabled){var Sd;if(Sd="OFF"!=tc.b4w_enable_physics){var md;
if(!(md="AUTO"!=tc.b4w_enable_physics))a:{for(var td=d(tc),ud=0;ud<td.length;ud++){if(td[ud].b4w_collision){md=!0;break a}var Cd=td[ud].data;if(Cd.materials)for(var nd=0;nd<Cd.materials.length;nd++)if(Cd.materials[nd].od.Kp){md=!0;break a}}md=!1}Sd=md}Bd=Sd}Bd&&(b.Nb||!qa.gx($a)&&tc==Oa.bv(a))&&qa.fS(tc)}for(var Dd=0;Dd<a.scenes.length;Dd++){var od=a.scenes[Dd];if(od.b4w_use_logic_editor){var Td=d(od);Ya.fN(Td,od)}}for(var uc=0;uc<a.scenes.length;uc++){for(var vd=a.scenes[uc],Ed=d(vd),vc=0;vc<Ed.length;vc++){var ob=
Ed[vc];M.VN(ob,vd,a)&&(ob.Id||(ob.Id=[]),ob.Id.push(b.Nb?vd:$a))}for(var Xd=Ed,Md=0;Md<Xd.length;Md++){var wd=Xd[Md];if(wd.Id&&"WORLD"!=wd.type)for(var Fd=wd.particle_systems,Tc=0;Tc<Fd.length;Tc++){var Lc=Fd[Tc].settings;if("HAIR"==Lc.type)if("OBJECT"==Lc.render_type){var Uc=Lc.dupli_object;Uc.Id||(Uc.Id=wd.Id.slice())}else if("GROUP"==Lc.render_type)for(var gd=Lc.dupli_group,pd=0;pd<gd.objects.length;pd++)Uc=gd.objects[pd],Uc.Id||(Uc.Id=wd.Id.slice())}}}for(var qd=a.scenes,Mc=[],Bb=0;Bb<qd.length;Bb++)r(qd[Bb].objects,
0,b.Nb,Mc);hb[b.id]=[];for(Bb=0;Bb<Mc.length;Bb++)for(var Gd=Mc[Bb],hd=0;hd<Gd.length;hd++)for(var xd=Gd[hd],Nd=0;Nd<xd.length;Nd++)hb[b.id].push(xd[Nd]);for(var Hd=a.particles,Bb=0;Bb<Hd.length;Bb++){var rd=Hd[Bb].dupli_object;rd&&(rd.QD=!0,hb[b.id].push(rd));var Ud=Hd[Bb].dupli_group;if(Ud)for(var ge=Ud.objects,hd=0;hd<ge.length;hd++)rd=ge[hd],rd.QD=!0,hb[b.id].push(rd)}for(var Zd=hb[b.id],Bb=Zd.length-1;0<=Bb;Bb--)Zd[Bb].Id||Zd.splice(Bb,1);for(var Wd=hb[b.id],uc=0;uc<Wd.length;uc++){ob=Wd[uc];
!b.Nb&&ob.parent&&-1<Fc.indexOf(ob.parent.type)&&(ob.parent="");if("MESH"==ob.type){var be=Ya.aN(ob);be&&(a.meshes.push(be),ob.data=be)}ob.Nn=M.eG(ob,!1);ob.bj=M.wE(ob)}for(uc=0;uc<Wd.length;uc++){for(var ob=Wd[uc],ce=ob.bj,vc=0;vc<ob.lod_levels.length;vc++){var Yd=ob.lod_levels[vc].object;Yd&&(ce=ce||Yd.bj)}if(ce)for(ob.bj=!0,vc=0;vc<ob.lod_levels.length;vc++)if(Yd=ob.lod_levels[vc].object)Yd.bj=!0}for(var bd=0;bd<a.scenes.length;bd++){var he=a.scenes[bd],Vc=he.world;Vc.Id||(Vc.Id=[]);Vc.Id.push(b.Nb?
he:$a)}for(var de=[],bd=0;bd<a.worlds.length;bd++)Vc=a.worlds[bd],Vc.Id?(Vc.Nn=M.eG(Vc,!0),Vc.bj=M.wE(Vc)):de.push(Vc);for(bd=0;bd<de.length;bd++)Vc=de[bd],a.worlds.splice(a.worlds.indexOf(Vc),1);for(var ie=a.node_groups,je=a.materials,Id=0;Id<ie.length;Id++){var Od=ie[Id].node_tree;if(Od){var Vd=[];p(Od,Vd,!0);Od.It=Vd}}for(Id=0;Id<je.length;Id++)if(Od=je[Id].Md)Vd=[],p(Od,Vd,!1),Od.It=Vd;for(var ee=0;ee<a.scenes.length;ee++){var ke=a.scenes[ee],fe=b.Nb?ke:$a;H(b.id,fe,"SPEAKER").length&&!fe.Qc&&
Qa.jN(fe)}f(b,c)}function y(a,b,c,d,e){d=ba(b.wi);for(var f=[],g=[],h=0;h<a.speakers.length;h++){var l=a.speakers[h],k=l.sound.uuid;if(-1==g.indexOf(k)){g.push(k);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var n=V.AT_AUDIOBUFFER;break;case "BACKGROUND_MUSIC":n=V.AT_AUDIO_ELEMENT}l=P.Ii(d+l.sound.filepath);m(f,k,n,l,b.og)}}f.length?V.enqueue(f,function(){},function(){e(b,c)}):e(b,c)}function p(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d],f=e.type;if("GROUP"==f&&e.node_group){if(e=
e.node_group.node_tree)if(c)p(e,b,!0);else for(e=e.It,f=0;f<e.length;f++){var g=e[f];-1==b.indexOf(g)&&b.push(g)}}else-1!=Nb.indexOf(f)&&-1==b.indexOf(f)&&b.push(f)}}function d(a){var b=[];-1==a.objects.indexOf(a.camera)&&a.objects.push(a.camera);v(a.objects,"ALL",b);return b}function v(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&v(e.objects,b,c)}}function r(a,b,c,d){d[b]=d[b]||[];for(var e=d[b],f=0;f<a.length;f++){var g=a[f],h=ca(g);e[h]=e[h]||
[];(c||-1==Fc.indexOf(g.type))&&-1==e[h].indexOf(g)&&e[h].push(g);(g=g.dupli_group)&&r(g.objects,b+1,c,d)}}function H(a,b,c){var d=[];a=hb[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.type==c||"ALL"==c)for(var g=0;g<f.Id.length;g++)b==f.Id[g]&&d.push(f)}return d}function E(a,b,c,d,e){for(var f=hb[b.id],g=0;g<f.length;g++){var h=M.jF(f[g]);h.A.de=b.id}for(var l=a.worlds,g=0;g<l.length;g++)M.jF(l[g],!0);d=M.get_all_objects("ALL",b.id);for(g=0;g<f.length;g++){var k=f[g],h=k.Ha;va.Jp(k,h)}for(g=0;g<
l.length;g++)h=l[g],va.Jp(h,h.Ha);b.Nb&&w(a,b.id);for(g=0;g<f.length;g++)k=f[g],h=k.Ha,h.Kr||(J.RT(k,h),M.zW(k,h),ic.V(h)),"MESH"==h.type&&M.TQ(k,h);for(a=0;a<f.length;a++){var m=f[a],l=m.Ha,g=l.A;if(ea.is_mesh(l)||ea.is_empty(l)){var n=m.lod_levels.length;if(n){for(var l=[m],h=[0],p=Infinity,k=0;k<n;k++){var r=m.lod_levels[k].object,q=m.lod_levels[k].distance;if(!r){p=q;break}l.push(r);h.push(q)}h.push(p);for(k=0;k<l.length;k++)r=l[k],m=r.Ha.A,m.Cj=!0,"DYNAMIC"==g.type&&0<k&&Ha.subtract(g.se.U,m.se.U,
m.rw),m.qg=h[k],m.pg=h[k+1],n=h[k+1]-h[k],p=k==l.length-1?Infinity:h[k+2]-h[k+1],m.Hj=Math.min(k?h[k]-h[k-1]:0,n),m.Ij=Math.min(n,p)}}}for(f=0;f<d.length;f++)if(a=d[f],"MESH"==a.type&&(g=a.Qt)){var g=g.A,l=a.A.hi,h=[],u;for(u in l)k=l[u],h.push(4*k.Pz,4*k.gi);g.vw.push(h);g.mp.push(a.A)}f=u=-1;a=la.iG();for(g=0;g<d.length;g++)l=d[g],h=l.A,ea.is_mesh(l)&&h.Vk&&(l=h.Jh,l>u&&(u=l),a>=l&&l>f&&(f=l));for(g=0;g<d.length;g++)l=d[g],h=l.A,ea.is_mesh(l)&&h.Vk&&(h.zm=!0,u<a?h.Jh=u:h.Jh<=a?h.Jh=f:(Aa.warn('too many bones for "'+
l.name+'" / '+h.Jh+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),h.Jh=u,h.zm=!1),h.zm=h.zm&&!Wa.QF);for(u=0;u<d.length;u++)if(f=d[u],f.Cf)if(a=f.Of,"CHASSIS"==a.Hf){f.R={};f.R.qr=a.qr;f.R.Eq=a.Eq;f.R.vC=a.vC;f.R.xC=a.xC;f.R.wC=a.wC;f.R.aD=a.aD;f.R.VB=a.VB;f.R.cB=a.cB;f.R.jo=0;f.R.Dq=1;f.R.xp=0;f.R.speed=0;f.R.en=[];f.R.os=[];f.R.zp=null;l=(g=ea.get_dg_parent(f))?ea.lA(g,d):d;for(g=0;g<l.length;g++)h=l[g],h.Cf&&(k=h.Of,qa.lS(h)&&a.name==k.name?
(k=qa.mX(h.Of.Hf),f.R.en[k]=h,f.R.os[k]=new Float32Array(8)):qa.UG(h)&&a.name==k.name?(f.R.zp=h,f.R.yp=k.yp,f.R.Os=k.Os,f.R.Jr=k.Jr,k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.fJ=h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.eJ=k):qa.TG(h)&&a.name==k.name?(f.R.nC=h,f.R.Ms=k.Ms,f.R.Lo=k.Lo,k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.aJ=h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.$I=k):qa.VG(h)&&a.name==k.name&&(f.R.yC=h,f.R.er=k.er,
k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.pJ=h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.oJ=k));4!=f.R.en.length&&P.K("Not enough wheels for chassis "+f.name)}else if("HULL"==a.Hf)for(f.R={},f.R.en=[],f.R.os=[],f.R.qr=a.qr,f.R.Eq=a.Eq,f.R.vm=a.vm,f.R.An=a.An,f.R.Bn=a.Bn,f.R.jo=0,f.R.Dq=1,f.R.xp=0,f.R.speed=0,f.R.zp=null,l=(g=ea.get_dg_parent(f))?ea.lA(g,d):d,g=0;g<l.length;g++)h=l[g],h.Cf&&(k=h.Of,qa.kS(h)&&a.name==k.name?(f.R.en.push(h),f.R.os.push(new Float32Array(8))):
qa.UG(h)&&a.name==k.name?(f.R.zp=h,f.R.yp=k.yp,f.R.Os=k.Os,f.R.Jr=k.Jr,k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.fJ=h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.eJ=k):qa.TG(h)&&a.name==k.name?(f.R.nC=h,f.R.Ms=k.Ms,f.R.Lo=k.Lo,k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.aJ=h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.$I=k):qa.VG(h)&&a.name==k.name&&(f.R.yC=h,f.R.er=k.er,k=oa.invert(f.A.D,oa.create()),h=oa.multiply(k,h.A.D,k),f.R.pJ=
h,k=new Float32Array([1,0,0]),oa.transform_dir_vec3(k,h,k),f.R.oJ=k));for(u=0;u<d.length;u++)if(f=d[u],f.Mm&&(a=f.no,"MAIN_BODY"==a.Hf))for(f.Rg={},f.Rg.vm=a.vm,f.Rg.An=a.An,f.Rg.Bn=a.Bn,f.Rg.au=[],g=(g=ea.get_dg_parent(f))?ea.lA(g,d):d,l=0;l<g.length;l++)h=g[l],h.Mm&&(k=h.no,qa.nS(h)&&a.name==k.name&&(f.Rg.au.push(h),h.jz=h.no.nJ));e(b,c)}function w(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=a.scenes[c],e=M.Sb(d,"LAMP",b),f=Array(e.length),g=0;g<e.length;g++)f[g]=g;f.sort(function(a,b){var c=
e[a].Db,d=e[b].Db;return d.rn&&d.vn&&(!c.rn||!c.vn)||!c.rn&&(d.rn||!c.vn&&d.vn)?1:0});for(g=0;g<f.length;g++)ea.Da(e[f[g]],d).Ur=g}}function n(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];f.aj=f.camera.Ha}for(d=0;d<a.scenes.length;d++){var f=b.Nb?a.scenes[d]:$a,g=b.Nb?M.Sb(f,"LAMP",b.id):M.Sb(f,"LAMP",0),h=M.Sb(f,"ALL",b.id),l=H(b.id,f,"MESH"),k=H(b.id,f,"EMPTY");b.Nb&&Oa.PM(f,h,g,l,k);for(var h=!1,m=0;m<k.length;m++)for(var n=k[m].Ha,p=n.S,r=0;r<p.length;r++){var q=p[r].kb,u=Oa.HJ(q,
n);f.name==q.name&&(h=h||u)}b.Nb&&f.J.sd&&!h&&Aa.warn('Scene "'+f.name+'" has water but has no wind. Using default settings.');k=[];Oa.set_active(f);sa.YF(f,l,g,k);m=M.Sb(f,"LINE",b.id);sa.XF(f,m);n=Oa.tv(f);if(b.Nb){h=f.J.yx;m=f.world;if(h.hI||h.procedural_skydome)p=m.Ha,sa.TM(f,h,p),sa.xu(p,n,f);Oa.VF(f,n);(h=f.J.Ol)&&(h.ft||h.ie)&&sa.MM(f,m.Ha)}for(m=0;m<l.length;m++)sa.xu(l[m].Ha,n,f);for(m=0;m<k.length;m++)sa.xu(k[m],n,f),M.tT(k[m]);h=M.Sb(f,"ALL",b.id);Oa.dE(f,h,g);for(m=0;m<h.length;m++)n=
h[m],n.A.ef&&!n.KG&&M.update_boundings(n),ea.aO(n)&&(n.BH=!0),M.uW(n,f)}Oa.QM($a,a.textures,b.id);b.Nb&&$a.J.Wp.length&&(b.BA=!0);e(b,c)}function C(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.Ig="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==Da.km?"dds":""}if((Xa.Oz&&"dds"==Da.km||Xa.Zw&&"pvr"==Da.km)&&Da.RJ)for(a=0;a<b.length;a++){for(var d=b[a],e=d.texture_slots,c=0;c<e.length;c++){var f=e[c],g=f.texture;if("IMAGE"==g.type||"ENVIRONMENT_MAP"==g.type){var h=
g.image;h&&!h.Ig&&(f=!g.b4w_disable_compression&&!f.use_map_normal&&"ENVIRONMENT_MAP"!=g.type&&!g.b4w_shore_dist_map&&"MOVIE"!=h.source,k(h,f))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){e=d[c];f=!1;if("TEXTURE"==e.type){if((g=e.texture)&&(h=g.image)&&!h.Ig&&(f=!g.b4w_disable_compression&&"MOVIE"!=g.image.source&&"ENVIRONMENT_MAP"!=g.type)){a:{f=e.outputs;for(e=0;e<f.length;e++)if(g=f[e],g.is_linked&&"Normal"==g.identifier){f=!0;break a}f=!1}f=!f}}else"TEX_IMAGE"==e.type?(h=e.image)&&!h.Ig&&
(f="MOVIE"!=h.source):"TEX_ENVIRONMENT"==e.type&&(f=!1);h&&!h.Ig&&k(h,f)}}}function k(a,b){-1<a.filepath.indexOf(".dds")?a.Ig="dds":b?(a.Ig=Da.km,a.filepath="dds"==Da.km?a.filepath+".dds":a.filepath+".pvr"):a.Ig=""}function F(a,b,c,d,e){d=a.groups;for(var f=a.objects,g={},h={},l={},k={},m=0;m<d.length;m++){var n=d[m];g[n.uuid]=n;l[n.uuid]=n}for(m=0;m<f.length;m++)n=f[m],h[n.uuid]=n,k[n.uuid]=n;a=a.scenes;for(m=0;m<a.length;m++)u(a[m].objects,null,k,l,null);for(var M in l)M in g||d.push(l[M]);for(M in k)M in
h||f.push(k[M]);e(b,c)}function u(a,b,c,d,e){for(var f=[],h=0;h<a.length;h++){var l=a[h],k=c[l.uuid];if(l=k.proxy){b&&-1==f.indexOf(l.uuid)&&f.push(l.uuid);for(var m=c[l.uuid],n=m.constraints,l=0;l<n.length;l++){var M=P.W(n[l]);M.name=M.name+"_CLONE";k.constraints.push(M)}"b4w_proxy_inherit_anim"in k&&!k.b4w_proxy_inherit_anim||(k.animation_data&&(m.animation_data=P.W(k.animation_data)),m.b4w_use_default_animation=k.b4w_use_default_animation,m.b4w_auto_skel_anim=k.b4w_auto_skel_anim,m.b4w_anim_behavior=
k.b4w_anim_behavior,m.b4w_cyclic_animation=k.b4w_cyclic_animation)}}for(h=0;h<f.length;h++)k=P.wR(a,f[h]),-1<k&&a.splice(k,1);f={};if(b)for(h=0;h<a.length;h++)l=a[h],k=c[l.uuid],n=P.W(k),m="origin_name"in k?k.origin_name:k.name,n.name=ea.UF(b.name,m),n.origin_name=m,n.dg_parent={uuid:b.uuid},g(n),c[n.uuid]=n,f[l.uuid]=n.uuid,l.uuid=n.uuid,e&&e[k.uuid]&&(n.b4w_cluster_data=e[k.uuid]);for(h=0;h<a.length;h++)l=a[h],k=c[l.uuid],k.dupli_group&&(l=k.dupli_group,e=d[l.uuid],n=P.W(e),n.name=P.Ys(e.name+"_CLONE"),
n.uuid=Ka.xG("Group"+n.name),d[n.uuid]=n,l.uuid=n.uuid,u(n.objects,k,c,d,k.b4w_cluster_data));if(b)for(h=0;h<a.length;h++){l=a[h];k=c[l.uuid];k.parent&&k.parent.uuid in f?k.parent.uuid=f[k.parent.uuid]:k.parent&&(Aa.warn("Object's \""+k.name+'" parent is not in dupli group. Disabling parenting.'),k.parent=null);n=k.constraints;for(l=0;l<n.length;l++)b=n[l],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);if(b=k.pose)for(d=b.bones,l=0;l<d.length;l++)if(e=d[l].constraints)for(n=0;n<e.length;n++)b=
e[n],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);b=k.modifiers;for(l=0;l<b.length;l++)d=b[l],d.object&&d.object.uuid in f&&(d.object.uuid=f[d.object.uuid]);if((k=k.lod_levels)&&k.length)for(l=0;l<k.length;l++)b=k[l],b.object&&b.object.uuid in f&&(b.object.uuid=f[b.object.uuid])}for(var p in f)Yb[p]=f[p]}function g(a){a.uuid=Ka.xG("Object"+a.name)}function D(a,b){a.action&&N(a,"action",b);if(a.nla_tracks)for(var c=0;c<a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],e=0;e<d.strips.length;e++)d.strips[e].action&&
N(d.strips[e],"action",b)}function B(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var e=c[d];"TEXTURE"==e.type&&e.texture&&N(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in Yb&&(e.lamp.uuid=Yb[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&N(e,"node_group",b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||N(e,"image",b)}e=a.links;for(d=0;d<e.length;d++){var f=e[d];L(f,"from_node",c);L(f,"to_node",c);A(f,"from_socket",f.from_node.outputs);A(f,"to_socket",
f.to_node.inputs)}(c=a.animation_data)&&D(c,b)}function N(a,b,c){a[b]&&((c=c[a[b].uuid])||Aa.error("Dangling link found:",b,a),a[b]=c)}function L(a,b,c){c=P.keysearch("name",a[b].name,c);a[b]=c}function A(a,b,c){c=P.keysearch("identifier",a[b].identifier,c);a[b]=c}function G(a,b,d,e,f,g){var h=[],l=[],k={};e=a.images;for(var m=Ja.hG(),n=ba(b.wi),M=0;M<e.length;M++){var p=e[M],r=p.uuid;if(r){var q=P.Ii(n+p.filepath),u=V.Kx(q),v=u[1].toLowerCase(),ea=p.source;if("FILE"===ea){ea=p.Ig?V.AT_ARRAYBUFFER:
V.AT_IMAGE_ELEMENT;if(!V.$N(v)){Aa.error('image "'+p.name+'" has unsupported format or broken path.');continue}Xa.gB&&Da.use_min50&&(q=z(u))}else if("MOVIE"===ea)if(Da.Ds)q=u[0]+".altconv.seq",ea=V.AT_SEQ_VIDEO_ELEMENT;else{ea=Qa.detect_video_container(v);if(""==ea){Aa.error("failed to load video file (unsupported format)",q);continue}q=ea!=v?u[0]+".altconv."+ea:u[0]+"."+u[1];ea=V.AT_VIDEO_ELEMENT}else{Aa.error('Image "'+p.name+'" has unsupported format "'+ea+'".');continue}r in k||(k[r]=[]);for(u=
0;u<m.length;u++)v=m[u],(!Ja.bR(v)&&v.Ok==p.Ig&&v.Gm==r||b.og)&&k[r].push(v);p.Ig&&Da.assets_gzip_available&&(ea=V.AT_ARRAYBUFFER_ZIP,q+=".gz");k[r].length&&h.push({id:r,type:ea,url:q,ye:b.og})}}if(h.length){var w=0,y=function(e,f,m,n){if(e){if(b.og)f=m;else{f=k[f];for(var M=0;M<f.length;M++){var p=f[M];if(m==V.AT_SEQ_VIDEO_ELEMENT)p.Bs=e.Dh,Ja.at(p,e.images,b.id);else if(Ja.at(p,e,b.id),"ENVIRONMENT_MAP"==p.source&&b.Nb)for(var r=0;r<a.scenes.length;r++)Oa.iy(a.scenes[r]);Ja.IU(p)}f=f[0].Ok}m==V.AT_VIDEO_ELEMENT||
m==V.AT_SEQ_VIDEO_ELEMENT?(m==V.AT_VIDEO_ELEMENT?(f=e.videoWidth,e=e.videoHeight):(f=e.images[0].width,e=e.images[0].height),Aa.log("%cLOAD VIDEO "+f+"x"+e,"color: #"+(2048<f||2048<e?"a00":1024<f||1024<e?"aa0":"0a0"),n),-1==n.indexOf(Xb)&&Aa.warn("video",n,"is not from app root.")):c(e,n,!0,f)}else{a:{e=b.og;n=n.split("?v")[0];m=V.Kx(n);if("gz"==m[1])n=m[0],m=V.AT_ARRAYBUFFER;else if("dds"==m[1]||"pvr"==m[1])for(n=m[0],m=V.AT_IMAGE_ELEMENT,M=k[f],p=0;p<M.length;p++)M[p].Ok="";else if(-1!=n.indexOf(".min50"))n=
n.split(".min50"),n=n[0]+n[1],m=V.AT_IMAGE_ELEMENT;else{f=null;break a}f={id:f,type:m,url:n,ye:e}}f&&(Aa.warn("Trying to load fallback image",f.url),l.push(f))}f=++w/(h.length+l.length);g(b,d,f)},A=function(){l.length?(V.enqueue(l,y,A),l.length=0):(Aa.log("%cLOADED ALL IMAGES","color: #0a0"),f(b,d))};V.enqueue(h,y,A)}else f(b,d)}function z(a){return"dds"==a[1]?(a=V.Kx(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function I(a,b,c,d,e){a=Oa.xv();for(d=0;d<a.length;d++){var f=a[d];if(f.b4w_use_nla){var g=
f.b4w_nla_cyclic;f.b4w_use_logic_editor&&(g=!1);va.HW(f,g,b.id)}}e(b,c)}function S(a,b,c,d,e,f){a=ba(b.wi);var g=[],h={};d=M.get_all_objects("ALL",b.id);for(var l=0;l<d.length;l++){var k=d[l];if(K(k)){var n=k.ka.Jc;"BACKGROUND_MUSIC"==Qa.pA(k)?(n=P.mv(),b.yA=!0):"NONE"!=Qa.pA(k)&&Da.GA&&(b.FA=!0);if(!(n in h)){h[n]=[];var p=P.Ii(a+k.ka.wi);switch(Qa.ZI(k)){case Qa.Ey:var r=V.AT_AUDIOBUFFER;break;case Qa.cD:r=V.AT_AUDIO_ELEMENT}m(g,n,r,p,b.og)}h[n].push(k)}}if(g.length){var q=0;V.enqueue(g,function(a,
d,e,l){if(a)for(Aa.log("%cLOAD SOUND","color: #0aa",l),-1==l.indexOf(Xb)&&Aa.warn("sound",l,"is not from app root."),d=h[d],e=0;e<d.length;e++)Qa.MW(d[e],a);a=++q/g.length;f(b,c,a)},function(){Aa.log("%cLOADED ALL SOUNDS","color: #0aa");e(b,c)})}else e(b,c)}function m(a,b,c,d,e){var f=V.Kx(d),g=f[1].toLowerCase(),h=Qa.detect_audio_container(g);""!=h?(d=h!=g?f[0]+".altconv."+h:f[0]+"."+f[1],a.push({id:b,type:c,url:d,ye:e})):Aa.error("failed to load audio file (unsupported format)",d)}function K(a){return ea.is_speaker(a)&&
Qa.ZI(a)!=Qa.dD}function U(a,b,c){a=M.Sb(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];ea.is_speaker(d)&&(Qa.jS(d)||c)&&Qa.play_def(d)}}function Q(a,b){for(var c=a.J.Wp,d=0;d<c.length;d++){var e=c[d].J;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=e.Yp||(Ja.reset_video(e),Ja.play_video(e))}}function R(a,b,c,d,e){va.PT();e(b,c)}function ga(a,b,c,d,e){va.start();Aa.log("%cSTART NLA","color: #0a0");e(b,c)}function ra(a,b,c,d,e){for(var f=c.lod_levels.length,h=0;h<f;h++){var l=c.lod_levels[h],
k=l.object;if(k){var m=e.lH.indexOf(c);if(-1==m){e.lH.push(c);var n={Jw:[],DH:[],kH:[],$B:[],vB:[]};e.nw.push(n)}else n=e.nw[m];var M=n.Jw.indexOf(k);-1!=m&&-1!=M?(n.$B[M].push(a),n.vB[M].push(b)):(m=P.Oq(k),m.name=c.name+"_LOD_"+String(h+1),m.b4w_cluster_data=c.b4w_cluster_data,g(m),m.lod_levels=[],d&&(m.dg_parent=d),n.Jw.push(k),n.DH.push(m),n.kH.push(l),n.$B.push([a]),n.vB.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)ra(a,b,b[d],c,e)}function T(a,b){var c=b.objects,d=c.indexOf(a);
-1<d&&c.splice(d,1);for(d=0;d<c.length;d++)(b=c[d].dupli_group)&&T(a,b)}function ia(a,b,c,d,e){d=!0;for(var f=0;f<a.scenes.length;f++)if(!qa.dO(a.scenes[f])){d=!1;break}d&&(e(b,c),Aa.log("%cPHYSICS READY","color: #0a0"))}function ha(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];if(b.Nb)var g=qa.gx(f);else g=qa.gx($a)||qa.gx(f),f=$a;if(Cb.enabled&&g)for(g=0;g<ac.length;g++)for(var h=M.Sb(f,ac[g],b.id),l=0;l<h.length;l++){var k=h[l];k.A.de==b.id&&(qa.append_object(k,f),b.gH&&qa.sa(k)&&
qa.disable_simulation(k))}}e(b,c)}function pa(a,b,d,e,f){var g={};e=[];for(var h=a.scenes,l=0;l<a.scenes.length;l++){var k=h[l];if(k.J.sd){var m=k.J.sd.rl;if(m&&"FILE"===m.source){var k=m.uuid,n=P.Ii(ba(b.wi)+m.filepath);e.push({id:k,type:m.Ig?V.AT_ARRAYBUFFER:V.AT_IMAGE_ELEMENT,url:n});g[k]=m}}}e.length?V.enqueue(e,function(a,d,e,f){if(a){c(a,f,!0);e=[];f=Ja.hG();for(var l=0;l<f.length;l++){var k=f[l];k.uri===d&&e.push(k)}for(d=0;d<e.length;d++)Ja.at(e[d],a,b.id);for(d=0;d<h.length;d++)if(e=h[d],
e.J.sd&&(f=e.J.sd.rl,f===m)){var k=a,n=document.createElement("canvas");f=m.size[0];l=m.size[1];n.width=f;n.height=l;n=n.getContext("2d");n.drawImage(k,0,0);k=n.getImageData(0,0,f,l).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;n[2]=1/255;n[3]=1;f*=l;for(var l=new Float32Array(f),M=0;M<f;M++)l[M]=n[1]*k[4*M+2]+n[2]*k[4*M+3];e.J.jC=l}}else for(a=g[d],d=0;d<h.length;d++)e=h[d],f=e.J.sd.rl,f===a&&(e.J.sd.rl=null,Aa.warn("image",f.filepath," was not found. Disabling water shore effects."))},
function(){f(b,d)}):f(b,d)}function Z(a,b,d,e,f){e=a.scenes[0];a=[];for(var g=[Na.yt,Na.kq,Na.zt,Na.Sy],h=0;h<g.length;h++){var l=Oa.Tb(e,g[h]);l&&a.push(l)}if(a.length){e=[];h=V.AT_IMAGE_ELEMENT;e.push({id:"SEARCH_TEXTURE",type:h,url:xa.$e.smaa_search_texture_path,ye:b.og});e.push({id:"AREA_TEXTURE",type:h,url:xa.$e.smaa_area_texture_path,ye:b.og});for(h=0;h<a.length;h++)if(g=a[h],g.type==Na.kq){a=g.fb;for(h=0;h<a.length;h++)if(g=a[h],"u_search_tex"==g.to)var k=g.Oa;else if("u_area_tex"==g.to)var m=
g.Oa;break}e.length?V.enqueue(e,function(a,d,e,f){a&&(c(a,f,!1),d="SEARCH_TEXTURE"==d?k:m,d.source="IMAGE",Ja.at(d,a,b.id),Ja.dC(d,Ja.T,Ja.T))},function(){f(b,d)}):f(b,d)}else f(b,d)}function ma(a,b,c,d){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.Nb||(e=$a);for(var f=M.Sb(e,"LAMP",b.id),g=0;g<f.length;g++){var h=f[g];h.A.de==b.id&&d.Yy.push({kb:e,obj:h})}f=M.Sb(e,"ALL",b.id);for(g=0;g<f.length;g++)h=f[g],"LAMP"!=h.type&&h.A.de==b.id&&(b.gH&&ea.is_mesh(h)&&Oa.hm(h,!0),d.Yy.push({kb:e,obj:h}))}}
function aa(a,b,c,d,e,f){var g=d.Yy;e=d.JH;if(g.length){a=g[e].obj;var h=g[e].kb;e=ea.Da(a,h);Oa.append_object(h,a);!a.anchor||h.J.anaglyph_use||h.J.Gs||Ca.append(a);d=++d.JH/g.length;a.A.yG&&Oa.Kq(a,!0);g=e.qj;if(-1!=a.A.ce&&g){var l=Ha.copy(a.A.se.U,mb);Oa.GJ(g,l)}g=a.us;if(g.length&&h.J.Qh)for(h=oa.get_trans_view(a.A.D),a=oa.get_quat_view(a.A.D),e=e.Mi,l=0;l<e.length;l++)Oa.IJ(e[l],h,a),ea.JJ(g,e[l].H.xc)}else d=1;f(b,c,d)}function fa(a,b,c,d,e){if(b.Nb){a=Oa.Gh();Oa.iy(a);d=Oa.xv();for(var f=
0;f<d.length;f++){var g=d[f];Oa.iy(g);Oa.ST(g,a)}Oa.set_active(a)}else Oa.LJ($a);a=M.get_all_objects("ALL",b.id);M.AW(a);e(b,c)}function wa(a,b,c,d,e){if(b.Nb)for(a=Oa.xv(),d=0;d<a.length;d++)for(var f=a[d],g=M.Sb(f,"WORLD",0),h=0;h<g.length;h++)Oa.cS(f,g[h]),Oa.iy(f);e(b,c)}function da(a,b,c,d,e){if(b.Nb)for(a=Oa.xv(),d=0;d<a.length;d++){var f=a[d];f.b4w_use_logic_editor&&X.dS(f,b.id)}e(b,c)}function W(a,b,c,d,e){if(b.Nb)for(d=0;d<a.scenes.length;d++)Q(a.scenes[d],b.id),U(a.scenes[d],b.id,!1);else Q($a,
b.id),U($a,b.id,!1);e(b,c)}function Ga(a,b,c,d,e){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;Da.media_auto_activation&&(b.BA||b.yA||b.FA)?Ta||O(a,e,b,c):e(b,c)}function O(a,b,c,d){var e=sb.parentElement;ab=e.style.zIndex;e.style.zIndex="999";Ta=document.createElement("div");Ta.style.position="relative";Ta.style.height="88px";Ta.style.width="88px";var f=Math.round(sb.offsetWidth/2-44);Ta.style.top=Math.round(sb.offsetHeight/2-44).toString()+"px";Ta.style.left=f.toString()+"px";Ta.style.backgroundImage=
"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
Ta.style.backgroundSize="88px";ib=document.createElement("div");ib.style.position="relative";ib.style.height=sb.offsetHeight.toString()+"px";ib.style.width=sb.offsetWidth.toString()+"px";ib.style.background="rgba(0, 0, 0, 0.5)";ib.style.zIndex="999";e.appendChild(ib);ib.appendChild(Ta);$b=function(){c.BA&&(Ja.play(),Ja.pause(),Ja.reset());if(c.yA){if(c.Nb)for(var e=0;e<a.scenes.length;e++)U(a.scenes[e],c.id,!0);else U($a,c.id,!0);Qa.pause()}c.FA&&Qa.VH();ua();b(c,d)};na.add_click_listener(Ta,$b)}
function ua(){if(Ta){var a=sb.parentElement;a.style.zIndex=ab;na.remove_click_listener(Ta,$b);ib.removeChild(Ta);a.removeChild(ib);Ta=ib=null;ab=0}}function ba(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function ja(a){la.is_animated(a)&&la.remove(a);Ea.cU(a);M.clear_outline_anim(a);La.check_sensor_manifold(a)&&La.remove_sensor_manifold(a);qa.sa(a)&&qa.remove_object(a);Oa.gI(a);ea.is_speaker(a)&&Qa.AV(a);Ca.is_anchor(a)&&Ca.remove(a)}function ca(a){var b=la.dG(a);return(a=b&&b.parent==
a?null:a.parent||b)?1+ca(a):0}var Ca=t("__anchors"),la=t("__animation"),V=t("__assets"),sa=t("__batch"),xa=t("__config"),J=t("__constraints"),La=t("__controls"),Ua=t("__texcomp"),Ia=t("__debug"),ta=t("__extensions"),na=t("__input"),Y=t("__loader"),ya=t("__material"),Ka=t("__md5"),va=t("__nla"),X=t("__logic_nodes"),Ea=t("__particles"),Fa=t("__nodemat"),M=t("__objects"),ea=t("__obj_util"),qa=t("__physics"),Aa=t("__print"),Pa=t("__quat"),Ya=t("__reformer"),za=t("__renderer"),Oa=t("__scenes"),Qa=t("__sfx"),
Ma=t("__shaders"),Na=t("__subscene"),Ra=t("__tbn"),Ja=t("__textures"),ka=t("__time"),ic=t("__transform"),oa=t("__tsr"),P=t("__util"),Ha=t("__vec3"),Za=t("__vec4"),Wa=xa.Zl,Da=xa.L,Xa=xa.be,Cb=xa.N,Hb=xa.ka,Ba=null,hb=null,Xb="",$a=null,Yb={},mb=new Float32Array(3),Mb=new Float32Array(4),Wc=new Float32Array(4),Ec=Ra.create(),Ta=null,ib=null,ab=0,Ib=!1,$b=null,Fc=["LAMP"],ac=["MESH","CAMERA","EMPTY"],Nb=["BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],sb=null;a.is_primary_loaded=function(a){return Y.is_primary_loaded(a)};
a.update=function(){Y.IW(Ba)};a.mV=function(a){sb=a};a.xW=function(a,b){if(Ta){ib.style.height=b.toString()+"px";ib.style.width=a.toString()+"px";var c=Math.round(a/2-44);Ta.style.top=Math.round(b/2-44).toString()+"px";Ta.style.left=c.toString()+"px"}};a.load=function(a,c,d,g,l){var k={load_main:{Ib:Y.Fg,Qb:!1,inputs:[],Wb:!1,Xb:500,ic:!1,Zb:b},duplicate_objects:{Ib:Y.ae,Qb:!1,inputs:["load_main"],Wb:!1,Xb:50,ic:!1,Zb:F},load_binaries:{Ib:Y.Fg,Qb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:h},wait_for_shaders:{Ib:Y.ae,
Qb:!1,inputs:[],Wb:!1,Xb:50,ic:!0,wk:f},prepare_bindata:{Ib:Y.ae,Qb:!1,inputs:["duplicate_objects","load_binaries"],Wb:!1,Xb:100,ic:!1,Zb:q},prepare_bpy_data:{Ib:Y.ae,Qb:!1,inputs:["duplicate_objects","prepare_bindata"],Wb:!1,Xb:100,ic:!1,Zb:x},process_objects:{Ib:Y.ae,Qb:!1,inputs:["prepare_bpy_data"],Wb:!1,Xb:150,ic:!1,Zb:E},process_scenes:{Ib:Y.ae,Qb:!1,inputs:["process_objects","wait_for_shaders"],Wb:!1,Xb:300,ic:!1,Zb:n},load_smaa_textures:{Ib:Y.Fg,Qb:!1,inputs:["process_scenes"],Wb:!1,Xb:30,
ic:!0,Zb:Z},load_shoremap:{Ib:Y.Fg,Qb:!1,inputs:["process_scenes"],Wb:!1,Xb:30,ic:!0,Zb:pa},load_images:{Ib:Y.Fg,Qb:!0,inputs:["process_scenes"],Wb:!0,Xb:500,ic:!1,Zb:G},update_scenes_nla:{Ib:Y.ae,Qb:!1,inputs:["process_scenes","load_images"],Wb:!1,Xb:50,ic:!1,Zb:I},wait_physics_workers:{Ib:Y.ae,Qb:!1,inputs:["load_shoremap"],Wb:!1,Xb:20,ic:!1,wk:ia},add_physics_objects:{Ib:Y.ae,Qb:!1,inputs:["wait_physics_workers"],Wb:!1,Xb:50,ic:!1,Zb:ha},add_objects:{Ib:Y.ae,Qb:!1,inputs:["add_physics_objects"],
Wb:!1,Xb:600,ic:!1,Zb:ma,wk:aa,Iq:fa,Jq:{Yy:[],JH:0}},init_cube_sky_dynamic_props:{Ib:Y.ae,Qb:!1,inputs:["add_objects","load_images"],Wb:!1,Xb:50,ic:!1,Zb:wa},init_logic_nodes:{Ib:Y.ae,Qb:!1,inputs:["update_scenes_nla","add_objects"],Wb:!1,Xb:50,ic:!1,Zb:da},load_speakers:{Ib:Y.Fg,Qb:!0,inputs:["add_objects"],Wb:!0,Xb:100,ic:!1,Zb:S},mobile_media_start:{Ib:Y.ae,Qb:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],Wb:!0,Xb:5,ic:!1,Zb:Ga,wk:Ga},synchronize_media:{Ib:Y.ae,
Qb:!0,inputs:["mobile_media_start"],Wb:!0,Xb:50,ic:!1,Zb:W},prepare_nla:{Ib:Y.ae,Qb:!1,inputs:["mobile_media_start"],Wb:!1,Xb:5,ic:!0,Zb:R},start_nla:{Ib:Y.ae,Qb:!0,inputs:["prepare_nla"],Wb:!1,Xb:5,ic:!0,Zb:ga}},m=Y.oA();m||(m=Y.kF(),Ba={},hb={},Yb={});Ba[m.Nf.length]={};return Y.oF(k,a,c,d,e,g||Hb.gE,Da.do_not_load_resources,l,!1)};a.unload=function(a){var b=Y.oA();if(!b||!b.Nf.length||a&&!Y.UV(b.Nf[a]))Aa.error("Unable to unload data!");else{if(0==a)Aa.log("%cUNLOAD ALL","color: #00a"),Ca.cleanup(),
la.cleanup(),Qa.cleanup(),sa.cleanup(),Oa.cleanup(),Y.cleanup(),La.cleanup(),qa.cleanup(),M.cleanup(),P.cleanup(),za.cleanup(),Fa.cleanup(),Ma.cleanup(),ta.cleanup(),V.cleanup(),Ja.cleanup(),X.cleanup(),Ea.cleanup(),na.cleanup(),Ia.cleanup(),hb=null,Yb={},Ba=$a=null,Ib=!1;else{Aa.log("%cUNLOAD DATA "+a,"color: #00a");la.aU(a);for(var b=M.get_all_objects("ALL",M.DATA_ID_ALL),c=0;c<b.length;c++){var d=b[c];ea.get_object_data_id(d)!=a&&M.Yo(d,!1,!1,!1)}b=M.get_all_objects("ALL",a);for(c=b.length-1;0<=
c;c--)d=b[c],ja(d),M.remove_object(d);b=M.get_all_objects("ALL",M.DATA_ID_ALL);for(c=0;c<b.length;c++)M.Yo(b[c],!0,!0,!0)}va.cleanup(a);ua()}};a.XH=ja;a.set_debug_resources_root=function(a){Xb=a};a.activate_media=function(){Ib||Da.media_auto_activation||(Ja.play(),Ja.pause(),Ja.reset(),U($a,M.DATA_ID_ALL,!0),Qa.pause(),Da.GA&&Qa.VH(),Ib=!0)};a.reset=function(){sb=null};a.prefetch=function(a,c,d){var f={load_main:{Ib:Y.Fg,Qb:!1,inputs:[],Wb:!1,Xb:500,ic:!1,Zb:b},load_binaries:{Ib:Y.Fg,Qb:!1,inputs:["load_main"],
Wb:!1,Xb:500,ic:!1,Zb:h},load_images:{Ib:Y.Fg,Qb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:G},preload_sounds:{Ib:Y.Fg,Qb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:y}},g=Y.oA();g||(g=Y.kF(),Ba={},hb={},Yb={});Ba[g.Nf.length]={};return Y.oF(f,a,c,d,e,!1,Da.do_not_load_resources,!1,!0)};a.unfetch=function(){V.jO()}};b4w.module.__batch=function(a,t){function e(a){a={type:a,zb:"",id:0,de:0,Pq:-1,cl:"",Fu:-1,ao:-1,cr:0,vf:0,Fk:[],ma:[],Mf:[],rf:[],cc:[],oj:[],Vi:null,Pc:{},yb:null,eb:ba.gS(),ie:"",uq:[],ra:null,ff:V.Bk(),ef:!1,rj:!1,Hu:!1,num_vertices:0,num_triangles:0,aw:0,cw:0,Nc:!1,Cv:0,Aj:0,jd:new Float32Array(3),uf:new Float32Array(16),cj:!1,mf:!1,rb:!1,Qa:!1,ai:!1,Fa:!1,yc:!1,ve:!1,af:!1,Ee:!1,Td:!1,le:!1,Rd:!1,Qd:!1,Bh:la.Gn,hf:!1,Sg:!1,tj:!1,gg:!1,pg:fa.Py,qg:0,Hj:0,Ij:0,Xk:b(),ce:-1,Nd:-1,Iv:!1,Mv:0,Jv:0,
Nv:0,Ov:0,Lv:new Float32Array(3),Kv:new Float32Array(3),Er:!1,xd:0,Ad:0,ee:1,reflect_factor:0,$j:0,Jf:1,parallax_scale:0,ti:0,Jg:1,Vo:0,Vm:0,nd:0,ih:0,zd:new Float32Array(2),Fe:new Float32Array(3),mh:new Float32Array(3),ne:new Float32Array(3),lc:new Float32Array(4),Fh:new Float32Array(2),Pm:null,Io:null,Pr:null,Or:null,wb:!1,wireframe_edge_color:sa.create(),Sf:!1,water_dynamic:!1,Cn:!1,yy:!1,zy:0,Ay:0,xy:0,Ml:.1,shallow_water_col_fac:0,shore_water_col_fac:0,foam_factor:0,fv:new Float32Array(2),ev:new Float32Array(2),
pr:new Float32Array(2),shallow_water_col:new Float32Array(3),shore_water_col:new Float32Array(3),Oj:null,Qj:!1,Dj:!1,Qu:!1,Ja:null,Sm:0,Xl:null,ds:null,Lh:[],Gf:[],je:[],Ff:[],sb:T.EG(),Hl:!1,Vd:null,Mg:!0,FG:0,Xo:new Float32Array(3)};a.lc[3]=1;a.Qa=!0;a.Sm=1;a.Xk.zo=-1;return a}function c(a){var c=e(a.type);c.zb=a.zb;c.id=a.id;c.Pq=a.Pq;c.cl=a.cl;c.Fu=a.Fu;c.ao=a.ao;c.cr=a.cr;c.vf=a.vf;c.Fk=[];c.ma=a.ma.slice();c.Mf=a.Mf.slice();c.rf=a.rf.slice();c.cc=a.cc.slice();c.oj=a.oj.slice();c.Vi=V.W(a.Vi);
c.Pc=V.W(a.Pc);c.yb=a.yb;c.eb=ba.oO(a.eb);c.ie=a.ie;c.uq=O.kO(a.uq);c.ra=a.ra;c.ef=a.ef;c.rj=a.rj;c.Hu=a.Hu;c.num_vertices=a.num_vertices;c.num_triangles=a.num_triangles;c.aw=a.aw;c.cw=a.cw;c.Cv=a.Cv;c.Aj=a.Aj;c.jd=a.jd;c.uf=a.uf;c.cj=a.cj;c.mf=a.mf;c.rb=a.rb;c.Qa=a.Qa;c.ai=a.ai;c.Fa=a.Fa;c.yc=a.yc;c.ve=a.ve;c.af=a.af;c.Ee=a.Ee;c.Td=a.Td;c.le=a.le;c.Rd=a.Rd;c.Qd=a.Qd;c.Nc=a.Nc;c.Bh=a.Bh;c.hf=a.hf;c.Sg=a.Sg;c.tj=a.tj;c.gg=a.gg;c.pg=a.pg;c.qg=a.qg;c.Hj=a.Hj;c.Ij=a.Ij;var d=a.Xk,f=b();f.gt=d.gt;f.Qe=
d.Qe;f.nu=d.nu;f.si=d.si;f.zo=d.zo;f.yo=d.yo;f.xo=d.xo;f.Ww=d.Ww;c.Xk=f;c.ce=a.ce;c.Nd=a.Nd;c.Iv=a.Iv;c.Mv=a.Mv;c.Jv=a.Jv;c.Nv=a.Nv;c.Ov=a.Ov;sa.copy(a.Lv,c.Lv);sa.copy(a.Kv,c.Kv);c.Er=a.Er;c.xd=a.xd;c.Ad=a.Ad;c.ee=a.ee;c.reflect_factor=a.reflect_factor;c.$j=a.$j;c.Jf=a.Jf;c.parallax_scale=a.parallax_scale;c.ti=a.ti;c.Jg=a.Jg;c.Vo=a.Vo;c.Vm=a.Vm;c.nd=a.nd;c.ih=a.ih;c.zd[0]=a.zd[0];c.zd[1]=a.zd[1];sa.copy(a.Fe,c.Fe);sa.copy(a.mh,c.mh);sa.copy(a.ne,c.ne);xa.copy(a.lc,c.lc);c.Fh.set(a.Fh);c.Pm=V.W(a.Pm);
a.Io&&(c.Io=new Float32Array(a.Io),c.Pr=new Float32Array(a.Pr),c.Or=new Float32Array(a.Or));c.wb=a.wb;sa.copy(a.wireframe_edge_color,c.wireframe_edge_color);c.Sf=a.Sf;c.water_dynamic=a.water_dynamic;c.Cn=a.Cn;c.yy=a.yy;c.zy=a.zy;c.Ay=a.Ay;c.xy=a.xy;c.Ml=a.Ml;c.shallow_water_col_fac=a.shallow_water_col_fac;c.shore_water_col_fac=a.shore_water_col_fac;c.foam_factor=a.foam_factor;c.fv.set(a.fv);c.ev.set(a.ev);c.pr.set(a.pr);sa.copy(a.shallow_water_col,c.shallow_water_col);sa.copy(a.shore_water_col,c.shore_water_col);
c.Oj=V.W(a.Oj);c.Qj=a.Qj;c.Dj=a.Dj;c.Qu=a.Qu;a.Ja&&(c.Ja=wa.XE(a.Ja));c.Sm=a.Sm;a.Xl&&(c.Xl=new Float32Array(a.Xl));c.ds=V.W(a.ds);c.Lh=a.Lh.slice();c.Gf=a.Gf.slice();c.je=a.je.slice();c.Ff=a.Ff.slice();T.hF(a.sb,c.sb);c.Hl=a.Hl;c.Mg=a.Mg;c.Xo=a.Xo;return c}function b(){return{gt:!1,Qe:0,si:0,zo:0,yo:0,xo:0,Ww:0,nu:1}}function h(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.zb=a.rb?a.ai?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.zb=a.Ee?"CAST":"RECEIVE";break;case "COLOR_ID":a.zb=
a.ai?"COLOR_ID_XRAY":"COLOR_ID"}}function f(a,b,c){var d=[],f=a.Ha,h=l(c,b,!b.ue,!1),k=a.data,m=f.nc,n=Array(m.length),p=Array(m.length),M=[],r=ua.Lb(c,ja.Hb),q=!1;r&&(q=r.Rm.length?!0:!1);for(var u=0;u<h.length;u++)for(var v=h[u],w=0;w<m.length;w++){var y=m[w];if(!ra(f,w)&&!la.wG(k,w))if("PHYSICS"==v&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)M.push(la.av(k,w,[],b.hi,{},null));else if(!y.Bi||q){var ea=e(v);"MAIN"==v?n[w]=ea:"DEBUG_VIEW"==v&&(p[w]=ea);ea.Pq=a.b4w_cluster_data.cluster_id;if(I(ea,
y)&&x(ea,y,k)){"SHADOW"==v&&n[w]&&(ea.yc=n[w].yc);ea.Bh=b.ef||b.ve?la.tt:la.Gn;g(ea,b);N(ea,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==ea.type)ea.cl=ga(ea,b,a.uuid);ea.tj=a.b4w_do_not_cull;"MAIN"==ea.type&&(ea.gg=a.b4w_caustics);A(ea,"DISABLE_FOG",("COLOR_ID"!=v&&"SHADOW"!=v&&a.b4w_disable_fogging)|0);var D=la.av(k,w,ea.oj,b.hi,ea.Pc,ea.Vi);!y.oe||"a_shade_tangs"in D.la[0]||(A(ea,"CALC_TBN",1),L(ea,"a_tbn"));y.Bi&&(D=wa.QT(D));S(ea);d.push({Aa:ea,ug:b,Xt:b,Vd:D,dh:[y.name],me:[a]})}}}if(M.length){ea=
e("PHYSICS");ea.zb="NAVMESH";ea.cl=ga(ea,b,a.uuid);for(var D=la.kJ(M),B=[],u=0;u<m.length;u++)B.push(m[u].name);S(ea);d.push({Aa:ea,ug:b,Xt:b,Vd:D,dh:B,me:[a]})}for(u=0;u<p.length;u++)p[u]&&(p[u].ao=n[u].id,S(p[u]));var t=a.particle_systems;if(0<t.length){for(var qa=!1,C=!1,u=0;u<t.length;u++){var F=t[u],E=F.settings;E.use_render_emitter&&d.length&&(qa=!0);"HAIR"!=E.type||"OBJECT"!=E.render_type&&"GROUP"!=E.render_type&&F.transforms.length||(C=!0);if(qa&&C)break}var G;if(d.length)G=d[0];else{var H=
e("TMP");N(H,t);var ya=la.av(k,0,H.oj,b.hi,H.Pc,H.Vi);G={Aa:H,Vd:ya}}var R=G,va=R.Aa.Pc,X;if(C){var W;if(1<m.length){for(var K={},O=0;O<t.length;O++){var Ka=t[O].settings;if("HAIR"==Ka.type&&("OBJECT"==Ka.render_type||"GROUP"==Ka.render_type)){var Q=Ka.b4w_vcol_from_name,T=Ka.b4w_vcol_to_name;""!==Q&&""!==T&&(K[Q]=V.W(va[Q]))}}"a_bending_col_main"in va&&(K.a_bending_col_main=V.W(va.a_bending_col_main));"a_bending_col_detail"in va&&(K.a_bending_col_detail=V.W(va.a_bending_col_detail));W=la.KF(k,[],
K)}else W=R.Vd;X=W}else X=null;for(var U=X,da=a.Ha,Ea=[],Fa=a.particle_systems,ca=a.data,ia=0;ia<Fa.length;ia++){var Z=Fa[ia],Y=Z.settings;if(Y.count)if("EMITTER"==Y.type){if("DYNAMIC"==b.type){var aa=e("PARTICLES");aa.sb.Oe=b.va;aa.sb.qf=b.Cb;aa.sb.Pe=b.tc;var xa,pa=Z.settings.material-1;pa>=da.nc.length&&(ha.warn('Wrong material used for rendering particle system "'+Z.name+'"'),pa=0);xa=pa;var ma=da.nc[xa];if(!ra(da,xa)&&("HALO"===Z.settings.render_type&&"HALO"==ma.type&&(aa.Er=!0),x(aa,ma,ca))){var na=
aa,La=da,ta=Z.settings;switch(ta.b4w_billboard_align){case "VIEW":A(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":A(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":A(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":A(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:V.K("Wrong billboard align value")}A(na,"BILLBOARD",0);var Ua=ta.b4w_enable_soft_particles&&fa.JE(La,ta);A(na,"SOFT_PARTICLES",0<ta.b4w_particles_softness&&Ua&&J.Iu?1:0);A(na,"SOFT_STRENGTH",
ba.X(ta.b4w_particles_softness));ba.oa(na.eb,"WORLD_SPACE","WORLD"==ta.b4w_coordinate_system?1:0);aa.ve=!0;aa.tj=a.b4w_do_not_cull;aa.cl=ga(aa,b,da.name+"_"+Y.uuid);wa.VO(aa,Z,ma);var Ia=wa.OQ(aa,ca,Z,da.A);wa.EW(Ia,aa,Y.count);wa.DW(da);g(aa,da.A);S(aa);Ea.push({Aa:aa,ug:b,Xt:b,Vd:Ia,dh:[ma.name],me:[a]})}}}else if("HAIR"==Y.type){var rb=V.Tv(Z.seed),vb=Ga.KE(J.WA)&&!Y.b4w_initial_rand_rotation&&!Y.b4w_hair_billboard,jb=4;vb&&(jb=8);if(Z.transforms.length)var Tb=Z.transforms;else for(var pb=la.gA(U,
Y.count,!1,rb),Tb=new Float32Array(pb.length*jb),bb=0;bb<pb.length;bb++){var mc=.75+.5*V.hh(rb);Tb[bb*jb]=pb[bb][0];Tb[bb*jb+1]=pb[bb][1];Tb[bb*jb+2]=pb[bb][2];Tb[bb*jb+3]=mc;vb&&(Tb[bb*jb+4]=1,Tb[bb*jb+5]=0,Tb[bb*jb+6]=0,Tb[bb*jb+7]=0)}var Ob=ua.Lb(c,ja.Zi)?!0:!1;if("OBJECT"==Y.render_type){var nc=[l(c,Y.dupli_object.Ha.A,!b.ue,!0)],Nc=z(a,b,va,U,[Y.dupli_object],nc,[Tb],Y,Z,Ob,rb,!1);Ea.push.apply(Ea,Nc)}else if("GROUP"==Y.render_type){for(var Xc=Y.dupli_group.objects,nc=[],bb=0;bb<Xc.length;bb++){var id=
l(c,Xc[bb].Ha.A,!b.ue,!0);nc.push(id)}for(var jd=!1,cd=[],bb=0;bb<Xc.length;bb++)cd.push(Xc[bb].Ha);if(Y.use_whole_group){for(var Gc,wb=Tb,zc=cd,oc=vb,Hc=jb,xb={},Eb=new Float32Array([0,0,0,1]),tb=0;tb<wb.length;tb+=Hc)for(var nb=0;nb<zc.length;nb++){var Kb=sa.create(),kd=Ca.get_scale(zc[nb].A.D),Oc=Ca.get_trans_view(zc[nb].A.D);sa.scale(Oc,kd,Kb);var fb=sa.clone([wb[tb],wb[tb+1],wb[tb+2]]);xb[nb]||(xb[nb]=new Float32Array(wb.length));oc&&(xb[nb][tb+4]=Eb[0]=wb[tb+4],xb[nb][tb+5]=Eb[1]=wb[tb+5],xb[nb][tb+
6]=Eb[2]=wb[tb+6],xb[nb][tb+7]=Eb[3]=wb[tb+7],V.LB(Eb,Eb),V.YV(Kb,Eb,Kb));sa.add(fb,Kb,fb);xb[nb][tb]=fb[0];xb[nb][tb+1]=fb[1];xb[nb][tb+2]=fb[2];xb[nb][tb+3]=wb[tb+3]}Gc=xb;jd=!0}else{var Pc;if(Y.use_group_count){for(var bc=Tb,Ic=cd,cc=Y.dupli_weights,Yc=rb,Ub=vb,Pb=jb,yb={},Ac=[],kb=0;kb<Ic.length;kb++)for(var Jc=Ic[kb],pc=Jc.Fd||Jc.name,Qc=0;Qc<cc.length;Qc++){var Fb=cc[Qc];pc==Fb.name&&Ac.push(Fb)}cc.length!=Ac.length&&ha.error("dupli weights match failed");for(kb=0;kb<bc.length;kb+=Pb){for(var Lb,
Bc=Ac,qc=[0],qb=0;qb<Bc.length;qb++)qc[qb+1]=qc[qb]+Bc[qb].count;for(var Qb=qc[qc.length-1]*V.hh(Yc),ub=0,qb=0;qb<qc.length;qb++)if(Qb>=qc[qb]&&Qb<qc[qb+1]){ub=qb;break}Lb=ub;yb[Lb]=yb[Lb]||[];yb[Lb].push(bc[kb],bc[kb+1],bc[kb+2],bc[kb+3]);Ub&&yb[Lb].push(bc[kb+4],bc[kb+5],bc[kb+6],bc[kb+7])}for(Lb in yb)yb[Lb]=new Float32Array(yb[Lb]);Pc=yb}else{for(var Ab=Tb,Sa=rb,rc=vb,Rb=jb,dc=cd.length,cb={},Vb=0;Vb<Ab.length;Vb+=Rb){var Cc=Math.floor(dc*V.hh(Sa));cb[Cc]=cb[Cc]||[];cb[Cc].push(Ab[Vb],Ab[Vb+1],
Ab[Vb+2],Ab[Vb+3]);rc&&cb[Cc].push(Ab[Vb+4],Ab[Vb+5],Ab[Vb+6],Ab[Vb+7])}for(Cc in cb)cb[Cc]=new Float32Array(cb[Cc]);Pc=cb}Gc=Pc}Nc=z(a,b,va,U,Xc,nc,Gc,Y,Z,Ob,rb,jd);Ea.push.apply(Ea,Nc)}"INSTANCE"==Y.b4w_wind_bend_inheritance&&da.A.Ke&&ha.warn('Emitter object "'+da.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else V.K("Unknown particle settings type")}qa?d.push.apply(d,Ea):d=Ea}return d}
function q(a){for(var b=[],c=[],d={},e=0;e<a.length;e++){var f=a[e].Aa,g=null;if(f.id in d){var h=d[f.id],l=c[h].Aa;m(f,function(a){m(l,function(b){V.MV(a,b)&&1!=a.FG&&(g=c[h])})});if(!g){do f.id++;while(d[f.id])}}g||(g={Aa:f,NH:[],iE:[],mJ:[],me:[],fI:[],dh:[]},d[f.id]=c.length,c.push(g));if(a[e].Vd&&a[e].Vd.Wa){g.NH.push(a[e].ug);g.iE.push(a[e].Xt);g.mJ.push(a[e].Vd);for(var k=0;k<a[e].me.length;k++)f=a[e].me[k],-1==g.fI.indexOf(f.uuid)&&(g.me.push(f),g.fI.push(f.uuid));for(k=0;k<a[e].dh.length;k++)f=
a[e].dh[k],-1==g.dh.indexOf(f)&&g.dh.push(f)}g.dh.sort()}for(e=0;e<c.length;e++){var f=c[e].Aa,n=c[e].NH,p=c[e].iE,M=c[e].mJ;a="DYNAMIC"==p[0].type||"COLOR_ID"==f.type?p[0]:fa.yz(p[0]);if("STATIC"==a.type&&"COLOR_ID"!=f.type)for(k=0;k<n.length;k++){var r=n[k],q=p[k],d=M[k],u=Ca.identity(va);r.Kg&&!r.yq?(r=Ca.so(r.D,Ka),Ca.set_transcale(r,u)):Ca.copy(r.D,u);q.Tk?d.We||(q.Kg?la.PV(d,u):la.uC(d,u)):la.uC(d,u);if(q.Tk)A(f,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].me.length){r={};if(q.Ke||q.Kg)r.au_center_pos=
[u[0],u[1],u[2]];q.Ke&&(r.au_wind_bending_amp=[q.Tf],r.au_wind_bending_freq=[q.Uf],r.au_detail_bending_amp=[q.xf],r.au_detail_bending_freq=[q.yf],r.au_branch_bending_amp=[q.sf]);la.OV(d,r);A(f,"AU_QUALIFIER","GLSL_IN")}else a.iu.set(u.subarray(0,3)),A(f,"AU_QUALIFIER","uniform")}if(0==M.length)d=la.$g(V.Ys("%empty"));else if(1==M.length)d=M[0];else{d=[];for(k=0;k<M.length;k++)la.pS(M[k])||d.push(k);if(d.length<M.length)for(k=0;k<d.length;k++)la.Px(M[d[k]]);d=la.kJ(M)}if("STATIC"==a.type){if("COLOR_ID"!=
f.type){M=[];for(k=0;k<c[e].me.length;k++)T.aA(c[e].me[k].Ha.A.jE,M);T.fz(M,0,M.length,a.wh);T.ni(a.wh,a.va);a.uk=T.uu(V.f32(M),!0);T.Xn(a.uk,a.Cb);a.se=T.wu(a.uk);T.Ak(a.se,a.tc)}a.Cj&&(k=c[e].me[0].b4w_cluster_data,k.cluster_center?a.Vr.set(k.cluster_center):a.Vr.set(a.se.U))}"PARTICLES"!=f.type&&(k=d.Zc,a.Kg?(T.ni(a.va,f.sb.Oe),T.Xn(a.Cb,f.sb.qf),T.Ak(a.tc,f.sb.Pe),f.Hl=!1):(T.ni(k.va,f.sb.Oe),T.Xn(k.Cb,f.sb.qf),a.tc.ab<k.tc.ab?"STATIC"==a.type&&"COLOR_ID"!=f.type?T.Ak(a.se,f.sb.Pe):T.Ak(a.tc,
f.sb.Pe):T.Ak(k.tc,f.sb.Pe),f.Hl=T.IG(f.sb.qf,f.sb.Pe)));b.push({Aa:f,A:a,Vd:d,dh:c[e].dh,me:c[e].me})}return b}function l(a,b,c,d){var e=[];d||(b.pl&&ua.Lb(a,ja.Le)||b.Xc&&ua.Lb(a,ja.rh))&&e.push("COLOR_ID");c&&(e.push("MAIN"),e.push("NODES_GLOW"),ua.Lb(a,ja.qh)&&e.push("DEBUG_VIEW"),ua.Lb(a,ja.Yf)&&e.push("SHADOW"),ua.Lb(a,ja.Zi)&&e.push("GRASS_MAP"));e.push("PHYSICS");if(b.Ee||b.Rd)for(a=null,b.Ee&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.Rd&&(b=["COLOR_ID","PHYSICS","SHADOW",
"DEBUG_VIEW"],a?a=V.cN(a,b):a=b),b=a,a=0;a<b.length;a++)c=e.indexOf(b[a]),-1!==c&&e.splice(c,1);return e}function x(a,b,c){var e;switch(a.type){case "MAIN":if(b.ue)e=!1;else{if(b.Eg&&"HALO"!=b.type)w(a,b,c,"MAIN");else{d(a,b);a.Fa=b.Fa;a.ai=b.Sj&&"OPAQUE"!=b.ib&&"CLIP"!=b.ib&&"ALPHA_ANTIALIASING"!=b.ib;a.nd=b.nd;a.mh.set([1,1,1]);var f=b.Cg;a.lc.set(b.lc);a.lc[3]=b.alpha;if(b.Bi){U(a,"lens_flares.glslv","lens_flares.glslf");L(a,"a_position");L(a,"a_texcoord");var g=ca.xe(f[0]),h=f[0].texture;Q(a,
g,"u_sampler",h.name)}else{U(a,"main.glslv","main_stack.glslf");b.yc||(c=aa.Fz(b.Jc,{yc:b.yc,Te:b.Te,bf:b.bf,oe:b.oe}),a.eb.Ze=aa.Tq(c));var l=v("use_map_color_diffuse",f);e=v("use_map_color_spec",f);var k=v("use_map_normal",f),m=v("use_map_mirror",f),n=v("use_stencil",f);c=l[0];e=e[0];k=k[0];m=m[0];l=l[1];f=n[0]&&v("use_rgb_to_intensity",f)[0];if(c){h=c.texture;switch(c.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}g=
ca.xe(c);Q(a,g,"u_colormap0",h.name);a.ti=c.diffuse_color_factor;c.use_map_alpha?a.Jg=c.alpha_factor:a.Jg=0;a.mh.set(c.scale)}n=c&&c==e;e&&(n||(h=e.texture,g=ca.xe(e),Q(a,g,"u_specmap0",h.name)),a.$j=e.specular_color_factor);if(k&&(h=k.texture,L(a,"a_tbn"),g=ca.xe(k),Q(a,g,"u_normalmap0",h.name),a.Vo=k.normal_factor,h.b4w_use_map_parallax&&J.Rw)){var g=ba.X(h.b4w_parallax_steps),q=ba.X(h.b4w_parallax_lod_dist);A(a,"PARALLAX",1);A(a,"PARALLAX_STEPS",g);A(a,"PARALLAX_LOD_DIST",q);a.parallax_scale=h.b4w_parallax_scale}m&&
(h=m.texture,g=ca.xe(m),Q(a,g,"u_mirrormap",h.name),a.Vm=m.mirror_factor);if(m=c&&l&&f?1:0)g=ca.xe(l),h=l.texture,Q(a,g,"u_colormap1",h.name),g=ca.xe(f),h=f.texture,Q(a,g,"u_stencil0",h.name);(h=c||e||k)&&a.mh.set(h.scale);A(a,"TEXTURE_SPEC",void 0==e?0:1);A(a,"ALPHA_AS_SPEC",n?1:0);A(a,"TEXTURE_STENCIL_ALPHA_MASK",m);L(a,"a_position");L(a,"a_tbn");(c||e||k)&&L(a,"a_texcoord");if(b.ha.Di){a.Sf=!0;a.water_dynamic=b.ha.is_dynamic;b.ha.shore_smoothing&&!a.rb?(ha.warn('Material: "'+b.name+'" is opaque.',
"Disabling water shore smoothing."),a.Cn=!1):a.Cn="REFLECT"!=a.zb?b.ha.shore_smoothing:!1;U(a,"water.glslv","water.glslf");m=aa.Fz(b.Jc,{yc:!1,Te:b.Te,bf:b.bf,oe:b.oe});a.eb.Ze=aa.Tq(m);L(a,"a_position");J.nK?(L(a,"a_polyindex"),a.Qa=!0,sa.set(0,0,0,a.wireframe_edge_color),pa.qA()?A(a,"DEBUG_WIREFRAME",1):A(a,"DEBUG_WIREFRAME",2)):A(a,"DEBUG_WIREFRAME",0);n=b.Cg;m=v("use_map_normal",n);g=v("use_map_mirror",n)[0];m.length&&(h=m[0].texture,Q(a,ca.xe(m[0]),"u_normalmap0",h.name),a.Ml=b.ha.norm_uv_velocity);
A(a,"NUM_NORMALMAPS",m.length);a.Oj=Array(m.length);for(h=0;h<m.length;h++)a.Oj[h]=new Float32Array(2),a.Oj[h].set([m[h].scale[0],m[h].scale[1]]);g&&(q=ca.xe(g),h=g.texture,Q(a,q,"u_mirrormap",h.name),a.Vm=g.mirror_factor);g=null;if(J.oo)for(h=0;h<n.length;h++){var M=n[h];if(!0===M.texture.b4w_water_foam){g=M;break}}g&&(A(a,"FOAM",1),q=ca.xe(g),h=g.texture,Q(a,q,"u_foam",h.name),a.foam_factor=b.ha.foam_factor,a.fv.set(h.b4w_foam_uv_freq),a.ev.set(h.b4w_foam_uv_magnitude),a.pr[0]=g.scale[0],a.pr[1]=
g.scale[1]);for(h=0;h<n.length;h++)if(M=n[h],!0===M.texture.b4w_shore_dist_map){var x=M;break}x&&J.Kt&&(n=ca.xe(x),h=x.texture,Q(a,n,"u_shore_dist_map",h.name),A(a,"SHORE_PARAMS",1),x=M.texture.b4w_shore_boundings,A(a,"MAX_SHORE_DIST",ba.X(M.texture.b4w_max_shore_dist)),A(a,"SHORE_MAP_SIZE_X",ba.X(x[0]-x[1])),A(a,"SHORE_MAP_SIZE_Y",ba.X(x[2]-x[3])),A(a,"SHORE_MAP_CENTER_X",ba.X((x[0]+x[1])/2)),A(a,"SHORE_MAP_CENTER_Y",ba.X((x[2]+x[3])/2)));b.ha.Xv?(A(a,"GENERATED_MESH",1),a.yy=!0,a.zy=b.ha.Hw,a.Ay=
b.ha.Iw,a.xy=b.ha.Ku):(L(a,"a_tbn"),(g||m.length)&&L(a,"a_texcoord"),A(a,"GENERATED_MESH",0));if(b.ha.is_dynamic){var M=ba.X(b.ha.dst_noise_scale0),x=ba.X(b.ha.dst_noise_scale1),m=ba.X(b.ha.dst_noise_freq0),n=ba.X(b.ha.dst_noise_freq1),h=ba.X(b.ha.dir_min_shore_fac),g=ba.X(b.ha.dir_freq),q=ba.X(b.ha.dir_noise_scale),D=ba.X(b.ha.dir_noise_freq),B=ba.X(b.ha.dir_min_noise_fac),z=ba.X(b.ha.dst_min_fac),ea=ba.X(b.ha.waves_hor_fac);A(a,"DST_NOISE_SCALE_0",M);A(a,"DST_NOISE_SCALE_1",x);A(a,"DST_NOISE_FREQ_0",
m);A(a,"DST_NOISE_FREQ_1",n);A(a,"DIR_MIN_SHR_FAC",h);A(a,"DIR_FREQ",g);A(a,"DIR_NOISE_SCALE",q);A(a,"DIR_NOISE_FREQ",D);A(a,"DIR_MIN_NOISE_FAC",B);A(a,"DST_MIN_FAC",z);A(a,"WAVES_HOR_FAC",ea)}H(a,b);E(a,b);a.shallow_water_col.set(b.ha.nx);a.shore_water_col.set(b.ha.qx);a.shallow_water_col_fac=b.ha.ox;a.shore_water_col_fac=b.ha.rx;A(a,"ABSORB",ba.X(b.ha.absorb_factor));A(a,"SSS_STRENGTH",ba.X(b.ha.sss_strength));A(a,"SSS_WIDTH",ba.X(b.ha.sss_width))}"HALO"===b.type&&(U(a,"halo.glslv","halo.glslf"),
y(a,b),a.oj=["a_position"]);b.oe&&(A(a,"USE_TBN_SHADING",1),L(a,"a_shade_tangs"));A(a,"TEXCOORD",0);A(a,"NORMAL_TEXCOORD",0);c&&p(a,c,"TEXTURE_COLOR0_CO");l&&p(a,l,"TEXTURE_COLOR1_CO");f&&p(a,f,"TEXTURE_STENCIL_ALPHA_MASK_CO");e&&p(a,e,"TEXTURE_SPEC_CO");k&&p(a,k,"TEXTURE_NORM_CO");A(a,"SHADELESS",b.yc?1:0);a.yc=b.yc}A(a,"ALPHA","OPAQUE"===b.ib?0:1);A(a,"ALPHA_CLIP","CLIP"===b.ib?1:0);A(a,"DOUBLE_SIDED_LIGHTING",b.Lp?1:0);b.ht?(A(a,"VERTEX_COLOR",1),L(a,"a_color")):A(a,"VERTEX_COLOR",0);a.xd=b.xd;
a.ee=b.ee;a.Ad=b.Ad;a.ne.set(b.ne);a.Jf=b.Jf;H(a,b);E(a,b);b.Mr?A(a,"WETTABLE",1):A(a,"WETTABLE",0);r(a,b);b.Om&&!a.rb?(ha.warn('Material "'+b.name+'" is not blend. Disabling refractions.'),a.Qj=!1):a.Qj=b.Om;a.ih=b.ih}e=!0}break;case "NODES_GLOW":e=w(a,b,c,"GLOW");break;case "SHADOW":if(b.Bi||b.ha.Di||b.ue||"HALO"==b.type)e=!1;else if(d(a,b),a.Fa=b.Fa,a.rb)e=!1;else{!b.Eg||"CLIP"!=b.ib&&"ALPHA_ANTIALIASING"!=b.ib?U(a,"shadow.glslv","shadow.glslf"):w(a,b,c,"SHADOW");a.Qa=a.Qa&&!(J.ys&&"ALPHA_ANTIALIASING"==
b.ib);xa.set(0,0,0,b.alpha,a.lc);L(a,"a_position");L(a,"a_tbn");A(a,"ALPHA","OPAQUE"===b.ib?0:1);a.mh.set([1,1,1]);c=v("use_map_color_diffuse",b.Cg)[0];if(!c||"CLIP"!=b.ib&&"ALPHA_ANTIALIASING"!=b.ib)A(a,"TEXTURE_COLOR",0);else{switch(c.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.mh.set(c.scale);A(a,"TEXTURE_COLOR",1);L(a,"a_texcoord");b=ca.xe(c);c=c.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=
b.source&&"CANVAS"!=b.source&&"NONE"!=b.source||Q(a,b,"u_colormap0",c.name)}e=!0}break;case "PHYSICS":c=b.od;b=b.ha;c.Kp?(a.Ui=c.Ui,a.Jb=c.Jb,a.li=c.li,a.ki=c.ki,a.mi=c.mi,a.Tg=c.Tg,a.Pg=c.Pg,e=!0):b.Di?(a.Sf=!0,a.jX=b.is_dynamic,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,
a.dir_min_noise_fac=b.dir_min_noise_fac,a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,e=!0):e=!1;break;case "COLOR_ID":if(b.Bi||"HALO"==b.type)e=!1;else{k=e=b.ib;"ALPHA_ANTIALIASING"==k&&(k="CLIP",b.ib="CLIP");d(a,b);a.Fa=b.Fa;a.hf=!1;a.Qa=!0;a.rb=!1;a.ai=b.Sj&&"OPAQUE"!=k&&"CLIP"!=k;b.Eg&&"CLIP"==k?w(a,b,c,"COLOR_ID"):U(a,"color_id.glslv","color_id.glslf");xa.set(0,0,0,b.alpha,a.lc);L(a,"a_position");A(a,"ALPHA","OPAQUE"===k?0:1);a.mh.set([1,1,1]);c=v("use_map_color_diffuse",b.Cg)[0];
A(a,"ALPHA_CLIP","CLIP"===k?1:0);if(c&&"CLIP"==k){switch(c.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.mh.set(c.scale);A(a,"TEXTURE_COLOR",1);L(a,"a_texcoord");k=ca.xe(c);c=c.texture;"IMAGE"!=k.source&&"ENVIRONMENT_MAP"!=k.source&&"CANVAS"!=k.source&&"NONE"!=k.source||Q(a,k,"u_colormap0",c.name)}else A(a,"TEXTURE_COLOR",0);b.ib=e;e=!0}break;case "GRASS_MAP":!b.Ri.Fo||b.ue?e=!1:(d(a,b),a.Fa=
b.Fa,a.rb=!1,a.hf=!1,a.Qa=!0,U(a,"grass_map.glslv","grass_map.glslf"),L(a,"a_position"),c=b.Ri.lr?b.Ri.lr:null,b=b.Ri.kr?b.Ri.kr:null,a.Pc.a_grass_size={Dm:!0,src:[]},c?(a.Pc.a_grass_size.src.push({name:c,ah:4}),A(a,"DYNAMIC_GRASS_SIZE",1)):A(a,"DYNAMIC_GRASS_SIZE",0),a.Pc.a_grass_color={Dm:!0,src:[]},b?(a.Pc.a_grass_color.src.push({name:b,ah:7}),A(a,"DYNAMIC_GRASS_COLOR",1)):A(a,"DYNAMIC_GRASS_COLOR",0),A(a,"GRASS_TEXTURE_SIZE",ba.X(Ua.Dr)),e=!0);break;case "DEBUG_VIEW":e=u(a,b);break;case "PARTICLES":a:if(b.ue)e=
!1;else{e=b.Cg;if(a.Er)U(a,"particle_system.glslv","particle_system_stack.glslf"),A(a,"HALO_PARTICLES",1),y(a,b);else{k={yc:!1,Te:b.Te,bf:b.bf,oe:b.oe};if(b.Eg){U(a,"particle_system.glslv","particle_system.glslf");w(a,b,c,"PARTICLES");e=!0;break a}U(a,"particle_system.glslv","particle_system_stack.glslf");c=aa.Fz(b.Jc,k);a.eb.Ze=aa.Tq(c);if(c=v("use_map_color_diffuse",e)[0]){A(a,"TEXTURE_COLOR",1);switch(c.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,
"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.ti=c.diffuse_color_factor;c.use_map_alpha?a.Jg=c.alpha_factor:a.Jg=0;Q(a,ca.xe(c),"default"+String(a.ma.length),c.texture.name)}}a.lc.set(b.lc);a.lc[3]=b.alpha;a.xd=b.xd;a.ee=b.ee;a.Ad=b.Ad;a.ne.set(b.ne);a.Jf=b.Jf;L(a,"a_position");L(a,"a_tbn");A(a,"ALPHA","OPAQUE"===b.ib?0:1);A(a,"ALPHA_CLIP","CLIP"===b.ib?1:0);A(a,"PARTICLES_SHADELESS",b.yc?1:0);H(a,b);E(a,b);d(a,b);a.Fa=b.Fa;a.ai=b.Sj&&"OPAQUE"!=b.ib&&"CLIP"!=b.ib&&"ALPHA_ANTIALIASING"!=b.ib;
a.nd=b.nd;e=!0}break;default:V.K("Wrong batch type: "+a.type)}return e}function y(a,b){var c=b.wo;A(a,"NUM_RINGS",c.dx);A(a,"NUM_LINES",c.iw);A(a,"NUM_STARS",c.Mx);A(a,"SKY_STARS",c.$v?1:0);a.Mv=c.size;a.Jv=c.Fr/20;a.Lv.set(c.ex);a.Kv.set(c.kw);a.Nv=1/c.Nx;a.Ov=c.Ox;a.Iv=!0}function p(a,b,c){switch(b.texture_coords){case "UV":case "ORCO":A(a,c,"TEXTURE_COORDS_UV_ORCO");A(a,"TEXCOORD",1);break;case "NORMAL":A(a,c,"TEXTURE_COORDS_NORMAL");A(a,"NORMAL_TEXCOORD",1);break;default:A(a,c,"TEXTURE_COORDS_NONE")}}
function d(a,b){switch(b.ib){case "ALPHA_ANTIALIASING":a.rb=!1;a.hf=!1;a.Qa=!0;a.cj=!1;a.mf=!0;break;case "ALPHA_SORT":a.rb=!0;a.hf=!0;a.Qa=!0;a.cj=!1;a.mf=!1;break;case "ALPHA":a.rb=!0;a.hf=!1;a.Qa=!0;a.cj=!1;a.mf=!1;break;case "CLIP":a.rb=!1;a.hf=!1;a.Qa=!0;a.cj=!0;a.mf=!1;break;case "ADD":a.rb=!0;a.hf=!1;a.Qa=!1;a.cj=!1;a.mf=!1;break;case "OPAQUE":a.rb=!1;a.hf=!1;a.Qa=!0;a.cj=!1;a.mf=!1;break;default:V.K("Unknown alpha blend mode: "+b.ib)}}function v(a,b){for(var c=[],d=b.length,e=0;e<d;e++){var f=
b[e];1==f[a]&&f.texture&&f.texture.J&&c.push(f)}return c}function r(a,b){var c=b.gn;a.reflect_factor=c.reflect_factor;a.Fh[0]=c.fresnel;a.Fh[1]=1-c.fresnel_factor/5}function H(a,b){var c,d=0;switch(b.bf){case "PHONG":case "COOKTORR":c=b.mn;break;case "WARDISO":c=b.Hx;break;case "TOON":c=b.Ix;d=b.Jx;break;case "BLINN":c=b.Gx;d=b.mn;break;default:ha.error("unsupported specular shader: "+b.bf+' (material "'+b.name+'")'),c=b.mn}a.Fe[0]=b.Ls;a.Fe[1]=c;a.Fe[2]=d}function E(a,b){switch(b.Te){case "LAMBERT":a.zd[0]=
0;a.zd[1]=0;break;case "OREN_NAYAR":a.zd[0]=b.fx;a.zd[1]=0;break;case "FRESNEL":a.zd[0]=b.Lu;a.zd[1]=b.Mu;break;case "MINNAERT":a.zd[0]=b.Eu;a.zd[1]=0;break;case "TOON":a.zd[0]=b.Nu;a.zd[1]=b.Ou;break;default:ha.error("unsupported diffuse shader: "+b.Te+' (material "'+b.name+'")'),a.zd[0]=0,a.zd[1]=0}}function w(a,b,c,e){if(!b.Eg||b.ue)return!1;var f;switch(e){case "MAIN":U(a,"main.glslv","main.glslf");f=!1;break;case "GLOW":U(a,"main.glslv","main.glslf");f=!0;break;case "SHADOW":U(a,"shadow.glslv",
"shadow.glslf");f=!1;break;case "COLOR_ID":U(a,"color_id.glslv","color_id.glslf"),f=!1}c=aa.bF(b.Md,b.Jc,e,{VC:c.active_vcol_name,UC:c.active_uv_name});if(!c.wa)return ha.error('Failed to create node graph for material "'+b.name+'", disable nodes'),F(a,b),!0;a.ie=c.id;a.wb=!0;A(a,"NODES",1);A(a,"DOUBLE_SIDED_LIGHTING",b.Lp?1:0);L(a,"a_position");b.my&&L(a,"a_orco_tex_coord");d(a,b);a.Fa=b.Fa;a.nd=b.nd;f?(A(a,"ALPHA",1),A(a,"ALPHA_CLIP",0)):(A(a,"ALPHA","OPAQUE"===b.ib?0:1),A(a,"ALPHA_CLIP","CLIP"===
b.ib?1:0));a.ai=b.Sj&&"OPAQUE"!=b.ib&&"CLIP"!=b.ib&&"ALPHA_ANTIALIASING"!=b.ib;a.Ad=b.Ad;a.xd=b.xd;r(a,b);b.Mr?A(a,"WETTABLE",1):A(a,"WETTABLE",0);var g=null,h=!1;Z.ea(c.wa,function(c,d){switch(d.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var e=d.data.name,f=d.data.value;a.Vi||(a.Vi={});a.Vi[f]=e;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":e=d.data.name;a.Pc[e]={Dm:!0,src:[{name:d.data.value}]};f=0;if("GEOMETRY_VC"==d.type)f=
7;else for(var k=0;k<d.outputs.length;k++){var l="RGB".indexOf(d.outputs[k].identifier);-1<l&&(f|=1<<2-l)}a.Pc[e].src[0].ah=f;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":L(a,"a_tbn");break;case "TEX_COORD_OB":A(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":A(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":d.data.value.oe&&(A(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&L(a,"a_shade_tangs"));L(a,"a_tbn");h=!0;break;case "BSDF_BEGIN":h=
!0;L(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":e=d.data.name;f=d.data.Cq;k=d.data.value;Q(a,k,e,f);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":A(a,"CALC_TBN_SPACE",1);L(a,"a_tbn");d.data&&(e=d.data.name,f=d.data.Cq,k=d.data.value,Q(a,k,e,f));break;case "NORMAL_MAP":L(a,"a_tbn");switch(Number(d.Ya[0][1])){case aa.nL:A(a,"CALC_TBN_SPACE",1);break;case aa.mL:case aa.lL:A(a,"USE_MODEL_TSR",
1)}break;case "LAMP":d.data&&(a.Pm=d.data);break;case "B4W_REFRACTION":a.rb?a.Qj=!0:(a.Qj=!1,ha.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));A(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":g||(g=d.data.Oa);break;case "PARTICLE_INFO":"PARTICLES"==a.type&&d.data&&(a.ds=d.data);break;case "VECT_TRANSFORM":switch(Number(d.Ya[1][1])){case aa.ND:A(a,"USE_MODEL_TSR_INVERSE",1);break;case aa.MD:A(a,"USE_VIEW_TSR",1);break;case aa.LD:A(a,"USE_MODEL_TSR",
1);break;case aa.KD:A(a,"USE_MODEL_TSR",1);A(a,"USE_VIEW_TSR",1);break;case aa.JD:A(a,"USE_VIEW_TSR_INVERSE",1);break;case aa.ID:A(a,"USE_MODEL_TSR_INVERSE",1),A(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":A(a,"USE_MODEL_TSR",1);a.Xo[1]=b.Li;a.Xo[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":A(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":A(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":L(a,"a_tbn");pa.qA()?A(a,"USE_DERIVATIVES_EXT",1):ha.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+
b.name+'" material.');break;case "BSDF_TRANSPARENT":a.rb=!0;a.Qj=!0;break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":A(a,"USE_BSDF_SKY_DIM",1),pa.nG()&&A(a,"USE_TEXTURE_LOD_EXT",1)}});g&&Q(a,g,"u_nodes_texture");h||(a.yc=!0);f=a.eb.Ze=aa.Tq(c.wa);C(c.wa,a);c=a.Gf;e=a.Ff;for(var k=0;k<f.length;k++){var l=f[k];switch(l.id){case "VALUE":var m=l.Zo[0];if(m)for(var n=0;n<c.length;n+=3)if(c[n]==m){l.Ya.push(["VALUE_ROW_IND",c[n+1]]);l.Ya.push(["VALUE_COL_IND",c[n+2]]);break}break;case "RGB":if(m=l.Zo[0])for(n=
0;n<e.length;n+=2)if(e[n]==m){l.Ya.push(["RGB_IND",e[n+1]]);break}}}A(a,"NUM_VALUES",a.Lh.length/4);A(a,"NUM_RGBS",a.je.length);return!0}function n(a,b){var c=b.J.Ol;if(""!=c.ie){a.wb=!0;a.ie=c.ie;var d=aa.wv(c.ie).wa;if(d){var e=null;Z.ea(d,function(b,c){switch(c.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":Q(a,c.data.value,c.data.name,c.data.Cq);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":e||(e=c.data.Oa);break;case "VECT_TRANSFORM":switch(Number(c.Ya[1][1])){case aa.ND:A(a,
"USE_MODEL_TSR_INVERSE",1);break;case aa.MD:A(a,"USE_VIEW_TSR",1);break;case aa.LD:A(a,"USE_MODEL_TSR",1);break;case aa.KD:A(a,"USE_MODEL_TSR",1);A(a,"USE_VIEW_TSR",1);break;case aa.JD:A(a,"USE_VIEW_TSR_INVERSE",1);break;case aa.ID:A(a,"USE_MODEL_TSR_INVERSE",1),A(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":A(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":A(a,"USE_VIEW_TSR_INVERSE",1)}});e&&Q(a,e,"u_nodes_texture");c=a.eb.Ze=aa.Tq(d);C(d,a);for(var d=a.Gf,f=a.Ff,g=0;g<c.length;g++){var h=
c[g];switch(h.id){case "VALUE":var k=h.Zo[0];if(k)for(var l=0;l<d.length;l+=3)if(d[l]==k){h.Ya.push(["VALUE_ROW_IND",d[l+1]]);h.Ya.push(["VALUE_COL_IND",d[l+2]]);break}break;case "RGB":if(k=h.Zo[0])for(l=0;l<f.length;l+=2)if(f[l]==k){h.Ya.push(["RGB_IND",f[l+1]]);break}}}A(a,"NUM_VALUES",a.Lh.length/4);A(a,"NUM_RGBS",a.je.length)}else ha.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),F(a,b.world.name)}}function C(a,b){var c=[],d=[],e=[],f=[];k(a,c,d,e,f);b.Lh=c;b.Gf=
d;b.je=e;b.Ff=f}function k(a,b,c,d,e){Z.ea(a,function(a,f){if("VALUE"==f.type){var g=""+f.name;b.push(f.outputs[0].Ia);var h=c.length/3;c.push(g,parseInt(h/4),parseInt(h%4))}else"RGB"==f.type&&(g=""+f.name,h=f.outputs[0].Ia.slice(0,3),d.push(h[0],h[1],h[2]),e.push(g,e.length/2))});a=b.length+4-b.length%4;for(var f=b.length;f<a;f++)b.push(0)}function F(a,b){switch(a.type){case "SHADOW":U(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":U(a,"color_id.glslv","color_id.glslf");break;default:U(a,
"main.glslv","main_stack.glslf")}A(a,"SHADELESS",1);L(a,"a_position");L(a,"a_tbn");xa.set(1,0,1,1,a.lc);b&&(A(a,"ALPHA","OPAQUE"===b.ib?0:1),A(a,"ALPHA_CLIP","CLIP"===b.ib?1:0),A(a,"VERTEX_COLOR",0),a.nd=b.nd,d(a,b),a.Fa=b.Fa);return!0}function u(a,b){if(b&&(b.Bi||b.ue))return!1;U(a,"debug_view.glslv","debug_view.glslf");L(a,"a_position");L(a,"a_tbn");L(a,"a_polyindex");a.Qa=!0;sa.set(0,0,0,a.wireframe_edge_color);return!0}function g(a,b){a.de=b.de;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==
a.type?(b.Tk?A(a,"AU_QUALIFIER","GLSL_IN"):A(a,"AU_QUALIFIER","uniform"),A(a,"STATIC_BATCH",0)):(A(a,"AU_QUALIFIER","GLSL_IN"),A(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(pa.qA()?A(a,"WIREFRAME_QUALITY",1):A(a,"WIREFRAME_QUALITY",0),a.rj?(A(a,"DEBUG_SPHERE",1),a.Hu?A(a,"DEBUG_SPHERE_DYNAMIC",1):A(a,"DEBUG_SPHERE_DYNAMIC",0)):A(a,"DEBUG_SPHERE",0),A(a,"ALPHA",1));b.ef&&"PARTICLES"!=a.type&&!b.Tk&&(a.ef=b.ef);b.Ke?(""!==b.Jj?(a.Pc.a_bending_col_main={Dm:!0,src:[{name:b.Jj,ah:4}]},L(a,"a_bending_col_main"),
""!==b.Se.TA&&""!==b.Se.SA&&""!==b.Se.AB?(a.Pc.a_bending_col_detail={Dm:!0,src:[{name:b.Se.TA,ah:4},{name:b.Se.SA,ah:2},{name:b.Se.AB,ah:1}]},L(a,"a_bending_col_detail"),L(a,"a_tbn"),A(a,"DETAIL_BEND",1)):A(a,"DETAIL_BEND",0),A(a,"MAIN_BEND_COL",1)):A(a,"MAIN_BEND_COL",0),b.cm?A(a,"BEND_CENTER_ONLY",1):A(a,"BEND_CENTER_ONLY",0),A(a,"WIND_BEND",1)):A(a,"WIND_BEND",0);A(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.yq|0);b.Kg?A(a,"BILLBOARD",1):A(a,"BILLBOARD",0);b.Kg&&b.Tk?A(a,"HAIR_BILLBOARD",1):A(a,"HAIR_BILLBOARD",
0);b.zq?A(a,"BILLBOARD_SPHERICAL",1):A(a,"BILLBOARD_SPHERICAL",0);switch(b.Aq){case "RANDOM":A(a,"BILLBOARD_RANDOM",1);A(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":A(a,"BILLBOARD_RANDOM",0);A(a,"BILLBOARD_JITTERED",1);break;default:A(a,"BILLBOARD_RANDOM",0),A(a,"BILLBOARD_JITTERED",0)}b.Nc&&J.Kt?A(a,"DYNAMIC_GRASS",1):A(a,"DYNAMIC_GRASS",0);a.Nc=b.Nc;"PARTICLES"!=a.type&&(a.ve=b.ve);a.af=b.af;a.Ee=b.Ee;a.Td=b.Td&&!a.yc&&!(a.rb&&J.Rz);J.zs?("MAIN"==a.type&&a.Td||"SHADOW"==a.type)&&A(a,"RGBA_SHADOWS",
1):A(a,"RGBA_SHADOWS",0);a.le=b.le;a.Rd=b.Rd;a.Qd=b.Qd;a.Xo[0]=b.Li;a.pg=b.pg;a.qg=b.qg;a.Hj=b.Hj;a.Ij=b.Ij;a.ce=b.ce;a.Nd=b.Nd;b.Vk?(L(a,"a_influence"),A(a,"SKINNED",1),J.tx?(A(a,"DISABLE_TANGENT_SKINNING",1),A(a,"FRAMES_BLENDING",0)):(A(a,"DISABLE_TANGENT_SKINNING",0),b.zm?A(a,"FRAMES_BLENDING",1):A(a,"FRAMES_BLENDING",0)),A(a,"MAX_BONES",b.Jh)):(A(a,"SKINNED",0),A(a,"FRAMES_BLENDING",0),A(a,"DISABLE_TANGENT_SKINNING",0));b.ad?(A(a,"VERTEX_ANIM",1),J.eK?A(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):
A(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):A(a,"VERTEX_ANIM",0);b.Vk&&b.ad&&V.K("Skinning and vertex animation are mutually exlusive")}}function D(a,b,c){if(b.length){for(var d=fa.yv(b,J.ssao&&c.b4w_enable_ssao),e=a.eb,f=a.Pm,g=0,h=0;h<a.eb.Ze.length;h++){var l=a.eb.Ze[h];if("LIGHTING_LAMP"==l.id){var k=b[g++%b.length],m=k.Db,n=fa.Da(k,c);if("SPOT"==m.type||"POINT"==m.type)var p=Math.cos(m.nn/2);if("SPOT"==m.type)var r=m.Ns*(1-p);k=d.indexOf(k);l.Ya=[["LAMP_TYPE",m.type],["LAMP_IND",
n.Ur],["LAMP_SPOT_SIZE",ba.X(p||.01)],["LAMP_SPOT_BLEND",ba.X(r||.01)],["LAMP_LIGHT_DIST",ba.X(m.distance)],["LAMP_USE_SPHERE",m.TC?1:0],["LAMP_SHADOW_MAP_IND",k]]}else if("LAMP"==l.id&&f)for(var n=l.Ya[0][1],q=0;q<b.length;q++)if(k=b[q],f[k.Jc]==n){m=k.Db;if("SPOT"==m.type||"POINT"==m.type)p=Math.cos(m.nn/2);"SPOT"==m.type&&(r=m.Ns*(1-p));l.Ya.push(["LAMP_TYPE",m.type],["LAMP_SPOT_SIZE",ba.X(p||.01)],["LAMP_SPOT_BLEND",ba.X(r||.01)],["LAMP_LIGHT_DIST",ba.X(m.distance)],["LAMP_USE_SPHERE",m.TC?1:
0])}}if(f){c=0;for(var u in f)c++;a.Io=new Float32Array(3*c);a.Pr=new Float32Array(3*c);a.Or=new Float32Array(3*c);ba.oa(e,"NUM_LAMP_LIGHTS",c);for(h=0;h<b.length;h++)B(a,b[h])}}}function B(a,b){if(b.Jc in a.Pm){var c=a.Pm[b.Jc],d=Ca.get_trans_view(b.A.D);a.Io.set(d,3*c);a.Pr.set(b.Db.direction,3*c);a.Or.set(b.Db.Rq,3*c)}}function N(a,b){for(var c=0;c<b.length;c++){var d=b[c].settings.b4w_vcol_from_name,e=b[c].settings.b4w_vcol_to_name;""!==d&&""!==e&&(a.Pc[d]={Dm:!1,src:[{name:d,ah:7}]})}}function L(a,
b){var c=a.oj;-1==c.indexOf(b)&&c.push(b);a.oj=c.sort()}function A(a,b,c){ba.oa(a.eb,b,c)}function G(a,b){if("PHYSICS"==a.type)"NAVMESH"==a.zb?a.ra=la.lJ(b,la.Gn,[]):(0<b.vb.length&&la.QV(b,b.la[0]),a.Vd=b);else{var c=a.Bh;a.Iv&&"PARTICLES"!=a.type&&(b=la.qQ(b));a.yy&&(b=da.NQ(a.zy,a.Ay,a.xy));c=la.lJ(b,c,a.Pc);a.ra=c;a.ve||a.hf||a.ef||(c.fe=null,c.kc.length=0);c=b.la.length;a.num_vertices=b.Wa*c;var d;a:switch(a.Bh){case la.Gn:case la.cq:case la.tt:d=!0;break a;default:d=!1}d?la.oS(b)?a.num_triangles=
b.za.length/3*c:a.num_triangles=b.Wa/3*c:a.num_triangles=0}}function z(a,b,c,d,f,h,k,l,m,n,p,r){var q=a.Ha,u=[],v=l.b4w_dynamic_grass;if(!n&&v)return u;for(var M="INSTANCE"==l.b4w_wind_bend_inheritance,w="INSTANCE"==l.b4w_shadow_inheritance,y="INSTANCE"==l.b4w_reflection_inheritance,D=[],B=[],z=0;z<f.length;z++){var t=f[z].Ha.A,C=fa.yz(b);C.Kg=l.b4w_hair_billboard;C.Aq=l.b4w_hair_billboard_type;C.zq="SPHERICAL"==l.b4w_hair_billboard_geometry;C.Nc=v;C.Tk=!0;M?(C.Ke=t.Ke,C.En=t.En,C.Uf=t.Uf,C.yf=t.yf,
C.Jj=t.Jj,C.xf=t.xf,C.sf=t.sf,C.Tf=t.Tf,C.Se=t.Se,C.cm=!1):(C.Ke=q.A.Ke,C.En=q.A.En,C.Uf=q.A.Uf,C.yf=q.A.yf,C.Jj=q.A.Jj,C.xf=q.A.xf,C.sf=q.A.sf,C.Tf=q.A.Tf,C.Se=q.A.Se,C.cm=!0);w?(C.af=t.af,C.Ee=t.Ee,C.Td=t.Td):(C.af=q.A.af,C.Ee=q.A.Ee,C.Td=q.A.Td);y?(C.le=t.le,C.Rd=t.Rd,C.Qd=t.Qd,C.ce=t.ce,C.Nd=t.Nd,C.Rh=t.Rh):(C.le=q.A.le,C.Rd=q.A.Rd,C.Qd=q.A.Qd,C.ce=q.A.ce,C.Nd=q.A.Nd,C.Rh=q.A.Rh);D.push(C);var ea=k[z];ea||(ea=new Float32Array);r&&V.Tv(m.seed,p);var F=new Float32Array(3),E=new Float32Array([0,
0,0,1]),G=[],H=Ga.KE(J.WA)&&!l.b4w_initial_rand_rotation&&!l.b4w_hair_billboard,ya=4;H&&(ya=8);for(var qa=0;qa<ea.length;qa+=ya){F[0]=ea[qa];F[1]=ea[qa+1];F[2]=ea[qa+2];var R=ea[qa+3]*Ca.get_scale(t.D);if(l.b4w_initial_rand_rotation){switch(l.b4w_rotation_type){case "XYZ":var va=new Float32Array([V.hh(p),V.hh(p),V.hh(p)]);sa.normalize(va,va);break;case "Z":va=new Float32Array([0,0,1]);break;default:V.K("Unsupported random rotation type: "+l.b4w_rotation_type)}W.setAxisAngle(va,l.b4w_rand_rotation_strength*
(2*Math.PI*V.hh(p)-Math.PI),E)}else if(H&&(E.set(ea.subarray(qa+4,qa+8)),V.LB(E,E),!l.use_whole_group))if(l.use_rotation_dupli){var L=Ca.get_quat_view(t.D);W.multiply(E,L,E)}else W.multiply(E,ta,E);var X=Ca.set_sep(F,R,E,Ca.create());G.push(X)}B.push(G)}for(var K={},O=0,z=0;z<f.length;z++)for(var Ka=f[z].Ha.nc,qa=0;qa<Ka.length;qa++)Ka[qa].name in K?K[Ka[qa].name]++:(K[Ka[qa].name]=1,O++);for(var O=O?O:1,N={},z=0;z<f.length;z++){var Aa=f[z],Q=h[z],C=D[z],T={};C.Ke&&(T.au_wind_bending_amp=[C.Tf],T.au_wind_bending_freq=
[C.Uf],T.au_detail_bending_freq=[C.yf],T.au_detail_bending_amp=[C.xf],T.au_branch_bending_amp=[C.sf],C.Tf=0,C.Uf=0,C.yf=0,C.xf=0,C.sf=0);G=B[z];if(G.length){for(var U=Aa.data,Ka=Aa.Ha.nc,ba=Array(Ka.length),Pa=Array(Ka.length),qa=0;qa<Ka.length;qa++)if(!ra(q,qa)&&!la.wG(U,qa))for(var ua=0;ua<Q.length;ua++){var da=Q[ua],Ea=e(da),Fa=Ka[qa];"MAIN"==da?ba[qa]=Ea:"DEBUG_VIEW"==da&&(Pa[qa]=Ea);Ea.Pq=a.b4w_cluster_data.cluster_id;if(I(Ea,Fa)&&x(Ea,Fa,U)){"SHADOW"==da&&ba[qa]&&(Ea.yc=ba[qa].yc);Ea.Bh=la.Gn;
g(Ea,C);Ea.cl=ga(Ea,C,l.uuid);Ea.tj=a.b4w_do_not_cull||l.b4w_dynamic_grass;"MAIN"==Ea.type&&(Ea.gg=a.b4w_caustics);A(Ea,"DISABLE_FOG",("COLOR_ID"!=da&&"SHADOW"!=da&&a.b4w_disable_fogging)|0);"JITTERED"==l.b4w_hair_billboard_type&&(Ea.aw=l.b4w_hair_billboard_jitter_amp,Ea.cw=l.b4w_hair_billboard_jitter_freq);v&&(Ea.Cv=l.b4w_dynamic_grass_scale_threshold);M||(delete Ea.Pc.a_bending_col_main,delete Ea.Pc.a_bending_col_detail);var ca=la.av(U,qa,Ea.oj,b.hi,Ea.Pc,Ea.Vi),ja=q.A.D,Ya=!0;if(1<K[Fa.name]){var za=
0,Y;for(Y in ca.la)za++;Ya=ca.za.length*G.length*za*K[Fa.name]>2E5*O}var ia=J.YD&&Ya&&"PHYSICS"!=Ea.type;if(ia){Ea.FG=l.use_whole_group?2:1;var Z=la.pO(ca);la.AE(ca,Z,G);Z.We={Vs:G,rC:ja,dJ:"STATIC"==b.type,Qx:T,$o:{},Su:v};if(C.Ke&&C.cm){var aa=sa.fromValues(0,0,0);Ca.transform_vec3(aa,q.A.D,aa);for(var xa=[],pa=0;pa<G.length;pa++)xa.push(aa[0],aa[1],aa[2]);Z.We.$o.a_emitter_center={oc:3,data:xa}}la.AE(ca,ca,G);"STATIC"==b.type&&la.wN(Z.Zc,ja)}else{var ma=Z=la.ZS(ca,T,G),Oa=G;ma.xa.au_center_pos=
new Float32Array(3*ma.Wa);for(var Qa=Oa.length,Ma=ma.Wa/Qa,na=0;na<Qa;na++)for(var La=Oa[na],Na=3*Ma*na,Ra=0;Ra<Ma;Ra++)ma.xa.au_center_pos[Na+3*Ra]=La[0],ma.xa.au_center_pos[Na+3*Ra+1]=La[1],ma.xa.au_center_pos[Na+3*Ra+2]=La[2];Z=ma;if(C.Ke&&C.cm){var Ua=Z,wa=q.A.D;Ua.xa.a_emitter_center=new Float32Array(3*Ua.Wa);var Ia=sa.fromValues(0,0,0);Ca.transform_vec3(Ia,wa,Ia);for(var wb=0;wb<Ua.Wa;wb++)Ua.xa.a_emitter_center[3*wb]=Ia[0],Ua.xa.a_emitter_center[3*wb+1]=Ia[1],Ua.xa.a_emitter_center[3*wb+2]=
Ia[2];Z=Ua}}var zc=l.b4w_vcol_from_name,oc=l.b4w_vcol_to_name,Hc=Ea,xb=c,Eb=!M,tb=U,nb=[];if(""!==zc&&""!==oc){var Kb,kd=void 0,Oc=oc,fb=Hc.Pc,Pc=[];for(kd in fb)for(var bc=fb[kd].src,Ic=0,cc=0;cc<bc.length;cc++){var Yc=bc[cc].ah;Oc==bc[cc].name&&Pc.push(kd,Yc,Ic);Ic+=V.hn(Yc)}Kb=Pc;if(0<Kb.length)for(var Ub=0;Ub<Kb.length;Ub+=3)nb.push({mr:zc,Uu:7,Sw:Kb[Ub],Tw:Kb[Ub+1],Ru:Kb[Ub+2]});else la.OR(Hc.oj,"a_color")&&oc==tb.active_vcol_name&&nb.push({mr:zc,Uu:7,Sw:"a_color",Tw:7,Ru:0})}Eb&&("a_bending_col_main"in
xb&&nb.push({mr:"a_bending_col_main",Uu:4,Sw:"a_bending_col_main",Tw:4,Ru:0}),"a_bending_col_detail"in xb&&nb.push({mr:"a_bending_col_detail",Uu:7,Sw:"a_bending_col_detail",Tw:7,Ru:0}));for(var Pb=Z,yb=G,Ac=d,kb=nb,Jc=Ea.Pc,pc=ia,Qc=!1,Fb=0;Fb<kb.length;Fb++){var Lb=kb[Fb].mr,Bc=Ac.xa[Lb];if(Bc&&0<Bc.length){Qc=!0;break}}if(pc)var qc=Pb.We.$o;if(Qc){var qb,Qb=q.A.va,ub=Ac.la[0].a_position,Ab=yb,Sa=N,rc=new Float32Array(3),Rb=new Float32Array(3),dc=new Uint32Array(Ab.length);if(!("verts_indices"in
Sa)){Sa.mj=new Float32Array(3);Sa.gj=new Float32Array(3);Sa.WC=new Uint32Array(ub.length/3);Sa.as=new Uint32Array(ub.length/3);Sa.mj[0]=(Qb.max_x-Qb.min_x)/20;Sa.mj[1]=(Qb.max_y-Qb.min_y)/20;Sa.mj[2]=(Qb.max_z-Qb.min_z)/20;Sa.gj[0]=Qb.min_x;Sa.gj[1]=Qb.min_y;Sa.gj[2]=Qb.min_z;for(var cb=0;cb<ub.length/3;cb++){var Vb=ub[3*cb+1],Cc=ub[3*cb+2],gb=V.trunc((ub[3*cb]-Sa.gj[0])/Sa.mj[0]),Rc=V.trunc((Vb-Sa.gj[1])/Sa.mj[1]),Kc=V.trunc((Cc-Sa.gj[2])/Sa.mj[2]),gb=V.clamp(gb,0,19),Rc=V.clamp(Rc,0,19),Kc=V.clamp(Kc,
0,19);Sa.WC[cb]=cb;Sa.as[cb]=Kc*Math.pow(20,2)+20*Rc+gb}la.yV(Sa.as,Sa.WC,la.Ty,!0);Sa.yn=new Uint32Array(Math.pow(20,3));for(cb=0;cb<Sa.as.length;cb++)Sa.yn[Sa.as[cb]]++;delete Sa.as;for(cb=1;cb<Sa.yn.length;cb++)Sa.yn[cb]+=Sa.yn[cb-1]}for(var sc=0;sc<Ab.length;sc++){rc[0]=Ab[sc][0];rc[1]=Ab[sc][1];rc[2]=Ab[sc][2];for(var Sb=1E10,Sc=-1,dd=V.trunc((rc[0]-Sa.gj[0])/Sa.mj[0]),ed=V.trunc((rc[1]-Sa.gj[1])/Sa.mj[1]),Gb=V.trunc((rc[2]-Sa.gj[2])/Sa.mj[2]),dd=V.clamp(dd,0,19),ed=V.clamp(ed,0,19),Gb=V.clamp(Gb,
0,19),Dc=Gb*Math.pow(20,2)+20*ed+dd,yd=Sa.yn[Dc],ec=0==Dc?0:Sa.yn[Dc-1];ec<yd;ec++){var db=Sa.WC[ec];Rb[0]=ub[3*db];Rb[1]=ub[3*db+1];Rb[2]=ub[3*db+2];sa.sub(Rb,rc,Rb);var fc=sa.sqrLen(Rb);fc<=Sb&&(Sb=fc,Sc=db)}if(-1==Sc)for(ec=0;ec<ub.length/3;ec++)Rb[0]=ub[3*ec],Rb[1]=ub[3*ec+1],Rb[2]=ub[3*ec+2],sa.sub(Rb,rc,Rb),fc=sa.sqrLen(Rb),fc<=Sb&&(Sb=fc,Sc=ec);dc[sc]=Sc}qb=dc;for(var Wb=Pb.Wa/yb.length,Fb=0;Fb<kb.length;Fb++){var eb=kb[Fb].Sw,lb=kb[Fb].Tw,Lb=kb[Fb].mr,gc=kb[Fb].Uu,Bc=Ac.xa[Lb];switch(eb){case "a_bending_col_main":var Zc=
1;break;case "a_bending_col_detail":Zc=3;break;case "a_color":Zc=3;break;default:for(var hc=Zc=0;hc<Jc[eb].src.length;hc++)Zc+=V.hn(Jc[eb].src[hc].ah)}if(Bc&&0<Bc.length){var $c=V.hn(gc),$d=V.hn(lb),fd=gc&lb,Kd=V.lI(fd);fd!=lb&&ha.error("Wrong color extraction from "+Lb+" to "+eb+".");if(pc)for(qc[eb]={oc:Zc,data:[]},hc=0;hc<yb.length;hc++)for(ld=qb[hc],Ld=ld*$c,Zb=0;Zb<Kd.length;Zb++)Kd[Zb]&&(ad=V.gp(gc,Zb),qc[eb].data.push(Bc[Ld+ad]));else{if("a_bending_col_main"==eb||"a_bending_col_detail"==eb)Pb.xa[eb]=
new Float32Array(Pb.Wa*$d);for(hc=0;hc<yb.length;hc++){var ld=qb[hc],Ld=ld*$c,Qd=hc*Wb*Zc;if(-1!=ld)for(var sd=0;sd<Wb;sd++)for(var ae=sd*Zc,Zb=0;Zb<Kd.length;Zb++)if(Kd[Zb]){var ad=V.gp(gc,Zb);Pb.xa[eb][Qd+ae+(kb[Fb].Ru+V.gp(lb,Zb))]=Bc[Ld+ad]}}}}else Pb.xa[eb]=new Float32Array(0)}}Z=Pb;A(Ea,"USE_INSTANCED_PARTCLS",Z.We?1:0);S(Ea);u.push({Aa:Ea,ug:b,Xt:C,Vd:Z,dh:[Fa.name],me:[a]})}}for(qa=0;qa<Pa.length;qa++)Pa[qa]&&(Pa[qa].ao=ba[qa].id,S(Pa[qa]))}}return u}function I(a,b){var c=!0;"NODES_GLOW"==
a.type&&(c=aa.IE(b));return c}function S(a){m(a,function(a){a.id=0;a.id=V.BE(a)})}function m(a,b){for(var c=null,d=null,e=[],f=0;f<a.ma.length;f++){var g=a.ma[f],h=g.Lg;h&&(c||(c={}),c[f]=h,g.Lg=null);if(h=g.hb)d||(d={}),d[f]=h,g.hb=null;e.push(g.IH);g.IH=0}g=a.sb;a.sb=null;h=a.ff;a.ff=null;var l=a.ra;a.ra=null;var k=a.Vd;a.Vd=null;b(a);a.ra=l;a.Vd=k;a.ff=h;a.sb=g;if(c)for(f in c)a.ma[f].Lg=c[f];if(d)for(f in d)a.ma[f].hb=d[f];for(f=0;f<a.ma.length;f++)a.ma[f].IH=e[f]}function K(a,b,c,d){var f=e("DEBUG_VIEW");
U(f,"debug_view.glslv","debug_view.glslf");f.rj=!0;f.Qa=!0;f.cl=ga(f,a,b);f.Hu=c;g(f,a);S(f);if(d.Hl){a=d.sb.qf;var h=sa.create();b=da.fA(1,h);c=sa.fromValues(sa.length(a.Sa),sa.length(a.Ta),sa.length(a.Ua));la.qI(b,c,h);var h=sa.normalize(a.Sa,na),l=sa.normalize(a.Ta,Y),k=sa.normalize(a.Ua,ya);!c[0]&&c[1]&&c[2]?sa.cross(l,k,h):!c[1]&&c[0]&&c[2]?sa.cross(k,h,l):!c[2]&&c[0]&&c[1]&&sa.cross(h,l,k);c=V.fQ(h,l,k,X);ma.invert(c,c);c=W.fromMat3(c,Ka);Ca.set_quat(c,va);Ca.set_scale(1,va);Ca.set_trans(a.U,
va);la.uC(b,va)}else a=d.sb.Pe,b=da.fA(a.ab,a.U);T.hF(d.sb,f.sb);la.Px(b,1,!0);b.xa.a_polyindex=la.$u(b);G(f,b);return f}function U(a,b,c){a.eb.Pf=b;a.eb.we=c;ba.NU(a.eb)}function Q(a,b,c,d){d=d||"";-1==a.Mf.indexOf(c)&&(a.ma.push(b),a.Mf.push(c),a.rf.push(d));a.yb&&O.fE(a)}function R(a){a.eb||V.K("No shaders info for batch "+a.name);a.yb=ba.dR(a.eb);var b=a.eb;if(b.status===ba.HD){var c=a.yb.attributes,d=a.ra.Eb,e;for(e in c)d[e]||V.K('missing data for "'+e+'" attribute')}b.status&ba.yK&&ha.error("Texture limit exceeded for shader - "+
b.we+', materials: "'+a.cc.join(", ")+'". Maximum texture count: '+La.dB+", actual texture count: "+b.Wx);b.status&ba.xK&&ha.error("Fragment uniform limit exceeded for shader - "+b.we+', materials: "'+a.cc.join(", ")+'". ');b.status&ba.BK&&ha.error("Vertex uniform limit exceeded for shader - "+b.Pf+', materials: "'+a.cc.join(", ")+'". ');b.status&ba.AK&&ha.error("Vertex attribute limit exceeded for shader - "+b.Pf+', materials: "'+a.cc.join(", ")+'". Maximum attribute count: '+La.eB+", actual attribute count: "+
b.St);b.status&ba.zK&&("MAIN"!=a.type||a.wb||ha.error("Varying limit exceeded for shader - "+a.eb.we+', materials: "'+a.cc.join(", ")+'"'),"MAIN"==a.type&&a.wb||"NODES_GLOW"==a.type)&&(d=c=0,a.Vi&&(c=V.zj(a.Vi)),a.Pc&&(d=V.zj(a.Pc)),ha.error("Varying limit exceeded for node shader - "+a.eb.we+", uv: "+c+", vc: "+d+', materials: "'+a.cc.join(", ")+'"'));b.status&ba.vK&&ha.error("Shader compilation/linking error: "+b.Pf+", "+b.we+', materials: "'+a.cc.join(", ")+'"');return a.eb.status===ba.HD?(O.gN(a.yb),
O.Rt(a),O.fE(a),!0):!1}function ga(a,b,c){return"NAVMESH"==a.zb?c:b.ve?"_odd_id_"+V.CJ():c}function ra(a,b){return 0<=b&&b<a.Xe.Km.length&&a.Xe.Km[b]}var T=t("__boundings"),ia=t("__config"),ha=t("__print"),pa=t("__extensions"),Z=t("__graph"),ma=t("__mat3"),aa=t("__nodemat"),fa=t("__obj_util"),wa=t("__particles"),da=t("__primitives"),W=t("__quat"),Ga=t("__reformer"),O=t("__renderer"),ua=t("__scenegraph"),ba=t("__shaders"),ja=t("__subscene"),ca=t("__textures"),Ca=t("__tsr"),la=t("__geometry"),V=t("__util"),
sa=t("__vec3"),xa=t("__vec4"),J=ia.L,La=ia.zh,Ua=ia.ip,Ia=ia.zG,ta=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),na=new Float32Array(3),Y=new Float32Array(3),ya=new Float32Array(3),Ka=new Float32Array(4),va=Ca.create(),X=ma.create(),Ea={},Fa=new Float32Array(24);a.lN=function(a){return Ea[a]||null};a.mN=function(a,b){Ea[a]=b};a.lO=c;a.YF=function(a,b,c,d){var e;e=a.J.wa;for(var g=[],l=0;l<b.length;l++){var k=b[l],m=k.Ha;m.Kr||g.push.apply(g,f(k,m.A,e))}e=q(g);for(g=0;g<e.length;g++)if(l=e[g].Aa,
l.cc=e[g].dh,G(l,e[g].Vd),D(l,c,a),"STATIC"==e[g].A.type&&"COLOR_ID"!=l.type){var k=V.Ys("%meta%"+l.type+"%"+l.cc.join("%")+"%"),n=fa.Zq(k,"MESH");fa.iT(n,e[g].A);fa.Nt(n,a);fa.bg(n,a,l);d.push(n);if("MAIN"==l.type)for(m=0;m<e[g].me.length;m++)k=e[g].me[m].Ha,k.Wr.push(n)}else k=e[g].me[0].Ha,fa.bg(k,a,l);if(J.debug_view){for(g=0;g<e.length;g++)if(c=e[g].A,"DYNAMIC"==c.type&&(k=e[g].me[0].Ha,l=e[g].Aa,"MAIN"==l.type)){for(var m=fa.Da(k,a),n=m.$,p=!1,m=0;m<n.length;m++)n[m].rj&&(p=!0);p||(c=K(c,k.name,
!0,l),fa.bg(k,a,c))}for(g=0;g<d.length;g++)k=d[g],c=k.A,m=fa.Da(k,a),l=m.$[0],"MAIN"==l.type&&(c=K(c,k.name,!1,l),fa.bg(k,a,c));for(g=0;g<e.length;g++)l=e[g].Aa,"DEBUG_VIEW"==l.type&&(l.Fu=g)}for(g=0;g<b.length;g++)for(m=fa.Da(b[g].Ha,a),n=m.$,m=0;m<n.length;m++)h(n[m]);for(g=0;g<d.length;g++)for(m=fa.Da(d[g],a),n=m.$,m=0;m<n.length;m++)h(n[m])};a.TM=function(a,b,d){var f=a.J.Ol,g=e("MAIN");U(g,"sky.glslv","sky.glslf");g.Dj=!0;g.Qa=!1;if(b.procedural_skydome)A(g,"PROCEDURAL_SKYDOME",1),g.Qu=!0;else{var l=
f.ln,k=ua.Lb(a.J.wa,ja.$d).H.Rb;Q(g,k,"u_sky");l&&(A(g,"WO_SKYTEX",1),l.invert&&A(g,"MTEX_NEGATIVE",1),l.XJ&&A(g,"MTEX_RGBTOINT",1),A(g,"BLENDTYPE",l.sE),l.SJ&&A(g,"WOMAP_BLEND",1),l.TJ&&A(g,"WOMAP_HORIZ",1),l.VJ&&A(g,"WOMAP_ZENUP",1),l.UJ&&A(g,"WOMAP_ZENDOWN",1));f.sn&&A(g,"WO_SKYBLEND",1);f.tn&&A(g,"WO_SKYPAPER",1);f.un&&A(g,"WO_SKYREAL",1)}b.le&&(g.le=!0,b.Rd&&(g.Rd=!0));L(g,"a_position");b=da.QQ();G(g,b);h(g);g.tj=!0;S(g);fa.bg(d,a,g);ua.Lb(a.J.wa,ja.qh)&&(f=c(g),f.type="DEBUG_VIEW",f.zb="",u(f),
A(f,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.xa.a_polyindex=la.$u(b),G(f,b),f.ao=g.id,S(f),fa.bg(d,a,f))};a.xu=function(a,b,d){var e=fa.Da(a,d).$,f=[],g=ua.Lb(b,ja.Zd),h=ua.Lb(b,ja.ud),l=ua.Lb(b,ja.rh);b=ua.Lb(b,ja.Le);for(var k=0;k<e.length;k++){var m=e[k],n=null;"SHADOW"==m.type&&"RECEIVE"==m.zb&&m.af&&(n=c(m),n.zb="CAST");"MAIN"!=m.type&&"PARTICLES"!=m.type||!g&&!h||!m.le||(n=c(m),n.zb="REFLECT",n.Qj=!1,n.hf&&(n.hf=!1,n.Qa=!1),n.Ja=m.Ja);"COLOR_ID"==m.type&&l&&a.A.Xc&&(b&&a.A.pl?(n=c(m),n.zb="OUTLINE"):
m.zb="OUTLINE");n&&(n.Sg=!0,S(n),f.push(n))}for(e=0;e<f.length;e++)fa.bg(a,d,f[e])};a.oK=function(a,b,c){return(b=c*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};a.lX=function(a,b,c){b=c*(b.max_z-b.min_z);if(!b)return 0;a=2*b*a;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/b)};a.nN=function(a){var b=T.Re();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};a.hW=F;a.gW=D;a.UU=B;a.eE=function(a,b){A(a,"CSM_SECTION1",
0);A(a,"CSM_SECTION2",0);A(a,"CSM_SECTION3",0);A(a,"NUM_CAST_LAMPS",0);if(b){A(a,"NUM_CAST_LAMPS",b.Ih.length);J.qw&&A(a,"MAC_OS_SHADOW_HACK",1);for(var c=1;c<b.csm_num;c++)A(a,"CSM_SECTION"+String(c),1);A(a,"SHADOW_TEX_RES",ba.X(b.csm_resolution));A(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?1:0);A(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!J.NE?1:0)}else A(a,"SHADOW_TEX_RES",0),A(a,"CSM_FADE_LAST_CASCADE",0),A(a,"CSM_BLEND_BETWEEN_CASCADES",0)};a.xb=A;a.hd=function(a,b){return ba.kR(a.eb,
b)};a.eW=G;a.fW=S;a.tW=function(a,b){a.sb.Oe=T.fz(b,0,b.length,a.sb.Oe);var c=T.JF(a.sb.Oe,Fa);a.sb.qf=T.uu(c,!0);a.sb.Pe=T.wu(a.sb.qf);a.Hl=T.IG(a.sb.qf,a.sb.Pe)};a.Pt=U;a.vh=Q;a.lU=function(a,b,c){c=a.Mf.indexOf(c);-1<c&&(a.ma[c]=b)};a.bP=function(a,b){var c=e("MAIN");c.rb=!0;xa.set(b[0],b[1],b[2],.5,c.lc);c.Bh=la.cq;G(c,a);U(c,"main.glslv","main_stack.glslf");A(c,"SHADELESS",1);R(c);return c};a.Ic=R;a.XF=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],f=e("LINE");U(f,"line.glslv","line.glslf");
f.rb=!0;f.tj=!0;var g=da.SQ();G(f,g);h(f);fa.Nt(d,a);fa.bg(d,a,f);R(f)}};a.SN=function(a){return a.yb.es.length?a.yb.FB.u_cube_fog?!0:!1:!1};a.LO=function(){var a=e("DEPTH_PACK");a.Fa=!0;a.Qa=!1;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");R(a);return a};a.yu=function(a){var b=e("POSTPROCESSING");U(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":A(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":A(b,
"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":A(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":A(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":A(b,"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":A(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":A(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":A(b,
"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:V.K("Wrong postprocessing effect: "+a)}A(b,"SHADOW_USAGE","NO_SHADOWS");b.Fa=!0;b.Qa=!1;a=da.gd();G(b,a);R(b);return b};a.eP=function(a){var b=e("SSAO");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");A(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.on);A(b,"SSAO_HEMISPHERE",a.tp?1:0);A(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,
177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};c=ca.Ck(ca.sh,!1);c.source="NODE_TEX";ca.at(c,a,0);Q(b,c,"u_ssao_special_tex");R(b);return b};a.fP=function(a){var b=e("SSAO_BLUR");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");A(b,"SSAO_BLUR_DEPTH",a.qp?1:0);A(b,"SHADOW_USAGE","NO_SHADOWS");R(b);return b};a.EO=function(a){var b=
e("COC");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");A(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":A(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":A(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":A(b,"COC_TYPE","COC_COMBINE")}A(b,"SHADOW_USAGE","NO_SHADOWS");R(b);return b};a.MO=function(a){var b=e("DOF");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.H.dof_bokeh?
A(b,"DOF_TYPE","DOF_BOKEH"):(A(b,"DOF_TYPE","DOF_SIMPLE"),A(b,"DEPTH_RGBA",1));A(b,"SHADOW_USAGE","NO_SHADOWS");R(b);return b};a.UO=function(){var a=e("OUTLINE");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");R(a);return a};a.OO=function(){var a=e("GLOW_COMBINE");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");R(a);return a};a.PO=function(a,b,c){var d=e("GOD_RAYS");d.Qa=!1;d.Fa=
!0;var f=da.MQ();G(d,f);U(d,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");A(d,"DEPTH_RGBA",a?1:0);A(d,"WATER_EFFECTS",b?1:0);A(d,"STEPS_PER_PASS",ba.X(c,1));A(d,"SHADOW_USAGE","NO_SHADOWS");R(d);return d};a.QO=function(){var a=e("GOD_RAYS_COM");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");A(a,"SAFARI_CANVAS_ALPHA_HACK",J.pI?1:0);R(a);return a};a.IO=function(a,b){var c=e("SKY");c.Qa=!1;c.Fa=!1;var d=da.nv();
G(c,d);""!=b.xx?(U(c,"skybox.glslv","node_skybox.glslf"),A(c,"IS_WORLD",1),n(c,a)):b.procedural_skydome?(U(c,"skybox.glslv","proc_skybox.glslf"),A(c,"WATER_EFFECTS",1)):(U(c,"skybox.glslv","tex_skybox.glslf"),a&&(d=a.J.Ol,d.zx&&Q(c,ca.xe(d.zx),"u_sky_texture",d.zx.texture.name),d.ln&&A(c,"WO_SKYTEX",1)),b.wx&&A(c,"MTEX_NEGATIVE",1),b.Ex&&A(c,"MTEX_RGBTOINT",1),A(c,"BLENDTYPE",b.vx),b.Ax&&A(c,"WOMAP_BLEND",1),b.Bx&&A(c,"WOMAP_HORIZ",1),b.Dx&&A(c,"WOMAP_ZENUP",1),b.Cx&&A(c,"WOMAP_ZENDOWN",1),b.sn&&
A(c,"WO_SKYBLEND",1),b.tn&&A(c,"WO_SKYPAPER",1),b.un&&A(c,"WO_SKYREAL",1));R(c);return c};a.MM=function(a,b){var c=ua.Lb(a.J.wa,ja.$d);c&&fa.bg(b,a,c.Za[0].La[0].Aa)};a.GO=function(){var a=e("IRRADIANCE");a.Qa=!1;a.Fa=!1;var b=da.nv();G(a,b);U(a,"skybox.glslv","irradiance_skybox.glslf");R(a);return a};a.HO=function(){var a=e("R_CONVOLUTION");a.Qa=!1;a.Fa=!1;var b=da.nv();G(a,b);U(a,"skybox.glslv","r_convolution_skybox.glslf");R(a);return a};a.DO=function(){var a=e("BRDF");a.Qa=!1;a.Fa=!1;var b=da.nv();
G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");R(a);return a};a.zO=function(a){var b=e("ANTIALIASING");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");J.$H?(A(b,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),A(b,"AA_QUALITY",a.kv)):A(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");R(b);return b};a.cP=function(a){var b=e("SMAA"),c=da.gd();G(b,c);U(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");A(b,
"AA_METHOD","AA_METHOD_SMAA_HIGH");A(b,"SMAA_PASS",a);A(b,"SMAA_PREDICATION",0);A(b,"SMAA_REPROJECTION",0);R(b);b.Qa=!1;b.Fa=!0;return b};a.FO=function(){var a=e("COMPOSITING");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");R(a);return a};a.TO=function(){var a=e("MOTION_BLUR");a.Fa=!0;a.Qa=!1;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");R(a);return a};a.gP=function(a){var b=e("STEREO");
b.Fa=!0;b.Qa=!1;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");A(b,"ANAGLYPH","ANAGLYPH"===a?1:0);A(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);A(b,"DISTOR_SCALE",Ia.nonwebvr.CF);R(b);return b};a.RO=function(){var a=e("LUMINANCE");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");R(a);return a};a.AO=function(){var a=e("LUMINANCE");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv",
"postprocessing/luminance_av.glslf");R(a);return a};a.SO=function(a){var b=e("LUMINANCE_X_BLUR");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&ba.oa(b.eb,"ADAPTIVE_BLOOM",1);R(b);return b};a.CO=function(a){var b=e("BLOOM");b.Qa=!1;b.Fa=!0;var c=da.gd();G(b,c);U(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var d="BLUR_PASS_1";else 2==a?d="BLUR_PASS_2":3==a?d="BLUR_PASS_3":4==a?d=
"BLUR_PASS_4":5==a&&(d="BLUR_PASS_5");ba.oa(b.eb,"BLUR_PASS_NUM",d);R(b);return b};a.HP=function(){var a=e("VELOCITY");a.Qa=!1;a.Fa=!0;var b=da.gd();G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");R(a);return a};a.yO=function(){var a=e("ANCHOR_VISIBILITY");a.Qa=!0;a.Fa=!0;a.Bh=la.cq;U(a,"anchors.glslv","anchors.glslf");var b=da.WF(1);G(a,b);A(a,"ANCHOR_NUM",1);R(a);a.Xl=new Float32Array(3);return a};a.WO=function(){var a=e("PERFORMANCE");a.Qa=!1;a.Fa=!0;var b=da.gd();
G(a,b);U(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");R(a);return a};a.dW=function(a,b){var c=b.length/3;if(c!=a.Xl.length/3){var d=da.WF(c);G(a,d);A(a,"ANCHOR_NUM",c);R(a)}a.Xl=b};a.qv=function(a){if(!a.S.length)return null;a=a.S[0];return a.$.length?a.$[0]:null};a.Jk=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&-1!=a[d].cc.indexOf(b))return a[d];return null};a.gb=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&!a[d].Sg&&
-1!=a[d].cc.indexOf(b))return a[d];return null};a.lg=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&a[d].Sg&&-1!=a[d].cc.indexOf(b))return a[d];return null};a.PA=function(a,b,c,d){a=a.S[0].$;for(var e=0;e<a.length;e++){var f=a[e];if(-1!=f.cc.indexOf(b)&&(!d||f.type==d)&&c(f))break}};a.zY=function(a,b){for(var c=a.S[0].$,d=0;d<c.length;d++)if(c[d].type==b)return!0;return!1};a.zr=function(a,b){for(var c=(b?fa.Da(a,b):a.S[0]).$,d=0;d<c.length;d++)if("SKY"==c[d].type)return c[d];
return null};a.WE=function(a){var b=a.ma;a.ma=[];for(var c=0;c<b.length;c++)ca.VE(b[c]);a.ma=b;a.ra&&a.ra.Mg&&la.fO(a.ra);a.Mg&&a.ff.length&&O.iO(a);a.yb&&a.yb.Mg&&ba.hO(a.yb);a.ie&&(b=aa.wv(a.ie))&&b.UE&&aa.gO(a.ie)};a.UQ=ga;a.cleanup=function(){Ea={}}};b4w.module.__nodemat=function(a,t){function e(a,b,h,l,k){var m="";Aa.Pa()&&(m=Aa.get_active().uuid);m=E(b,l,m,k);if(m in Qa)return Qa[m];var p={wa:null,id:m,UE:!0};h||(Na={},Ra=0);if("SHADOW"!=l&&"COLOR_ID"!=l){b=X.create();for(var q=a.nodes,y=0;y<q.length;y++)if(null==T(b,q[y],0,l,k))return Qa[m]=null,p;if(h&&-1==R(a,b,"GROUP_OUTPUT","group"))return p;y=xa(b);k=h?a.links:a.links.slice();if(!J(b,k,y))return p;if(h)return p.wa=b,p;for(y=0;y<k.length;y++){h=k[y];for(var q=g(h.from_node,b),A=g(h.to_node,
b),x=0;x<q.length;x++)for(var B=0;B<A.length;B++){var z=q[x],t=A[B],M=X.$a(b,z),G=X.$a(b,t);if(!V(b,z,t,M,G,h))return Qa[m]=null,p}}u(b);y=!1;k=-1;"GLOW"==l?k=R(a,b,"B4W_GLOW_OUTPUT","material",!0):(k=R(a,b,"OUTPUT","material",!1,!0),-1==k&&(k=R(a,b,"OUTPUT_MATERIAL","material",!1,!0)),-1==k&&(k=R(a,b,"OUTPUT_WORLD","material",!1,!0),y=!0));-1==k&&(b=n(),k=0);D(b);a=X.wl(b,k,X.nk);y?(d(a),v(a,l),r(a),H(a)):(c(a),f(a));C(a);N(a);K(a);F(a,l);Y(a)}else l=e(a,b,h,"MAIN",k),l=X.clone(l.wa,function(a){var b=
Pa.Oq(a);b.inputs=Pa.W(a.inputs);b.outputs=Pa.W(a.outputs);return b}),k=R(a,l,"OUTPUT","material",!1,!0),-1==k&&(k=R(a,l,"OUTPUT_MATERIAL","material",!1,!0)),w(l,k),a=X.wl(l,k,X.nk),C(a);p.wa=a;return Qa[m]=p}function c(a){var c=[];X.ea(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||c.push({Ce:a,node:b})});for(var d=0;d<c.length;++d){var e=c[d].Ce,f=c[d].node,g=X.yj(a);X.uh(a,g,f.data.aT);var h=X.yj(a);X.uh(a,h,f.data.bT);X.Ec(a,g,h,[4,2]);for(var l={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},k=X.zi(a,e),m=[],n=[],p=[],r={},q=0;q<k;q++){var u=X.ng(a,e,q);u in r||(r[u]=0);var v=X.Oc(a,u,e,r[u]++);m.push([u,e,v]);var w=l[v[1]];if(w)switch(w[0]){case "MATERIAL_END":n.push([u,h,[v[0],w[1]]]);break;case "LIGHTING_APPLY":p.push([u,[v[0],w[1]]])}else n.push([u,g,v])}b(a,f.data.value,g,h,p);for(q=0;q<m.length;q++)X.Sh(a,m[q][0],m[q][1],m[q][2]);for(q=0;q<n.length;q++)X.Ec(a,n[q][0],n[q][1],n[q][2]);f=X.vg(a,e);g=[];l=[];k={};for(q=
0;q<f;q++)m=X.Vg(a,e,q),m in k||(k[m]=0),v=X.Oc(a,e,m,k[m]++),g.push([e,m,v]),l.push([h,m,v]);for(q=0;q<g.length;q++)X.Sh(a,g[q][0],g[q][1],g[q][2]);for(q=0;q<l.length;q++)X.Ec(a,l[q][0],l[q][1],l[q][2]);X.If(a,e)}}function b(a,b,c,d,e){var f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=T(a,f,0,null,null),l=g;h(a,c,g,"E");h(a,c,g,"A");h(a,c,g,"D");g=Aa.get_active();g=M.Sb(g,"LAMP",M.DATA_ID_ALL);if(!b.yc)for(var k,m,n,p=0;p<g.length;p++){n=g[p].Db;f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};
k=T(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};m=T(a,f,0,null,null);h(a,l,m,"color");h(a,l,m,"specular");h(a,k,m,"ldir");h(a,c,m,"normal");h(a,c,m,"D");h(a,c,m,"S");h(a,k,m,"lcolorint");h(a,c,k,"shadow_factor");l="SPECULAR_"+b.bf;f={name:l,type:l,use_tangent_shading:b.oe};l=T(a,f,0,null,null);h(a,k,l,"ldir");h(a,k,l,"lfac");h(a,c,l,"normal");h(a,l,m,"sfactor");h(a,k,l,"norm_fac");h(a,c,l,"sp_params");l="HEMI"==n.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+b.Te;f={name:l,type:l,use_tangent_shading:b.oe};
n=T(a,f,0,null,null);h(a,k,n,"ldir");h(a,k,n,"lfac");h(a,c,n,"normal");h(a,k,n,"norm_fac");h(a,n,m,"lfactor");"DIFFUSE_LAMBERT"!=l&&h(a,c,n,"dif_params");for(k=0;k<e.length;k++)X.Ec(a,e[k][0],m,e[k][1]);l=m}h(a,l,d,"color");h(a,l,d,"specular")}function h(a,b,c,d){for(var e=X.$a(a,b),f=-1,g=X.$a(a,c).inputs,h=0;h<g.length;h++)if(d==g[h].identifier){f=h;break}if(-1!=f){for(var l=-1,e=e.outputs,h=0;h<e.length;h++)if(d==e[h].identifier){l=h;break}-1!=l&&(X.Ec(a,b,c,[l,f]),e[l].Ma=!0,g[f].Ma=!0)}}function f(a){var b=
[];X.ea(a,function(a,c){"OUTPUT_MATERIAL"==c.type&&b.push({Ce:a,node:c})});for(var c=0;c<b.length;++c){var d=b[c].Ce,e=b[c].node,f=!1,g=!1,h=X.yj(a);X.uh(a,h,e.data.xT);for(var l=X.zi(a,d),k=[],m=[],n={},p=0;p<l;p++){var r=X.ng(a,d,p);r in n||(n[r]=0);var u=X.Oc(a,r,d,n[r]++);k.push([r,d,u]);switch(u[1]){case 0:f=!0;m.push([r,h,u]);break;case 2:var g=!0,v=X.yj(a);X.uh(a,v,e.data.WP);m.push([r,v,[u[0],0]])}}for(p=0;p<k.length;p++)X.Sh(a,k[p][0],k[p][1],k[p][2]);for(p=0;p<m.length;p++)X.Ec(a,m[p][0],
m[p][1],m[p][2]);X.If(a,d);f?(g&&q(a,h,v),y(a)):(d=X.$a(a,h),a.Z=[0,d],a.Ca=[])}}function q(a,b,c){b=X.wl(a,b,X.nk);var d=x(b);if(d.length){c=X.wl(a,c,X.nk);c=X.clone(c,ra,la);X.ea(c,function(a,b){b.name="displacement%join%"+b.name});X.aE(c,b,[],[]);var e=-1;X.ea(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return e=a,1});for(c=0;c<d.length;c++){var f=d[c],g=X.$a(b,f);h(b,e,f,"Normal");l(g)}}a.Z=b.Z;a.Ca=b.Ca}function l(a){a=a.Ya;for(var b=0;b<a.length;b++){var c=a[b];"USE_NORMAL_IN"==c[0]&&(c[1]=
1)}}function x(a){var b=[];X.ea(a,function(a,c){for(var d=!1,e=c.inputs,f=0;f<e.length;f++)if("Normal"==e[f].identifier){d=!e[f].Ma;break}d&&b.push(a)});return b}function y(a){var b=[];X.ea(a,function(a,c){"OUTPUT_SURFACE"==c.type&&b.push({Ce:a,node:c})});var c=[];b.length&&X.ea(a,function(a,b){"MIX_SHADER"==b.type&&c.push({Ce:a,node:b})});for(var d=0;d<b.length;++d){var e=b[d].Ce,f=b[d].node,g=X.yj(a);X.uh(a,g,f.data.zN);var h=X.yj(a);X.uh(a,h,f.data.AN);X.Ec(a,g,h,[4,2]);for(var l=X.zi(a,e),k=[],
m=[],n={},r=0;r<l;r++){var q=X.ng(a,e,r),u=X.$a(a,q);q in n||(n[q]=0);var v=X.Oc(a,q,e,n[q]++);k.push([q,e,v]);m.push([q,g,v]);if("BSDF_GLOSSY"==u.type||"BSDF_DIFFUSE"==u.type||"MIX_SHADER"==u.type||"EMISSION"==u.type||"BSDF_TRANSPARENT"==u.type)for(m.push([q,g,[1,1]]),m.push([q,g,[2,2]]),m.push([q,g,[3,3]]),m.push([q,g,[4,4]]),m.push([q,g,[5,5]]),m.push([q,g,[6,6]]),m.push([q,g,[7,7]]),m.push([q,g,[8,8]]),m.push([q,g,[9,9]]),m.push([q,g,[10,10]]),q=0;q<c.length;++q)for(var u=c[q].Ce,v=X.zi(a,u),
w=0;w<v;w++){var y=X.ng(a,u,w),A=X.$a(a,y),x=X.Oc(a,y,u,0);0==x[1]||"BSDF_GLOSSY"!=A.type&&"BSDF_DIFFUSE"!=A.type&&"MIX_SHADER"!=A.type&&"EMISSION"!=A.type&&"BSDF_TRANSPARENT"!=A.type||(A=1==x[1]?3:13,m.push([y,u,[1,A]]),m.push([y,u,[2,A+1]]),m.push([y,u,[3,A+2]]),m.push([y,u,[4,A+3]]),m.push([y,u,[5,A+4]]),m.push([y,u,[6,A+5]]),m.push([y,u,[7,A+6]]),m.push([y,u,[8,A+7]]),m.push([y,u,[9,A+8]]),m.push([y,u,[10,A+9]]))}}p(a,f.data.value,g,h);m.push([h,e,[0,0]]);for(r=0;r<k.length;r++)X.Sh(a,k[r][0],
k[r][1],k[r][2]);for(r=0;r<m.length;r++)X.Ec(a,m[r][0],m[r][1],m[r][2])}}function p(a,b,c,d){var e=[],f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=T(a,f,0,null,null),l=g;h(a,c,g,"E");h(a,c,g,"A");h(a,c,g,"D");for(var g=Aa.get_active(),g=M.Sb(g,"LAMP",M.DATA_ID_ALL),k,m,n=0;n<g.length;n++){f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};k=T(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};m=T(a,f,0,null,null);h(a,l,m,"color");h(a,l,m,"specular");h(a,k,m,"ldir");h(a,c,m,"normal");
h(a,c,m,"D");h(a,c,m,"S");h(a,k,m,"lcolorint");h(a,c,k,"shadow_factor");l=b.BN;f={name:l,type:l};l=T(a,f,0,null,null);h(a,k,l,"ldir");h(a,k,l,"lfac");h(a,c,l,"normal");h(a,k,l,"norm_fac");h(a,c,l,"bsdf_params");h(a,l,m,"lfactor");h(a,l,m,"sfactor");for(l=0;l<e.length;l++)X.Ec(a,e[l][0],m,e[l][1]);l=m}h(a,c,d,"bsdf_params");h(a,c,d,"d_color");h(a,c,d,"s_color");h(a,c,d,"e_color");h(a,c,d,"emission");h(a,c,d,"a_color");h(a,c,d,"alpha");h(a,l,d,"color");h(a,l,d,"specular")}function d(a){var b=[];X.ea(a,
function(a,c){"OUTPUT_WORLD"==c.type&&b.push({Ce:a,node:c})});for(var c=0;c<b.length;++c){var d=b[c].Ce,e=b[c].node,f=X.yj(a);X.uh(a,f,e.data.yT);for(var e=X.zi(a,d),g=[],h=[],l={},k=0;k<e;k++){var m=X.ng(a,d,k);m in l||(l[m]=0);var n=X.Oc(a,m,d,l[m]++);g.push([m,d,n]);switch(n[1]){case 0:h.push([m,f,n])}}for(k=0;k<g.length;k++)X.Sh(a,g[k][0],g[k][1],g[k][2]);for(k=0;k<h.length;k++)X.Ec(a,h[k][0],h[k][1],h[k][2]);X.If(a,d)}}function v(a,b){var c=[];X.ea(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=
b.type||c.push({Ce:a,node:b})});if(c.length)for(var d={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},e=0;e<c.length;e++){var f=c[e].Ce,g=c[e].node;d.name=g.name;d.fac=g.inputs[0].Ia;d.fac_is_linked=g.inputs[0].Ma;d.color1_is_linked=g.inputs[1].Ma;d.color2_is_linked=g.inputs[2].Ma;switch(g.type){case "ADD_SHADER":d.type="ADD_WORLD_RGB";break;case "MIX_SHADER":d.type="MIX_WORLD_RGB"}for(var g=T(a,d,0,b,null),h=X.zi(a,f),l=[],k=[],m={},n=0;n<h;n++){var p=X.ng(a,f,n);p in m||(m[p]=0);var r=X.Oc(a,
p,f,m[p]++);l.push([p,f,r]);k.push([p,g,r])}for(n=0;n<l.length;n++)X.Sh(a,l[n][0],l[n][1],l[n][2]);for(n=0;n<k.length;n++)X.Ec(a,k[n][0],k[n][1],k[n][2]);h=X.vg(a,f);l=[];k=[];m={};for(n=0;n<h;n++)p=X.Vg(a,f,n),p in m||(m[p]=0),r=X.Oc(a,f,p,m[p]++),l.push([f,p,r]),k.push([g,p,r]);for(n=0;n<l.length;n++)X.Sh(a,l[n][0],l[n][1],l[n][2]);for(n=0;n<k.length;n++)X.Ec(a,k[n][0],k[n][1],k[n][2]);X.If(a,f)}}function r(a){var b=-1,c=[],d=[],e="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
X.ea(a,function(a,d){switch(e.indexOf(d.type)){case -1:c.push({Ce:a,node:d});break;case 0:b=a}});for(var f=0;f<c.length;f++)for(var g=c[f].Ce,h=X.vg(a,g),l={},k=0;k<h;k++){var m=X.Vg(a,g,k);m in l||(l[m]=0);var n=X.Oc(a,g,m,l[m]++);d.push([g,m,n])}for(f=0;f<d.length;f++)X.Sh(a,d[f][0],d[f][1],d[f][2]);d.length&&(d=X.wl(a,b,X.nk),a.Z=d.Z,a.Ca=d.Ca)}function H(a){var b=-1,c=[],d=[];X.ea(a,function(a,d){switch(d.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var e={Ce:a,node:d};c.push(e);break;case "OUTPUT_WORLD_SURFACE":b=
a,e={Ce:a,node:d},c.push(e)}});for(var e=0;e<c.length;e++)for(var f=c[e].Ce,g=c[e].node,h=X.zi(a,f),l={},k=0;k<h;k++){var m=X.ng(a,f,k),n=X.$a(a,m);m in l||(l[m]=0);var p=X.Oc(a,m,f,l[m]++);"OUTPUT_WORLD_SURFACE"!=g.type&&0==p[1]||"ADD_WORLD_RGB"==n.type||"MIX_WORLD_RGB"==n.type||"BACKGROUND"==n.type||d.push([m,f,p])}for(e=0;e<d.length;e++)X.Sh(a,d[e][0],d[e][1],d[e][2]);d.length&&(d=X.wl(a,b,X.nk),a.Z=d.Z,a.Ca=d.Ca)}function E(a,b,c,d){a+=c;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+=
"00";default:a+="10"}d&&d.VC&&(a+=d.VC);d&&d.UC&&(a+=d.UC);return a}function w(a,b){X.oh(a,function(c,d,e){var f=X.$a(a,d);d==b&&"Color"==f.inputs[e[1]].identifier&&X.Sh(a,c,d,e)})}function n(){var a=X.create();X.uh(a,0,{data:null,Ya:[],aa:[],inputs:[{Ia:new Float32Array([0,0,0]),identifier:"Color",Ma:!1,name:"Color"},{Ia:1,identifier:"Alpha",Ma:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",Je:[]});return a}function C(a){X.ea(a,function(b,c){for(var d=c.inputs,e=c.outputs,f=0;f<d.length;f++)k(a,d[f],
b,f,1);for(f=0;f<e.length;f++)k(a,e[f],b,f,0)})}function k(a,b,c,d,e){if(b.Ma){var f=!0;X.oh(a,function(a,b,g){if(!e&&a==c&&g[0]==d||e&&b==c&&g[1]==d)f=!1});f&&(b.Ma=!1)}}function F(a,b){var c=[];X.oh(a,function(d,e,f){var g=X.$a(a,d),h=X.$a(a,e),g=Pa.is_vector(g.outputs[f[0]].Ia),h=Pa.is_vector(h.inputs[f[1]].Ia);if(g!=h){var l,k={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},m={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};g&&!h?l=ga("vector_to_scalar","B4W_VECTOSCAL",
[k],[m]):!g&&h&&(l=ga("scalar_to_vector","B4W_SCALTOVEC",[m],[k]));T(a,l,0,b,null);c.push([d,e,a.Z[a.Z.length-2],f])}});for(var d=0;d<c.length;++d)X.Sh(a,c[d][0],c[d][1],c[d][3]),X.Ec(a,c[d][0],c[d][2],[c[d][3][0],0]),X.Ec(a,c[d][2],c[d][1],[0,c[d][3][1]])}function u(a){var b=[];X.ea(a,function(c,d){switch(d.type){case "B4W_TRANSLUCENCY":X.oh(a,function(e,f,g){var h=X.$a(a,f);e==c&&"MATERIAL_EXT"==h.type&&"Translucency"==d.outputs[g[0]].name&&b.push(e,f,[g[0]+1,g[1]+1])})}});for(var c=0;c<b.length;c+=
3)X.Ec(a,b[c],b[c+1],b[c+2])}function g(a,b){var c=[];X.ea(b,function(b,d){d.name==a.name&&c.push(b)});if(c.length)return c;Pa.K("Node not found")}function D(a){var b=[];X.ea(a,function(a,c){"B4W_PARALLAX"!=c.type&&"REROUTE"!=c.type||b.push(a,c)});for(var c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];if("B4W_PARALLAX"==e.type)B(a,d,e);else if("REROUTE"==e.type){for(var f=X.ng(a,d,0),g=X.vg(a,d),h=[],l=[],k=[],m=0;m<g;m++){var n=X.Vg(a,d,m),p=l.indexOf(n),r=X.Oc(a,d,n,0<=p?k[p]:0);if(r){var r=r[1],q=e.inputs[0].Ia,
r=X.$a(a,n).inputs[r];switch(typeof q){case "number":if("object"==typeof r.Ia)for(var u=r.Ia,r=0;r<u.length;r++)u[r]=q;else"number"==typeof r.Ia&&(r.Ia=q);break;case "object":if("object"==typeof r.Ia)for(u=r.Ia,r=0;r<u.length;r++)u[r]=q[r];else"number"==typeof r.Ia&&(r.Ia=.35*q[0]+.45*q[1]+.2*q[2])}}q=e.outputs;for(r=0;r<q.length;r++)q[r].Ia=e.inputs[0].Ia;-1!=p?k[p]+=1:(l.push(n),k.push(1),h.push(d,n))}if(-1!=f)for(e=X.Oc(a,f,d,0)[0],m=0;m<l.length;m++)for(r=0;r<k[m];r++)g=X.Oc(a,d,l[m],r)[1],X.Ec(a,
f,l[m],[e,g]);for(m=0;m<h.length;m+=2)X.ol(a,h[m],h[m+1],-1)}}}function B(a,b,c){var d;a:{d=a.Ca;for(var e=0;e<d.length;e+=3)if(d[e+1]==b&&1==d[e+2][1]){d=d[e];break a}d=-1}-1!=d&&(e=X.$a(a,d),c.data=e.data,X.ol(a,d,b,-1),0==X.vg(a,d)&&(b=X.ng(a,d,0),-1!=b&&X.ol(a,b,d,-1),X.If(a,d)));c.inputs.splice(1,1)}function N(a){G(a);S(a);L(a)}function L(a){var b={};X.ea(a,function(a,c){if("GEOMETRY_UV"==c.type||"UVMAP"==c.type||"TEX_COORD_UV"==c.type){var d=c.data.value;d in b||(b[d]=[]);b[d].push(a,c)}});
for(var c in b){var d=b[c];if(2<d.length)for(var e=A(c),e=T(a,e,0,void 0,null),f=X.$a(a,e),g=0;g<d.length;g+=2){for(var h=d[g],l=d[g+1],k=[],m={},n=X.vg(a,h),p=0;p<n;p++){var r=X.Vg(a,h,p);r in m||(m[r]=0);var q=X.Oc(a,h,r,m[r]);m[r]++;k.push(h,r,q);q=q.splice(0,q.length);switch(l.type){case "GEOMETRY_UV":q[0]=0;f.outputs[0].Ma=!0;break;case "UVMAP":case "TEX_COORD_UV":q[0]=1,f.outputs[1].Ma=!0}X.Ec(a,e,r,q)}for(p=0;p<k.length;p+=3)X.ol(a,k[p],k[p+1],0);X.If(a,h)}}}function A(a){var b=ga("merged_uv",
"UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function G(a){var b=[];X.ea(a,function(a,c){"GEOMETRY_VC"!=c.type&&"GEOMETRY_NO"!=c.type&&"GEOMETRY_FB"!=c.type&&"GEOMETRY_VW"!=c.type&&"GEOMETRY_GL"!=c.type&&"GEOMETRY_LO"!=c.type&&"GEOMETRY_OR"!=c.type&&"GEOMETRY_BF"!=c.type&&"GEOMETRY_IN"!=c.type||b.push(a,c)});for(var c=[],d=0;d<b.length;d+=2){for(var e=b[d],
f=b[d+1],g=!0,h=0;h<c.length;h++){var l=c[h];if(m(f,l.cg)){for(var g=[],h=X.vg(a,e),k=0;k<h;k++){var n=X.Vg(a,e,k),p=X.Oc(a,e,n,0);g.push(e,n,p);X.Ec(a,l.id,n,p)}for(k=0;k<g.length;k+=3)X.ol(a,g[k],g[k+1],0);X.If(a,e);g=!1;break}}g&&(l={id:e,cg:f},c.push(l))}}function z(a){for(var b={},c=0;c<a.Z.length;c+=2){var d=a.Z[c];b[d]={sq:{},NG:!1}}for(c=0;c<a.Ca.length;c+=3)b[a.Ca[c+1]].sq[a.Ca[c]]=!0;for(d in b)I(d,b);for(d in b)b[d]=Object.keys(b[d].sq).map(function(a){return parseInt(a,10)});return b}
function I(a,b){var c=b[a];if(!c.NG){var d=Pa.W(c),e;for(e in c.sq){I(e,b);var c=b[e],f;for(f in c.sq)d.sq[f]=!0}d.NG=!0;b[a]=d}}function S(a){var b=[];X.ea(a,function(a,c){"TEXTURE_COLOR"!=c.type&&"TEXTURE_NORMAL"!=c.type||b.push(a,c)});if(b.length){for(var c=z(a),d=[],e=0;e<b.length;e+=2){for(var f=b[e],g=b[e+1],h=!0,l=0;l<d.length;l++){var k=d[l];if(!(3<=k.Mo.length||!m(g,k.cg)||-1<c[f].indexOf(k.id)||-1<c[k.id].indexOf(f))){for(var n=!1,p=0;p<k.Mo.length;p++){var r=k.Mo[p].id;if(-1<c[f].indexOf(r)||
-1<c[r].indexOf(f)){n=!0;break}}if(!n){for(var l=[],r=X.zi(a,f),q={},p=0;p<r;p++)n=X.ng(a,f,p),n in q||(q[n]=0),h=X.Oc(a,n,f,q[n]++),l.push(n,f,h);for(var r=[],q=X.vg(a,f),u={},p=0;p<q;p++)n=X.Vg(a,f,p),n in u||(u[n]=0),h=X.Oc(a,f,n,u[n]++),r.push(f,n,h);h=l.concat(r);for(p=0;p<h.length;p+=3)X.ol(a,h[p],h[p+1],0);X.If(a,f);p={id:f,cg:g,dQ:l,eQ:r};k.Mo.push(p);h=!1;break}}}h&&(k={id:f,cg:g,Mo:[]},d.push(k))}for(e=0;e<d.length;e++){k=d[e];c=k.Mo.length;for(l=0;l<c;l++){g=k.Mo[l];p=g.cg;f=g.dQ;g=g.eQ;
k.cg.inputs[l+1].Ma=p.inputs[0].Ma;k.cg.inputs[l+1].Ia=p.inputs[0].Ia;k.cg.outputs[2*(l+1)].Ma=p.outputs[0].Ma;k.cg.outputs[2*(l+1)].Ia=p.outputs[0].Ia;k.cg.outputs[2*(l+1)+1].Ma=p.outputs[1].Ma;k.cg.outputs[2*(l+1)+1].Ia=p.outputs[1].Ia;for(p=0;p<f.length;p+=3)n=f[p],h=f[p+2],h[1]+=l+1,X.Ec(a,n,k.id,h);for(p=0;p<g.length;p+=3)n=g[p+1],h=g[p+2],h[0]+=2*(l+1),X.Ec(a,k.id,n,h);k.cg.Ya.push(["USE_uv"+(l+2),1])}X.If(a,k.id);X.uh(a,k.id,k.cg)}}}function m(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":for(var c=a.Ya,d=-1,e=0;e<c.length;e++){var f=c[e];if("USE_NORMAL_IN"==f[0]){d=f[1];break}}c=b.Ya;f=-1;for(e=0;e<c.length;e++){var g=c[e];if("USE_NORMAL_IN"==g[0]){f=g[1];break}}return d===f;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.cu==b.data.cu&&a.data.value.Gm==b.data.value.Gm;case "VALUE":case "RGB":return a.Fd==
b.Fd;default:return!1}}function K(a){var b=[],c=[];X.ea(a,function(a,d){"GEOMETRY_VC"==d.type&&b.push(a,d);"GEOMETRY_VW"==d.type&&c.push(a,d)});U(a,b);Q(a,c)}function U(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],e=b[c+1],f=!1,g=[],h=[],l=[[],[],[]],k=X.vg(a,d),m=0;m<k;m++){var n=X.Vg(a,d,m);if("SEPRGB"!=X.$a(a,n).type){f=!1;break}g.push(d,n);for(var p={},r=X.vg(a,n),f=0;f<r;f++){var q=X.Vg(a,n,f);q in p||(p[q]=0);var u=X.Oc(a,n,q,p[q]++);g.push(n,q);l[u[0]].push(d,q,u)}h.push(n);f=!0}if(f){for(m=
d=k=0;m<l.length;m++)l[m].length&&(k++,d|=1<<2-m);if(k){e.type+=k;e.outputs=[];for(m=0;m<l.length;m++)if(l[m].length)for(e.outputs.push({Ia:0,identifier:"RGB"[m],Ma:!0,name:"RGB"[m]}),f=0;f<l[m].length;f+=3)l[m][f+2][0]=Pa.gp(d,m);for(m=0;m<g.length;m+=2)X.ol(a,g[m],g[m+1],0);for(m=0;m<h.length;m++)X.If(a,h[m]);for(m=0;m<l.length;m++)for(f=0;f<l[m].length;f+=3)X.Ec(a,l[m][f],l[m][f+1],l[m][f+2])}}}}function Q(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],e=!0,f=[],g=X.vg(a,d),h=0;h<g;h++){var l=
X.Vg(a,d,h);if("B4W_REFLECT"==X.$a(a,l).type){var k=X.Oc(a,d,l,0),m=X.Oc(a,d,l,1);k&&1==k[1]||m&&1==m[1]?e=!1:f.push(d,l)}else e=!1}for(h=0;h<f.length;h+=2)g=a,k=f[h],l=f[h+1],m=X.$a(g,l),m.type+="_WORLD",X.ol(g,k,l,0),m.inputs.splice(0,1),k=X.ng(g,l,0),k!=X.Ry&&(X.Oc(g,k,l,0)[1]=0);e&&X.If(a,d)}}function R(a,b,c,d,e,f){a=a.nodes;for(var h=null,l=0;l<a.length;l++){var k=a[l];e?"GROUP"==k.type&&k.node_tree_name==c&&(h=k):k.type==c&&(h=k)}return h?g(h,b)[0]:(f||ea.error('No "'+c+'" node in node '+d),
-1)}function ga(a,b,c,d){return{name:a,type:b,inputs:c,outputs:d}}function ra(a){var b={name:"",Fd:"",type:"",Je:[],inputs:[],outputs:[],aa:[],data:null,Ya:[]};b.name=a.name;b.Fd=a.Fd;b.type=a.type;for(var c=b.Je,d=a.Je,e=0;e<d.length;e++)c.push(Ca(d[e]));c=b.aa;d=a.aa;for(e=0;e<d.length;e++)c.push(Ca(d[e]));c=b.inputs;d=a.inputs;for(e=0;e<d.length;e++)c.push(ua(d[e]));c=b.outputs;d=a.outputs;for(e=0;e<d.length;e++)c.push(ua(d[e]));c=b.Ya;d=a.Ya;for(e=0;e<d.length;e++)c.push(d[e].slice());b.data=
a.data;return b}function T(a,b,c,d,e){var f=b.name,g=b.name,h=b.type,l=[],k=[],m=[],n=[],p=null,r="uv_layer"in b?b.uv_layer||e&&e.UC||"":"",q="color_layer"in b?b.color_layer||e&&e.VC||"":"",u=[];switch(h){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "ATTRIBUTE":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":k=
ba(b);m=ja(b);ea.warn(h+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":k=ba(b);m=ja(b);break;case "MIX_SHADER":k.push(da(b,"Fac"));var v=da(b,"Shader"),m=v.Ma;k.push(v);(v=da(b,"Shader_001"))||(v=da(b,"Shader.001"));var w=v.Ma;k.push(v);k.push(O("d_color1","d_color1",[0,0,0],m));k.push(O("d_roughness1","d_roughness1",0,m));k.push(O("s_color1","s_color1",[0,0,0],m));k.push(O("s_roughness1","s_roughness1",0,m));k.push(O("metalness1","metalness1",0,m));k.push(O("normal1",
"normal1",[0,0,0],m));k.push(O("e_color1","e_color1",[0,0,0],m));k.push(O("emission1","emission1",0,m));k.push(O("a_color1","a_color1",[0,0,0],m));k.push(O("alpha1","alpha1",1,m));k.push(O("d_color2","d_color2",[0,0,0],w));k.push(O("d_roughness2","d_roughness2",0,w));k.push(O("s_color2","s_color2",[0,0,0],w));k.push(O("s_roughness2","s_roughness2",0,w));k.push(O("metalness2","metalness2",0,w));k.push(O("normal2","normal2",[0,0,0],w));k.push(O("e_color2","e_color2",[0,0,0],w));k.push(O("emission2",
"emission2",0,w));k.push(O("a_color2","a_color2",[0,0,0],w));k.push(O("alpha2","alpha2",1,w));m=W(b,"Shader");v=m.Ma;m=[m,O("d_color","d_color",[0,0,0],v),O("d_roughness","d_roughness",0,v),O("s_color","s_color",[0,0,0],v),O("s_roughness","s_roughness",0,v),O("metalness","metalness",0,v),O("normal","normal",[0,0,0],v),O("e_color","e_color",[0,0,0],v),O("emission","emission",0,v),O("a_color","a_color",[0,0,0],v),O("alpha","alpha",1,v)];break;case "OBJECT_INFO":k=ba(b);m=[];v=W(b,"Location");w=W(b,
"Object Index");r=W(b,"Material Index");q=W(b,"Random");m.push(v);m.push(w);m.push(r);m.push(q);u.push(["USE_LOCATION_OUT",v.Ma|0]);u.push(["USE_OBJ_IND_OUT",w.Ma|0]);u.push(["USE_MAT_IND_OUT",r.Ma|0]);u.push(["USE_RANDOM_OUT",q.Ma|0]);break;case "UVMAP":r||(h="EMPTY_UV");"EMPTY_UV"!=h&&(p=Z("param_"+h+"_a"),v=Z("param_"+h+"_v"),l.push(ca(p)),l.push(ca(v)),n.push(ca(v)),p={name:p,value:r});m=ja(b);break;case "UV_MERGED":p=Z("param_UV_MERGED_a");v=Z("param_UV_MERGED_v");l.push(ca(p));l.push(ca(v));
m.push(W(b,"UV_geom"));m.push(W(b,"UV_cycles"));n.push(ca(v));p={name:p,value:r};break;case "CAMERA":k=[];m=ja(b);break;case "COMBRGB":case "COMBHSV":k=ba(b);m=ja(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==h?(ya(b,0,0)&&u.push(["READ_R",1]),ya(b,1,0)&&u.push(["READ_G",1]),ya(b,2,0)&&u.push(["READ_B",1]),ya(b,3,0)&&u.push(["READ_A",1])):(ya(b,0,-1)&&u.push(["READ_R",1]),ya(b,1,-1)&&u.push(["READ_G",1]),ya(b,2,-1)&&u.push(["READ_B",1]));k=ba(b);m=ja(b);p={value:b};break;case "PARTICLE_INFO":k=
ba(b);m=ja(b);for(w=0;w<b.outputs.length;w++){var r=b.outputs[w],q=r.identifier,y=ca("v_param_PART_INFO_"+q.replace(" ",""));if(r.is_linked)switch(q){case "Size":u.push(["PART_INFO_SIZE",qa.X(1)]);break;case "Age":u.push(["PART_INFO_AGE",qa.X(1)]);break;case "Lifetime":u.push(["PART_INFO_LT",qa.X(1)]);break;case "Location":u.push(["PART_INFO_LOC",qa.X(1)]);break;case "Index":p=v=ca("a_param_PART_INFO_"+r.identifier.replace(" ",""));u.push(["PART_INFO_IND",qa.X(1)]);break;case "Velocity":u.push(["PART_INFO_VEL",
qa.X(1)]);break;case "Angular Velocity":u.push(["PART_INFO_A_VEL",qa.X(1)])}"Age"!=q&&"Lifetime"!=q&&"Size"!=q&&(l.push(y),n.push(y))}v&&l.push(v);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!ma(b))return!0;h=aa(b,c);if(!h)return ea.error("Geometry output is not supported"),null;switch(h){case "GEOMETRY_UV":r||(h="EMPTY_UV");"EMPTY_UV"!=h&&(p=Z("param_GEOMETRY_UV_a"),v=Z("param_GEOMETRY_UV_v"),l.push(ca(p)),l.push(ca(v)),n.push(ca(v)),p={name:p,value:r});m.push(W(b,"UV"));break;case "GEOMETRY_VC":q||
(h="EMPTY_VC");"EMPTY_VC"!=h&&(p=Z("param_GEOMETRY_VC_a"),v=Z("param_GEOMETRY_VC_v"),l.push(ca(p)),l.push(ca(v)),n.push(ca(v)),p={name:p,value:q});m.push(W(b,"Vertex Color"));break;case "GEOMETRY_NO":k.push(O("Normal","Normal",[0,0,0],!1));u.push(["USE_NORMAL_IN",0]);m.push(W(b,"Normal"));break;case "GEOMETRY_TRN":h="GEOMETRY_NO";k.push(O("Normal","Normal",[0,0,0],!1));m.push(W(b,"True Normal"));u.push(["USE_NORMAL_IN",0]);ea.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":m.push(W(b,
"Front/Back"));break;case "GEOMETRY_VW":m.push(W(b,"View"));break;case "GEOMETRY_GL":m.push(W(b,"Global")||W(b,"Position"));break;case "GEOMETRY_LO":m.push(W(b,"Local"));break;case "GEOMETRY_OR":v=Z("param_GEOMETRY_OR_v");l.push(ca(v));m.push(W(b,"Orco"));n.push(ca(v));break;case "GEOMETRY_IN":m.push(W(b,"Incoming"));break;case "GEOMETRY_BF":m.push(W(b,"Backfacing"))}break;case "TEX_COORD":if(!ma(b))return!0;h=fa(b,c);switch(h){case "TEX_COORD_UV":r||(h="EMPTY_UV");"EMPTY_UV"!=h&&(p=Z("param_TEX_COORD_UV_a"),
v=Z("param_TEX_COORD_UV_v"),l.push(ca(p)),l.push(ca(v)),n.push(ca(v)),p={name:p,value:r});m.push(W(b,"UV"));break;case "TEX_COORD_NO":m.push(W(b,"Normal"));break;case "TEX_COORD_GE":v=Z("param_TEX_COORD_GE_v");l.push(ca(v));m.push(W(b,"Generated"));n.push(ca(v));break;case "TEX_COORD_OB":m.push(W(b,"Object"));break;case "TEX_COORD_CA":m.push(W(b,"Camera"));break;case "TEX_COORD_WI":m.push(W(b,"Window"));break;case "TEX_COORD_RE":m.push(W(b,"Reflection"))}break;case "GROUP":v=b.node_tree_name;switch(v){case "B4W_LINEAR_TO_SRGB":if(!ia(b,
[1],[1])){p=ha(b,d,e);break}h="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!ia(b,[1],[1])){p=ha(b,d,e);break}h="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!ia(b,[1],[1])){p=ha(b,d,e);break}h="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!ia(b,[1,1],[1])){p=ha(b,d,e);break}h="B4W_REFLECT";break;case "B4W_REFRACTION":if(!ia(b,[1,0],[1])){p=ha(b,d,e);break}h="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!ia(b,[1,1,0,0,0],[1])){p=ha(b,d,e);break}w=Z("param_B4W_PARALLAX_texture");
n.push(ca(w));h="B4W_PARALLAX";break;case "B4W_CLAMP":if(!ia(b,[1],[1])){p=ha(b,d,e);break}h="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!ia(b,[0,0,0,0,0],[0])){p=ha(b,d,e);break}h="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!ia(b,[],[0])){p=ha(b,d,e);break}h="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!ia(b,[0,0,0],[0])){p=ha(b,d,e);break}h="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":h="B4W_GLOW_OUTPUT";break;default:p=ha(b,d,e)}k=ba(b);m=ja(b);"B4W_TRANSLUCENCY"==v&&(v=O("TranslucencyParams","TranslucencyParams",
[0,0,0,0]),v.Ma=m[0].Ma,m.push(v));break;case "LAMP":(v=b.lamp)?(v.uuid in Na?u.push(["LAMP_INDEX",String(Na[v.uuid])]):(Na[v.uuid]=Ra,u.push(["LAMP_INDEX",String(Ra++)])),p=Na):(ea.error("There is no lamp in node: "+b.name),u.push(["LAMP_INDEX",-1]));m.push(W(b,"Color"));m.push(W(b,"Light Vector"));m.push(W(b,"Distance"));m.push(W(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":k=[O("E","E",[0,0,0],!0),O("A","A",[0,0,0],!0),O("D","D",[0,0,0],!0)];m=[O("color","color",[0,0,0],!0),O("specular",
"specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":m=[O("E","E",[0,0,0],!0),O("A","A",[0,0,0],!0),O("D","D",[0,0,0],!0),O("S","S",[0,0,0],!0),O("normal","normal",[0,0,0],!0),O("dif_params","dif_params",[0,0],!0),O("sp_params","sp_params",[0,0],!0),O("shadow_factor","shadow_factor",0,!0),O("translucency_color","translucency_color",0,!0),O("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":k=[O("color","color",[0,0,0],!0),O("specular","specular",[0,0,0],!0)];break;
case "LIGHTING_LAMP":k=[O("shadow_factor","shadow_factor",0,!0)];m=[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("lcolorint","lcolorint",[0,0,0],!0),O("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":k=[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("normal","normal",[0,0,0],!0),O("norm_fac","norm_fac",0,!0)];m=[O("lfactor","lfactor",0,!0)];u.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":k=
[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("normal","normal",[0,0,0],!0),O("norm_fac","norm_fac",0,!0),O("dif_params","dif_params",[0,0],!0)];m=[O("lfactor","lfactor",0,!0)];u.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":k=[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("normal","normal",[0,0,0],!0),O("norm_fac","norm_fac",0,!0),O("sp_params","sp_params",[0,0],!0)];m=[O("sfactor","sfactor",0,
!0)];u.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":k=[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("normal","normal",[0,0,0],!0),O("norm_fac","norm_fac",0,!0),O("sp_params","sp_params",[0,0],!0)];m=[O("sfactor","sfactor",0,!0)];u.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":k=[O("ldir","ldir",[0,0,0],!0),O("lfac","lfac",[0,0],!0),O("normal","normal",[0,0,0],!0),O("norm_fac","norm_fac",0,!0),
O("bsdf_params","bsdf_params",[0,0,0,0],!0)];m=[O("lfactor","lfactor",0,!0),O("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":k=[O("color","color",[0,0,0,0],!0),O("specular","specular",[0,0,0],!0),O("lfactor","lfactor",0,!0),O("sfactor","sfactor",0,!0),O("ldir","ldir",[0,0,0],!0),O("normal","normal",[0,0,0],!0),O("translucency_params","translucency_params",[0,0,0,0],!0),O("D","D",[0,0,0],!0),O("S","S",[0,0,0],!0),O("lcolorint","lcolorint",[0,0,0],!0),O("translucency_color","translucency_color",
0,!0)];m=[O("color","color",[0,0,0,0],!0),O("specular","specular",[0,0,0],!0)];break;case "NORMAL":k=ba(b);m=ja(b);v=W(b,"Normal");n.push(ca(Z("param_NORMAL_Normal"),v.Ia,3));break;case "MAPPING":v=b.vector_type;h="MAPPING";k.push(da(b,"Vector"));m.push(W(b,"Vector"));var w=Pa.f32(b.rotation),r=Pa.f32(b.scale),q=Pa.f32(b.translation),y=Ea.create(),A=Pa.kQ(w,Ea.create());if("TEXTURE"==v||"NORMAL"==v)r[0]=r[0]||1,r[1]=r[1]||1,r[2]=r[2]||1;Ea.multiply(A,new Float32Array([r[0],0,0,0,r[1],0,0,0,r[2]]),
y);y=Pa.$S(y,Fa.create());switch(v){case "POINT":y[12]=q[0];y[13]=q[1];y[14]=q[2];break;case "TEXTURE":y[12]=q[0];y[13]=q[1];y[14]=q[2];y=Fa.invert(y,y);break;case "NORMAL":Fa.invert(y,y),Fa.transpose(y,y)}switch(v){case "NORMAL":u.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":u.push(["MAPPING_TRS_MATRIX_DEF",1]);u.push(["MAPPING_TRS_MATRIX",qa.X(y,16)]);break;case "POINT":0!==Ya.length(w)?(u.push(["MAPPING_TRS_MATRIX_DEF",1]),u.push(["MAPPING_TRS_MATRIX",qa.X(y,16)])):(0!==Ya.sqrDist(r,Pa.nq)&&(u.push(["MAPPING_SCALE_DEF",
1]),u.push(["MAPPING_SCALE",qa.X(r,3)])),0!==Ya.length(q)&&(u.push(["MAPPING_TRANS_DEF",1]),u.push(["MAPPING_TRANS",qa.X(q,3)])));break;case "VECTOR":0!==Ya.length(w)?(u.push(["MAPPING_TRS_MATRIX_DEF",1]),u.push(["MAPPING_TRS_MATRIX",qa.X(y,16)])):0!==Ya.sqrDist(r,Pa.nq)&&(u.push(["MAPPING_SCALE_DEF",1]),u.push(["MAPPING_SCALE",qa.X(r,3)]))}b.use_min&&(u.push(["MAPPING_MIN_CLIP_DEF",1]),u.push(["MAPPING_MIN_CLIP",qa.X(b.min,3)]));b.use_max&&(u.push(["MAPPING_MAX_CLIP_DEF",1]),u.push(["MAPPING_MAX_CLIP",
qa.X(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var p=[],v=[],w=[],r=[O("E","E",[0,0,0],!0),O("A","A",[0,0,0],!0),O("D","D",[0,0,0],!0),O("S","S",[0,0,0],!0),O("normal","normal",[0,0,0],!0),O("dif_params","dif_params",[0,0],!0),O("sp_params","sp_params",[0,0],!0),O("shadow_factor","shadow_factor",0,!0)],q=[O("color","color",[0,0,0],!0),O("specular","specular",[0,0,0],!0),O("normal","normal",[0,0,0],!0)],y=[W(b,"Color"),W(b,"Alpha"),W(b,"Normal")],A=[],x=da(b,"Color");x.Ia.splice(3);w.push(x);
k.push(x);x=da(b,"Spec");x.Ia.splice(3);w.push(x);k.push(x);(x=da(b,"DiffuseIntensity"))||(x=da(b,"Refl"));x.Ia=b.diffuse_intensity;w.push(x);k.push(x);var D=da(b,"Normal");D.Ia.splice(3);w.push(D);k.push(D);"MATERIAL_EXT"==h?((x=da(b,"Emit"))||(x=O("Emit","Emit",0)),w.push(x),k.push(x),(x=da(b,"Translucency"))?(x.Ia=0,x.name="Translucency",x.identifier="Translucency"):x=O("Translucency","Translucency",0),k.push(x),(x=da(b,"Translucency"))?(x.Ia=[0,0,0,0],x.name="TranslucencyParams",x.identifier=
"TranslucencyParams"):x=O("TranslucencyParams","TranslucencyParams",[0,0,0,0]),k.push(x),m=da(b,"Reflectivity"),x=da(b,"Ray Mirror"),m?(x=m,m="Reflectivity"):x?m="Ray Mirror":(x=m,m="Reflectivity"),x||(x=O(m,m,0)),k.push(x),q.push(x),(x=da(b,"SpecTra"))||(x=O("SpecTra","SpecTra",0)),k.push(x),q.push(x),(x=da(b,"Alpha"))||(x=O("Alpha","Alpha",b.alpha)),k.push(x),q.push(x),y.push(W(b,"Diffuse")),y.push(W(b,"Spec")),p.push(["MATERIAL_EXT",1]),v.push(["MATERIAL_EXT",1])):(w.push(O("emit_intensity","emit_intensity",
0)),q.push(O("reflect_factor","reflect_factor",0)),q.push(O("specular_alpha","specular_alpha",0)),q.push(O("alpha_in","alpha_in",0)),y.push(O("diffuse_out","diffuse_out",0)),y.push(O("spec_out","spec_out",0)),p.push(["MATERIAL_EXT",0]),v.push(["MATERIAL_EXT",0]));A.push(ca(Z("param_MATERIAL_alpha"),b.alpha));A.push(ca(Z("param_MATERIAL_spec_alpha"),b.specular_alpha));m=y;p.push(["USE_MATERIAL_NORMAL",D.Ma|0]);b.use_diffuse&&(p.push(["USE_MATERIAL_DIFFUSE",1]),v.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&
v.push(["USE_MATERIAL_SPECULAR",1]);var x=[],B=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":D=b.specular_hardness;break;case "WARDISO":D=b.specular_slope;break;case "TOON":D=b.specular_toon_size;B=b.specular_toon_smooth;break;case "BLINN":D=b.specular_ior;B=b.specular_hardness;break;default:ea.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),D=b.specular_hardness}var z,t;switch(b.diffuse_shader){case "LAMBERT":t=z=0;break;case "OREN_NAYAR":z=
b.roughness;t=0;break;case "FRESNEL":z=b.diffuse_fresnel;t=b.diffuse_fresnel_factor;break;case "MINNAERT":z=b.darkness;t=0;break;case "TOON":z=b.diffuse_toon_size;t=b.diffuse_toon_smooth;break;default:ea.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),t=z=0}x.push(ca(Z("param_MATERIAL_diffuse"),[z,t],2));x.push(ca(Z("param_MATERIAL_spec"),[b.specular_intensity,D,B],3));p.push(["SHADELESS_MAT",b.use_shadeless?1:0]);D={name:b.name,value:{bf:b.specular_shader,
Te:b.diffuse_shader,yc:b.use_shadeless,oe:b.use_tangent_shading}};p={name:b.name,value:{bf:b.specular_shader,Te:b.diffuse_shader,yc:b.use_shadeless,oe:b.use_tangent_shading},aT:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:w,outputs:r,aa:x,data:D,Ya:p,Je:[]},bT:{name:"material_end",type:"MATERIAL_END",inputs:q,outputs:y,aa:A,data:D,Ya:v,Je:[]}};break;case "BSDF_DIFFUSE":k=ba(b);u.push(["USE_NORMAL_IN",k[2].Ma|0]);m=W(b,"BSDF");w=m.Ma;m=[m,O("d_color","d_color",[0,0,0],w),O("d_roughness","d_roughness",
0,w),O("s_color","s_color",[0,0,0],w),O("s_roughness","s_roughness",0,w),O("metalness","metalness",0,w),O("normal","normal",[0,0,0],w),O("e_color","e_color",[0,0,0],w),O("emisson","emisson",0,w),O("a_color","a_color",[0,0,0],w),O("alpha","alpha",1,w)];break;case "BSDF_GLOSSY":k=ba(b);u.push(["USE_NORMAL_IN",k[2].Ma|0]);m=W(b,"BSDF");w=m.Ma;m=[m,O("d_color","d_color",[0,0,0],w),O("d_roughness","d_roughness",0,w),O("s_color","s_color",[0,0,0],w),O("s_roughness","s_roughness",0,w),O("metalness","metalness",
1,w),O("normal","normal",[0,0,0],w),O("e_color","e_color",[0,0,0],w),O("emisson","emisson",0,w),O("a_color","a_color",[0,0,0],w),O("alpha","alpha",1,w)];break;case "BSDF_TRANSPARENT":k=ba(b);m=W(b,"BSDF");w=m.Ma;m=[m,O("d_color","d_color",[0,0,0],w),O("d_roughness","d_roughness",0,w),O("s_color","s_color",[0,0,0],w),O("s_roughness","s_roughness",0,w),O("metalness","metalness",0,w),O("normal","normal",[0,0,0],w),O("e_color","e_color",[0,0,0],w),O("emisson","emisson",0,w),O("a_color","a_color",[0,0,
0],w),O("alpha","alpha",1,w)];break;case "EMISSION":k=ba(b);m=W(b,"Emission");v=m.Ma;m=[m,O("d_color","d_color",[0,0,0],v),O("d_roughness","d_roughness",0,v),O("s_color","s_color",[0,0,0],v),O("s_roughness","s_roughness",0,v),O("metalness","metalness",1,v),O("normal","normal",[0,0,0],v),O("e_color","e_color",[0,0,0],v),O("emisson","emisson",1,v),O("a_color","a_color",[0,0,0],w),O("alpha","alpha",1,w)];break;case "MATH":switch(b.operation){case "ADD":h="MATH_ADD";break;case "SUBTRACT":h="MATH_SUBTRACT";
break;case "MULTIPLY":h="MATH_MULTIPLY";break;case "DIVIDE":h="MATH_DIVIDE";break;case "SINE":h="MATH_SINE";break;case "COSINE":h="MATH_COSINE";break;case "TANGENT":h="MATH_TANGENT";break;case "ARCSINE":h="MATH_ARCSINE";break;case "ARCCOSINE":h="MATH_ARCCOSINE";break;case "ARCTANGENT":h="MATH_ARCTANGENT";break;case "POWER":h="MATH_POWER";break;case "LOGARITHM":h="MATH_LOGARITHM";break;case "MINIMUM":h="MATH_MINIMUM";break;case "MAXIMUM":h="MATH_MAXIMUM";break;case "ROUND":h="MATH_ROUND";break;case "LESS_THAN":h=
"MATH_LESS_THAN";break;case "GREATER_THAN":h="MATH_GREATER_THAN";break;case "MODULO":h="MATH_MODULO";break;case "ABSOLUTE":h="MATH_ABSOLUTE";break;default:return ea.error("Unsupported MATH operation: "+b.operation),null}u.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);k=ba(b);m=ja(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":h="MIX_RGB_MIX";break;case "ADD":h="MIX_RGB_ADD";break;case "MULTIPLY":h="MIX_RGB_MULTIPLY";break;case "SUBTRACT":h="MIX_RGB_SUBTRACT";break;case "SCREEN":h="MIX_RGB_SCREEN";
break;case "DIVIDE":h="MIX_RGB_DIVIDE";break;case "DIFFERENCE":h="MIX_RGB_DIFFERENCE";break;case "DARKEN":h="MIX_RGB_DARKEN";break;case "LIGHTEN":h="MIX_RGB_LIGHTEN";break;case "OVERLAY":h="MIX_RGB_OVERLAY";break;case "DODGE":h="MIX_RGB_DODGE";break;case "BURN":h="MIX_RGB_BURN";break;case "HUE":h="MIX_RGB_HUE";break;case "SATURATION":h="MIX_RGB_SATURATION";break;case "VALUE":h="MIX_RGB_VALUE";break;case "COLOR":h="MIX_RGB_COLOR";break;case "SOFT_LIGHT":h="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":h=
"MIX_RGB_LINEAR_LIGHT";break;default:return ea.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}u.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);k=ba(b);m=ja(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":k=[O("Factor","Factor",b.fac,b.fac_is_linked),O("Color1","Color1",[0,0,0],b.color1_is_linked),O("Color2","Color1",[0,0,0],b.color2_is_linked)];m=[O("Color","Color",[0,0,0],!0)];break;case "OUTPUT":k=ba(b);m=[];break;case "OUTPUT_MATERIAL":k=ba(b);m=[];p=da(b,"Surface");v=p.Ma;p={name:"output_surface",
type:"OUTPUT_SURFACE",inputs:[p],outputs:[],aa:[],data:{value:{BN:"BSDF_COMPUTE"},zN:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[p,O("d_color","d_color",[0,0,0],v),O("d_roughness","d_roughness",0,v),O("s_color","s_color",[0,0,0],v),O("s_roughness","s_roughness",0,v),O("metalness","metalness",0,v),O("normal","normal",[0,0,0],v),O("e_color","e_color",[0,0,0],v),O("emission","emission",0,v),O("a_color","a_color",[0,0,0],v),O("alpha","alpha",0,v)],outputs:[O("E","E",[0,0,0],!0),O("A","A",[0,0,0],!0),
O("D","D",[0,0,0],!0),O("S","S",[0,0,0],!0),O("normal","normal",[0,0,0],!0),O("bsdf_params","bsdf_params",[0,0,0,0],!0),O("shadow_factor","shadow_factor",0,!0),O("d_color","d_color",[0,0,0],!0),O("s_color","s_color",[0,0,0],!0),O("e_color","e_color",[0,0,0],!0),O("emission","emission",0,!0),O("a_color","a_color",[0,0,0],!0),O("alpha","alpha",0,!0)],aa:[],data:null,Ya:[],Je:[]},AN:{name:"bsdf_end",type:"BSDF_END",inputs:[O("color","color",[0,0,0],!0),O("specular","specular",[0,0,0],!0),O("normal",
"normal",[0,0,0],!0),O("bsdf_params","bsdf_params",[0,0,0,0],!0),O("d_color","d_color",[0,0,0],!0),O("s_color","s_color",[0,0,0],!0),O("e_color","e_color",[0,0,0],!0),O("emission","emission",0,!0),O("a_color","a_color",[0,0,0],!0),O("alpha","alpha",0,!0)],outputs:[O("color","color",[0,0,0],v)],aa:[],data:null,Ya:[],Je:[]}},Ya:[],Je:[]};p={name:b.name,xT:p,WP:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[O("Height","Height",0,!0)],outputs:[O("Normal","Normal",[0,0,0],!1)],aa:[],data:null,
Ya:[],Je:[]}};break;case "OUTPUT_WORLD":k=ba(b);m=ja(b);p=da(b,"Surface");p={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[p],outputs:[],aa:[],data:null,Ya:[],Je:[]};p={name:b.name,yT:p};break;case "RGB":v=b.name;v={name:"-1",value:v};n.push(v);m.push(W(b,"Color"));break;case "SEPRGB":case "SEPHSV":k=ba(b);m=ja(b);break;case "TEX_ENVIRONMENT":(v=b.image)?(h="TEXTURE_ENVIRONMENT_"+b.projection,"NONE"==b.color_space?u.push(["NON_COLOR",1]):u.push(["NON_COLOR",0]),k.push(da(b,"Vector")),
u.push(["USE_VECTOR_IN",k[0].Ma|0]),m.push(W(b,"Color")),w=Z("param_TEXTURE_texture"),n.push(ca(w)),p=za.Ck(za.sh,!1),p.repeat=!0,p.source="IMAGE",Ja.bz&&(p.anisotropic_filtering=16),za.ZD(p,v),p={Cq:b.name,cu:"",name:w,value:p}):h="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(v=b.image){h="TEXTURE_COLOR";"NONE"==b.color_space?u.push(["NON_COLOR",1]):u.push(["NON_COLOR",0]);u.push(["CONVERT_UV",0]);for(w=0;4>w;++w)w?(x=O("Vector"+w,"Vector"+w,[0,0,0],!1),r=O("Color"+w,"Color"+w,[0,0,0],!1),q=O("Alpha"+
w,"Alpha"+w,0,!1)):(x=da(b,"Vector"),r=W(b,"Color"),q=W(b,"Alpha")),k.push(x),m.push(r),m.push(q);w=Z("param_TEXTURE_texture");n.push(ca(w));p=za.Ck(za.sh,!1);p.repeat="REPEAT"==b.extension;p.source="IMAGE";za.ZD(p,v);p={Cq:b.name,cu:"",name:w,value:p}}else h="TEXTURE_EMPTY";break;case "TEXTURE":h=wa(b);if("TEXTURE_EMPTY"==h)m.push(W(b,"Color")),m.push(W(b,"Normal")),m.push(W(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==h)k.push(da(b,"Vector")),m.push(W(b,"Color")),m.push(W(b,"Value"));else{if("TEXTURE_NORMAL"==
h&&"ENVIRONMENT_MAP"==b.texture.type)return ea.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;"TEXTURE_COLOR"==h&&(v=!1,w=b.texture.image,!w||"Non-Color"!=w.colorspace_settings_name&&"Non-Colour Data"!=w.colorspace_settings_name||(v=!0),u.push(["NON_COLOR",Number(v)]),u.push(["CONVERT_UV",1]));for(w=0;4>w;++w)v="TEXTURE_COLOR"==h?"Color":"Normal",w?(x=O("Vector"+w,"Vector"+w,[0,0,0],!1),r=O(v+w,v+w,[0,0,0],!1),q=O("Value"+w,"Value"+w,0,!1)):(x=da(b,"Vector"),r=W(b,v),q=W(b,"Value")),
k.push(x),m.push(r),m.push(q)}"TEXTURE_EMPTY"!=h&&(w=Z("param_TEXTURE_texture"),n.push(ca(w)),p=b.texture.J,p={Cq:b.texture.name,cu:b.texture.uuid,name:w,value:p});break;case "VALTORGB":k=ba(b);m=ja(b);p={value:b};v=b.color_ramp.interpolation;"CONSTANT"!=v&&"LINEAR"!=v&&ea.warn("Color Ramp node is not fully supported.");break;case "VALUE":h="VALUE";v=b.name;v={name:"-1",value:v};n.push(v);m.push(W(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":h="VECT_MATH_ADD";break;case "SUBTRACT":h=
"VECT_MATH_SUBTRACT";break;case "AVERAGE":h="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":h="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":h="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":h="VECT_MATH_NORMALIZE";break;default:return ea.error("Unsupported VECT_MATH operation: "+b.operation),null}k=ba(b);m=ja(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":u.push(["VECTOR_TYPE",qa.X(0)]);break;case "VECTOR":u.push(["VECTOR_TYPE",qa.X(1)]);break;case "NORMAL":u.push(["VECTOR_TYPE",
qa.X(2)]);break;default:return ea.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}k=b.convert_from;m=b.convert_to;if("WORLD"==k)if("WORLD"==m)k=0;else if("OBJECT"==m)k=1;else if("CAMERA"==m)k=2;else return ea.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==k)if("WORLD"==m)k=3;else if("OBJECT"==m)k=4;else if("CAMERA"==m)k=5;else return ea.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==k)if("WORLD"==m)k=
6;else if("OBJECT"==m)k=7;else if("CAMERA"==m)k=8;else return ea.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return ea.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;u.push(["CONVERT_TYPE",qa.X(k)]);k=ba(b);m=ja(b);break;case "NORMAL_MAP":switch(b.space){case "TANGENT":v=0;break;case "OBJECT":v=1;break;case "WORLD":v=2;break;case "BLENDER_OBJECT":v=3;break;case "BLENDER_WORLD":v=4;break;default:return ea.error("Unsupported NORMAL_MAP space: "+b.space),
null}u.push(["SPACE",qa.X(v)]);k.push(da(b,"Strength"));k.push(da(b,"Color"));k.push(O("Normal","Normal",[0,0,0],!1));u.push(["USE_NORMAL_IN",0]);m.push(W(b,"Normal"));break;case "FRESNEL":D=da(b,"Normal");k.push(da(b,"IOR"));k.push(D);m.push(W(b,"Fac"));u.push(["USE_FRESNEL_NORMAL",D.Ma|0]);break;case "LAYER_WEIGHT":D=da(b,"Normal");k.push(da(b,"Blend"));k.push(D);m=ja(b);u.push(["USE_NORMAL_IN",D.Ma|0]);break;case "BUMP":D=da(b,"Normal");u.push(["INVERT",b.invert?1:0]);u.push(["USE_NORMAL_IN",D.Ma|
0]);k=ba(b);m=ja(b);break;case "BACKGROUND":k=ba(b);m=ja(b);break;default:k=ba(b),m=ja(b)}g={name:f,Fd:g,type:h,Je:l,inputs:k,outputs:m,aa:n,data:p,Ya:u};f=X.yj(a);X.uh(a,f,g);if(!(g="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{g=b.outputs;for(l=h=0;l<g.length;l++)if(g[l].is_linked&&h++>c){g=!0;break a}g=!1}g=!g}return g||null!=T(a,b,++c,d,e)?f:null}function ia(a,b,c){for(var d=a.inputs,e=a.outputs,f=a.node_tree_name,g=0;g<b.length;g++){var h=d[g],k=b[g];if(!h||h.default_value instanceof
Array!=k)return ea.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1}for(g=0;g<c.length;g++)if(b=e[g],d=c[g],!b||b.default_value instanceof Array!=d)return ea.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1;return!0}function ha(a,b,c){var d=a.node_group.node_tree,f={},g;for(g in d)if("links"==g||"nodes"==g){f[g]=[];for(var h=0;h<d[g].length;h++){f[g][h]={};for(var k in d[g][h])if("links"==
g){f[g][h][k]={};for(var l in d[g][h][k])f[g][h][k][l]=pa(d[g][h][k][l])}else f[g][h][k]=pa(d[g][h][k])}}else f[g]=pa(d[g]);h=a.node_tree_name;if("B4W_REPLACE"==h||"B4W_LEVELS_OF_QUALITY"==h)d=ga("Group input","GROUP_INPUT",[],a.inputs),g=ga("Group output","GROUP_OUTPUT",a.outputs,[]),h="B4W_REPLACE"==h||"B4W_LEVELS_OF_QUALITY"==h&&(Ja.quality==Ka.P_LOW||Ja.OF)?{from_node:d,from_socket:d.outputs[1],to_node:g,to_socket:g.inputs[0]}:{from_node:d,from_socket:d.outputs[0],to_node:g,to_socket:g.inputs[0]},
f.nodes=[d,g],f.links=[h];d=a.name;g=f.nodes;h=f.links;for(k=0;k<g.length;k++)g[k].name=sa(g[k].type,d,g[k].name);for(k=0;k<h.length;k++)h[k].from_node.name=sa(h[k].from_node.type,d,h[k].from_node.name),h[k].to_node.name=sa(h[k].to_node.type,d,h[k].to_node.name);return{qT:e(f,a.node_group.uuid,!0,b,c).wa,rT:f.links}}function pa(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?Pa.Oq(a):a}function Z(a){Oa[a]||(Oa[a]=0);var b=a+"_"+Oa[a],b=b.replace(/ /g,"_").replace(/\//g,"_");Oa[a]++;
return b}function ma(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function aa(a,b){for(var c=a.outputs,d=0,e=0;e<c.length;e++){var f=c[e];if(f.is_linked&&!(d++<b))switch(f.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";
case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function fa(a,b){for(var c=a.outputs,d=0,e=0;e<c.length;e++){var f=c[e];if(f.is_linked&&!(d++<b))switch(f.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}
function wa(a){if(!a.texture||!a.texture.J)return"TEXTURE_EMPTY";for(var b=a.outputs,c=!1,d=!1,e=!1,f=0;f<b.length;f++){var g=b[f];if(g.is_linked)switch(g.identifier){case "Color":c=!0;break;case "Normal":d=!0;break;case "Value":e=!0;break;default:Pa.K("Unknown texture output")}}if(c)return d&&ea.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(d)return"TEXTURE_NORMAL";if(e)return"ENVIRONMENT_MAP"==
a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function da(a,b){for(var c=a.inputs,d=0;d<c.length;d++){var e=c[d];if(e.identifier==b)return Ga(e)}return null}function W(a,b){for(var c=a.outputs,d=0;d<c.length;d++){var e=c[d];if(e.identifier==b)return Ga(e)}return null}function Ga(a){var b=a.name,c=a.identifier,d=a.is_linked;a=a.default_value;a=Pa.is_vector(a)?a.slice(0):a;return{name:b,identifier:c,Ma:d,Ia:a}}function O(a,b,c,d){return{name:a,identifier:b,Ma:d,Ia:c}}function ua(a){return O(a.name,
a.identifier,a.Ia,a.Ma)}function ba(a){for(var b=[],c=0;c<a.inputs.length;c++){var d=Ga(a.inputs[c]);d.Ia.length&&d.Ia.splice(3);b.push(d)}return b}function ja(a){for(var b=[],c=0;c<a.outputs.length;c++){var d=Ga(a.outputs[c]);b.push(d)}return b}function ca(a,b,c){b=null===b||void 0===b?null:qa.X(b,c);return{name:a,value:b}}function Ca(a){return{name:a.name,value:a.value}}function la(a){return a.slice()}function V(a,b,c,d,e,f){var g=[],h=f.from_socket.identifier;f=f.to_socket.identifier;var k=d.outputs;
for(d=0;d<k.length;d++)if(k[d].identifier==h){g.push(d);break}e=e.inputs;for(d=0;d<e.length;d++)if(e[d].identifier==f){g.push(d);break}2==g.length&&X.Ec(a,b,c,g);return!0}function sa(a,b,c){return"GROUP_INPUT"==a?b+"*GI*"+c:"GROUP_OUTPUT"==a?b+"*GO*"+c:b+"%join%"+c}function xa(a){var b=[];X.ea(a,function(a,c){"GROUP"==c.type&&b.push(c)});return b}function J(a,b,c){for(var d=0;d<c.length;d++){var e=c[d].data.qT,f=c[d].data.rT;if(!e)return!1;X.ea(e,function(b,c){X.uh(a,X.yj(a),c)});for(e=0;e<f.length;e++)b.push(f[e]);
na(c[d],b,a)}return!0}function La(a,b,c,d,e,f){switch(a.type){case "GROUP":a.name==b&&d.push(c);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||e.push(c);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||f.push(c)}}function Ua(a,b,c){for(var d=[],e=0;e<c.length;e++){for(var f=c[e],g=null,h=0;h<b.length;h++)if(f.from_socket.identifier==b[h].to_socket.identifier){g=b[h];break}g?(f.from_node=g.from_node,f.from_socket=g.from_socket):d.push(f)}for(e=0;e<b.length;e++)a.splice(a.indexOf(b[e]),1);return d}
function Ia(a,b){if(b.length)for(var c=b[0].from_node.name,d=0;d<a.length;d++)a[d].from_node.name==c&&b.push(a[d])}function ta(a,b,c,d){for(var e=0;e<d.length;e++){for(var f=d[e],h,k=0;k<c.inputs.length;k++)if(f.from_socket.identifier==c.inputs[k].identifier){h=c.inputs[k].Ia;break}for(var k=f,l=b,m=h,n=g(k.to_node,l),p=0;p<n.length;p++)for(var r=X.$a(l,n[p]),q=0;q<r.inputs.length;q++){var u=r.inputs[q];if(u.identifier==k.to_socket.identifier){r=u.Ia instanceof Object?0:1;if((m instanceof Object?
0:1)==r)u.Ia=m;else switch(r){case 0:u=u.Ia;u[0]=u[1]=u[2]=m;break;case 1:u.Ia=(m[0]+m[1]+m[2])/3}break}}f=a.indexOf(f);-1!=f&&a.splice(f,1)}}function na(a,b,c){for(var d=a.name,e=[],f=[],g=[],h=[],k=0;k<b.length;k++){var l=b[k];La(l.from_node,d,l,e,g,h);La(l.to_node,d,l,f,g,h)}f=Ua(b,f,g);e=Ua(b,h,e);Ia(b,f);ta(b,c,a,f);if(e.length){var m;X.ea(c,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(d+"*GO*")||(m=b)});ta(b,c,m,e)}}function Y(a){var b=[],c=[];X.ea(a,function(a,d){switch(d.type){case "VALTORGB":b.push(d);
break;case "CURVE_VEC":case "CURVE_RGB":c.push(d)}});var d=0,e=a=null,f=b.length+c.length;if(b.length){a=za.oQ(b,za.uK);for(var g=0;g<b.length;g++)b[g].Ya.push(["NODE_TEX_ROW",qa.X((d+.5)/f)]),d++}if(c.length)for(e=za.sQ(c,za.gD),g=0;g<c.length;g++)c[g].Ya.push(["NODE_TEX_ROW",qa.X((d+.5)/f)]),d++;g=null;a&&e?(g=new Uint8Array(a.length+e.length),g.set(a),g.set(e,a.length)):a?g=a:g=e;a=g?za.iF(g,za.gD):null;for(g=0;g<b.length;g++)b[g].data.Oa=a;for(g=0;g<c.length;g++)c[g].data.Oa=a}function ya(a,b,
c){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<c+.01&&a[0][1]<c+.01&&.99<a[1][0]&&.99<a[1][1]?!1:!0}var Ka=t("__config"),va=t("__debug"),X=t("__graph"),Ea=t("__mat3"),Fa=t("__mat4"),M=t("__objects"),ea=t("__print"),qa=t("__shaders"),Aa=t("__scenes"),Pa=t("__util"),Ya=t("__vec3"),za=t("__textures"),Oa={},Qa={},Ma={},Na={},Ra=0,Ja=Ka.L;a.QX=0;a.ND=1;a.MD=2;a.LD=3;a.PX=4;a.KD=5;a.JD=6;a.ID=7;a.OX=8;a.nL=0;a.mL=1;a.HX=2;a.lL=3;a.GX=4;a.wv=function(a){return Qa[a]};a.gO=function(a){delete Qa[a]};
a.bF=function(a,b,c,d){return e(a,b,!1,c,d)};a.Fz=function(a,c){var d=Aa.get_active(),d=E(a,"MAIN",d.uuid);if(d in Ma)return Ma[d];var e=X.create(),f={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},g=T(e,f,0,null,null),f={name:"LIGHTING_END",type:"LIGHTING_END"},f=T(e,f,0,null,null);b(e,c,g,f,[[g,[8,10]],[g,[9,6]]]);C(e);return Ma[d]=e};a.Tq=function(a){var b=[],c={};Oa={};var d=X.BC(a);X.ea(d,function(a,d){var e;e=[];for(var f=[],g=[],h=[],k=[],l=[],m=0;m<d.inputs.length;m++){var n=d.inputs[m];if(n.Ma)e.push(null),
f.push(null);else{e.push(Z("in_"+d.type+"_"+n.identifier.replace(/\./g,"")));var p=qa.X(n.Ia,0);Ja.hC&&(0<=d.type.indexOf("MIX_RGB_")&&("Color1"==n.identifier||"Color2"==n.identifier||"Fac"==n.identifier)||0<=d.type.indexOf("MATH_")&&("Value"==n.identifier||"Value_001"==n.identifier||"Value.001"==n.identifier)||0<=d.type.indexOf("VECT_MATH_")&&("Vector_001"==n.identifier||"Vector.001"==n.identifier)||0<=d.type.indexOf("LIGHTING_APPLY")||0<=d.type.indexOf("MATERIAL_END")||0<=d.type.indexOf("MATERIAL_BEGIN"))&&
(n=p,n=n.replace(/(,)/g,"$1 "),n=n.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),n=n.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),p=n=n.replace(/\s+/g,""));f.push(p)}}for(m=0;m<d.outputs.length;m++)n=d.outputs[m],n.Ma?g.push(null):g.push(Z("out_"+d.type+"_"+n.identifier.replace(/\./g,"")));for(m=0;m<d.aa.length;m++)n=d.aa[m],h.push(n.name),k.push(n.value);for(m=0;m<d.Je.length;m++)l.push(d.Je[m].name);e={id:d.type,inputs:e,HA:f,outputs:g,aa:h,Zo:k,Je:l,Ya:JSON.parse(JSON.stringify(d.Ya))};
b.push(e);c[a]=e});X.oh(d,function(a,b,e){var f=X.$a(d,a),g=f.outputs[e[0]];a=c[a].outputs;b=c[b].inputs;f=a[e[0]]||Z("out_"+f.type+"_"+g.identifier.replace(/\./g,""));a[e[0]]=f;b[e[1]]=f});return b};a.IE=function(a){if(a.Md)for(var b=0;b<a.Md.nodes.length;b++){var c=a.Md.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};a.YZ=function(a,b,c){ea.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+va.sT(a)+"\n=============================================================")};
a.cleanup=function(){for(var a in Qa)delete Qa[a];for(a in Ma)delete Ma[a];for(var b in Na)delete Na[b];Ra=0};a.AR=function(a){var b=-1;X.ea(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}};b4w.module.__animation=function(a,t){function e(a,b){var c=a.pa[b];c&&c.cv&&c.nr&&(c.nr=!1,c.cv(a,b))}function c(a,b,c){c=a.pa[c];c.type=30;var d=b.Ba,e=b.jb-d+1;c.start=d;c.length=e;c.hg=d;c.fj=b.name;for(e=d=0;e<a.ad.length;e++){var f=a.ad[e];if(f==b)break;else d+=f.jb-f.Ba+1}c.$J=d}function b(a,b){a.type=50;a.fj=b.name;a.start=b.Ba;a.length=b.jb-a.start;b.cyclic||(a.length+=b.Sr)}function h(a,b){var c={type:null,fj:null,Wy:null,WD:0,UD:null,nj:new Int8Array(8),Ob:null,trans:null,ij:null,jj:null,
lC:[],play:!1,behavior:20,hg:0,start:0,length:0,KC:0,MB:0,nr:!1,$J:null,speed:1,volume:null,pitch:null,color:null,jg:null,Xd:null,Ld:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,wm:null,FH:[],Gf:[],EH:[],Ff:[],Uo:null};if(!a.pa.length)for(var d=0;8>d;d++)a.pa.push(null);a.pa[b]=c}function f(a){return a.replace(/_B4W_BAKED$/,"")}function q(a,b){return{Ym:a,action:b}}function l(a,b,c){if(a.animation_data){var d=a.animation_data.action;d&&60==d.J.type&&b.push(q(c,d))}a=a.nodes;
for(d=0;d<a.length;d++){var e=a[d];if(e.node_group){var f=e.node_group.node_tree;if(f){var g=c.slice();g.push(e.name);l(f,b,g)}}}}function x(a){return Z.is_mesh(a)&&a.A.ad?!0:!1}function y(a,b,c){var e=a.pa;if(-1==c)for(c=0;8>c;c++){var f=e[c];f&&(f.hg=b,d(a,0,c,!0))}else if(f=e[c])f.hg=b,d(a,0,c,!0)}function p(a,b,c){if(-1==b)for(b=0;8>b;b++){var d=a[b];d&&c(d)}else(d=a[b])&&c(d)}function d(a,b,c,d){k(a,b,c,d);e(a,c);a.A.ej&&(B(a,b),u(a,b))}function v(a,b,c,d){var e=c.frame_range;if(e[0]>e[1])return fa.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"'),!1;var f=c.J,g=a.pa[d];g.fj=c.name;g.Wy=e;g.WD=f.TH;g.UD=f.oE;g.nj.set(f.nj);g.start=e[0];g.length=e[1]-e[0];g.hg=e[0];switch(f.type){case 10:if(Z.is_armature(a)){g.type=10;var h=r(a,b,c);h||(h=N(c,a.A.fg),H(a,b,c,h));g.trans=h.trans;g.Ob=h.Ob;g.ij=h.ij;g.jj=h.jj;E(a,d,c,h)}break;case 40:Z.is_speaker(a)&&(g.volume=f.aa.volume||null,g.pitch=f.aa.pitch||null,g.type=40);break;case 70:Z.is_lamp(a)&&(g.color=f.aa.color||null,g.jg=f.aa.energy||null,g.type=
70);break;case 60:if("MESH"==a.type||"WORLD"==a.type){g.type=60;var e=Z.is_world(a),k=[],l=[],m=[],p=[],q=[];c=c.J;var u=b?b[0]:null;for(h in c.aa){var v;v=b;var w=h.match(/"(.*?)"/)[1];if(v&&1<v.length){for(var y=v[1],x=2;x<v.length;x++)y=y+"%join%"+v[x];y+="%join%"+w}else y=w;v=y;for(w=0;w<a.S.length;w++)for(y=a.S[w].$,x=0;x<y.length;x++){var A=y[x];if(e||!u||-1!=A.cc.indexOf(u)){var D=A.Ff,B;B=h;var z=v,t=c,F=l,M=k,G=A.Gf;if(G){for(var ya=!1,R=0;R<G.length;R+=3)z==G[R]&&(M.push(4*G[R+1]+G[R+2]),
F.push(new Float32Array(t.aa[B])),ya=!0);B=ya}else B=!1;z=h;t=v;F=c;M=p;G=m;if(D){ya=!1;for(R=0;R<D.length;R+=2)t==D[R]&&(G.push(D[R+1]),M.push(new Float32Array(F.aa[z])),ya=!0);D=ya}else D=!1;(B||D)&&q.push(A)}}}g.Gf=k;g.FH=l;g.Ff=m;g.EH=p;g.Uo=q}break;case 20:if(h=f.aa.tsr)g.type=20,e=r(a,b,c),e||(e=C(c,h),H(a,b,c,e)),g.trans=e.trans,g.Ob=e.Ob,ma.tB(a)&&ma.NW(a,g.trans[0],g.Ob[0]);else return fa.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:Z.is_world(a)&&
(g.jg=f.aa["light_settings.environment_energy"]||null,g.Ld=f.aa.horizon_color||null,g.Xd=f.aa.zenith_color||null,g.fog_intensity=f.aa["mist_settings.intensity"]||null,g.fog_depth=f.aa["mist_settings.depth"]||null,g.fog_start=f.aa["mist_settings.start"]||null,g.fog_height=f.aa["mist_settings.height"]||null,g.wm=f.aa.b4w_fog_color||null,g.type=80)}Z.is_armature(a)&&10!=f.type&&n(a,d);return!0}function r(a,b,c){a=a.On;b=b?b.join("%join%"):null;for(var d=0;d<a.length;d+=3)if(c==a[d]&&b==a[d+1])return a[d+
2];return null}function H(a,b,c,d){a.On.push(c,b?b.join("%join%"):null,d)}function E(a,b,c,d){var e=a.A,f=e.mp,g=a.pa[b],h=g.lC,k;a:{k=e.sx;for(var l=0;l<k.length;l+=2)if(c==k[l]){k=k[l+1];break a}k=null}if(k)g.lC=k;else{for(g=0;g<f.length;g++){k=f[g].hi;for(var l=[],m=[],n=d.trans,p=d.Ob,r=0;r<n.length;r++){var q=A(n[r],p[r],k);l.push(q.trans);m.push(q.Ob)}h.push({trans:l,Ob:m})}e.sx.push(c,h)}e.ej&&(c=e.fi,b>c[1]?(d=c[1],c[1]=b,c[0]=d):b>c[0]&&b<c[1]&&(c[0]=b),w(a))}function w(a){var b=a.A.fi;if(-1!=
b[0]&&-1!=b[1]){var c=a.pa;a=c[b[1]].hg;var d=Math.floor(a),e=a-d,b=c[b[0]];a=b.hg;d=Math.floor(a);b.hg=d+e}}function n(a,b){var c=a.A.fi,d=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(var e=a.pa;0<=d;d--){var f=e[d];if(f&&10==f.type)if(d>c[1])c[1]=d;else{d>c[0]&&(c[1]=d);break}}}function C(a,b){for(var c=a.J.sB,d=[],e=[],f=0;f<c;f++)d.push(b.subarray(8*f,8*f+4)),e.push(b.subarray(8*f+4,8*f+8));return{trans:d,Ob:e}}function k(a,b,c,d){if((c=a.pa[c])&&null!=c.type&&(c.play||d)){var e=a.A,f=c.hg,g=c.start,h=c.length,
f=f+c.speed*b*ua.Cd(),k=c.type,l=c.speed;if(0<=l&&f>=g+h||0>l&&f<g)switch(d||(c.nr=!0),c.behavior){case 10:0<=l?f=(f-g)%h+g:f=g+h-1E-6;break;case 20:0<=l?f=g:f=g+h-1E-6;c.play=!1;break;case 30:0<=l?f=g+h-1E-6:f=g,c.play=!1}c.hg=f;switch(k){case 10:if(!e.ej){d=F(c);b=d[0];var m=d[1];d=d[2];e.Pd=c.Ob[b];e.De=c.Ob[m];e.Wd=c.trans[b];e.Ie=c.trans[m];e.Bf=d;d=e.mp;c=c.lC;for(var n=0;n<d.length;n++){var p=d[n],r=c[n];p.Pd=r.Ob[b];p.De=r.Ob[m];p.Wd=r.trans[b];p.Ie=r.trans[m];p.Bf=e.Bf}ba.V(a)}break;case 20:d=
F(c);var e=xa,m=d[0],n=d[1],p=d[2],r=c.trans,q=r[m][1],f=r[m][2],g=r[n][1],h=r[n][2];e[0]=(1-p)*r[m][0]+p*r[n][0];e[1]=(1-p)*q+p*g;e[2]=(1-p)*f+p*h;m=na;f=d[0];n=d[1];p=d[2];r=c.Ob;q=Y;q[0]=r[f][0];q[1]=r[f][1];q[2]=r[f][2];q[3]=r[f][3];f=ya;f[0]=r[n][0];f[1]=r[n][1];f[2]=r[n][2];f[3]=r[n][3];wa.slerp(q,f,p,m);n=d[2];p=c.trans;d=(1-n)*p[d[0]][3]+n*p[d[1]][3];a.parent&&a.Uw&&(n=va,ja.set_sep(e,d,m,n),ja.multiply(a.Uw,n,n),ja.Mb(n,e),ja.ub(n,m),d=ja.get_scale(n));c.KC&&(n=J,ba.get_translation(a,n),
ca.smooth_v(e,n,b,c.KC,e));c.MB&&(n=Y,ba.get_rotation(a,n),ca.XI(m,n,b,c.MB,m));f=c.nj;f[0]&&ba.set_translation_rel(a,e);f[1]&&ba.set_rotation_rel(a,m);f[2]&&ba.set_scale_rel(a,d);ba.V(a);aa.sync_transform(a);break;case 30:d=c.hg-c.start;0>d&&(d=0);d>=c.length&&(d=c.length);a=Math.floor(d);b=a+1;d-=a;10!=c.behavior&&b==c.length&&(b=--a,d=1);c=c.$J;sa[0]=a+c;sa[1]=b+c;sa[2]=d;d=sa;e.oy=d[0];e.py=d[2];break;case 40:d=F(c);b=d[0];e=d[1];d=d[2];c.volume&&Ga.set_volume(a,(1-d)*c.volume[b]+d*c.volume[e]);
c.pitch&&Ga.playrate(a,(1-d)*c.pitch[b]+d*c.pitch[e]);break;case 50:b=10==c.behavior?(f-g)/ua.Cd():f/ua.Cd();ma.iV(a,c.fj,b);break;case 60:d=F(c);b=d[0];e=d[1];d=d[2];q=c.FH;f=c.Gf;m=c.EH;n=c.Ff;p=c.Uo;for(c=0;c<f.length;c++)for(g=q[c],r=f[c],h=(1-d)*g[b]+d*g[e],g=0;g<p.length;g++)p[g].Lh[r]=h;for(c=0;c<n.length;c++)for(q=m[c],r=n[c],q=Ca.lerp(q.subarray(3*b,3*b+3),q.subarray(3*e,3*e+3),d,xa),g=0;g<p.length;g++)p[g].je[3*r]=q[0],p[g].je[3*r+1]=q[1],p[g].je[3*r+2]=q[2];Z.is_world(a)&&W.hy(a);break;
case 70:d=F(c);b=d[0];e=d[1];d=d[2];f=c.nj;(h=c.jg)&&f[0]&&pa.set_light_energy(a.Db,(1-d)*h[b]+d*h[e]);(c=c.color)&&f[1]&&(xa[0]=(1-d)*c[3*b]+d*c[3*e],xa[1]=(1-d)*c[3*b+1]+d*c[3*e+1],xa[2]=(1-d)*c[3*b+2]+d*c[3*e+2],pa.set_light_color(a.Db,xa));g=a.S;for(c=0;c<g.length;c++)W.rW(a,g[c].kb);break;case 80:d=F(c);b=d[0];e=d[1];d=d[2];f=c.nj;g=a.S;l=W.Tb(g[0].kb,O.Hb);h=c.jg;h=f[0]?(1-d)*h[b]+d*h[e]:l.jg;k=c.Ld;f[1]?(xa[0]=(1-d)*k[3*b]+d*k[3*e],xa[1]=(1-d)*k[3*b+1]+d*k[3*e+1],xa[2]=(1-d)*k[3*b+2]+d*k[3*
e+2],k=xa):k=l.Ld;var u=c.Xd;f[2]?(J[0]=(1-d)*u[3*b]+d*u[3*e],J[1]=(1-d)*u[3*b+1]+d*u[3*e+1],J[2]=(1-d)*u[3*b+2]+d*u[3*e+2],l=J):l=l.Xd;u=c.fog_intensity;f[3]&&(m=(1-d)*u[b]+d*u[e]);u=c.fog_depth;f[4]&&(n=(1-d)*u[b]+d*u[e]);u=c.fog_start;f[5]&&(p=(1-d)*u[b]+d*u[e]);u=c.fog_height;f[6]&&(r=(1-d)*u[b]+d*u[e]);c=c.wm;f[7]&&(na[0]=(1-d)*c[3*b]+d*c[3*e],na[1]=(1-d)*c[3*b+1]+d*c[3*e+1],na[2]=(1-d)*c[3*b+2]+d*c[3*e+2],q=na);for(c=0;c<g.length;c++)b=a.S[c].kb,(f[0]||f[1]||f[2])&&W.set_environment_colors(b,
h,k,l),f[3]&&W.xI(b,m),f[4]&&W.vI(b,n),f[5]&&W.yI(b,p),f[6]&&W.wI(b,r),f[7]&&W.set_fog_color_density(b,q);break;default:ca.K("Unknown animation type:"+k)}}}function F(a){var b=a.Wy[0],c=a.Wy[1]-b,b=a.hg-b;0>b&&(b=0);b>=c&&(b=c);b/=a.WD;c=Math.floor(b);a=a.UD[c]?b-c:0;b=Math.ceil(c+a);sa[0]=c;sa[1]=b;sa[2]=a;return sa}function u(a,b){var c=a.A,d=c.nf,e=c.fi,f=e[0],e=e[1];if(-1!=e){if(-1!=f){var h=a.pa[f];if(h.play||0==b||c.Kh){var k=F(h),l=k[0],m=k[1];c.Bf=k[2];var k=h.Ob[l],n=h.Ob[m],p=h.trans[l],
r=h.trans[m]}else d=1}else d=1;e=a.pa[e];if(e.play||0==b||c.Kh){var f=F(e),q=f[0],u=f[1];c.Bf=f[2]}else if(-1!=f&&h.play)d=0;else return;var f=e.Ob[q],v=e.Ob[u],w=e.trans[q],y=e.trans[u];if(1!=d||c.Kh)if(0!=d||c.Kh){d=c.fg;if(c.Kh&&!c.Bl&&!c.ll){c.Bl=new Float32Array(c.Wd.length);c.ll=new Float32Array(c.Pd.length);for(var x in d)k=d[x],k.bn||D(c,k)}for(x in d)k=d[x],k.bn||g(c,k,h,e,l,m,q,u)}else c.Pd.set(k),c.De.set(n),c.Wd.set(p),c.Ie.set(r);else c.Pd.set(f),c.De.set(v),c.Wd.set(w),c.Ie.set(y);ba.V(a);
ia.KW(a)}}function g(a,b,c,d,e,f,h,k){var l=b.bn,m=a.nf,n=na,p=Y,r=La,q=Ua,u=ya,v=Ka,w=Ia,y=ta,x=4*b.gi,A=d.ij[h],D=d.jj[h],B=d.ij[k],z=d.jj[k];if(!a.Kh)var t=c.ij[e],C=c.jj[e],F=c.ij[f],E=c.jj[f];for(var G=0;4>G;G++)p[G]=A[x+G],q[G]=D[x+G],v[G]=B[x+G],y[G]=z[x+G],a.Kh?(n[G]=a.ll[x+G],r[G]=a.Bl[x+G],u[G]=a.ll[x+G],w[G]=a.Bl[x+G]):(n[G]=t[x+G],r[G]=C[x+G],u[G]=F[x+G],w[G]=E[x+G]);wa.slerp(n,p,m,n);ca.Zt(r,q,m,r);ja.set_transcale(r,va);ja.set_quat(n,va);l&&ja.multiply(l.gy,va,va);ja.copy(va,b.gy);ja.multiply(va,
b.NC,va);ja.so(va,r);ja.ub(va,n);wa.slerp(u,v,m,u);ca.Zt(w,y,m,w);ja.set_transcale(w,va);ja.set_quat(u,va);l&&ja.multiply(l.fy,va,va);ja.copy(va,b.fy);ja.multiply(va,b.NC,va);ja.so(va,w);ja.ub(va,u);for(G=0;4>G;G++)a.Pd[x+G]=n[G],a.Wd[x+G]=r[G],a.De[x+G]=u[G],a.Ie[x+G]=w[G];b=b.Ju;for(G=0;G<b.length;G++)g(a,b[G],c,d,e,f,h,k)}function D(a,b){for(var c=4*b.gi,d=b.bn,e=a.nf,f=La,g=na,h=Ua,k=Y,l=0;4>l;l++)f[l]=a.Wd[c+l],g[l]=a.Pd[c+l],h[l]=a.Ie[c+l],k[l]=a.De[c+l];ja.set_transcale(f,va);ja.set_quat(g,
va);ja.multiply(va,b.Xh,va);ja.copy(va,b.gy);d&&(ja.invert(d.gy,X),ja.multiply(X,va,va));ja.so(va,f);ja.ub(va,g);ja.set_transcale(h,va);ja.set_quat(k,va);ja.multiply(va,b.Xh,va);ja.copy(va,b.fy);d&&(ja.invert(d.fy,X),ja.multiply(X,va,va));ja.so(va,h);ja.ub(va,k);wa.slerp(g,k,e,g);ca.Zt(f,h,e,f);for(l=0;4>l;l++)a.ll[c+l]=g[l],a.Bl[c+l]=f[l];c=b.Ju;for(l=0;l<c.length;l++)D(a,c[l])}function B(a,b){var c=a.A,d=c.nf,e=c.Qn;if(0!=e){!c.Kh||c.Bl||c.ll||(d=c.nf=0);var d=c.Pn-d,f=e*b;ca.sign(d)==ca.sign(e)&&
Math.abs(f)<Math.abs(d)?c.nf+=f:(c.nf=c.Pn,c.Qn=0,c.dj&&(c.dj(),c.dj=null),c.Kh&&(c.Bl=null,c.ll=null,c.Kh=!1))}}function N(a,b){for(var c=[],d=[],e=[],f=[],g=a.J.sB,h=0;h<g;h++){for(var k in b){var l=b[k],m=l.Ws,n=a.J.lz[k];n?ja.copy(n.subarray(8*h,8*h+8),m):ja.identity(m);l.ey=!1}l=L(b);c.push(l.trans);d.push(l.Ob);e.push(l.jj);f.push(l.ij)}return{trans:c,Ob:d,jj:e,ij:f}}function L(a){var b=[],c=[],d=[],e=[],f=new Float32Array(4),g=new Float32Array(4),h;for(h in a){var k=a[h],l=f,m=g,n=k.ju,p=n[n.length-
1],r=p.MC;p.ey||ja.identity(r);for(p=n.length-1;0<=p;p--){var q=n[p],u=q.MC;if(q.ey)r=u;else{var v=q.Xh,w=q.Ws;ja.invert(v,va);ja.multiply(w,va,va);ja.multiply(v,va,va);ja.multiply(r,va,u);r=u;q.ey=!0}}n=q.MC;l[0]=n[0];l[1]=n[1];l[2]=n[2];l[3]=n[3];m[0]=n[4];m[1]=n[5];m[2]=n[6];m[3]=n[7];wa.normalize(m,m);l=k.gi;ja.multiply(k.Hp,k.Ws,va);for(k=0;4>k;k++)m=4*l+k,b[m]=f[k],c[m]=g[k],d[m]=va[k],e[m]=va[k+4]}return{trans:b,Ob:c,jj:d,ij:e}}function A(a,b,c){var d=[],e=[],f;for(f in c)for(var g=c[f],h=
g.gi,g=g.Pz,k=0;4>k;k++){var l=4*g+k,m=4*h+k;d[l]=a[m];e[l]=b[m]}d=new Float32Array(d);e=new Float32Array(e);return{trans:d,Ob:e}}function G(a){var b=a.J,c;if(b.lz)c=10;else if(b.aa)if("volume"in b.aa||"pitch"in b.aa)c=40;else{var d;a:{if(d=a.J.aa)for(var e in d)if(-1!=e.indexOf("nodes")){d=!0;break a}d=!1}if(d)c=60;else{var f;a:{if(a.J.aa){d=a.fcurves;for(f in d)if("color"==f&&!d[f][3]){f=!0;break a}if("energy"==f){f=!0;break a}}f=!1}if(f)c=70;else if(f=a.J.aa,"light_settings.environment_energy"in
f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)c=80;else{a:{if(a.J.aa)for(c in a=a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:0}}}else c=0;b.type=c}function z(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function I(a,b){b[0]=b[1]=0;for(var c in a)"energy"==
c?b[0]=1:"color"==c&&(b[1]=1)}function S(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function m(a,b,c,d,e,f,g){var h=a+(b-a)/2,k=K(h,d,e,f,g)-c;return.02>Math.abs(k)?h:0<k?m(a,h,c,d,e,f,g):m(h,b,c,d,e,f,g)}function K(a,b,
c,d,e){var f=1-a;return b*f*f*f+3*c*f*f*a+3*d*f*a*a+e*a*a*a}function U(a,b){h(a,b);-1==Ea.indexOf(a)&&Ea.push(a)}function Q(a,b){ba.V(a);aa.sync_transform(a);d(a,0,b,!0)}function R(a,d,e,f){f=f||0;if(Z.is_mesh(a)){var g=ga(a,e);if(g)return U(a,f),c(a,g,f),Q(a,f),!0;if((g=ra(a,e))&&"EMITTER"==g.Pw){U(a,f);d=g.name;e=f;for(var g=a.S,h=0;h<g.length;h++)for(var k=g[h].$,l=0;l<k.length;l++){var m=k[l].Ja;m&&m.name==d&&b(a.pa[e],m)}Q(a,f);return!0}}if(g=ca.keysearch("name",e,Fa)||ca.keysearch("name",e+
"_B4W_BAKED",Fa)){U(a,f);if(v(a,d,g,f))return Q(a,f),!0;a.pa[f]=null}fa.error('Unsupported object: "'+a.name+'" or animation name: "'+e+'"');return!1}function ga(a,b){for(var c=0;c<a.ad.length;c++){var d=a.ad[c];if(d.name===b)return d}return null}function ra(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,f=0;f<e.length;f++){var g=e[f].Ja;if(g&&g.name===b)return g}return null}function T(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}
var ia=t("__armature"),ha=t("__config"),pa=t("__lights"),Z=t("__obj_util"),ma=t("__particles"),aa=t("__physics"),fa=t("__print"),wa=t("__quat"),da=t("__reformer"),W=t("__scenes"),Ga=t("__sfx"),O=t("__subscene"),ua=t("__time"),ba=t("__transform"),ja=t("__tsr"),ca=t("__util"),Ca=t("__vec3"),la=ha.Zl,V=ha.zh;a.OK=1E-6;a.OBJ_ANIM_TYPE_NONE=0;a.OBJ_ANIM_TYPE_ARMATURE=10;a.OBJ_ANIM_TYPE_OBJECT=20;a.OBJ_ANIM_TYPE_VERTEX=30;a.OBJ_ANIM_TYPE_SOUND=40;a.OBJ_ANIM_TYPE_PARTICLES=50;a.OBJ_ANIM_TYPE_MATERIAL=60;
a.xL=70;a.wL=80;a.SLOT_0=0;a.SLOT_1=1;a.SLOT_2=2;a.SLOT_3=3;a.SLOT_4=4;a.SLOT_5=5;a.SLOT_6=6;a.SLOT_7=7;a.SLOT_ALL=-1;a.AB_CYCLIC=10;a.AB_FINISH_RESET=20;a.AB_FINISH_STOP=30;var sa=Array(3),xa=new Float32Array(3),J=new Float32Array(3),La=new Float32Array(4),Ua=new Float32Array(4),Ia=new Float32Array(4),ta=new Float32Array(4),na=new Float32Array(4),Y=new Float32Array(4),ya=new Float32Array(4),Ka=new Float32Array(4),va=ja.create(),X=ja.create(),Ea=[],Fa=[];a.iG=function(){return ca.trunc((V.uw-50)/
4)};a.frame_to_sec=function(a){return a/ua.Cd()};a.update=function(a){for(var b=0;b<Ea.length;b++){for(var c=Ea[b],d=0;8>d;d++)k(c,a,d);c.A.ej&&(B(c,a),u(c,a))}for(b=0;b<Ea.length;b++)for(c=Ea[b],d=0;8>d&&c.pa.length;d++)e(c,d)};a.WQ=function(){return Fa};a.get_anim_names=function(a){var b=[];if(x(a))for(var c=0;c<a.ad.length;c++)b.push(a.ad[c].name);for(var d=[],c=0;c<Fa.length;c++){var e=Fa[c],g=e.J;20==g.type?d.push(e):60!=e.J.type||"MESH"!=a.type&&"WORLD"!=a.type?10==g.type&&"ARMATURE"==a.type?
d.push(e):40==g.type&&"SPEAKER"==a.type?d.push(e):80==g.type&&"WORLD"==a.type&&d.push(e):d.push(e)}for(c=0;c<d.length;c++)b.push(f(d[c].name));if(ma.tB(a)&&ma.KH(a))for(a=a.S,c=0;c<a.length;c++)for(d=a[c].$,e=0;e<d.length;e++)(g=d[e].Ja)&&b.push(g.name);return b};a.jJ=f;a.get_anim_type=function(a,b){var c=a.pa[b];return c?c.type:0};a.apply_def=function(a){for(var d=0,e=a.S,f=0;f<e.length;f++)for(var g=e[f].$,h=0;h<g.length;h++){var k=g[h].Ja;k&&"EMITTER"==k.Pw&&!g[h].Sg&&(U(a,d),b(a.pa[d],k),Q(a,
d),k.cyclic?a.pa[d].behavior=10:a.pa[d].behavior=a.Yl,d++)}e=a.rm.slice();for(f=0;f<e.length;f++)h=e[f],g=h.Ym,h=h.action,U(a,d),v(a,g,h,d)?(Q(a,d),a.pa[d].behavior=a.Yl,d++):a.pa[d]=null;x(a)&&(U(a,d),c(a,a.ad[0],d),Q(a,d),a.pa[d].behavior=a.Yl)};a.az=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:ca.K("Wrong animation behavior")}};a.$Q=function(a){var b=[];a=a.data.materials;for(var c=0;c<a.length;c++){var d=a[c],e=d.Md;e&&l(e,b,
[d.name])}return b};a.aR=function(a){var b=[],c=a.node_tree;c&&l(c,b,[a.name]);return b};a.DG=q;a.play=function(a,b,c){p(a.pa,c,function(a){a.play=!0;b?a.cv=b:a.cv=null;a.nr=!1});a.A.ej&&w(a)};a.stop=function(a,b){p(a.pa,b,function(a){a.play=!1;a.cv=null;a.nr=!1})};a.is_play=function(a,b){var c=a.pa;if(-1==b)for(var d=0;8>d;d++){if(c[d]&&c[d].play)return!0}else if(c=c[b])return c.play;return!1};a.set_frame=y;a.set_first_frame=function(a,b){b=b||0;p(a.pa,b,function(c){y(a,c.start,b)})};a.kA=function(a,
b){var c=a.pa[b];return c&&c.hg?c.hg:0};a.is_cyclic=function(a,b){var c=a.pa[b];return c&&10==c.behavior};a.set_behavior=function(a,b,c){p(a.pa,c,function(a){a.behavior=b})};a.get_behavior=function(a,b){var c=a.pa[b];return c&&c.behavior};a.apply_smoothing=function(a,b,c,d){p(a.pa,d,function(a){a.KC=b||0;a.MB=c||0})};a.remove_slot_animation=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.pa[c]=null;else a.pa[b]=null;a.A.ej&&n(a,b)};a.yW=d;a.MH=function(a){if("ARMATURE"==a.type||a.Qt||"WORLD"==a.type)return!0;
for(var b=0;b<a.rm.length;b++){var c=a.rm[b].action.J.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return ma.tB(a)&&ma.KH(a)||"MESH"==a.type&&a.ad.length?!0:!1};a.uE=function(a){if(T(a))return!0;if(a.Nn)for(var b=0;b<a.Nn.length;b++){var c=a.Nn[b].action.J.type;if(20==c||60==c&&"MESH"==a.type)return!0}return ma.yN(a)&&ma.xN(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};a.is_animated=function(a){return!!a.pa.length};a.ZR=function(a,
b,c,d,e){if(c=c?ca.keysearch("uuid",c,Fa):ca.keysearch("name",d,Fa)||ca.keysearch("name",d+"_B4W_BAKED",Fa))if(h(a,e),-1==Ea.indexOf(a)&&Ea.push(a),d=c.frame_range,d[0]>d[1])fa.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"');else switch(d=c.J,d.type){case 10:Z.is_armature(a)&&(d=r(a,b,c),d||(d=N(c,a.A.fg),H(a,b,c,d)),E(a,e,c,d));break;case 20:(e=d.aa.tsr)?(d=r(a,b,c),d||(d=C(c,e),H(a,b,c,d))):fa.warn('Incompatible action "'+c.name+'" has been applied to object "'+
a.name+'"')}};a.SP=function(a,b){for(var c=a.On,d=[],e=0;e<c.length;e+=3)(60!=c[e].J.type||null!==c[e+1]&&c[e+1].split("%join%")[0]!=b)&&d.push(c[e],c[e+1],c[e+2]);a.On=d};a.HN=L;a.rQ=A;a.IM=function(a){function b(a,b){for(var c=0;c<b;c++){var d=a.subarray(8*c+4,8*c+8);wa.normalize(d,d)}}function c(a,b){if(-1<a.indexOf("location"))var c=0,d=b;else-1<a.indexOf("rotation_quaternion")?(c=4,d=0==b?3:b-1):-1<a.indexOf("scale")?(c=3,d=0):(c=0,d=b);return c+d}function d(a,b,c,d,g){if(-1<c.search(e)){a=b;
c=c.split('"')[1];var h=f}else 8==g?(c="tsr",h=f):1<g?h=new Float32Array(g):h=0;if(!a[c]){g=a;b=c;if("object"==typeof h&&h.length)for(var k=h.length,l=new Float32Array(d*k),m=0;m<d;m++)for(var n=0;n<k;n++)l[m*k+n]=h[n];else if("number"==typeof h)for(l=new Float32Array(d),m=0;m<d;m++)l[m]=h;else ca.K("Wrong storage default value");g[b]=l}return a[c]}var e=new RegExp(/pose.bones\[\".+\"\]/g),f=ja.create(),g=a.J={type:0,sB:0,TH:0,aa:null,lz:null,oE:null,nj:new Int8Array(8)};g.TH=1/la.ym;var h=a.fcurves,
k={},l={},m=0,n;for(n in h){var p=h[n],r;for(r in p){var q=p[r],u=q.Zf;da.RN(q,a);q=q.num_channels;m||(m=u.length);for(var q=d(k,l,n,m,q),v=q.length/m,w=c(n,r|0),y=0;y<m;y++)q[y*v+w]=u[y]}}if(ca.zj(k)){for(var x in k)"tsr"==x&&b(k[x],m);g.aa=k}if(ca.zj(l)){for(var A in l)b(l[A],m);g.lz=l}g.sB=m;g.oE=a.yM;"tsr"in k&&z(h,g.nj);("color"in k||"energy"in k)&&I(h,g.nj);("light_settings.environment_energy"in k||"horizon_color"in k||"zenith_color"in k||"mist_settings.intensity"in k||"mist_settings.depth"in
k||"mist_settings.start"in k||"mist_settings.height"in k||"b4w_fog_color"in k)&&S(h,g.nj);G(a);Fa.push(a)};a.ZQ=function(a,b){return(b-a)*la.ym+1};a.bN=function(a,b,c,d,e,f){var g=new Float32Array(2),h=new Float32Array(2),k=new Float32Array(2),l=new Float32Array(2),n=b[1],p=b[2],r=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var q=0,u=0,v=null;e<=f;e++)if(e<n)for(var w=0;w<la.ym;w++)c[q++]=p;else if(e>r)for(w=0;w<la.ym;w++)c[q++]=a;else{var y=b[u],x=3;0===y&&(x+=2);0===v&&(x+=2);var A=
2===y?0:1;if(b[u+1]==b[u+x+1])v=y,u+=x;else{w=0;e==b[u+1]&&(A&&(d[q]=1),c[q]=b[u+2],q++,w++);if(e==r)for(;w<la.ym;w++)c[q++]=a;else for(g[0]=b[u+1],g[1]=b[u+2],0!==y?(h[0]=0,h[1]=0):0===v?(h[0]=b[u+5],h[1]=b[u+6]):(h[0]=b[u+3],h[1]=b[u+4]),0!==y?(k[0]=0,k[1]=0):(k[0]=b[u+x+3],k[1]=b[u+x+4]),l[0]=b[u+x+1],l[1]=b[u+x+2];w<la.ym;w++){var D=e+w/la.ym;switch(y){case 0:var B,z,t,C=g,F=h,G=k,E=l,H=[],ya=[];H[0]=C[0]-F[0];H[1]=C[1]-F[1];ya[0]=E[0]-G[0];ya[1]=E[1]-G[1];B=E[0]-C[0];t=Math.abs(H[0]);z=Math.abs(ya[0]);
t+z&&t+z>B&&(B/=t+z,F[0]=C[0]-B*H[0],F[1]=C[1]-B*H[1],G[0]=E[0]-B*ya[0],G[1]=E[1]-B*ya[1]);A&&(d[q]=1);c[q]=K(m(0,1,D,g[0],h[0],k[0],l[0]),g[1],h[1],k[1],l[1]);q++;break;case 1:A&&(d[q]=1);C=g[0];F=g[1];G=(l[1]-F)/(l[0]-C);c[q]=G*D+(F-G*C);q++;break;case 2:A&&(d[q]=1);c[q]=b[u+2];q++;break;default:ca.K("Unknown keyframe interpolation mode: "+y)}}e+1==b[u+x+1]&&(v=y,u+=x)}}};a.apply=R;a.ZM=function(a,b,c,d){d=d||0;var e=ca.keysearch("uuid",c,Fa);if(e){U(a,d);if(v(a,b,e,d)){Q(a,d);return}a.pa[d]=null}fa.error('Unsupported object: "'+
a.name+'" or animation uuid: "'+c+'"')};a.aK=function(a,b){var c=ca.keysearch("name",b,Fa)||ca.keysearch("name",b+"_B4W_BAKED",Fa);if(c){if(0==c.J.type)return!1}else if(!(ra(a,b)||Z.is_mesh(a)&&ga(a,b)))return!1;return!0};a.get_slot_num_by_anim=function(a,b){for(var c=a.pa,d=0;d<c.length;d++){var e=c[d];if(e&&f(e.fj)==f(b))return d}return-1};a.YQ=function(a,b){var c=a.pa[b];return c&&c.fj?f(c.fj):null};a.remove=function(a){a.pa.length=0;a=Ea.indexOf(a);-1!=a&&Ea.splice(a,1)};a.aU=function(a){for(var b=
Fa.length-1;0<=b;b--)Fa[b].zM==a&&Fa.splice(b,1)};a.apply_to_first_empty_slot=function(a,b){if(!a.pa.length)return R(a,null,b,0)?0:-1;for(var c=0;c<a.pa.length;c++)if(!a.pa[c])return R(a,null,b,c)?c:-1};a.set_skel_mix_factor=function(a,b,c,d){a=a.A;a.Qn=(b-a.nf)/c;a.Pn=b;a.dj&&a.dj();a.dj=d};a.mix_from_cur_pos=function(a,b,c,d){a=a.A;a.fi[1]=b;a.Qn=1/c;a.Pn=1;a.dj&&a.dj();a.dj=d;a.Bl=null;a.ll=null;a.Kh=!0};a.set_speed=function(a,b,c){p(a.pa,c,function(a){a.speed=b})};a.get_speed=function(a,b){return a.pa[b].speed};
a.get_anim_start_frame=function(a,b){return a.pa[b].start};a.get_anim_length=function(a,b){return a.pa[b].length};a.cleanup=function(){Ea.length=0;Fa.length=0};a.uQ=function(a){var b=(a[0]||a[1]||a[2]).Zf.length,c=na,d=xa,e=!!a[0];e||(a[0]={Zf:new Float32Array(b),num_channels:8});var f=!!a[1];f||(a[1]={Zf:new Float32Array(b),num_channels:8});var g=!!a[2];g||(a[2]={Zf:new Float32Array(b),num_channels:8});a[3]={Zf:new Float32Array(b),num_channels:8};for(var h=0;h<b;h++)d[0]=e?a[0].Zf[h]:0,d[1]=f?a[1].Zf[h]:
0,d[2]=g?a[2].Zf[h]:0,ca.euler_to_quat(d,c),a[0].Zf[h]=c[3],a[1].Zf[h]=c[0],a[2].Zf[h]=c[1],a[3].Zf[h]=c[2]};a.dG=T;a.uV=function(a,b){for(var c=7,d=0,e=0;e<Fa.length;e++){var f=Fa[e];if(f.name==b){d=f.J.type;break}}0==d&&(ga(a,b)?d=30:(e=ra(a,b))&&"EMITTER"==e.Pw&&(d=50));for(e=0;8>e;e++)if(f=a.pa[e]){if(f.type==d)return e}else e<c&&(c=e);return c}};b4w.module.__time=function(a,t){function e(){return-1!==c.Zl.iv?c.Zl.iv:y}var c=t("__config"),b=0,h=0,f=[],q=0,l=0,x=[],y=-1,p=0;a.II=function(a){b=a;h=performance.now();for(a=0;a<f.length;a++){var c=f[a];b>c.Xz&&(f.splice(a,1),a--,c.callback())}for(a=0;a<x.length;a++){var c=x[a],d=1-(c.Xz-b)/c.duration,d=Math.min(d,1);c.callback(c.from+d*(c.to-c.from));1==d&&(x.splice(a,1),a--)}};a.get_timeline=function(){return b};a.OU=function(a){p=a};a.iR=function(){return p};a.set_timeout=function(a,c){var d;
q++;d=q;f.push({id:d,callback:a,Xz:b+(performance.now()-h+c)/1E3});return d};a.clear_timeout=function(a){for(var b=0;b<f.length;b++)if(f[b].id==a){f.splice(b,1);break}};a.clear_animation=function(a){for(var b=x.length;b--;)if(x[b].id==a){x.splice(b,1);break}};a.animate=function(a,c,e,f){e/=1E3;var d;l++;d=l;x.push({id:d,callback:f,from:a,to:c,Xz:b+e,duration:e});f(a);return d};a.reset=function(){h=b=0;f.length=0;l=q=x.length=0};a.Cd=e;a.RU=function(a){y=a};a.get_frame=function(a){return a*e()}};b4w.module.__transform=function(a,t){function e(a,b){d.Wg(a)?n.set_trans(b,d.Ug(a)):n.set_trans(b,a.A.D)}function c(a,b){var c=a.A;if(d.Wg(a)){n.set_quat(b,c.D);var e=d.ov(a),e=n.invert(e,D);n.multiply(e,c.D,d.Ug(a))}else n.set_quat(b,c.D)}function b(a,b){d.Wg(a)?n.set_quat(b,d.Ug(a)):n.set_quat(b,a.A.D)}function h(a,b){n.ub(a.A.D,b);return b}function f(a,b){d.Wg(a)?n.ub(d.Ug(a),b):n.ub(a.A.D,b);return b}function q(a,b){d.Wg(a)?n.copy(b,d.Ug(a)):n.copy(b,a.A.D)}function l(a,b){d.Wg(a)?n.copy(d.Ug(a),
b):n.copy(a.A.D,b);return b}function x(a){var b=a.A,c=a.S,e=a.type;"CAMERA"==e&&p.FJ(a);d.oW(a,N);"CAMERA"==e&&p.mW(a);y.Wn(b.va,b.D,b.wh);y.bu(b.tc,b.D,b.se);for(var f=0;f<c.length;f++)for(var h=c[f].$,k=0;k<h.length;k++)H.PJ(h[k],b.D,c[f].eg[k]);switch(e){case "MESH":a.BH&&n.invert(a.A.D,a.A.Dy);if(h=a.Qt)n.invert(h.A.D,D),n.multiply(D,b.D,D),n.so(D,b.rq),n.ub(D,b.qq);b.rr=!0;break;case "CAMERA":for(f=0;f<c.length;f++)p.nW(a,c[f]);break;case "SPEAKER":w.CV(a,N,L);break;case "LAMP":v.sW(a)}for(var h=
n.Mb(b.D,F),l=n.ub(b.D,g),f=0;f<c.length;f++)if(k=c[f],k.Vv){var q=k.kb,u=q.J;switch(e){case "MESH":b.af&&E.bC(q);u=k.qj;null!=b.ce&&u&&E.GJ(u,h);break;case "EMPTY":r.qW(a);break;case "CAMERA":if(E.get_active()==q&&E.Mk(q)==a){E.AU(q);if(u.Yc){(u.Yc.enable_csm||u.Yc.cQ)&&E.bC(q);var A=H.Da(a,q).ja[0];E.JW(A,u.wa)}w.OS(q,h,l,N,L)}break;case "LAMP":E.$s(a,q)}u=k.Mi;A=a.us;if(A.length)for(k=0;k<u.length;k++){var B=u[k].H;E.IJ(u[k],h,l);H.JJ(A,B.xc);p.kV(B,E.Mk(q))}}b=a.te;for(f=0;f<b.length;f++)x(b[f]);
a=a.Dz;for(f=0;f<a.length;f++)b=a[f],h=b[0],d.jW(h,b[1])}var y=t("__boundings"),p=t("__camera"),d=t("__constraints"),v=t("__lights"),r=t("__objects"),H=t("__obj_util"),E=t("__scenes"),w=t("__sfx"),n=t("__tsr"),C=t("__util"),k=t("__vec3"),F=new Float32Array(3),u=new Float32Array(3),g=new Float32Array(4),D=n.create(),B=n.create(),N=0,L=0;a.update=function(a){N=a;L++};a.set_translation=function(a,b){var c=a.A;if(d.Wg(a)){n.set_trans(b,c.D);var e=d.ov(a),e=n.invert(e,D);n.multiply(e,c.D,d.Ug(a))}else n.set_trans(b,
c.D)};a.set_translation_rel=e;a.get_translation=function(a,b){n.Mb(a.A.D,b);return b};a.get_translation_rel=function(a,b){d.Wg(a)?n.Mb(d.Ug(a),b):n.Mb(a.A.D,b);return b};a.set_rotation=c;a.set_rotation_rel=b;a.get_rotation=h;a.get_rotation_rel=f;a.set_rotation_euler=function(a,b){var d=C.euler_to_quat(b,g);c(a,d)};a.set_rotation_euler_rel=function(a,c){var d=C.euler_to_quat(c,g);b(a,d)};a.get_rotation_euler=function(a,b){var c=h(a,g);return b=C.quat_to_euler(c,b)};a.get_rotation_euler_rel=function(a,
b){var c=f(a,g);return b=C.quat_to_euler(c,b)};a.set_scale=function(a,b){var c=a.A;if(d.Wg(a)){var c=d.Ug(a),e=n.get_scale(d.ov(a));n.set_scale(b/e,c)}else n.set_scale(b,c.D)};a.set_scale_rel=function(a,b){var c=a.A;d.Wg(a)?n.set_scale(b,d.Ug(a)):n.set_scale(b,c.D)};a.get_scale=function(a){return n.get_scale(a.A.D)};a.get_scale_rel=function(a){return d.Wg(a)?n.get_scale(d.Ug(a)):n.get_scale(a.A.D)};a.set_tsr=function(a,b){n.copy(b,a.A.D);if(d.Wg(a)){var c=d.ov(a),c=n.invert(c,D);n.multiply(c,a.A.D,
d.Ug(a))}};a.set_tsr_rel=q;a.get_tsr=function(a,b){return n.copy(a.A.D,b)};a.get_tsr_rel=l;a.get_object_size=function(a){var b=a.A;a=b.hj;var c=n.get_scale(b.D),b=c*(a.max_x-a.min_x),d=c*(a.max_y-a.min_y);a=c*(a.max_z-a.min_z);return.5*Math.sqrt(b*b+d*d+a*a)};a.get_object_center=function(a,b,c){b?(a=a.A,k.copy(a.se.U,c)):(a=a.A,b=a.hj,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,n.transform_vec3(c,a.D,c));return c};a.move_local=function(a,b,c,d){var f=l(a,D),g=F;g[0]=
b;g[1]=c;g[2]=d;n.transform_vec3(g,f,g);e(a,g)};a.XB=function(a,b){var c=l(a,D),d=n.set_quat(b,n.identity(B));n.multiply(c,d,d);q(a,d)};a.V=x;a.distance=function(a,b){var c=n.Mb(a.A.D,F),d=n.Mb(b.A.D,u);return k.dist(c,d)};a.$r=function(a,b){var c=n.Mb(a.A.D,F);return k.dist(c,b)}};b4w.module.__tsr=function(a,t){function e(){var a=new Float32Array(8);a[3]=1;a[7]=1;return a}function c(){var a=new Float32Array(9);a[3]=1;a[7]=1;return a}function b(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b}function h(a,b,c,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=b;d[4]=c[0];d[5]=c[1];d[6]=c[2];d[7]=c[3];return d}function f(a,b){b[0]=a[4];b[1]=a[5];b[2]=a[6];b[3]=a[7];return b}function q(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],l=b[5],n=b[6];
b=b[7];var p=a[0]*g,r=a[1]*g,q=a[2]*g;a=b*p+l*q-n*r;var g=b*r+n*p-h*q,v=b*q+h*r-l*p,p=-h*p-l*r-n*q;c[0]=a*b+p*-h+g*-n-v*-l;c[1]=g*b+p*-l+v*-h-a*-n;c[2]=v*b+p*-n+a*-l-g*-h;c[0]+=d;c[1]+=e;c[2]+=f;return c}var l=t("__mat4"),x=t("__quat"),y=t("__util"),p=t("__vec3"),d=Math.sin(-Math.PI/4),v=-d,r=new Float32Array(3),H=new Float32Array(4),E=new Float32Array(16);a.create=e;a.clone=function(a){var c=e();b(a,c);return c};a.from_values=function(a,b,c,d,f,h,g,l){var k=e();k[0]=a;k[1]=b;k[2]=c;k[3]=d;k[4]=f;
k[5]=h;k[6]=g;k[7]=l;return k};a.nm=c;a.FY=function(a){var d=c();b(a,d);return d};a.aZ=function(a,b,d,e,f,h,g,l){var k=c();k[0]=a;k[1]=b;k[2]=d;k[3]=e;k[4]=f;k[5]=h;k[6]=g;k[7]=l;return k};a.copy=b;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=1;return a};a.set_sep=h;a.set_trans=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set_scale=function(a,b){b[3]=a;return b};a.set_transcale=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set_quat=function(a,
b){b[4]=a[0];b[5]=a[1];b[6]=a[2];b[7]=a[3];return b};a.get_trans_view=function(a){return a.subarray(0,3)};a.Mb=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.get_scale=function(a){return a[3]};a.so=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.get_quat_view=function(a){return a.subarray(4,8)};a.ub=f;a.invert=function(a,b){var c=1/a[3];if(!c)return null;var d=a[0],e=a[1],f=a[2];H[0]=a[4];H[1]=a[5];H[2]=a[6];H[3]=a[7];x.invert(H,H);var g=H[0],h=H[1],l=H[2],n=H[3],d=d*c,
e=e*c,p=f*c,f=n*d+h*p-l*e,r=n*e+l*d-g*p,q=n*p+g*e-h*d,d=-g*d-h*e-l*p;b[0]=-(f*n+d*-g+r*-l-q*-h);b[1]=-(r*n+d*-h+q*-g-f*-l);b[2]=-(q*n+d*-l+f*-h-r*-g);b[3]=c;b[4]=g;b[5]=h;b[6]=l;b[7]=n;return b};a.to_mat4=function(a,b){var c=a[3];l.fromRotationTranslation(a.subarray(4,8),a.subarray(0,3),b);for(var d=0;12>d;d++)b[d]*=c;return b};a.from_mat4=function(a,b){var c=y.ZA(a,r),d=y.sH(a),e=y.matrix_to_quat(a,H);h(c,d,e,b);return b};a.multiply=function(a,b,c){q(b,a,c);c[3]=a[3]*b[3];var d=a[4],e=a[5],f=a[6];
a=a[7];var g=b[4],h=b[5],l=b[6];b=b[7];c[4]=d*b+a*g+e*l-f*h;c[5]=e*b+a*h+f*g-d*l;c[6]=f*b+a*l+d*h-e*g;c[7]=a*b-d*g-e*h-f*l;return c};a.ZV=function(a,b,c){var d=b[3];b=l.fromRotationTranslation(b.subarray(4,8),b.subarray(0,3),E);for(var e=0;12>e;e++)b[e]*=d;l.multiply(b,a,c);return c};a.transform_vec3=q;a.transform_vec3_inv=function(a,b,c){var d=b[3],e=a[0]-b[0],f=a[1]-b[1],g=a[2]-b[2];a=b[4];var h=b[5],l=b[6];b=b[7];var n=a*a+h*h+l*l+b*b,n=n?1/n:0;a=-a*n;h=-h*n;l=-l*n;b*=n;var n=b*e+h*g-l*f,p=b*f+
l*e-a*g,r=b*g+a*f-h*e,e=-a*e-h*f-l*g;c[0]=n*b+e*-a+p*-l-r*-h;c[1]=p*b+e*-h+r*-a-n*-l;c[2]=r*b+e*-l+n*-h-p*-a;c[0]/=d;c[1]/=d;c[2]/=d;return c};a.transform_vectors=function(a,b,c,d){d||(d=0);var e=a.length,f=b[0],g=b[1],h=b[2],k=b[3],l=b[4],n=b[5],p=b[6];b=b[7];for(var r=0;r<e;r+=3){var q=a[r]*k,v=a[r+1]*k,y=a[r+2]*k,m=b*q+n*y-p*v,w=b*v+p*q-l*y,x=b*y+l*v-n*q,q=-l*q-n*v-p*y;c[d+r]=m*b+q*-l+w*-p-x*-n;c[d+r+1]=w*b+q*-n+x*-l-m*-p;c[d+r+2]=x*b+q*-p+m*-n-w*-l;c[d+r]+=f;c[d+r+1]+=g;c[d+r+2]+=h}return c};
a.transform_dir_vectors=function(a,b,c,d){d||(d=0);var e=a.length,f=b[3],g=b[4],h=b[5],k=b[6];b=b[7];for(var l=0;l<e;l+=3){var n=a[l]*f,p=a[l+1]*f,r=a[l+2]*f,q=b*n+h*r-k*p,v=b*p+k*n-g*r,y=b*r+g*p-h*n,n=-g*n-h*p-k*r;c[d+l]=q*b+n*-g+v*-k-y*-h;c[d+l+1]=v*b+n*-h+y*-g-q*-k;c[d+l+2]=y*b+n*-k+q*-h-v*-g}return c};a.transform_dir_vec3=function(a,b,c){var d=b[3],e=b[4],f=b[5],g=b[6];b=b[7];var h=a[0]*d,l=a[1]*d,n=a[2]*d;a=b*h+f*n-g*l;var d=b*l+g*h-e*n,p=b*n+e*l-f*h,h=-e*h-f*l-g*n;c[0]=a*b+h*-e+d*-g-p*-f;c[1]=
d*b+h*-f+p*-e-a*-g;c[2]=p*b+h*-g+a*-f-d*-e;return c};a.transform_tangents=function(a,b,c,d){d||(d=0);var e=a.length,f=b[3],g=b[4],h=b[5],k=b[6];b=b[7];for(var l=0;l<e;l+=4){var n=a[l]*f,p=a[l+1]*f,r=a[l+2]*f,q=b*n+h*r-k*p,v=b*p+k*n-g*r,y=b*r+g*p-h*n,n=-g*n-h*p-k*r;c[d+l]=q*b+n*-g+v*-k-y*-h;c[d+l+1]=v*b+n*-h+y*-g-q*-k;c[d+l+2]=y*b+n*-k+q*-h-v*-g;c[d+l+3]=a[l+3]}return c};a.xJ=function(a,b,c){b=f(b,H);x.multiply(b,a,c)};a.$V=function(a,b,c,d){d=d||0;b=f(b,H);y.XT(a,b,c,d)};a.translate=function(a,b,
c){var d=a[3],e=a[4],f=a[5],g=a[6],h=a[7],l=b[0]*d,n=b[1]*d,p=b[2]*d;b=h*l+f*p-g*n;var d=h*n+g*l-e*p,r=h*p+e*n-f*l,l=-e*l-f*n-g*p;c[0]=a[0]+b*h+l*-e+d*-g-r*-f;c[1]=a[1]+d*h+l*-f+r*-e-b*-g;c[2]=a[2]+r*h+l*-g+b*-f-d*-e;c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];return c};a.interpolate=function(a,b,c,d){p.lerp(a.subarray(0,3),b.subarray(0,3),c,d.subarray(0,3));var e=a[3];d[3]=e+c*(b[3]-e);x.slerp(a.subarray(4,8),b.subarray(4,8),c,d.subarray(4,8));return d};a.TY=function(a,b,c,d){var e=a.subarray(0,
3),f=b.subarray(0,3),g=d.subarray(0,3);g[0]=f[0]*(c+1)-e[0]*c;g[1]=f[1]*(c+1)-e[1]*c;g[2]=f[2]*(c+1)-e[2]*c;d[3]=b[3]*(c+1)-a[3]*c;a=a.subarray(4,8);b=b.subarray(4,8);e=d.subarray(4,8);e[0]=b[0]*(c+1)-a[0]*c;e[1]=b[1]*(c+1)-a[1]*c;e[2]=b[2]*(c+1)-a[2]*c;e[3]=b[3]*(c+1)-a[3]*c;x.normalize(e,e);return d};a.iS=function(a,b,c,d,e){e[0]=a[0]+b*c[0];e[1]=a[1]+b*c[1];e[2]=a[2]+b*c[2];e[3]=a[3];c=d[0];var f=d[1];d=d[2];var g=a[4],h=a[5],l=a[6],k=a[7];e[4]=.5*(c*k+f*l-d*h);e[5]=.5*(f*k+d*g-c*l);e[6]=.5*(d*
k+c*h-f*g);e[7]=.5*(-c*g-f*h-d*l);e[4]=a[4]+e[4]*b;e[5]=a[5]+e[5]*b;e[6]=a[6]+e[6]*b;e[7]=a[7]+e[7]*b;a=e[4];b=e[5];c=e[6];f=e[7];a=a*a+b*b+c*c+f*f;0<a&&(a=1/Math.sqrt(a),e[4]*=a,e[5]*=a,e[6]*=a,e[7]*=a)};a.u_=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];var c=a[4],e=a[5],f=a[6],h=a[7];b[4]=c*v+h*d;b[5]=e*v+f*d;b[6]=f*v-e*d;b[7]=h*v-c*d};a.t_=function(a,b){b[0]=a[0];b[1]=-a[2];b[2]=a[1];b[3]=a[3];b[4]=a[4];b[5]=-a[6];b[6]=a[5];b[7]=a[7]}};b4w.module.__util=function(a,t){function e(a){return 0<a?1:0>a?-1:0}function c(a,b,c){var d=a[0],e=a[1];a=a[2];var f=Math.cos(d/2),g=Math.cos(e/2),h=Math.cos(a/2),l=Math.sin(d/2),e=Math.sin(e/2),k=Math.sin(a/2);if(-1<Ia.indexOf(b))var m=Math.cos((d+a)/2),n=Math.sin((d+a)/2),p=Math.cos((d-a)/2),r=Math.sin((d-a)/2),q=Math.cos((a-d)/2),u=Math.sin((a-d)/2);switch(b){case 0:c[0]=g*n;c[1]=e*p;c[2]=e*r;c[3]=g*m;break;case 1:c[0]=e*r;c[1]=g*n;c[2]=e*p;c[3]=g*m;break;case 2:c[0]=e*p;c[1]=e*r;c[2]=g*n;c[3]=
g*m;break;case 3:c[0]=g*n;c[1]=e*u;c[2]=e*q;c[3]=g*m;break;case 4:c[0]=e*q;c[1]=g*n;c[2]=e*u;c[3]=g*m;break;case 5:c[0]=e*u;c[1]=e*q;c[2]=g*n;c[3]=g*m;break;case 6:c[0]=l*g*h+f*e*k;c[1]=f*e*h-l*g*k;c[2]=f*g*k+l*e*h;c[3]=f*g*h-l*e*k;break;case 7:c[0]=f*g*k+l*e*h;c[1]=l*g*h+f*e*k;c[2]=f*e*h-l*g*k;c[3]=f*g*h-l*e*k;break;case 8:c[0]=f*e*h-l*g*k;c[1]=f*g*k+l*e*h;c[2]=l*g*h+f*e*k;c[3]=f*g*h-l*e*k;break;case 9:c[0]=l*g*h-f*e*k;c[1]=f*g*k-l*e*h;c[2]=f*e*h+l*g*k;c[3]=f*g*h+l*e*k;break;case 10:c[0]=f*e*h+l*
g*k;c[1]=l*g*h-f*e*k;c[2]=f*g*k-l*e*h;c[3]=f*g*h+l*e*k;break;case 11:c[0]=f*g*k-l*e*h,c[1]=f*e*h+l*g*k,c[2]=l*g*h-f*e*k,c[3]=f*g*h+l*e*k}return c}function b(a,b,c){var d=a[0],e=a[1],f=a[2];a=a[3];switch(b){case 0:c[0]=Math.atan2(d*e+f*a,e*a-d*f);c[1]=Math.acos(1-2*(e*e+f*f));c[2]=Math.atan2(d*e-f*a,d*f+e*a);break;case 1:c[0]=Math.atan2(d*a+e*f,f*a-d*e);c[1]=Math.acos(1-2*(d*d+f*f));c[2]=Math.atan2(e*f-d*a,d*e+f*a);break;case 2:c[0]=Math.atan2(d*f+e*a,d*a-e*f);c[1]=Math.acos(1-2*(d*d+e*e));c[2]=Math.atan2(d*
f-e*a,d*a+e*f);break;case 3:c[0]=Math.atan2(d*f-e*a,d*e+f*a);c[1]=Math.acos(1-2*(e*e+f*f));c[2]=Math.atan2(d*f+e*a,f*a-d*e);break;case 4:c[0]=Math.atan2(d*e-f*a,d*a+e*f);c[1]=Math.acos(1-2*(d*d+f*f));c[2]=Math.atan2(d*e+f*a,d*a-e*f);break;case 5:c[0]=Math.atan2(e*f-d*a,d*f+e*a);c[1]=Math.acos(1-2*(d*d+e*e));c[2]=Math.atan2(d*a+e*f,e*a-d*f);break;case 6:c[0]=Math.atan2(2*(d*a-e*f),1-2*(d*d+e*e));c[1]=Math.asin(2*(d*f+e*a));c[2]=Math.atan2(2*(f*a-d*e),1-2*(e*e+f*f));break;case 7:b=d*e+f*a;.499999<b?
(c[0]=0,c[1]=Math.PI/2,c[2]=2*Math.atan2(d,a)):-.499999>b?(c[0]=0,c[1]=-Math.PI/2,c[2]=-2*Math.atan2(d,a)):(c[0]=Math.atan2(2*(e*a-d*f),1-2*(e*e+f*f)),c[1]=Math.asin(2*(d*e+f*a)),c[2]=Math.atan2(2*(d*a-e*f),1-2*(d*d+f*f)));break;case 8:c[0]=Math.atan2(2*(f*a-d*e),1-2*(d*d+f*f));c[1]=Math.asin(2*(d*a+e*f));c[2]=Math.atan2(2*(e*a-d*f),1-2*(d*d+e*e));break;case 9:c[0]=Math.atan2(2*(d*a+e*f),1-2*(d*d+f*f));c[1]=Math.asin(2*(f*a-d*e));c[2]=Math.atan2(2*(d*f+e*a),1-2*(e*e+f*f));break;case 10:c[0]=Math.atan2(2*
(d*f+e*a),1-2*(d*d+e*e));c[1]=Math.asin(2*(d*a-e*f));c[2]=Math.atan2(2*(d*e+f*a),1-2*(d*d+f*f));break;case 11:b=e*a-d*f,.499999<b?(c[0]=0,c[1]=Math.PI/2,c[2]=-2*Math.atan2(f,a)):-.499999>b?(c[0]=0,c[1]=-Math.PI/2,c[2]=2*Math.atan2(f,a)):(c[0]=Math.atan2(2*(d*e+f*a),1-2*(e*e+f*f)),c[1]=Math.asin(2*(e*a-d*f)),c[2]=Math.atan2(2*(d*a+e*f),1-2*(d*d+e*e)))}return c}function h(a,b){var c=Math.cos(a[0]),d=Math.cos(a[1]),e=Math.cos(a[2]),f=Math.sin(a[0]),g=Math.sin(a[1]),h=Math.sin(a[2]),l=c*e,k=c*h,m=f*e,
n=f*h;b[0]=d*e;b[1]=d*h;b[2]=-g;b[3]=g*m-k;b[4]=g*n+l;b[5]=d*f;b[6]=g*l+n;b[7]=g*k-m;b[8]=d*c;return b}function f(a,b,c){c||(c=new Float32Array(3));m.transformQuat(b,a,c);return c}function q(a,b){b||(b=new Float32Array(4));N.fromMat4(a,fa);var c=fa[0],d=fa[3],e=fa[6],f=fa[1],g=fa[4],h=fa[7],l=fa[2],k=fa[5],m=fa[8],c=Math.sqrt(c*c+d*d+e*e)||1,f=Math.sqrt(f*f+g*g+h*h)||1,l=Math.sqrt(l*l+k*k+m*m)||1;fa[0]/=c;fa[3]/=c;fa[6]/=c;fa[1]/=f;fa[4]/=f;fa[7]/=f;fa[2]/=l;fa[5]/=l;fa[8]/=l;S.fromMat3(fa,b);S.normalize(b,
b);return b}function l(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=Math.sqrt(b*b+c*c+d*d),f=1/f;a[0]=b*f;a[1]=c*f;a[2]=d*f;a[3]=e*f}function x(a,b){var c=b;switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var d in a)c=x(a[d],c);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(d=0;d<a.length;d++)c=y(a[d],c);break;case Array:for(d=0;d<a.length;d++)c=x(a[d],c);break;
case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:c=y(0,c);break;default:n("Wrong object constructor:",a.constructor)}else c=y(0,c);return c;case "number":return y(a,c);case "boolean":return y(a|0,c);case "string":return p(a,c);case "function":case "undefined":return y(0,c)}}function y(a,b){var c=b;ba[0]=a;c=(c<<5)-c+ja[0];c&=c;c=(c<<5)-c+ja[1];return c&c}function p(a,b){for(var c=b,d=0;d<a.length;d++)c=(c<<
5)-c+a.charCodeAt(d),c&=c;return c}function d(a){return(34*a+1)*a%289}function v(a){return a-Math.floor(a)}function r(a){return H((34*a+5)*a)}function H(a){return a-289*Math.floor(a/289)}function E(a){return a-7*Math.floor(a/7)}function w(a,b,c){a<b&&(a=b);a>c&&(a=c);return a}function n(a){a&&G.error.apply(G,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function C(a,b,c){a-=b;c-=b;return b+(a-Math.floor(a/c)*c)}function k(a){return C(a,0,2*Math.PI)}function F(a,b){if(a&&b){var c=a instanceof Array;if(c!=b instanceof Array)return!1;var d=a.buffer instanceof ArrayBuffer&&"undefined"!==a.byteLength;if(d!=(b.buffer instanceof ArrayBuffer&&"undefined"!==b.byteLength))return!1;if(c){if(a.length!=b.length)return!1;for(c=0;c<a.length;c++)if(!u(a[c],b[c]))return!1}else if(d){if(a.length!=b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!=b[c])return!1}else{switch(a.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return a==
b}for(var e in a)if(!u(a[e],b[e]))return!1;for(e in b)if(!(e in a))return!1}return!0}return!(a||b)}function u(a,b){if(typeof a!=typeof b)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==b;case "object":return F(a,b);default:return!0}}function g(a,b,c){var d=R,e=m.dot(a,b);-.9999999>e?(m.cross(V,a,d),1E-6>m.length(d)&&m.cross(sa,a,d),m.normalize(d,d),S.setAxisAngle(d,Math.PI,c)):(m.cross(a,b,d),c.set(d),c[3]=1+e,S.normalize(c,c));return c}function D(a){if(""==a)return".";
var b=0==a.indexOf("/")|0;b&&0==a.indexOf("//")&&0!=a.indexOf("///")&&(b=2);a=a.split("/");for(var c=[],d=0;d<a.length;d++){var e=a[d];""!=e&&"."!=e&&(".."!=e||!b&&!c.length||c.length&&".."==c[c.length-1]?c.push(e):c.length&&c.pop())}a=c.join("/");for(d=0;d<b;d++)a="/"+a;return a||"."}function B(a,b,c){var d=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<d?(b[0]=Math.atan2(a[5],a[8]),b[1]=Math.atan2(-a[2],d),b[2]=Math.atan2(a[1],a[0]),c[0]=Math.atan2(-a[5],-a[8]),c[1]=Math.atan2(-a[2],-d),c[2]=Math.atan2(-a[1],
-a[0])):(b[0]=Math.atan2(-a[7],a[4]),b[1]=Math.atan2(-a[2],d),b[2]=0,m.copy(b,c))}var N=t("__mat3"),L=t("__mat4"),A=t("__math"),G=t("__print"),z=t("__tbn"),I=t("__tsr"),S=t("__quat"),m=t("__vec3"),K=t("__vec4"),U=0,Q={},R=new Float32Array(3),ga=new Float32Array(3),ra=new Float32Array(3),T=new Float32Array(3),ia=new Float32Array(3),ha=new Float32Array(3),pa=new Float32Array(3),Z=new Float32Array(3),ma=new Float32Array(4),aa=new Float32Array(4),fa=new Float32Array(9),wa=new Float32Array(9),da=new Float32Array(9),
W=new Float32Array(16),Ga=new Float32Array(16),O=S.create(),ua=S.create(),ba=new Float64Array(1),ja=new Uint32Array(ba.buffer),ca=new Float32Array([0,0,0,1]),Ca=new Float32Array([0,0,0,1,0,0,0,1]),la=new Float32Array([1,1,1]),V=new Float32Array([1,0,0]),sa=new Float32Array([0,1,0]),xa=new Float32Array([0,0,1]),J=new Float32Array([-1,0,0]),La=new Float32Array([0,-1,0]),Ua=new Float32Array([0,0,-1]),Ia=[0,1,2,4,5],ta=Math.floor(44488.07041494893),na=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,
0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])];a.Vy=new Float32Array([0,0,0]);a.wt=ca;a.KX=Ca;a.nq=la;a.AXIS_X=V;a.AXIS_Y=sa;a.AXIS_Z=xa;a.AXIS_MX=J;a.AXIS_MY=La;a.AXIS_MZ=Ua;a.XYX=0;a.YZY=1;a.ZXZ=2;a.XZX=3;a.YXY=4;a.ZYZ=5;a.XYZ=6;a.YZX=7;a.ZXY=8;a.XZY=9;a.YXZ=10;a.ZYX=11;a.CK=
na;a.Fy=1;a.jq=2;a.Yi=4;a.kD=4;a.ge=function(a){return"undefined"!=typeof a};a.keyfind=function(a,b,c){for(var d=[],e=c.length,f=0;f<e;f++){var g=c[f];g[a]==b&&d.push(g)}return d};a.f32=function(a){return new Float32Array(a)};a.NF=function(a,b){var c=a.length,d=new Float32Array(c+b.length);d.set(a);d.set(b,c);return d};a.aW=function(a,b){var c=a.length,d=new Uint32Array(c+b.length);d.set(a);d.set(b,c);return d};a.YN=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,
!0)};a.cN=function(a,b){var c=[],d={},e=b.length,f,g;for(f=0;f<e;f++)d[b[f]]=!0;e=a.length;for(f=0;f<e;f++)g=a[f],g in d&&c.push(g);return c};a.sign=e;a.PZ=function(a,b,c){for(var d=c.length,e=0;e<d;e++)if(c[e][a]==b)return!0;return!1};a.keysearch=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];if(e[a]===b)return e}return null};a.NZ=function(a,b,c,d,e){for(var f=0;f<e.length;f++){var g=e[f];if(g[a]==b&&g[c]==d)return g}return null};a.wR=function(a,b){for(var c=0;c<a.length;c++)if(a[c].uuid==
b)return c;return-1};a.YM=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return;a.push(b)};a.CY=function(a){for(var b=0;b<a.length-1;b++)for(var c=a[b],d=b+1;d<a.length;d++)if(c==a[d])return!1;return!0};a.WV=function(a,b,c,d){d||(d=new Float32Array(16));L.identity(d);d[12]=a;d[13]=b;d[14]=c};var Y=1;a.YT=function(){Y=(69069*Y+5)%Math.pow(2,32);return Math.round(Y/65536)%32768/32767};a.JV=function(a){Y=a};a.hh=function(a){var b=a[0]%ta*48271-3399*Math.floor(a[0]/ta);a[0]=0<b?b:b+2147483647;return(a[0]-
1)/2147483646};a.Tv=function(a,b){b||(b=[]);b[0]=5E4+Math.floor(a);return b};a.euler_to_quat=function(a,b){var d=R;d[0]=a[2];d[1]=a[1];d[2]=a[0];c(d,11,b);return b};a.ordered_angles_to_quat=c;a.quat_to_ordered_angles=b;a.kQ=h;a.quat_to_euler=function(a,c){var d=b(a,11,R);c[0]=d[2];c[1]=d[1];c[2]=d[0];return c};a.quat_to_dir=f;a.dir_to_quat=function(a,b,c){c||(c=new Float32Array(4));a=m.normalize(a,R);var d=m.dot(b,a);a=m.cross(b,a,ga);d=Math.acos(d);c[0]=a[0]*Math.sin(d/2);c[1]=a[1]*Math.sin(d/2);
c[2]=a[2]*Math.sin(d/2);c[3]=Math.cos(d/2);return c};a.XV=function(a,b,c,d){d||(d=new Float32Array(4));m.transformQuat(c,b,d);d[3]=-m.dot(a,d)};a.VP=function(a){var b=I.get_quat_view(a.A.D),c=R;switch(a.type){case "CAMERA":c[0]=0;c[1]=-1;c[2]=0;m.transformQuat(c,b,c);ga[0]=0;ga[1]=0;ga[2]=-1;break;case "MESH":c[0]=0;c[1]=0;c[2]=1;m.transformQuat(c,b,c);ga[0]=0;ga[1]=0;ga[2]=1;break;case "EMPTY":c[0]=0,c[1]=1,c[2]=0,m.transformQuat(c,b,c),ga[0]=0,ga[1]=1,ga[2]=0}c[1]=0;m.normalize(c,c);a=m.dot(c,ga);
return Math.acos(a)*(0<-c[0]*ga[2]?-1:1)};a.Zt=function(a,b,c,d){if(0!=c){d=d||[];for(var e=0;e<a.length;e++)d[e]=(1-c)*a[e]+c*b[e]}};a.CJ=function(){U++;return U.toString(10)};a.Ys=function(a){Q[a]||(Q[a]=0);var b=a+Q[a];Q[a]++;return b};a.pi=function(){return{a_position:new Float32Array(0),a_tbn:z.create(0)}};a.W=function(b){if(!(b instanceof Object))return b;var c;c=b.constructor;switch(c){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:c=
new c(b);break;case Array:c=new c(b.length);for(var d=0;d<b.length;d++)c[d]=a.W(b[d]);break;default:for(d in c=new c,b)b.hasOwnProperty(d)&&(c[d]=a.W(b[d]))}return c};a.Oq=function(a){var b=a instanceof Array?[]:{},c;for(c in a)if(a.hasOwnProperty(c))if(a[c]instanceof Object){var d=a[c].constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:b[c]=new d(a[c]);break;case Array:b[c]=
a[c].slice(0);break;default:b[c]=a[c]}}else b[c]=a[c];return b};a.matrix_to_quat=q;a.ZA=function(a,b){b||(b=new Float32Array(3));b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.sH=function(a){ma[0]=.577350269189626;ma[1]=.577350269189626;ma[2]=.577350269189626;ma[3]=0;K.transformMat4(ma,a,ma);return K.length(ma)};a.$z=function(a,b){var c=b.left,d=b.right,e=b.top,f=b.bottom,g=b.near,h=b.far;c[0]=a[3]+a[0];c[1]=a[7]+a[4];c[2]=a[11]+a[8];c[3]=a[15]+a[12];d[0]=a[3]-a[0];d[1]=a[7]-a[4];d[2]=a[11]-a[8];d[3]=
a[15]-a[12];e[0]=a[3]-a[1];e[1]=a[7]-a[5];e[2]=a[11]-a[9];e[3]=a[15]-a[13];f[0]=a[3]+a[1];f[1]=a[7]+a[5];f[2]=a[11]+a[9];f[3]=a[15]+a[13];g[0]=a[3]+a[2];g[1]=a[7]+a[6];g[2]=a[11]+a[10];g[3]=a[15]+a[14];h[0]=a[3]-a[2];h[1]=a[7]-a[6];h[2]=a[11]-a[10];h[3]=a[15]-a[14];l(c);l(d);l(e);l(f);l(g);l(h)};a.EV=function(a,b,c){return c<-A.point_plane_dist(a,b.near)||c<-A.point_plane_dist(a,b.left)||c<-A.point_plane_dist(a,b.right)||c<-A.point_plane_dist(a,b.top)||c<-A.point_plane_dist(a,b.bottom)||c<-A.point_plane_dist(a,
b.far)?!0:!1};a.gQ=function(a,b,c,d,e){var f=m.dot(c,b.far),g=m.dot(d,b.far),h=m.dot(e,b.far),f=Math.sqrt(f*f+g*g+h*h);if(f<-A.point_plane_dist(a,b.near)||f<-A.point_plane_dist(a,b.far))return!0;f=m.dot(c,b.left);g=m.dot(d,b.left);h=m.dot(e,b.left);if(Math.sqrt(f*f+g*g+h*h)<-A.point_plane_dist(a,b.left))return!0;f=m.dot(c,b.right);g=m.dot(d,b.right);h=m.dot(e,b.right);if(Math.sqrt(f*f+g*g+h*h)<-A.point_plane_dist(a,b.right))return!0;f=m.dot(c,b.top);g=m.dot(d,b.top);h=m.dot(e,b.top);if(Math.sqrt(f*
f+g*g+h*h)<-A.point_plane_dist(a,b.top))return!0;f=m.dot(c,b.bottom);g=m.dot(d,b.bottom);h=m.dot(e,b.bottom);return Math.sqrt(f*f+g*g+h*h)<-A.point_plane_dist(a,b.bottom)?!0:!1};a.cp=function(a,b,c,d){d||(d=0);for(var e=a.length,f=0;f<e;f+=3){var g=a[f],h=a[f+1],l=a[f+2];c[d+f]=b[0]*g+b[4]*h+b[8]*l+b[12];c[d+f+1]=b[1]*g+b[5]*h+b[9]*l+b[13];c[d+f+2]=b[2]*g+b[6]*h+b[10]*l+b[14]}};a.D_=function(a,b,c,d){d||(d=0);for(var e=a.length,f=0;f<e;f+=3){var g=a[f],h=a[f+1],l=a[f+2];c[d+f]=b[0]*g+b[4]*h+b[8]*
l;c[d+f+1]=b[1]*g+b[5]*h+b[9]*l;c[d+f+2]=b[2]*g+b[6]*h+b[10]*l}return c};a.XT=function(a,b,c,d){d=d||0;for(var e=a.length,f=0;f<e;f+=4){O[0]=a[f];O[1]=a[f+1];O[2]=a[f+2];O[3]=a[f+3];var g=0<O[3];S.multiply(b,O,O);(g&&0>O[3]||!g&&0<O[3])&&K.scale(O,-1,O);c[d+f]=O[0];c[d+f+1]=O[1];c[d+f+2]=O[2];c[d+f+3]=O[3]}};a.ZW=function(a,b,c){c||(c=new Float32Array(3));ma[0]=a[0];ma[1]=a[1];ma[2]=a[2];ma[3]=0;K.transformMat4(ma,b,ma);c[0]=ma[0];c[1]=ma[1];c[2]=ma[2]};a.VY=function(a,b){var c=a.length;c||n("flatten(): Wrong or empty array");
var d=a[0].length;d||n("flatten(): Wrong or empty subarray");b||(b=new Float32Array(c*d));for(var e=0;e<c;e++)for(var f=0;f<d;f++)b[e*d+f]=a[e][f];return b};a.$W=function(a){for(var b=[],c=0;c<a.length;c+=3)b[c/3]=new Float32Array([a[c],a[c+1],a[c+2]]);return b};a.Yt=function(b,c,d,e){if(e<d)return d;var f=d+Math.floor((e-d)/2);return b[f]>c?a.Yt(b,c,d,f-1):b[f]<c?a.Yt(b,c,f+1,e):f};a.xk=function(a,b){for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0};a.GY=function(a,b,c){for(var d=0;d<a.length;d++)if(Math.abs(a[d]-
b[d])>c)return!1;return!0};a.f_=function(a,b,c){c||(c=new Float32Array(16));for(var d=0;12>d;d++)c[d]=a[d]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.ZV=function(a,b,c,d,e){e||(e=new Float32Array(16));b=L.fromRotationTranslation(c,d,W);L.multiply(b,a,e);return e};a.transform_vec3=function(a,b,c,d,e){e||(e=new Float32Array(3));c=L.fromRotationTranslation(c,d,W);1!==b&&(d=L.identity(Ga),b=m.set(b,b,b,R),L.scale(d,b,d),L.multiply(c,d,c));m.transformMat4(a,c,e);return e};a.w_=function(a,
b,c,d,e){e||(e=new Float32Array(4));b=L.fromRotationTranslation(c,d,W);K.transformMat4(a,b,e);return e};a.HZ=function(a,b,c,d,e){e||(e=new Float32Array(3));b=L.fromRotationTranslation(c,d,W);L.invert(b,b);m.transformMat4(a,b,e);return e};a.v_=function(a,b,c){c||(c=new Float32Array(16));L.fromRotationTranslation(b,a,c);a=a[3];for(b=0;12>b;b++)c[b]*=a;return c};a.TZ=function(b,c,d){a.ZA(b,c);c[3]=a.sH(b);q(b,d)};a.oY=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return JSON.stringify(b)};
a.tU=function(a,b,c,d){d||(d=new Float32Array(3));var e=R;m.subtract(b,a,e);m.transformQuat(e,c,e);m.subtract(b,e,d)};a.eA=function(){var a=R;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),c=new Float32Array(16),d=new Float32Array(16),e=new Float32Array(16),f=new Float32Array(16),g=new Float32Array(16);L.lookAt(a,[-1,0,0],[0,-1,0],b);L.scale(b,[-1,1,1],b);L.scale(b,[-1,1,-1],c);L.lookAt(a,[0,-1,0],[0,0,-1],d);L.scale(d,[1,1,-1],d);L.scale(d,[1,-1,-1],e);L.lookAt(a,[0,0,-1],[0,-1,0],f);L.scale(f,
[-1,1,1],f);L.scale(f,[-1,1,-1],g);return[b,c,d,e,f,g]};a.RQ=function(){var a=R;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),c=new Float32Array(16),d=new Float32Array(16),e=new Float32Array(16),f=new Float32Array(16),g=new Float32Array(16);L.lookAt(a,[1,0,0],[0,-1,0],b);L.scale(b,[-1,1,-1],c);L.lookAt(a,[0,1,0],[0,0,1],d);L.scale(d,[1,-1,-1],e);L.lookAt(a,[0,0,1],[0,-1,0],f);L.scale(f,[-1,1,-1],g);return[b,c,d,e,f,g]};a.BE=function(a){return x(a,0)};a.hash_code=x;a.wZ=p;a.$S=function(a,b){b[15]=
1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b};a.quat_to_angle_axis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};a.trunc=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};a.deg_to_rad=function(a){return a*Math.PI/180};a.rad_to_deg=function(a){return 180*
a/Math.PI};a.mC=function(a){var b=.366025403784439*a[0]+.366025403784439*a[1],c=Math.floor(a[0]+b),e=Math.floor(a[1]+b),f=.211324865405187*c+.211324865405187*e,b=a[0]-c+f;a=a[1]-e+f;var g=b>a?1:0,h=1-g,f=b+.211324865405187-g,l=a+.211324865405187-h,k=b+-.577350269189626,m=a+-.577350269189626,c=c%289,e=e%289,n=Math.max(.5-(b*b+a*a),0),p=Math.max(.5-(f*f+l*l),0),r=Math.max(.5-(k*k+m*m),0),q=2*v(.024390243902439*d(d(e)+c))-1,g=2*v(.024390243902439*d(d(e+h)+c+g))-1,u=2*v(.024390243902439*d(d(e+1)+c+1))-
1,c=Math.abs(q)-.5,e=Math.abs(g)-.5,h=Math.abs(u)-.5,q=q-Math.floor(q+.5),g=g-Math.floor(g+.5),u=u-Math.floor(u+.5);return 130*(n*n*n*n*(1.79284291400159-.85373472095314*(q*q+c*c))*(q*b+c*a)+p*p*p*p*(1.79284291400159-.85373472095314*(g*g+e*e))*(g*f+e*l)+r*r*r*r*(1.79284291400159-.85373472095314*(u*u+h*h))*(u*k+h*m))};a.FE=function(a){var b=1/7,c=b/2,d=H(Math.floor(a[0])),e=H(Math.floor(a[1])),f=v(a[0]);a=v(a[1]);var g=f-.5,h=f-1.5,f=a-.5;a-=1.5;var l=r(d),k=r(d+1),m=l,d=k,l=r(l+e),k=r(k+e),m=r(m+
e+1),d=r(d+e+1),e=g+.7*(E(l)*b+c),n=h+.7*(E(k)*b+c),g=g+.7*(E(m)*b+c),h=h+.7*(E(d)*b+c),l=f+.7*(E(Math.floor(l*b))*b+c),f=f+.7*(E(Math.floor(k*b))*b+c),m=a+.7*(E(Math.floor(m*b))*b+c),b=a+.7*(E(Math.floor(d*b))*b+c);return Math.min(e*e+l*l,n*n+f*f,g*g+m*m,h*h+b*b)};a.quat_project=function(a,b,c,d,e){e||(e=new Float32Array(4));a=m.transformQuat(b,a,R);b=c[0];var f=c[1];c=c[2];var g=fa;g[0]=f*f+c*c;g[1]=-f*b;g[2]=-c*b;g[3]=-b*f;g[4]=b*b+c*c;g[5]=-c*f;g[6]=-b*c;g[7]=-f*c;g[8]=b*b+f*f;m.transformMat3(a,
g,a);m.normalize(a,a);S.rotationTo(d,a,e);return e};a.cam_quat_to_mesh_quat=function(a,b){b||(b=new Float32Array(4));var c,d;c=S.setAxisAngle([0,0,1],Math.PI,S.create());d=S.setAxisAngle([1,0,0],Math.PI/2,S.create());S.multiply(c,d,c);S.multiply(a,c,b);return b};a.cleanup=function(){U=0;Q={}};a.clamp=w;a.smooth=function(a,b,c,d){return d?(c=Math.exp(-c/d),(1-c)*a+c*b):a};a.smooth_v=function(a,b,c,d,e){e||(e=new Float32Array(a.length));if(d)for(c=Math.exp(-c/d),d=0;d<e.length;d++)e[d]=(1-c)*a[d]+c*
b[d];else m.copy(a,e);return e};a.XI=function(a,b,c,d,e){e||(e=new Float32Array(a.length));d?S.slerp(a,b,Math.exp(-c/d),e):S.copy(a,e)};a.KA=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};a.is_vector=function(a,b){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(b&&b==a.length||!b)return!0;return!1};a.correct_cam_quat_up=function(a,b){var c=N.fromQuat(a,fa),d=R;d[0]=c[6];d[1]=c[7];d[2]=c[8];d=m.cross(xa,d,d);m.normalize(d,d);var e=c[4];!b&&
0<e&&(d[0]*=-1,d[1]*=-1,d[2]*=-1);ga[0]=c[0];ga[1]=c[1];ga[2]=c[2];m.normalize(ga,ga);S.rotationTo(ga,d,aa);S.multiply(aa,a,a)};a.cG=function(a,b,c,d){c=c*b-.5;d=d*b-.5;var e=c-Math.floor(c),f=d-Math.floor(d);c=Math.floor(c);d=Math.floor(d);var g=b-1;return(a[d*b+c]*(1-e)+a[d*b+Math.min(c+1,g)]*e)*(1-f)+(a[Math.min(d+1,g)*b+c]*(1-e)+a[Math.min(d+1,g)*b+Math.min(c+1,g)]*e)*f};a.hn=function(a){for(var b=0,c=0;3>c;c++)0<(a&1<<c)&&b++;return b};a.lI=function(a){for(var b=[0,0,0],c=0;3>c;c++)0<(a&1<<c)&&
(b[2-c]=1);return b};a.gp=function(a,b){var c=0;(1==b||2==b)&&0<(a&4)&&c++;2==b&&0<(a&2)&&c++;return c};a.mv=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};a.zj=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};a.random_from_array=function(a){return a.length?a[Math.floor(Math.random()*a.length)]:null};a.horizontal_direction=function(a,b,c){c||(c=new Float32Array(3));c[0]=a[0]-b[0];
c[1]=a[1]-b[1];c[2]=0;m.normalize(c,c)};a.YV=function(a,b,c){var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1],h=b[2];b=b[3];var l=g*a-h*e,k=h*d-f*a,m=f*e-g*d;c[0]=d+2*l*b+2*(g*m-h*k);c[1]=e+2*k*b+2*(h*l-f*m);c[2]=a+2*m*b+2*(f*k-g*l)};a.assert=function(a){a||n("Assertion failed")};a.K=n;a.angle_wrap_periodic=C;a.angle_wrap_0_2pi=k;a.nA=function(a){return/(?:\.([^.]+))?$/.exec(a)[1]};a.MV=function(a,b){for(var c in a){var d=!0,e=a[c],f=b[c];switch(typeof e){case "number":case "string":case "boolean":d=e==
f;break;case "object":d=F(e,f)}if(!d)return!1}return!0};a.LB=function(a,b){var c=a[0],d=a[2],e=a[3];b[0]=a[1];b[1]=d;b[2]=e;b[3]=c};a.TF=function(a){a++;132651<a&&G.error("Color ID pool depleted");var b=Math.floor(a/2601);a%=2601;return new Float32Array([b/51,Math.floor(a/51)/51,a%51/51])};a.line_plane_intersect=function(a,b,c,d){ma.set(a);ma[3]=b;R[0]=c[3];R[1]=c[4];R[2]=c[5];aa.set(R);aa[3]=0;a=K.dot(ma,aa);if(0==a)return null;m.copy(c,R);aa.set(R);aa[3]=1;a=-K.dot(ma,aa)/a;d[0]=c[0]+a*c[3];d[1]=
c[1]+a*c[4];d[2]=c[2]+a*c[5];return d};a.ER=function(a,b,c,d){var e=b[0]-a[0],f=c[0]-a[0],g=b[1]-a[1],h=c[1]-a[1];b=b[2]-a[2];a=c[2]-a[2];d[0]=g*a-b*h;d[1]=f*b-e*a;d[2]=e*h-g*f;return d};a.IY=function(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b};a.oI=g;a.fm=function(a,b,c){if(b==c)return c-a;a=k(a);b=k(b);c=k(c);b=2*Math.PI-b;c=k(c+b);a=k(a+b);return a>c?(c-=a,a=2*Math.PI-a,-c>a?a:c):0};a.smooth_step=function(a,b,c){isFinite(b)&&isFinite(c)&&(a=w(a,b,c));return a*a*(3-2*a)};a.lerp=function(a,
b,c){return b+a*(c-b)};a.dN=function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(b[d]==a[c])return!0;return!1};a.NY=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b};a.dK=function(a,b){for(var c=Math.max(a.length,b.length),d=0;d<c;d++){var f=e((d>=a.length?0:a[d])-(d>=b.length?0:b[d]));if(f)return f}return 0};a.Kl=function(a){return a.join(".")};a.gJ=function(a){return a.split(".").map(function(a){return a|0})};a.cJ=function(a,b){b[0]=Math.pow(a[0],2.2);b[1]=Math.pow(a[1],
2.2);b[2]=Math.pow(a[2],2.2)};a.UA=function(a,b){b[0]=Math.pow(a[0],1/2.2);b[1]=Math.pow(a[1],1/2.2);b[2]=Math.pow(a[2],1/2.2);return b};a.Ii=function(a){var b=a.split("://",2);return 1<b.length?(b[1]=D(b[1]),b.join("://")):D(a)};a.Lq=function(a){return!!parseInt(a.toString(2).substr(1),2)};a.fQ=function(a,b,c,d){d[0]=a[0];d[1]=b[0];d[2]=c[0];d[3]=a[1];d[4]=b[1];d[5]=c[1];d[6]=a[2];d[7]=b[2];d[8]=c[2];return d};a.Bk=function(){var a=[{}];a.length=0;return a};a.mo=function(a){a=Math.round(32767.5*
(a+1)-32768);return w(a?a:0,-32768,32767)};a.UI=function(a){return w((a+32768)/32767.5-1,-1,1)};a.BJ=function(a){return w(Math.round(255*a),0,255)};a.AJ=function(a){return w(a/255,0,1)};a.YP=function(a,b,c,d){var e=m.subtract(c,b,R),f=m.subtract(d,c,ga),g=m.subtract(b,d,ra);b=m.subtract(a,b,T);c=m.subtract(a,c,ia);a=m.subtract(a,d,ha);d=m.cross(e,f,pa);if(0<=m.dot(m.cross(d,e,Z),b)&&0<=m.dot(m.cross(d,f,Z),c)&&0<=m.dot(m.cross(d,g,Z),a))return g=m.length(d),f=m.dot(d,b),Math.abs(f/g);e=m.scale(e,
w(m.dot(e,b)/m.length(e),0,1),Z);b=m.length(m.subtract(b,e,Z));f=m.scale(f,w(m.dot(f,c)/m.length(f),0,1),Z);f=m.length(m.subtract(c,f,Z));g=m.scale(g,w(m.dot(g,a)/m.length(g),0,1),Z);g=m.length(m.subtract(a,g,Z));return Math.min(Math.min(b,f),g)};a.uU=function(a,b,c,d,e){if(c||d){var g=S.identity(O);c&&(b=S.setAxisAngle(b,c,ua),S.multiply(g,b,g));a=S.copy(a,e);d&&(e=f(a,V,R),d=S.setAxisAngle(e,d,ua),S.normalize(d,d),S.multiply(g,d,g));S.multiply(g,a,a);S.normalize(a,a)}};a.ax=function(a,b,c,d){f(b,
d,ga);m.normalize(ga,ga);m.subtract(c,a,ra);m.normalize(ra,ra);a=g(ga,ra,ma);S.multiply(a,b,b);S.normalize(b,b)};a.VT=function(a,b,c,d){b=m.transformQuat(b,a,ga);var e=m.dot(d,c);d=m.scale(d,e,ra);c=m.subtract(c,d,ra);d=S.identity(O);m.normalize(c,c);.999999>Math.abs(m.dot(b,c))&&g(b,c,d);S.normalize(d,d);S.multiply(d,a,a)};a.ZE=function(a,b){for(var c=2*Math.PI,d=[],e=0;3>e;e++)d[e]=a[e]-b[e],5.1<d[e]?(a[e]-=d[e]/c*c,d[e]=a[e]-b[e]):-5.1>d[e]&&(a[e]+=-d[e]/c*c,d[e]=a[e]-b[e]);3.2<Math.abs(d[0])&&
1.6>Math.abs(d[1])&&1.6>Math.abs(d[2])&&(a[0]=0<d[0]?a[0]-c:a[0]+c);3.2<Math.abs(d[1])&&1.6>Math.abs(d[2])&&1.6>Math.abs(d[0])&&(a[1]=0<d[1]?a[1]-c:a[1]+c);3.2<Math.abs(d[2])&&1.6>Math.abs(d[0])&&1.6>Math.abs(d[1])&&(a[2]=0<d[2]?a[2]-c:a[2]+c)};a.WB=function(a,b,c){b=h(b,fa);a=h(a,wa);a=N.multiply(a,b,da);b=R;B(a,b,ga);m.copy(Math.abs(b[0])+Math.abs(b[1])+Math.abs(b[2])>Math.abs(ga[0])+Math.abs(ga[1])+Math.abs(ga[2])?ga:b,c)};a.WT=function(a,b,c){a=N.fromQuat(a,fa);var d=R;B(a,d,ga);m.copy(Math.abs(d[0]-
b[0])+Math.abs(d[1]-b[1])+Math.abs(d[2]-b[2])>Math.abs(ga[0]-b[0])+Math.abs(ga[1]-b[1])+Math.abs(ga[2]-b[2])?ga:d,c);return c}};b4w.module.__sfx=function(a,t){function e(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(ra){return C.error('Unable to initialize AudioContext: "'+ra+'". The audio is disabled.'),null}if(b.createGain)return b;C.warn("deprecated WebAudio implementation");return null}C.warn("WebAudio is not supported");return null}function c(a,c,d){var e=a.ka;if("NONE"!=e.behavior){var g=e.loop,h=e.pitch;if(e.src&&(g||0<=d)){e.ez=Math.floor(5E4*Math.random());var k=S.currentTime+
c,k=Math.max(0,k);e.Kf=k;e.state=20;var n=m.Qc;"POSITIONAL"==e.behavior&&"none"==n.gr&&(e.behavior="BACKGROUND_SOUND");b(a,m.Qc);if("POSITIONAL"==e.behavior||"BACKGROUND_SOUND"==e.behavior){c=S.createBufferSource();c.buffer=e.src;c.playbackRate.value=h;if(g){e.pc&&e.pc.disconnect();e.Ud&&e.Ud.disconnect();c.loop=!0;c.loopStart=e.nH;if(c.loopEnd=e.pw)d=S.createBufferSource(),d.buffer=e.src,d.playbackRate.value=h,e.Ud=d,d.connect(e.Od);c.start(k);e.duration=0}else g=c.buffer?c.buffer.duration:0,d>g?
(g=k+d+e.Ue,c.loop=!0,c.start(k),c.stop(g),e.duration=d):(c.loop=!1,c.start(k),e.duration=g);c.connect(e.Od);e.pc=c;f(e);q(e);l(e)}else"BACKGROUND_MUSIC"==e.behavior&&(F.clear_timeout(e.hz),F.clear_timeout(e.iz),d=function(){var b=a.ka,c=b.src;c&&(c.volume=1,c.loop=b.loop,b.pc=b.pc||S.createMediaElementSource(c),b.pc.connect(b.Od),20==b.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==c?d():e.hz=F.set_timeout(d,1E3*c),g?e.duration=0:e.duration=w(a));x(e,k)}}}function b(a,b){var c=a.ka;if(!c.Od){var d=
u.get_trans_view(a.A.D),e=u.get_quat_view(a.A.D);if(N.xw){var f=S.createBiquadFilter();f.type="peaking"}else f=null;var h=S.createGain();switch(c.behavior){case "POSITIONAL":var l=S.createPanner();"string"!=typeof l.panningModel?(l.panningModel=l.EQUALPOWER,l.distanceModel=l.INVERSE_DISTANCE):(l.panningModel="equalpower",l.distanceModel=b.gr);l.setPosition(d[0],d[1],d[2]);D.copy(d,c.RA);d=L;g.quat_to_dir(e,g.AXIS_MZ,d);l.setOrientation(d[0],d[1],d[2]);l.refDistance=c.dist_ref;l.maxDistance=c.dist_max;
l.rolloffFactor=c.attenuation;l.coneInnerAngle=c.cF;l.coneOuterAngle=c.dF;l.coneOuterGain=c.eF;var k=S.createGain();k.gain.value=E(c);f?(l.connect(f),f.connect(k)):l.connect(k);k.connect(h);c.Od=l;if(c.zn){var m=S.createGain();h.connect(m);m.connect(b.Od)}else m=null,h.connect(b.Od);break;case "BACKGROUND_SOUND":l=null;k=S.createGain();k.gain.value=E(c);f?(c.Od=f,f.connect(k)):c.Od=k;k.connect(h);c.zn?(m=S.createGain(),h.connect(m),m.connect(b.Od)):(m=null,h.connect(b.Od));break;case "BACKGROUND_MUSIC":m=
l=null,k=S.createGain(),k.gain.value=E(c),f?(c.Od=f,f.connect(k)):c.Od=k,k.connect(h),h.connect(b.Od)}c.BB=l;c.Ch=f;c.ro=k;c.Ik=h;c.NB=m}}function h(a){var b=a.ka;c(a,b.delay+b.yF*Math.random(),b.duration)}function f(a){var b=a.Ud||a.pc;g.ge(b.onended)&&(b.onended=function(){a.state=50})}function q(a){a.zn&&a.NB.gain.cancelScheduledValues(a.Kf);a.bp&&(a.pc.playbackRate.cancelScheduledValues(a.Kf),a.Ud&&a.Ud.playbackRate.cancelScheduledValues(a.Kf));a.ot=a.Kf}function l(a){if(a.zn||a.bp){var b=a.NB,
c=a.pc,d=c.buffer?c.buffer.duration:0;if(d){var e=a.Kf;U[0]=a.ez;for(var f=0;5>f;){var h=a.pitch+a.bp*g.hh(U);if(e>=a.ot){if(a.zn){var l=1-g.clamp(a.zn,0,1)*Math.random();b.gain.setValueAtTime(l,e)}a.bp&&(c.playbackRate.setValueAtTime(h,e),a.Ud&&a.Ud.playbackRate.setValueAtTime(h,e));f++}e+=d/h}a.ot=e-.001}}}function x(a,b){if(a.vj||a.Ue){var c=a.Ik;c.gain.cancelScheduledValues(b);a.vj?(c.gain.setValueAtTime(0,b),c.gain.linearRampToValueAtTime(1,b+a.vj)):c.gain.setValueAtTime(1,b);a.Ue&&!a.loop&&
(c.gain.setValueAtTime(1,b+a.duration),c.gain.linearRampToValueAtTime(0,b+a.duration+a.Ue))}}function y(a){"SPEAKER"!=a.type&&g.K("Wrong object type");var b=a.ka;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var c=b.Ik,d=S.currentTime;b.Ue&&(c.gain.setValueAtTime(c.gain.value,d),c.gain.linearRampToValueAtTime(0,d+b.Ue));"BACKGROUND_MUSIC"==b.behavior?b.src&&(F.clear_timeout(b.hz),F.clear_timeout(b.iz),b.iz=F.set_timeout(function(){var b=a.ka.src;b&&(b.currentTime&&(b.currentTime=0),
b.pause())},1E3*b.Ue)):(c=b.pc,c.onended=function(){},b.duration<c.buffer.duration?b.Ue&&20==b.state?c.stop(d+b.Ue):20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.Kf=0,b.DB=0,b.eu=0);b.state=30}}function p(a){a=a.ka;if(20==a.state){var b=S.currentTime;a.DB=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.Kf?a.eu=d(a,b):a.eu=0,a.pc.onended=function(){},a.pc.stop(0),a.pc.disconnect(),q(a));a.state=40}}function d(a,b){U[0]=a.ez;for(var c=a.pc.buffer.duration,d=a.Kf,e;d<b;)e=a.pitch+
a.bp*g.hh(U),d+=c/e;return(c/e-(d-b))*e}function v(a){var b=a.ka;if(40==b.state){var c=S.currentTime;b.Kf+=c-b.DB;if("BACKGROUND_MUSIC"==b.behavior)b.src.play();else{a=a.ka;var d=S.createBufferSource();d.loop=a.pc.loop;d.loopStart=a.pc.loopStart;d.loopEnd=a.pc.loopEnd;d.buffer=a.pc.buffer;d.playbackRate.value=a.pc.playbackRate.value;d.connect(a.Od);a.pc=d;a.Ud&&(d=S.createBufferSource(),d.loop=a.Ud.loop,d.buffer=a.Ud.buffer,d.playbackRate.value=a.Ud.playbackRate.value,d.connect(a.Od),a.Ud=d);b.ot=
c;c=b.pc;f(b);c.start(b.Kf,b.eu);l(b)}x(b,b.Kf);b.state=20}}function r(a,b,c){var d;d=b.ZP;if(0<d){var e=b.DV;if(0!=D.dot(a.sy,a.sy)||0!=D.dot(b.Tm,b.Tm)){var f=D.subtract(a.RA,b.Gi,L),h=D.length(f);b=D.dot(f,b.Tm)/h;f=D.dot(f,a.sy)/h;h=e/d;b=Math.min(-b,h);f=Math.min(-f,h);d=(e-d*b)/(e-d*f);isFinite(d)||(d=0);d=Math.min(d,16);d=Math.max(d,.125);d=g.smooth(d,a.aH,c,.3);a.pc.playbackRate.value=d;a.aH=d}}}function H(a){a=a.ka;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function E(a){return a.muted?
0:a.volume}function w(a){a=a.ka;return(a=a.src)?a.duration:0}var n=t("__config"),C=t("__print"),k=t("__quat"),F=t("__time"),u=t("__tsr"),g=t("__util"),D=t("__vec3"),B=n.L,N=n.ka,L=new Float32Array(3),A=new Float32Array(3),G=k.create(),z=[],I=[],S=null,m=null,K=[],U=[1],Q=null;a.dD=10;a.Ey=20;a.cD=30;a.aP=function(){return{Jc:-1,wi:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,cF:360,dF:360,eF:1,autoplay:!1,cyclic:!1,loop:!1,nH:0,pw:0,delay:0,yF:0,zn:0,bp:0,vj:0,
Ue:0,Kf:0,DB:0,eu:0,duration:0,ot:0,ez:1,src:null,state:10,RA:new Float32Array(3),sy:new Float32Array(3),Wu:!1,aH:1,hz:-1,iz:-1,um:0,Od:null,pc:null,Ud:null,BB:null,Ch:null,ro:null,Ik:null,NB:null,Gl:0}};a.init=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(z.push("ogg"),z.push("ogv"),z.push("oga")),""!=a.canPlayType("audio/mpeg")&&z.push("mp3"),""!=a.canPlayType("audio/mp4")&&(z.push("mp4"),z.push("m4v"),z.push("m4a")),
""!=a.canPlayType("audio/webm")&&z.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(I.push("ogv"),I.push("ogg"),I.push("oga")),""!=b.canPlayType("video/mp4")&&(I.push("m4v"),I.push("mp4")),""!=b.canPlayType("video/webm")&&I.push("webm"),""!=b.canPlayType("video/mpeg")&&I.push("mp3"))};a.jN=function(a){N.ZC&&!S&&(S=e())&&C.log("%cINIT WEBAUDIO: "+S.sampleRate+"Hz","color: #00a");if(S){var b={Gi:new Float32Array(3),Tm:new Float32Array(3),Gl:0},c=S.createGain(),d=S.createGain();b.ro=c;
b.Ik=d;c.connect(d);d.connect(S.destination);if(a.b4w_enable_dynamic_compressor){var d=S.createDynamicsCompressor(),f=a.b4w_dynamic_compressor_settings;d.threshold.value=f.threshold;d.knee.value=f.knee;d.ratio.value=f.ratio;d.attack.value=f.attack;d.release.value=f.release;d.connect(c);b.Vq=d;b.Od=d}else b.Vq=null,b.Od=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.gr="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.gr="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.gr=
"exponential";break;case "NONE":b.gr="none";break;default:g.K("Wrong audio distance model")}b.ZP=a.audio_doppler_factor;b.DV=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=E(b);b.um=0}else b=null;a.Qc=b};a.GU=function(a){m=a};a.detect_audio_container=function(a){a||(a="ogg");return-1<z.indexOf(a)?a:-1<z.indexOf("m4a")?"m4a":-1<z.indexOf("oga")?"oga":""};a.detect_video_container=function(a){a||(a="webm");return-1<I.indexOf(a)?a:-1<I.indexOf("m4v")?"m4v":-1<I.indexOf("webm")?
"webm":""};a.Jp=function(a,b){var c=a.data,d=b.ka;if(a.data.sound){d.Jc=a.data.sound.uuid;d.wi=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":d.behavior=S?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var e;S?(window.MediaElementAudioSourceNode?e=!0:(C.warn("MediaElementAudioSourceNode not found"),e=!1),e=e&&!B.OE?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):e="NONE";d.behavior=e;break;default:g.K("Wrong speaker behavior")}c.sound||(d.behavior="NONE");d.Wu=
c.b4w_enable_doppler;d.muted=c.muted;d.volume=c.volume;d.pitch=c.pitch;d.attenuation=c.attenuation;d.dist_ref=c.distance_reference;d.dist_max=c.distance_max||1E4;d.cF=c.cone_angle_inner;d.dF=c.cone_angle_outer;d.eF=c.cone_volume_outer;d.autoplay=c.b4w_auto_play;d.cyclic=c.b4w_cyclic_play;d.loop=c.b4w_loop;d.nH=c.b4w_loop_start;d.pw=c.b4w_loop_end;d.delay=c.b4w_delay;d.yF=c.b4w_delay_random;d.zn=c.b4w_volume_random;d.bp=c.b4w_pitch_random;d.vj=c.b4w_fade_in;d.Ue=c.b4w_fade_out;K.push(b)}};a.ZI=function(b){"SPEAKER"!=
b.type&&g.K("Wrong object type");switch(b.ka.behavior){case "POSITIONAL":return a.Ey;case "BACKGROUND_SOUND":return a.Ey;case "BACKGROUND_MUSIC":return a.cD;case "NONE":return a.dD;default:g.K("Wrong speaker behavior")}};a.MW=function(a,b){var c=a.ka;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:g.K("Wrong speaker behavior")}};a.VH=function(){var a=S.createBufferSource();a.buffer=S.createBuffer(1,22050,22050);a.connect(S.destination);
a.start(0)};a.RP=function(a,b,c){S?S.decodeAudioData(a,b,c):c()};a.AV=function(a){y(a);a.ka=null;K.splice(K.indexOf(a),1)};a.cleanup=function(){for(var a=0;a<K.length;a++){var b=K[a].ka;"BACKGROUND_MUSIC"==b.behavior?(b=b.src)&&b.pause():(b.pc&&b.pc.disconnect(),b.Ud&&b.Ud.disconnect())}m&&m.Qc&&(a=m.Qc,a.Gi[0]=0,a.Gi[1]=0,a.Gi[2]=0,a.Tm[0]=0,a.Tm[1]=0,a.Tm[2]=0);m=null;K.splice(0);Q=null};a.update=function(a){if(S&&K.length){for(var b=0;b<K.length;b++){var c=K[b],d=c.ka,e=d.pc,f=S.currentTime;!d.loop&&
20==d.state&&d.duration&&d.Kf+d.duration<f&&("BACKGROUND_MUSIC"==d.behavior||e&&!g.ge(e.onended))&&(d.state=50);d.cyclic&&50==d.state&&h(c);20==d.state&&3>d.ot-f&&l(d)}Q&&Q.Zj.length&&(-1==Q.active||a>Q.XD+Q.EF[Q.active])&&(b=Q,-1<b.active&&y(b.Zj[b.active]),c=-1==b.active&&b.random?Math.round(Math.random()*(b.Zj.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.Zj.length-2))))%b.Zj.length:(b.active+1)%b.Zj.length,h(b.Zj[c]),b.active=c,b.XD=a)}};a.play=c;a.play_def=h;a.stop=y;a.is_playing=
function(a){return 20==a.ka.state};a.zV=p;a.BV=v;a.loop_stop=function(a,b){var c=a.ka,d=c.Ud;if(H(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&d){var e=S.currentTime+b;c.pc.stop(e);d.start(e,c.pw)}};a.playrate=function(a,b){var c=a.ka;c.pitch=b;!H(a)||"POSITIONAL"!=c.behavior&&"BACKGROUND_SOUND"!=c.behavior||(c.pc.playbackRate.value=b,c.Ud&&(c.Ud.playbackRate.value=b),q(c),l(c))};a.get_playrate=function(a){return a.ka.pitch};a.cyclic=function(a,b){a.ka.cyclic=!!b};a.jS=function(a){return a.ka.autoplay};
a.is_cyclic=function(a){return a.ka.cyclic};a.OS=function(a,b,c,d,e){if(a=a.Qc){var f=L;f[0]=0;f[1]=0;f[2]=-1;D.transformQuat(f,c,f);A[0]=0;A[1]=1;A[2]=0;D.transformQuat(A,c,A);c=S.listener;c.setPosition(b[0],b[1],b[2]);c.setOrientation(f[0],f[1],f[2],A[0],A[1],A[2]);if(d&&a.Gl!=e){if(a.listener_stride)a.listener_stride=!1,D.copy(b,a.Gi);else for(c=a.Tm,c[0]=(b[0]-a.Gi[0])/d,c[1]=(b[1]-a.Gi[1])/d,c[2]=(b[2]-a.Gi[2])/d,D.copy(b,a.Gi),b=0;b<K.length;b++)c=K[b],f=c.ka,H(c)&&"POSITIONAL"==f.behavior&&
f.Wu&&r(f,a,d);a.Gl=e}else D.copy(b,a.Gi)}};a.listener_stride=function(){var a=m.Qc;a&&(a.listener_stride=!0)};a.CV=function(a,b,c){var d=a.ka;if(H(a)&&"POSITIONAL"==d.behavior){var e=u.Mb(a.A.D,L);a=u.ub(a.A.D,G);var f=d.BB;f.setPosition(e[0],e[1],e[2]);g.quat_to_dir(a,g.AXIS_MZ,A);f.setOrientation(A[0],A[1],A[2]);d.Wu&&(a=d.RA,b&&d.Gl!=c?(d.iJ?(D.copy(e,a),d.iJ=!1):(f=d.sy,f[0]=(e[0]-a[0])/b,f[1]=(e[1]-a[1])/b,f[2]=(e[2]-a[2])/b,D.copy(e,a),r(d,m.Qc,b)),d.Gl=c):D.copy(e,a))}};a.speaker_stride=function(a){var b=
a.ka;H(a)&&"POSITIONAL"==b.behavior&&b.Wu&&(b.iJ=!0)};a.pA=function(a){return a.ka.behavior};a.check_active_speakers=function(){for(var a=0;a<K.length;a++)if(H(K[a]))return!0;return!1};a.ZU=function(a){var b=m.Qc;b&&(b.volume=a,S&&(b.ro.gain.value=E(b)))};a.zR=function(){var a=m.Qc;return a?a.volume:0};a.set_volume=function(a,b){var c=a.ka;c.volume=b;H(a)&&(c.ro.gain.value=E(c))};a.get_volume=function(a){return a.ka.volume};a.mute=function(a,b){a.ka.muted=!!b;H(a)&&(a.ka.ro.gain.value=E(a.ka))};a.is_muted=
function(a){return a.ka.muted};a.nT=function(a){var b=m.Qc;b&&(b.muted=!!a,S&&(b.ro.gain.value=E(b)))};a.qS=function(){var a=m.Qc;return a?a.muted:!1};a.get_speaker_objects=function(){return K};a.pause=function(){for(var a=0;a<K.length;a++)p(K[a])};a.resume=function(){for(var a=0;a<K.length;a++)v(K[a])};a.set_compressor_params=function(a,b){if(a.Qc&&a.Qc.Vq){var c=a.Qc.Vq;c.threshold.value=b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};a.get_compressor_params=
function(a){if(!a.Qc||!a.Qc.Vq)return null;a=a.Qc.Vq;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};a.duck=function(a,b,c){if(H(a)){a=a.ka;var d=a.Ik,e=S.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(b,e+c);a.um=c}};a.unduck=function(a){if(H(a)){a=a.ka;var b=a.Ik,c=S.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.um);a.um=0}};a.bQ=function(a,b){if(S){var c=
m.Qc,d=c.Ik,e=S.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(a,e+b);c.um=b}};a.bW=function(){if(S){var a=m.Qc,b=a.Ik,c=S.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.um);a.um=0}};a.apply_playlist=function(a,b,c){Q={active:-1,XD:0,random:c,Zj:[],EF:[]};for(c=0;c<a.length;c++){var d=a[c],e=w(d);0==e?C.warn("Ignoring speaker with zero duration: "+d.name):(y(d),d.ka.cyclic=!1,Q.Zj.push(d),Q.EF.push(e+b))}};a.get_duration=w;
a.clear_playlist=function(){if(Q)for(var a=Q.Zj,b=0;b<a.length;b++)y(a[b]);Q=null};a.get_positional_params=function(a){return(a=a.ka)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};a.set_positional_params=function(a,b){var c=a.ka;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var d=c.BB;d&&(d.refDistance=c.dist_ref,d.maxDistance=c.dist_max,d.rolloffFactor=c.attenuation)}};a.set_filter_params=
function(a,b){var c=a.ka;c&&c.Ch&&(c.Ch.frequency.value=b.freq,c.Ch.Q.value=b.Q,c.Ch.gain.value=b.gain)};a.get_filter_params=function(a){return(a=a.ka)&&a.Ch?{freq:a.Ch.frequency.value,Q:a.Ch.Q.value,gain:a.Ch.gain.value}:null};a.get_filter_freq_response=function(a,b,c,d){a=a.ka;if(!a||!a.Ch)return null;a.Ch.getFrequencyResponse(b,c,d)};a.reset=function(){z.length=0;I.length=0;S=null}};b4w.module.__input=function(a,t){function e(a){var b=U.detect_mobile();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&K())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function c(a,b){if(!e(a))return null;var c={type:a,xg:!1,gh:[],Mh:[],Kj:[],he:[],Lj:[],Mj:[],Nr:[],YG:[],Ej:[],gk:[],ek:[],dk:[],element:b,Ni:!0,jc:[],Bw:new Float32Array(2),kT:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),ws:null,Dn:null,Xi:null,td:null,orientation:ia.create(),
position:pa.create(),Eh:window.VRFrameData?new VRFrameData:null,pC:T.create(),wj:new Float32Array(4),xj:new Float32Array(4),Hh:0,di:0,As:0,Nl:0,yi:0,ei:0,Cm:[],Lk:[0,0,0,0,0,0,0,0,0,0,0,0],RF:[0,0,0,0,0,0,0,0,0,0,0,0],lv:[]};c.wj[0]=c.wj[1]=c.wj[2]=c.wj[3]=Math.PI/4;c.xj[0]=c.xj[1]=c.xj[2]=c.xj[3]=Math.PI/4;30==a||40==a||50==a?(c.xg=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.Ni=!1)):10==a?c.xg=!0:20==a&&h(c);return c}function b(b,d){10==b||20==b?d=window:d||(40==b?d=
document:d=Q.get_container());for(var e=0;e<Ca.length;e++)if(Ca[e].type==b&&Ca[e].element==d)return Ca[e];e=c(b,d);60!=b&&70!=b&&80!=b&&90!=b||e.lv.push(a.GMPD_BUTTON_0,a.GMPD_BUTTON_1,a.GMPD_BUTTON_2,a.GMPD_BUTTON_3,a.GMPD_BUTTON_4,a.GMPD_BUTTON_5,a.GMPD_BUTTON_6,a.GMPD_BUTTON_7,a.GMPD_BUTTON_8,a.GMPD_BUTTON_9,a.GMPD_BUTTON_10,a.GMPD_BUTTON_11,a.GMPD_BUTTON_12,a.GMPD_BUTTON_13,a.GMPD_BUTTON_14,a.GMPD_BUTTON_15,a.GMPD_BUTTON_16,a.GMPD_BUTTON_17,a.GMPD_BUTTON_18,a.GMPD_BUTTON_19,a.GMPD_BUTTON_20,a.GMPD_BUTTON_21,
a.GMPD_BUTTON_22,a.GMPD_BUTTON_23,a.GMPD_BUTTON_24,a.GMPD_BUTTON_25,a.GMPD_AXIS_0,a.GMPD_AXIS_1,a.GMPD_AXIS_2,a.GMPD_AXIS_3,a.GMPD_AXIS_4,a.GMPD_AXIS_5,a.GMPD_AXIS_6,a.GMPD_AXIS_7,a.GMPD_AXIS_8,a.GMPD_AXIS_9,a.GMPD_AXIS_10,a.GMPD_AXIS_11);e&&Ca.push(e);return e}function h(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.td=b[0],a.xg=!0,a.td.getFrameData(a.Eh),a.ws&&a.ws())},function(){ra.ga("WebVR displays are not found.");a.xg=!1}):navigator.getVRDevices?
(navigator.getVRDevices().then(function(b){x(a,b);b.length&&(a.xg=!0);a.ws&&a.ws()},function(){ra.ga("WebVR devices are not found.");a.xg=!1}),q(a,aa.webvr)):(f(a),a.xg=!0))}function f(a){var b=aa.nonwebvr;a.Nl=b.Nl;a.yi=b.yi;a.ei=b.ei;q(a,b);a.Hh=b.Hh;a.di=b.di;a.As=b.As;l(a)}function q(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=b.chromatic_aberration_coefs[1];
a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function l(a){var b=Math.atan(a.Hh/2/a.As*aa.nonwebvr.CF);b&&(a.wj[0]=a.xj[0]=Math.min(b,Math.PI/3));b&&(a.wj[1]=a.xj[3]=Math.min(b,Math.PI/3));b&&(a.wj[2]=a.xj[2]=Math.min(b,Math.PI/3));b&&(a.wj[3]=a.xj[1]=Math.min(b,Math.PI/3))}function x(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&(c=b.filter(function(a){return-1!==
a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Dn=d;a.Xi=c}function y(a,b,c){switch(a.type){case 20:var e=d(a,0);if(e&1){var f="left"==b?a.wj:a.xj;Z.copy(f,c)}else if(f=a.td||a.Dn)f=f.getEyeParameters(b),(f=f.fieldOfView||f.currentFieldOfView)?(c[0]=ha.deg_to_rad(f.upDegrees),c[1]=ha.deg_to_rad(f.rightDegrees),c[2]=ha.deg_to_rad(f.downDegrees),c[3]=ha.deg_to_rad(f.leftDegrees)):e&16&&(e=da,"left"==b?ga.copy(a.Eh.leftProjectionMatrix,
e):ga.copy(a.Eh.rightProjectionMatrix,e),c[0]=Math.atan(-O[1]/O[2]),c[1]=Math.atan(-O[0]/O[2]),c[2]=Math.atan(O[1]/O[2]),c[3]=Math.atan(O[0]/O[2]));break;default:ra.error("fov is undefined for device: ",a.type)}return c}function p(a,b,c){switch(a.type){case 20:a.td&&("left"==b?ga.copy(a.Eh.leftProjectionMatrix,c):"right"==b?ga.copy(a.Eh.rightProjectionMatrix,c):ra.error("Unknown type of eye: ",b));break;default:ra.error("Projection matrix is undefined for device: ",a.type)}return c}function d(a,b){switch(b){case 0:var c=
0;navigator.getVRDisplays&&(c|=8,a.Eh&&(c|=16));navigator.getVRDevices&&(c=ma.is_mobile_device?c|4:c|2);return c||1;case 23:var d=a.td||a.Dn;return d?(c=d.getEyeParameters("left"),d=d.getEyeParameters("right"),a.td?d.offset[0]-c.offset[0]:d.eyeTranslation.x-c.eyeTranslation.x):a.Hh}}function v(a,c){if(a){for(var d=0;d<a.buttons.length;d++)c.Cm[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)c.Lk[d]=a.axes[d];if(d=a.pose){var e=b(20).pC;d.position&&T.transform_vec3(d.position,
e,c.position);d.orientation&&T.xJ(d.orientation,e,c.orientation)}}}function r(a){for(var b=0;b<a.Cm;b++)a.Cm[b]=0;for(b=0;b<a.Lk.length;b++)a.RF[b]=a.Lk[b],a.Lk[b]=0;a.position.set(ha.Vy);a.orientation.set(ha.wt)}function H(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function E(a){return null===a}function w(a,b,c,d){switch(b){case 130:c&&H(a.gh,c);if(d||a.Mh.every(E)&&a.gh.every(E))a.gh.length=0,a.Mh.length=0,b=a.jc.indexOf(141),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("deviceorientation",
C,!1));break;case 140:c&&H(a.Mh,c);if(d||a.Mh.every(E)&&a.gh.every(E))a.gh.length=0,a.Mh.length=0,b=a.jc.indexOf(141),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("deviceorientation",C,!1));break;case 50:c&&H(a.Kj,c);if(d||a.Kj.every(E))a.Kj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousedown",g,!1));break;case 40:c&&H(a.he,c);if(d||a.he.every(E))a.he.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousemove",F,!1));
break;case 41:c&&H(a.he,c);if(d||a.he.every(E))a.he.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousemove",u,!1));break;case 60:c&&H(a.Lj,c);if(d||a.Lj.every(E))a.Lj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mouseout",D,!1),a.element.removeEventListener("mouseup",B,!1));break;case 70:c&&H(a.Mj,c);if(d||a.Mj.every(E))a.Mj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("wheel",N,!1));break;
case 90:c&&H(a.Nr,c);if(d||a.Nr.every(E))a.Nr.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("keydown",L,!1));break;case 80:c&&H(a.Ej,c);if(d||a.Ej.every(E))a.Ej.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("keyup",A,!1));break;case 100:c&&H(a.gk,c);if(d||a.gk.every(E))a.gk.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchstart",G,!1));break;case 110:c&&H(a.ek,c);if(d||a.ek.every(E))a.ek.length=
0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchmove",z,!1));break;case 120:if(c&&H(a.dk,c),d||a.dk.every(E))a.dk.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchend",I,!1))}}function n(a,b){ha.ordered_angles_to_quat(a,ha.ZXY,b);if("orientation"in window)var c=ha.deg_to_rad(window.orientation);else"orientation"in window.screen?c=ha.deg_to_rad(window.screen.orientation.angle):c=0;c=ia.setAxisAngle(ha.AXIS_MZ,c,Ga);ia.multiply(b,
c,b);return b}function C(a){var c=O;null===a.alpha||null===a.beta||null===a.gamma?c[0]=c[1]=c[2]=0:(c[0]=ha.deg_to_rad(a.alpha),c[1]=ha.deg_to_rad(a.beta),c[2]=ha.deg_to_rad(a.gamma));a=b(10,a.currentTarget);for(var d=0;d<a.Mh.length;d++){var e=a.Mh[d];e&&(pa.copy(c,ba),e(ba))}if(a.gh.length)for(c=n(c,W),d=0;d<a.gh.length;d++)if(e=a.gh[d])ia.copy(c,ja),e(ja);for(d=0;d<a.gh.length;d++)a.gh[d]||a.gh.splice(d,1);for(d=0;d<a.Mh.length;d++)a.Mh[d]||a.Mh.splice(d,1)}function k(a,b){switch(a.type){case 30:a.Bw[0]=
b.clientX,a.Bw[1]=b.clientY,a.kT=b.which}}function F(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);k(c,a);for(var d=0;d<c.he.length;d++){var e=c.he[d];e&&(ua[0]=a.clientX,ua[1]=a.clientY,e(ua))}c.Ni&&a.preventDefault();for(d=0;d<c.he.length;d++)c.he[d]||c.he.splice(d,1)}}function u(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);k(c,a);for(var d=
0;d<c.he.length;d++){var e=c.he[d];if(e){if("number"==typeof a.movementX)var f=a.movementX,g=a.movementY;else"number"==typeof a.webkitMovementX?(f=a.webkitMovementX,g=a.webkitMovementY):"number"==typeof a.mozMovementX?(f=a.mozMovementX,g=a.mozMovementY):g=f=0;ua[0]=f;ua[1]=g;e(ua)}}c.Ni&&a.preventDefault();for(d=0;d<c.he.length;d++)c.he[d]||c.he.splice(d,1)}}function g(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);k(c,a);
for(var d=0;d<c.Kj.length;d++){var e=c.Kj[d];e&&e(a.which)}c.Ni&&(window.frameElement&&window.frameElement.focus(),a.preventDefault());for(d=0;d<c.Kj.length;d++)c.Kj[d]||c.Kj.splice(d,1)}}function D(a){!Q.MG(a.relatedTarget)&&a.which&&B(a)}function B(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);k(c,a);for(var d=0;d<c.Lj.length;d++){var e=c.Lj[d];e&&e(a.which)}c.Ni&&a.preventDefault();for(d=0;d<c.Lj.length;d++)c.Lj[d]||
c.Lj.splice(d,1)}}function N(a){for(var c=b(30,a.currentTarget),d=0;d<c.Mj.length;d++){var e=c.Mj[d];if(e){var f;f=a;var g=0;f.wheelDelta?f.wheelDelta%120?g=ha.sign(f.wheelDelta):g=f.wheelDelta/120:f.deltaY&&(g=f.deltaY%3?-ha.sign(f.deltaY):-f.deltaY/3);f=ha.clamp(100*g,-2E3,2E3);e(f)}}c.Ni&&a.preventDefault();for(d=0;d<c.Mj.length;d++)c.Mj[d]||c.Mj.splice(d,1)}function L(a){for(var c=b(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?c.YG:c.Nr,e=0;e<d.length;e++){var f=d[e];f?f(a.keyCode):d.splice(e--,
1)}c.Ni&&a.preventDefault()}function A(a){for(var c=b(40,a.currentTarget),d=0;d<c.Ej.length;d++){var e=c.Ej[d];e&&e(a.keyCode)}c.Ni&&a.preventDefault();for(d=0;d<c.Ej.length;d++)c.Ej[d]||c.Ej.splice(d,1)}function G(a){for(var c=b(50,a.currentTarget),d=0;d<c.gk.length;d++){var e=c.gk[d];e&&e(a.targetTouches)}for(d=0;d<c.gk.length;d++)c.gk[d]||c.gk.splice(d,1)}function z(a){for(var c=b(50,a.currentTarget),d=0;d<c.ek.length;d++){var e=c.ek[d];e&&e(a.targetTouches)}c.Ni&&a.preventDefault();for(d=0;d<
c.ek.length;d++)c.ek[d]||c.ek.splice(d,1)}function I(a){for(var c=b(50,a.currentTarget),d=0;d<c.dk.length;d++){var e=c.dk[d];e&&e(a.targetTouches)}for(d=0;d<c.dk.length;d++)c.dk[d]||c.dk.splice(d,1)}function S(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function m(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",
b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function K(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||
window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var U=t("__compat"),Q=t("__container"),R=t("__config"),ga=t("__mat4"),ra=t("__print"),T=t("__tsr"),ia=t("__quat"),ha=t("__util"),pa=t("__vec3"),Z=t("__vec4"),ma=R.L,aa=R.zG,fa=T.create(),wa=T.create(),da=ga.create();a.DEVICE_GYRO=10;a.DEVICE_HMD=20;a.DEVICE_MOUSE=30;a.DEVICE_KEYBOARD=40;a.DEVICE_TOUCH=50;a.st=60;a.Jy=70;a.Ky=80;a.Ly=90;a.HMD_WEBVR_DESKTOP=2;a.HMD_WEBVR_MOBILE=4;a.HMD_NON_WEBVR=1;a.HMD_WEBVR1=8;a.HMD_WEBVR1_1=
16;a.HMD_WEBVR_TYPE=0;a.HMD_ORIENTATION_QUAT=10;a.HMD_POSITION=20;a.iD=21;a.jD=22;a.HMD_EYE_DISTANCE=23;a.HMD_DISTORTION=24;a.HMD_BASELINE_DIST=25;a.HMD_SCREEN_LENS_DIST=26;a.HMD_SCREEN_WIDTH=27;a.HMD_SCREEN_HEIGHT=28;a.HMD_BEVEL_SIZE=29;a.DX=30;a.EX=31;a.MOUSE_LOCATION=40;a.rD=41;a.MOUSE_DOWN_WHICH=50;a.MOUSE_UP_WHICH=60;a.MOUSE_WHEEL=70;a.KEYBOARD_UP=80;a.KEYBOARD_DOWN=90;a.qD=91;a.TOUCH_START=100;a.TOUCH_MOVE=110;a.TOUCH_END=120;a.GYRO_ORIENTATION_QUAT=130;a.GYRO_ORIENTATION_ANGLES=140;a.GMPD_BUTTON_0=
300;a.GMPD_BUTTON_1=301;a.GMPD_BUTTON_2=302;a.GMPD_BUTTON_3=303;a.GMPD_BUTTON_4=304;a.GMPD_BUTTON_5=305;a.GMPD_BUTTON_6=306;a.GMPD_BUTTON_7=307;a.GMPD_BUTTON_8=308;a.GMPD_BUTTON_9=309;a.GMPD_BUTTON_10=310;a.GMPD_BUTTON_11=311;a.GMPD_BUTTON_12=312;a.GMPD_BUTTON_13=313;a.GMPD_BUTTON_14=314;a.GMPD_BUTTON_15=315;a.GMPD_BUTTON_16=316;a.GMPD_BUTTON_17=317;a.GMPD_BUTTON_18=318;a.GMPD_BUTTON_19=319;a.GMPD_BUTTON_20=320;a.GMPD_BUTTON_21=321;a.GMPD_BUTTON_22=322;a.GMPD_BUTTON_23=323;a.GMPD_BUTTON_24=324;a.GMPD_BUTTON_25=
325;a.GMPD_TRACKPAD_BUTTON=300;a.GMPD_TRIGGER_BUTTON=301;a.GMPD_GRIPS_BUTTON=302;a.GMPD_MENU_BUTTON=303;a.GMPD_AXIS_0=326;a.GMPD_AXIS_1=327;a.GMPD_AXIS_2=328;a.GMPD_AXIS_3=329;a.GMPD_AXIS_4=330;a.GMPD_AXIS_5=331;a.GMPD_AXIS_6=332;a.GMPD_AXIS_7=333;a.GMPD_AXIS_8=334;a.GMPD_AXIS_9=335;a.GMPD_AXIS_10=336;a.GMPD_AXIS_11=337;var W=ia.create(),Ga=ia.create(),O=pa.create(),ua=new Float32Array(2),ba=pa.create(),ja=ia.create(),ca="ontouchstart"in document.documentElement,Ca=[];a.can_use_device=e;a.init=function(){if("HMD"==
ma.stereo||"NONE"==ma.stereo&&ma.is_mobile_device){var a=b(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.td=b.display;a.xg=!0;a.td.getFrameData(a.Eh)})}};a.get_device_by_type_element=b;a.oU=h;a.switch_prevent_default=function(a,b){a.Ni=b};a.reset_device=function(a){switch(a.type){case 20:if(a.xg)if(a.td)a.td.resetPose();else if(a.Xi)for(var b=0;b<a.Xi.length;b++)a.Xi[b].resetSensor();break;default:ra.error("reset_device() is undefined for device: ",a.type)}};a.get_vector_param=
function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:pa.copy(ha.wt,c);if(a.td)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.Xi)for(b=0;b<a.Xi.length;b++){var d=a.Xi[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:ra.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:pa.copy(ha.nq,
c);if(a.td)c[0]=a.position[0],c[1]=a.position[1],c[2]=a.position[2];else if(a.Xi)for(b=0;b<a.Xi.length;b++)d=a.Xi[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:ra.error("position is undefined for device: ",a.type),a=c}return a;case 21:return y(a,"left",c);case 22:return y(a,"right",c);case 30:return p(a,"left",c);case 31:return p(a,"right",c);case 40:case 41:return c[0]=a.Bw[0],c[1]=
a.Bw[1],c}};a.get_value_param=d;a.set_config=function(a,b,c){switch(a.type){case 20:if(d(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.Hh=c;l(a);break;case 25:a.di=c;l(a);break;case 26:a.As=c;l(a);break;case 27:a.Nl=c;l(a);break;case 28:a.yi=c;l(a);break;case 29:a.ei=c,l(a)}break;case 60:case 70:case 80:case 90:a.lv[b]=c}};a.uR=function(a,b){var c=b-300;return c<a.Cm.length?a.Cm[a.lv[c]-300]:!1};a.tR=function(a,b){return b-326<a.Lk.length?a.Lk[a.lv[b-
300]-326]:0};a.get_gamepad_position=function(a,b){b.set(a.position);return b};a.get_gamepad_orientation=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<Ca.length;b++){var c=Ca[b];switch(c.type){case 60:r(c);v(a[0],c);break;case 70:r(c);v(a[1],c);break;case 80:r(c);v(a[2],c);break;case 90:r(c);v(a[3],c);break;case 20:if(c.td){var d=c.td;if(c.Eh&&d.getFrameData(c.Eh)){var e=
c.Eh.pose,f=ha.ZA(c.Eh.leftViewMatrix,O);c.Hh=2*pa.length(f)}else e=d.getPose();e&&(f=ia.setAxisAngle(ha.AXIS_X,Math.PI/2,W),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=T.from_mat4(d.stageParameters.sittingToStandingTransform,fa),T.identity(wa),f=T.set_quat(f,wa),d=T.multiply(f,d,c.pC)):(T.identity(fa),d=T.set_quat(f,c.pC)),e.orientation&&T.xJ(e.orientation,d,c.orientation),e.position&&T.transform_vec3(e.position,d,c.position))}}}};a.attach_param_cb=function(a,b,c){switch(b){case 130:a.gh.push(c);
b=141;break;case 140:a.Mh.push(c);b=141;break;case 50:a.Kj.push(c);break;case 40:case 41:a.he.push(c);break;case 60:a.Lj.push(c);break;case 70:a.Mj.push(c);break;case 90:a.Nr.push(c);break;case 91:a.YG.push(c);b=90;break;case 80:a.Ej.push(c);break;case 100:a.gk.push(c);break;case 110:a.ek.push(c);break;case 120:a.dk.push(c)}if(-1==a.jc.indexOf(b)&&(a.jc.push(b),a.xg))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",g,!1);break;case 40:a.element.addEventListener("mousemove",
F,!1);break;case 41:a.element.addEventListener("mousemove",u,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||(a.element!=window&&a.element.addEventListener("mouseout",D,!1),a.element.addEventListener("mouseup",B,!1));break;case 70:a.element.addEventListener("wheel",N,!1);break;case 90:a.element.addEventListener("keydown",L,!1);break;case 80:a.element.addEventListener("keyup",A,!1);break;case 100:a.element.addEventListener("touchstart",G,!1);break;case 110:a.element.addEventListener("touchmove",
z,!1);break;case 120:a.element.addEventListener("touchend",I,!1);break;case 141:a.element.addEventListener("deviceorientation",C,!1)}};a.detach_param_cb=function(a,b,c){w(a,b,c,!1)};a.NR=n;a.cleanup=function(){for(var a=0;a<Ca.length;a++)for(var b=Ca[a],c=0;c<b.jc.length;c++)w(b,b.jc[c],null,!0);Ca.length=0};a.get_pressed_gmpd_btn=function(a){a=b(S(a));for(var c=0;c<a.Cm.length;c++)if(a.Cm[c])return c+300;return-1};a.get_moved_gmpd_axis=function(a){a=b(S(a));for(var c=0;c<a.Lk.length;c++)if(a.RF[c]-
a.Lk[c])return c+326;return-1};a.rv=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;return 0};a.KR=function(){var a=b(20);return a&&a.td};a.DM=function(a){a.element.addEventListener("mousedown",function(){a.value||m(a)},!1)};a.add_click_listener=function(a,b){ma.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.remove_click_listener=function(a,b){ma.is_mobile_device?
a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.check_fullscreen=K};b4w.module.__tbn=function(a,t){function e(a,b,c){a=x(a,b||0,c);v.normalize(a,c);return c}function c(a,b,c){c=c||0;var d=x(a,c,g),e=v.length(d),f=w.sign(d[3])*w.sign(b[3])||1;v.scale(b,f*e,d);3.1E-5>Math.abs(d[3])&&(d[3]=0<d[3]?3.1E-5:-3.1E-5);y(a,d,c);return a}function b(a,b){return w.sign(a[4*(b||0)+3])}function h(a,b,c){c=c||0;var d=x(a,c,g);0>w.sign(d[3])*b&&v.scale(d,-1,d);y(a,d,c)}function f(a,b,c){c=c||0;var d=x(a,c,g);v.normalize(d,d);v.scale(d,b,d);3.1E-5>Math.abs(d[3])&&(d[3]=0<d[3]?d[3]+
3.1E-5:d[3]-3.1E-5);y(a,d,c)}function q(a,b){var c=x(a,b||0,g);return v.length(c)}function l(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=.5;return b}function x(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function y(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function p(a){return a.length/4}function d(a,d,g){for(var l=p(a),k=0;k<l;k++){var n=b(a,k),r=q(a,k),u=e(a,k,C),u=v.multiply(d,u,C);c(g,u,k);f(g,r,k);h(g,n,k)}}a.GD=
4;var v=t("__quat"),r=t("__tsr"),H=t("__vec3"),E=t("__vec4"),w=t("__util"),n=v.create(),C=v.create(),k=H.create(),F=H.create(),u=H.create(),g=E.create(),D=E.create();a.Am=function(a,b,d){var e=!(!b||!b.length),g=a.length/3;d=d||l(g);for(var p=0;p<g;++p){var r=k;r[0]=a[3*p];r[1]=a[3*p+1];r[2]=a[3*p+2];H.normalize(r,r);if(e){var q=D;q[0]=b[4*p];q[1]=b[4*p+1];q[2]=b[4*p+2];q[3]=b[4*p+3];H.normalize(q,q);var m=H.cross(q,r,F);H.normalize(m,m);var y=v.rotationTo(w.AXIS_Z,m,n),x=H.transformQuat(w.AXIS_Y,
y,u),x=v.rotationTo(x,r,C),y=v.multiply(x,y,n);v.normalize(y,y);x=.5;m=H.cross(r,m,u);if(3.1E-5<Math.abs(m[0]-q[0])||3.1E-5<Math.abs(m[1]-q[1])||3.1E-5<Math.abs(m[2]-q[2]))x=Math.acos(H.dot(r,q))/Math.PI;c(d,y,p);h(d,w.sign(q[3]),p);f(d,x,p)}else y=v.rotationTo(w.AXIS_Y,r,n),c(d,y,p)}return d};a.copy=function(a,b,c,d){if(0!==c){b=4*b||0;c=c||a.length;for(var e=0,f=0;e<4*c;e+=4,f+=4)d[f]=a[b+e],d[f+1]=a[b+e+1],d[f+2]=a[b+e+2],d[f+3]=a[b+e+3]}};a.ub=e;a.set_quat=c;a.CR=function(a,b,c){a=e(a,b,n);return H.transformQuat(w.AXIS_Y,
a,c)};a.create=l;a.identity=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=.5;return a};a.Em=x;a.Pi=y;a.vv=p;a.nB=d;a.zH=function(a,b,c){b=r.ub(b,n);d(a,b,c)};a.slerp=function(a,d,g,l){var k=b(d,0),p=e(a,0,n),r=e(d,0,C);a=q(a);d=q(d);p=v.slerp(p,r,g,C);v.normalize(p,p);c(l,p,0);f(l,g*(a-d)+d);h(l,k,0);return l};a.Dw=function(a,d,g){var l=b(d,0),k=e(a,0,n),p=e(d,0,C);a=q(a,0);d=q(d,0);k=v.multiply(k,p,n);c(g,k,0);f(g,a+d-.5);h(g,l,0);return g};a.mT=function(a,d,g){var l=b(d,
0),k=e(a,0,n),p=e(d,0,C);a=q(a);d=q(d);p=v.invert(p,C);k=v.multiply(k,p,n);c(g,k,0);f(g,a-d+.5);h(g,l,0)}};b4w.module.__vec3=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array,e=Math.random;a.create=function(){var a=new t(3);a[0]=0;a[1]=0;a[2]=0;return a};a.clone=function(a){var b=new t(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=function(a,b,e){var c=new t(3);c[0]=a;c[1]=b;c[2]=e;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set=function(a,b,e,f){f[0]=a;f[1]=b;f[2]=e;return f};a.add=function(a,b,e){e[0]=a[0]+b[0];e[1]=a[1]+b[1];e[2]=a[2]+b[2];
return e};a.subtract=function(a,b,e){e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];return e};a.sub=a.subtract;a.multiply=function(a,b,e){e[0]=a[0]*b[0];e[1]=a[1]*b[1];e[2]=a[2]*b[2];return e};a.mul=a.multiply;a.divide=function(a,b,e){e[0]=a[0]/b[0];e[1]=a[1]/b[1];e[2]=a[2]/b[2];return e};a.div=a.divide;a.min=function(a,b,e){e[0]=Math.min(a[0],b[0]);e[1]=Math.min(a[1],b[1]);e[2]=Math.min(a[2],b[2]);return e};a.max=function(a,b,e){e[0]=Math.max(a[0],b[0]);e[1]=Math.max(a[1],b[1]);e[2]=Math.max(a[2],
b[2]);return e};a.scale=function(a,b,e){e[0]=a[0]*b;e[1]=a[1]*b;e[2]=a[2]*b;return e};a.scaleAndAdd=function(a,b,e,f){f[0]=a[0]+b[0]*e;f[1]=a[1]+b[1]*e;f[2]=a[2]+b[2]*e;return f};a.distance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],q=b[2]-a[2];return Math.sqrt(c*c+e*e+q*q)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],q=b[2]-a[2];return c*c+e*e+q*q};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;
a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=function(a,b){var c=a[0],e=a[1],q=a[2],c=c*c+e*e+q*q;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};a.cross=function(a,b,e){var c=a[0],h=a[1];a=a[2];var l=b[0],x=b[1];b=b[2];
e[0]=h*b-a*x;e[1]=a*l-c*b;e[2]=c*x-h*l;return e};a.lerp=function(a,b,e,f){var c=a[0],h=a[1];a=a[2];f[0]=c+e*(b[0]-c);f[1]=h+e*(b[1]-h);f[2]=a+e*(b[2]-a);return f};a.xZ=function(a,b,e,f,q,l){var c=q*q,h=c*(2*q-3)+1,p=c*(q-2)+q,d=c*(q-1);q=c*(3-2*q);l[0]=a[0]*h+b[0]*p+e[0]*d+f[0]*q;l[1]=a[1]*h+b[1]*p+e[1]*d+f[1]*q;l[2]=a[2]*h+b[2]*p+e[2]*d+f[2]*q;return l};a.nE=function(a,b,e,f,q,l){var c=1-q,h=c*c,p=q*q,d=h*c,h=3*q*h,c=3*p*c;q=p*q;l[0]=a[0]*d+b[0]*h+e[0]*c+f[0]*q;l[1]=a[1]*d+b[1]*h+e[1]*c+f[1]*q;l[2]=
a[2]*d+b[2]*h+e[2]*c+f[2]*q;return l};a.random=function(a,b){a=a||1;var c=2*e()*Math.PI,f=2*e()-1,q=Math.sqrt(1-f*f)*a;b[0]=Math.cos(c)*q;b[1]=Math.sin(c)*q;b[2]=f*a;return b};a.transformMat4=function(a,b,e){var c=a[0],h=a[1];a=a[2];var l=b[3]*c+b[7]*h+b[11]*a+b[15],l=l||1;e[0]=(b[0]*c+b[4]*h+b[8]*a+b[12])/l;e[1]=(b[1]*c+b[5]*h+b[9]*a+b[13])/l;e[2]=(b[2]*c+b[6]*h+b[10]*a+b[14])/l;return e};a.transformMat3=function(a,b,e){var c=a[0],h=a[1];a=a[2];e[0]=c*b[0]+h*b[3]+a*b[6];e[1]=c*b[1]+h*b[4]+a*b[7];
e[2]=c*b[2]+h*b[5]+a*b[8];return e};a.transformQuat=function(a,b,e){var c=a[0],h=a[1],l=a[2];a=b[0];var x=b[1],y=b[2];b=b[3];var p=b*c+x*l-y*h,d=b*h+y*c-a*l,v=b*l+a*h-x*c,c=-a*c-x*h-y*l;e[0]=p*b+c*-a+d*-y-v*-x;e[1]=d*b+c*-x+v*-a-p*-y;e[2]=v*b+c*-y+p*-x-d*-a;return e};a.rotateX=function(a,b,e,f){var c=[],h=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];h[0]=c[0];h[1]=c[1]*Math.cos(e)-c[2]*Math.sin(e);h[2]=c[1]*Math.sin(e)+c[2]*Math.cos(e);f[0]=h[0]+b[0];f[1]=h[1]+b[1];f[2]=h[2]+b[2];return f};a.rotateY=
function(a,b,e,f){var c=[],h=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];h[0]=c[2]*Math.sin(e)+c[0]*Math.cos(e);h[1]=c[1];h[2]=c[2]*Math.cos(e)-c[0]*Math.sin(e);f[0]=h[0]+b[0];f[1]=h[1]+b[1];f[2]=h[2]+b[2];return f};a.rotateZ=function(a,b,e,f){var c=[],h=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];h[0]=c[0]*Math.cos(e)-c[1]*Math.sin(e);h[1]=c[0]*Math.sin(e)+c[1]*Math.cos(e);h[2]=c[2];f[0]=h[0]+b[0];f[1]=h[1]+b[1];f[2]=h[2]+b[2];return f};a.forEach=function(){var c=a.create();return function(a,
e,f,q,l,x){var b;e||(e=3);f||(f=0);for(q?b=Math.min(q*e+f,a.length):b=a.length;f<b;f+=e)c[0]=a[f],c[1]=a[f+1],c[2]=a[f+2],l(c,x,c),a[f]=c[0],a[f+1]=c[1],a[f+2]=c[2];return a}}();a.angle=function(c,b){var e=a.fromValues(c[0],c[1],c[2]),f=a.fromValues(b[0],b[1],b[2]);a.normalize(e,e);a.normalize(f,f);e=a.dot(e,f);return 1<e?0:Math.acos(e)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}};b4w.module.vec3=b4w.module.__vec3;
b4w.module.__vec4=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array,e=Math.random;a.create=function(){var a=new t(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.clone=function(a){var b=new t(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,e,f){var c=new t(4);c[0]=a;c[1]=b;c[2]=e;c[3]=f;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,b,e,f,q){q[0]=a;q[1]=b;q[2]=e;q[3]=f;return q};a.add=function(a,b,e){e[0]=
a[0]+b[0];e[1]=a[1]+b[1];e[2]=a[2]+b[2];e[3]=a[3]+b[3];return e};a.subtract=function(a,b,e){e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];e[3]=a[3]-b[3];return e};a.sub=a.subtract;a.multiply=function(a,b,e){e[0]=a[0]*b[0];e[1]=a[1]*b[1];e[2]=a[2]*b[2];e[3]=a[3]*b[3];return e};a.mul=a.multiply;a.divide=function(a,b,e){e[0]=a[0]/b[0];e[1]=a[1]/b[1];e[2]=a[2]/b[2];e[3]=a[3]/b[3];return e};a.div=a.divide;a.min=function(a,b,e){e[0]=Math.min(a[0],b[0]);e[1]=Math.min(a[1],b[1]);e[2]=Math.min(a[2],b[2]);e[3]=
Math.min(a[3],b[3]);return e};a.max=function(a,b,e){e[0]=Math.max(a[0],b[0]);e[1]=Math.max(a[1],b[1]);e[2]=Math.max(a[2],b[2]);e[3]=Math.max(a[3],b[3]);return e};a.scale=function(a,b,e){e[0]=a[0]*b;e[1]=a[1]*b;e[2]=a[2]*b;e[3]=a[3]*b;return e};a.scaleAndAdd=function(a,b,e,f){f[0]=a[0]+b[0]*e;f[1]=a[1]+b[1]*e;f[2]=a[2]+b[2]*e;f[3]=a[3]+b[3]*e;return f};a.distance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],q=b[2]-a[2],l=b[3]-a[3];return Math.sqrt(c*c+e*e+q*q+l*l)};a.dist=a.distance;a.squaredDistance=
function(a,b){var c=b[0]-a[0],e=b[1]-a[1],q=b[2]-a[2],l=b[3]-a[3];return c*c+e*e+q*q+l*l};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b*b+c*c+e*e+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=
function(a,b){var c=a[0],e=a[1],q=a[2],l=a[3],x=c*c+e*e+q*q+l*l;0<x&&(x=1/Math.sqrt(x),b[0]=c*x,b[1]=e*x,b[2]=q*x,b[3]=l*x);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,e,f){var c=a[0],h=a[1],x=a[2];a=a[3];f[0]=c+e*(b[0]-c);f[1]=h+e*(b[1]-h);f[2]=x+e*(b[2]-x);f[3]=a+e*(b[3]-a);return f};a.random=function(c,b){c=c||1;b[0]=e();b[1]=e();b[2]=e();b[3]=e();a.normalize(b,b);a.scale(b,c,b);return b};a.transformMat4=function(a,b,e){var c=a[0],h=a[1],l=
a[2];a=a[3];e[0]=b[0]*c+b[4]*h+b[8]*l+b[12]*a;e[1]=b[1]*c+b[5]*h+b[9]*l+b[13]*a;e[2]=b[2]*c+b[6]*h+b[10]*l+b[14]*a;e[3]=b[3]*c+b[7]*h+b[11]*l+b[15]*a;return e};a.transformQuat=function(a,b,e){var c=a[0],h=a[1],l=a[2],x=b[0],y=b[1],p=b[2];b=b[3];var d=b*c+y*l-p*h,v=b*h+p*c-x*l,r=b*l+x*h-y*c,c=-x*c-y*h-p*l;e[0]=d*b+c*-x+v*-p-r*-y;e[1]=v*b+c*-y+r*-x-d*-p;e[2]=r*b+c*-p+d*-y-v*-x;e[3]=a[3];return e};a.forEach=function(){var c=a.create();return function(a,e,f,q,l,x){var b;e||(e=4);f||(f=0);for(q?b=Math.min(q*
e+f,a.length):b=a.length;f<b;f+=e)c[0]=a[f],c[1]=a[f+1],c[2]=a[f+2],c[3]=a[f+3],l(c,x,c),a[f]=c[0],a[f+1]=c[1],a[f+2]=c[2],a[f+3]=c[3];return a}}();a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.vec4=b4w.module.__vec4;
b4w.module.__quat=function(a,t){var e=t("__vec3"),c=t("__vec4"),b=t("__mat3"),h="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.rotationTo=function(){var b=e.create(),c=e.fromValues(1,0,0),h=e.fromValues(0,1,0);return function(f,l,p){var d=e.dot(f,l);if(-.9999999>d)return e.cross(c,f,b),1E-6>e.length(b)&&e.cross(h,f,b),e.normalize(b,b),a.setAxisAngle(b,Math.PI,p),p;if(.9999999<d)return p[0]=0,p[1]=0,p[2]=0,p[3]=1,p;e.cross(f,
l,b);p[0]=b[0];p[1]=b[1];p[2]=b[2];p[3]=1+d;return a.normalize(p,p)}}();a.setAxes=function(){var c=b.create();return function(b,e,f,h){c[0]=e[0];c[3]=e[1];c[6]=e[2];c[1]=f[0];c[4]=f[1];c[7]=f[2];c[2]=-b[0];c[5]=-b[1];c[8]=-b[2];return a.normalize(a.fromMat3(c,h),h)}}();a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=function(a,b,c){b*=.5;var e=Math.sin(b);c[0]=e*a[0];c[1]=e*a[1];c[2]=e*a[2];c[3]=Math.cos(b);
return c};a.add=c.add;a.multiply=function(a,b,c){var e=a[0],f=a[1],h=a[2];a=a[3];var d=b[0],l=b[1],r=b[2];b=b[3];c[0]=e*b+a*d+f*r-h*l;c[1]=f*b+a*l+h*d-e*r;c[2]=h*b+a*r+e*l-f*d;c[3]=a*b-e*d-f*l-h*r;return c};a.mul=a.multiply;a.scale=c.scale;a.rotateX=function(a,b,c){b*=.5;var e=a[0],f=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*b+a*d;c[1]=f*b+h*d;c[2]=h*b-f*d;c[3]=a*b-e*d;return c};a.rotateY=function(a,b,c){b*=.5;var e=a[0],f=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*
b-h*d;c[1]=f*b+a*d;c[2]=h*b+e*d;c[3]=a*b-f*d;return c};a.rotateZ=function(a,b,c){b*=.5;var e=a[0],f=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*b+f*d;c[1]=f*b-e*d;c[2]=h*b+a*d;c[3]=a*b-h*d;return c};a.calculateW=function(a,b){var c=a[0],e=a[1],f=a[2];b[0]=c;b[1]=e;b[2]=f;b[3]=Math.sqrt(Math.abs(1-c*c-e*e-f*f));return b};a.dot=c.dot;a.lerp=c.lerp;a.slerp=function(a,b,c,e){var f=a[0],h=a[1],d=a[2];a=a[3];var l=b[0],r=b[1],q=b[2];b=b[3];var x,w,n;w=f*l+h*r+d*q+a*b;0>w&&(w=-w,l=-l,r=-r,
q=-q,b=-b);1E-6<1-w?(x=Math.acos(w),n=Math.sin(x),w=Math.sin((1-c)*x)/n,c=Math.sin(c*x)/n):w=1-c;e[0]=w*f+c*l;e[1]=w*h+c*r;e[2]=w*d+c*q;e[3]=w*a+c*b;return e};a.q_=function(){var b=a.create(),c=a.create();return function(e,f,h,p,d,q){a.slerp(e,p,d,b);a.slerp(f,h,d,c);a.slerp(b,c,2*d*(1-d),q);return q}}();a.invert=function(a,b){var c=a[0],e=a[1],f=a[2],h=a[3],d=c*c+e*e+f*f+h*h,d=d?1/d:0;b[0]=-c*d;b[1]=-e*d;b[2]=-f*d;b[3]=h*d;return b};a.conjugate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=
a[3];return b};a.length=c.length;a.len=a.length;a.squaredLength=c.squaredLength;a.sqrLen=a.squaredLength;a.normalize=c.normalize;a.fromMat3=function(a,b){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var f=(e+1)%3,h=(e+2)%3,c=Math.sqrt(a[3*e+e]-a[3*f+f]-a[3*h+h]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*f+h]-a[3*h+f])*c;b[f]=(a[3*f+e]+a[3*e+f])*c;b[h]=(a[3*h+e]+a[3*e+h])*c}return b};a.str=
function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.quat=b4w.module.__quat;
b4w.module.__mat3=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new t(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat4=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c};a.clone=function(a){var c=new t(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.copy=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=
a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],e=a[2],f=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=e;c[7]=f}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c};a.invert=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=a[4],x=a[5],y=a[6],p=a[7],d=a[8],v=d*l-x*p,r=-d*q+x*y,t=
p*q-l*y,E=b*v+e*r+f*t;if(!E)return null;E=1/E;c[0]=v*E;c[1]=(-d*e+f*p)*E;c[2]=(x*e-f*l)*E;c[3]=r*E;c[4]=(d*b-f*y)*E;c[5]=(-x*b+f*q)*E;c[6]=t*E;c[7]=(-p*b+e*y)*E;c[8]=(l*b-e*q)*E;return c};a.adjoint=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=a[4],x=a[5],y=a[6],p=a[7],d=a[8];c[0]=l*d-x*p;c[1]=f*p-e*d;c[2]=e*x-f*l;c[3]=x*y-q*d;c[4]=b*d-f*y;c[5]=f*q-b*x;c[6]=q*p-l*y;c[7]=e*y-b*p;c[8]=b*l-e*q;return c};a.determinant=function(a){var c=a[3],b=a[4],e=a[5],f=a[6],q=a[7],l=a[8];return a[0]*(l*b-e*q)+a[1]*
(-l*c+e*f)+a[2]*(q*c-b*f)};a.multiply=function(a,c,b){var e=a[0],f=a[1],q=a[2],l=a[3],x=a[4],y=a[5],p=a[6],d=a[7];a=a[8];var v=c[0],r=c[1],t=c[2],E=c[3],w=c[4],n=c[5],C=c[6],k=c[7];c=c[8];b[0]=v*e+r*l+t*p;b[1]=v*f+r*x+t*d;b[2]=v*q+r*y+t*a;b[3]=E*e+w*l+n*p;b[4]=E*f+w*x+n*d;b[5]=E*q+w*y+n*a;b[6]=C*e+k*l+c*p;b[7]=C*f+k*x+c*d;b[8]=C*q+k*y+c*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var e=a[0],f=a[1],q=a[2],l=a[3],x=a[4],y=a[5],p=a[6],d=a[7];a=a[8];var v=c[0];c=c[1];b[0]=e;b[1]=f;b[2]=q;
b[3]=l;b[4]=x;b[5]=y;b[6]=v*e+c*l+p;b[7]=v*f+c*x+d;b[8]=v*q+c*y+a;return b};a.rotate=function(a,c,b){var e=a[0],f=a[1],q=a[2],l=a[3],x=a[4],y=a[5],p=a[6],d=a[7];a=a[8];var v=Math.sin(c);c=Math.cos(c);b[0]=c*e+v*l;b[1]=c*f+v*x;b[2]=c*q+v*y;b[3]=c*l-v*e;b[4]=c*x-v*f;b[5]=c*y-v*q;b[6]=p;b[7]=d;b[8]=a;return b};a.scale=function(a,c,b){var e=c[0];c=c[1];b[0]=e*a[0];b[1]=e*a[1];b[2]=e*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.JQ=function(a,c){c[0]=1;c[1]=0;c[2]=
0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};a.HQ=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=0;c[3]=-b;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.IQ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.fromMat2d=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};a.fromQuat=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=b+b,x=e+e,y=f+f,b=b*l,p=e*l,e=e*x,d=f*l,v=
f*x,f=f*y,l=q*l,x=q*x,q=q*y;c[0]=1-e-f;c[3]=p-q;c[6]=d+x;c[1]=p+q;c[4]=1-b-f;c[7]=v-l;c[2]=d-x;c[5]=v+l;c[8]=1-b-e;return c};a.normalFromMat4=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=a[4],x=a[5],y=a[6],p=a[7],d=a[8],v=a[9],r=a[10],t=a[11],E=a[12],w=a[13],n=a[14],C=a[15],k=b*x-e*l,F=b*y-f*l,u=b*p-q*l,g=e*y-f*x,D=e*p-q*x,B=f*p-q*y,N=d*w-v*E,L=d*n-r*E,d=d*C-t*E,A=v*n-r*w,v=v*C-t*w,r=r*C-t*n,t=k*r-F*v+u*A+g*d-D*L+B*N;if(!t)return null;t=1/t;c[0]=(x*r-y*v+p*A)*t;c[1]=(y*d-l*r-p*L)*t;c[2]=(l*v-x*
d+p*N)*t;c[3]=(f*v-e*r-q*A)*t;c[4]=(b*r-f*d+q*L)*t;c[5]=(e*d-b*v-q*N)*t;c[6]=(w*B-n*D+C*g)*t;c[7]=(n*u-E*B-C*F)*t;c[8]=(E*D-w*u+C*k)*t;return c};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.GQ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}};b4w.module.mat3=b4w.module.__mat3;
b4w.module.__mat4=function(a){var t="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new t(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.clone=function(a){var c=new t(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.copy=function(a,c){c[0]=a[0];
c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],e=a[2],f=a[3],q=a[6],l=a[7],x=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=b;c[6]=a[9];c[7]=a[13];c[8]=e;c[9]=q;c[11]=a[14];c[12]=f;c[13]=
l;c[14]=x}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],c[14]=a[11],c[15]=a[15];return c};a.invert=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=a[4],x=a[5],y=a[6],p=a[7],d=a[8],v=a[9],r=a[10],t=a[11],E=a[12],w=a[13],n=a[14],C=a[15],k=b*x-e*l,F=b*y-f*l,u=b*p-q*l,g=e*y-f*x,D=e*p-q*x,B=f*p-q*y,N=d*w-v*E,L=d*n-r*E,A=d*C-t*E,G=v*n-r*w,z=v*C-t*w,I=r*C-t*n,S=k*I-F*z+u*G+g*A-D*L+B*N;if(!S)return null;
S=1/S;c[0]=(x*I-y*z+p*G)*S;c[1]=(f*z-e*I-q*G)*S;c[2]=(w*B-n*D+C*g)*S;c[3]=(r*D-v*B-t*g)*S;c[4]=(y*A-l*I-p*L)*S;c[5]=(b*I-f*A+q*L)*S;c[6]=(n*u-E*B-C*F)*S;c[7]=(d*B-r*u+t*F)*S;c[8]=(l*z-x*A+p*N)*S;c[9]=(e*A-b*z-q*N)*S;c[10]=(E*D-w*u+C*k)*S;c[11]=(v*u-d*D-t*k)*S;c[12]=(x*L-l*G-y*N)*S;c[13]=(b*G-e*L+f*N)*S;c[14]=(w*F-E*g-n*k)*S;c[15]=(d*g-v*F+r*k)*S;return c};a.adjoint=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=a[4],x=a[5],y=a[6],p=a[7],d=a[8],v=a[9],r=a[10],t=a[11],E=a[12],w=a[13],n=a[14],C=a[15];
c[0]=x*(r*C-t*n)-v*(y*C-p*n)+w*(y*t-p*r);c[1]=-(e*(r*C-t*n)-v*(f*C-q*n)+w*(f*t-q*r));c[2]=e*(y*C-p*n)-x*(f*C-q*n)+w*(f*p-q*y);c[3]=-(e*(y*t-p*r)-x*(f*t-q*r)+v*(f*p-q*y));c[4]=-(l*(r*C-t*n)-d*(y*C-p*n)+E*(y*t-p*r));c[5]=b*(r*C-t*n)-d*(f*C-q*n)+E*(f*t-q*r);c[6]=-(b*(y*C-p*n)-l*(f*C-q*n)+E*(f*p-q*y));c[7]=b*(y*t-p*r)-l*(f*t-q*r)+d*(f*p-q*y);c[8]=l*(v*C-t*w)-d*(x*C-p*w)+E*(x*t-p*v);c[9]=-(b*(v*C-t*w)-d*(e*C-q*w)+E*(e*t-q*v));c[10]=b*(x*C-p*w)-l*(e*C-q*w)+E*(e*p-q*x);c[11]=-(b*(x*t-p*v)-l*(e*t-q*v)+d*
(e*p-q*x));c[12]=-(l*(v*n-r*w)-d*(x*n-y*w)+E*(x*r-y*v));c[13]=b*(v*n-r*w)-d*(e*n-f*w)+E*(e*r-f*v);c[14]=-(b*(x*n-y*w)-l*(e*n-f*w)+E*(e*y-f*x));c[15]=b*(x*r-y*v)-l*(e*r-f*v)+d*(e*y-f*x);return c};a.determinant=function(a){var c=a[0],b=a[1],e=a[2],f=a[3],q=a[4],l=a[5],x=a[6],y=a[7],p=a[8],d=a[9],v=a[10],r=a[11],t=a[12],E=a[13],w=a[14];a=a[15];return(c*l-b*q)*(v*a-r*w)-(c*x-e*q)*(d*a-r*E)+(c*y-f*q)*(d*w-v*E)+(b*x-e*l)*(p*a-r*t)-(b*y-f*l)*(p*w-v*t)+(e*y-f*x)*(p*E-d*t)};a.multiply=function(a,c,b){var e=
a[0],f=a[1],q=a[2],l=a[3],x=a[4],y=a[5],p=a[6],d=a[7],v=a[8],r=a[9],t=a[10],E=a[11],w=a[12],n=a[13],C=a[14];a=a[15];var k=c[0],F=c[1],u=c[2],g=c[3];b[0]=k*e+F*x+u*v+g*w;b[1]=k*f+F*y+u*r+g*n;b[2]=k*q+F*p+u*t+g*C;b[3]=k*l+F*d+u*E+g*a;k=c[4];F=c[5];u=c[6];g=c[7];b[4]=k*e+F*x+u*v+g*w;b[5]=k*f+F*y+u*r+g*n;b[6]=k*q+F*p+u*t+g*C;b[7]=k*l+F*d+u*E+g*a;k=c[8];F=c[9];u=c[10];g=c[11];b[8]=k*e+F*x+u*v+g*w;b[9]=k*f+F*y+u*r+g*n;b[10]=k*q+F*p+u*t+g*C;b[11]=k*l+F*d+u*E+g*a;k=c[12];F=c[13];u=c[14];g=c[15];b[12]=k*e+
F*x+u*v+g*w;b[13]=k*f+F*y+u*r+g*n;b[14]=k*q+F*p+u*t+g*C;b[15]=k*l+F*d+u*E+g*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var e=c[0],f=c[1];c=c[2];var q,l,x,y,p,d,v,r,t,E,w,n;a===b?(b[12]=a[0]*e+a[4]*f+a[8]*c+a[12],b[13]=a[1]*e+a[5]*f+a[9]*c+a[13],b[14]=a[2]*e+a[6]*f+a[10]*c+a[14],b[15]=a[3]*e+a[7]*f+a[11]*c+a[15]):(q=a[0],l=a[1],x=a[2],y=a[3],p=a[4],d=a[5],v=a[6],r=a[7],t=a[8],E=a[9],w=a[10],n=a[11],b[0]=q,b[1]=l,b[2]=x,b[3]=y,b[4]=p,b[5]=d,b[6]=v,b[7]=r,b[8]=t,b[9]=E,b[10]=w,b[11]=n,
b[12]=q*e+p*f+t*c+a[12],b[13]=l*e+d*f+E*c+a[13],b[14]=x*e+v*f+w*c+a[14],b[15]=y*e+r*f+n*c+a[15]);return b};a.scale=function(a,c,b){var e=c[0],f=c[1];c=c[2];b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*f;b[5]=a[5]*f;b[6]=a[6]*f;b[7]=a[7]*f;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.rotate=function(a,c,b,h){var e=b[0],q=b[1];b=b[2];var l=Math.sqrt(e*e+q*q+b*b),x,y,p,d,v,r,t,E,w,n,C,k,F,u,g,D,B,N,L,A;if(1E-7>Math.abs(l))return null;
l=1/l;e*=l;q*=l;b*=l;x=Math.sin(c);y=Math.cos(c);p=1-y;c=a[0];l=a[1];d=a[2];v=a[3];r=a[4];t=a[5];E=a[6];w=a[7];n=a[8];C=a[9];k=a[10];F=a[11];u=e*e*p+y;g=q*e*p+b*x;D=b*e*p-q*x;B=e*q*p-b*x;N=q*q*p+y;L=b*q*p+e*x;A=e*b*p+q*x;e=q*b*p-e*x;q=b*b*p+y;h[0]=c*u+r*g+n*D;h[1]=l*u+t*g+C*D;h[2]=d*u+E*g+k*D;h[3]=v*u+w*g+F*D;h[4]=c*B+r*N+n*L;h[5]=l*B+t*N+C*L;h[6]=d*B+E*N+k*L;h[7]=v*B+w*N+F*L;h[8]=c*A+r*e+n*q;h[9]=l*A+t*e+C*q;h[10]=d*A+E*e+k*q;h[11]=v*A+w*e+F*q;a!==h&&(h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]);
return h};a.rotateX=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var f=a[4],q=a[5],l=a[6],x=a[7],y=a[8],p=a[9],d=a[10],v=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=f*c+y*e;b[5]=q*c+p*e;b[6]=l*c+d*e;b[7]=x*c+v*e;b[8]=y*c-f*e;b[9]=p*c-q*e;b[10]=d*c-l*e;b[11]=v*c-x*e;return b};a.rotateY=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var f=a[0],q=a[1],l=a[2],x=a[3],y=a[8],p=a[9],d=a[10],v=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=f*c-y*e;b[1]=q*c-p*e;b[2]=l*c-d*e;b[3]=x*c-v*e;b[8]=f*e+y*c;b[9]=q*e+p*c;b[10]=l*e+d*c;b[11]=x*e+v*c;return b};a.rotateZ=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var f=a[0],q=a[1],l=a[2],x=a[3],y=a[4],p=a[5],d=a[6],v=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=f*c+y*e;b[1]=q*c+p*e;b[2]=l*c+d*e;b[3]=x*c+v*e;b[4]=y*c-f*e;b[5]=p*c-q*e;b[6]=d*c-l*e;b[7]=v*c-x*e;return b};
a.JQ=function(a,c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};a.IQ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=a[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=a[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.HQ=function(a,c,b){var e=c[0],f=c[1];c=c[2];var q=Math.sqrt(e*e+f*f+c*c),l;if(1E-7>Math.abs(q))return null;q=1/q;e*=q;f*=q;c*=q;q=Math.sin(a);a=Math.cos(a);l=1-a;b[0]=e*e*l+a;b[1]=f*e*l+c*
q;b[2]=c*e*l-f*q;b[3]=0;b[4]=e*f*l-c*q;b[5]=f*f*l+a;b[6]=c*f*l+e*q;b[7]=0;b[8]=e*c*l+f*q;b[9]=f*c*l-e*q;b[10]=c*c*l+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.YY=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=e;c[6]=b;c[7]=0;c[8]=0;c[9]=-b;c[10]=e;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.ZY=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=0;c[2]=-b;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=b;c[9]=0;c[10]=e;c[11]=0;c[12]=0;c[13]=0;
c[14]=0;c[15]=1;return c};a.$Y=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=0;c[3]=0;c[4]=-b;c[5]=e;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.fromRotationTranslation=function(a,c,b){var e=a[0],f=a[1],q=a[2],l=a[3],x=e+e,y=f+f,p=q+q;a=e*x;var d=e*y,e=e*p,v=f*y,f=f*p,q=q*p,x=l*x,y=l*y,l=l*p;b[0]=1-(v+q);b[1]=d+l;b[2]=e-y;b[3]=0;b[4]=d-l;b[5]=1-(a+q);b[6]=f+x;b[7]=0;b[8]=e+y;b[9]=f-x;b[10]=1-(a+v);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};a.WY=function(a,c,b,h){var e=a[0],q=a[1],l=a[2],x=a[3],y=e+e,p=q+q,d=l+l;a=e*y;var v=e*p,e=e*d,r=q*p,q=q*d,l=l*d,y=x*y,p=x*p,x=x*d,d=b[0],t=b[1];b=b[2];h[0]=(1-(r+l))*d;h[1]=(v+x)*d;h[2]=(e-p)*d;h[3]=0;h[4]=(v-x)*t;h[5]=(1-(a+l))*t;h[6]=(q+y)*t;h[7]=0;h[8]=(e+p)*b;h[9]=(q-y)*b;h[10]=(1-(a+r))*b;h[11]=0;h[12]=c[0];h[13]=c[1];h[14]=c[2];h[15]=1;return h};a.XY=function(a,c,b,h,f){var e=a[0],l=a[1],x=a[2],y=a[3],p=e+e,d=l+l,v=x+x;a=e*p;var r=e*d,e=e*v,t=l*d,l=l*v,x=x*v,p=y*p,d=y*d,y=
y*v,v=b[0],E=b[1];b=b[2];var w=h[0],n=h[1];h=h[2];f[0]=(1-(t+x))*v;f[1]=(r+y)*v;f[2]=(e-d)*v;f[3]=0;f[4]=(r-y)*E;f[5]=(1-(a+x))*E;f[6]=(l+p)*E;f[7]=0;f[8]=(e+d)*b;f[9]=(l-p)*b;f[10]=(1-(a+t))*b;f[11]=0;f[12]=c[0]+w-(f[0]*w+f[4]*n+f[8]*h);f[13]=c[1]+n-(f[1]*w+f[5]*n+f[9]*h);f[14]=c[2]+h-(f[2]*w+f[6]*n+f[10]*h);f[15]=1;return f};a.fromQuat=function(a,c){var b=a[0],e=a[1],f=a[2],q=a[3],l=b+b,x=e+e,y=f+f,b=b*l,p=e*l,e=e*x,d=f*l,v=f*x,f=f*y,l=q*l,x=q*x,q=q*y;c[0]=1-e-f;c[1]=p+q;c[2]=d-x;c[3]=0;c[4]=p-
q;c[5]=1-b-f;c[6]=v+l;c[7]=0;c[8]=d+x;c[9]=v-l;c[10]=1-b-e;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.frustum=function(a,c,b,h,f,q,l){var e=1/(c-a),y=1/(h-b),p=1/(f-q);l[0]=2*f*e;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=2*f*y;l[6]=0;l[7]=0;l[8]=(c+a)*e;l[9]=(h+b)*y;l[10]=(q+f)*p;l[11]=-1;l[12]=0;l[13]=0;l[14]=q*f*2*p;l[15]=0;return l};a.perspective=function(a,c,b,h,f){a=1/Math.tan(a/2);var e=1/(b-h);f[0]=a/c;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=(h+b)*e;f[11]=-1;f[12]=
0;f[13]=0;f[14]=2*h*b*e;f[15]=0;return f};a.XZ=function(a,c,b,h){var e=Math.tan(a.upDegrees*Math.PI/180),q=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var x=2/(l+a),y=2/(e+q);h[0]=x;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=y;h[6]=0;h[7]=0;h[8]=-((l-a)*x*.5);h[9]=(e-q)*y*.5;h[10]=b/(c-b);h[11]=-1;h[12]=0;h[13]=0;h[14]=b*c/(c-b);h[15]=0;return h};a.ortho=function(a,c,b,h,f,q,l){var e=1/(a-c),y=1/(b-h),p=1/(f-q);l[0]=-2*e;l[1]=0;l[2]=0;l[3]=
0;l[4]=0;l[5]=-2*y;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=2*p;l[11]=0;l[12]=(a+c)*e;l[13]=(h+b)*y;l[14]=(q+f)*p;l[15]=1;return l};a.lookAt=function(e,c,b,h){var f,q,l,x,y,p,d,v,r=e[0],t=e[1];e=e[2];l=b[0];x=b[1];q=b[2];d=c[0];b=c[1];f=c[2];if(1E-7>Math.abs(r-d)&&1E-7>Math.abs(t-b)&&1E-7>Math.abs(e-f))return a.identity(h);c=r-d;b=t-b;d=e-f;v=1/Math.sqrt(c*c+b*b+d*d);c*=v;b*=v;d*=v;f=x*d-q*b;q=q*c-l*d;l=l*b-x*c;(v=Math.sqrt(f*f+q*q+l*l))?(v=1/v,f*=v,q*=v,l*=v):l=q=f=0;x=b*l-d*q;y=d*f-c*l;p=c*q-b*f;(v=Math.sqrt(x*
x+y*y+p*p))?(v=1/v,x*=v,y*=v,p*=v):p=y=x=0;h[0]=f;h[1]=x;h[2]=c;h[3]=0;h[4]=q;h[5]=y;h[6]=b;h[7]=0;h[8]=l;h[9]=p;h[10]=d;h[11]=0;h[12]=-(f*r+q*t+l*e);h[13]=-(x*r+y*t+p*e);h[14]=-(c*r+b*t+d*e);h[15]=1;return h};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.GQ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}};b4w.module.mat4=b4w.module.__mat4;b4w.module.__md5=function(a){function t(a,f){var l=a[0],q=a[1],p=a[2],d=a[3],l=c(l,q,p,d,f[0],7,-680876936),d=c(d,l,q,p,f[1],12,-389564586),p=c(p,d,l,q,f[2],17,606105819),q=c(q,p,d,l,f[3],22,-1044525330),l=c(l,q,p,d,f[4],7,-176418897),d=c(d,l,q,p,f[5],12,1200080426),p=c(p,d,l,q,f[6],17,-1473231341),q=c(q,p,d,l,f[7],22,-45705983),l=c(l,q,p,d,f[8],7,1770035416),d=c(d,l,q,p,f[9],12,-1958414417),p=c(p,d,l,q,f[10],17,-42063),q=c(q,p,d,l,f[11],22,-1990404162),l=c(l,q,p,d,f[12],7,1804603682),d=c(d,l,q,p,
f[13],12,-40341101),p=c(p,d,l,q,f[14],17,-1502002290),q=c(q,p,d,l,f[15],22,1236535329),l=b(l,q,p,d,f[1],5,-165796510),d=b(d,l,q,p,f[6],9,-1069501632),p=b(p,d,l,q,f[11],14,643717713),q=b(q,p,d,l,f[0],20,-373897302),l=b(l,q,p,d,f[5],5,-701558691),d=b(d,l,q,p,f[10],9,38016083),p=b(p,d,l,q,f[15],14,-660478335),q=b(q,p,d,l,f[4],20,-405537848),l=b(l,q,p,d,f[9],5,568446438),d=b(d,l,q,p,f[14],9,-1019803690),p=b(p,d,l,q,f[3],14,-187363961),q=b(q,p,d,l,f[8],20,1163531501),l=b(l,q,p,d,f[13],5,-1444681467),d=
b(d,l,q,p,f[2],9,-51403784),p=b(p,d,l,q,f[7],14,1735328473),q=b(q,p,d,l,f[12],20,-1926607734),l=e(q^p^d,l,q,f[5],4,-378558),d=e(l^q^p,d,l,f[8],11,-2022574463),p=e(d^l^q,p,d,f[11],16,1839030562),q=e(p^d^l,q,p,f[14],23,-35309556),l=e(q^p^d,l,q,f[1],4,-1530992060),d=e(l^q^p,d,l,f[4],11,1272893353),p=e(d^l^q,p,d,f[7],16,-155497632),q=e(p^d^l,q,p,f[10],23,-1094730640),l=e(q^p^d,l,q,f[13],4,681279174),d=e(l^q^p,d,l,f[0],11,-358537222),p=e(d^l^q,p,d,f[3],16,-722521979),q=e(p^d^l,q,p,f[6],23,76029189),l=
e(q^p^d,l,q,f[9],4,-640364487),d=e(l^q^p,d,l,f[12],11,-421815835),p=e(d^l^q,p,d,f[15],16,530742520),q=e(p^d^l,q,p,f[2],23,-995338651),l=h(l,q,p,d,f[0],6,-198630844),d=h(d,l,q,p,f[7],10,1126891415),p=h(p,d,l,q,f[14],15,-1416354905),q=h(q,p,d,l,f[5],21,-57434055),l=h(l,q,p,d,f[12],6,1700485571),d=h(d,l,q,p,f[3],10,-1894986606),p=h(p,d,l,q,f[10],15,-1051523),q=h(q,p,d,l,f[1],21,-2054922799),l=h(l,q,p,d,f[8],6,1873313359),d=h(d,l,q,p,f[15],10,-30611744),p=h(p,d,l,q,f[6],15,-1560198380),q=h(q,p,d,l,f[13],
21,1309151649),l=h(l,q,p,d,f[4],6,-145523070),d=h(d,l,q,p,f[11],10,-1120210379),p=h(p,d,l,q,f[2],15,718787259),q=h(q,p,d,l,f[9],21,-343485551);a[0]=l+a[0]&4294967295;a[1]=q+a[1]&4294967295;a[2]=p+a[2]&4294967295;a[3]=d+a[3]&4294967295}function e(a,b,c,e,f,d){b=(b+a&4294967295)+(e+d&4294967295)&4294967295;return(b<<f|b>>>32-f)+c&4294967295}function c(a,b,c,f,h,d,v){return e(b&c|~b&f,a,b,h,d,v)}function b(a,b,c,f,h,d,v){return e(b&f|c&~f,a,b,h,d,v)}function h(a,b,c,f,h,d,v){return e(c^(b|~f),a,b,h,
d,v)}var f="0123456789abcdef".split("");a.xG=function(a){var b=a,c=b.length;a=[1732584193,-271733879,-1732584194,271733878];var e;for(e=64;e<=b.length;e+=64){var h,d=b.substring(e-64,e),q=[];for(h=0;64>h;h+=4)q[h>>2]=d.charCodeAt(h)+(d.charCodeAt(h+1)<<8)+(d.charCodeAt(h+2)<<16)+(d.charCodeAt(h+3)<<24);t(a,q)}b=b.substring(e-64);h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<b.length;e++)h[e>>2]|=b.charCodeAt(e)<<(e%4<<3);h[e>>2]|=128<<(e%4<<3);if(55<e)for(t(a,h),e=0;16>e;e++)h[e]=0;h[14]=8*c;t(a,
h);for(b=0;b<a.length;b++){c=a[b];e="";for(h=0;4>h;h++)e+=f[c>>8*h+4&15]+f[c>>8*h&15];a[b]=e}return a.join("")}};b4w.module.__pako_inflate=function(a){(function(a){var e;"undefined"!==typeof window?e=window:"undefined"!==typeof self?e=self:e=this;e.zT=a()})(function(){return function e(a,b,h){function c(f){if(!b[f]){if(!a[f]){if(q)return q(f,!0);var l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=b[f]={exports:{}};a[f][0].call(l.exports,function(b){var d=a[f][1][b];return c(d?d:b)},l,l.exports,e,a,b,h)}return b[f].exports}for(var q=!1,l=0;l<h.length;l++)c(h[l]);return c}({1:[function(a,
c,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])}}return a};b.VI=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var e={am:function(a,b,c,e,f){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+e),f);else for(var d=0;d<e;d++)a[f+d]=b[c+d]},MF:function(a){var b,c,e,f,d;b=e=0;for(c=a.length;b<c;b++)e+=a[b].length;d=new Uint8Array(e);b=e=0;for(c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},f={am:function(a,b,c,e,f){for(var d=0;d<e;d++)a[f+d]=b[c+d]},MF:function(a){return[].concat.apply([],a)}};b.FU=function(a){a?(b.Ql=Uint8Array,b.aq=Uint16Array,b.bq=Int32Array,b.assign(b,e)):(b.Ql=Array,b.aq=Array,b.bq=Array,b.assign(b,f))};b.FU(a)},{}],2:[function(a,c,b){function e(a,b){if(65537>
b&&(a.subarray&&l||!a.subarray&&q))return String.fromCharCode.apply(null,f.VI(a,b));for(var c="",e=0;e<b;e++)c+=String.fromCharCode(a[e]);return c}var f=a("./common"),q=!0,l=!0,x=new f.Ql(256);for(a=0;256>a;a++)x[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;x[254]=x[254]=1;b.NV=function(a){var b,c,e,h,l,q=a.length,w=0;for(h=0;h<q;h++)c=a.charCodeAt(h),55296===(c&64512)&&h+1<q&&(e=a.charCodeAt(h+1),56320===(e&64512)&&(c=65536+(c-55296<<10)+(e-56320),h++)),w+=128>c?1:2048>c?2:65536>c?3:4;b=new f.Ql(w);
for(h=l=0;l<w;h++)c=a.charCodeAt(h),55296===(c&64512)&&h+1<q&&(e=a.charCodeAt(h+1),56320===(e&64512)&&(c=65536+(c-55296<<10)+(e-56320),h++)),128>c?b[l++]=c:(2048>c?b[l++]=192|c>>>6:(65536>c?b[l++]=224|c>>>12:(b[l++]=240|c>>>18,b[l++]=128|c>>>12&63),b[l++]=128|c>>>6&63),b[l++]=128|c&63);return b};b.xY=function(a){return e(a,a.length)};b.tN=function(a){for(var b=new f.Ql(a.length),c=0,e=b.length;c<e;c++)b[c]=a.charCodeAt(c);return b};b.CN=function(a,b){var c,f,h,l,p=b||a.length,q=Array(2*p);for(c=f=
0;c<p;)if(h=a[c++],128>h)q[f++]=h;else if(l=x[h],4<l)q[f++]=65533,c+=l-1;else{for(h&=2===l?31:3===l?15:7;1<l&&c<p;)h=h<<6|a[c++]&63,l--;1<l?q[f++]=65533:65536>h?q[f++]=h:(h-=65536,q[f++]=55296|h>>10&1023,q[f++]=56320|h&1023)}return e(q,f)};b.YW=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||!c?b:c+x[a[c]]>b?c:b}},{"./common":1}],3:[function(a,c){c.exports=function(a,c,e,q){var b=a&65535|0;a=a>>>16&65535|0;for(var f;0!==e;){f=2E3<e?2E3:
e;e-=f;do b=b+c[q++]|0,a=a+b|0;while(--f);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(a,c){c.exports={OD:0,eY:1,PD:2,bY:3,Gt:4,UX:5,iY:6,Ln:0,Ht:1,xM:2,ZX:-1,gY:-2,VX:-3,wM:-5,dY:0,SX:1,RX:9,WX:-1,$X:1,cY:2,fY:3,aY:4,XX:0,TX:0,hY:1,jY:2,YX:8}},{}],5:[function(a,c){var b=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var e=0;8>e;e++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();c.exports=function(a,c,e,l){e=l+e;for(a^=-1;l<e;l++)a=a>>>8^b[(a^c[l])&255];return a^-1}},{}],6:[function(a,
c){c.exports=function(){this.vT=this.nX=this.time=this.text=0;this.Bd=null;this.Yz=0;this.Cz=this.name="";this.SR=0;this.done=!1}},{}],7:[function(a,c){c.exports=function(a,c){var b,e,h,x,y,p,d,v,r,H,E,w,n,C,k,F,u,g,D,B,N,L,A,G;b=a.state;e=a.bl;A=a.input;h=e+(a.dg-5);x=a.Be;G=a.Oh;y=x-(c-a.yd);p=x+(a.yd-257);d=b.Pu;v=b.Wf;r=b.mk;H=b.Vf;E=b.window;w=b.Nk;n=b.dd;C=b.Gj;k=b.sm;F=(1<<b.Ei)-1;u=(1<<b.ho)-1;a:do b:for(15>n&&(w+=A[e++]<<n,n+=8,w+=A[e++]<<n,n+=8),g=C[w&F];;){D=g>>>24;w>>>=D;n-=D;if(D=g>>>
16&255)if(D&16){B=g&65535;if(D&=15)n<D&&(w+=A[e++]<<n,n+=8),B+=w&(1<<D)-1,w>>>=D,n-=D;15>n&&(w+=A[e++]<<n,n+=8,w+=A[e++]<<n,n+=8);g=k[w&u];c:for(;;){D=g>>>24;w>>>=D;n-=D;D=g>>>16&255;if(D&16){g&=65535;D&=15;n<D&&(w+=A[e++]<<n,n+=8,n<D&&(w+=A[e++]<<n,n+=8));g+=w&(1<<D)-1;if(g>d){a.msg="invalid distance too far back";b.mode=30;break a}w>>>=D;n-=D;D=x-y;if(g>D){D=g-D;if(D>r&&b.ZB){a.msg="invalid distance too far back";b.mode=30;break a}N=0;L=E;if(0===H){if(N+=v-D,D<B){B-=D;do G[x++]=E[N++];while(--D);
N=x-g;L=G}}else if(H<D){if(N+=v+H-D,D-=H,D<B){B-=D;do G[x++]=E[N++];while(--D);N=0;if(H<B){D=H;B-=D;do G[x++]=E[N++];while(--D);N=x-g;L=G}}}else if(N+=H-D,D<B){B-=D;do G[x++]=E[N++];while(--D);N=x-g;L=G}for(;2<B;)G[x++]=L[N++],G[x++]=L[N++],G[x++]=L[N++],B-=3;B&&(G[x++]=L[N++],1<B&&(G[x++]=L[N++]))}else{N=x-g;do G[x++]=G[N++],G[x++]=G[N++],G[x++]=G[N++],B-=3;while(2<B);B&&(G[x++]=G[N++],1<B&&(G[x++]=G[N++]))}}else if(D&64){a.msg="invalid distance code";b.mode=30;break a}else{g=k[(g&65535)+(w&(1<<
D)-1)];continue c}break}}else if(D&64){D&32?b.mode=12:(a.msg="invalid literal/length code",b.mode=30);break a}else{g=C[(g&65535)+(w&(1<<D)-1)];continue b}else G[x++]=g&65535;break}while(e<h&&x<p);B=n>>3;e-=B;n-=B<<3;a.bl=e;a.Be=x;a.dg=e<h?5+(h-e):5-(e-h);a.yd=x<p?257+(p-x):257-(x-p);b.Nk=w&(1<<n)-1;b.dd=n}},{}],8:[function(a,c,b){function e(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function f(){this.mode=0;this.ew=!1;this.$h=0;this.CA=!1;this.total=this.check=this.Pu=this.Uc=
0;this.head=null;this.Vf=this.mk=this.Wf=this.Zp=0;this.window=null;this.Bd=this.offset=this.length=this.dd=this.Nk=0;this.sm=this.Gj=null;this.Xg=this.Yr=this.To=this.AH=this.ho=this.Ei=0;this.next=null;this.ze=new d.aq(320);this.qt=new d.aq(288);this.BF=this.cH=null;this.iX=this.back=this.ZB=0}function q(a){var b;if(!a||!a.state)return-2;b=a.state;a.CC=a.Us=b.total=0;a.msg="";b.$h&&(a.Wl=b.$h&1);b.mode=1;b.ew=0;b.CA=0;b.Pu=32768;b.head=null;b.Nk=0;b.dd=0;b.Gj=b.cH=new d.bq(852);b.sm=b.BF=new d.bq(592);
b.ZB=1;b.back=-1;return 0}function l(a){var b;if(!a||!a.state)return-2;b=a.state;b.Wf=0;b.mk=0;b.Vf=0;return q(a)}function x(a,b){var c,d;if(!a||!a.state)return-2;d=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==d.window&&d.Zp!==b&&(d.window=null);d.$h=c;d.Zp=b;return l(a)}function y(a,b){var c;if(!a)return-2;c=new f;a.state=c;c.window=null;c=x(a,b);0!==c&&(a.state=null);return c}function p(a,b,c,e){var f=a.state;null===f.window&&(f.Wf=1<<f.Zp,f.Vf=0,f.mk=0,f.window=
new d.Ql(f.Wf));e>=f.Wf?(d.am(f.window,b,c-f.Wf,f.Wf,0),f.Vf=0,f.mk=f.Wf):(a=f.Wf-f.Vf,a>e&&(a=e),d.am(f.window,b,c-e,a,f.Vf),(e-=a)?(d.am(f.window,b,c-e,e,0),f.Vf=e,f.mk=f.Wf):(f.Vf+=a,f.Vf===f.Wf&&(f.Vf=0),f.mk<f.Wf&&(f.mk+=a)));return 0}var d=a("../utils/common"),v=a("./adler32"),r=a("./crc32"),H=a("./inffast"),E=a("./inftrees"),w=!0,n,C;b.CZ=l;b.DZ=x;b.EZ=q;b.AZ=function(a){return y(a,15)};b.XR=y;b.Bo=function(a,b){var c,f,h,l,k,q,y,x,z,F,S,m,K,U,Q,R,ga,ra,T=new d.Ql(4),ia=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.Oh||!a.input&&0!==a.dg)return-2;c=a.state;12===c.mode&&(c.mode=13);k=a.Be;h=a.Oh;y=a.yd;l=a.bl;f=a.input;q=a.dg;x=c.Nk;z=c.dd;F=q;S=y;ra=0;a:for(;;)switch(c.mode){case 1:if(0===c.$h){c.mode=13;break}for(;16>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if(c.$h&2&&35615===x){c.check=0;T[0]=x&255;T[1]=x>>>8&255;c.check=r(c.check,T,2,0);z=x=0;c.mode=2;break}c.Uc=0;c.head&&(c.head.done=!1);if(!(c.$h&1)||(((x&255)<<8)+(x>>8))%31){a.msg="incorrect header check";
c.mode=30;break}if(8!==(x&15)){a.msg="unknown compression method";c.mode=30;break}x>>>=4;z-=4;K=(x&15)+8;if(0===c.Zp)c.Zp=K;else if(K>c.Zp){a.msg="invalid window size";c.mode=30;break}c.Pu=1<<K;a.Wl=c.check=1;c.mode=x&512?10:12;z=x=0;break;case 2:for(;16>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.Uc=x;if(8!==(c.Uc&255)){a.msg="unknown compression method";c.mode=30;break}if(c.Uc&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=x>>8&1);c.Uc&512&&(T[0]=x&255,T[1]=x>>>8&
255,c.check=r(c.check,T,2,0));z=x=0;c.mode=3;case 3:for(;32>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.head&&(c.head.time=x);c.Uc&512&&(T[0]=x&255,T[1]=x>>>8&255,T[2]=x>>>16&255,T[3]=x>>>24&255,c.check=r(c.check,T,4,0));z=x=0;c.mode=4;case 4:for(;16>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.head&&(c.head.nX=x&255,c.head.vT=x>>8);c.Uc&512&&(T[0]=x&255,T[1]=x>>>8&255,c.check=r(c.check,T,2,0));z=x=0;c.mode=5;case 5:if(c.Uc&1024){for(;16>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.length=x;c.head&&
(c.head.Yz=x);c.Uc&512&&(T[0]=x&255,T[1]=x>>>8&255,c.check=r(c.check,T,2,0));z=x=0}else c.head&&(c.head.Bd=null);c.mode=6;case 6:if(c.Uc&1024&&(m=c.length,m>q&&(m=q),m&&(c.head&&(K=c.head.Yz-c.length,c.head.Bd||(c.head.Bd=Array(c.head.Yz)),d.am(c.head.Bd,f,l,m,K)),c.Uc&512&&(c.check=r(c.check,f,m,l)),q-=m,l+=m,c.length-=m),c.length))break a;c.length=0;c.mode=7;case 7:if(c.Uc&2048){if(0===q)break a;m=0;do K=f[l+m++],c.head&&K&&65536>c.length&&(c.head.name+=String.fromCharCode(K));while(K&&m<q);c.Uc&
512&&(c.check=r(c.check,f,m,l));q-=m;l+=m;if(K)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.Uc&4096){if(0===q)break a;m=0;do K=f[l+m++],c.head&&K&&65536>c.length&&(c.head.Cz+=String.fromCharCode(K));while(K&&m<q);c.Uc&512&&(c.check=r(c.check,f,m,l));q-=m;l+=m;if(K)break a}else c.head&&(c.head.Cz=null);c.mode=9;case 9:if(c.Uc&512){for(;16>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if(x!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}z=x=0}c.head&&(c.head.SR=
c.Uc>>9&1,c.head.done=!0);a.Wl=c.check=0;c.mode=12;break;case 10:for(;32>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}a.Wl=c.check=e(x);z=x=0;c.mode=11;case 11:if(0===c.CA)return a.Be=k,a.yd=y,a.bl=l,a.dg=q,c.Nk=x,c.dd=z,2;a.Wl=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.ew){x>>>=z&7;z-=z&7;c.mode=27;break}for(;3>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.ew=x&1;x>>>=1;--z;switch(x&3){case 0:c.mode=14;break;case 1:K=c;if(w){n=new d.bq(512);C=new d.bq(32);for(m=0;144>m;)K.ze[m++]=
8;for(;256>m;)K.ze[m++]=9;for(;280>m;)K.ze[m++]=7;for(;288>m;)K.ze[m++]=8;E(1,K.ze,0,288,n,0,K.qt,{dd:9});for(m=0;32>m;)K.ze[m++]=5;E(2,K.ze,0,32,C,0,K.qt,{dd:5});w=!1}K.Gj=n;K.Ei=9;K.sm=C;K.ho=5;c.mode=20;if(6===b){x>>>=2;z-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}x>>>=2;z-=2;break;case 14:x>>>=z&7;for(z-=z&7;32>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if((x&65535)!==(x>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=x&65535;
z=x=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(m=c.length){m>q&&(m=q);m>y&&(m=y);if(0===m)break a;d.am(h,f,l,m,k);q-=m;l+=m;y-=m;k+=m;c.length-=m;break}c.mode=12;break;case 17:for(;14>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.To=(x&31)+257;x>>>=5;z-=5;c.Yr=(x&31)+1;x>>>=5;z-=5;c.AH=(x&15)+4;x>>>=4;z-=4;if(286<c.To||30<c.Yr){a.msg="too many length or distance symbols";c.mode=30;break}c.Xg=0;c.mode=18;case 18:for(;c.Xg<c.AH;){for(;3>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.ze[ia[c.Xg++]]=
x&7;x>>>=3;z-=3}for(;19>c.Xg;)c.ze[ia[c.Xg++]]=0;c.Gj=c.cH;c.Ei=7;m={dd:c.Ei};ra=E(0,c.ze,0,19,c.Gj,0,c.qt,m);c.Ei=m.dd;if(ra){a.msg="invalid code lengths set";c.mode=30;break}c.Xg=0;c.mode=19;case 19:for(;c.Xg<c.To+c.Yr;){for(;;){Q=c.Gj[x&(1<<c.Ei)-1];m=Q>>>24;Q&=65535;if(m<=z)break;if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if(16>Q)x>>>=m,z-=m,c.ze[c.Xg++]=Q;else{if(16===Q){for(K=m+2;z<K;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}x>>>=m;z-=m;if(0===c.Xg){a.msg="invalid bit length repeat";c.mode=30;break}K=
c.ze[c.Xg-1];m=3+(x&3);x>>>=2;z-=2}else if(17===Q){for(K=m+3;z<K;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}x>>>=m;z-=m;K=0;m=3+(x&7);x>>>=3;z-=3}else{for(K=m+7;z<K;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}x>>>=m;z-=m;K=0;m=11+(x&127);x>>>=7;z-=7}if(c.Xg+m>c.To+c.Yr){a.msg="invalid bit length repeat";c.mode=30;break}for(;m--;)c.ze[c.Xg++]=K}}if(30===c.mode)break;if(0===c.ze[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.Ei=9;m={dd:c.Ei};ra=E(1,c.ze,0,c.To,c.Gj,0,c.qt,m);c.Ei=m.dd;
if(ra){a.msg="invalid literal/lengths set";c.mode=30;break}c.ho=6;c.sm=c.BF;m={dd:c.ho};ra=E(2,c.ze,c.To,c.Yr,c.sm,0,c.qt,m);c.ho=m.dd;if(ra){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=q&&258<=y){a.Be=k;a.yd=y;a.bl=l;a.dg=q;c.Nk=x;c.dd=z;H(a,S);k=a.Be;h=a.Oh;y=a.yd;l=a.bl;f=a.input;q=a.dg;x=c.Nk;z=c.dd;12===c.mode&&(c.back=-1);break}for(c.back=0;;){Q=c.Gj[x&(1<<c.Ei)-1];m=Q>>>24;K=Q>>>16&255;Q&=65535;if(m<=z)break;if(0===q)break a;q--;
x+=f[l++]<<z;z+=8}if(K&&!(K&240)){U=m;R=K;for(ga=Q;;){Q=c.Gj[ga+((x&(1<<U+R)-1)>>U)];m=Q>>>24;K=Q>>>16&255;Q&=65535;if(U+m<=z)break;if(0===q)break a;q--;x+=f[l++]<<z;z+=8}x>>>=U;z-=U;c.back+=U}x>>>=m;z-=m;c.back+=m;c.length=Q;if(!K){c.mode=26;break}if(K&32){c.back=-1;c.mode=12;break}if(K&64){a.msg="invalid literal/length code";c.mode=30;break}c.Bd=K&15;c.mode=22;case 22:if(c.Bd){for(K=c.Bd;z<K;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.length+=x&(1<<c.Bd)-1;x>>>=c.Bd;z-=c.Bd;c.back+=c.Bd}c.iX=c.length;
c.mode=23;case 23:for(;;){Q=c.sm[x&(1<<c.ho)-1];m=Q>>>24;K=Q>>>16&255;Q&=65535;if(m<=z)break;if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if(!(K&240)){U=m;R=K;for(ga=Q;;){Q=c.sm[ga+((x&(1<<U+R)-1)>>U)];m=Q>>>24;K=Q>>>16&255;Q&=65535;if(U+m<=z)break;if(0===q)break a;q--;x+=f[l++]<<z;z+=8}x>>>=U;z-=U;c.back+=U}x>>>=m;z-=m;c.back+=m;if(K&64){a.msg="invalid distance code";c.mode=30;break}c.offset=Q;c.Bd=K&15;c.mode=24;case 24:if(c.Bd){for(K=c.Bd;z<K;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}c.offset+=x&(1<<
c.Bd)-1;x>>>=c.Bd;z-=c.Bd;c.back+=c.Bd}if(c.offset>c.Pu){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===y)break a;m=S-y;if(c.offset>m){m=c.offset-m;if(m>c.mk&&c.ZB){a.msg="invalid distance too far back";c.mode=30;break}m>c.Vf?(m-=c.Vf,K=c.Wf-m):K=c.Vf-m;m>c.length&&(m=c.length);U=c.window}else U=h,K=k-c.offset,m=c.length;m>y&&(m=y);y-=m;c.length-=m;do h[k++]=U[K++];while(--m);0===c.length&&(c.mode=21);break;case 26:if(0===y)break a;h[k++]=c.length;y--;c.mode=21;break;
case 27:if(c.$h){for(;32>z;){if(0===q)break a;q--;x|=f[l++]<<z;z+=8}S-=y;a.Us+=S;c.total+=S;S&&(a.Wl=c.check=c.Uc?r(c.check,h,S,k-S):v(c.check,h,S,k-S));S=y;if((c.Uc?x:e(x))!==c.check){a.msg="incorrect data check";c.mode=30;break}z=x=0}c.mode=28;case 28:if(c.$h&&c.Uc){for(;32>z;){if(0===q)break a;q--;x+=f[l++]<<z;z+=8}if(x!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}z=x=0}c.mode=29;case 29:ra=1;break a;case 30:ra=-3;break a;case 31:return-4;default:return-2}a.Be=k;a.yd=
y;a.bl=l;a.dg=q;c.Nk=x;c.dd=z;if((c.Wf||S!==a.yd&&30>c.mode&&(27>c.mode||4!==b))&&p(a,a.Oh,a.Be,S-a.yd))return c.mode=31,-4;F-=a.dg;S-=a.yd;a.CC+=F;a.Us+=S;c.total+=S;c.$h&&S&&(a.Wl=c.check=c.Uc?r(c.check,h,S,a.Be-S):v(c.check,h,S,a.Be-S));a.NP=c.dd+(c.ew?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===F&&0===S||4===b)&&0===ra&&(ra=-5);return ra};b.VR=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};b.WR=function(a,b){var c;a&&a.state&&
(c=a.state,c.$h&2&&(c.head=b,b.done=!1))};b.YR=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.$h&&11!==d.mode)return-2;if(11===d.mode&&(e=v(1,b,c,0),e!==d.check))return-3;if(p(a,b,c,c))return d.mode=31,-4;d.CA=1;return 0};b.zZ="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,c){var b=a("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,
258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(a,c,h,d,v,r,H,E){var p=E.dd,n,x,k,y,u,g,D,B,N,L,A,G,z,I=0,S,m=new b.aq(16);u=new b.aq(16);var K,U=0,Q,R,ga;for(n=0;15>=n;n++)m[n]=0;for(x=0;x<d;x++)m[c[h+x]]++;
y=p;for(k=15;1<=k&&0===m[k];k--);y>k&&(y=k);if(!k)return v[r++]=20971520,v[r++]=20971520,E.dd=1,0;for(p=1;p<k&&0===m[p];p++);y<p&&(y=p);for(n=g=1;15>=n;n++)if(g<<=1,g-=m[n],0>g)return-1;if(0<g&&(0===a||1!==k))return-1;u[1]=0;for(n=1;15>n;n++)u[n+1]=u[n]+m[n];for(x=0;x<d;x++)0!==c[h+x]&&(H[u[c[h+x]]++]=x);0===a?(z=K=H,S=19):1===a?(z=e,I-=257,K=f,U-=257,S=256):(z=q,K=l,S=-1);x=B=0;n=p;G=r;d=y;u=0;L=-1;D=1<<y;A=D-1;if(1===a&&852<D||2===a&&592<D)return 1;for(;;){Q=n-u;H[x]<S?(R=0,ga=H[x]):H[x]>S?(R=K[U+
H[x]],ga=z[I+H[x]]):(R=96,ga=0);g=1<<n-u;p=N=1<<d;do N-=g,v[G+(B>>u)+N]=Q<<24|R<<16|ga|0;while(N);for(g=1<<n-1;B&g;)g>>=1;g?(B&=g-1,B+=g):B=0;x++;if(!--m[n]){if(n===k)break;n=c[h+H[x]]}if(n>y&&(B&A)!==L){0===u&&(u=y);G+=p;d=n-u;for(g=1<<d;d+u<k;){g-=m[d+u];if(0>=g)break;d++;g<<=1}D+=1<<d;if(1===a&&852<D||2===a&&592<D)return 1;L=B&A;v[L]=y<<24|d<<16|G-r|0}}B&&(v[G+B]=n-u<<24|4194304);E.dd=y;return 0}},{"../utils/common":1}],10:[function(a,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,c){c.exports=function(){this.input=null;this.CC=this.dg=this.bl=0;this.Oh=null;this.Us=this.yd=this.Be=0;this.msg="";this.state=null;this.NP=2;this.Wl=0}},{}],"/lib/inflate.js":[function(a,c,b){function e(a){if(!(this instanceof e))return new e(a);var b=this.options=l.assign({eO:16384,qe:0,to:""},a||{});b.raw&&0<=b.qe&&16>b.qe&&(b.qe=-b.qe,b.qe||(b.qe=-15));!(0<=b.qe&&
16>b.qe)||a&&a.qe||(b.qe+=32);15<b.qe&&48>b.qe&&!(b.qe&15)&&(b.qe|=15);this.Wz=0;this.msg="";this.ended=!1;this.lu=[];this.pn=new d;this.pn.yd=0;a=q.XR(this.pn,b.qe);if(a!==y.Ln)throw Error(p[a]);this.TR=new v;q.WR(this.pn,this.TR)}function f(a,b){var c=new e(b);c.push(a,!0);if(c.Wz)throw c.msg||p[c.Wz];return c.result}var q=a("./zlib/inflate"),l=a("./utils/common"),x=a("./utils/strings"),y=a("./zlib/constants"),p=a("./zlib/messages"),d=a("./zlib/zstream"),v=a("./zlib/gzheader"),r=Object.prototype.toString;
e.prototype.push=function(a,b){var c=this.pn,d=this.options.eO,e=this.options.QY,f,h,p,g,v,B,E=!1;if(this.ended)return!1;h=b===~~b?b:!0===b?y.Gt:y.OD;"string"===typeof a?c.input=x.tN(a):"[object ArrayBuffer]"===r.call(a)?c.input=new Uint8Array(a):c.input=a;c.bl=0;c.dg=c.input.length;do{0===c.yd&&(c.Oh=new l.Ql(d),c.Be=0,c.yd=d);f=q.Bo(c,y.OD);f===y.xM&&e&&("string"===typeof e?B=x.NV(e):"[object ArrayBuffer]"===r.call(e)?B=new Uint8Array(e):B=e,f=q.YR(this.pn,B));f===y.wM&&!0===E&&(f=y.Ln,E=!1);if(f!==
y.Ht&&f!==y.Ln)return this.wB(f),this.ended=!0,!1;!c.Be||0!==c.yd&&f!==y.Ht&&(0!==c.dg||h!==y.Gt&&h!==y.PD)||("string"===this.options.to?(p=x.YW(c.Oh,c.Be),g=c.Be-p,v=x.CN(c.Oh,p),c.Be=g,c.yd=d-g,g&&l.am(c.Oh,c.Oh,p,g,0),this.OH(v)):this.OH(l.VI(c.Oh,c.Be)));0===c.dg&&0===c.yd&&(E=!0)}while((0<c.dg||0===c.yd)&&f!==y.Ht);f===y.Ht&&(h=y.Gt);if(h===y.Gt)return f=q.VR(this.pn),this.wB(f),this.ended=!0,f===y.Ln;h===y.PD&&(this.wB(y.Ln),c.yd=0);return!0};e.prototype.OH=function(a){this.lu.push(a)};e.prototype.wB=
function(a){a===y.Ln&&(this.result="string"===this.options.to?this.lu.join(""):l.MF(this.lu));this.lu=[];this.Wz=a;this.msg=this.pn.msg};b.FX=e;b.Bo=f;b.BZ=function(a,b){b=b||{};b.raw=!0;return f(a,b)};b.y_=f},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});a.Bo=window.zT.Bo};b4w.module.shader_texts=function(a){a["anchors.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};a["anchors.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANCHOR_NUM",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
a["color_id.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_OUTLINE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},
{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",
";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE",{a:"logic_negative_expr",o:1}],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_color_id",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_outline_intensity",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",
f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["color_id.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},
{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",
c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],
l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",
j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",
{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:6},{a:"logical_and_expr",o:3},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",
o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"txt",b:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{a:"cond",f:[{a:"if",
j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};
a["debug_view.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIREFRAME_QUALITY",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DEBUG_SPHERE_DYNAMIC",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE_DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float aP ( ) { float aL = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIREFRAME_QUALITY",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{a:"elif",j:["WIREFRAME_QUALITY",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["return","aL",";","}"]}]}}]},{a:"txt",b:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["debug_view.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"DEBUG_VIEW_SPECIAL_SKYDOME",b:["0"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",
c:"BILLBOARD",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","aD",";"]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"include",F:"dynamic_grass.glslv"}]}}]},{a:"txt",
b:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_VIEW_SPECIAL_SKYDOME"],l:{a:"grp",f:[{a:"txt",b:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["error.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",
F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};a["error.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};a["grass_map.glslf"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["grass_map.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",
F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_grass_size",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","bd",";"]}]}},{a:"else",
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_size",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_color",";"]}]}}]}]}}]},{a:"txt",b:["gl_Position",
"=","f",";","}"]}]};a["halo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_sun_intensity",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"include",F:"color_util.glslf"},{a:"include",F:"halo_color.glslf"},{a:"txt",b:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};a["halo.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"include",F:"std.glsl"},
{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","be",";"]}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{a:"txt",b:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["irradiance_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; vec3 bt = vec3 ( 0.0 ) ; vec3 bu = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bv = vec3 ( 1.0 , 0.0 , 0.0 ) ; float bw = 0.025 ; float bx = 0.0 ; for ( float by = 0.0 ; by < 2.0 * M_PI ; by += bw ) { for ( float bz = 0.0 ; bz < 0.5 * M_PI ; bz += bw ) { vec3 bA = vec3 ( sin ( bz ) * cos ( by ) , sin ( bz ) * sin ( by ) , cos ( bz ) ) ; vec3 bB = bA . x * bv + bA . y * bu + bA . z * bq ; vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , bB ) . rgb ; bC ( bs ) ; bt += bs * cos ( bz ) * sin ( bz ) ; bx ++ ; } } bt = M_PI * bt * ( 1.0 / float ( bx ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bt , 1.0 ) ; }".split(" ")}]};
a["lens_flares.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["lens_flares.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_LIGHTS",
b:["0"]},{a:"define",c:"LIGHT_INDEX",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bD = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bD ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bF = vec2 ( a_lf_bb_vertex . x / bE , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bG = 1.9 ; bF *= ( 1.0 + bG * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bF , 0.999999 , 1.0 ) ; }".split(" ")}]};
a["line.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ALPHA",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["line.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bH = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bH . xyz /= bH . w ; vec4 bI = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bI . xyz /= bI . w ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bJ = ( bI - bH ) . xy ; bJ . x *= bE ; float bK = M_PI / 2.0 ; mat2 bL = mat2 ( cos ( bK ) , sin ( bK ) , - sin ( bK ) , cos ( bK ) ) ; bJ = bL * bJ ; bJ = normalize ( bJ ) ; vec2 bM = ( u_line_width / u_height ) * vec2 ( 1.0 / bE , 1.0 ) ; gl_Position = vec4 ( bH . xy + bJ . xy * bM / 2.0 , bH . z , 1.0 ) ; gl_Position *= bH . w ; }".split(" ")}]};
a["main.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},
{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",
b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["GLSL1","USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",
b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",
";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",
{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",
o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",
o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",
"USE_NODE_B4W_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bP = H ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{a:"txt",b:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["main.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",
b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],
l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]},
{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bU",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},
{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","N","=","u_view_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",
b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:["vec3","O","=","a_position",";"]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:14}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{a:"elif",j:["NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"vec3 bX = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 D = bX - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{a:"logical_or_expr",o:10}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS",
"BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"O = ( bV * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bV * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bV * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , bV ) ;".split(" ")}]}}]},{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO",
"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"bU = aw . aQ ;".split(" ")}]}},{a:"elif",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bU","=","a_color",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 bY = bV * vec4 ( aw . O , 1.0 ) ; bY . xyz = ap ( N , bY . xyz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["main_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},
{a:"var",c:"TEXTURE_SPEC_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"TEXTURE_COLOR0_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"TEXTURE_COLOR1_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_PLANE"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"TEXTURE_SPEC",b:["0"]},{a:"var",c:"ALPHA_AS_SPEC",b:["0"]},{a:"var",
c:"TEXTURE_STENCIL_ALPHA_MASK",b:["0"]},{a:"var",c:"TEXTURE_STENCIL_ALPHA_MASK_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",
b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"PARALLAX_LOD_DIST",b:["5.0"]},{a:"var",c:"PARALLAX_STEPS",b:["5.0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_colormap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC","ALPHA_AS_SPEC",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_specmap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",
";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},
{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_specular_color_factor",";"]}]}}]},{a:"txt",b:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_parallax_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bT",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"include",F:"mirror.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"lighting_nodes.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]},{a:"txt",b:"vec3 ca = normalize ( j ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"ca = ca ; else ca = - ca ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( ca , k . xyz ) * k . w ; mat3 cb = mat3 ( k . xyz , W , ca ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"vec2 cc = normalize ( _ ( N , j ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( bN < PARALLAX_LOD_DIST ) { float cd = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bN ) , 0.0 , 1.0 ) ; float ce = u_parallax_scale * cd ; vec3 cf = normalize ( bT * cb ) ; float cg = 1.0 / PARALLAX_STEPS ; vec2 ch = cf . xy * ce / ( PARALLAX_STEPS * cf . z ) ; float ci = 1.0 ; float cj ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec2","ck","=","cc",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:["vec2","ck","=","b_",";"]}]}}]},{a:"txt",b:"cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; for ( float cl = 1.0 ; cl <= PARALLAX_STEPS ; cl ++ ) { if ( cj < ci ) { ci -= cg ; ck -= ch ; cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; } } vec2 cm = ck + ch ; float cn = GLSL_TEXTURE ( u_normalmap0 , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; ck = cp * cm + ( 1.0 - cp ) * ck ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"b_ += ck - cc ;".split(" ")}]}}]},{a:"txt",b:["cc","=","ck",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"cc += ck - b_ ;".split(" ")}]}}]},{a:"txt",b:["b_","=","ck",";"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","cq",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO",
"TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cr = cq . rgb - 0.5 ; cr = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cr , u_normal_factor ) ; vec3 U = cb * cr ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","ca",";"]}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],
l:{a:"grp",f:[{a:"txt",b:"cc = normalize ( _ ( N , U ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cs = bU ; bC ( cs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 ct = vec4 ( cs , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["vec4","ct","=","u_diffuse_color",";"]}]}}]},{a:"txt",b:["float","cu","=","1.0",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , cc ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , b_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:["vec4","cw",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"bC ( cw . rgb ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"cv = mix ( cv , cw , cx . r ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cv . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; ct . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cu = cv . a ;".split(" ")}]}},
{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ; ct . a = cv . a ; cu = cv . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS"],l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec4 bP = cC ( cy ) ; vec3 cD = u_emit * ct . rgb ; vec3 cE = u_specular_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_AS_SPEC"],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = vec3 ( cu ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , cc ) . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , b_ ) . rgb ;".split(" ")}]}}]},{a:"txt",b:"bC ( cF . rgb ) ; cE = mix ( cE , cF , u_specular_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * cE ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , bP , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["aQ","+=","cJ",";"]}]}}]},{a:"txt",b:"float L = ct . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float t = max ( max ( cJ . r , cJ . g ) , cJ . b ) * u_specular_alpha ; L = ct . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 cM = - ( _ ( N , U ) ) . xy ; aQ = mix ( cN ( l , cM * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["node_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{a:"logical_or_expr",
o:9}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = - normalize ( bp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","D",";"]}]}}]},{a:"txt",b:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};a["particle_system.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",
c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},
{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES",
"NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",
{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"particles_nodes.glslf"},{a:"txt",b:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["particle_system.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",
b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",
c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_OUT",
"vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},
{a:"txt",b:["GLSL_OUT","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bf",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","j",";"]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["WORLD_SPACE",{a:"logic_negative_expr",o:1},"NODES","HALO_PARTICLES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"particles.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"particles_nodes.glslv"}]}}]},{a:"txt",b:"float cX ( vec2 cV , vec2 cW ) { return ( atan ( cW . y , cW . x ) - atan ( cV . y , cV . x ) ) ; } void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; cY pp ; pp = cZ ( ) ; float c_ ; mat3 bk = da ( ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 db = ( bV * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 db = pp . O ;".split(" ")}]}}]},
{a:"txt",b:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { c_ = pp . bK ; bk = bj ( db , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { c_ = cX ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bK ; bk [ 0 ] = db ; vec4 dc = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = dd ( dc , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { c_ = pp . bK ; bk [ 0 ] = db ; vec4 de = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = dd ( de , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { c_ = pp . bK ; bk [ 0 ] = db ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . df * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . df * u_p_size ) ; float dg = a_p_data [ 2 ] ; float dh = u_p_tilt * u_p_tilt_rand * ( 2.0 * dg - 1.0 ) ; float di = ( dh + u_p_tilt ) * M_PI ; vec4 dj = X ( TOWARD_VECTOR , di + c_ ) ; vec3 bo = ap ( bk , T ( dj , bn ) ) ; vec4 bY = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["bf","=","dg",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 dk = da ( ) ; dj = X ( TOWARD_VECTOR , c_ ) ; dk = dd ( dj , dk ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",
o:2},{a:"logical_and_expr",o:2},"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , dk ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",
"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"txt",b:"J ( pp . O , pp . dl , pp . dm , pp . dn , pp . df , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , dk ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["A","=","a_p_bb_vertex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cU = pp . L ;".split(" ")}]}}]},{a:"txt",b:"bU = pp . aQ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",
o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"gl_Position = f ; h = bo ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - bo ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["particle_system_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_sampler",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_diffuse_color_factor",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",
";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bf",";"]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",
b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"include",F:"halo_color.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",
j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bU ; float dp = 0.9 * length ( A ) ; float dq = smoothstep ( u_p_alpha_start , u_p_alpha_end , dp ) ; float L = bi . a * ( 1.0 - dq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4",
"ct","=","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_sampler , A ) ; bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"ct . a = cv . a ;".split(" ")}]}}]},{a:"txt",b:"ct . rgb *= bU ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cD = u_emit * ct . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logic_negative_expr",o:1},"SKY_COLOR",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( vec3 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cB = u_ambient * cA ; float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}}]},{a:"txt",
b:"float L = ct . a * cU ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["proc_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float dr = 0.99 ; const float ds = 1.8 ; const int dt = 8 ; float dy ( vec3 O , vec3 bD ) { float a = dot ( bD , bD ) ; float b = 2.0 * dot ( bD , O ) ; float du = dot ( O , O ) - 1.0 ; float dv = b * b - 4.0 * a * du ; float dw = sqrt ( dv ) ; float q = ( - b - dw ) / 2.0 ; float dx = du / q ; return dx ; } float dA ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float du = 1.0 + L * L ; float dz = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dz = max ( dz , 0.00001 ) ; return ( a / b ) * ( du / dz ) ; } float dF ( vec3 O , vec3 bD , float dB ) { float dC = dot ( bD , - O ) ; if ( dC < 0.0 ) { return 1.0 ; } vec3 dD = O + dC * bD ; if ( length ( dD ) < dB ) { return 0.0 ; } else if ( length ( dD ) >= dB ) { vec3 cW = normalize ( dD ) * dB - O ; float dE = acos ( dot ( normalize ( cW ) , bD ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dE * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dG ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bq = normalize ( bp ) ; vec3 dH = u_sun_direction ; float L = dot ( bq , dH ) ; float dI = dA ( L , - 0.01 ) * u_rayleigh_brightness * dH . z ; float dJ = dA ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dH . z ) ; float dK = smoothstep ( 0.0 , 100.0 , dA ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dL = vec3 ( 0.0 , 0.0 , dr ) ; float dM = dy ( dL , bq ) ; float dN = dM / float ( dt ) ; float dO = dF ( dL , bq , dr - 0.3 ) ; vec3 dP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dQ = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cl = 0 ; cl < dt ; cl ++ ) { float dR = dN * float ( cl ) ; vec3 O = dL + bq * dR ; float dS = dF ( O , dH , dr - 0.2 ) ; float dT = dy ( O , dH ) ; vec3 dU = dG ( dT , vec3 ( ds ) , u_scatter_strength ) * dS ; dP += dG ( sqrt ( dR ) , u_sky_color * dU , u_rayleigh_strength ) ; dQ += dG ( dR , dU , u_mie_strength ) ; } dP = dP * dO * pow ( dM , u_rayleigh_collection_power ) / float ( dt ) ; dQ = ( dQ * dO * pow ( dM , u_mie_collection_power ) ) / float ( dt ) ; vec3 aQ = vec3 ( dK * dQ + dJ * dQ + dI * dP ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
a["r_convolution_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } void main ( ) { vec3 ei = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 d_ = normalize ( bp ) ; vec3 ej = d_ ; vec3 ek = ej ; const int el = 1024 ; float em = 0.0 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , u_roughness ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; if ( eo > 0.0 ) { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , en ) . rgb ; bC ( bs ) ; ei += bs * eo ; em += eo ; } } ei = ei / em ; } else { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bp ) ) . rgb ; bC ( bs ) ; ei = bs ; } GLSL_OUT_FRAG_COLOR = vec4 ( ei , 1.0 ) ; }".split(" ")}]};
a["shadow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",
b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_VALUES",
b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE",
"CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE",
"SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2",
"NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",
b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"txt",b:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","NO_SHADOWS",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"txt",b:"float eq = ep ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = er ( eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = es ( i . z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["shadow.glslv"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",
b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"HAIR_BILLBOARD",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",
b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP",
"CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",
j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4",
"i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3",
"NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO",
"USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=",
"a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HAIR_BILLBOARD",{a:"logic_negative_expr",o:1},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","N",";"]}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , et , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ay","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eu = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; f . xy += eu ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["sky.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",
c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:["uniform","samplerCube","u_sky",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS",
"REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND","WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER","WO_SKYTEX",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:["GLSL_IN","vec3","bp",";"]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bs ; vec3 bq = normalize ( bp ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","ew","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( A . y ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec3 ez = vec3 ( A , 0.0 ) ; vec4 eA = GLSL_TEXTURE_CUBE ( u_sky , bq ) ; bC ( eA . rgb ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky , bq ) . rgb ; bC ( bs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float eC = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eD = vec3 ( 0.0 ) ; vec3 eE = mix ( u_underwater_fog_color_density . rgb , eD , min ( - bq . z , 1.0 ) ) ; eE *= min ( 1.0 - min ( 0.03 * eC , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eC - bq . z ) , 0.0 , 1.0 ) ; bs = mix ( bs , eE , aL ) ;".split(" ")}]}}]},
{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["sky.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",
o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bq = u_sky_vp_inverse * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};
a["skybox.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",
";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bq = u_cube_view_matrix * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};a["tex_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",
b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:"void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; float ew = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYPAPER"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) . xyz ; bC ( bs ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"float L = acos ( bq . z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec4 eA = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) ; bC ( eA . rgb ) ; vec3 ez = vec3 ( bp . xy , 0.0 ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bs","=","ex",";"]}]}}]}]}}]}]}}]},{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["water.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",
b:["0"]},{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"ABSORB",b:["6.0"]},{a:"var",c:"SSS_STRENGTH",b:["1.0"]},{a:"var",c:"SSS_WIDTH",b:["0.45"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",
c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.002"]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",
f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_cam_water_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_foam",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap1_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap2_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec3 bT ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 k ; GLSL_IN vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",
o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:3}],l:{a:"grp",
f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:"vec3 eP ( in vec2 eI , in vec3 U , in vec3 eJ , in vec3 eK , out float eL , in float eM ) { eL = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eN = eI . xy + U . xy * REFL_BUMP / m ; eL = u_reflect_factor ; vec3 eO ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eO = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"eO = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"txt",b:"} else { eO = GLSL_TEXTURE ( u_plane_reflection , eN ) . rgb ; bC ( eO ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eL = u_mirror_factor ; vec3 eO = eK * GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . rgb ; bC ( eO ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"eL = u_reflect_factor ; vec3 eO = eK * vec3 ( 0.3 , 0.5 , 1.0 ) ; bC ( eO ) ;".split(" ")}]}}]},{a:"txt",b:"eL = min ( eL * eM , 1.0 ) ; return eO ; }".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 cb = mat3 ( k , eF , j ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC",
"FOAM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bO = h . z ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( eG . x , - eG . y ) + 0.5 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eQ = vec3 ( 0.0 ) ; eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.3 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eI = l . xy / l . z ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 eI = vec2 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 eR = eI + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = max ( cR - m , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"float eT = eS ( cR , eR , eI ) ; float eU = max ( eT - m , 0.0 ) ; float eV = u_view_max_depth / ABSORB * eU ; float eW = min ( L * eV , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cS , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float cT = u_view_max_depth / ABSORB * cS ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cT , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["float","eW","=","L",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"if ( u_cam_water_depth < 0.0 ) eW = 0.0 ; vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eY = pow ( min ( eH . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ct = mix ( u_shallow_water_col , u_diffuse_color . rgb , eY ) ; eY = pow ( min ( eH . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ct = mix ( u_shore_water_col , ct , eY ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ct = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float eZ = max ( 1.0 - u_view_max_depth * cS , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float eZ = 1.0 - L ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float e_ = max ( bO / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],
l:{a:"grp",f:[{a:"txt",b:"vec3 fa = normalize ( vec3 ( eH . rg , 0.0 ) ) ; vec3 fb = normalize ( mix ( UP_VECTOR , fa , 0.8 ) ) ; float fc = 1.25 * max ( dot ( U , fb ) - 0.2 , 0.0 ) ; fc += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; eZ += fc * ( 1.0 - eH . b ) ; e_ *= ( 1.0 - 0.95 * pow ( eH . b , 0.1 ) ) ;".split(" ")}]}}]},{a:"txt",b:"eZ += e_ ; eZ = min ( u_foam_factor * eZ , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 fd = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + b_ * u_foam_scale ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec3 eK = cB + u_sun_intensity ; float eL ; vec3 eJ = reflect ( - D , U ) ; vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float fh = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; vec3 eO = eP ( eI , U , eJ , eK , eL , fh ) ; vec3 cy = u_diffuse_intensity * ct ; vec3 aQ ; vec3 cJ ; cK ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fi = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fi = clamp ( SSS_STRENGTH * fi , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fi ) ; aQ = mix ( aQ , u_shore_water_col , fi ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"aQ = mix ( eX , aQ , eW ) ;".split(" ")}]}}]},{a:"txt",
b:"aQ = mix ( aQ , eO , eL ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"float fj = mix ( fd . g , fd . r , max ( 4.0 * ( eZ - 0.75 ) , 0.0 ) ) ; fj = mix ( fd . b , fj , max ( 2.0 * eZ - 1.0 , 0.0 ) ) ; fj = mix ( 0.0 , fj , eZ ) ; aQ = mix ( aQ , eK , fj ) ;".split(" ")}]}}]},{a:"txt",b:["aQ","+=","cJ",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fk = m * u_view_max_depth ; float fl = 1.0 ; if ( u_cam_water_depth > 1.0 ) fl = 2.0 ; bR ( aQ , fk , D , fl ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"L = max ( L , cJ . r ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["L","+=","fj",";"]}]}}]}]}},{a:"elif",j:["SHORE_SMOOTHING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME",
1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fm = min ( min ( aO . x , aO . y ) , aO . z ) ; fm = clamp ( fm , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}},{a:"elif",j:["DEBUG_WIREFRAME",2,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fm = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fm = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["water.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",b:["0"]},
{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"MAX_SHORE_DIST",b:["100.0"]},{a:"var",c:"SHORE_MAP_SIZE_X",b:["1.0"]},{a:"var",c:"SHORE_MAP_SIZE_Y",b:["1.0"]},{a:"var",c:"SHORE_MAP_CENTER_X",b:["0.0"]},{a:"var",c:"SHORE_MAP_CENTER_Y",b:["0.0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"DST_NOISE_SCALE_0",b:["0.05"]},{a:"var",c:"DST_NOISE_SCALE_1",b:["0.03"]},{a:"var",c:"DST_NOISE_FREQ_0",b:["1.3"]},{a:"var",c:"DST_NOISE_FREQ_1",b:["1.0"]},{a:"var",c:"DIR_MIN_SHR_FAC",
b:["0.4"]},{a:"var",c:"DIR_FREQ",b:["0.5"]},{a:"var",c:"DIR_NOISE_SCALE",b:["0.05"]},{a:"var",c:"DIR_NOISE_FREQ",b:["0.07"]},{a:"var",c:"DIR_MIN_NOISE_FAC",b:["0.5"]},{a:"var",c:"DST_MIN_FAC",b:["0.2"]},{a:"var",c:"WAVES_HOR_FAC",b:["5.0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WAVES_LENGTH",b:["10.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",
c:"REFRACTIVE",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"procedural.glslf"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"DYNAMIC",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","a_tbn",";"]}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_polyindex",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec3 bT ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3",
"eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shore_dist_map",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 ft ( in vec2 fn ) { vec2 fo = 0.5 + vec2 ( ( fn . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fn . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 fp = GLSL_TEXTURE ( u_shore_dist_map , fo ) ; const vec2 fq = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fr = dot ( fp . ba , fq ) ; vec2 fs = normalize ( fp . rg * 2.0 - 1.0 ) ; return vec3 ( fs , fr ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",
f:[{a:"define",c:"SMALL_WAVES_FAC",b:["0.2"]},{a:"txt",b:"void fI ( inout vec3 fn , in float fu , in vec3 fp ) { float fw = fv ( DST_NOISE_SCALE_0 * ( fn . xy + DST_NOISE_FREQ_0 * fu ) ) * fv ( DST_NOISE_SCALE_1 * ( fn . yx - DST_NOISE_FREQ_1 * fu ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float fx = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fr = fp . b ; float fy = sqrt ( fr ) ; float fz = max ( fr , DIR_MIN_SHR_FAC ) * sin ( fy / fx + DIR_FREQ * fu ) ; float fA = max ( fv ( DIR_NOISE_SCALE * ( fn . xy + DIR_NOISE_FREQ * fu ) ) , DIR_MIN_NOISE_FAC ) ; fz *= fA ; float fB = WAVES_HEIGHT * mix ( fz , fw , max ( fy , DST_MIN_FAC ) ) ; vec2 fs = fp . rg ; float fC = WAVES_HOR_FAC * fz * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fr ) , 0.0 ) ; vec2 fD = fC * fs ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float fB = WAVES_HEIGHT * fw ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec2 fE = 1.0 * ( fn . xy - 0.3 * fu ) ; vec2 fF = 0.7 * ( fn . yx + 0.07 * fu ) ; float fH = fG ( fE ) . x + fG ( fF ) . x - 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"fn . xy += fD ; fH *= fr ;".split(" ")}]}}]},{a:"txt",b:"fB += SMALL_WAVES_FAC * fH ;".split(" ")}]}}]},{a:"txt",b:"fn . z += fB ; }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec3 O = a_position ; float fJ = abs ( O . z ) ; vec2 fK = u_camera_eye . xy - mod ( u_camera_eye . xy , fJ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],
l:{a:"grp",f:[{a:"txt",b:"O . z = WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O . z = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"O . xy += fK ; vec3 bX = O ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","a_texcoord",";"]}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bX = aw . O ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"eH = ft ( bX . xy ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fL = length ( u_wind ) ; if ( fL == 0.0 ) fL = 1.0 ; float fM = u_time ; fM *= fL ;".split(" ")},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"float fN = fJ ; vec3 fO = bX + vec3 ( fN , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , fN , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["eG","=","bX",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fO = bX + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 fQ = ft ( fO . xy ) ; vec3 fR = ft ( fP . xy ) ; fI ( fO , fM , fQ ) ; fI ( fP , fM , fR ) ; fI ( bX , fM , eH ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"fI ( fO , fM , vec3 ( 0.0 ) ) ; fI ( fP , fM , vec3 ( 0.0 ) ) ; fI ( bX , fM , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["GENERATED_MESH","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( a_position . z < 0.0 ) { bX . z = WATER_LEVEL - 1.0 ; fO . z = bX . z ; fP . z = bX . z ; }".split(" ")}]}}]},{a:"txt",b:"vec3 eg = normalize ( fO - bX ) ; vec3 V = normalize ( fP - bX ) ; j = normalize ( cross ( eg , V ) ) ; float fS = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fS , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{a:"elif",j:["GENERATED_MESH",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{a:"elif",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"k = V ; eF = cross ( j , k ) ;".split(" ")}]}}]},{a:"txt",b:"h = bX ; bT = u_camera_eye - bX ; vec4 bY = vec4 ( ap ( u_view_tsr , bX ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float fT = f . x ; float fU = f . y ; float fV = f . w ; l . x = ( fT + fV ) / 2.0 ; l . y = ( fU + fV ) / 2.0 ; l . z = fV ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["postprocessing/antialiasing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_FXAA_LIGHT"]},{a:"var",c:"AA_QUALITY",b:["AA_QUALITY_LOW"]},{a:"include",F:"precision_statement.glslf"},
{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_REDUCE_MIN",b:["(","1.0","/","128.0",")"]},{a:"define",c:"FXAA_REDUCE_MUL",b:["(","1.0","/","8.0",")"]},{a:"define",c:"FXAA_SPAN_MAX",b:["8.0"]},{a:"txt",b:"vec4 fX ( float x , float y ) { vec2 fW = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fW ) ; } vec4 gt ( ) { vec4 fY = fX ( - 1.0 , - 1.0 ) ; vec4 fZ = fX ( 1.0 , - 1.0 ) ; vec4 f_ = fX ( - 1.0 , 1.0 ) ; vec4 gc = fX ( 1.0 , 1.0 ) ; vec4 gd = fX ( 0.0 , 0.0 ) ; float gf = ge ( gd ) ; float gh = ge ( fY ) ; float gi = ge ( fZ ) ; float gj = ge ( f_ ) ; float gk = ge ( gc ) ; float gl = min ( gf , min ( min ( gh , gi ) , min ( gj , gk ) ) ) ; float gm = max ( gf , max ( max ( gh , gi ) , max ( gj , gk ) ) ) ; vec2 bD ; bD . x = - ( ( gh + gi ) - ( gj + gk ) ) ; bD . y = ( ( gh + gj ) - ( gi + gk ) ) ; float gn = max ( ( gh + gi + gj + gk ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float go = 1.0 / ( min ( abs ( bD . x ) , abs ( bD . y ) ) + gn ) ; bD = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bD * go ) ) * u_texel_size ; vec4 gp = 0.5 * ( GLSL_TEXTURE ( u_color , A + bD * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bD * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gq = gp * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bD * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bD * 0.5 ) ) ; float gs = ge ( gq ) ; if ( ( gs < gl ) || ( gs > gm ) ) return gp ; else return gq ; }".split(" ")}]}},
{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["1"]},{a:"include",F:"fxaa.glslf"},{a:"cond",f:[{a:"if",j:["AA_QUALITY","AA_QUALITY_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["39"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["1.00"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.063"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0312"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_MEDIUM",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["20"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.65"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0625"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.50"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",
b:["0.0833"]}]}}]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gt ( ) ;".split(" ")}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 gu = u_texel_size ; GLSL_OUT_FRAG_COLOR = gv ( A , u_color , gu , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},{a:"txt",
b:["}"]}]};a["postprocessing/bloom_combine.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"BLUR_PASS_NUM",b:["BLUR_PASS_5"]},{a:"txt",b:["uniform","sampler2D","u_main",";"]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_4",";"]}]}}]},
{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_main , A ) ; vec4 gx = vec4 ( 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gw + gx ; }".split(" ")}]};
a["postprocessing/coc.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"COC_TYPE",b:["COC_ALL"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_coc_fg",";"]}]}}]},{a:"txt",b:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gz = 0.0 ;".split(" ")},{a:"cond",
f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 gA = GLSL_TEXTURE ( u_coc_fg , A ) ; float gB = gA . a ;".split(" ")}]}}]},{a:"txt",b:"if ( eq < u_dof_dist ) gz = ( u_dof_dist - eq - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"else gz = ( eq - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{a:"txt",b:"gz = clamp ( gz , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gz = max ( gz , gB ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gz , gz ) ;".split(" ")}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
a["postprocessing/compositing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gC = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gC . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float ds = ge ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( ds ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gC . a ) ; }".split(" ")}]};
a["postprocessing/depth_pack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = er ( clamp ( gy ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
a["postprocessing/dof.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DOF_TYPE",b:["DOF_SIMPLE"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gD = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",
j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gz ; vec4 gE = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gF = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gG = min ( gE . rgba , gF . rgba ) ; gz = gG . a ; if ( gz > 0.0 ) { gG = vec4 ( gG . rgb / gz , gD . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gG , min ( gz * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gD ;".split(" ")}]}},{a:"elif",j:["DOF_TYPE","DOF_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gH ; if ( eq < u_dof_dist ) gH = ( u_dof_dist - eq ) / u_dof_front_end ; else gH = ( eq - u_dof_dist ) / u_dof_rear_end ; gH = clamp ( gH , 0.0 , 1.0 ) ; vec4 gI = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gI , gH ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","gD",";"]}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = gD ; }".split(" ")}]};a["postprocessing/glow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gJ = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gK = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gL = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gJ ; if ( gL . a != 0.0 ) { float gM = u_glow_mask_large_coeff * gL . a ; gM = clamp ( gM , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gL . rgb / gL . a , gM ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gM ) ; } if ( gK . a != 0.0 ) { float gN = u_glow_mask_small_coeff * gK . a ; gN = clamp ( gN , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gK . rgb / gK . a , gN ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gN ) ; } }".split(" ")}]};
a["postprocessing/god_rays.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"STEPS_PER_PASS",b:["10.0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"procedural.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN float gO ; GLSL_IN vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN vec4 gQ ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cS = ( gQ . xy - A ) ; float aM = length ( cS ) ; vec2 gR = u_radial_blur_step * cS / aM ; float gS = aM / u_radial_blur_step ; gR *= min ( gS , STEPS_PER_PASS ) / STEPS_PER_PASS ; gS = max ( gS , STEPS_PER_PASS ) ; vec2 gT = A ; float gU = 0.0 ; const int gV = int ( STEPS_PER_PASS ) ; int gW = int ( gS + 0.5 ) ; for ( int cl = 0 ; cl < gV ; cl += 1 ) { if ( cl <= gW ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_input , gT , u_camera_range ) ; gU += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , eq ) , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 gX = GLSL_TEXTURE ( u_input , gT ) ; gU += cQ ( gX ) ;".split(" ")}]}}]},{a:"txt",b:"} gT += gR ; }".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = A + gP ; float gY = fG ( vec2 ( 2.5 * ( b_ . x ) , 2.5 * ( b_ . y ) + 1.0 * u_time ) ) . x + 0.75 * fG ( vec2 ( 5.0 * ( b_ . x ) - 0.66 * u_time , 5.0 * ( b_ . y ) + 0.66 * u_time ) ) . x + 0.5 * fv ( vec2 ( 7.5 * ( b_ . x ) + 0.33 * u_time , 7.5 * ( b_ . y ) - 0.33 * u_time ) ) ; gY *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gO ; gU = max ( gY , gU ) ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_OUT_FRAG_COLOR = er ( gU / STEPS_PER_PASS ) ; }".split(" ")}]};a["postprocessing/god_rays.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{a:"txt",b:["GLSL_IN","vec2","a_bb_vertex",";"]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT float gO ; GLSL_OUT vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gQ ; void main ( ) { A = a_bb_vertex ; vec3 bD = normalize ( u_sun_direction ) ; gQ = u_view_proj_matrix * vec4 ( bD , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"if ( u_cam_water_depth < 0.0 ) { gO = 1.0 ; vec3 gZ = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 g_ = T ( u_camera_quat , gZ ) ; g_ = normalize ( g_ ) ; float ha = dot ( g_ , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hb = atan ( g_ . x , g_ . z ) ; gP = vec2 ( - hb , acos ( ha ) ) ; } else { gO = 0.0 ; }".split(" ")}]}}]},{a:"txt",b:"gQ . xy = 0.5 * ( gQ . xy / gQ . w + 1.0 ) ; gQ += 99999.0 * step ( gQ . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/god_rays_combine.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SAFARI_CANVAS_ALPHA_HACK",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hc = GLSL_TEXTURE ( u_main , A ) ; vec3 hd = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bC ( hc . rgb ) ; float he = cQ ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hf = hc . rgb + u_god_rays_intensity * vec3 ( he ) * hd ; aW ( hf ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SAFARI_CANVAS_ALPHA_HACK"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , max ( 0.01 , hc . a ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , hc . a ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["postprocessing/luminance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_input , A ) ; float hg = dot ( gw . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hg ) , 1.0 ) ; }".split(" ")}]};
a["postprocessing/luminance_av.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hh = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hh ) , 1.0 ) ; }".split(" ")}]};a["postprocessing/luminance_truncated.glslf"]={a:"grp",f:[{a:"version",
b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"ADAPTIVE_BLOOM",b:["0"]},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_average_lum_val",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM"],l:{a:"grp",f:[{a:"txt",b:"float hh = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","hh","=","u_average_lum_val",";"]}]}}]},{a:"txt",b:"float hi = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hj = hi / hh ; float hk = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( hk , hk + 1.2 , hj ) ; }".split(" ")}]};a["postprocessing/motion_blur.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hl = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hm = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hn = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hm - hn ) > u_motion_blur_decay_threshold ) { vec4 ho = ( 1.0 - u_motion_blur_exp ) * hm + u_motion_blur_exp * hn ; vec4 hp = ho - hn ; vec4 hq = hm - hn ; vec4 cS = min ( max ( abs ( hp ) , vec4 ( hl ) ) , abs ( hq ) ) * sign ( hp ) ; GLSL_OUT_FRAG_COLOR = hn + cS ; } else { GLSL_OUT_FRAG_COLOR = hm ; } }".split(" ")}]};
a["postprocessing/outline.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hr = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hr ; if ( u_draw_outline != 0.0 ) { vec4 hs = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 ht = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hu = ht . a - hs . a ; if ( hu != 0.0 ) { float hv = smoothstep ( 0.0 , 1.0 , ht . a ) ; if ( hs . a == 0.0 ) { vec3 hw = u_outline_color ; aW ( hw ) ; vec4 hx = vec4 ( clamp ( hw , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hr , hx , hv ) ; } } } }".split(" ")}]};
a["postprocessing/performance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cl = 0 ; cl < 10 ; cl ++ ) { vec2 hy = vec2 ( fract ( A * vec2 ( cl ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hy ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["postprocessing/postprocessing.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"POST_EFFECT",b:["POST_EFFECT_NONE"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{a:"elif",j:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 du = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( du . r + du . g + du . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; float gz ; float hB = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hz = aQ ; hA = aQ ; gz = aQ . a ; cS = gz * cS ; for ( int cl = 0 ; cl < 12 ; cl += 2 ) { fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; } hz /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , hB ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; aQ = GLSL_TEXTURE ( u_color , A ) ; hA = max ( hA , aQ ) ; hz = aQ ; hz . a = aQ . a * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , 0.5 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_EXTEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 cS = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{a:"elif",j:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float hC = u_delta [ 0 ] ; float hD = u_delta [ 1 ] ; float hE = 1.0 / 3.0 ; float hF = 0.5 ; vec2 hG = vec2 ( hE , hF ) ; if ( u_tex_number == 0 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , hF - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 b_ = A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 1.5 - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 b_ = A * hG + vec2 ( hE , 0.0 ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 b_ = A * hG + vec2 ( hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 3.0 * hF - b_ [ 1 ] ) ) ; } else { vec2 b_ = A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hF + hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/postprocessing.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/precompute_brdf.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"PRECISION",b:["highp"]},
{a:"txt",b:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } float hK ( float hH , float ec ) { float a = ec ; float hI = ( a * a ) / 2.0 ; float hJ = hH ; float dX = hH * ( 1.0 - hI ) + hI ; return hJ / dX ; } float hN ( vec3 d_ , vec3 ek , vec3 en , float ec ) { float hH = max ( dot ( d_ , ek ) , 0.0 ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; float hL = hK ( hH , ec ) ; float hM = hK ( eo , ec ) ; return hM * hL ; } vec2 hU ( float hH , float ec ) { vec3 ek ; ek . x = sqrt ( 1.0 - hH * hH ) ; ek . y = 0.0 ; ek . z = hH ; float cB = 0.0 ; float hO = 0.0 ; vec3 d_ = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int el = 1024 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , ec ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( en . z , 0.0 ) ; float hP = max ( ef . z , 0.0 ) ; float hQ = max ( dot ( ek , ef ) , 0.0 ) ; if ( eo > 0.0 ) { float hR = hN ( d_ , ek , en , ec ) ; float hS = ( hR * hQ ) / ( hP * hH ) ; float hT = pow ( 1.0 - hQ , 5.0 ) ; cB += ( 1.0 - hT ) * hS ; hO += hT * hS ; } } cB /= float ( el ) ; hO /= float ( el ) ; return vec2 ( cB , hO ) ; } void main ( ) { vec2 hV = hU ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hV , 0.0 , 1.0 ) ; }".split(" ")}]};
a["postprocessing/smaa.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"SMAA_REPROJECTION",b:["0"]},{a:"var",c:"SMAA_PREDICATION",b:["0"]},{a:"var",c:"SMAA_DISABLE_CORNER_DETECTION",b:["0"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_ULTRA"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:["uniform","sampler2D","u_color",";"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_prev",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_blend",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2},"SMAA_PREDICATION",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4",
"hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 hX ; GLSL_IN vec4 hY ; GLSL_IN vec4 hZ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","h_",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.15"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",
b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",
b:["8"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.05"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["16"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_DEPTH_THRESHOLD",l:{a:"grp",
f:[{a:"define",c:"SMAA_DEPTH_THRESHOLD",b:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS_DIAG",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_CORNER_ROUNDING",l:{a:"grp",f:[{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",l:{a:"grp",f:[{a:"define",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",
c:"SMAA_PREDICATION",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_THRESHOLD",b:["0.01"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_SCALE",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_STRENGTH",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_STRENGTH",b:["0.4"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION",
l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION_WEIGHT_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION_WEIGHT_SCALE",b:["30.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE",b:["16"]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE_DIAG",b:["20"]},{a:"define",c:"SMAA_AREATEX_PIXEL_SIZE",b:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},
{a:"define",c:"SMAA_AREATEX_SUBTEX_SIZE",b:["(","1.0","/","7.0",")"]},{a:"define",c:"SMAA_SEARCHTEX_SIZE",b:"vec2 ( 66.0 , 33.0 )".split(" ")},{a:"define",c:"SMAA_SEARCHTEX_PACKED_SIZE",b:"vec2 ( 64.0 , 16.0 )".split(" ")},{a:"define",c:"SMAA_CORNER_ROUNDING_NORM",b:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 id ( vec2 b_ , sampler2D ia ) { float p = GLSL_TEXTURE ( ia , b_ ) . r ; float ib = GLSL_TEXTURE ( ia , hX . xy ) . r ; float ic = GLSL_TEXTURE ( ia , hX . zw ) . r ; return vec3 ( p , ib , ic ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ii ( vec2 b_ , sampler2D ie ) { vec3 ig = id ( b_ , ie ) ; vec2 cS = abs ( ig . xx - ig . yz ) ; vec2 ih = step ( SMAA_PREDICATION_THRESHOLD , cS ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * ih ) ; }".split(" ")}]}}]},{a:"txt",b:"void im ( bvec2 ij , inout vec2 ik , vec2 il ) { if ( ij . x ) ik . x = il . x ; if ( ij . y ) ik . y = il . y ; } void im ( bvec4 ij , inout vec4 ik , vec4 il ) { im ( ij . xy , ik . xy , il . xy ) ; im ( ij . zw , ik . zw , il . zw ) ; } vec2 io ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 io ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iA ( vec2 b_ , sampler2D ip".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ie"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:"vec2 iq = ii ( b_ , ie ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iq = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{a:"txt",
b:"vec3 ir = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float en = dot ( GLSL_TEXTURE ( ip , b_ ) . rgb , ir ) ; float is = dot ( GLSL_TEXTURE ( ip , hX . xy ) . rgb , ir ) ; float it = dot ( GLSL_TEXTURE ( ip , hX . zw ) . rgb , ir ) ; vec4 cS ; cS . xy = abs ( en - vec2 ( is , it ) ) ; vec2 ih = step ( iq , cS . xy ) ; if ( dot ( ih , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iu = dot ( GLSL_TEXTURE ( ip , hY . xy ) . rgb , ir ) ; float iv = dot ( GLSL_TEXTURE ( ip , hY . zw ) . rgb , ir ) ; cS . zw = abs ( en - vec2 ( iu , iv ) ) ; vec2 iw = max ( cS . xy , cS . zw ) ; float ix = dot ( GLSL_TEXTURE ( ip , hZ . xy ) . rgb , ir ) ; float iy = dot ( GLSL_TEXTURE ( ip , hZ . zw ) . rgb , ir ) ; cS . zw = abs ( vec2 ( is , it ) - vec2 ( ix , iy ) ) ; iw = max ( iw . xy , cS . zw ) ; float iz = max ( iw . x , iw . y ) ; ih . xy *= step ( iz , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cS . xy ) ; return ih ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iC ( vec2 iB ) { iB . r = iB . r * abs ( 5.0 * iB . r - 5.0 * 0.75 ) ; return io ( iB ) ; } vec4 iC ( vec4 iB ) { iB . rb = iB . rb * abs ( 5.0 * iB . rb - 5.0 * 0.75 ) ; return io ( iB ) ; } vec2 iE ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz += t * vec3 ( bD , 1.0 ) ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iF ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; fW . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz = t * vec3 ( bD , 1.0 ) + fW . xyz ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; iB = iC ( iB ) ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iH ( sampler2D iG , vec2 aM , vec2 iB , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iB + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . x += 0.5 ; b_ . y += SMAA_AREATEX_SUBTEX_SIZE * fI ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } vec2 iM ( sampler2D iD , sampler2D iG , vec2 b_ , vec2 iB , vec4 iI ) { vec2 ir = vec2 ( 0.0 , 0.0 ) ; vec4 dz ; vec2 iJ ; if ( iB . r > 0.0 ) { dz . xz = iE ( iD , b_ , vec2 ( - 1.0 , 1.0 ) , iJ ) ; dz . x += float ( iJ . y > 0.9 ) ; } else dz . xz = vec2 ( 0.0 , 0.0 ) ; dz . yw = iE ( iD , b_ , vec2 ( 1.0 , - 1.0 ) , iJ ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x + 0.25 , dz . x , dz . y , - dz . y - 0.25 ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . xy = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; du . yxwz = iC ( du . xyzw ) ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0.0 , 0.0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . z ) ; } dz . xz = iF ( iD , b_ , vec2 ( - 1 , - 1 ) , iJ ) ; if ( GLSL_TEXTURE ( iD , b_ + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dz . yw = iF ( iD , b_ , vec2 ( 1 , 1 ) , iJ ) ; dz . y += float ( iJ . y > 0.9 ) ; } else dz . yw = vec2 ( 0.0 , 0.0 ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x , - dz . x , dz . y , dz . y ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . x = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; du . y = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0 , 0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . w ) . gr ; } return ir ; }".split(" ")}]}}]},
{a:"txt",b:"float iP ( sampler2D iN , vec2 iB , float fI ) { vec2 hG = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iO = SMAA_SEARCHTEX_SIZE * vec2 ( fI , 1.0 ) ; hG += vec2 ( - 1.0 , 1.0 ) ; iO += vec2 ( 0.5 , - 0.5 ) ; hG *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iO *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iN , hG * iB + iO , 0.0 ) . r ; } float iQ ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x > iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.0 ) + 3.25 ; return u_texel_size . x * fI + b_ . x ; } float iR ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x < iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.5 ) + 3.25 ; return - u_texel_size . x * fI + b_ . x ; } float iS ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y > iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fI + b_ . y ; } float iT ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y < iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fI + b_ . y ; } vec2 iW ( sampler2D iG , vec2 aM , float iU , float iV , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * io ( 4.0 * vec2 ( iU , iV ) ) + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . y = SMAA_AREATEX_SUBTEX_SIZE * fI + b_ . y ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } void iZ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:"} void i_ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jc ( vec2 b_ , vec2 ja , sampler2D iD , sampler2D iG , sampler2D iN , vec4 iI ) { vec4 ir = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iB = GLSL_TEXTURE ( iD , b_ ) . rg ; if ( iB . g > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"ir . rg = iM ( iD , iG , b_ , iB , iI ) ; if ( ir . r == - ir . g ) {".split(" ")}]}}]},
{a:"txt",b:"vec2 dz ; vec3 iK ; iK . x = iQ ( iD , iN , hX . xy , hZ . x ) ; iK . y = hY . y ; dz . x = iK . x ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . r ; iK . z = iR ( iD , iN , hX . zw , hZ . y ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . xx - ja . xx ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; ir . rg = iW ( iG , jb , iU , iV , iI . y ) ; iK . y = b_ . y ; iZ ( iD , ir . rg , iK . xyzy , dz ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"} else iB . r = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"} if ( iB . r > 0.0 ) { vec2 dz ; vec3 iK ; iK . y = iS ( iD , iN , hY . xy , hZ . z ) ; iK . x = hX . x ; dz . x = iK . y ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . g ; iK . z = iT ( iD , iN , hY . zw , hZ . w ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . yy - ja . yy ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; ir . ba = iW ( iG , jb , iU , iV , iI . x ) ; iK . x = b_ . x ; i_ ( iD , ir . ba , iK . xyxz , dz ) ; } return ir ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jl ( vec2 b_ , sampler2D ip , sampler2D jd".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:") { vec4 a ; a . x = GLSL_TEXTURE ( jd , hW . xy ) . a ; a . y = GLSL_TEXTURE ( jd , hW . zw ) . g ; a . wz = GLSL_TEXTURE ( jd , b_ ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( ip , b_ , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl = 2.0 * jg ( jf ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:"return aQ ; } else { bool cj = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jh = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 ji = a . yw ; im ( bvec4 ( cj , cj , cj , cj ) , jh , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; im ( bvec2 ( cj , cj ) , ji , a . xz ) ; ji /= dot ( ji , vec2 ( 1.0 , 1.0 ) ) ; vec4 jj = jh * vec4 ( u_texel_size , - u_texel_size ) + b_ . xyxy ; vec4 aQ = ji . x * GLSL_TEXTURE ( ip , jj . xy , 0.0 ) ; aQ += ji . y * GLSL_TEXTURE ( ip , jj . zw , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , jj . xy ) ; vec2 jk = 2.0 * jg ( jf ) - 1.0 ; vec2 dl = ji . x * jk ; jf = GLSL_TEXTURE ( je , jj . zw ) ; jk = 2.0 * jg ( jf ) - 1.0 ; dl += ji . y * jk ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}","}"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jq ( vec2 b_ , sampler2D jm , sampler2D jn".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl ; dl = 2.0 * jg ( jf ) - 1.0 ; vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ - dl ) ; float cS = abs ( jo . a * jo . a - jp . a * jp . a ) / 2.0 ; float cp = 0.5 * clamp ( 1.0 - sqrt ( cS ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( jo , jp , cp ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ ) ; return mix ( jo , jp , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( iA ( A , u_color".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","u_predication_tex"]}]}}]},{a:"txt",b:") , 0.0 , 0.0 ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jc ( A , h_ , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jl ( A , u_color , u_blend".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",";"]}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( jq ( A , u_color , u_color_prev".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};a["postprocessing/smaa.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",
b:["highp"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_LOW"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec4 hX ; GLSL_OUT vec4 hY ; GLSL_OUT vec4 hZ ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","h_",";"]}]}}]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["4"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["8"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["32"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jr ( vec2 b_ ) { hX = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; hZ = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + b_ . xyxy ; }".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void js ( vec2 b_ , out vec2 ja ) { ja = b_ / u_texel_size ; hX = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + b_ . xyxy ; hZ = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hX . xz , hY . yw ) ; }".split(" ")}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jt ( vec2 b_ ) { hW = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jr","(","A",")",";"]}]}},{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"js ( A , h_ ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jt","(","A",")",";"]}]}}]},{a:"txt",b:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/ssao.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_WHITE",b:["0"]},{a:"var",c:"SSAO_QUALITY",b:["SSAO_QUALITY_8"]},{a:"var",c:"SSAO_HEMISPHERE",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",
";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; } void main ( ) { vec3 gC = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_WHITE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gC , 1.0 ) ; return ;".split(" ")}]}}]},{a:"txt",b:"vec3 jv = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float eq = ju ( A ) ; float jw = eq * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_QUALITY","SSAO_QUALITY_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 8.0 ; const int jy = 1 ;".split(" ")}]}},
{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 16.0 ; const int jy = 2 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_24",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 24.0 ; const int jy = 3 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_32",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 32.0 ; const int jy = 4 ;".split(" ")}]}}]},{a:"txt",b:"float jz = u_ssao_radius_increase * 0.001 ; const float jA = 1.0 + 2.4 / jx ; float jB = 0.0 ; for ( int cl = 0 ; cl < jy ; cl ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jC = reflect ( normalize ( vec3 ( x , y , z ) ) , jv ) * ( jz *= jA ) ; vec3 jD = vec3 ( A , jw ) ; jD += vec3 ( jC . xy , jC . z * jw * 2.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jD . z -= 1.4 * ( jD . z - jw ) * step ( jw , jD . z ) ;".split(" ")}]}}]},{a:"txt",b:"float jE = ju ( jD . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jF = clamp ( ( jw - jE ) / jE , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB += mix ( 1.0 , jF , step ( jE , jD . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB += mix ( step ( jD . z , jE ) , 0.5 , jF ) ;".split(" ")}]}}]},
{a:"txt",b:"} jB = jB / jx ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + 0.6 * jB , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + jB , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"float jG = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * eq ) ; jB = mix ( 1.0 , jB , jG ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gC , jB ) ; }".split(" ")}]};a["postprocessing/ssao_blur.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},
{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_BLUR_DEPTH",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"}]}}]},{a:"txt",b:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",
b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { float jH = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jI = ju ( A ) ; float cp = 0.0 ; float jJ = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{a:"txt",b:"vec2 jK = vec2 ( - 2.0 ) ; for ( int cl = 0 ; cl < 4 ; ++ cl ) { for ( int jL = 0 ; jL < 4 ; ++ jL ) { vec2 fI = ( jK + vec2 ( float ( cl ) , float ( jL ) ) ) * u_texel_size ; float jM = GLSL_TEXTURE ( u_ssao_mask , A + fI ) . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jN = ju ( A + fI ) ; float jO = 1.0 - clamp ( abs ( jN - jI ) * jJ , 0.0 , 1.0 ) ; jH += jM * jO ; cp += jO ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["jH","+=","jM",";"]}]}}]},{a:"txt",b:["}","}"]},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / cp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / 16.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/stereo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANAGLYPH",b:["0"]},{a:"var",c:"SIDEBYSIDE",b:["0"]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"DISTOR_SCALE",b:["0.8"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["ANAGLYPH",{a:"logic_negative_expr",o:1},"SIDEBYSIDE",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void jX ( vec2 b_ , vec2 ao , float df , sampler2D jP ) { vec2 bz = ( b_ - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / df ; float jQ = bz . x * bz . x + bz . y * bz . y ; vec2 jR = bz * ( 1.0 + u_distortion_params [ 0 ] * jQ + u_distortion_params [ 1 ] * jQ * jQ ) ; vec2 jS = jR * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jT = jS * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jQ * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jU = jS + 0.5 ; vec2 jV = jS * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jQ * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jV , 0.0 , 1.0 ) != jV ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jW = GLSL_TEXTURE ( jP , jU ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jP , jT ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jW . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jP , jV ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jW . w ; } } else { jS += 0.5 ; if ( clamp ( jS , 0.0 , 1.0 ) != jS ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jP , jS ) ; } } }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ANAGLYPH"],l:{a:"grp",f:[{a:"txt",b:"vec4 jY = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jZ = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 j_ = vec3 ( jY [ 0 ] , jY [ 1 ] , jY [ 2 ] ) ; bC ( j_ ) ; vec3 ka = vec3 ( jZ [ 0 ] , jZ [ 1 ] , jZ [ 2 ] ) ; bC ( ka ) ; mat3 kb = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bv = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kb * j_ , 0.0 , 1.0 ) + clamp ( bv * ka , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jY [ 3 ] + jZ [ 3 ] ) ;".split(" ")}]}},
{a:"elif",j:["SIDEBYSIDE"],l:{a:"grp",f:[{a:"txt",b:"if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_left ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/velocity.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float eq = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kc = vec4 ( A * 2.0 - 1.0 , 2.0 * eq - 1.0 , 1.0 ) ; vec4 cy = u_view_proj_inverse * kc ; vec4 kd = cy / cy . w ; vec4 ke = u_view_proj_prev * kd ; ke /= ke . w ; vec2 dl = ( kc . xy - ke . xy ) / 4.0 + 0.5 ; dl = clamp ( dl , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = er ( dl ) ; }".split(" ")}]};
a["include/blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"BLENDING_GLSLF",b:[""]},{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; } vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; } vec3 kl ( vec3 ki , vec3 kj , float kk ) { return mix ( ki , kj , kk ) ; } vec3 km ( vec3 ki , vec3 kj , float kk ) { return kk * ki + kj ; } vec3 kn ( vec3 ki , vec3 kj , float kk ) { return kj - kk * ki ; } vec3 kp ( vec3 ki , vec3 kj , float kk ) { float ko = _1_0 - kk ; return ( vec3 ( ko ) + kk * ki ) * kj ; } vec3 kq ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return vec3 ( _1_0 ) - ( ko + kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) ; } vec3 kr ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return mix ( kj * ( ko + 2.0 * kk * ki ) , vec3 ( _1_0 ) - ( ko + 2.0 * kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) , step ( 0.5 , kj ) ) ; } vec3 ks ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , abs ( ki - kj ) , kk ) ; } vec3 kt ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , kj / ( ki + step ( ki , vec3 ( _0_0 ) ) ) , kk ) ; } vec3 ku ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , min ( ki , kj ) , kk ) ; } vec3 kv ( vec3 ki , vec3 kj , float kk ) { return max ( kk * ki , kj ) ; } vec3 kz ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . x , kx . yz ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kA ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . x , mix ( kw . y , kx . y , kk ) , kw . z ) ) ; } return ki ; } vec3 kB ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . xy , mix ( kw . z , kx . z , kk ) ) ) ; } vec3 kC ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . xy , kx . z ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kE ( vec3 ki , vec3 kj , float kk ) { vec3 kD = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kj ) * ( vec3 ( _1_0 ) - ki ) ; return mix ( ki , ( ( vec3 ( _1_0 ) - ki ) * kj * ki ) + ki * kD , kk ) ; } vec3 kF ( vec3 ki , vec3 kj , float kk ) { return ki + kk * ( 2.0 * kj - _1_0 ) ; } float kJ ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return ( ko + kk * kG ) * kH ; } float kK ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return _1_0 - ( ko + kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) ; } float kL ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return mix ( kH * ( ko + 2.0 * kk * kG ) , _1_0 - ( ko + 2.0 * kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) , step ( 0.5 , kH ) ) ; }".split(" ")}]}}]}]};
a["include/caustics.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"CAUSTICS_GLSLF",l:{a:"grp",f:[{a:"define",c:"CAUSTICS_GLSLF",b:[""]},{a:"var",c:"SUN_NUM",b:["0"]},{a:"var",c:"CAUST_SCALE",b:["0.25"]},{a:"var",c:"CAUST_SPEED",b:["vec2","(","0.0",")"]},{a:"var",c:"CAUST_BRIGHT",b:["0.5"]},{a:"include",F:"procedural.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"CAUSTICS_VIEW_DISTANCE",b:["100.0"]},{a:"txt",b:"void bQ ( inout vec3 aQ , float kM , float fu , vec4 bP , vec3 U , vec3 kN , vec3 kO , vec4 kP , vec3 bo , float bN ) { if ( bN > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kQ = bo + U ; kQ . xz = 10.0 * sin ( 0.1 * kQ . xz ) ; vec3 kS = T ( kR ( kP ) , kQ ) ; vec2 b_ = kS . xz ; vec3 kT = kN ; float kU = max ( dot ( U , kT ) , 0.0 ) ; float kV = 0.025 ; vec2 kW = CAUST_SPEED * fu ; b_ . s += 0.25 * sin ( dot ( bo + fu , vec3 ( 1.0 ) ) ) ; b_ . t += 0.35 * ( - sin ( dot ( bo - fu , vec3 ( - 0.7 ) ) ) ) ; b_ . st += 0.15 * cos ( 4.0 * kM - kW . x ) + 1.5 * sin ( kM - 0.3 * kW . y ) ; float hG = CAUST_SCALE * ( 1.0 + max ( 0.1 * kM , 0.0 ) ) ; vec3 kY = kX ( ( b_ / hG ) , kV ) ; kY *= CAUST_BRIGHT ; kY *= kY ; float kZ = min ( 0.25 * kM , - kM ) + 1.0 ; kZ = max ( kZ , 0.0 ) ; float k_ = bP [ SUN_NUM ] * kU ; float la = max ( sign ( kM ) , 0.0 ) ; k_ = k_ + max ( 0.5 * sign ( - U . y ) * la , 0.0 ) ; k_ = min ( k_ , 1.0 ) ; aQ += kO * kY * kZ * k_ ; }".split(" ")}]}}]}]};
a["include/color_util.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"COLOR_UTIL_GLSLF",l:{a:"grp",f:[{a:"define",c:"COLOR_UTIL_GLSLF",b:[""]},{a:"define",c:"PREMULTIPLY_ALPHA",b:["1"]},{a:"var",c:"SRGB",b:["SRGB_NONE"]},{a:"include",F:"std.glsl"},{a:"txt",b:"void bC ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{a:"txt",b:"} void bC ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( aQ . r ) ; bC ( aQ . g ) ; bC ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},
{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{a:"cond",f:[{a:"if",j:["PREMULTIPLY_ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aQ = aQ * L ;".split(" ")}]}}]},{a:"txt",b:"} float ge ( vec4 aQ ) { vec3 lb = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lc = dot ( aQ . rgb , lb ) ; return lc ; }".split(" ")}]}}]}]};a["include/coverage.glslf"]={a:"grp",
f:[{a:"cond",f:[{a:"ifndef",c:"COVERAGE_GLSLF",l:{a:"grp",f:[{a:"define",c:"COVERAGE_GLSLF",b:[""]},{a:"include",F:"procedural.glslf"},{a:"txt",b:"const float ld = 1000.0 ; bool C ( float L , float le ) { if ( le < 0.0 ) L = 1.0 - L ; float lf = floor ( L * ld ) ; float lh = floor ( lg ( gl_FragCoord . xy ) * ld ) ; if ( le > 0.0 ) return lh < lf ; else return lh >= lf ; }".split(" ")}]}}]}]};a["include/depth_fetch.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DEPTH_FETCH_GLSLF",l:{a:"grp",f:[{a:"define",
c:"DEPTH_FETCH_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float ep ( in float li , in vec2 lj ) { float dD = lj . x ; float lk = lj . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return lk * ( 1.0 - dD / li ) / ( lk - dD ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return ( li - dD ) / ( lk - dD ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float gy ( in sampler2D ll , in vec2 fW , in vec2 lj ) { float eq = GLSL_TEXTURE ( ll , fW ) . r ; float dD = lj . x ; float lk = lj . y ; float li = 2.0 * dD / ( dD + lk - ( 2.0 * eq - 1.0 ) * ( lk - dD ) ) ; return li ; }".split(" ")}]}}]}]}}]}]};a["include/dynamic_grass.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DYNAMIC_GRASS_GLSLV",l:{a:"grp",f:[{a:"define",
c:"DYNAMIC_GRASS_GLSLV",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"GRASS_TEXTURE_SIZE",b:["1024.0"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"vec2 lp ( vec3 O , float lm , vec2 ln ) { vec2 lo = vec2 ( ( O . x - ln . x ) / lm , ( O . y - ln . y ) / lm ) ; return fract ( lo ) ; } vec2 lq ( vec2 gT , float lm , vec2 ln ) { return vec2 ( gT . x * lm , gT . y * lm ) + ln ; } au lr ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"vec4 lB ( sampler2D ls , vec2 lt ) { float lu = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lv = GLSL_TEXTURE ( ls , lt ) ; vec4 lw = GLSL_TEXTURE ( ls , lt + vec2 ( lu , 0.0 ) ) ; vec4 lx = GLSL_TEXTURE ( ls , lt + vec2 ( 0.0 , lu ) ) ; vec4 ly = GLSL_TEXTURE ( ls , lt + vec2 ( lu , lu ) ) ; float a = fract ( lt . x * GRASS_TEXTURE_SIZE ) ; vec4 lz = mix ( lv , lw , a ) ; vec4 lA = mix ( lx , ly , a ) ; float b = fract ( lt . y * GRASS_TEXTURE_SIZE ) ; return mix ( lz , lA , b ) ; }".split(" ")}]}}]},
{a:"txt",b:"au aZ ( vec3 O , vec3 V , vec3 lC , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lD , sampler2D lE , vec3 lF , float lG , vec3 lH , vec4 lI , mat3 N , mat3 Z ) { vec3 lJ = T ( lI , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lK = - lJ . x ; float lL = lJ . y ; vec2 ln = vec2 ( lH . x - lG * ( 1.0 + lK ) / 2.0 , lH . y - lG * ( 1.0 - lL ) / 2.0 ) ; vec2 lM = lp ( ao , lG , ln ) ; float lN = lG / 2.0 ; vec2 lO = abs ( lq ( lM - vec2 ( 0.5 ) , lG , vec2 ( 0.0 ) ) ) ; float lP = lN * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lO ) > lP ) return lr ( ) ; float lQ = lG / lF . z ; vec2 lR = ( lM - vec2 ( 0.5 ) ) * lQ + vec2 ( 0.5 ) ; vec3 lS = lJ * ( lG / lF . z - 1.0 ) / 2.0 ; lR . x += lS . x ; lR . y += lS . y ; vec4 lT = GLSL_TEXTURE ( lE , lR ) ; float hG = lT . r ; if ( hG < u_scale_threshold ) return lr ( ) ; float lU = lF . y - lF . x ;".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( lB ( lD , lR ) ) . r * lU ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( GLSL_TEXTURE ( lD , lR ) ) . r * lU ;".split(" ")}]}}]},{a:"txt",b:"vec2 lV = O . xy - ao . xy ; ao . xy = lq ( lM , lG , ln ) ; ao . z = ci ; O . xy = ao . xy + lV ; O . z *= hG ; O . z += ci ; vec3 aQ = lT . gba ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"O -= ao ; mat3 lW = as ( lH , ao , N , Z ) ; au aw = av ( O , ao , V , lC , W , U , lW ) ; aw . ao = ao ; aw . aQ = aQ ; return lX ( aw ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return lX ( au ( O , ao , V , lC , W , U , aQ ) ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/environment.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"ENVIRONMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"ENVIRONMENT_GLSLF",b:[""]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"txt",b:"vec3 cz ( vec3 U ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["SKY_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{a:"elif",j:["SKY_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float lY = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , lY ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fog.glslf"]={a:"grp",f:[{a:"cond",
f:[{a:"ifndef",c:"FOG_GLSLF",l:{a:"grp",f:[{a:"define",c:"FOG_GLSLF",b:[""]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"FOG_TYPE",b:["QUADRATIC"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:"void mc ( inout vec3 aQ , in float lZ , in float ci , in vec4 l_ ) { float ma = clamp ( ( lZ - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FOG_TYPE","QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["ma","*=","ma",";"]}]}},{a:"elif",j:["FOG_TYPE","LINEAR",{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["FOG_TYPE","INVERSE_QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ma = sqrt ( ma ) ;".split(" ")}]}}]},{a:"txt",b:"if ( u_fog_params . w > 0.0 ) { if ( ci > u_fog_params . w ) ma = 0.0 ; else { float mb = ( u_fog_params . w - max ( ci , 0.0 ) ) / u_fog_params . w ; ma *= mb * mb ; } } l_ . a = 1.0 - ( 1.0 - ma ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , l_ . rgb , l_ . a ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 mh ( in mat4 md , in vec3 D ) { vec3 me = mix ( md [ 0 ] . rgb , md [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mf = mix ( md [ 2 ] . rgb , md [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mg = vec3 ( md [ 0 ] . a , md [ 1 ] . a , md [ 2 ] . a ) ; vec3 aQ = mix ( me , mf , abs ( D . y ) ) ; aQ = mix ( aQ , mg , abs ( D . z ) ) ; bC ( aQ ) ; return aQ ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"void mj ( inout float mi ) { mi -= 0.5 ; mi = 4.0 * ( mi * mi * mi ) + 0.5 ; } void mp ( inout vec3 aQ , in float lZ , in vec3 D , in float eC , in vec4 mk , in float fl ) { float ml = max ( D . z , 0.0 ) ; float mm = max ( lZ - max ( eC / ml , 0.0 ) , 0.0 ) ; float mn = mk . w * mm ; vec3 eD = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 mo = mk . rgb ; mn = min ( mn , 1.0 ) ; mj ( mn ) ; mn *= clamp ( 2.0 - fl , 0.0 , 1.0 ) ; vec3 eE = mix ( mo , eD , min ( ml , 1.0 ) ) ; eC = clamp ( - eC * 0.03 , 0.0 , 0.8 ) ; eE *= 1.0 - eC ; aQ = mix ( aQ , eE , mn ) ; }".split(" ")}]}}]},
{a:"txt",b:"void bR ( inout vec3 aQ , float lZ , vec3 D , float bO ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 md = mh ( u_cube_fog , D ) ; vec4 eE = vec4 ( md , u_fog_color_density . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","eE","=","u_fog_color_density",";"]}]}}]},{a:"txt",b:"mc ( aQ , lZ , h . z , eE ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"mp ( aQ , lZ , D , u_cam_water_depth , u_underwater_fog_color_density , bO ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fxaa.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSLF",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSLF",b:[""]},{a:"var",c:"FXAA_BLEND4WEB",b:["1"]},{a:"var",c:"FXAA_QUALITY_P12",b:["0.0"]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PS3",l:{a:"grp",f:[{a:"define",c:"FXAA_PS3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_360",l:{a:"grp",f:[{a:"define",c:"FXAA_360",b:["0"]}]}}]},
{a:"cond",f:[{a:"ifndef",c:"FXAA_360_OPT",l:{a:"grp",f:[{a:"define",c:"FXAA_360_OPT",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC",l:{a:"grp",f:[{a:"define",c:"FXAA_PC",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC_CONSOLE",l:{a:"grp",f:[{a:"define",c:"FXAA_PC_CONSOLE",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_120",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_120",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_130",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_130",b:["0"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_HLSL_3",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_4",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_4",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_5",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_5",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GREEN_AS_LUMA",l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_EARLY_EXIT",l:{a:"grp",f:[{a:"define",c:"FXAA_EARLY_EXIT",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_DISCARD",l:{a:"grp",f:[{a:"define",c:"FXAA_DISCARD",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"cond",f:[{a:"ifdef",c:"GL_EXT_gpu_shader4",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["FXAA_HLSL_5",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",
b:["1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["4.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",
b:["2.0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.125"]}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.25"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_QUALITY_PRESET",l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",10,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",
c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",11,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
12,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",13,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",
b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",14,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",15,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",
b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",20,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",21,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",
c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",22,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
23,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",24,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",25,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",26,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["9"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",27,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["10"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",28,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["11"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",29,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"cond",
f:[{a:"if",j:["FXAA_QUALITY_PRESET",39,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},
{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"include",F:"color_util.glslf"},{a:"txt",b:"float mq ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_BLEND4WEB",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 mr ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mt ( sampler2D t , vec2 p , vec2 ms , vec2 r ) { return GLSL_TEXTURE ( t , p + ( ms * r ) ) ; }".split(" ")}]}}]},
{a:"txt",b:"vec4 gv ( vec2 fn , sampler2D ia , vec2 mu , float mv , float mw , float mx ) { vec2 my ; my . x = fn . x ; my . y = fn . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 mz = mr ( ia , my ) ; float gf = ge ( mz ) ; float mA = ge ( mt ( ia , my , vec2 ( 0 , 1 ) , mu . xy ) ) ; float mB = ge ( mt ( ia , my , vec2 ( 1 , 0 ) , mu . xy ) ) ; float mC = ge ( mt ( ia , my , vec2 ( 0 , - 1 ) , mu . xy ) ) ; float mD = ge ( mt ( ia , my , vec2 ( - 1 , 0 ) , mu . xy ) ) ;".split(" ")}]}}]},
{a:"txt",b:"float mE = max ( mA , gf ) ; float mF = min ( mA , gf ) ; float mG = max ( mB , mE ) ; float mH = min ( mB , mF ) ; float mI = max ( mC , mD ) ; float mJ = min ( mC , mD ) ; float mK = max ( mI , mG ) ; float mL = min ( mJ , mH ) ; float mM = mK * mw ; float mN = mK - mL ; float mO = max ( mx , mM ) ; bool mP = mN < mO ; if ( mP ) return mz ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gh = ge ( mt ( ia , my , vec2 ( - 1 , - 1 ) , mu . xy ) ) ; float gk = ge ( mt ( ia , my , vec2 ( 1 , 1 ) , mu . xy ) ) ; float gi = ge ( mt ( ia , my , vec2 ( 1 , - 1 ) , mu . xy ) ) ; float gj = ge ( mt ( ia , my , vec2 ( - 1 , 1 ) , mu . xy ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[]}}]},{a:"txt",b:"float mQ = mC + mA ; float mR = mD + mB ; float mS = 1.0 / mN ; float mT = mQ + mR ; float mU = ( - 2.0 * gf ) + mQ ; float mV = ( - 2.0 * gf ) + mR ; float mW = gi + gk ; float mX = gh + gi ; float mY = ( - 2.0 * mB ) + mW ; float mZ = ( - 2.0 * mC ) + mX ; float m_ = gh + gj ; float na = gj + gk ; float nb = ( abs ( mU ) * 2.0 ) + abs ( mY ) ; float nc = ( abs ( mV ) * 2.0 ) + abs ( mZ ) ; float nd = ( - 2.0 * mD ) + m_ ; float ne = ( - 2.0 * mA ) + na ; float nf = abs ( nd ) + nb ; float ng = abs ( ne ) + nc ; float nh = m_ + mW ; float ni = mu . x ; bool nj = nf >= ng ; float nk = mT * 2.0 + nh ; if ( ! nj ) mC = mD ; if ( ! nj ) mA = mB ; if ( nj ) ni = mu . y ; float nl = ( nk * ( 1.0 / 12.0 ) ) - gf ; float nm = mC - gf ; float nn = mA - gf ; float no = mC + gf ; float np = mA + gf ; bool nq = abs ( nm ) >= abs ( nn ) ; float nr = max ( abs ( nm ) , abs ( nn ) ) ; if ( nq ) ni = - ni ; float ns = mq ( abs ( nl ) * mS ) ; vec2 nt ; nt . x = my . x ; nt . y = my . y ; vec2 nu ; nu . x = ( ! nj ) ? 0.0 : mu . x ; nu . y = ( nj ) ? 0.0 : mu . y ; if ( ! nj ) nt . x += ni * 0.5 ; if ( nj ) nt . y += ni * 0.5 ; vec2 nv ; nv . x = nt . x - nu . x * FXAA_QUALITY_P0 ; nv . y = nt . y - nu . y * FXAA_QUALITY_P0 ; vec2 nw ; nw . x = nt . x + nu . x * FXAA_QUALITY_P0 ; nw . y = nt . y + nu . y * FXAA_QUALITY_P0 ; float nx = ( ( - 2.0 ) * ns ) + 3.0 ; float ny = ge ( mr ( ia , nv ) ) ; float nz = ns * ns ; float nA = ge ( mr ( ia , nw ) ) ; if ( ! nq ) no = np ; float nB = nr * 1.0 / 4.0 ; float nC = gf - no * 0.5 ; float nD = nx * nz ; bool nE = nC < 0.0 ; ny -= no * 0.5 ; nA -= no * 0.5 ; bool nF = abs ( ny ) >= nB ; bool nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P1 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P1 ; bool nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P1 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P1 ; if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P2 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P2 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P2 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P2 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P3 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P3 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P3 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P3 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",4,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P4 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P4 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P4 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P4 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",5,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P5 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P5 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P5 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P5 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",6,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P6 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P6 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P6 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P6 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",7,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P7 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P7 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P7 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P7 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",8,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P8 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P8 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P8 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P8 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",9,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P9 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P9 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P9 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P9 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",10,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P10 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P10 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P10 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P10 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",11,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P11 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P11 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P11 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P11 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",12,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P12 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P12 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P12 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:"} float nI = my . x - nv . x ; float nJ = nw . x - my . x ; if ( ! nj ) nI = my . y - nv . y ; if ( ! nj ) nJ = nw . y - my . y ; bool nK = ( ny < 0.0 ) != nE ; float nL = ( nJ + nI ) ; bool nM = ( nA < 0.0 ) != nE ; float nN = 1.0 / nL ; bool nO = nI < nJ ; float nP = min ( nI , nJ ) ; bool nQ = nO ? nK : nM ; float nR = nD * nD ; float nS = ( nP * ( - nN ) ) + 0.5 ; float nT = nR * mv ; float nU = nQ ? nS : 0.0 ; float nV = max ( nU , nT ) ; if ( ! nj ) my . x += nV * ni ; if ( nj ) my . y += nV * ni ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_DISCARD",1,{a:"equal_expr",o:2},"FXAA_BLEND4WEB",1,{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return mr ( ia , my ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( mr ( ia , my ) . xyz , gf ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/halo_color.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"HALO_COLOR_GLSLF",l:{a:"grp",f:[{a:"define",c:"HALO_COLOR_GLSLF",b:[""]},{a:"var",c:"NUM_RINGS",b:["0"]},{a:"var",
c:"NUM_LINES",b:["0"]},{a:"var",c:"NUM_STARS",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_RINGS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_LINES ;".split(" ")}]}}]},{a:"txt",b:"float nX ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"void od ( inout float nY , in float nZ [ nW ] , in float n_ ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oa = 40.0 * nZ [ a ] ; float ob = 300.0 * ( nX ( oa ) - 0.005 ) ; float oc = oa ; float ma = abs ( oc * ( u_halo_size * ob - n_ ) ) ; nY += 1.0 - min ( ma , 1.0 ) ; } }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"void oi ( inout float oe , in float nZ [ nW ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float of = nZ [ a ] ; float og = of ; float oh = 1000.0 * ( nX ( of ) - 0.005 ) ; float ma = 20.0 * abs ( og * A . x + oh * A . y ) ; oe += 1.0 - min ( ma , 1.0 ) ; } oe *= aM ; }".split(" ")}]}}]},
{a:"txt",b:"void om ( inout float aM , in vec2 b_ ) { float oj , bK ; bK = atan ( b_ . y , b_ . x ) ; bK *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ok = cos ( bK ) ; float ol = sin ( bK ) ; bK = ( ok * b_ . x + ol * b_ . y ) * ( ok * b_ . y - ol * b_ . x ) ; oj = abs ( bK ) ; if ( oj < 1.0 ) { oj = ( 0.01 * u_halo_size ) / ( oj ) ; aM *= sqrt ( min ( oj , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float n_ = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float nZ [ nW ] ; for ( int cl = 0 ; cl < nW ; cl ++ ) { nZ [ cl ] = fract ( bf / float ( cl + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"float nY = 0.0 ; od ( nY , nZ , n_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"float oe = 0.0 ; oi ( oe , nZ , aM ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_STARS"],
l:{a:"grp",f:[{a:"txt",b:"om ( aM , A ) ;".split(" ")}]}}]},{a:"txt",b:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"nY *= aM ; aQ += u_halo_rings_color * nY ; aM += nY ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"oe *= L ; aQ += u_halo_lines_color * oe ; aM += oe ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float kZ = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( kZ , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 on = vec4 ( aQ , aM ) ; return on ; }".split(" ")}]}}]}]};a["include/lighting_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"LIGHTING_NODES_GLSLF",l:{a:"grp",
f:[{a:"define",c:"LIGHTING_NODES_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"node",c:"LIGHTING_BEGIN",C:[],B:[{a:"node_out",c:"oB",i:["vec3"],g:!1},{a:"node_out",c:"oC",i:["vec3"],g:!1},{a:"node_out",c:"oD",i:["vec3"],g:!1},{a:"node_out",c:"oE",i:["vec3"],g:!0},{a:"node_out",c:"oF",i:["vec3"],g:!0},{a:"node_out",c:"oG",i:["vec2"],g:!0},{a:"node_out",c:"oH",i:["vec2"],g:!0},{a:"node_out",c:"oI",i:["vec4"],g:!0},{a:"node_out",c:"oJ",i:["float"],g:!0},{a:"node_out",c:"oK",i:["vec4"],g:!0}],u:[{a:"txt",
b:"oB = oo ; oC = op ; oD = oq ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oE"],u:[{a:"txt",b:["oE","=","or",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oF"],u:[{a:"txt",b:["oF","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oH"],u:[{a:"txt",b:["oH","=","ov",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oG"],u:[{a:"txt",b:["oG","=","ow",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oI"],u:[{a:"txt",b:["oI","=","ox",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_oJ"],u:[{a:"txt",b:["oJ","=","oy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oK"],u:[{a:"txt",b:["oK","=","oz",";"]}]}]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",
c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE",
"POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; float oW = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oW *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oW *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{a:"txt",b:["oT","*=","oW",";"]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},
{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; pa = cross ( pe , B . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; pi = cross ( pe , B . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; pn = cross ( pe , B . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",
b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; pF = cross ( pe , B . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; pL = cross ( pe , B . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g != _0_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g != _0_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g != _0_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g != _0_0 ) { if ( qB < 1.0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( 1.0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = 0.0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"txt",b:"qR = qG + qO * qN * qI ; qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]},{a:"node",c:"LIGHTING_END",C:[],B:[{a:"node_in",c:"qS",i:["vec4"],g:!1},{a:"node_in",c:"qT",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = qS . rgb ; oA = qT ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void cK ( vec3 oo , vec3 op , vec3 oq , vec3 or , vec3 os , vec3 ot , vec3 ou , vec2 ov , vec2 ow , vec4 ox , float oy , vec4 oz , out vec3 E , out vec3 oA ) {".split(" ")},{a:"nodes_main"},{a:"txt",
b:["}"]}]}}]}]};a["include/math.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MATH_GLSLV",l:{a:"grp",f:[{a:"define",c:"MATH_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qU ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kQ ) { return kQ + 2.0 * cross ( q . xyz , cross ( q . xyz , kQ ) + q . w * kQ ) ; } vec4 kR ( in vec4 qV ) { return vec4 ( - qV . xyz , qV . w ) ; } vec4 qX ( in vec4 a , in vec4 b ) { vec4 qW ; qW . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qW . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qW . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qW . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qW ; } vec4 X ( in vec3 qY , in float qZ ) { vec4 qW ; qZ = qZ * 0.5 ; float s = sin ( qZ ) ; qW . x = s * qY [ 0 ] ; qW . y = s * qY [ 1 ] ; qW . z = s * qY [ 2 ] ; qW . w = cos ( qZ ) ; return qW ; } vec4 rd ( in vec3 bD , in vec3 q_ ) { vec4 qW ; float dz = dot ( q_ , bD ) ; vec3 rc = cross ( q_ , bD ) ; qW . xyz = rc . xyz ; qW . w = 1.0 + dz ; return normalize ( qW ) ; } vec3 rh ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf * re . w ; qW = T ( qV , qW ) ; qW += re . xyz ; return qW ; } vec3 ap ( mat3 ri , vec3 rf ) { vec3 qW = rf * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; qW += ri [ 0 ] ; return qW ; } vec3 rj ( vec4 re , vec4 qV , vec3 bD ) { vec3 qW = bD * re . w ; qW = T ( qV , qW ) ; return qW ; } vec3 _ ( mat3 ri , vec3 bD ) { vec3 qW = bD * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; return qW ; } vec3 rk ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf - re . xyz ; qW = T ( kR ( qV ) , qW ) ; qW /= re . w ; return qW ; } vec3 rl ( vec4 re , vec4 qV , vec3 bD ) { return T ( kR ( qV ) , bD ) / re . w ; } mat4 rm ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rn ( float bK ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 ro ( float bK ) { return mat4 ( cos ( bK ) , _0_0 , - sin ( bK ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bK ) , _0_0 , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rp ( float bK ) { return mat4 ( cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lX ( in au kQ ) { return au ( kQ . O , kQ . ao , normalize ( kQ . V ) , normalize ( kQ . aB ) , normalize ( kQ . W ) , normalize ( kQ . U ) , kQ . aQ ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 aC ( vec4 f ) { float fT = f . x ; float fU = f . y ; float fV = f . w ; vec3 rq ; rq . x = ( fT + fV ) / 2.0 ; rq . y = ( fU + fV ) / 2.0 ; rq . z = fV ; return rq ; }".split(" ")}]}}]},{a:"txt",b:"mat3 da ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 rs ; rs [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 3 ] = _0_0 ; rs [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 3 ] = _0_0 ; rs [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 3 ] = _0_0 ; rs [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rs [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rs [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rs [ 3 ] [ 3 ] = 1.0 ; return rs ; } mat3 aY ( in mat3 ri , in mat3 rt ) { mat3 qW ; vec3 rf = rt [ 0 ] ; vec4 re = vec4 ( ri [ 0 ] , ri [ 1 ] [ 0 ] ) ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW [ 0 ] = rh ( re , qV , rf ) ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] * rt [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = ri [ 1 ] [ 1 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 1 ] + ri [ 1 ] [ 2 ] * rt [ 2 ] [ 0 ] - ri [ 2 ] [ 0 ] * rt [ 1 ] [ 2 ] ; qW [ 1 ] [ 2 ] = ri [ 1 ] [ 2 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 2 ] + ri [ 2 ] [ 0 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 2 ] [ 0 ] ; qW [ 2 ] [ 0 ] = ri [ 2 ] [ 0 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 2 ] [ 0 ] + ri [ 1 ] [ 1 ] * rt [ 1 ] [ 2 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 1 ] ; qW [ 2 ] [ 1 ] = ri [ 2 ] [ 1 ] * rt [ 2 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 2 ] - ri [ 2 ] [ 0 ] * rt [ 2 ] [ 0 ] ; return qW ; } mat3 dd ( in vec4 qV , in mat3 ri ) { mat3 qW ; qW [ 0 ] = ri [ 0 ] ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = qV [ 0 ] ; qW [ 1 ] [ 2 ] = qV [ 1 ] ; qW [ 2 ] [ 0 ] = qV [ 2 ] ; qW [ 2 ] [ 1 ] = qV [ 3 ] ; return qW ; } vec4 R ( in vec4 ru ) { return normalize ( ru ) ; } vec4 R ( in vec4 ru , out float P , out float Q ) { vec4 qV = R ( ru ) ; P = length ( ru ) * M_PI ; Q = sign ( ru [ 3 ] ) ; return R ( ru ) ; }".split(" ")}]}}]}]};
a["include/mirror.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MIRROR_GLSLF",l:{a:"grp",f:[{a:"define",c:"MIRROR_GLSLF",b:[""]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:[""]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.1"]},{a:"txt",b:"float rv ( in vec3 D , vec3 eJ , float d_ , float fg ) { vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float r = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; return r ; } void cL ( inout vec3 rw , vec3 D , vec3 U , float rx , mat3 N ) { vec3 eJ = reflect ( - D , U ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( d_ != 0.0 ) r = rv ( D , eJ , d_ , fg ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_cube_reflection , eJ ) . xyz ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = vec3 ( 1.0 ) ; rx = 0.0 ;".split(" ")}]}}]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"bC ( eO . rgb ) ; rw = mix ( rw , eO , rx * r ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rU ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2},"USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 d_ = U ; vec3 ek = D ; vec3 ej = reflect ( - D , U ) ; float ec = sqrt ( rG ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rH = rD ( max ( dot ( d_ , ek ) , 0.0 ) , rC , ec ) ; vec3 rI = rH ; vec3 rJ = 1.0 - rI ; rJ *= 1.0 - rF ; vec3 bt = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 rK = bt * rw ; const float rL = 5.0 ; vec3 ei = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , ej , ec * rL ) . rgb ; vec2 rM = GLSL_TEXTURE ( u_brdf , vec2 ( max ( dot ( d_ , ek ) , 0.0 ) , ec ) ) . rg ; vec3 cJ = ei * ( rH * rM . x + rM . y ) ; vec3 rN = ( rJ * rK + cJ ) ; return rN ;".split(" ")}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float rO = max ( dot ( U , D ) , _0_0 ) ; float rP = rF + ( max ( _1_0 - rG , rF ) - rF ) * pow ( _1_0 - rO , 5.0 ) ; vec3 eJ = reflect ( - D , U ) ; float rQ = 2.0 / ( rG * rG ) - 2.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"txt",b:["float","rR","=","u_bsdf_cube_sky_dim",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float rR = float ( textureSize ( u_cube_reflection , 0 ) . x ) ;".split(" ")}]}}]},
{a:"txt",b:"float rS = log2 ( rR * sqrt ( 3.0 ) ) - _0_5 * log2 ( rQ + _1_0 ) ; vec3 eO = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , eJ , rS ) . xyz ; bC ( eO ) ; eO *= rE ; vec3 rT = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , U , 100.0 ) . xyz ; bC ( rT ) ; rT *= rw ; return rT + rP * eO ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ; bC ( eO ) ; eO *= rE ; return mix ( rw , eO , rF ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = rE ; return mix ( rw , eO , rF ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"HAS_REFRACT_TEXTURE",b:["0"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"IS_WORLD",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"mirror.glslf"},{a:"include",F:"shadow.glslf"},{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","rV",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"vec3 rY ( in vec3 rW , in float rX ) { vec3 eX = vec3 ( _0_0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"eX = cN ( l , rW . xy * rX ) ;".split(" ")}]}},
{a:"elif",j:["HAS_REFRACT_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"eX = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"txt",b:["return","eX",";","}"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float sd ( vec3 sa , vec3 sb , float sc ) { float du = abs ( dot ( sa , sb ) ) ; float g = sc * sc - _1_0 + du * du ; float dY ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cB = ( g - du ) / ( g + du ) ; float hO = ( du * ( g + du ) - _1_0 ) / ( du * ( g - du ) + _1_0 ) ; dY = _0_5 * cB * cB * ( _1_0 + hO * hO ) ; } else { dY = _1_0 ; } return dY ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1},{a:"node_param",c:"se",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sT = rZ ( se ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * rV - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",
C:[],B:[{a:"node_out",c:"sV",i:["vec3"],g:!1},{a:"node_param",c:"sf",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sV = max ( vec3 ( _0_0 ) , sf ) ; bC ( sV ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1},{a:"node_param",c:"sg",i:["GLSL_IN","float"],g:!1}],u:[{a:"txt",b:"sW = max ( _0_0 , sg ) ; bC ( sW ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1},{a:"node_param",c:"sh",
i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sX = max ( _0_0 , sh [ 0 ] ) ; sY = max ( _0_0 , sh [ 1 ] ) ; bC ( sX ) ; bC ( sY ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1},{a:"node_param",c:"si",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sZ = max ( _0_0 , si [ 0 ] ) ; s_ = max ( _0_0 , si [ 1 ] ) ; ta = max ( _0_0 , si [ 2 ] ) ; bC ( sZ ) ; bC ( s_ ) ; bC ( ta ) ;".split(" ")}]},
{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_BF",C:[],B:[{a:"node_out",c:"te",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",
b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg = sD . xyz ;".split(" ")}]},{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:["th","=","os",";"]}]},{a:"node",c:"GEOMETRY_IN",C:[],B:[{a:"node_out",c:"ti",i:["vec3"],g:!1}],u:[{a:"txt",b:["ti","=","ou",";"]}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},
{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],
g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["LAMP_INDEX",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = h - tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( - tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:"tF = vec3 ( _0_0 ) ; tG = 0.0 ;".split(" ")}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},
{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],
g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",
c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",
c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"float ux = clamp ( up [ 1 ] , _0_0 , _1_0 ) ; float rF = up [ 2 ] ; uw = um . rgb ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PBR",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rU ( uq , ur , ou , uo , rF , ux , mat3 ( _0_0 ) ) ;".split(" ")}]},
{a:"node_elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rU ( uq , ur , ou , uo , rF , u_view_tsr_frag ) ;".split(" ")}]}]},{a:"txt",b:"uw += un ; uw = mix ( uw , us , ut ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",
b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) / M_PI ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ; vk = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd = vec3 ( _0_0 ) ; ve = _0_0 ; vh = vec3 ( _0_0 ) ; vj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},
{a:"node",c:"BSDF_GLOSSY",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",
c:"vB",i:["float"],g:!1},{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ; vD = _1_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu = vec3 ( _0_0 ) ; vv = _0_0 ; vA = vec3 ( _0_0 ) ; vC = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},
{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],
g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL = vec3 ( _0_0 ) ; vM = _0_0 ; vN = vec3 ( _0_0 ) ; vO = _0_0 ; vR = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",
c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",
c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],
g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],
g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wI = _1_0 ; wE = ot ; wu ; wv = vec3 ( _0_0 ) ; wA = _0_0 ; wB = vec3 ( _0_0 ) ; wC = _0_0 ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",
C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},
{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[{a:"node_var",c:"INVERT",b:["0"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",
c:"wW",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = wU ; float gH = wT ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["INVERT"],u:[{a:"txt",b:["aM","=","-","_1_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","U","=","wW",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","U","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( wV ) * w_ + dFdy ( wV ) * xa ; gH = max ( gH , _0_0 ) ; wX = normalize ( xb * U - aM * sign ( dv ) * xc ) ; wX = normalize ( gH * wX + ( _1_0 - gH ) * U ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wX","=","U",";"]}]}]}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = 0.1 ; vec3 U = ot ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( xd ) * w_ + dFdy ( xd ) * xa ; xe = normalize ( xb * U - aM * sign ( dv ) * xc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["xe","=","U",";"]}]}]}]},{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",
b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",
{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},
{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",
c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},
{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},
{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},
{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},
{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],
g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",
C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",
c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],
g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_param",c:"sk",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( sk ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( sk , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1},{a:"node_param",c:"sl",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",
b:"zG = vec3 ( sl , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["zI","=","rV",";"]}]},{a:"node_else",u:[{a:"txt",b:["zI","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",
j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:"zJ = ap ( u_model_tsr_inverse , os ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["zJ","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK . xy = sD . xy ; zK . z = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL . xy = l . xy / l . z ; zL . z = _0_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",
c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM = reflect ( - ou , ot ) ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1},{a:"node_param",c:"sm",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( sm , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",
c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1}],u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[{a:"node_var",c:"USE_LOCATION_OUT",
b:["0"]},{a:"node_var",c:"USE_OBJ_IND_OUT",b:["0"]},{a:"node_var",c:"USE_MAT_IND_OUT",b:["0"]},{a:"node_var",c:"USE_RANDOM_OUT",b:["0"]}],B:[{a:"node_out",c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_LOCATION_OUT"],u:[{a:"txt",b:"zZ = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OBJ_IND_OUT"],u:[{a:"txt",b:"z_ = u_obj_info . r ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MAT_IND_OUT"],u:[{a:"txt",b:"Aa = u_obj_info . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_RANDOM_OUT"],u:[{a:"txt",b:"Ab = u_obj_info . b ;".split(" ")}]}]}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LAYER_WEIGHT",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"Af",i:["float"],g:!1},{a:"node_in",c:"Ag",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:"vec3 cr = normalize ( Ag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ah"],u:[{a:"txt",b:"float sc = max ( _1_0 - Af , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"Ah = sd ( Aj , cr , sc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["Ah","=","_0_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ai"],u:[{a:"txt",b:"Ai = abs ( dot ( Aj , cr ) ) ; float ew = Af ; if ( ew != _0_5 ) { ew = clamp ( ew , _0_0 , 0.99999 ) ; ew = ( ew < _0_5 ) ? 2.0 * ew : _0_5 / ( _1_0 - ew ) ; Ai = pow ( Ai , ew ) ; } Ai = _1_0 - Ai ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["Ai","=","_0_0",";"]}]}]}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},
{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1},{a:"node_out",c:"Au",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Au = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",
c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",
b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dm",i:["float"],g:!1},{a:"node_in",c:"Dn",i:["vec3"],g:!1},{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dm , _0_0 , _1_0 ) ; Dp = mix ( Dn , Do , zD ) ;".split(" ")}]},{a:"node",c:"ADD_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dq",i:["float"],g:!1},{a:"node_in",c:"Dr",i:["vec3"],g:!1},{a:"node_in",
c:"Ds",i:["vec3"],g:!1},{a:"node_out",c:"Dt",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dq , _0_0 , _1_0 ) ; Dt = mix ( Dr , Dr + Ds , zD ) ;".split(" ")}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"OUTPUT_WORLD_SURFACE",C:[],B:[{a:"node_in",c:"Dx",
i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dx ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},
{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!1},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = cC ( DF ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},
{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],
u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"cL ( DR , ou , DN , DO , u_view_tsr_frag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"cL ( DR , ou , DN , DO , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",
c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],
u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oT *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],
g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pa",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( sb , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pi",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",
b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( sb , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pn",";"]},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( sb , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pF",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},
{a:"txt",b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( sb , pD ) + pG ; float pv = max ( dot ( sb , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],
g:!1},{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pL",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( sb , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qB < _1_0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( _1_0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT_CUBE",C:[],B:[{a:"node_in",c:"EC",i:["vec3"],g:!1},
{a:"node_out",c:"ED",i:["vec3"],g:!0},{a:"node_out",c:"EE",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec3 EF = vec3 ( EC . x , EC . y , EC . z ) ; vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , EF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = AH . xyz ; bC ( ED ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = AH . w ;".split(" ")}]}]}]},
{a:"node",c:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EG ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3",
"EI","=","ot",";"]}]}]},{a:"txt",b:"float dC = - atan ( EI . y , EI . x ) / ( 2.0 * M_PI ) + _0_5 ; float kQ = atan ( EI . z , sqrt ( EI . x * EI . x + EI . y * EI . y ) ) / M_PI + _0_5 ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dC , kQ ) ) ; EH = AH . xyz ; bC ( EH ) ;".split(" ")}]},{a:"node",c:"TEXTURE_ENVIRONMENT_MIRROR_BALL",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EJ",i:["vec3"],g:!1},{a:"node_out",c:"EK",i:["vec3"],g:!1},
{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EJ ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","EI","=","ot",";"]}]}]},{a:"txt",b:"EI . y -= _1_0 ; float EL = 2.0 * sqrt ( max ( - _0_5 * EI . y , _0_0 ) ) ; if ( EL > _0_0 ) EI /= EL ; float dC = _0_5 * ( EI . x + _1_0 ) ; float kQ = _0_5 * ( EI . z + _1_0 ) ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dC , kQ ) ) ; EK = AH . xyz ; bC ( EK ) ;".split(" ")}]},
{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",c:"NON_COLOR",b:["0"]},{a:"node_var",c:"CONVERT_UV",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],
g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EM . xy ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EN . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"node_cond",f:[{a:"node_if",
j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EO . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",
b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EP . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",
o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",
i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],
u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],
u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",
i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",
i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ; FC /= FD ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"FC = normalize ( FC ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",
i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"FRESNEL",C:[{a:"node_var",c:"USE_FRESNEL_NORMAL",b:["0"]}],B:[{a:"node_in",c:"FI",i:["float"],g:!1},{a:"node_in",c:"FJ",i:["vec3"],g:!1},{a:"node_out",c:"FK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_FRESNEL_NORMAL"],u:[{a:"txt",b:"vec3 cr = normalize ( FJ ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"txt",b:"float sc = max ( FI , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"FK = sd ( Aj , cr , sc ) ;".split(" ")}]},{a:"node",c:"BACKGROUND",C:[],B:[{a:"node_in",c:"FL",i:["vec3"],g:!1},{a:"node_in",c:"FM",i:["float"],g:!1},{a:"node_out",c:"FN",i:["vec3"],g:!1}],u:[{a:"txt",b:"FN = FL * FM ;".split(" ")}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},
{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"FS = reflect ( - ou . xyz , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],
u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gb = rY ( F_ , Ga ) ;".split(" ")}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",
c:"Ge",i:["float"],g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",
c:"B4W_SMOOTHSTEP",C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",
i:["float"],g:!1}],u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["IS_WORLD"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sv = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_GL"],l:{a:"grp",f:[{a:"txt",b:"vec3 os = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEX_COORD_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","ou",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","ou",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],
l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 sB = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , sB , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")}]}}]},
{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLV",b:[""]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2},"PARTICLE_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 rV ;".split(" ")}]}}]},{a:"node",c:"TEX_COORD_UV",
C:[],B:[{a:"node_param",c:"node_TEX_COORD_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sl",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sl","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_param",c:"node_UV_MERGED_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sk",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sk","=","node_UV_MERGED_var_a_uv",";"]}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_param",c:"node_UVMAP_var_a_uv",i:["GLSL_IN","vec2"],g:!1},
{a:"node_param",c:"sm",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sm","=","node_UVMAP_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_param",c:"node_GEOMETRY_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"se",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["se","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gu",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",
b:["Gu","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC1_var_a_vertex_color",i:["GLSL_IN","float"],g:!1},{a:"node_param",c:"Gv",i:["GLSL_OUT","float"],g:!1}],u:[{a:"txt",b:["Gv","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC2_var_a_vertex_color",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"Gw",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["Gw","=","node_GEOMETRY_VC2_var_a_vertex_color",
";"]}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC3_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gx",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",b:["Gx","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{a:"nodes_global"},{a:"txt",b:["void","J","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["rV","=","a_orco_tex_coord",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};
a["include/pack.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PACK_GLSLF",l:{a:"grp",f:[{a:"define",c:"PACK_GLSLF",b:[""]},{a:"txt",b:"vec4 er ( const in float il ) { vec4 fq = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 Gy = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( il * fq ) ; jB -= jB . xxyz * Gy ; return jB ; } float cQ ( const in vec4 Gz ) { float eq ; vec4 fq = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; eq = dot ( Gz , fq ) ; return eq ; } vec4 er ( const in vec2 rf ) { vec2 fq = vec2 ( _255_0 , _1_0 ) ; vec2 Gy = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( rf . xxyy * fq . xyxy ) ; jB -= jB . xxzz * Gy . xyxy ; if ( rf . r == _1_0 ) jB . rg = vec2 ( _0_0 , _1_0 ) ; if ( rf . g == _1_0 ) jB . ba = vec2 ( _0_0 , _1_0 ) ; return jB ; } vec2 jg ( const in vec4 GA ) { vec2 rf ; vec2 fq = vec2 ( _1_0 / _255_0 , _1_0 ) ; rf . r = dot ( GA . rg , fq ) ; rf . g = dot ( GA . ba , fq ) ; return rf ; }".split(" ")}]}}]}]};
a["include/particles.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"include",F:"math.glslv"},{a:"txt",b:"struct cY { float df ; vec3 O ; float L ; vec3 aQ ; float bK ; vec3 dl ; vec3 dm ; float dn ; } ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"void GE ( inout vec3 aQ , float GB , vec4 kb , vec4 bv ) { float GC = bv . x - kb . x ; float GD = ( GB - kb . x ) / GC ; aQ = mix ( aQ , bv . yzw , clamp ( GD , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 GH ( float t , float GF , vec4 GG [ COLOR_RAMP_LENGTH ] ) { float GB = t / GF ; vec3 aQ = GG [ 0 ] . yzw ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",1,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 0 ] , GG [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 1 ] , GG [ 2 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 2 ] , GG [ 3 ] ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}"]}]}}]},{a:"txt",b:"float GN ( float t , float GF , float GI , float GJ ) { float GK = max ( 0.01 , min ( GF , GI ) ) ; float GL = max ( 0.01 , min ( GF , GJ ) ) ; float GM = GF - GL ; float L = clamp ( t / GK , 0.0 , 1.0 ) - step ( GM , t ) * ( t - GM ) / GL ; return L ; } cY cZ ( ) { cY sp ; float t ; float GF = a_p_data [ 0 ] ; float GO = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - GO ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - GO ; } if ( t < 0.0 || t >= GF ) { sp . df = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= GF ) ) { vec4 S = R ( a_tbn ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WORLD_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 fn = a_position ; vec3 sb = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fn = ap ( u_model_tsr , a_position ) ; vec3 sb = _ ( u_model_tsr , bW ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 GP = u_p_nfactor * sb ; GP += a_p_vels . xyz ; GP . z -= u_p_gravity * t / 2.0 ; float GQ = max ( u_p_mass , EPSILON ) ; GP += ( u_p_wind_fac * u_wind / GQ ) * t / 2.0 ; sp . dn = t ; sp . dl = GP ; sp . dm = bW * a_p_vels . w ; sp . O = fn + GP * t ; sp . bK = a_p_vels . w * t ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:"sp . df = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . df = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"sp . aQ = GH ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"sp . L = GN ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};
a["include/particles_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"include",F:"environment.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1}],u:[{a:"txt",b:"sT = rZ ( A ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_out",c:"sV",
i:["vec3"],g:!1}],u:[{a:"txt",b:"sV = vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1}],u:[{a:"txt",b:["sW","=","_1_0",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1}],u:[{a:"txt",b:"sX = _1_0 ; sY = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1}],
u:[{a:"txt",b:"sZ = _1_0 ; s_ = _1_0 ; ta = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg [ 0 ] = sD [ 0 ] ; tg [ 1 ] = sD [ 1 ] ; tg [ 2 ] = sD [ 2 ] ;".split(" ")}]},
{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:"th = vec3 ( os . r , os . g , os . b ) ;".split(" ")}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},
{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = - h + tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",
j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",
c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",
C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",
c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; metalness_out = tU ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},
{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"uw = um . rgb + un ; uw = mix ( uw , us , ut ) ; I = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",
c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd ; ve ; vh ; vj ; vk ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},{a:"node",c:"BSDF_GLOSSY",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",c:"vB",i:["float"],g:!1},
{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu ; vv ; vA ; vC ; vD ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",
c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},
{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL ; vM ; vN ; vO ; vR ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},
{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},
{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},
{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],
g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wE = ot ; wu ; wv ; wA ; wB ; wC ; wH ; wI ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",
c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],
g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[],B:[{a:"node_in",c:"GV",i:["float"],g:!1},{a:"node_in",c:"GW",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",c:"GX",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"wX = GX ; GV ; GW ; wV ;".split(" ")}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"xe = ot ; xd ;".split(" ")}]},
{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],
u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},
{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",
j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_IMAGE",C:[],B:[{a:"node_in",c:"GY",i:["vec3"],g:!1},{a:"node_out",c:"GZ",i:["vec3"],g:!1},{a:"node_out",c:"G_",i:["float"],g:!1}],u:[{a:"txt",b:"GZ [ 0 ] = GZ [ 1 ] = GZ [ 2 ] = _0_0 ; G_ = _1_0 ; GY ;".split(" ")}]},{a:"node",c:"TEX_ENVIRONMENT",C:[],B:[{a:"node_in",c:"Ha",i:["vec3"],g:!1},{a:"node_out",c:"Hb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Hb [ 0 ] = Hb [ 1 ] = Hb [ 2 ] = _0_0 ; Ha ;".split(" ")}]},
{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},
{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],
g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],
g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],
g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},
{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},
{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",
c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],
g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},
{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( A ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1}],u:[{a:"txt",b:"zG = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],
g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"txt",b:"zI = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",b:"zJ [ 0 ] = zJ [ 1 ] = zJ [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK [ 0 ] = sD [ 0 ] ; zK [ 1 ] = sD [ 1 ] ; zK [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",
C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL [ 0 ] = zL [ 1 ] = zL [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM [ 0 ] = zM [ 1 ] = zM [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",
c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1},{a:"node_param",c:"GR",i:["GLSL_IN","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_IN","vec3"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PARTICLE_BATCH"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zO"],u:[{a:"txt",b:"zO = GR [ 0 ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zP"],u:[{a:"txt",b:"zP = GR [ 1 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zQ"],u:[{a:"txt",b:"zQ = GR [ 2 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zR"],u:[{a:"txt",b:["zR","=","GS",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zS"],u:[{a:"txt",b:"zS = GR [ 3 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zT"],u:[{a:"txt",b:["zT","=","GT",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zU"],
u:[{a:"txt",b:["zU","=","GU",";"]}]}]}]},{a:"node_else",u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]}]}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[],B:[{a:"node_out",
c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"txt",b:"z_ = _0_0 ; Aa = _0_0 ; Ab = _0_0 ; zZ = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",
c:"LAYER_WEIGHT",C:[],B:[{a:"node_in",c:"Hc",i:["float"],g:!1},{a:"node_in",c:"Hd",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"txt",b:"Ah = Ai = _0_0 ; Hd ; Hc ;".split(" ")}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},
{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Aq = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",
C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["0.0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",
c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",
c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",
c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!0},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",
o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = vec4 ( _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},
{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",
i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"txt",b:["DO",";"]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",
b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]}]},
{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , k . xyz ) ; pa = cross ( pe , k . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],
g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , k . xyz ) ; pi = cross ( pe , k . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",
c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , k . xyz ) ; pn = cross ( pe , k . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , k . xyz ) ; pF = cross ( pe , k . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , k . xyz ) ; pL = cross ( pe , k . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( k . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( k . xyz , pW ) ; pv = dot ( k . xyz , ou ) ; qj = dot ( k . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , k . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qz [ 0 ] < _1_0 || qz [ 1 ] == _0_0 ) qA = _0_0 ; else { if ( qz [ 1 ] < 100.0 ) qz [ 1 ] = sqrt ( _1_0 / qz [ 1 ] ) ; else qz [ 1 ] = 10.0 / qz [ 1 ] ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( k . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qz [ 0 ] , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qz [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT",C:[],B:[{a:"node_in",c:"He",i:["vec3"],g:!1},{a:"node_out",
c:"Hf",i:["vec3"],g:!0},{a:"node_out",c:"Hg",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , He ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hf"],u:[{a:"txt",b:"Hf = AH . xyz ; bC ( Hf ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hg"],u:[{a:"txt",b:"Hg = AH . w ;".split(" ")}]}]}]},{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",
c:"NON_COLOR",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],
g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",
b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},
{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",
c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",
b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},
{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",
i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",
i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 Hh = - ou . xyz ; FS = reflect ( Hh , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",
c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:["Gb","=","F_",";"]}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",c:"Ge",i:["float"],
g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",c:"B4W_SMOOTHSTEP",
C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",i:["float"],g:!1}],
u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},{a:"cond",f:[{a:"if",
j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/particles_nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLV",b:[""]},{a:"node",c:"TEX_COORD_UV",C:[],
B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UVMAP",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"PARTICLE_INFO",C:[{a:"node_var",c:"PART_INFO_SIZE",b:["0"]},{a:"node_var",c:"PART_INFO_AGE",b:["0"]},{a:"node_var",c:"PART_INFO_LT",b:["0"]},{a:"node_var",c:"PART_INFO_LOC",b:["0"]},{a:"node_var",c:"PART_INFO_IND",b:["0"]},{a:"node_var",c:"PART_INFO_VEL",
b:["0"]},{a:"node_var",c:"PART_INFO_A_VEL",b:["0"]}],B:[{a:"node_param",c:"GR",i:["GLSL_OUT","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"node_PARTICLE_INFO_var_a_p_indices",i:["GLSL_IN","float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_SIZE"],u:[{a:"txt",b:"GR [ 3 ] = Hm ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_AGE"],u:[{a:"txt",
b:"GR [ 1 ] = Hl ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LT"],u:[{a:"txt",b:"GR [ 2 ] = Ho ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LOC"],u:[{a:"txt",b:["GS","=","Hi",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_IND"],u:[{a:"txt",b:"GR [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_VEL"],u:[{a:"txt",b:["GT","=","Hj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_A_VEL"],u:[{a:"txt",
b:["GU","=","Hk",";"]}]}]}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 Hi , in vec3 Hj , in vec3 Hk , in float Hl , in float Hm , in vec2 Hn , in float Ho ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","Hn",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/precision_statement.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PRECISION_STATEMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"PRECISION_STATEMENT_GLSLF",
b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","float",";"]}]}}]}]};a["include/procedural.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PROCEDURAL_GLSLF",l:{a:"grp",f:[{a:"define",c:"PROCEDURAL_GLSLF",b:[""]},{a:"txt",b:"vec4 Hp ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Hp ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Hp ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Hq ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Hr ( vec4 x ) { return Hp ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},
{a:"define",c:"K",b:["0.142857142857"]},{a:"define",c:"K2",b:["0.0714285714285"]},{a:"define",c:"JITTER",b:["0.7"]},{a:"txt",b:"vec2 fG ( vec2 Hs ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 dz = Hz * Hz + HA * HA ;".split(" ")},
{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"txt",b:"dz . xy = min ( dz . xy , dz . zw ) ; dz . x = min ( dz . x , dz . y ) ; return dz . xx ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dz . xy = ( dz . x < dz . y ) ? dz . xy : dz . yx ; dz . xz = ( dz . x < dz . z ) ? dz . xz : dz . zx ; dz . xw = ( dz . x < dz . w ) ? dz . xw : dz . wx ; dz . y = min ( dz . y , dz . z ) ; dz . y = min ( dz . y , dz . w ) ; return sqrt ( dz . xy ) ;".split(" ")}]}}]},{a:"txt",b:"} vec3 kX ( vec2 Hs , float HB ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 HC = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HD = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HE = Hz * Hz + HA * HA ; HC . xy = min ( HC . xy , HC . zw ) ; HC . x = min ( HC . x , HC . y ) ; HD . xy = min ( HD . xy , HD . zw ) ; HD . x = min ( HD . x , HD . y ) ; HE . xy = min ( HE . xy , HE . zw ) ; HE . x = min ( HE . x , HE . y ) ; return vec3 ( HC . x , HD . x , HE . x ) ; } vec3 HF ( vec3 x ) { return Hp ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fv ( vec2 kQ ) { const vec4 HG = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cl = floor ( kQ + dot ( kQ , HG . yy ) ) ; vec2 HH = kQ - cl + dot ( cl , HG . xx ) ; vec2 HI ; HI = ( HH . x > HH . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 HJ = HH . xyxy + HG . xxzz ; HJ . xy -= HI ; cl = Hp ( cl ) ; vec3 p = HF ( HF ( cl . y + vec3 ( _0_0 , HI . y , _1_0 ) ) + cl . x + vec3 ( _0_0 , HI . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( HH , HH ) , dot ( HJ . xy , HJ . xy ) , dot ( HJ . zw , HJ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * HG . www ) - _1_0 ; vec3 cj = abs ( x ) - 0.5 ; vec3 Hx = floor ( x + 0.5 ) ; vec3 HK = x - Hx ; aA *= 1.79284291400159 - 0.85373472095314 * ( HK * HK + cj * cj ) ; vec3 g ; g . x = HK . x * HH . x + cj . x * HH . y ; g . yz = HK . yz * HJ . xz + cj . yz * HJ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 HN ( vec2 fW ) { float HC = dot ( fW , vec2 ( 12.9898 , 78.233 ) ) ; float HD = dot ( fW , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float HL = fract ( sin ( HC ) * 43758.5453 ) * 2.0 - _1_0 ; float HM = fract ( sin ( HD ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( HL , HM ) ; } float lg ( vec2 HO ) { return fract ( sin ( dot ( HO , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
a["include/refraction.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"REFRACTION_GLSLF",l:{a:"grp",f:[{a:"define",c:"REFRACTION_GLSLF",b:[""]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"float eS ( in float cR , inout vec2 eR , in vec2 eI ) { vec4 HP = GLSL_TEXTURE ( u_scene_depth , eR ) ; float eT = cQ ( HP ) ; if ( eT < m ) { eR = eI ; return cR ; } else { return eT ; } return cR ; }".split(" ")}]}}]},
{a:"txt",b:"vec3 cN ( in vec3 rq , in vec2 HQ ) { vec2 eI = rq . xy / rq . z ; vec2 eR = eI + HQ ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , rq ) ; float cR = cQ ( cP ) ; eS ( cR , eR , eI ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ; return eX ; }".split(" ")}]}}]}]}}]}]};a["include/scale_texcoord.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SCALE_TEXCOORD_GLSLV",
l:{a:"grp",f:[{a:"define",c:"SCALE_TEXCOORD_GLSLV",b:[""]},{a:"txt",b:"vec2 az ( vec2 b_ , vec3 HR ) { return ( b_ + 0.5 ) * HR . xy - 0.5 ; }".split(" ")}]}}]}]};a["include/shadow.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLF",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLF",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"CSM_FADE_LAST_CASCADE",b:["0"]},{a:"var",c:"CSM_BLEND_BETWEEN_CASCADES",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"COMPARED_MODE",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"procedural.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float HS = 0.1 ; const float HT = 0.1 ; const float HU = - 0.01 ; const float HV = 0.05 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","POISSON_X_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 HW = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 HX = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 HY = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 HZ = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 H_ = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Ia = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ib = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Ic = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{a:"elif",j:["POISSON_DISK_NUM","POISSON_X_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 HX = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 HY = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 HZ = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 H_ = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Ia = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ib = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Ic = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{a:"elif",j:["POISSON_DISK_NUM",
"POISSON_X_4",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.51808083 , 0.0 ) ; vec2 HX = vec2 ( 0.5741194 , 0.0 ) ; vec2 HY = vec2 ( - 0.68048857 , 0.0 ) ; vec2 HZ = vec2 ( 0.82934988 , 0.0 ) ; vec2 H_ = vec2 ( 0.70009436 , 0.0 ) ; vec2 Ia = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ib = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Ic = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"bool Ie ( vec2 iK , float Id ) { return all ( lessThanEqual ( iK , vec2 ( 1.0 + Id ) ) ) && all ( greaterThanEqual ( iK , vec2 ( 0.0 - Id ) ) ) ; } float Il ( float If , float Ig , mat2 Ih , vec3 Ii , float Ij , PRECISION GLSL_SMPLR2D_SHDW Ik ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iK , fI ; fI . x = If ; fI . y = Ig ; fI = Ih * fI ; iK = Ii . xy + fI * Ij / SHADOW_TEX_RES ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iK = Ii . xy ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"if ( ! Ie ( iK , HU ) ) return 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",
f:[{a:"txt",b:"float eq = cQ ( GLSL_TEXTURE ( Ik , iK ) ) ; return step ( Ii . z , eq ) ;".split(" ")}]}},{a:"elif",j:["COMPARED_MODE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE ( Ik , vec3 ( iK , Ii . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return step ( Ii . z , GLSL_TEXTURE ( Ik , iK ) . r ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iq ( vec3 Ii , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij ) { float Im = 0.0 ; Ii . z = clamp ( Ii . z , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ii . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Im += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ii , Ij , Ik ) ; } return clamp ( Im / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ii , Ij , Ik ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iz ( vec3 Ir , PRECISION GLSL_SMPLR2D_SHDW Is , vec3 It , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float aL ) { float Ix , Iy ; Ir . z = clamp ( Ir . z , 0.0 , 1.0 ) ; It . z = clamp ( It . z , 0.0 , 1.0 ) ; Ix = 0.0 ; Iy = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ir . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Ix += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ir , Iv , Is ) ; } for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Iy += Il ( HW [ cl ] , H_ [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HX [ cl ] , Ia [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HY [ cl ] , Ib [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HZ [ cl ] , Ic [ cl ] , Ih , It , Iw , Iu ) ; } Ix = mix ( Ix , Iy , aL ) ; Ix /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ix += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ir , Iv , Is ) ; Iy += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , It , Iw , Iu ) ; Ix = mix ( Ix , Iy , aL ) ;".split(" ")}]}}]},{a:"txt",b:"return clamp ( Ix , 0.0 , 1.0 ) ; } float IA ( vec2 iK ) { float a = min ( iK . x , iK . y ) ; float b = min ( 1.0 - iK . x , 1.0 - iK . y ) ; return min ( a , b ) ; } float IC ( float uP , float IB ) { if ( IB >= 0.0 && IB <= HT ) uP = ( uP - 1.0 ) / HT * IB + 1.0 ; return uP ; } float IH ( vec3 ID , vec3 IE , PRECISION GLSL_SMPLR2D_SHDW Is , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float IF , float eq ) { float uP ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_BLEND_BETWEEN_CASCADES"],l:{a:"grp",f:[{a:"txt",b:"float IB = IA ( ID . xy ) ; if ( - eq > IF && IB >= 0.0 && IB <= HS && Ie ( IE . xy , 0.0 ) ) { float IG = 1.0 - IB / HS ; uP = Iz ( ID , Is , IE , Iu , Iv , Iw , IG ) ; } else".split(" ")}]}}]},{a:"txt",b:"uP = Iq ( ID , Is , Iv ) ; return uP ; } float IJ ( vec3 II , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij , float IF , float eq ) { float uP = Iq ( II , Ik , Ij ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_FADE_LAST_CASCADE"],
l:{a:"grp",f:[{a:"txt",b:"if ( - eq > IF ) { float IB = IA ( II . xy ) ; uP = IC ( uP , IB ) ; }".split(" ")}]}}]},{a:"txt",b:"return uP ; } vec4 es ( float eq ) { float uP = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","IK","=","u_pcf_blur_radii",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 IK = vec4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 Ir = n . xyz / n . w ; if ( n . w < 0.0 ) Ir . z = 0.0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 It = o . xyz / o . w ; if ( o . w < 0.0 ) It . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IL = u . xyz / u . w ; if ( u . w < 0.0 ) IL . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IM = v . xyz / v . w ; if ( v . w < 0.0 ) IM . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , 0.0 ) ) { uP = IH ( Ir , It , u_shadow_map0 , u_shadow_map1 , IK [ 0 ] , IK [ 1 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , HV ) ) { uP = IJ ( Ir , u_shadow_map0 , IK [ 0 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( It . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( It , IL , u_shadow_map1 , u_shadow_map2 , IK [ 1 ] , IK [ 2 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( It , u_shadow_map1 , IK [ 1 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",
b:"else { if ( Ie ( IL . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( IL , IM , u_shadow_map2 , u_shadow_map3 , IK [ 2 ] , IK [ 3 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( IL , u_shadow_map2 , IK [ 2 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( IM . xy , 0.0 ) ) uP = IJ ( IM , u_shadow_map3 , IK [ 3 ] , u_csm_center_dists [ 3 ] , eq ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IN = Iq ( It , u_shadow_map1 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IN","=","0.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IO = Iq ( IL , u_shadow_map2 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IO","=","0.0",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IP = Iq ( IM , u_shadow_map3 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IP","=","1.0",";"]}]}}]},{a:"txt",b:"return vec4 ( uP , IN , IO , IP ) ; }".split(" ")}]}}]},{a:"txt",b:"vec4 cC ( inout vec3 cy ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"l_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cy *= Im . a ;".split(" ")}]}}]},{a:"txt",b:["return","Im",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = es ( i . z ) ; return Im ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/shadow.glslv"]=
{a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLV",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLV",b:[""]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE",
"SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"txt",b:"vec4 IT ( mat4 IQ , vec4 IR , mat4 IS ) { vec2 eu = ( IQ * IS [ 3 ] ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; vec4 Ii = IQ * IR ; Ii . xy += eu ; Ii . xyz = 0.5 * ( Ii . xyz + Ii . w ) ; return Ii ; } void bZ ( vec3 fn , vec3 IU ) {".split(" ")},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; n = IT ( u_p_light_matrix0 , IV , IS ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},
{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",
b:"o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/skin.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKIN_GLSLV",l:{a:"grp",f:[{a:"define",c:"SKIN_GLSLV",b:[""]},{a:"var",c:"DISABLE_TANGENT_SKINNING",
b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"define",c:"SKIN_SLERP",b:["0"]},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 Jc ( in vec4 qV , in vec4 IW , in float IX ) { float IY = qV [ 0 ] * IW [ 0 ] + qV [ 1 ] * IW [ 1 ] + qV [ 2 ] * IW [ 2 ] + qV [ 3 ] * IW [ 3 ] ; if ( IY < 0.0 ) { IW *= - 1.0 ; IY = - IY ; } if ( abs ( IY ) >= 1.0 ) return qV ; float IZ = acos ( IY ) ; float I_ = sqrt ( 1.0 - IY * IY ) ; if ( abs ( I_ ) < 0.001 ) return vec4 ( qV * 0.5 + IW * 0.5 ) ; float Ja = sin ( ( 1.0 - IX ) * IZ ) / I_ ; float Jb = sin ( IX * IZ ) / I_ ; return qV * Ja + IW * Jb ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Je , in vec4 Jf , in vec4 Jg , in float Jh ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec4 Jj = mix ( Jf , Jg , Jh ) ; vec3 Jk = T ( qV , Ji ) ; vec3 Jl = Jk * Jj . w + Jj . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jm = T ( Jd , Ji ) ; vec3 Jn = T ( Je , Ji ) ; vec3 Jo = Jm * Jf . w + Jf . xyz ; vec3 Jp = Jn * Jg . w + Jg . xyz ; vec3 Jl = mix ( Jo , Jp , Jh ) ;".split(" ")}]}}]},
{a:"txt",b:"return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd , in vec4 Je , in float Jh ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec3 Jt = T ( qV , Js ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Ju = T ( Jd , Js ) ; vec3 Jv = T ( Je , Js ) ; vec3 Jt = mix ( Ju , Jv , Jh ) ;".split(" ")}]}}]},{a:"txt",b:"return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Jf ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 Jk = T ( Jd , Ji ) ; vec3 Jl = Jk * Jf . w + Jf . xyz ; return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ; vec3 Jt = T ( Jd , Js ) ; return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}}]},{a:"txt",b:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:["float","Jx","=","u_frame_factor",";"]}]}}]},{a:"txt",b:"if ( a_influence . y > 0.0 ) { vec3 jD = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jy = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jz = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JA = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 JB = a_influence ; for ( int cl = 0 ; cl < 4 ; cl ++ ) { int JC = int ( JB [ cl ] ) ; float JD = fract ( JB [ cl ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"Jy += JD * Jw ( V , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; JA += JD * Jw ( U , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jD += JD * Jq ( O , u_quatsb [ JC ] , u_transb [ JC ] ) ; JA += JD * Jw ( U , u_quatsb [ JC ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Jy += JD * Jw ( V , u_quatsb [ JC ] ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] ) ;".split(" ")}]}}]}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"int JC = int ( JB [ 0 ] ) ; float JD = fract ( JB [ 0 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 1 ] ) ; JD = fract ( JB [ 1 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 2 ] ) ; JD = fract ( JB [ 2 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 3 ] ) ; JD = fract ( JB [ 3 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ;".split(" ")}]}}]},
{a:"txt",b:"O = jD ; U = JA ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jy ; W = Jz ;".split(" ")}]}}]},{a:"txt",b:"} if ( ! ( a_influence . y > 0.0 ) ) { int JE = int ( a_influence [ 0 ] - 1.0 ) ; if ( JE > - 1 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_quatsa [ JE ] , u_transb [ JE ] , u_transa [ JE ] , Jx ) ; V = Jw ( V , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; W = Jw ( W , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; U = Jw ( U , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_transb [ JE ] ) ; U = Jw ( U , u_quatsb [ JE ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jw ( V , u_quatsb [ JE ] ) ; W = Jw ( W , u_quatsb [ JE ] ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}","}","}"]}]}}]}]}}]}]};a["include/sky_blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKY_BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"SKY_BLENDING_GLSLF",
b:[""]},{a:"include",F:"std.glsl"},{a:"include",F:"blending.glslf"},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"BLENDTYPE",b:["MIX"]},{a:"var",c:"MTEX_RGBTOINT",b:["0"]},{a:"var",c:"WOMAP_HORIZ",b:["0"]},{a:"var",c:"WOMAP_ZENUP",b:["0"]},{a:"var",c:"WOMAP_ZENDOWN",b:["0"]},{a:"var",c:"WOMAP_BLEND",b:["0"]},{a:"var",c:"MTEX_NEGATIVE",b:["0"]},{a:"txt",b:"vec3 JF ( vec3 ki , vec3 kj , float aL , float kI ) { float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE",
"MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kn ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kp ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kq ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kr ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","HUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kz ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SATURATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kA ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"VALUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kB ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","COLOR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kC ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) ;".split(" ")}]}}]},{a:"txt",
b:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float JG ( float kG , float kH , float aL , float kI ) { vec3 ki = vec3 ( kG ) , kj = vec3 ( kH ) ; float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE","MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"return kn ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kJ ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kK ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kL ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",
j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) . x ;".split(" ")}]}}]},{a:"txt",b:"return 0.0 ; } vec3 eB ( vec3 ex , vec3 ey , vec4 eA , float ew , vec3 ez ) { float JH = 1.0 ; JH = eA . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"JH = ge ( eA ) ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["MTEX_NEGATIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( vec3 ( 1.0 ) - eA . rgb , eA . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = 1.0 - JH ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = eA . a ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ"],l:{a:"grp",f:[{a:"txt",b:"ex = JF ( eA . rgb , ex , JH , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","JI","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"if ( dot ( ez , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],
l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:[";"]}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"else JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"elif",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( JI != 0.0 ) ey = JF ( eA . rgb , ey , JH , JI ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_BLEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"JH = dot ( eA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{a:"txt",b:"ew = JG ( u_sky_tex_dvar , ew , JH , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"vec3 bs = mix ( ex , ey , ew ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","bs","=","ex",";"]}]}}]},{a:"txt",b:["return","bs",";","}"]}]}}]}]};a["include/std.glsl"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"STD_ENUMS_GLSL",l:{a:"grp",f:[{a:"define",c:"STD_ENUMS_GLSL",b:[""]},{a:"var",c:"CONSTANTS_HACK",b:["0"]},{a:"define",c:"TEXTURE_COORDS_NONE",b:["0"]},{a:"define",c:"TEXTURE_COORDS_UV_ORCO",b:["1"]},{a:"define",c:"TEXTURE_COORDS_NORMAL",b:["2"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MIX",b:["1"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MULTIPLY",
b:["2"]},{a:"define",c:"SHADOW_SRC_NONE",b:["1"]},{a:"define",c:"SHADOW_SRC_DEPTH",b:["2"]},{a:"define",c:"SHADOW_SRC_MASK",b:["3"]},{a:"define",c:"SHADOW_DST_NONE",b:["1"]},{a:"define",c:"SHADOW_DST_DEPTH",b:["2"]},{a:"define",c:"SHADOW_DST_MASK",b:["3"]},{a:"define",c:"NO_SHADOWS",b:["1"]},{a:"define",c:"SHADOW_CASTING",b:["2"]},{a:"define",c:"SHADOW_MASK_GENERATION",b:["3"]},{a:"define",c:"SHADOW_MAPPING_OPAQUE",b:["4"]},{a:"define",c:"SHADOW_MAPPING_BLEND",b:["5"]},{a:"define",c:"POISSON_X_16",
b:["4"]},{a:"define",c:"POISSON_X_8",b:["2"]},{a:"define",c:"POISSON_X_4",b:["1"]},{a:"define",c:"NO_SOFT_SHADOWS",b:["0"]},{a:"define",c:"SPECULAR_PHONG",b:["1"]},{a:"define",c:"SPECULAR_COOKTORR",b:["2"]},{a:"define",c:"SPECULAR_WARDISO",b:["3"]},{a:"define",c:"SPECULAR_BLINN",b:["4"]},{a:"define",c:"SPECULAR_TOON",b:["5"]},{a:"define",c:"DIFFUSE_LAMBERT",b:["1"]},{a:"define",c:"DIFFUSE_OREN_NAYAR",b:["2"]},{a:"define",c:"DIFFUSE_FRESNEL",b:["3"]},{a:"define",c:"DIFFUSE_MINNAERT",b:["4"]},{a:"define",
c:"DIFFUSE_TOON",b:["5"]},{a:"define",c:"MIX",b:["0"]},{a:"define",c:"ADD",b:["1"]},{a:"define",c:"SUBTRACT",b:["2"]},{a:"define",c:"MULTIPLY",b:["3"]},{a:"define",c:"SCREEN",b:["4"]},{a:"define",c:"OVERLAY",b:["5"]},{a:"define",c:"DIFFERENCE",b:["6"]},{a:"define",c:"DIVIDE",b:["7"]},{a:"define",c:"DARKEN",b:["8"]},{a:"define",c:"LIGHTEN",b:["9"]},{a:"define",c:"HUE",b:["10"]},{a:"define",c:"SATURATION",b:["11"]},{a:"define",c:"VALUE",b:["12"]},{a:"define",c:"COLOR",b:["13"]},{a:"define",c:"SOFT_LIGHT",
b:["14"]},{a:"define",c:"LINEAR_LIGHT",b:["15"]},{a:"define",c:"REFL_NONE",b:["0"]},{a:"define",c:"REFL_MIRRORMAP",b:["1"]},{a:"define",c:"REFL_PLANE",b:["2"]},{a:"define",c:"REFL_CUBE",b:["3"]},{a:"define",c:"REFL_PBR",b:["4"]},{a:"define",c:"INVERSE_QUADRATIC",b:["0"]},{a:"define",c:"LINEAR",b:["1"]},{a:"define",c:"QUADRATIC",b:["2"]},{a:"define",c:"HEMI",b:["1"]},{a:"define",c:"SPOT",b:["2"]},{a:"define",c:"POINT",b:["3"]},{a:"define",c:"SUN",b:["4"]},{a:"define",c:"DOF_SIMPLE",b:["0"]},{a:"define",
c:"DOF_BOKEH",b:["1"]},{a:"define",c:"COC_ALL",b:["0"]},{a:"define",c:"COC_FOREGROUND",b:["1"]},{a:"define",c:"COC_COMBINE",b:["2"]},{a:"define",c:"VT_WORLD_TO_WORLD",b:["0"]},{a:"define",c:"VT_WORLD_TO_OBJECT",b:["1"]},{a:"define",c:"VT_WORLD_TO_CAMERA",b:["2"]},{a:"define",c:"VT_OBJECT_TO_WORLD",b:["3"]},{a:"define",c:"VT_OBJECT_TO_OBJECT",b:["4"]},{a:"define",c:"VT_OBJECT_TO_CAMERA",b:["5"]},{a:"define",c:"VT_CAMERA_TO_WORLD",b:["6"]},{a:"define",c:"VT_CAMERA_TO_OBJECT",b:["7"]},{a:"define",c:"VT_CAMERA_TO_CAMERA",
b:["8"]},{a:"define",c:"VT_POINT",b:["0"]},{a:"define",c:"VT_VECTOR",b:["1"]},{a:"define",c:"VT_NORMAL",b:["2"]},{a:"define",c:"NM_TANGENT",b:["0"]},{a:"define",c:"NM_OBJECT",b:["1"]},{a:"define",c:"NM_WORLD",b:["2"]},{a:"define",c:"NM_BLENDER_OBJECT",b:["3"]},{a:"define",c:"NM_BLENDER_WORLD",b:["4"]},{a:"define",c:"BILLBOARD_ALIGN_VIEW",b:["1"]},{a:"define",c:"BILLBOARD_ALIGN_XY",b:["2"]},{a:"define",c:"BILLBOARD_ALIGN_YZ",b:["3"]},{a:"define",c:"BILLBOARD_ALIGN_ZX",b:["4"]},{a:"define",c:"POST_EFFECT_NONE",
b:["1"]},{a:"define",c:"POST_EFFECT_GRAYSCALE",b:["2"]},{a:"define",c:"POST_EFFECT_BLUR",b:["3"]},{a:"define",c:"POST_EFFECT_GLOW_BLUR",b:["4"]},{a:"define",c:"POST_EFFECT_DOF_BLUR",b:["5"]},{a:"define",c:"POST_EFFECT_ALPHA_BLUR",b:["6"]},{a:"define",c:"POST_EFFECT_EXTEND",b:["7"]},{a:"define",c:"FLIP_CUBEMAP_COORDS",b:["8"]},{a:"define",c:"BLUR_PASS_1",b:["1"]},{a:"define",c:"BLUR_PASS_2",b:["2"]},{a:"define",c:"BLUR_PASS_3",b:["3"]},{a:"define",c:"BLUR_PASS_4",b:["4"]},{a:"define",c:"BLUR_PASS_5",
b:["5"]},{a:"define",c:"DV_NONE",b:["0"]},{a:"define",c:"DV_OPAQUE_WIREFRAME",b:["1"]},{a:"define",c:"DV_TRANSPARENT_WIREFRAME",b:["2"]},{a:"define",c:"DV_FRONT_BACK_VIEW",b:["3"]},{a:"define",c:"DV_BOUNDINGS",b:["4"]},{a:"define",c:"DV_CLUSTERS_VIEW",b:["5"]},{a:"define",c:"DV_BATCHES_VIEW",b:["6"]},{a:"define",c:"DV_RENDER_TIME",b:["7"]},{a:"define",c:"SSAO_QUALITY_8",b:["1"]},{a:"define",c:"SSAO_QUALITY_16",b:["2"]},{a:"define",c:"SSAO_QUALITY_24",b:["3"]},{a:"define",c:"SSAO_QUALITY_32",b:["4"]},
{a:"define",c:"AA_METHOD_FXAA_LIGHT",b:["1"]},{a:"define",c:"AA_METHOD_FXAA_QUALITY",b:["2"]},{a:"define",c:"AA_QUALITY_LOW",b:["0"]},{a:"define",c:"AA_QUALITY_MEDIUM",b:["1"]},{a:"define",c:"AA_QUALITY_HIGH",b:["2"]},{a:"define",c:"SMAA_RESOLVE",b:["25"]},{a:"define",c:"SMAA_EDGE_DETECTION",b:["24"]},{a:"define",c:"SMAA_BLENDING_WEIGHT_CALCULATION",b:["23"]},{a:"define",c:"SMAA_NEIGHBORHOOD_BLENDING",b:["26"]},{a:"define",c:"AA_METHOD_SMAA_LOW",b:["1"]},{a:"define",c:"AA_METHOD_SMAA_MEDIUM",b:["2"]},
{a:"define",c:"AA_METHOD_SMAA_HIGH",b:["3"]},{a:"define",c:"AA_METHOD_SMAA_ULTRA",b:["4"]},{a:"define",c:"REFL_PASS_NONE",b:["0"]},{a:"define",c:"REFL_PASS_PLANE",b:["1"]},{a:"define",c:"REFL_PASS_CUBE",b:["2"]},{a:"define",c:"SRGB_NONE",b:["0"]},{a:"define",c:"SRGB_SIMPLE",b:["1"]},{a:"define",c:"SRGB_PROPER",b:["2"]},{a:"define",c:"CAM_TYPE_ORTHO",b:["0"]},{a:"define",c:"CAM_TYPE_PERSP",b:["1"]},{a:"define",c:"M_PI",b:["3.14159265359"]},{a:"define",c:"M_PI_4",b:["0.785398163"]},{a:"define",c:"INV_PI",
b:["0.318309886"]},{a:"define",c:"UP_VECTOR",b:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{a:"define",c:"RIGHT_VECTOR",b:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{a:"define",c:"TOWARD_VECTOR",b:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["CONSTANTS_HACK"],l:{a:"grp",f:[{a:"txt",b:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"_0_0",b:["0.0"]},{a:"define",c:"_0_5",b:["0.5"]},{a:"define",c:"_1_0",
b:["1.0"]},{a:"define",c:"_255_0",b:["255.0"]}]}}]}]}}]}]};a["include/to_world.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"TO_WORLD_GLSLV",l:{a:"grp",f:[{a:"define",c:"TO_WORLD_GLSLV",b:[""]},{a:"include",F:"math.glslv"},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"BILLBOARD_SPHERICAL",b:["0"]},{a:"var",c:"BILLBOARD_RANDOM",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"BILLBOARD_PRES_GLOB_ORIENTATION",b:["0"]},{a:"var",c:"STATIC_BATCH",
b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"define",c:"MAX_BILLBOARD_ANGLE",b:["M_PI_4"]},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bj ( vec3 JJ , mat3 N ) { vec4 JK = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{a:"txt",b:"JK = qX ( JL , JK ) ; JK = kR ( JK ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 JN ( vec3 lH , vec3 JJ ) { vec3 JM = lH - JJ ; JM . z = 0.0 ; JM = normalize ( JM ) ; vec4 JK = rd ( JM , TOWARD_VECTOR ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"mat3 at ( in vec3 JO , float JP , float JQ , float JR , vec3 a_ , mat3 Z ) { float HO = fract ( length ( a_ ) / 0.17 ) ; float JS = JR + HO / 10.0 ; float JT = HO ; if ( JR != 0.0 ) JT /= JR ; JO *= 1.0 + 0.5 * sin ( JP ) ; float JU = length ( JO ) * JQ * sin ( 2.0 * 3.14 * JP * JS + JT ) ; vec4 JV = X ( TOWARD_VECTOR , JU ) ; vec4 JW = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; JW = qX ( JW , JV ) ; Z = dd ( JW , Z ) ; return Z ; }".split(" ")}]}}]},
{a:"txt",b:"mat3 as ( in vec3 lH , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 lW = bj ( aq , N ) ;".split(" ")}]}},{a:"elif",j:["BILLBOARD_RANDOM"],l:{a:"grp",f:[{a:"txt",b:"float HO = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float JX = 2.0 * M_PI * HO ; vec4 JY = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float JZ = asin ( 2.0 * ( JY . x * JY . y - JY . z * JY . w ) ) ; float hu = JZ - JX ; if ( hu < 0.0 ) hu = 2.0 * M_PI + hu ; float J_ = JX ; if ( hu <= MAX_BILLBOARD_ANGLE ) J_ += hu ; else if ( hu <= M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hu <= M_PI + MAX_BILLBOARD_ANGLE ) J_ += hu - M_PI ; else if ( hu <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else J_ += hu - 2.0 * M_PI ; vec4 Ka = X ( UP_VECTOR , J_ ) ; mat3 lW = da ( ) ; lW [ 0 ] = aq ; lW = dd ( Ka , lW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 lW = JN ( lH , aq ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lW = aY ( lW , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"lW [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{a:"txt",b:"return lW ; } au av ( in vec3 fn , in vec3 Kb , in vec3 Kc , in vec3 Kd , in vec3 Ke , in vec3 Kf , in mat3 Z ) { fn = ap ( Z , fn ) ; Kb = ap ( Z , Kb ) ; Kc = _ ( Z , Kc ) ; Kd = _ ( Z , Kd ) ; Ke = _ ( Z , Ke ) ; Kf = _ ( Z , Kf ) ; return lX ( au ( fn , Kb , Kc , Kd , Ke , Kf , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
a["include/wind_bending.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"WIND_BENDING_GLSLV",l:{a:"grp",f:[{a:"define",c:"WIND_BENDING_GLSLV",b:[""]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"void Ks ( inout vec3 bo , in vec3 Kg , in float Kh , in float Ki , in float fu , in vec3 JO , in float Kj , in mat4 bV ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"float dA = length ( Kl ) ; float Km = Ki * ( 1.0 + 0.1 * fract ( dA ) ) ; float Kn = Kh * Kj * ( 1.0 + sin ( 2.0 * 3.14 * fu * Km + dA ) ) ; float Ko = ( Kk . z - Kl . z ) * abs ( Kn ) ; Ko += 1.0 ; Ko *= Ko ; Ko = Ko * Ko - Ko ; vec3 Kp = Kk ; Kp . xy += JO . xy * Ko * sign ( Kn ) ; vec3 Kq = Kp - Kl ; if ( all ( equal ( Kq , vec3 ( 0.0 ) ) ) ) bo = Kg ; else {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Kq = ( bV * vec4 ( Kq , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"float Kr = length ( Kk - Kl ) ; bo = Kg + normalize ( Kq ) * Kr ; } }".split(" ")},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"vec4 Kt ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 Ku ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 Kv ( vec4 x ) { return Kt ( Ku ( x ) ) ; } void KH ( inout vec3 bo , in float fu , in vec3 U , in vec3 JO , in vec3 Kg , in float Kw , in float Kx , in float Ky , in vec3 Kz , in mat4 bV ) { float KA ; float KB ; float KC ; vec2 KD ; vec4 KE ; vec2 KF ; vec3 KG ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"KA = dot ( Kl , vec3 ( 1.0 ) ) ; KB = KA + Kz . g ; KC = dot ( Kk , vec3 ( Kz . g ) ) ; KD = ( fu + vec2 ( KC , KB ) ) ; KE = ( ( fract ( ( KD . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( JO ) * Kw ; KE = Kv ( KE ) ; KF = KE . xz + KE . yw ; KF . y = 0.5 - KF . y ; KG = KF . xxy * Kz . rrb * vec3 ( Kx * U . x , Kx * U . y , Ky ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KG = ( bV * vec4 ( KG , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:["bo","+=","KG",";","}"]}]}}]},{a:"txt",b:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bV ) { vec3 KI = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = ao ; vec3 KK = a_emitter_center ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KK = ( bV * vec4 ( KK , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = O ; vec3 KK = ao ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"KH ( KJ , u_time , U , KI , KK , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bV ) ;".split(" ")}]}}]},
{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , a_bending_col_main , bV ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , 1.0 , bV ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"O += KJ - ao ; ao = KJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = KJ ; ao = KK ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]}};b4w.module.animation=function(a,t){var e=t("__animation"),c=t("__obj_util"),b=t("__print");a.SLOT_0=e.SLOT_0;a.SLOT_1=e.SLOT_1;a.SLOT_2=e.SLOT_2;a.SLOT_3=e.SLOT_3;a.SLOT_4=e.SLOT_4;a.SLOT_5=e.SLOT_5;a.SLOT_6=e.SLOT_6;a.SLOT_7=e.SLOT_7;a.SLOT_ALL=e.SLOT_ALL;a.OBJ_ANIM_TYPE_NONE=e.OBJ_ANIM_TYPE_NONE;a.OBJ_ANIM_TYPE_ARMATURE=e.OBJ_ANIM_TYPE_ARMATURE;a.OBJ_ANIM_TYPE_OBJECT=e.OBJ_ANIM_TYPE_OBJECT;a.OBJ_ANIM_TYPE_VERTEX=e.OBJ_ANIM_TYPE_VERTEX;a.OBJ_ANIM_TYPE_SOUND=e.OBJ_ANIM_TYPE_SOUND;a.OBJ_ANIM_TYPE_PARTICLES=
e.OBJ_ANIM_TYPE_PARTICLES;a.OBJ_ANIM_TYPE_MATERIAL=e.OBJ_ANIM_TYPE_MATERIAL;a.OBJ_ANIM_TYPE_STATIC=e.OBJ_ANIM_TYPE_STATIC;a.AB_CYCLIC=e.AB_CYCLIC;a.AB_FINISH_RESET=e.AB_FINISH_RESET;a.AB_FINISH_STOP=e.AB_FINISH_STOP;a.is_animated=function(a){return e.is_animated(a)};a.get_anim_names=function(a){return e.MH(a)?e.get_anim_names(a):[]};a.get_current_anim_name=function(a,b){if(!e.is_animated(a))return null;b=b||e.SLOT_0;return e.YQ(a,b)};a.apply=function(a,c,q){if(q>e.SLOT_7)b.error("Can't apply animation to slot "+
q+' for object "'+a.name+'". Object can have maximum of 8 animation slots');else{q=q||e.SLOT_0;if(e.is_animated(a)){var f=e.get_slot_num_by_anim(a,c);if(-1!=f&&f!=q){b.error('Animation "'+c+'" is already applied to object "'+a.name+'" (slot "'+f+'").');return}}e.aK(a,c)?e.apply(a,null,c,q):b.error('No fcurves in action "'+c+'"')}};a.apply_ext=function(a,c,q){if(q>e.SLOT_7)b.error("Can't apply animation to slot "+q+' for object "'+a.name+'". Object can have maximum of 8 animation slots');else{q=q||
e.SLOT_0;var f=c[0];e.aK(a,f)?e.apply(a,c.slice(1),f,q):b.error('No fcurves in action "'+f+'"')}};a.remove=function(a){e.remove(a)};a.remove_slot_animation=function(a,b){e.is_animated(a)&&(b=b||e.SLOT_0,e.remove_slot_animation(a,b))};a.apply_def=function(a){e.apply_def(a)};a.play=function(a,c,q){e.is_animated(a)?(q=q||e.SLOT_0,e.play(a,c,q),e.yW(a,0,q,!0)):b.error('Object "'+a.name+'" has no applied animation')};a.stop=function(a,b){e.is_animated(a)&&(b=b||e.SLOT_0,e.stop(a,b))};a.is_play=function(a,
b){if(!e.is_animated(a))return!1;b=b||e.SLOT_0;return e.is_play(a,b)};a.set_frame=function(a,b,c){e.is_animated(a)&&(c=c||e.SLOT_0,e.set_frame(a,b,c))};a.set_first_frame=function(a,b){e.is_animated(a)&&e.set_first_frame(a,b)};a.set_last_frame=function(a,b){if(e.is_animated(a)){b=b||e.SLOT_0;var c=e.get_anim_start_frame(a,b),f=e.get_anim_length(a,b);e.set_frame(a,c+f-e.OK,b)}};a.get_frame=function(a,b){if(!e.is_animated(a))return 0;b=b||e.SLOT_0;return e.kA(a,b)};a.set_speed=function(a,b,c){e.is_animated(a)&&
(c=c||e.SLOT_0,e.set_speed(a,b||1,c))};a.get_speed=function(a,b){if(!e.is_animated(a))return 0;b=b||e.SLOT_0;return a.pa[b]?e.get_speed(a,b):0};a.get_anim_start_frame=function(a,b){return e.is_animated(a)&&(b=b||e.SLOT_0,a.pa[b])?e.get_anim_start_frame(a,b):-1};a.get_anim_length=function(a,b){return e.is_animated(a)&&(b=b||e.SLOT_0,a.pa[b])?e.get_anim_length(a,b):-1};a.set_behavior=function(a,b,c){e.is_animated(a)&&(c=c||e.SLOT_0,e.set_behavior(a,b,c))};a.get_behavior=function(a,b){if(!e.is_animated(a))return null;
b=b||e.SLOT_0;return e.get_behavior(a,b)};a.apply_smoothing=function(a,b,c,l){l=l||e.SLOT_0;e.is_animated(a)&&e.apply_smoothing(a,b,c,l)};a.frame_to_sec=function(a){return e.frame_to_sec(a)};a.get_slot_num_by_anim=function(a,b){return e.is_animated(a)&&b?e.get_slot_num_by_anim(a,b):-1};a.get_anim_type=function(a,b){return e.is_animated(a)?e.get_anim_type(a,b):null};a.apply_to_first_empty_slot=function(a,b){return e.apply_to_first_empty_slot(a,b)};a.get_skel_mix_factor=function(a){return a.A.nf};a.set_skel_mix_factor=
function(a,f,q,l){c.is_armature(a)?(f=Math.min(Math.max(f,0),1),a.A.nf!=f&&e.set_skel_mix_factor(a,f,q||0,l||null)):b.error("Can't blend animation. Object \""+a.name+'" is not armature')};a.set_skeletal_slots=function(a,b,c,e){b=void 0==b?-1:b;c=void 0==b?-1:c;var f=a.A.fi;0<=b&&(f[0]=b);0<=c&&(f[1]=c);a.A.nf=e||0};a.get_first_skeletal_slot=function(a){return a.A.fi[0]};a.get_second_skeletal_slot=function(a){return a.A.fi[1]};a.mix_from_cur_pos=function(a,b,c,l){e.mix_from_cur_pos(a,b,c||0,l||null)}};b4w.module.anchors=function(a,t){var e=t("__anchors");a.attach_move_cb=e.attach_move_cb;a.detach_move_cb=e.detach_move_cb;a.is_anchor=e.is_anchor;a.get_element_id=e.get_element_id;a.update=function(){e.update(!0)}};b4w.module.armature=function(a,t){var e=t("__armature"),c=t("__obj_util"),b=t("__transform"),h=t("__print");a.get_bone_tsr=function(a,b,l){if(!c.is_armature(a))return null;if(!e.ku(a,b))return h.error('There is no bone: "',b,'" in "',a.name,'".'),null;l||(l=new Float32Array(8));e.get_bone_tsr(a,b,!1,!1,l);return l};a.get_bone_tsr_rel=function(a,b,l){if(!c.is_armature(a))return null;if(!e.ku(a,b))return h.error('There is no bone: "',b,'" in "',a.name,'".'),null;l||(l=new Float32Array(8));e.get_bone_tsr(a,
b,!1,!0,l);return l};a.set_bone_tsr=function(a,q,l){c.is_armature(a)&&(e.ku(a,q)?(e.set_bone_tsr(a,q,l,!1),b.V(a)):h.error('There is no bone: "',q,'" in "',a.name,'".'))};a.set_bone_tsr_rel=function(a,q,l){c.is_armature(a)&&(e.ku(a,q)?(e.set_bone_tsr(a,q,l,!0),b.V(a)):h.error('There is no bone: "',q,'" in "',a.name,'".'))}};b4w.module.assets=function(a,t){var e=t("__assets");a.AT_ARRAYBUFFER=e.AT_ARRAYBUFFER;a.AT_ARRAYBUFFER_ZIP=e.AT_ARRAYBUFFER_ZIP;a.AT_JSON=e.AT_JSON;a.AT_JSON_ZIP=e.AT_JSON_ZIP;a.AT_TEXT=e.AT_TEXT;a.AT_AUDIOBUFFER=e.AT_AUDIOBUFFER;a.AT_IMAGE_ELEMENT=e.AT_IMAGE_ELEMENT;a.AT_AUDIO_ELEMENT=e.AT_AUDIO_ELEMENT;a.AT_VIDEO_ELEMENT=e.AT_VIDEO_ELEMENT;a.AT_SEQ_VIDEO_ELEMENT=e.AT_SEQ_VIDEO_ELEMENT;a.enqueue=function(a,b,h,f){a.length&&e.enqueue(a,b,h,f)}};b4w.module.camera=function(a,t){function e(a,b){if(!f.is_camera(a))return l.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=p.get_quat_view(a.A.D);d.quat_to_dir(c,d.AXIS_MZ,b);return b}var c=t("__camera"),b=t("__container"),h=t("__math"),f=t("__obj_util"),q=t("__physics"),l=t("__print"),x=t("__scenes"),y=t("__transform"),p=t("__tsr"),d=t("__util"),v=t("__vec3"),r=t("__vec4"),H=t("__quat"),E=new Float32Array(2),w=new Float32Array(3),n=new Float32Array(3),C=new Float32Array(4),
k=H.create(),F={},u={};a.MS_STATIC=c.MS_STATIC;a.MS_TARGET_CONTROLS=c.MS_TARGET_CONTROLS;a.MS_EYE_CONTROLS=c.MS_EYE_CONTROLS;a.MS_HOVER_CONTROLS=c.MS_HOVER_CONTROLS;a.static_setup=function(a,b){if(f.is_camera(a)){c.pt(a);a.A.nb=c.MS_STATIC;if(b){var d=b.pos||p.get_trans_view(a.A.D);b.look_at?c.EI(a,d,b.look_at):y.set_translation(a,d)}y.V(a);q.sync_transform(a);c.Co(a)}else l.error("static_setup(): Wrong camera object")};a.static_set_look_at=function(a,b,d){c.is_static_camera(a)?(b=b||p.get_trans_view(a.A.D),
d?c.EI(a,b,d):y.set_translation(a,b),y.V(a),q.sync_transform(a)):l.error("static_set_look_at(): Wrong camera object or camera move style")};a.static_set_rotation=function(a,b){c.is_static_camera(a)?(y.set_rotation(a,b),y.V(a),q.sync_transform(a)):l.error("static_set_rotation(): Wrong camera object or camera move style")};a.static_get_rotation=function(a,b){if(!c.is_static_camera(a))return l.error("static_get_rotation(): Wrong camera object or camera move style"),null;b=b||new Float32Array(4);return y.get_rotation(a,
b)};a.eye_setup=function(a,b){if(f.is_camera(a))if(b&&b.horiz_rot_lim&&("number"!=typeof b.horiz_rot_lim.left||"number"!=typeof b.horiz_rot_lim.right))l.error("eye_setup(): Wrong horizontal limits object.");else if(b&&b.vert_rot_lim&&("number"!=typeof b.vert_rot_lim.down||"number"!=typeof b.vert_rot_lim.up))l.error("eye_setup(): Wrong vertical limits object.");else{c.pt(a);a.A.nb=c.MS_EYE_CONTROLS;if(b){var d=b.pos||p.get_trans_view(a.A.D);c.LI(a,d,b.look_at,b.horiz_rot_lim,b.vert_rot_lim)}y.V(a);
q.sync_transform(a);c.Co(a)}else l.error("eye_setup(): Wrong camera object")};a.eye_set_look_at=function(a,b,d){c.is_eye_camera(a)?(b=b||p.get_trans_view(a.A.D),d?c.YU(a,b,d):y.set_translation(a,b),c.correct_up(a,a.A.pe,!0),y.V(a),q.sync_transform(a)):l.error("eye_set_look_at(): Wrong camera object or camera move style")};a.eye_rotate=function(b,d,e,f){l.fd("eye_rotate","rotate_camera");c.is_eye_camera(b)?a.rotate_camera(b,d,e,f||!1):l.error("eye_rotate(): Wrong camera object or camera move style")};
a.eye_set_vertical_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.mx(a,b),y.V(a),q.sync_transform(a)):l.error("eye_set_vertical_limits(): Incorrect limits object."):l.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};a.eye_get_vertical_limits=function(a,b,d){if(!c.is_eye_camera(a))return l.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.A;return a.Xa?(b=b||{},d?(b.down=a.Xa.io,b.up=a.Xa.Ip):
(b.down=a.Xa.down,b.up=a.Xa.up),b.camera_space=d||!1,b):null};a.eye_set_horizontal_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.lx(a,b),y.V(a),q.sync_transform(a)):l.error("eye_set_horizontal_limits(): Incorrect limits object."):l.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};a.eye_get_horizontal_limits=function(a,b,d){if(!c.is_eye_camera(a))return l.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Vb?(b=b||{},d?(b.left=a.Vb.Jo,b.right=a.Vb.hp):(b.left=a.Vb.left,b.right=a.Vb.right),b.camera_space=d||!1,b):null};a.target_setup=function(a,b){if(f.is_camera(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){l.error("target_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.gs&&("number"!=typeof b.gs.min_y||"number"!=typeof b.gs.max_y||b.gs.min_y>b.gs.max_y))l.error("target_setup(): Wrong pivot limits object");else{c.pt(a);a.A.nb=c.MS_TARGET_CONTROLS;var d=b.pos||p.get_trans_view(a.A.D),g=b.pivot;g||(g=e(a,w),g=v.add(d,g,g));c.NI(a,d,g,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.gs,b.use_panning||!1);y.V(a);q.sync_transform(a);c.Co(a)}}else l.error("target_setup(): Wrong vertical limits object");
else l.error("target_setup(): Wrong horizontal limits object");else l.error("target_setup(): Wrong camera object")};a.target_rotate=function(b,d,e,f){l.fd("target_rotate","rotate_camera");c.is_target_camera(b)?a.rotate_camera(b,d,e,f||!1):l.error("target_rotate(): Wrong camera object or camera move style")};a.target_set_trans_pivot=function(a,b,d){c.is_target_camera(a)?(b=b||p.get_trans_view(a.A.D),d=d||a.A.pivot,c.fC(a,b,d),y.V(a),q.sync_transform(a)):l.error("target_set_trans_pivot(): Wrong camera object or camera move style")};
a.target_set_pivot_translation=function(a,b){c.is_target_camera(a)?(c.gV(a,b),y.V(a),q.sync_transform(a)):l.error("target_set_pivot_translation(): Wrong camera object or camera move style")};a.target_set_distance=function(a,b){if(c.is_target_camera(a)){var d=y.$r(a,a.A.pivot);y.move_local(a,0,0,Math.max(0,b)-d);y.V(a);q.sync_transform(a)}else l.error("target_set_distance(): Wrong camera object or camera move style")};a.target_get_distance=function(a){return c.is_target_camera(a)?y.$r(a,a.A.pivot):
(l.error("target_get_distance(): Wrong camera object or camera move style"),0)};a.target_zoom_object=function(a,b){if(c.is_target_camera(a)){var d=y.get_object_center(b,!1,w),e=y.get_object_size(b),g=x.get_active(),g=f.Da(a,g).ja[0],g=c.XQ(g)/2,e=e/Math.sin(g),g=y.$r(a,d);c.fC(a,p.get_trans_view(a.A.D),d);y.V(a);y.move_local(a,0,0,e-g);y.V(a);q.sync_transform(a)}else l.error("target_zoom_object(): Wrong camera object or camera move style")};a.target_get_pivot=function(a,b){if(!c.is_target_camera(a))return l.error("target_get_pivot(): Wrong camera object or camera move style"),
null;b=b||new Float32Array(3);v.copy(a.A.pivot,b);return b};a.target_set_distance_limits=function(a,b){if(c.is_target_camera(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){l.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.uI(a,b);y.V(a);q.sync_transform(a)}else l.error("target_set_distance_limits(): Wrong camera object or camera move style")};a.target_get_distance_limits=function(a,b){if(!c.is_target_camera(a))return l.error("target_get_distance_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Kb?(b=b||{},b.min=d.Kb.min,b.max=d.Kb.max,b):null};a.target_set_vertical_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.mx(a,b),y.V(a),q.sync_transform(a)):l.error("target_set_vertical_limits(): Wrong limits object"):l.error("target_set_vertical_limits(): Wrong camera object or camera move style")};a.target_get_vertical_limits=function(a,b,d){if(!c.is_target_camera(a))return l.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Xa?(b=b||{},d?(b.down=a.Xa.io,b.up=a.Xa.Ip):(b.down=a.Xa.down,b.up=a.Xa.up),b.camera_space=d||!1,b):null};a.target_set_horizontal_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.lx(a,b),y.V(a),q.sync_transform(a)):l.error("target_set_horizontal_limits(): Wrong limits object"):l.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};a.target_get_horizontal_limits=function(a,b,d){if(!c.is_target_camera(a))return l.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Vb?(b=b||{},d?(b.left=a.Vb.Jo,b.right=a.Vb.hp):(b.left=a.Vb.left,b.right=a.Vb.right),b.camera_space=d||!1,b):null};a.target_set_pivot_limits=function(a,b){c.is_target_camera(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?l.error("target_set_pivot_limits(): Wrong limits object"):(c.GI(a,b),y.V(a),q.sync_transform(a)):l.error("target_set_pivot_limits(): Wrong camera object or camera move style")};a.target_get_pivot_limits=function(a,b){if(!c.is_target_camera(a))return l.error("target_get_pivot_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.ke?(b=b||{},b.min_z=d.ke.min_z,b.max_z=d.ke.max_z,b):null};a.target_pan_pivot=function(a,b,d){if(c.is_target_camera(a)){var e=a.A;e.use_panning&&(w[0]=b,w[1]=-d,w[2]=0,p.transform_dir_vec3(w,e.D,w),v.add(e.pivot,w,e.pivot),b=p.get_trans_view(e.D),v.add(b,w,b),y.V(a),q.sync_transform(a))}else l.error("target_pan_pivot(): wrong object")};a.target_switch_panning=function(a,b){if(!c.is_target_camera(a))return l.error("target_switch_panning(): Wrong camera object or camera move style"),
null;a.A.use_panning=b};a.hover_setup_rel=function(b,e){a.hover_setup(b,{pos:e.pos,pivot:e.pivot});var f="undefined"==typeof e.dist_interval?0:Math.max(e.dist_interval,0),g="undefined"==typeof e.angle_interval?0:Math.max(e.angle_interval,0),h="undefined"==typeof e.t?.5:d.clamp(e.t,0,1),l=a.hover_get_distance_limits(b,F);l.min=Math.max(l.min-h*f,0);l.max+=(1-h)*f;f=a.hover_get_vertical_limits(b,u);f.down=d.clamp(f.down+h*g,-Math.PI/2,0);f.up=d.clamp(f.up-(1-h)*g,-Math.PI/2,0);c.hover_set_distance_limits(b,
l);c.hover_set_vertical_limits(b,f);y.V(b);q.sync_transform(b);c.Co(b)};a.hover_setup=function(a,b){if(f.is_camera(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){l.error("hover_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<
b.hover_angle_lim.up))l.error("hover_setup(): Wrong hover angle limits object");else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))l.error("hover_setup(): Wrong horizontal translation limits object");else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))l.error("hover_setup(): Wrong vertical translation limits object");
else{c.pt(a);a.A.nb=c.MS_HOVER_CONTROLS;var d=b.pos||p.get_trans_view(a.A.D);c.MI(a,d,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);y.V(a);q.sync_transform(a);c.Co(a)}}else l.error("hover_setup(): Wrong camera object")};a.hover_rotate=function(b,d,e,f){l.fd("hover_rotate","rotate_camera");c.is_hover_camera(b)?a.rotate_camera(b,d,e,f||!1):l.error("hover_rotate(): Wrong camera object or camera move style")};a.hover_set_pivot_translation=function(a,b){c.is_hover_camera(a)?
(c.DI(a,b),y.V(a),q.sync_transform(a)):l.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};a.hover_get_pivot=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);v.copy(a.A.wc,b);return b};a.hover_get_distance=function(a){return c.is_hover_camera(a)?y.$r(a,a.A.wc):(l.error("hover_get_distance(): Wrong camera object or camera move style"),0)};a.hover_set_vertical_limits=function(a,
b){c.is_hover_camera(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?l.error("hover_set_vertical_limits(): Wrong limits object"):(c.hover_set_vertical_limits(a,b),y.V(a),q.sync_transform(a)):l.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};a.hover_get_vertical_limits=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var d=a.A;b=b||{};b.down=d.Xa.down;b.up=d.Xa.up;return b};
a.hover_set_distance_limits=function(a,b){c.is_hover_camera(a)?"number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max?l.error("hover_set_distance_limits(): Wrong limits object"):(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.hover_set_distance_limits(a,b),y.V(a),q.sync_transform(a)):l.error("hover_set_distance_limits(): Wrong camera object or camera move style")};a.hover_get_distance_limits=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_get_distance_limits(): Wrong camera object or camera move style"),
null;var d=a.A;b=b||{};b.min=d.Kb.min;b.max=d.Kb.max;return b};a.hover_set_vert_trans_limits=function(a,b){c.is_hover_camera(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?l.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.JI(a,b),y.V(a),q.sync_transform(a)):l.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};a.hover_get_vert_trans_limits=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Ed?(b=b||{},b.min=d.Ed.min,b.max=d.Ed.max,b):null};a.hover_set_horiz_trans_limits=function(a,b){c.is_hover_camera(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?l.error("hover_set_horiz_trans_limits(): Wrong limits object"):(c.CI(a,b),y.V(a),q.sync_transform(a)):l.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};a.hover_get_horiz_trans_limits=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Dd?(b=b||{},b.min=d.Dd.min,b.max=d.Dd.max,b):null};a.hover_switch_horiz_rotation=function(a,b){if(!c.is_hover_camera(a))return l.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.A.ui=b};a.is_static_camera=c.is_static_camera;a.is_target_camera=c.is_target_camera;a.is_eye_camera=c.is_eye_camera;a.is_hover_camera=c.is_hover_camera;a.get_move_style=function(a){return f.is_camera(a)?c.get_move_style(a):(l.error("get_move_style(): Wrong camera object"),
null)};a.set_translation=function(a,b){if(f.is_camera(a)){var d=a.A;if(c.is_target_camera(a)){var e=p.get_trans_view(d.D),e=v.subtract(b,e,w);v.add(e,d.pivot,d.pivot)}else c.is_hover_camera(a)&&(e=p.get_trans_view(d.D),e=v.subtract(b,e,w),v.add(e,d.wc,d.wc));y.set_translation(a,b);y.V(a);q.sync_transform(a)}else l.error("set_translation(): Wrong camera object")};a.get_translation=function(a,b){if(!f.is_camera(a))return l.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);
return y.get_translation(a,b)};a.rotate_camera=function(a,b,d,e){f.is_camera(a)?(e?c.dV(a,b,d):c.sU(a,b,d),y.V(a),q.sync_transform(a)):l.error("rotate_camera(): Wrong camera object")};a.set_velocities=function(a,b){if(f.is_camera(a)){var c=a.A;"number"==typeof b.trans&&(c.Sp=d.clamp(b.trans,0,Infinity));"number"==typeof b.rot&&(c.Rp=d.clamp(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.Tp=d.clamp(b.zoom,0,.99))}else l.error("set_velocities(): Wrong camera object")};a.get_velocities=function(a,b){if(!f.is_camera(a))return l.error("get_velocities(): Wrong camera object"),
null;var c=a.A;b=b||{};b.trans=c.Sp;b.rot=c.Rp;b.zoom=c.Tp;return b};a.is_look_up=function(a){if(!f.is_camera(a))return l.error("is_look_up(): Wrong camera object"),!1;a=p.get_quat_view(a.A.D);return 0<=d.quat_to_dir(a,d.AXIS_MZ,w)[1]};a.get_camera_angles=function(a,b){if(!f.is_camera(a))return l.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.get_camera_angles(a,b);return b};a.get_camera_angles_char=function(a,b){if(!f.is_camera(a))return l.error("get_camera_angles_char(): Wrong camera object"),
null;b=b||new Float32Array(2);c.get_camera_angles_char(a,b);return b};a.get_camera_angles_dir=function(a,b){b=b||new Float32Array(2);var e=v.normalize(a,w),e=d.oI(d.AXIS_MZ,e,k);d.correct_cam_quat_up(e,!0);c.jA(e,b);return b};a.set_stereo_distance=function(a,b){if(f.is_camera(a))for(var d=x.get_active(),d=f.Da(a,d).ja,e=0;e<d.length;e++){var g=d[e];g.type!=c.Dc&&g.type!=c.Lc&&g.type!=c.kf&&g.type!=c.Ne||c.fV(g,b,g.Lf)}else l.error("set_stereo_distance(): Wrong camera object")};a.get_stereo_distance=
function(a){if(!f.is_camera(a))return l.error("get_stereo_distance(): Wrong camera object"),0;var b=x.get_active();a=f.Da(a,b).ja;for(b=0;b<a.length;b++){var d=a[b];if(d.type==c.Dc||d.type==c.Lc)return d.vl}return 0};a.set_eye_distance=function(a,b){if(f.is_camera(a)){var d=x.get_active(),d=f.Da(a,d).ja;c.set_eye_distance(d,b)}else l.error("set_eye_distance(): Wrong camera object")};a.get_eye_distance=function(a){if(!f.is_camera(a))return l.error("get_eye_distance(): Wrong camera object"),0;var b=
x.get_active();a=f.Da(a,b).ja;for(b=0;b<a.length;b++){var d=a[b];if(d.type==c.Dc||d.type==c.Lc||d.type==c.kf||d.type==c.Ne)return d.Lf}return 0};a.set_vertical_axis=function(a,b){f.is_camera(a)?(v.copy(b,a.A.pe),y.V(a),q.sync_transform(a)):l.error("set_vertical_axis(): Wrong camera object")};a.get_vertical_axis=function(a,b){if(f.is_camera(a))return b||(b=v.create()),v.copy(a.A.pe,b),b;l.error("get_vertical_axis(): Wrong camera object")};a.translate_view=function(a,b,d){if(f.is_camera(a)){var e=x.get_active();
a=f.Da(a,e).ja;for(e=0;e<a.length;e++){var g=a[e];v.set(-b,-d,0,g.nt.trans);g.xc?c.HI(g,!1):c.set_projection(g,!1)}}else l.error("translate_view(): Wrong camera object")};a.get_view_vector=e;a.get_fov=function(a){if(!f.is_camera(a))return l.error("get_fov(): Wrong camera object"),0;var b=x.get_active();a=f.Da(a,b).ja;return c.get_fov(a[0])};a.set_fov=function(a,b){if(f.is_camera(a))for(var d=x.get_active(),d=f.Da(a,d).ja,e=0;e<d.length;e++){var g=d[e];c.set_fov(g,b);g.xc?c.HI(g,!1):c.set_projection(g,
!1)}else l.error("set_fov(): Wrong camera object")};a.set_hmd_fov=function(){l.ga("set_hmd_fov() deprecated")};a.correct_up=function(a,b,d){f.is_camera(a)?(b=b||a.A.pe,c.correct_up(a,b,d||!1),y.V(a),q.sync_transform(a)):l.error("correct_up(): Wrong camera object")};a.set_ortho_scale=function(a,b){if(f.is_camera(a)&&c.is_ortho_camera(a)){var d=a.A;if(c.is_target_camera(a)){var e=p.get_trans_view(d.D),e=v.dist(e,d.pivot);d.Rk=b/2*d.Qk/e}else c.is_hover_camera(a)?(e=p.get_trans_view(d.D),e=v.distance(e,
d.wc),d.Rk=b/2*d.Qk/e):(d=x.get_active(),f.Da(a,d).ja[0].mc=b/2);c.BW(a)}else l.error("set_ortho_scale(): Wrong camera object")};a.get_ortho_scale=function(a){if(!f.is_camera(a)||!c.is_ortho_camera(a))return l.error("get_ortho_scale(): Wrong camera object"),0;var b=x.get_active();return 2*f.Da(a,b).ja[0].mc};a.is_ortho_camera=function(a){return f.is_camera(a)?c.is_ortho_camera(a):(l.error("is_ortho_camera(): Wrong camera object"),!1)};a.calc_ray=function(a,e,k,r){if(!f.is_camera(a))return l.error("calc_ray(): Wrong camera object"),
null;var g=x.get_active(),q=f.Da(a,g).ja[0];r&&3==r.length?l.ga('dest parameter in the function "calc_ray" should be type of parametric line.'):r=r||new Float32Array(6);switch(q.type){case c.Kc:case c.lf:case c.Dc:case c.Lc:var u=Math.tan(c.IR(q)/2),t=u*q.qb,g=w;e=b.Hq(e,k,E,q);g[0]=(2*e[0]/q.width-1)*t;g[1]=(1-2*e[1]/q.height)*u;g[2]=-1;p.transform_dir_vec3(g,a.A.D,g);v.normalize(g,g);3==r.length?v.copy(g,r):(a=y.get_translation(a,n),h.set_pline_initial_point(r,a),h.set_pline_directional_vec(r,g));
return r;case c.re:return g=w,e=b.Hq(e,k,E,q),g[0]=(2*e[0]/q.width-1)*q.top*q.qb,g[1]=(1-2*e[1]/q.height)*q.top,g[2]=0,p.transform_vec3(g,a.A.D,g),v.copy(g,r),a=p.get_quat_view(a.A.D,C),v.transformQuat(d.AXIS_MZ,a,g),h.set_pline_directional_vec(r,g),r;default:return l.error("calc_ray(): Non-compatible camera"),r}};a.project_point=function(a,b,d){if(!f.is_camera(a))return l.error("project_point(): Wrong camera object"),null;d=d||new Float32Array(2);return c.project_point(a,b,d)};a.has_distance_limits=
function(a){return(c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.A.Kb};a.has_vertical_rot_limits=function(a){return(c.is_eye_camera(a)||c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.A.Xa};a.has_horizontal_rot_limits=function(a){return(c.is_target_camera(a)||c.is_eye_camera(a))&&null!==a.A.Vb};a.has_vertical_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.A.Ed};a.has_horizontal_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.A.Dd};a.get_frustum_planes=
function(a,b){if(!f.is_camera(a))return l.error("get_frustum_planes(): Wrong camera object"),null;var c=x.get_active(),c=f.Da(a,c).ja[0].Bm;r.copy(c.left,b.left);r.copy(c.right,b.right);r.copy(c.top,b.top);r.copy(c.bottom,b.bottom);r.copy(c.near,b.near);r.copy(c.far,b.far);return b};a.set_projection=function(a,b){f.is_camera(a)?c.aV(a,b):l.error("set_projection(): Wrong camera object")}};b4w.module.config=function(a,t){var e=t("__config"),c=t("__compat"),b=t("__debug"),h=t("__data"),f=t("__print");a.P_LOW=e.P_LOW;a.P_HIGH=e.P_HIGH;a.P_ULTRA=e.P_ULTRA;a.P_CUSTOM=e.P_CUSTOM;a.P_AUTO=e.P_AUTO;a.set=e.set;a.get=e.get;a.reset=e.reset;a.reset_limits=e.reset_limits;a.get_std_assets_path=e.get_assets_path;a.get_assets_path=e.get_assets_path;a.apply_quality=function(a){h.is_primary_loaded()?f.error("Cannot change quality profile after a scene is loaded."):(e.set("quality",a),b.sv()&&(e.apply_quality(),
c.BI(b.sv(),!1)))}};b4w.module.controls=function(a,t){var e=t("__controls"),c=t("__physics"),b=t("__print");a.CT_POSITIVE=e.CT_POSITIVE;a.CT_CONTINUOUS=e.CT_CONTINUOUS;a.CT_TRIGGER=e.CT_TRIGGER;a.CT_SHOT=e.CT_SHOT;a.CT_LEVEL=e.CT_LEVEL;a.CT_CHANGE=e.CT_CHANGE;a.KEY_BACKSPACE=8;a.KEY_TAB=9;a.KEY_ENTER=13;a.KEY_SHIFT=16;a.KEY_CTRL=17;a.KEY_ALT=18;a.KEY_PAUSE=19;a.KEY_CAPSLOCK=20;a.KEY_ESC=27;a.KEY_SPACE=32;a.KEY_LEFT=37;a.KEY_UP=38;a.KEY_RIGHT=39;a.KEY_DOWN=40;a.KEY_1=49;a.KEY_2=50;a.KEY_3=51;a.KEY_4=52;a.KEY_5=53;a.KEY_6=
54;a.KEY_7=55;a.KEY_8=56;a.KEY_9=57;a.KEY_A=65;a.KEY_B=66;a.KEY_C=67;a.KEY_D=68;a.KEY_E=69;a.KEY_F=70;a.KEY_G=71;a.KEY_H=72;a.KEY_I=73;a.KEY_J=74;a.KEY_K=75;a.KEY_L=76;a.KEY_M=77;a.KEY_N=78;a.KEY_O=79;a.KEY_P=80;a.KEY_Q=81;a.KEY_R=82;a.KEY_S=83;a.KEY_T=84;a.KEY_U=85;a.KEY_V=86;a.KEY_W=87;a.KEY_X=88;a.KEY_Y=89;a.KEY_Z=90;a.KEY_NUM0=96;a.KEY_NUM1=97;a.KEY_NUM2=98;a.KEY_NUM3=99;a.KEY_NUM4=100;a.KEY_NUM5=101;a.KEY_NUM6=102;a.KEY_NUM7=103;a.KEY_NUM8=104;a.KEY_NUM9=105;a.KEY_MULT=106;a.KEY_ADD=107;a.KEY_SUB=
109;a.KEY_DEC_POINT=110;a.KEY_DIV=111;a.KEY_SEMI_COLON=186;a.KEY_EQUAL_SIGN=187;a.KEY_COMMA=188;a.KEY_DASH=189;a.KEY_PERIOD=190;a.KEY_FORWARD_SLASH=191;a.KEY_GRAVE_ACCENT=192;a.KEY_LEFT_SQ_BRACKET=219;a.KEY_BACK_SLASH=220;a.KEY_RIGHT_SQ_BRACKET=221;a.KEY_SINGLE_QUOTE=222;a.PL_SINGLE_TOUCH_MOVE=e.PL_SINGLE_TOUCH_MOVE;a.PL_MULTITOUCH_MOVE_ZOOM=e.PL_MULTITOUCH_MOVE_ZOOM;a.PL_MULTITOUCH_MOVE_PAN=e.PL_MULTITOUCH_MOVE_PAN;a.PL_MULTITOUCH_MOVE_ROTATE=e.PL_MULTITOUCH_MOVE_ROTATE;a.default_AND_logic_fun=e.default_AND_logic_fun;
a.default_OR_logic_fun=e.default_OR_logic_fun;a.create_gamepad_btn_sensor=e.create_gamepad_btn_sensor;a.create_gamepad_axis_sensor=e.create_gamepad_axis_sensor;a.create_gamepad_position_sensor=e.create_gamepad_position_sensor;a.create_gamepad_orientation_sensor=e.create_gamepad_orientation_sensor;a.create_custom_sensor=e.create_custom_sensor;a.create_keyboard_sensor=e.create_keyboard_sensor;a.create_collision_sensor=function(a,b,c){return e.create_collision_sensor(a,b||"ANY",c||!1)};a.create_collision_impulse_sensor=
e.create_collision_impulse_sensor;a.create_ray_sensor=function(a,f,q,l,x,y,p){if(a&&!c.sa(a))b.ga("No physics for object "+a.name);else return e.create_ray_sensor(a,f,q,l||"ANY",x||!1,y||!1,p||!1)};a.create_mouse_click_sensor=e.create_mouse_click_sensor;a.create_mouse_wheel_sensor=e.create_mouse_wheel_sensor;a.create_mouse_move_sensor=e.create_mouse_move_sensor;a.create_plock_mouse_sensor=e.create_plock_mouse_sensor;a.create_plock_sensor=e.create_plock_sensor;a.create_touch_move_sensor=e.create_touch_move_sensor;
a.create_touch_zoom_sensor=e.create_touch_zoom_sensor;a.create_touch_rotate_sensor=e.create_touch_rotate_sensor;a.create_touch_click_sensor=e.create_touch_click_sensor;a.create_motion_sensor=e.create_motion_sensor;a.create_vertical_velocity_sensor=e.create_vertical_velocity_sensor;a.create_gyro_angles_sensor=e.create_gyro_angles_sensor;a.create_gyro_quat_sensor=e.create_gyro_quat_sensor;a.create_gyro_delta_sensor=e.create_gyro_delta_sensor;a.create_hmd_quat_sensor=e.create_hmd_quat_sensor;a.create_hmd_position_sensor=
e.create_hmd_position_sensor;a.create_timer_sensor=function(a,b){return e.create_timer_sensor(a,b||!1)};a.reset_timer_sensor=e.reset_timer_sensor;a.create_elapsed_sensor=e.create_elapsed_sensor;a.create_timeline_sensor=e.create_timeline_sensor;a.create_selection_sensor=function(a,b){return e.create_selection_sensor(a,b||!1)};a.create_callback_sensor=function(a,b){return e.create_callback_sensor(a,b||0)};a.set_custom_sensor=function(a,b){e.DU(a,b)};a.get_custom_sensor=function(a){return a.value};a.get_sensor_value=
e.get_sensor_value;a.get_sensor_payload=e.get_sensor_payload;a.create_sensor_manifold=function(a,b,c,l,x,y,p){x=x||e.default_AND_logic_fun;e.create_sensor_manifold(a,b,c,l,x,y,void 0===p?null:p)};a.create_kb_sensor_manifold=function(a,b,c,l,x,y){l=e.create_keyboard_sensor(l);e.create_sensor_manifold(a,b,c,[l],e.default_AND_logic_fun,x,void 0===y?null:y)};a.check_sensor_manifolds=function(a){return e.check_sensor_manifold(a,null)};a.check_sensor_manifold=e.check_sensor_manifold;a.remove_sensor_manifold=
e.remove_sensor_manifold;a.reset=e.reset;a.set_plock_smooth_factor=e.set_plock_smooth_factor};b4w.module.constraints=function(a,t){var e=t("__camera"),c=t("__constraints"),b=t("__obj_util"),h=t("__physics"),f=t("__print"),q=t("__transform"),l=t("__util"),x=t("__vec3");a.append_stiff=function(a,e,d,l,r){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||new Float32Array(3),r=r||1,l=l?l:[0,0,0,1],e instanceof Array&&2==e.length?c.UM(a,e[0],e[1],d,l,r):c.$D(a,e,d,l,r),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):f.error("Can not apply constraint. Object and target must be different."):
f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_semi_stiff=function(a,e,d,v,r,x,t,w){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(r=l.ge(r)?r:Math.PI/2,x=l.ge(x)?x:-Math.PI/2,t=l.ge(t)?t:Math.PI/2,w=l.ge(w)?w:-Math.PI/2,d=d||new Float32Array(3),v=v?new Float32Array(v):null,c.SM(a,e,d,v,r,x,t,w),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.append_semi_stiff_cam=function(b,c,d,h,l,q,x,t){f.fd("append_semi_stiff_cam","append_semi_stiff");e.is_eye_camera(b)?a.append_semi_stiff(b,c,d,h,l,q,x,t):f.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};a.append_semi_soft_cam=function(b,c,d,h){f.fd("append_semi_soft_cam","append_semi_soft");e.is_eye_camera(b)?a.append_semi_soft(b,c,d,h):f.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};a.append_semi_soft=
function(a,e,d,v){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){if(!l.ge(v)||0>v)v=.25;d=d||new Float32Array(3);c.RM(a,e,d,v);q.V(a);h.sync_transform(a)}else f.error("Constraint recursion is forbidden.");else f.error("Can not apply constraint. Object and target must be different.");else f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_trans=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||new Float32Array(3),c.VM(a,e,d),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):
f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_loc=function(a,e,d,l,r){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){l=l||!1;d=d||"XYZ";r=r||1;var p=q.get_translation(a,new Float32Array(3)),v=new Float32Array(3);v[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;v[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;v[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;c.JM(a,e,p,v,l,r);q.V(a);h.sync_transform(a)}else f.error("Constraint recursion is forbidden.");
else f.error("Can not apply constraint. Object and target must be different.");else f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_trans=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(c.LM(a,e,d||1),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_rot=function(a,e,d,l,r){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,
e)){d=d||"XYZ";var p=new Float32Array(3);p[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;p[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;p[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;c.KM(a,e,p,l||!1,r||1);q.V(a);h.sync_transform(a)}else f.error("Constraint recursion is forbidden.");else f.error("Can not apply constraint. Object and target must be different.");else f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_trans_rot=function(a,e,d,l){b.is_dynamic(a)?c.yh(a,e)?
c.xh(a,e)?(d=d||new Float32Array(3),l=l?new Float32Array(l):[0,0,0,1],c.WM(a,e,d,l),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_track=function(a,e,d,v,r,t){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){var p=l.AXIS_Y;"-Y"==d?p=l.AXIS_MY:"Y"==d?p=l.AXIS_Y:"-X"==d?p=l.AXIS_MX:"X"==d?p=l.AXIS_X:"-Z"==d?p=l.AXIS_MZ:"Z"==d&&(p=l.AXIS_Z);
d=l.AXIS_Z;"X"==v?d=l.AXIS_X:"Y"==v&&(d=l.AXIS_Y);1==Math.abs(x.dot(p,d))?f.error("Can not use parallel vectors for track and up axes."):(c.XM(a,e,p,d,r||!1,t||1),q.V(a),h.sync_transform(a))}else f.error("Constraint recursion is forbidden.");else f.error("Can not apply constraint. Object and target must be different.");else f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_follow=function(a,e,d,l){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(c.OM(a,e,d,l),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):
f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_viewport=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||{},c.append_stiff_viewport(a,e,d),q.V(a),h.sync_transform(a)):f.error("Constraint recursion is forbidden."):f.error("Can not apply constraint. Object and target must be different."):f.error('Wrong object: "'+a.name+'" is not dynamic.')};a.remove=function(a,b){b=b||!1;a.uc&&c.remove(a,b);b&&
q.V(a)}};b4w.module.container=function(a,t){var e=t("__container"),c=t("__print");a.get_canvas=e.get_canvas;a.get_canvas_hud=e.get_canvas_hud;a.get_container=e.get_container;a.insert_to_container=function(a,h){2!=arguments.length?c.error("insert_to_container(): two arguments required"):a&&h&&e.insert_to_container(a,h)};a.set_canvas_offsets=function(a,h){c.ga("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return e.set_canvas_offsets(a,h)};
a.update_canvas_offsets=function(){c.ga("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");e.update_canvas_offsets()};a.client_to_canvas_coords=function(a,c,f){f||(f=new Float32Array(2));return e.client_to_canvas_coords(a,c,f)};a.client_to_element_coords=function(a,c,f,q){q||(q=new Float32Array(2));return e.client_to_element_coords(a,c,f,q)};a.get_coords_target_space=function(a,c,f){f||(f=new Float32Array(2));return e.get_coords_target_space(a,
c,f)};a.force_offsets_updating=function(){c.ga("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");e.force_offsets_updating()};a.resize=function(a,c,f){e.resize(a,c,f)};a.resize_to_container=function(a){e.resize_to_container(a||!1)}};b4w.module.data=function(a,t){var e=t("__data"),c=t("__loader");a.load=e.load;a.unload=function(a){e.unload(a|0)};a.set_debug_resources_root=e.set_debug_resources_root;a.is_primary_loaded=e.is_primary_loaded;a.is_idle=c.Lm;a.load_and_add_new=e.load;a.cleanup=a.unload;a.activate_media=e.activate_media;a.prefetch=e.prefetch;a.unfetch=e.unfetch};b4w.module.debug=function(a,t){function e(a,b,c,d){D.group(z.Rx(a),d);for(a=0;a<c.length;a++){var e=c[a],f=e.A;if(f.type==d)for(var g=!1,l=0;l<b.length;l++){for(var h=b[l].La,k=0;k<h.length;k++){var m=h[k];if(m.$b&&m.ug==f){"STATIC"==d?D.ld(e.Fd,e):D.ld(e.name,e);g=!0;break}}if(g)break}}D.groupEnd()}function c(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var e=d.split(" ")[0];e in b||(b[e]=0);b[e]++}}d=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=
b[e];a+=b[e];break;case "ATTRIB":d+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function b(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;D.error(c.responseText);throw"Error POST XHR: "+c.status;}function h(a){a.sort(function(a,b){return b.cA.ALL_OPS-a.cA.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.cA,e=c.gX,g=f(c.JP),g=
g.length?"\t\t("+g.join(", ")+")":"\t\t(NA)";D.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,g);D.groupCollapsed("directives");for(var l=c.eb.Ah.slice().sort(),g=0;g<l.length;g++){var h=l[g];D.ld(h[0],h[1])}D.groupEnd();D.groupCollapsed("node elements");l=c.eb.Ze;for(g=0;g<l.length;g++)D.ld(l[g]);D.groupEnd();D.groupCollapsed("vert source");D.ld(c.eX);D.groupEnd();D.groupCollapsed("vert translated source");D.ld(c.fX);D.groupEnd();
g=["ALL_OPS","TEX_OPS","ATTRIBS"];D.groupCollapsed("vert ops stats");for(var k in e)-1==g.indexOf(k)&&D.ld(k,e[k]);D.groupEnd();D.groupCollapsed("vert assembly");D.ld(c.dX);D.groupEnd();D.groupCollapsed("frag source");D.ld(c.KQ);D.groupEnd();D.groupCollapsed("frag translated source");D.ld(c.LQ);D.groupEnd();D.groupCollapsed("frag ops stats");for(k in d)-1==g.indexOf(k)&&D.ld(k,d[k]);D.groupEnd();D.groupCollapsed("frag assembly");D.ld(c.CQ);D.groupEnd();D.groupEnd()}}function f(a){for(var b=[],c=N.yr(),
d=0;d<c.length;d++)for(var e=c[d],f=F.Sb(e,"MESH",F.DATA_ID_ALL),g=0;g<f.length;g++){var l=u.Da(f[g],e);if(l&&l.$.length)for(var l=l.$,h=0;h<l.length;h++){var k=l[h];if(k.yb==a)for(var m=0;m<k.cc.length;m++){var n=k.cc[m];-1==b.indexOf(n)&&b.push(n)}}}return b}function q(a){function b(){ha.push(b);return a.apply(a,arguments)}return b}function l(a,b,c,d,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;
for(var f=0;f<a.length;f++){if("number"!=typeof b[f]||isNaN(b[f]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[f]||isNaN(a[f]))throw"debug.eqv: wrong result data type";if(b[f]>a[f]+c||b[f]<a[f]-c)throw"debug.eqv: wrong result";}x(d,e,"eqv")}function x(a,b,c){a=a||"";b=b||"";if(aa){if(""==a)throw"debug."+c+': no error is expected, but got "'+Z+'"';if(Z!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+Z+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';
if(ma){if(""==b)throw"debug."+c+': no warning is expected, but got "'+pa+'"';if(pa!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+pa+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';aa=ma=!1}function y(){T&&(F.Yo(T,!1,!1,!1),E.XH(T),F.Yo(T,!0,!0,!0),F.remove_object(T),T=null)}var p=t("__batch"),d=t("__config"),v=t("__compat"),r=t("__controls"),H=t("__container"),E=t("__data"),w=t("__debug"),n=t("__extensions"),C=t("__geometry"),k=t("__loader"),F=t("__objects"),
u=t("__obj_util"),g=t("__physics"),D=t("__print"),B=t("__renderer"),N=t("__scenes"),L=t("__scenegraph"),A=t("__sfx"),G=t("__shaders"),z=t("__subscene"),I=t("__textures"),S=t("__transform"),m=t("__tsr"),K=t("__util"),U=t("__vec3"),Q=m.create(),R=new Float32Array(2),ga=U.create(),ra=U.create(),T=null,ia=d.L,ha=[],pa="",Z="",ma=!1,aa=!1,fa=!0,wa=new Uint8Array(4);a.DV_NONE=w.DV_NONE;a.DV_OPAQUE_WIREFRAME=w.DV_OPAQUE_WIREFRAME;a.DV_TRANSPARENT_WIREFRAME=w.DV_TRANSPARENT_WIREFRAME;a.DV_FRONT_BACK_VIEW=
w.DV_FRONT_BACK_VIEW;a.DV_BOUNDINGS=w.DV_BOUNDINGS;a.DV_CLUSTERS_VIEW=w.DV_CLUSTERS_VIEW;a.DV_BATCHES_VIEW=w.DV_BATCHES_VIEW;a.DV_RENDER_TIME=w.DV_RENDER_TIME;a.physics_stats=function(){g.QP()};a.physics_id=function(a){D.log("O",g.xQ(a));var b=g.VQ();if(b)for(var b=b.Ac.La,c=0;c<b.length;c++){var d=b[c];d.N.ia==a&&D.log("B",d)}else D.error("No active physics scene.")};a.visible_objects=function(){for(var a=N.get_active(),b=F.Sb(a,"MESH",F.DATA_ID_ALL),a=N.Bg(a,[z.Hb,z.bd,z.Yd]),c=0;c<a.length;c++){var d=
a[c],f=d.Za;f.length&&(e(d,f,b,"DYNAMIC"),e(d,f,b,"STATIC"))}};a.object_info=function(a){for(var b=N.get_active(),c=F.Sb(b,"MESH",F.DATA_ID_ALL),d=0;d<c.length;d++){var e=c[d];if(e.name==a){D.log("Object",e);for(var f=N.hA(b),g=0;g<f.length;g++){for(var l=f[g],h=[],k=l.Za,m=0;m<k.length;m++)for(var n=k[m].La,p=0;p<n.length;p++)n[p].ug==e.A&&h.push(n[p]);D.log("Subscene "+l.type,h)}}}};a.objects_stat=function(){var a=N.get_active();D.log("Armatures: "+F.Sb(a,"ARMATURE",F.DATA_ID_ALL).length);D.log("Cameras: "+
F.Sb(a,"CAMERA",F.DATA_ID_ALL).length);D.log("Curves: "+F.Sb(a,"CURVE",F.DATA_ID_ALL).length);D.log("Empties: "+F.Sb(a,"EMPTY",F.DATA_ID_ALL).length);D.log("Lamps: "+F.Sb(a,"LAMP",F.DATA_ID_ALL).length);D.log("Meshes: "+F.Sb(a,"MESH",F.DATA_ID_ALL).length);D.log("Speakers: "+F.Sb(a,"SPEAKER",F.DATA_ID_ALL).length)};a.num_vertices=function(){for(var a=0,b=N.get_active(),b=N.Bg(b,[z.Hb,z.bd,z.Yd]),c=0;c<b.length;c++)for(var d=b[c].Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){var l=f[g].Aa;
l&&(a+=l.num_vertices)}return a};a.num_triangles=function(){for(var a=0,b=N.get_active(),b=N.Bg(b,[z.Hb,z.bd,z.Yd]),c=0;c<b.length;c++)for(var d=b[c].Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){var l=f[g].Aa;l&&(a+=l.num_triangles)}return a};a.num_draw_calls=function(){for(var a=N.get_active(),b=N.Bg(a,[z.Hb,z.bd,z.Yd,z.Zd,z.Xf]),c=0,d=0;d<b.length;d++)for(var e=b[d],e=e.Za,f=0;f<e.length;f++)c+=e[f].La.length;a=N.Bg(a,[z.ud,z.jf]);for(d=0;d<a.length;d++)for(e=a[d],e=e.Za,f=0;f<e.length;f++)c+=
6*e[f].La.length;return c};a.num_shaders=function(){return K.zj(G.fG())};a.geometry_stats=function(){for(var a=N.get_active(),b=N.hA(a),a={},c=0;c<b.length;c++){var d=b[c];if(d.type!=z.qk&&d.type!=z.qh)for(var e=d.Za,f=0;f<e.length;f++)for(var g=e[f].La,l=0;l<g.length;l++){var h=g[l].Aa,k=g[l].ug;h&&(d.type!=z.Le&&d.type!=z.rh||k.Mw||k.Lw)&&(a[h.id]=h)}}var c=b=0,m;for(m in a)d=a[m].ra,d.$n&&(c+=d.$n/1048576),b+=d.bo/1048576;return{vbo_memory:b,ibo_memory:c}};a.num_textures=function(){for(var a=[],
b=0,c=N.get_active(),c=N.Bg(c,[z.Hb,z.bd,z.Yd]),d=0;d<c.length;d++)for(var e=c[d].Za,f=0;f<e.length;f++)for(var g=e[f].La,l=0;l<g.length;l++){var h=g[l].Aa;if(h)for(var h=h.ma,k=0;k<h.length;k++){var m=h[k];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var n=m.Bb;-1===a.indexOf(n)&&(a.push(n),m=m.width*m.height*4/1048576/m.Uq,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};a.num_render_targets=function(){for(var a=[],b=0,c=N.get_active(),c=N.hA(c),d=0;d<c.length;d++){var e=c[d];if(e.type!=
z.qk){var f=e.H,g=[f.Rb,f.wf];g.push.apply(g,e.nh);for(e=0;e<g.length;e++){var l=g[e];I.Go(l)&&-1==a.indexOf(l)&&(a.push(l),b+=f.width*f.height*I.HR(l))}}}return{number:a.length,memory:b/1024/1024}};a.make_camera_frustum_shot=function(){var a=N.get_active();(a=N.Tb(a,z.Hb))&&N.oH(a.H,a,[1,1,0])};a.make_light_frustum_shot=function(){var a=N.get_active(),b=N.Tb(a,z.Hb),a=N.Bg(a,[z.wd]);if(b)for(var c=0;c<a.length;c++){var d=a[c],e;switch(c){case 0:e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,
0,1];break;default:e=[1,0,1]}N.oH(d.H,b,e)}};a.scenegraph_to_dot=function(){for(var a=N.yr(),b=0;b<a.length;b++)D.log("\n"+L.OP(N.tv(a[b])))};a.loading_graph_to_dot=function(a){D.log("\n"+k.MR(a|0))};a.controls_info=r.debug;a.object_distance=function(a,b){var c=m.get_trans_view(a.A.D),d=m.get_trans_view(b.A.D);return U.dist(c,d)};a.msg=w.msg;a.fbmsg=w.fbmsg;a.print_telemetry=w.print_telemetry;a.plot_telemetry=w.plot_telemetry;a.fbres=function(a,b){function c(){w.fbmsg("FBRES",a());setTimeout(c,b)}
b||(b=16);c()};a.assert_constants=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),f=new Float32Array([0,-1,0]),g=new Float32Array([0,0,-1]);if(!K.xk(new Float32Array(3),K.Vy))throw"Wrong VEC3_IDENT";if(!K.xk(a,K.wt))throw"Wrong QUAT4_IDENT";if(!K.xk(b,K.AXIS_X))throw"Wrong AXIS_X";if(!K.xk(c,K.AXIS_Y))throw"Wrong AXIS_Y";if(!K.xk(d,K.AXIS_Z))throw"Wrong AXIS_Z";if(!K.xk(e,K.AXIS_MX))throw"Wrong AXIS_MX";
if(!K.xk(f,K.AXIS_MY))throw"Wrong AXIS_MY";if(!K.xk(g,K.AXIS_MZ))throw"Wrong AXIS_MZ";};a.mute_music=function(){for(var a=A.get_speaker_objects(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==A.pA(c)&&A.mute(c,!0)}};a.check_finite=w.check_finite;a.set_debug_params=function(a){var b=N.get_active(),b=N.Bg(b,[z.qh]);if(b.length)for(var c=0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case w.DV_NONE:case w.DV_OPAQUE_WIREFRAME:case w.DV_TRANSPARENT_WIREFRAME:case w.DV_FRONT_BACK_VIEW:case w.DV_BOUNDINGS:case w.DV_CLUSTERS_VIEW:case w.DV_BATCHES_VIEW:case w.DV_RENDER_TIME:N.LU(d,
a.debug_view_mode);break;default:D.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&N.KU(d,a.debug_colors_seed);"number"==typeof a.jU&&N.cV(d,a.jU);"object"==typeof a.wireframe_edge_color&&N.lV(d,K.f32(a.wireframe_edge_color))}else D.error("Debugging is not available on the scene.")};a.get_error_quantity=function(){return D.lR()};a.get_warning_quantity=function(){return D.JR()};a.clear_errors_warnings=function(){return D.clear_errors_warnings()};a.analyze_shaders=
function(a){var d=G.fG(),e=0,f;for(f in d)a&&-1===f.indexOf(a)||e++;var e="of "+e+" analyzing...",g={};for(f in d)if(!a||-1!==f.indexOf(a)){var l=d[f],k;k=l.wy;var m=l.jv,p=n.hR();if(p){var r=p.getTranslatedShaderSource(k),p=p.getTranslatedShaderSource(m);if(v.detect_mobile())var r=r.replace("#version","#version 300 //"),p=p.replace("#version","#version 300 //"),q=b("/analyze_shader/vert_gles",r),u=b("/analyze_shader/frag_gles",p);else r=r.replace("#version","#version 400 //"),p=p.replace("#version",
"#version 400 //"),q=b("/analyze_shader/vert",r),u=b("/analyze_shader/frag",p);var x=c(q),t=c(u);k={eX:w.sv().getShaderSource(k),fX:r,dX:q,gX:x,KQ:w.sv().getShaderSource(m),LQ:p,CQ:u,cA:t}}else D.warn("WEBGL_debug_shaders extension not found"),k=void 0;if(k){var m=l.eb,y=m.Pf+" + "+m.we;k.JP=l;k.eb=m;l=g[y]=g[y]||[];l.push(k);D.ld(e)}}for(y in g)D.group("%c"+y,"color: #800"),l=g[y],h(l),D.groupEnd()};a.fake_load=w.fake_load;a.test_performance=function(b){if(G.LE())if(n.mA()){var c=ia.gl_debug;ia.gl_debug=
!0;var d=L.XO();N.VF(null,d);for(var e=L.Lb(d,z.iq),f=e.H,d=0;5>d;d++)B.uj(e);ia.gl_debug=c;window.setTimeout(function(){w.TT(e);var a=e.vf;b(a,f.width*f.height*40/(a/1E3)/Math.pow(10,9))},100)}else b(0,0);else window.setTimeout(function(){a.test_performance(b)},100)};a.calc_vbo_garbage_byte_size=w.calc_vbo_garbage_byte_size;a.show_vbo_garbage_info=w.show_vbo_garbage_info;a.print_batches_stat=w.print_batches_stat;a.start_debug=function(a){ha=[];fa=!0;a=t(a);for(var b in a)"function"===typeof a[b]&&
(a[b]=q(a[b]))};a.check_debug_result=function(){return fa};a.test=function(a,b){var c=t("__print"),d=c.error,e=c.ga,f=c.warn;c.error=c.ga=function(){Z=c.aF(arguments,"B4W ERROR").join(" ");aa=!0};c.warn=function(){pa=c.aF(arguments,"B4W WARN").join(" ");ma=!0};aa=ma=!1;try{b();var g=!0}catch(ca){fa=!1,console.error('Test "'+a+'" failed with exception: "'+ca+'"'),aa=ma=g=!1}c.error=d;c.ga=e;c.warn=f;return g};a.pix=function(a){var b=H.qG(),c=H.pG(),d=b/2,e=c/2;H.resize(b,c,!1);b=N.get_active().J.wa;
(c=L.yQ(b))||K.K("Couldn't find onscreen subscene");b=c.H;d=H.Hq(d,e,R,c.H);d[1]=b.height-d[1];d=B.bx(b.Ve,d[0],d[1],1,1,wa);l(a,d,1)};a.eqs=function(a,b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";x(c,d,"eqs")};a.eqv=l;a.eqf=function(a,b,c,d,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";x(d,e,"eqf")};a.eq=
function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";x(c,d,"eq")};a.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";x(b,c,"ok")};a.stat=function(a){var b=[];a=t(a);for(var c in a)-1==ha.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){D.groupCollapsed(b.length+" function(s) not tested.");for(c=0;c<b.length;c++)D.ld(b[c]);D.groupEnd()}else D.group("All functions were tested.")};a.show_normals=function(a,b,c,d){y();b=p.gb(a,b,"MAIN");if(!C.Bj(a)||!b)return D.error("Normals are not avaliable for the dynamic object:",
a.name),!1;var e=b.ra;if(!(e&&e.Eb&&e.Eb.a_position&&e.Eb.a_tbn))return D.error("Normals are not avaliable for the object:",a.name),!1;b=C.Zz(e,"a_position");var e=C.Zz(e,"a_normal"),f=S.get_tsr(a,Q);T=F.create_line("normal_line");a=new Float32Array(2*b.length);for(var g=0;g<b.length;g+=3){var l=ga;l[0]=b[g+0];l[1]=b[g+1];l[2]=b[g+2];var h=m.transform_vec3(l,f,ra);a[2*g+0]=h[0];a[2*g+1]=h[1];a[2*g+2]=h[2];h=U.scale(e.subarray(g,g+3),c,ra);l=U.add(l,h,ra);l=m.transform_vec3(l,f,ra);a[2*g+3]=l[0];a[2*
g+4]=l[1];a[2*g+5]=l[2]}c=p.qv(T);C.draw_line(c,a,!0);B.Rt(c);c.lc.set([1,1,1,1]);c.Sm=d};a.hide_normals=y};b4w.module.geometry=function(a,t){var e=t("__batch"),c=t("__geometry"),b=t("__print"),h=t("__renderer"),f=t("__tbn");a.extract_vertex_array=function(a,f,h){if(!c.Bj(a))return b.error("Wrong object:",a.name),null;if(a=e.gb(a,f,"MAIN")){if((f=a.ra)&&f.Eb&&("a_normal"==h&&f.Eb.a_tbn||f.Eb[h]))return c.Zz(f,h);b.error("Attribute not found:"+h);return null}b.error("Wrong material:",f);return null};a.extract_index_array=function(a,f){if(!c.Bj(a))return b.error("Wrong object:",a.name),null;var l=e.gb(a,
f,"MAIN");if(l){if((l=l.ra)&&l.Eb)return l.fe;b.error("Buffer data not found");return null}b.error("Wrong material:",f);return null};a.update_vertex_array=function(a,f,h,t){if(c.Bj(a))for(var l=["MAIN","SHADOW","COLOR_ID"],d=0;d<l.length;d++){var q=e.gb(a,f,l[d]);q&&(q=q.ra)&&q.Eb&&("a_normal"==h&&q.Eb.a_tbn||q.Eb[h])&&c.DJ(q,h,0,t)}else b.error("Wrong object:",a.name)};a.override_geometry=function(a,l,x,t,p){if(c.Bj(a))if(x instanceof Uint16Array||x instanceof Uint32Array)if(t instanceof Float32Array)for(var d=
["MAIN","SHADOW","COLOR_ID"],q=0;q<d.length;q++){var r=e.gb(a,l,d[q]);if(r){var y=r.ra;if(y){c.EJ(y,r.Bh,x);var E={},w;for(w in y.Eb){var n=y.Eb[w],n=t.length/3*n.oc,C=c.uo(w);E[C]||(E[C]=0);E[C]+=n}C=c.hS(E);y.kc=C;E={};for(w in y.Eb)switch(n=y.Eb[w],C=c.uo(w),E[C]||(E[C]=0),w){case "a_position":c.kt(y.kc,"a_position",t,E[C]);n.offset=E[C];n.length=t.length;E[C]+=n.length;break;case "a_tbn":var k;p&&(k=c.zE(x,t,t));var F=c.yE(x,t,k);n.length=t.length/3*n.oc;for(var u=new Float32Array(n.length),g=
0;g<u.length;g+=4)u[g]=1,u[g+3]=1;F=f.Am(F,u);c.kt(y.kc,"a_tbn",F,E[C]);n.offset=E[C];E[C]+=n.length;break;default:n.offset=E[C],n.length=t.length/3*n.oc,F=new (c.fR(C))(n.length),c.kt(y.kc,w,F,E[C]),E[C]+=n.length}c.PC(y);h.Rt(r);(r=e.lg(a,r))&&r.ra&&(r.ra=y)}}}else b.error("Wrong positions_array type");else b.error("Wrong ibo_array type");else b.error("Wrong object:",a.name)};a.set_shape_key_value=function(a,e,f){c.check_shape_keys(a)?c.AA(a,e)?c.cz(a,e,parseFloat(f)):b.error("Wrong key name:",
e):b.error("Wrong object:",a.name)};a.check_shape_keys=function(a){return c.check_shape_keys(a)};a.get_shape_keys_names=function(a){return c.check_shape_keys(a)?c.get_shape_keys_names(a):(b.error("Wrong object:",a.name),[])};a.get_shape_key_value=function(a,e){return c.check_shape_keys(a)?c.AA(a,e)?c.get_shape_key_value(a,e):(b.error("Wrong key name:",e),0):(b.error("Wrong object:",a.name),0)};a.draw_line=function(a,f,x){x=x||!1;if(f instanceof Float32Array){if(a=e.qv(a))c.draw_line(a,f,x),h.Rt(a)}else b.error("Wrong positions type")}};b4w.module.hud=function(a,t){var e=t("__hud"),c=t("__print");a.draw_mixer_strip=function(a,h,f,q,l,x,t){c.fd("draw_mixer_strip","screen.draw_mixer_strip");e.draw_mixer_strip(a,h,f,q,l,x,t)};a.plot_array=function(a,h,f,q,l,x,t){c.fd("plot_array","screen.plot_array");e.plot_array(a,h,f,q,l,x,t)}};b4w.module.input=function(a,t){function e(a){l.fd("enable_split_screen","screen.request_split_screen");var e=c.get_device_by_type_element(c.DEVICE_HMD);if(!e)return!1;if(v)return!0;var g=c.get_vector_param(e,c.iD,p),h=c.get_vector_param(e,c.jD,d);b.set_hmd_fov(a,g,h);if(g=c.get_value_param(e,E))h=x.get_active(),a=q.Da(a,h).ja,b.set_eye_distance(a,g);a={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c.get_value_param(e,c.HMD_WEBVR_TYPE)&(c.HMD_NON_WEBVR|c.HMD_WEBVR_MOBILE|c.HMD_WEBVR_DESKTOP)&&
(a.distortion_coefs=[e.distortion_coefs[0],e.distortion_coefs[1]],a.chromatic_aberration_coefs=[e.chromatic_aberration_coefs[0],e.chromatic_aberration_coefs[1],e.chromatic_aberration_coefs[2],e.chromatic_aberration_coefs[3]],e.Dn||(e.di&&e.yi&&e.ei?a.base_line_factor=(e.di-e.ei)/e.yi:e.ei||(a.base_line_factor=e.di/e.yi)),e.Hh&&e.Nl&&!e.Dn&&(a.inter_lens_factor=e.Hh/e.Nl),r.enabled||(g=1+e.distortion_coefs[0]+e.distortion_coefs[1],x.Cw(g,g)));x.set_hmd_params(a);f.resize_to_container(!0);c.reset_device(e);
return v=!0}var c=t("__input"),b=t("__camera"),h=t("__config"),f=t("__container"),q=t("__obj_util"),l=t("__print"),x=t("__scenes"),y=t("__vec4"),p=y.create(),d=y.create(),v=!1,r=h.qm,H=h.L;a.GMPD_BUTTON_12=c.GMPD_BUTTON_12;a.GMPD_BUTTON_13=c.GMPD_BUTTON_13;a.GMPD_BUTTON_15=c.GMPD_BUTTON_15;a.GMPD_BUTTON_14=c.GMPD_BUTTON_14;a.GMPD_BUTTON_3=c.GMPD_BUTTON_3;a.GMPD_BUTTON_0=c.GMPD_BUTTON_0;a.GMPD_BUTTON_1=c.GMPD_BUTTON_1;a.GMPD_BUTTON_2=c.GMPD_BUTTON_2;a.GMPD_BUTTON_5=c.GMPD_BUTTON_5;a.GMPD_BUTTON_7=
c.GMPD_BUTTON_7;a.GMPD_BUTTON_4=c.GMPD_BUTTON_4;a.GMPD_BUTTON_6=c.GMPD_BUTTON_6;a.GMPD_BUTTON_8=c.GMPD_BUTTON_8;a.GMPD_BUTTON_9=c.GMPD_BUTTON_9;a.GMPD_BUTTON_10=c.GMPD_BUTTON_10;a.GMPD_BUTTON_11=c.GMPD_BUTTON_11;a.GMPD_BUTTON_16=c.GMPD_BUTTON_16;a.GMPD_BUTTON_17=c.GMPD_BUTTON_17;a.GMPD_BUTTON_18=c.GMPD_BUTTON_18;a.GMPD_BUTTON_19=c.GMPD_BUTTON_19;a.GMPD_BUTTON_20=c.GMPD_BUTTON_20;a.GMPD_BUTTON_21=c.GMPD_BUTTON_21;a.GMPD_BUTTON_22=c.GMPD_BUTTON_22;a.GMPD_BUTTON_23=c.GMPD_BUTTON_23;a.GMPD_BUTTON_24=
c.GMPD_BUTTON_24;a.GMPD_BUTTON_25=c.GMPD_BUTTON_25;a.GMPD_TRACKPAD_BUTTON=c.GMPD_TRACKPAD_BUTTON;a.GMPD_TRIGGER_BUTTON=c.GMPD_TRIGGER_BUTTON;a.GMPD_GRIPS_BUTTON=c.GMPD_GRIPS_BUTTON;a.GMPD_MENU_BUTTON=c.GMPD_MENU_BUTTON;a.GMPD_AXIS_0=c.GMPD_AXIS_0;a.GMPD_AXIS_1=c.GMPD_AXIS_1;a.GMPD_AXIS_2=c.GMPD_AXIS_2;a.GMPD_AXIS_3=c.GMPD_AXIS_3;a.GMPD_AXIS_4=c.GMPD_AXIS_4;a.GMPD_AXIS_5=c.GMPD_AXIS_5;a.GMPD_AXIS_6=c.GMPD_AXIS_6;a.GMPD_AXIS_7=c.GMPD_AXIS_7;a.GMPD_AXIS_8=c.GMPD_AXIS_8;a.GMPD_AXIS_9=c.GMPD_AXIS_9;a.GMPD_AXIS_10=
c.GMPD_AXIS_10;a.GMPD_AXIS_11=c.GMPD_AXIS_11;a.HMD_ORIENTATION_QUAT=c.HMD_ORIENTATION_QUAT;a.HMD_POSITION=c.HMD_POSITION;a.HMD_WEBVR_TYPE=c.HMD_WEBVR_TYPE;a.HMD_WEBVR_DESKTOP=c.HMD_WEBVR_DESKTOP;a.HMD_WEBVR_MOBILE=c.HMD_WEBVR_MOBILE;a.HMD_NON_WEBVR=c.HMD_NON_WEBVR;a.HMD_WEBVR1=c.HMD_WEBVR1;a.HMD_WEBVR1_1=c.HMD_WEBVR1_1;var E=c.HMD_EYE_DISTANCE;a.HMD_EYE_DISTANCE=E;a.HMD_DISTORTION=c.HMD_DISTORTION;a.HMD_BASELINE_DIST=c.HMD_BASELINE_DIST;a.HMD_SCREEN_LENS_DIST=c.HMD_SCREEN_LENS_DIST;a.HMD_SCREEN_WIDTH=
c.HMD_SCREEN_WIDTH;a.HMD_SCREEN_HEIGHT=c.HMD_SCREEN_HEIGHT;a.HMD_BEVEL_SIZE=c.HMD_BEVEL_SIZE;a.MOUSE_LOCATION=c.MOUSE_LOCATION;a.MOUSE_DOWN_WHICH=c.MOUSE_DOWN_WHICH;a.MOUSE_UP_WHICH=c.MOUSE_UP_WHICH;a.MOUSE_WHEEL=c.MOUSE_WHEEL;a.KEYBOARD_UP=c.KEYBOARD_UP;a.KEYBOARD_DOWN=c.KEYBOARD_DOWN;a.TOUCH_START=c.TOUCH_START;a.TOUCH_MOVE=c.TOUCH_MOVE;a.TOUCH_END=c.TOUCH_END;a.GYRO_ORIENTATION_QUAT=c.GYRO_ORIENTATION_QUAT;a.GYRO_ORIENTATION_ANGLES=c.GYRO_ORIENTATION_ANGLES;var w={};w[c.DEVICE_HMD]=[c.HMD_ORIENTATION_QUAT,
c.HMD_POSITION];w[c.DEVICE_MOUSE]=[c.MOUSE_LOCATION];var n={};n[c.DEVICE_HMD]=[c.HMD_WEBVR_TYPE];var C={};C[c.DEVICE_MOUSE]=[c.MOUSE_LOCATION,c.MOUSE_DOWN_WHICH,c.MOUSE_UP_WHICH,c.MOUSE_WHEEL];C[c.DEVICE_KEYBOARD]=[c.KEYBOARD_UP,c.KEYBOARD_DOWN];C[c.DEVICE_TOUCH]=[c.TOUCH_START,c.TOUCH_MOVE,c.TOUCH_END];C[c.DEVICE_GYRO]=[c.GYRO_ORIENTATION_QUAT,c.GYRO_ORIENTATION_ANGLES];var k={};k[c.DEVICE_HMD]=[c.HMD_DISTORTION,c.HMD_EYE_DISTANCE,c.HMD_BASELINE_DIST,c.HMD_SCREEN_LENS_DIST,c.HMD_SCREEN_WIDTH,c.HMD_SCREEN_HEIGHT,
c.HMD_BEVEL_SIZE];a.DEVICE_GYRO=c.DEVICE_GYRO;a.DEVICE_HMD=c.DEVICE_HMD;a.DEVICE_MOUSE=c.DEVICE_MOUSE;a.DEVICE_KEYBOARD=c.DEVICE_KEYBOARD;a.DEVICE_TOUCH=c.DEVICE_TOUCH;a.can_use_device=c.can_use_device;a.get_device_by_type_element=c.get_device_by_type_element;a.switch_prevent_default=function(a,b){a&&c.switch_prevent_default(a,b)};a.register_device=function(){l.ga("input.register_device() deprecated")};a.reset_device=function(a){a&&a.type==c.DEVICE_HMD?c.reset_device(a):l.error("reset_device is undefined for device.")};
a.get_vector_param=function(a,b,d){if(a&&a.type in w&&0<=w[a.type].indexOf(b))return c.get_vector_param(a,b,d);l.error("device hasn't param: ",b);return null};a.get_value_param=function(a,b){if(a&&a.type in n&&0<=n[a.type].indexOf(b))return c.get_value_param(a,b);l.error("device hasn't param: ",b);return null};a.attach_param_cb=function(a,b,d){d=d||null;if(a&&a.type in C&&0<=C[a.type].indexOf(b))return c.attach_param_cb(a,b,d);l.error("device hasn't param: ",b)};a.detach_param_cb=function(a,b,d){d=
d||null;if(a&&a.type in C&&0<=C[a.type].indexOf(b))return c.detach_param_cb(a,b,d);l.error("device hasn't param: ",b)};a.set_config=function(a,b,d){if(a&&a.type in k&&0<=k[a.type].indexOf(b))return c.set_config(a,b,d);l.error("device hasn't config: ",b)};a.request_fullscreen_hmd=function(){l.fd("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(x.Pa()){var a=x.Mk(x.get_active());if(a&&(e(a),a=c.get_device_by_type_element(c.DEVICE_HMD))){var b=a.td;b&&!b.isPresenting&&(b.capabilities.canPresent?
(a=f.get_canvas(),b.requestPresent([{source:a}]).then(function(){if(!H.is_mobile_device){var a=b.getEyeParameters("left"),c=b.getEyeParameters("right");f.resize(2*Math.max(a.renderWidth,c.renderWidth),Math.max(a.renderHeight,c.renderHeight),!1)}},function(){l.error("HMD fullscreen request failed.")})):l.error("HMD fullscreen request failed."))}}};a.enable_split_screen=e;a.disable_split_screen=function(){l.fd("disable_split_screen","screen.exit_split_screen");var a=c.get_device_by_type_element(c.DEVICE_HMD);
if(!v||!a||!a.xg)return!1;x.set_hmd_params({enable_hmd_stereo:!1});a=1/(1+a.distortion_coefs[0]+a.distortion_coefs[1]);x.Cw(a,a);f.resize_to_container(!0);return!0};a.set_gamepad_key=function(a,b,d){switch(a){case 0:a=c.st;break;case 1:a=c.Jy;break;case 2:a=c.Ky;break;case 3:a=c.Ly;break;default:a=c.st}a=c.get_device_by_type_element(a);c.set_config(a,b,d)};a.get_pressed_gmpd_btn=c.get_pressed_gmpd_btn;a.get_moved_gmpd_axis=c.get_moved_gmpd_axis;a.get_gamepad_position=c.get_gamepad_position;a.get_gamepad_orientation=
c.get_gamepad_orientation;a.check_enable_gamepad_indices=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};a.get_vr_controller_id=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,d=0;4>c;c++){var e=b[c];if(e&&(""==e.id||"OpenVR Gamepad"==e.id||"Oculus Touch (Left)"==e.id||"Oculus Touch (Right)"==
e.id)){if(d==a)return d;d++}}return a};a.add_click_listener=function(a,b){a&&b&&c.add_click_listener(a,b)};a.remove_click_listener=function(a,b){a&&b&&c.remove_click_listener(a,b)}};b4w.module.lights=function(a,t){function e(a){for(var c=l.get_active(),e=h.Sb(c,"LAMP",h.DATA_ID_ALL),f=0;f<e.length;f++){var n=e[f];if("SUN"==n.Db.type){var g=n;break}}if(!g)q.error("There is no sun on the scene");else if("number"==typeof a.hor_position&&"number"==typeof a.vert_position){e=p.deg_to_rad(180-a.hor_position);a=p.deg_to_rad(90-a.vert_position);f=g.A;x.set_rotation_euler(g,[a,0,e]);e=new Float32Array(3);n=y.get_quat_view(f.D);p.quat_to_dir(n,p.AXIS_Z,e);f=y.get_trans_view(f.D);f=d.length(f);
d.copy(e,v);d.scale(v,f,v);x.set_translation(g,v);x.V(g);e=g.Db;if(e.FF){f=c.world.horizon_color;n=c.world.zenith_color;a=Math.cos(Math.abs(a));var r=Math.max(a,.1)*c.world.light_settings.environment_energy;b.set_light_energy(e,Math.max(Math.min(3*a,1),0)*e.wF);l.set_environment_colors(c,r,f,n)}l.$s(g,c)}}function c(a){if(f.is_lamp(a))return a.Db.type;q.error("get_light_type(): Wrong object");return""}var b=t("__lights"),h=t("__objects"),f=t("__obj_util"),q=t("__print"),l=t("__scenes"),x=t("__transform"),
y=t("__tsr"),p=t("__util"),d=t("__vec3"),v=new Float32Array(3),r,H,E,w=60;a.get_lamps=function(a){var b=l.get_active(),b=h.Sb(b,"LAMP",h.DATA_ID_ALL);if(!a)return b;for(var c=[],d=0;d<b.length;d++){var e=b[d];e.Db.type===a&&c.push(e)}return c};a.get_sun_params=function(){for(var a=l.get_active(),a=h.Sb(a,"LAMP",h.DATA_ID_ALL),b=null,c=0;c<a.length;c++){var d=a[c];if("SUN"==d.Db.type){b=d;break}}return b?(b=b.Db.direction,a=p.rad_to_deg(Math.atan2(-b[1],b[0]))+90,180<a&&(a-=360),b=p.rad_to_deg(Math.atan2(b[2],
Math.sqrt(b[0]*b[0]+b[1]*b[1]))),c={},c.hor_position=a,c.vert_position=b,c):null};a.set_sun_params=e;a.set_day_time=function(a){for(var b=l.get_active(),b=h.Sb(b,"LAMP",h.DATA_ID_ALL),c=0;c<b.length;c++){var d=b[c];if("SUN"==d.Db.type){var f=d;break}}f?(f=-Math.cos(a/12*Math.PI)*w,b={},b.hor_position=12>a?15*a:15*(a-24),b.vert_position=f,e(b)):q.error("There is no sun on the scene")};a.set_date=function(a){r=a.getFullYear();H=a.getMonth();E=a.getDate();r?1582==r&&9==H&&4<E&&15>E&&q.error("The dates 5 through 14 October, 1582, do not exist in the Gregorian system!"):
q.error("There is no year 0 in the Julian system!")};a.set_max_sun_angle=function(a){w=Math.min(Math.max(a,0),90)};a.get_light_params=function(a){if(f.is_lamp(a))var b=a.Db;else return q.error("get_light_params(): Wrong object"),null;if(a=c(a))switch(a){case "SPOT":var d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg,light_spot_blend:b.Ns,light_spot_size:b.nn,light_distance:b.distance};d.light_color.set(b.color);break;case "POINT":d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg,
light_distance:b.distance};d.light_color.set(b.color);break;default:d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg},d.light_color.set(b.color)}return d?d:null};a.get_light_type=c;a.set_light_params=function(a,c){if(f.is_lamp(a)){var d=a.Db,e=l.get_active(),h=!1;"number"==typeof c.light_energy&&b.set_light_energy(d,c.light_energy);"object"==typeof c.light_color&&b.set_light_color(d,c.light_color);"number"==typeof c.light_spot_blend&&(b.WU(d,c.light_spot_blend),h=!0);"number"==typeof c.light_spot_size&&
(b.XU(d,c.light_spot_size),h=!0);"number"==typeof c.light_distance&&(b.VU(d,c.light_distance),h=!0);l.$s(a,e);h&&l.cW(e)}else q.error("set_light_params(): Wrong object")};a.get_light_energy=function(a){return f.is_lamp(a)?a.Db.jg:(q.error("get_light_energy(): Wrong object"),0)};a.set_light_energy=function(a,c){if(f.is_lamp(a)){var d=l.get_active();b.set_light_energy(a.Db,c);l.$s(a,d)}else q.error("set_light_energy(): Wrong object")};a.get_light_color=function(a,b){if(!f.is_lamp(a))return q.error("get_light_color(): Wrong object"),
null;b=b||new Float32Array(3);b.set(a.Db.color);return b};a.set_light_color=function(a,c){if(f.is_lamp(a)){var d=l.get_active();b.set_light_color(a.Db,c);l.$s(a,d)}else q.error("set_light_color(): Wrong object")}};b4w.module.logic_nodes=function(a,t){var e=t("__logic_nodes");a.append_custom_callback=function(a,b){e.NM(a,b)};a.remove_custom_callback=function(a){e.bU(a)};a.run_entrypoint=function(a,b){e.vU(a,b)}};b4w.module.material=function(a,t){var e=t("__batch"),c=t("__config"),b=t("__geometry"),h=t("__objects"),f=t("__obj_util"),q=t("__print"),l=t("__shaders"),x=t("__util"),y=t("__scenes"),p=c.L;a.inherit_material=function(a,c,e,f){if(b.Bj(e)&&b.Bj(a)){var d=a.Xe.el.indexOf(c);if(-1==d)q.error('inherit_material(): material "'+c+'" not found on the object "'+a.Fd+'".');else{var l=e.Xe.el.indexOf(f);-1==l?q.error('inherit_material(): material "'+f+'" not found on the object "'+e.Fd+'".'):(0==e.rk.data.submeshes[l].shade_tangs.length&&
a.nc[d].oe&&q.warn('The target material "'+f+'" was exported without tangent shading data. However, the "'+c+'" material requires it. It\'s needed to enable the "Tangent Shading" option on the target material for correct rendering.'),h.inherit_material(a,c,e,f))}}else q.error('inherit_material(): both objects "'+a.Fd+'" and "'+e.Fd+'" must have the "Dynamic Geometry & Materials" flag enabled.')};a.get_materials_names=function(a){var b=[];if(!f.mb(a))return q.error('get_materials_names(): Object "'+
a.name+'" is not a dynamic MESH.'),b;a=a.S;for(var c=0;c<a.length;c++)for(var d=a[c].$,e=0;e<d.length;e++){var l=d[e];if("MAIN"==l.type)for(var h=0;h<l.cc.length;h++)-1==b.indexOf(l.cc[h])&&b.push(l.cc[h])}return b};a.set_diffuse_color=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");d?d.wb?q.error("set_diffuse_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.lc.set(c),(a=e.lg(a,b,"MAIN"))&&a.lc.set(c)):q.error('set_diffuse_color(): Material "'+
b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_diffuse_color(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_color=function(a,b){var c=new Float32Array(4);if(!f.mb(a))return q.error('get_diffuse_color(): Object "'+a.name+'" is not a dynamic MESH.'),c;var d=e.gb(a,b,"MAIN");if(!d)return q.error('get_diffuse_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),c;if(d.wb)return q.error("get_diffuse_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
c;c.set(d.lc);return c};a.set_diffuse_intensity=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_diffuse_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.ee=c,a=e.lg(a,b,"MAIN"))a.ee=c}else q.error('set_diffuse_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_diffuse_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_intensity=function(a,b){if(!f.mb(a))return q.error('get_diffuse_intensity(): Object "'+
a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_diffuse_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.ee:(q.error('get_diffuse_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_specular_color=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");d?d.wb?q.error("set_specular_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):
(d.ne.set(c),(a=e.lg(a,b,"MAIN"))&&a.ne.set(c)):q.error('set_specular_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_specular_color(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_color=function(a,b){var c=new Float32Array(3);if(!f.mb(a))return q.error('get_specular_color(): Object "'+a.name+'" is not a dynamic MESH.'),c;var d=e.gb(a,b,"MAIN");if(!d)return q.error('get_specular_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+
'".'),c;if(d.wb)return q.error("get_specular_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),c;c.set(d.ne);return c};a.set_specular_color_factor=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_specular_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.$j=c,a=e.lg(a,b,"MAIN"))a.$j=c}else q.error('set_specular_color_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".')}else q.error('set_specular_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_color_factor=function(a,b){if(!f.mb(a))return q.error('get_specular_color_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_specular_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.$j:(q.error('get_specular_color_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".'),0)};a.set_specular_intensity=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");d?d.wb?q.error("set_specular_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.Fe[0]=c,(a=e.lg(a,b,"MAIN"))&&(a.Fe[0]=c)):q.error('set_specular_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_specular_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_intensity=function(a,b){if(!f.mb(a))return q.error('get_specular_intensity(): Object "'+
a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_specular_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.Fe[0]:(q.error('get_specular_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.check_specular_intensity=function(a,b){q.ga("check_specular_intensity() is deprecated, not needed anymore");var c=e.gb(a,b,"MAIN");return!(!c||!c.Fe[0])};a.set_specular_hardness=function(a,
b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");d?d.wb?q.error("set_specular_hardness(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.Fe[1]=c,(a=e.lg(a,b,"MAIN"))&&(a.Fe[1]=c)):q.error('set_specular_hardness(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_specular_hardness(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_hardness=function(a,b){if(!f.mb(a))return q.error('get_specular_hardness(): Object "'+a.name+
'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_specular_hardness(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.Fe[1]:(q.error('get_specular_hardness(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.check_specular_hardness=function(a,b){q.ga("check_specular_hardness() is deprecated, not needed anymore");var c=e.gb(a,b,"MAIN");return!(!c||!c.Fe[1])};a.set_emit_factor=function(a,b,c){if(f.mb(a)){var d=
e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_emit_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.Ad=c,a=e.lg(a,b,"MAIN"))a.Ad=c}else q.error('set_emit_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_emit_factor=function(a,b){if(!f.mb(a))return q.error('get_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,
"MAIN");return c?c.wb?(q.error("get_emit_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.Ad:(q.error('get_emit_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_ambient_factor=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_ambient_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.xd=c,a=e.lg(a,b,"MAIN"))a.xd=c}else q.error('set_ambient_factor(): Material "'+
b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_ambient_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_ambient_factor=function(a,b){if(!f.mb(a))return q.error('get_ambient_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_ambient_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.xd:(q.error('get_ambient_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".'),0)};a.set_diffuse_color_factor=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_diffuse_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.ti=c,a=e.lg(a,b,"MAIN"))a.ti=c}else q.error('set_diffuse_color_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_color_factor=function(a,
b){if(!f.mb(a))return q.error('get_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_diffuse_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.ti:(q.error('get_diffuse_color_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_alpha_factor=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_alpha_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(d.Jg=c,a=e.lg(a,b,"MAIN"))a.Jg=c}else q.error('set_alpha_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_alpha_factor=function(a,b){if(!f.mb(a))return q.error('get_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.gb(a,b,"MAIN");return c?c.wb?(q.error("get_alpha_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):
c.Jg:(q.error('get_alpha_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.get_material_extended_params=function(a,b){if(!f.mb(a))return q.error('get_material_extended_params(): Object "'+a.name+'" is not a dynamic MESH.'),null;var c=e.gb(a,b,"MAIN");if(!c)return q.error('get_material_extended_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),null;if(c.wb)return q.error("get_material_extended_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
null;var d={};d.reflect_factor=c.reflect_factor;d.fresnel=c.Fh[0];d.fresnel_factor=5*(1-c.Fh[1]);d.parallax_scale=c.parallax_scale;d.parallax_steps=parseFloat(e.hd(c,"PARALLAX_STEPS")[1]);return d};a.set_material_extended_params=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");if(d)if(d.wb)q.error("set_material_extended_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var h=[d];(d=e.lg(a,b,"MAIN"))&&h.push(d);for(a=0;a<h.length;a++)d=h[a],"number"==
typeof c.reflect_factor&&(d.reflect_factor=c.reflect_factor),"number"==typeof c.fresnel&&(d.Fh[0]=c.fresnel),"number"==typeof c.fresnel_factor&&(d.Fh[1]=1-c.fresnel_factor/5),"number"==typeof c.parallax_scale&&(d.parallax_scale=c.parallax_scale),"number"==typeof c.parallax_steps&&(e.xb(d,"PARALLAX_STEPS",l.X(c.parallax_steps)),e.Ic(d),y.dI(d))}else q.error('set_material_extended_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else q.error('set_material_extended_params(): Object "'+
a.name+'" is not a dynamic MESH.')};a.get_water_material_params=function(a,b){if(!f.mb(a))return q.error('get_water_material_params(): Object "'+a.name+'" is not a dynamic MESH.'),null;var c=e.gb(a,b,"MAIN");if(!c||!c.Sf)return q.error('get_water_material_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+"\" or it's not a water material."),null;if(c.wb)return q.error("get_water_material_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
null;var d={};d.shore_smoothing=p.shore_smoothing&&c.Cn&&!!parseFloat(e.hd(c,"SHORE_SMOOTHING")[1]);d.absorb_factor=parseFloat(e.hd(c,"ABSORB")[1]);d.foam_factor=c.foam_factor;d.shallow_water_col=new Float32Array(3);d.shore_water_col=new Float32Array(3);d.shallow_water_col_fac=0;d.shore_water_col_fac=0;p.jp&&(d.shallow_water_col.set(c.shallow_water_col),d.shore_water_col.set(c.shore_water_col),d.shallow_water_col_fac=c.shallow_water_col_fac,d.shore_water_col_fac=c.shore_water_col_fac);d.norm_uv_velocity=
c.Ml;d.water_dynamic=p.water_dynamic&&c.water_dynamic&&!!parseFloat(e.hd(c,"DYNAMIC")[1]);d.sss_strength=parseFloat(e.hd(c,"SSS_STRENGTH")[1]);d.sss_width=parseFloat(e.hd(c,"SSS_WIDTH")[1]);d.waves_height=parseFloat(e.hd(c,"WAVES_HEIGHT")[1]);d.waves_length=parseFloat(e.hd(c,"WAVES_LENGTH")[1]);d.dst_noise_scale0=parseFloat(e.hd(c,"DST_NOISE_SCALE_0")[1]);d.dst_noise_scale1=parseFloat(e.hd(c,"DST_NOISE_SCALE_1")[1]);d.dst_noise_freq0=parseFloat(e.hd(c,"DST_NOISE_FREQ_0")[1]);d.dst_noise_freq1=parseFloat(e.hd(c,
"DST_NOISE_FREQ_1")[1]);d.dir_min_shore_fac=parseFloat(e.hd(c,"DIR_MIN_SHR_FAC")[1]);d.dir_freq=parseFloat(e.hd(c,"DIR_FREQ")[1]);d.dir_noise_scale=parseFloat(e.hd(c,"DIR_NOISE_SCALE")[1]);d.dir_noise_freq=parseFloat(e.hd(c,"DIR_NOISE_FREQ")[1]);d.dir_min_noise_fac=parseFloat(e.hd(c,"DIR_MIN_NOISE_FAC")[1]);d.dst_min_fac=parseFloat(e.hd(c,"DST_MIN_FAC")[1]);d.waves_hor_fac=parseFloat(e.hd(c,"WAVES_HOR_FAC")[1]);return d};a.set_water_material_params=function(a,b,c){if(f.mb(a)){var d=e.gb(a,b,"MAIN");
if(d&&d.Sf)if(d.wb)q.error("set_water_material_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var h=[d];(d=e.lg(a,b,"MAIN"))&&h.push(d);for(a=0;a<h.length;a++)d=h[a],"boolean"==typeof c.shore_smoothing&&(p.shore_smoothing&&d.Cn&&c.shore_smoothing?e.xb(d,"SHORE_SMOOTHING",1):e.xb(d,"SHORE_SMOOTHING",0)),"number"==typeof c.absorb_factor&&(b=l.X(parseFloat(c.absorb_factor)),e.xb(d,"ABSORB",b)),"number"==typeof c.foam_factor&&p.oo&&(d.foam_factor=
c.foam_factor),p.jp&&("object"==typeof c.shallow_water_col&&d.shallow_water_col.set(c.shallow_water_col),"number"==typeof c.shallow_water_col_fac&&(d.shallow_water_col_fac=c.shallow_water_col_fac),"object"==typeof c.shore_water_col&&d.shore_water_col.set(c.shore_water_col),"number"==typeof c.shore_water_col_fac&&(d.shore_water_col_fac=c.shore_water_col_fac)),"number"==typeof c.norm_uv_velocity&&(d.Ml=c.norm_uv_velocity),p.water_dynamic&&d.water_dynamic&&("boolean"==typeof c.water_dynamic&&(c.water_dynamic?
e.xb(d,"DYNAMIC",1):e.xb(d,"DYNAMIC",0)),"number"==typeof c.sss_strength&&(b=l.X(parseFloat(c.sss_strength)),e.xb(d,"SSS_STRENGTH",b)),"number"==typeof c.sss_width&&(b=l.X(parseFloat(c.sss_width)),e.xb(d,"SSS_WIDTH",b)),"number"==typeof c.waves_height&&(b=l.X(parseFloat(c.waves_height)),e.xb(d,"WAVES_HEIGHT",b)),"number"==typeof c.waves_length&&(b=l.X(parseFloat(c.waves_length)),e.xb(d,"WAVES_LENGTH",b)),"number"==typeof c.dst_noise_scale0&&(b=l.X(parseFloat(c.dst_noise_scale0)),e.xb(d,"DST_NOISE_SCALE_0",
b)),"number"==typeof c.dst_noise_scale1&&(b=l.X(parseFloat(c.dst_noise_scale1)),e.xb(d,"DST_NOISE_SCALE_1",b)),"number"==typeof c.dst_noise_freq0&&(b=l.X(parseFloat(c.dst_noise_freq0)),e.xb(d,"DST_NOISE_FREQ_0",b)),"number"==typeof c.dst_noise_freq1&&(b=l.X(parseFloat(c.dst_noise_freq1)),e.xb(d,"DST_NOISE_FREQ_1",b)),"number"==typeof c.dir_min_shore_fac&&(b=l.X(parseFloat(c.dir_min_shore_fac)),e.xb(d,"DIR_MIN_SHR_FAC",b)),"number"==typeof c.dir_freq&&(b=l.X(parseFloat(c.dir_freq)),e.xb(d,"DIR_FREQ",
b)),"number"==typeof c.dir_noise_scale&&(b=l.X(parseFloat(c.dir_noise_scale)),e.xb(d,"DIR_NOISE_SCALE",b)),"number"==typeof c.dir_noise_freq&&(b=l.X(parseFloat(c.dir_noise_freq)),e.xb(d,"DIR_NOISE_FREQ",b)),"number"==typeof c.dir_min_noise_fac&&(b=l.X(parseFloat(c.dir_min_noise_fac)),e.xb(d,"DIR_MIN_NOISE_FAC",b)),"number"==typeof c.dst_min_fac&&(b=l.X(parseFloat(c.dst_min_fac)),e.xb(d,"DST_MIN_FAC",b)),"number"==typeof c.waves_hor_fac&&(b=l.X(parseFloat(c.waves_hor_fac)),e.xb(d,"WAVES_HOR_FAC",b))),
e.Ic(d),y.dI(d)}else q.error('set_water_material_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+"\" or it's not a water material.")}else q.error('set_water_material_params(): Object "'+a.name+'" is not a dynamic MESH.')};a.set_line_params=function(a,b){if(f.is_line(a)){var c=e.qv(a);c?(x.ge(b.color)&&c.lc.set(b.color),x.ge(b.width)&&(c.Sm=b.width)):q.error("set_line_params(): Couldn't set line parameters!")}else q.error('set_line_params(): Object "'+a.name+'" is not a LINE object.')};
a.get_line_params=function(a){if(!f.is_line(a))return q.error('get_line_params(): Object "'+a.name+'" is not a LINE object.'),null;a=e.qv(a);return a?{color:new Float32Array(a.lc),width:a.Sm}:(q.error("get_line_params(): Couldn't get line parameters!"),null)};a.set_nodemat_value=function(a,b,c){var d=f.mb(a),l=f.is_world(a),p=l?h.Av(a):a.name;if(d||l){if(d){var n=b[0],r=1,k=e.Jk(a,n,"MAIN")||e.Jk(a,n,"PARTICLES");if(!k){q.error('set_nodemat_value(): Material "'+n+'" wasn\'t found on the object "'+
p+'".');return}}else if(l&&(d=y.get_active(),n="",r=0,k=e.zr(a,d),!k)){q.error("set_nodemat_value(): Sky node material wasn't found on the world object \""+p+'".');return}r=h.Br(k.Gf,b,r);null===r?q.error('set_nodemat_value(): Value node "'+b[b.length-1]+'" was not found in the object "'+p+'".'):h.set_nodemat_value(a,n,r,c)}else q.error('set_nodemat_value(): Object "'+p+'" is not a dynamic MESH or WORLD.')};a.get_nodemat_value=function(a,b){var c=f.mb(a),d=f.is_world(a),l=d?h.Av(a):a.name;if(!c&&
!d)return q.error('get_nodemat_value(): Object "'+l+'" is not a dynamic MESH or WORLD.'),0;if(c){var c=b[0],p=1,n=e.Jk(a,c,"MAIN")||e.Jk(a,c,"PARTICLES");if(!n)return q.error('get_nodemat_value(): Material "'+c+'" wasn\'t found on the object "'+l+'".'),0}else if(d&&(n=y.get_active(),p=0,n=e.zr(a,n),!n))return q.error("get_nodemat_value(): Sky node material wasn't found on the world object \""+l+'".'),0;p=h.Br(n.Gf,b,p);return null===p?(q.error('get_nodemat_value(): Value node "'+b[b.length-1]+'" was not found in the object "'+
l+'".'),0):h.get_nodemat_value(n,p)};a.set_nodemat_rgb=function(a,b,c,l,p){var d=f.mb(a),n=f.is_world(a),r=n?h.Av(a):a.name;if(d||n){if(d){var k=b[0],v=1,u=e.Jk(a,k,"MAIN")||e.Jk(a,k,"PARTICLES");if(!u){q.error('set_nodemat_rgb(): Material "'+k+'" wasn\'t found on the object "'+r+'".');return}}else if(n&&(d=y.get_active(),k="",v=0,u=e.zr(a,d),!u)){q.error("set_nodemat_rgb(): Sky node material wasn't found on the world object \""+r+'".');return}v=h.Ar(u.Ff,b,v);null===v?q.error('set_nodemat_rgb(): RGB node "'+
b[b.length-1]+'" was not found in the object "'+r+'".'):h.set_nodemat_rgb(a,k,v,c,l,p)}else q.error('set_nodemat_rgb(): Object "'+r+'" is not a dynamic MESH or WORLD.')};a.get_nodemat_rgb=function(a,b,c){var d=f.mb(a),l=f.is_world(a),p=l?h.Av(a):a.name;if(!d&&!l)return q.error('get_nodemat_rgb(): Object "'+p+'" is not a dynamic MESH or WORLD.'),null;if(d){var d=b[0],n=1,r=e.Jk(a,d,"MAIN")||e.Jk(a,d,"PARTICLES");if(!r)return q.error('get_nodemat_rgb(): Material "'+d+'" wasn\'t found on the object "'+
p+'".'),null}else if(l&&(r=y.get_active(),n=0,r=e.zr(a,r),!r))return q.error("get_nodemat_rgb(): Sky node material wasn't found on the world object \""+p+'".'),null;a=h.Ar(r.Ff,b,n);if(null===a)return q.error('get_nodemat_rgb(): RGB node "'+b[b.length-1]+'" was not found in the object "'+p+'".'),null;c||(c=new Float32Array(3));return h.get_nodemat_rgb(r,a,c)};a.is_node_material=function(a,b){if(!f.mb(a))return q.error('is_node_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var c=e.gb(a,
b,"MAIN");return c?c.wb:(q.error('is_node_material(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),!1)};a.is_water_material=function(a,b){if(!f.mb(a))return q.error('is_water_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var c=e.gb(a,b,"MAIN");return c?c.Sf&&!c.wb:(q.error('is_water_material(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),!1)}};b4w.module.math=function(a,t){var e=t("__vec3"),c=t("__util"),b=t("__math"),h=new Float32Array(3);a.create_pline_from_points=function(a,c){var f=new Float32Array(6);b.set_pline_initial_point(f,a);e.subtract(c,a,h);b.set_pline_directional_vec(f,h);return f};a.create_pline_from_point_vec=function(a,c){var e=new Float32Array(6);b.set_pline_initial_point(e,a);b.set_pline_directional_vec(e,c);return e};a.create_pline=function(){return new Float32Array(6)};a.get_pline_directional_vec=b.get_pline_directional_vec;
a.get_pline_initial_point=b.get_pline_initial_point;a.set_pline_initial_point=b.set_pline_initial_point;a.set_pline_directional_vec=b.set_pline_directional_vec;a.line_plane_intersect=c.line_plane_intersect;a.calc_pline_point=b.calc_pline_point;a.point_plane_dist=b.point_plane_dist;a.linear_tween=b.linear_tween;a.ease_in_quad=b.ease_in_quad;a.ease_out_quad=b.ease_out_quad;a.ease_in_out_quad=b.ease_in_out_quad;a.ease_in_cubic=b.ease_in_cubic;a.ease_out_cubic=b.ease_out_cubic;a.ease_in_out_cubic=b.ease_in_out_cubic;
a.ease_in_quart=b.ease_in_quart;a.ease_out_quart=b.ease_out_quart;a.ease_in_out_quart=b.ease_in_out_quart;a.ease_in_quint=b.ease_in_quint;a.ease_out_quint=b.ease_out_quint;a.ease_in_out_quint=b.ease_in_out_quint;a.ease_in_sine=b.ease_in_sine;a.ease_out_sine=b.ease_out_sine;a.ease_in_out_sine=b.ease_in_out_sine;a.ease_in_expo=b.ease_in_expo;a.ease_out_expo=b.ease_out_expo;a.ease_in_out_expo=b.ease_in_out_expo;a.ease_in_circ=b.ease_in_circ;a.ease_out_circ=b.ease_out_circ;a.ease_in_out_circ=b.ease_in_out_circ;
a.ease_in_elastic=b.ease_in_elastic;a.ease_out_elastic=b.ease_out_elastic;a.ease_in_out_elastic=b.ease_in_out_elastic;a.ease_in_back=b.ease_in_back;a.ease_out_back=b.ease_out_back;a.ease_in_out_back=b.ease_in_out_back;a.ease_in_bounce=b.ease_in_bounce;a.ease_out_bounce=b.ease_out_bounce;a.ease_in_out_bounce=b.ease_in_out_bounce};b4w.module.particles=function(a,t){var e=t("__particles"),c=t("__print");a.set_size=function(a,h,f){e.uB(a,h)?e.set_size(a,h,f):c.error('set_size(): Object "'+a.name+'" has not a particle system named "'+h+'"')};a.set_normal_factor=function(a,h,f){e.uB(a,h)?e.set_normal_factor(a,h,f):c.error('set_normal_factor(): Object "'+a.name+'" has not a particle system named "'+h+'"')};a.set_factor=function(a,h,f){e.uB(a,h)?(f=Math.min(f,1),f=Math.max(f,0),e.set_factor(a,h,f)):c.error('set_factor(): Object "'+
a.name+'" has not a particle system named "'+h+'"')}};b4w.module.physics=function(a,t){function e(a,b,c,e){return f.YP(a,e[c[0]],e[c[1]],e[c[2]])}function c(a,b,c,e,d){b=Math.abs(a[2]-b[2]);return b<d&&q.sS(a,c,e)?b:Number.MAX_VALUE}var b=t("__physics"),h=t("__print"),f=t("__util"),q=t("__navmesh");a.CM_WALK=0;a.CM_RUN=1;a.CM_CLIMB=2;a.CM_FLY=3;a.enable_simulation=function(a){b.sa(a)?b.enable_simulation(a):h.ga("No physics for object "+a.name)};a.disable_simulation=function(a){b.sa(a)?b.disable_simulation(a):h.ga("No physics for object "+a.name)};a.has_physics=
function(a){return b.sa(a)};a.has_simulated_physics=function(a){return b.has_simulated_physics(a)};a.has_dynamic_physics=function(a){return b.has_dynamic_physics(a)};a.set_gravity=function(a,c){h.fd("set_gravity","set_object_gravity");b.sa(a)?b.set_gravity(a,0,0,-c):h.ga("No physics for object "+a.name)};a.set_object_gravity=function(a,c){b.sa(a)?b.set_gravity(a,c[0],c[1],c[2]):h.ga("No physics for object "+a.name)};a.set_transform=function(a,c,e){b.sa(a)?b.set_transform(a,c,e):h.ga("No physics for object "+
a.name)};a.sync_transform=function(a){b.sa(a)?b.sync_transform(a):h.ga("No physics for object "+a.name)};a.apply_velocity=function(a,c,e,f){b.sa(a)?b.apply_velocity(a,c,e,f):h.ga("No physics for object "+a.name)};a.apply_velocity_world=function(a,c,e,f){b.sa(a)?b.apply_velocity_world(a,c,e,f):h.ga("No physics for object "+a.name)};a.apply_force=function(a,c,e,f){b.sa(a)?b.apply_force(a,c,e,f,!1):h.ga("No physics for object "+a.name)};a.apply_force_world=function(a,c,e,f){b.sa(a)?b.apply_force(a,c,
e,f,!0):h.ga("No physics for object "+a.name)};a.apply_torque=function(a,c,e,f){b.sa(a)?b.apply_torque(a,c,e,f):h.ga("No physics for object "+a.name)};a.set_angular_velocity=function(a,c,e,f){b.sa(a)?b.set_angular_velocity(a,c,e,f):h.ga("No physics for object "+a.name)};a.vehicle_throttle=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||h.error("Wrong object"),b.vehicle_throttle(a,f.clamp(c,-1,1))):h.ga("No physics for object "+a.name)};a.vehicle_throttle_inc=function(a,c,e){if(b.sa(a)){b.is_vehicle_chassis(a)||
b.is_vehicle_hull(a)||h.error("Wrong object");c=f.clamp(c,0,1);var l=a.R.jo;-1==e||1==e?l=Math.max(-1,Math.min(l+e*c,1)):!e&&0<=l?l=Math.max(0,l-c):!e&&0>l?l=Math.min(0,l+c):h.error("Wrong steering direction");b.vehicle_throttle(a,f.clamp(l,-1,1))}else h.ga("No physics for object "+a.name)};a.vehicle_steer=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||h.error("Wrong object"),b.vehicle_steer(a,f.clamp(c,-1,1))):h.ga("No physics for object "+a.name)};a.vehicle_steer_inc=function(a,
c,e){if(b.sa(a)){b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||h.error("Wrong object");c=f.clamp(c,0,1);var l=a.R.xp;-1==e||1==e?l=Math.max(-1,Math.min(l+e*c,1)):!e&&0<=l?l=Math.max(0,l-c):!e&&0>l?l=Math.min(0,l+c):h.error("Wrong steering direction");b.vehicle_steer(a,f.clamp(l,-1,1))}else h.ga("No physics for object "+a.name)};a.vehicle_brake=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||h.error("Wrong object"),b.vehicle_brake(a,f.clamp(c,0,1))):h.ga("No physics for object "+
a.name)};a.vehicle_brake_inc=function(a,c){if(b.sa(a)){b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||h.error("Wrong object");c=f.clamp(c,-1,1);var e=a.R.Dq;b.vehicle_brake(a,f.clamp(e+e*c,0,1))}else h.ga("No physics for object "+a.name)};a.is_vehicle_chassis=function(a){return b.is_vehicle_chassis(a)};a.is_vehicle_hull=function(a){return b.is_vehicle_hull(a)};a.get_vehicle_name=function(a){if(!b.sa(a))return h.ga("No physics for object "+a.name),null;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.Of.name;
h.error("Wrong object");return null};a.get_vehicle_throttle=function(a){if(!b.sa(a))return h.ga("No physics for object "+a.name),null;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.jo;h.error("Wrong object");return null};a.get_vehicle_steering=function(a){if(!b.sa(a))return h.ga("No physics for object "+a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.xp;h.error("Wrong object");return 0};a.get_vehicle_brake=function(a){if(!b.sa(a))return h.ga("No physics for object "+
a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.Dq;h.error("Wrong object");return 0};a.get_vehicle_speed=function(a){if(!b.sa(a))return h.ga("No physics for object "+a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return b.get_vehicle_speed(a);h.error("Wrong object");return 0};a.is_character=function(a){return b.uG(a)};a.set_character_move_dir=function(a,c,e){b.sa(a)?b.set_character_move_dir(a,c,e):h.ga("No physics for object "+a.name)};a.set_character_move_type=function(a,
c){b.sa(a)?b.set_character_move_type(a,c):h.ga("No physics for object "+a.name)};a.set_character_walk_velocity=function(a,c){b.sa(a)?b.set_character_walk_velocity(a,c):h.ga("No physics for object "+a.name)};a.set_character_run_velocity=function(a,c){b.sa(a)?b.set_character_run_velocity(a,c):h.ga("No physics for object "+a.name)};a.set_character_fly_velocity=function(a,c){b.sa(a)?b.set_character_fly_velocity(a,c):h.ga("No physics for object "+a.name)};a.character_jump=function(a){b.sa(a)?b.character_jump(a):
h.ga("No physics for object "+a.name)};a.character_rotation_inc=function(a,c,e){b.sa(a)?b.character_rotation_inc(a,c,e):h.ga("No physics for object "+a.name)};a.set_character_rotation=function(a,c,e){b.sa(a)?b.set_character_rotation(a,c,e):h.ga("No physics for object "+a.name)};a.set_character_rotation_v=function(a,c){b.sa(a)?b.set_character_rotation_v(a,c):h.ga("No physics for object "+a.name)};a.set_character_rotation_h=function(a,c){b.sa(a)?b.set_character_rotation_h(a,c):h.ga("No physics for object "+
a.name)};a.set_character_vert_move_dir_angle=function(a,c){b.sa(a)?b.set_character_vert_move_dir_angle(a,c):h.ga("No physics for object "+a.name)};a.append_collision_test=function(a,c,e,f){b.sa(a)?b.append_collision_test(a,c||"ANY",e,f||!1):h.ga("No physics for object "+a.name)};a.remove_collision_test=function(a,c,e){b.sa(a)?b.remove_collision_test(a,c||"ANY",e):h.ga("No physics for object "+a.name)};a.apply_collision_impulse_test=function(a,c){b.sa(a)?b.apply_collision_impulse_test(a,c):h.ga("No physics for object "+
a.name)};a.clear_collision_impulse_test=function(a){b.sa(a)?b.clear_collision_impulse_test(a):h.ga("No physics for object "+a.name)};a.append_ray_test=function(a,c,e,f,d,q){a=a||null;return null==a||b.sa(a)?b.append_ray_test(a,c,e,f||"ANY",d,q||!1,!1,!1,!1):(h.ga("No physics for object "+a.name),0)};a.append_ray_test_ext=function(a,c,e,f,d,q,r,t,E){a=a||null;return null==a||b.sa(a)?b.append_ray_test(a,c,e,f||"ANY",d,q||!1,r||!1,t||!1,E||!1):(h.ga("No physics for object "+a.name),0)};a.remove_ray_test=
function(a){b.SG(a)?b.remove_ray_test(a):h.error("Wrong ray test ID")};a.change_ray_test_from_to=function(a,c,e){b.SG(a)?b.change_ray_test_from_to(a,c,e):h.error("Wrong ray test ID")};a.apply_constraint=function(a,c,e,f,d,q,r,t,E,w){b.sa(c)&&b.sa(d)?b.apply_constraint(a,c,e,f,d,q,r,t,E,w):h.error("Wrong objects")};a.clear_constraint=function(a){b.sa(a)&&b.PR(a)?b.clear_constraint(a):h.error("Wrong object")};a.pull_to_constraint_pivot=function(a,c,e,f,d,q){b.sa(a)&&b.sa(f)?b.pull_to_constraint_pivot(a,
c,e,f,d,q):h.error("Wrong objects")};a.navmesh_get_island=function(a,c,f){f||(f=e);if(b.sa(a)){var l=a.N.Xr;return l?q.navmesh_get_island(l,c,f):(h.error(a.name+" is not a navigation mesh object"),null)}h.ga("No physics for object "+a.name)};a.navmesh_find_path=function(a,f,t,p){if(b.sa(a)){var d=a.N.Xr;if(!d)return h.error(a.name+" is not a navigation mesh object"),null;p=p||{};a={};a.do_not_pull_string=!!p.do_not_pull_string;a.distance_to_closest=p.distance_to_closest||e;a.distance_to_farthest=
p.distance_to_farthest||c;a.island=p.island||0;a.allowed_distance=p.allowed_distance||Number.MAX_VALUE;a.return_normals=p.return_normals||!1;return q.navmesh_find_path(d,f,t,a)}h.ga("No physics for object "+a.name)}};b4w.module.rgb=function(a,t){var e=t("__util"),c=new Float32Array(3);a.create=function(){return new Float32Array(3)};a.from_values=function(a,c,e){var b=new Float32Array(3);b[0]=a;b[1]=c;b[2]=e;return b};a.set=function(a,c,e,q){q[0]=a;q[1]=c;q[2]=e;return q};a.css_to_rgb=function(a,c,f,q){q=q||new Float32Array(3);q[0]=a/255;q[1]=c/255;q[2]=f/255;e.cJ(q,q);return q};a.rgb_to_css=function(a){a=e.UA(a,c);return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]};a.rgb_to_css_hex=function(a){function b(a){a=
Math.round(255*a).toString(16);return 1==a.length?"0"+a:a}a=e.UA(a,c);return"#"+b(a[0])+b(a[1])+b(a[2])}};
b4w.module.rgba=function(a,t){var e=t("__util"),c=new Float32Array(3);a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.from_values=function(a,c,e,q){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=e;b[3]=q;return b};a.set=function(a,c,e,q,l){l[0]=a;l[1]=c;l[2]=e;l[3]=q;return l};a.css_to_rgba=function(a,c,f,q,l){l=l||new Float32Array(4);l[0]=a/255;l[1]=c/255;l[2]=f/255;l[3]=q;e.cJ(l,l);return l};a.rgba_to_css=function(a){var b=e.UA(a,c);return[Math.round(255*b[0]),Math.round(255*b[1]),
Math.round(255*b[2]),a[3]]}};b4w.module.scenes=function(a,t){function e(){var a=f.get_canvas();return x.pick_object(a.clientWidth/2,a.clientHeight/2)}function c(a){return y.mb(a)||y.is_empty(a)||y.is_line(a)||y.is_lamp(a)}var b=t("__batch"),h=t("__camera"),f=t("__container"),q=t("__data"),l=t("__graph"),x=t("__objects"),y=t("__obj_util"),p=t("__print"),d=t("__scenes"),v=t("__scenegraph"),r=t("__subscene"),H=t("__util");a.DATA_ID_ALL=x.DATA_ID_ALL;a.set_active=function(a){var b=d.yr();d.set_active(H.keysearch("name",a,b))};a.get_active=
function(){return d.Pa()?d.get_active().name:""};a.get_scenes=function(){for(var a=d.yr(),b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};a.get_active_camera=function(){if(d.Pa())return d.Mk(d.get_active());p.error("No active scene");return!1};a.get_object_by_name=function(a,b){var c=x.Vc(x.Ny,a,b|0,!0);if(c)return c;p.error("get object "+a+": not found")};a.get_object_by_dupli_name=function(a,b,c){if(a=x.Vc(x.My,a,b,c|0))return a;p.error("get object "+b+": not found")};a.get_object_by_dupli_name_list=
function(a,b){var c=x.Vc(x.Hd,a,b|0);if(c)return c;p.error("get object "+a+": not found")};a.get_world_by_name=function(a,b){var c=x.get_world_by_name(a,b|0);if(c)return c;p.error("get object "+a+": not found")};a.get_object_data_id=function(a){return y.get_object_data_id(a)};a.pick_object=function(a,b){var c=d.Gh();return c?(c=d.Tb(c,r.Hg))&&c.enable_hmd_stereo?(p.ga("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),e()):x.pick_object(a,b):(p.error("No active scene"),
null)};a.pick_center=e;a.outlining_is_enabled=function(a){return a&&a.A&&a.A.Xc};a.set_outline_intensity=function(a,b){a&&a.A&&a.A.Xc?x.set_outline_intensity(a,b):p.error("set_outline_intensity(): wrong object")};a.get_outline_intensity=function(a){if(a&&a.A&&a.A.Xc)return a.A.Ki;p.error("get_outline_intensity(): wrong object");return 0};a.apply_outline_anim=function(a,b,c,d){a&&a.A&&a.A.Xc?x.apply_outline_anim(a,b,c,d):p.error("apply_outline_anim(): wrong object")};a.apply_outline_anim_def=function(a){if(a&&
a.A&&a.A.Xc){var b=a.A.Ji;x.apply_outline_anim(a,b.fl,b.hl,b.il)}else p.error("apply_outline_anim_def(): wrong object")};a.clear_outline_anim=function(a){a&&a.A&&a.A.Xc?x.clear_outline_anim(a):p.error("clear_outline_anim(): wrong object")};a.set_outline_color=d.set_outline_color;a.get_outline_color=function(a){var b=d.get_active();if(b=d.Tb(b,r.In))return a=a||new Float32Array(3),a.set(b.Nh),a};a.set_hmd_params=function(a){d.Pa()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof Array||(a.distortion_coefs=
null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),d.set_hmd_params(a)):p.error("No active scene")};a.get_shadow_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active(),b=d.Tb(a,r.wd);if(!b)return null;var c=
a.J.Yc,e=d.Tb(a,r.Hb),f=d.Tb(a,r.Yf),h={};h.csm_resolution=c.csm_resolution;h.self_shadow_polygon_offset=b.self_shadow_polygon_offset;f&&(h.self_shadow_normal_offset=f.self_shadow_normal_offset);h.enable_csm=c.enable_csm;h.csm_num=c.csm_num;h.csm_first_cascade_border=c.csm_first_cascade_border;h.first_cascade_blur_radius=c.first_cascade_blur_radius;h.csm_last_cascade_border=c.csm_last_cascade_border;h.last_cascade_blur_radius=c.last_cascade_blur_radius;h.fade_last_cascade=c.fade_last_cascade;h.blend_between_cascades=
c.blend_between_cascades;c.enable_csm?(h.csm_borders=d.gR(a,e.H),h.blur_radii=new Float32Array(c.csm_num),h.blur_radii.set(e.H.ap.subarray(0,c.csm_num))):(h.csm_borders=null,h.blur_radii=null);return h};a.set_shadow_params=function(a){if(d.Pa()){var c=d.get_active();"number"==typeof a.self_shadow_polygon_offset&&l.ea(c.J.wa,function(b,c){c.type==r.wd&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var e=d.Bg(c,[r.Yf]),f=0;f<e.length;f++){var k=e[f];"number"==typeof a.self_shadow_normal_offset&&
(k.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(k.pcf_blur_radius=a.pcf_blur_radius)}e=d.Bg(c,[r.bd]);for(f=0;f<e.length;f++){var q=e[f];"number"==typeof a.self_shadow_normal_offset&&(q.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(q.pcf_blur_radius=a.pcf_blur_radius);q.Na=!0}e=c.J.Yc;"number"==typeof a.csm_first_cascade_border&&(e.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&
(e.first_cascade_blur_radius=a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(e.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(e.last_cascade_blur_radius=a.last_cascade_blur_radius);if(k){q=k.Za;for(f=0;f<q.length;f++)for(var v=q[f].La,g=0;g<v.length;g++){var t=v[g];if(t.ug.Td){var x=t.Aa;b.eE(x,e);b.Ic(x);r.Rc(k,t)}}k.Na=!0}k=y.Da(c.aj,c).ja;for(f=0;f<k.length;f++)h.OC(k[f],e);d.bC(c)}else p.error("No active scene")};a.get_environment_colors=
function(){if(!d.Pa())return p.error("No active scene"),[];var a=d.get_active();return d.get_environment_colors(a)};a.set_environment_colors=function(a,b,c){if(d.Pa()){var e=d.get_active(),f=d.Tb(e,r.Hb);d.set_environment_colors(e,a||0==a?parseFloat(a):f.kg,b||0==b?b:f.Ld,c||0==c?c:f.Xd)}else p.error("No active scene")};a.get_fog_color_density=function(a){if(!d.Pa())return p.error("No active scene"),!1;var b=d.get_active();return d.get_fog_color_density(b,a)};a.set_fog_color_density=function(a){if(d.Pa()){var b=
d.get_active();d.set_fog_color_density(b,a)}else p.error("No active scene")};a.get_fog_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active(),b={};b.fog_intensity=d.pR(a);b.fog_depth=d.nR(a);b.fog_start=d.qR(a);b.fog_height=d.oR(a);return b};a.set_fog_params=function(a){if(d.Pa()){var b=d.get_active();"number"==typeof a.fog_intensity&&d.xI(b,a.fog_intensity);"number"==typeof a.fog_depth&&d.vI(b,a.fog_depth);"number"==typeof a.fog_start&&d.yI(b,a.fog_start);"number"==
typeof a.fog_height&&d.wI(b,a.fog_height)}else p.error("No active scene")};a.get_ssao_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.get_ssao_params(a)};a.set_ssao_params=function(a){if(d.Pa()){var c=d.get_active(),e=d.Bg(c,[r.At]),c=d.Bg(c,[r.Uy]);if(!e.length)return p.error("SSAO is not enabled on the scene"),0;for(var f=0;f<e.length;f++){var h=e[f],l=c[f],q=a,g=d.get_active(),t=h.Za[0].La[0],x=t.Aa,y=l.Za[0].La[0],E=y.Aa;if("quality"in q){var A=
q.quality;8===A||16===A||24===A||32===A?(h.on=A,b.xb(x,"SSAO_QUALITY","SSAO_QUALITY_"+A),b.Ic(x),r.Rc(h,t)):p.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in q&&(h.tp=q.use_hemisphere,b.xb(x,"SSAO_HEMISPHERE",q.use_hemisphere|0),b.Ic(x),r.Rc(h,t));"use_blur_depth"in q&&(l.qp=q.use_blur_depth,b.xb(E,"SSAO_BLUR_DEPTH",q.use_blur_depth|0),b.Ic(E),r.Rc(l,y),v.lm(g.J.wa,l,E));"ssao_white"in q&&(h.ssao_white=q.ssao_white,b.xb(x,"SSAO_WHITE",q.ssao_white|0),b.Ic(x),r.Rc(h,t));"blur_discard_value"in
q&&(l.rp=q.blur_discard_value);"radius_increase"in q&&(h.wp=q.radius_increase);"influence"in q&&(h.vp=q.influence);"dist_factor"in q&&(h.sp=q.dist_factor);if("boolean"==typeof q.ssao_only){g=d.Tb(g,r.Hb);g.ssao_only=q.ssao_only;t=g.Za;x=[];for(y=0;y<t.length;y++)for(E=t[y].La,A=0;A<E.length;A++){var G=E[A].Aa;b.xb(G,"SSAO_ONLY",q.ssao_only|0);b.Ic(G);x.push(E[A])}for(y=0;y<x.length;y++)r.Rc(g,x[y])}h.Na=!0;l.Na=!0}}else p.error("No active scene")};a.get_color_correction_params=function(){if(!d.Pa())return p.error("No active scene"),
null;var a=d.get_active(),a=d.Tb(a,r.Hy);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};a.set_color_correction_params=function(a){if(d.Pa()){var b=d.get_active();if(b=d.Tb(b,r.Hy))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in a&&(b.saturation=a.saturation),b.Na=!0}else p.error("No active scene")};a.get_sky_params=function(){if(!d.Pa())return p.error("No active scene"),
!1;var a=d.get_active();return d.get_sky_params(a)};a.set_sky_params=function(a){if(d.Pa()){var b=d.get_active(),c=d.Tb(b,r.$d);c&&("color"in a&&c.tl.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in
a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.Na=!0,c.Po=!0,d.LW(b,c))}else p.error("No active scene")};a.get_dof_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,r.fq)?d.get_dof_params(a):null};a.set_dof_params=function(a){if(d.Pa()){var b=
d.get_active();d.set_dof_params(b,a)}else p.error("No active scene")};a.get_god_rays_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,r.Hn)?d.get_god_rays_params(a):null};a.set_god_rays_params=function(a){if(d.Pa()){var b=d.get_active();d.set_god_rays_params(b,a)}else p.error("No active scene")};a.get_bloom_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,r.$p)?d.get_bloom_params(a):null};a.set_bloom_params=
function(a){if(d.Pa()){var b=d.get_active();d.set_bloom_params(b,a)}else p.error("No active scene")};a.get_glow_material_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,r.gq)?d.get_glow_material_params(a):null};a.set_glow_material_params=function(a){if(d.Pa()){var b=d.get_active();d.set_glow_material_params(b,a)}else p.error("No active scene")};a.get_wind_params=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.get_wind_params(a)};
a.set_wind_params=function(a){if(d.Pa()){var b=d.get_active();x.set_wind_params(b,a)}else p.error("No active scene")};a.get_water_surface_level=function(a,b){if(!d.Pa())return p.error("No active scene"),0;var c=d.get_active();return c.J.sd?d.get_water_surface_level(c,a,b):(p.error("No water parameters on the active scene"),0)};a.set_water_params=function(a){if(d.Pa()){var b=d.get_active();d.set_water_params(b,a)}else p.error("No active scene")};a.get_water_mat_params=function(a){if(d.Pa()){var b=
d.get_active();d.get_water_mat_params(b,a)}else p.error("No active scene")};a.update_scene_materials_params=function(){if(d.Pa()){var a=d.get_active();d.LJ(a)}else p.error("No active scene")};a.hide_object=function(a,b){b=b||!1;c(a)?b?d.hm(a,!0):d.Kq(a,!0):p.error("show/hide is only supported for dynamic objects.")};a.show_object=function(a,b){b=b||!1;c(a)?b?d.hm(a,!1):d.Kq(a,!1):p.error("show/hide is only supported for dynamic objects.")};a.is_hidden=function(a){if(c(a))return d.is_hidden(a);p.error("show/hide is only supported for dynamic meshes/empties and lamps");
return!1};a.is_visible=function(a){return a.A.is_visible};a.check_object_by_name=function(a,b){return x.Vc(x.Ny,a,b|0,!0)?!0:!1};a.check_object_by_dupli_name=function(a,b,c){return x.Vc(x.My,a,b,c|0)?!0:!1};a.check_object_by_dupli_name_list=function(a,b){return x.Vc(x.Hd,a,b|0)?!0:!1};a.get_all_objects=function(a,b){var c=d.get_active();a||(a="ALL");b||0===b||(b=x.DATA_ID_ALL);return x.mG(c,a,b)};a.get_object_name=function(a){return a?a.Fd:(p.error("Wrong object name"),"")};a.get_object_name_hierarchy=
function(a){if(!a)return p.error("Wrong object name"),null;for(var b=[];a;)b.push(a.Fd),a=y.get_dg_parent(a);return b.reverse()};a.get_object_type=function(a){return a&&a.type?a.type:(p.error("Wrong object"),"UNDEFINED")};a.get_object_children=function(a){return a.te.slice(0)};a.get_first_character=function(){return x.get_first_character(d.get_active())};a.get_shore_dist=function(a,b){b||0===b||(b=1);if(!d.Pa())return p.error("No active scene"),0;var c=d.get_active();return d.get_shore_dist(c,a,b)};
a.get_cam_water_depth=function(){return d.get_cam_water_depth()};a.get_type_mesh_object=function(a){return y.is_mesh(a)?a.A.type:""};a.get_meta_tags=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.get_meta_tags(a)};a.get_custom_prop=function(){if(!d.Pa())return p.error("No active scene"),!1;var a=d.get_active();return d.get_custom_prop(a)};a.append_object=function(a,b){if(b)var c=d.yr(),c=H.keysearch("name",b,c);else c=d.get_active();d.append_object(c,a,!0)};
a.remove_object=function(a){y.mb(a)||y.is_empty(a)||y.is_line(a)?(x.Yo(a,a.A.Wv,!1,!1),q.XH(a),x.Yo(a,!0,!0,!0),x.remove_object(a)):p.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};a.marker_frame=function(a){var b=d.get_active();if(b.timeline_markers&&a in b.timeline_markers)return d.marker_frame(b,a);p.error('"'+a+'" marker not found.');return 0};a.get_mb_params=function(){var a=d.get_active();return(a=d.Tb(a,r.bi))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:
null};a.set_mb_params=function(a){var b=d.get_active(),b=d.Bg(b,[r.bi]);if(b.length)for(var c=0;c<b.length;c++){var e=b[c];"number"==typeof a.mb_decay_threshold&&(e.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&(e.mb_factor=a.mb_factor)}else p.error("The motion blur subscene doesn't exist.")};a.can_select_objects=function(){var a=d.get_active();return!!d.Tb(a,r.Le)}};b4w.module.screen=function(a,t){function e(){}function c(){}function b(a,b,c){function d(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",d,!1),document.removeEventListener("webkitfullscreenchange",d,!1),document.removeEventListener("mozfullscreenchange",d,!1),document.removeEventListener("MSFullscreenChange",d,!1),c())}a=a||l.get_container();
b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",d,!1);document.addEventListener("webkitfullscreenchange",d,!1);document.addEventListener("mozfullscreenchange",d,!1);document.addEventListener("MSFullscreenChange",d,!1);a.SB=a.SB||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.SB?a.SB():r.error("B4W App: request fullscreen method is not supported")}function h(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
document.msExitFullscreen;"function"!=typeof a&&r.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function f(a){var b=p.get_device_by_type_element(p.DEVICE_HMD);if(b&&!C){var c=p.get_value_param(b,p.HMD_WEBVR_TYPE);if(c&p.HMD_WEBVR1_1){var d=b.td,e=d.getEyeParameters("left"),d=d.getEyeParameters("right");l.resize(2*Math.max(e.renderWidth,d.renderWidth),Math.max(e.renderHeight,d.renderHeight),!1)}else e=l.get_canvas(),e=Math.max(2*e.height,e.width),l.resize(e,e/2,!1);e=
p.get_vector_param(b,p.iD,w);d=p.get_vector_param(b,p.jD,n);q.set_hmd_fov(a,e,d,!(c&p.HMD_WEBVR1_1));e={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c&(p.HMD_NON_WEBVR|p.HMD_WEBVR_MOBILE|p.HMD_WEBVR_DESKTOP)&&(e.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],e.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Dn||(b.di&&b.yi&&b.ei?e.base_line_factor=(b.di-
b.ei)/b.yi:b.ei||(e.base_line_factor=b.di/b.yi)),b.Hh&&b.Nl&&!b.Dn&&(e.inter_lens_factor=b.Hh/b.Nl));k.enabled||H.Cw(.5,1);H.set_hmd_params(e);if(b=p.get_value_param(b,p.HMD_EYE_DISTANCE))c=H.get_active(),a=v.Da(a,c).ja,q.set_eye_distance(a,b);H.dU();C=!0}}var q=t("__camera"),l=t("__container"),x=t("__config"),y=t("__hud"),p=t("__input"),d=t("__main"),v=t("__obj_util"),r=t("__print"),H=t("__scenes"),E=t("__vec4"),w=E.create(),n=E.create(),C=!1,k=x.qm;a.draw_mixer_strip=y.draw_mixer_strip;a.plot_array=
y.plot_array;a.request_fullscreen=b;a.exit_fullscreen=h;a.check_fullscreen=p.check_fullscreen;a.request_fullscreen_hmd=function(a,c,d){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var f=p.get_device_by_type_element(p.DEVICE_HMD);if(f&&p.get_value_param(f,p.HMD_WEBVR_TYPE)&p.HMD_WEBVR1){var g=f.td;g&&!g.isPresenting&&(c=c||function(){},d=d||function(){},e=function(){g.isPresenting?c():(window.removeEventListener("vrdisplaypresentchange",e),d())},window.addEventListener("vrdisplaypresentchange",
e,!1),g.capabilities.canPresent?(a=l.get_canvas(),g.requestPresent([{source:a}]).then(function(){},function(){r.error("HMD fullscreen request failed.")})):r.error("HMD fullscreen request failed."))}else b(a,c,d)}};a.exit_fullscreen_hmd=function(){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var a=p.get_device_by_type_element(p.DEVICE_HMD);a&&p.get_value_param(a,p.HMD_WEBVR_TYPE)&p.HMD_WEBVR1?(a=a.td)&&a.isPresenting&&(a.exitPresent(),l.resize_to_container(!0)):h()}};
a.check_fullscreen_hmd=function(){var a=p.get_device_by_type_element(p.DEVICE_HMD),b=p.get_value_param(a,p.HMD_WEBVR_TYPE)&p.HMD_WEBVR1;return a&&(b&&a.td||!b&&p.check_fullscreen())?!0:!1};a.request_split_screen=function(a,b){var d=p.get_device_by_type_element(p.DEVICE_HMD);if(!d)return!1;if(C)return!0;c=b;if(H.Pa()){var e=H.Mk(H.get_active());e&&(d.xg?(f(e),a&&a()):(p.oU(d),d.ws=function(){f(e);a&&a()}))}};a.exit_split_screen=function(){var a=p.get_device_by_type_element(p.DEVICE_HMD);if(!C||!a||
!a.xg)return!1;H.set_hmd_params({enable_hmd_stereo:!1});C=!1;c&&c();H.eU();k.enabled||H.Cw(2,1);l.resize_to_container(!0);return!0};a.shot=function(a,b){a=a||"image/png";d.canvas_data_url(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}};b4w.module.sfx=function(a,t){var e=t("__obj_util"),c=t("__scenes"),b=t("__sfx"),h=t("__print");a.play=function(a,c,e){b.play(a,c||0,e||0)};a.play_def=function(a){b.play_def(a)};a.is_playing=function(a){return b.is_playing(a)};a.stop=function(a){b.stop(a)};a.pause=function(a){b.zV(a)};a.resume=function(a){b.BV(a)};a.loop_stop=function(a,c,e){b.loop_stop(a,c||0,e||!1)};a.playrate=function(a,c){b.playrate(a,c)};a.get_playrate=function(a){return b.get_playrate(a)};a.cyclic=function(a,c){b.cyclic(a,c)};
a.is_cyclic=function(a){return b.is_cyclic(a)};a.listener_reset_speed=function(){b.listener_stride()};a.listener_stride=function(){b.listener_stride()};a.speaker_reset_speed=function(a){b.speaker_stride(a)};a.speaker_stride=function(a){b.speaker_stride(a)};a.get_volume=function(a){return a&&"object"===typeof a?b.get_volume(a):b.zR()};a.set_volume=function(a,c){a&&"object"===typeof a?b.set_volume(a,c):b.ZU(c)};a.mute=function(a,c){a&&"object"===typeof a?b.mute(a,c):b.nT(c)};a.is_muted=function(a){return a&&
"object"===typeof a?b.is_muted(a):b.qS()};a.get_speaker_objects=function(){return b.get_speaker_objects().slice(0)};a.check_active_speakers=b.check_active_speakers;a.set_compressor_params=function(a){b.set_compressor_params(c.get_active(),a)};a.get_compressor_params=function(){return b.get_compressor_params(c.get_active())};a.duck=function(a,c,e){a&&"object"===typeof a?b.duck(a,c,e):b.bQ(c,e)};a.unduck=function(a){a&&"object"===typeof a?b.unduck(a):b.bW()};a.apply_playlist=b.apply_playlist;a.clear_playlist=
b.clear_playlist;a.detect_audio_container=b.detect_audio_container;a.detect_video_container=b.detect_video_container;a.set_positional_params=b.set_positional_params;a.get_positional_params=b.get_positional_params;a.set_filter_params=b.set_filter_params;a.get_filter_params=b.get_filter_params;a.get_filter_freq_response=b.get_filter_freq_response;a.get_duration=function(a){return a&&e.is_speaker(a)?b.get_duration(a):(h.error('Object "'+(a?a.name:void 0)+'" is not a valid speaker'),0)}};b4w.module.textures=function(a,t){var e=t("__print"),c=t("__scenes"),b=t("__textures"),h=t("__obj_util"),f=t("__util"),q=t("__assets");a.play_video=function(a,f){f||(f=0);var h=b.tA(a,f);h?c.get_active().b4w_use_nla&&b.XC(h)?e.error("NLA texture can't be controlled directly through API."):b.play_video(h):e.error('Texture with name "'+a+'" not found!')};a.pause_video=function(a,f){f||(f=0);var h=b.tA(a,f);h?c.get_active().b4w_use_nla&&b.XC(h)?e.error("NLA texture can't be controlled directly through API."):
b.pause_video(h):e.error('Texture with name "'+a+'" not found!')};a.reset_video=function(a,f){f||(f=0);var h=b.tA(a,f);h?c.get_active().b4w_use_nla&&b.XC(h)?e.error("NLA texture can't be controlled directly through API."):b.reset_video(h):e.error('Texture with name "'+a+'" not found!')};a.get_canvas_ctx=function(a,c){if(h.is_mesh(a)){var f=b.cR(a,c);if(f)return f;e.error("Couldn't find canvas texture with this name: "+c)}else e.error("Object must be type of mesh.");return null};a.update_canvas_ctx=
function(a,c){if(!h.is_mesh(a))return e.error("Object must be type of mesh."),!1;var f=b.zv(a,c);if(!f||"CANVAS"!=f.source)return e.error("Couldn't find canvas texture \""+c+'" in object "'+a.name+'".'),!1;b.OW(f);return!0};a.change_image=function(a,c,h,p){e.fd("change_image","replace_image");p=p||function(){};var d=b.zv(a,c);if(d)if(d.Ci)e.error("Changing video textures is forbidden."),p(!1);else{var l=f.Ii(h);d.Pk==l?p(!0):q.enqueue([{id:h,type:q.AT_IMAGE_ELEMENT,url:h,request_method:"GET"}],function(e){e?
(b.change_image(a,d,c,e,h),p(!0)):p(!1)},null,null)}else e.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),p(!1)};a.replace_image=function(a,c,f,h){h=h||function(){};var d=b.zv(a,c);d?d.Ci?(e.error("Changing video textures is forbidden."),h(!1)):"src"in f?b.change_image(a,d,c,f,f.src):(e.error("Incorrect image."),h(!1)):(e.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),h(!1))};a.get_texture_names=function(a){if(h.is_mesh(a))return b.get_texture_names(a);e.error("Object must be type of mesh.");
return[]}};b4w.module.time=function(a,t){var e=t("__time");a.set_timeout=e.set_timeout;a.clear_timeout=e.clear_timeout;a.get_timeline=e.get_timeline;a.animate=e.animate;a.clear_animation=e.clear_animation};b4w.module.transform=function(a,t){var e=t("__boundings"),c=t("__obj_util"),b=t("__physics"),h=t("__print"),f=t("__quat"),q=t("__transform"),l=t("__tsr"),x=t("__util"),y=l.create(),p=new Float32Array(3),d=new Float32Array(4);a.set_translation=function(a,d,e,f){c.is_dynamic(a)?(p[0]=d,p[1]=e,p[2]=f,q.set_translation(a,p),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_rel=function(a,d,e,f){c.is_dynamic(a)?(p[0]=d,p[1]=e,p[2]=f,q.set_translation_rel(a,
p),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_v=function(a,d){c.is_dynamic(a)?(q.set_translation(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_rel_v=function(a,d){c.is_dynamic(a)?(q.set_translation_rel(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_obj_rel=function(a,d,e,f,t){c.is_dynamic(a)?(p[0]=d,p[1]=e,p[2]=f,d=l.get_trans_view(t.A.D),
t=l.get_quat_view(t.A.D),x.transform_vec3(p,1,t,d,p),q.set_translation(a,p),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_translation=function(a,b){b||(b=new Float32Array(3));q.get_translation(a,b);return b};a.get_translation_rel=function(a,b){b||(b=new Float32Array(3));q.get_translation_rel(a,b);return b};a.set_rotation=function(a,e,f,l,p){c.is_dynamic(a)?(d[0]=e,d[1]=f,d[2]=l,d[3]=p,q.set_rotation(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.set_rotation_rel=function(a,e,f,l,p){c.is_dynamic(a)?(d[0]=e,d[1]=f,d[2]=l,d[3]=p,q.set_rotation_rel(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_v=function(a,d){c.is_dynamic(a)?(q.set_rotation(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_rel_v=function(a,d){c.is_dynamic(a)?(q.set_rotation_rel(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.get_rotation_rel_v=function(a,b){if(c.is_dynamic(a))return q.get_rotation_rel(a,b),b;h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_rotation=function(a,b){b||(b=new Float32Array(4));q.get_rotation(a,b);return b};a.get_rotation_rel=function(a,b){b||(b=new Float32Array(4));q.get_rotation_rel(a,b);return b};a.set_rotation_euler=function(a,d,e,f){c.is_dynamic(a)?(p[0]=d,p[1]=e,p[2]=f,q.set_rotation_euler(a,p),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.get_rotation_euler=function(a,b){b||(b=new Float32Array(3));q.get_rotation_euler(a,b);return b};a.get_rotation_euler_rel=function(a,b){b||(b=new Float32Array(3));q.get_rotation_euler_rel(a,b);return b};a.set_rotation_euler_rel=function(a,d,e,f){c.is_dynamic(a)?(p[0]=d,p[1]=e,p[2]=f,q.set_rotation_euler_rel(a,p),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_euler_v=function(a,d){c.is_dynamic(a)?(q.set_rotation_euler(a,
d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_euler_rel_v=function(a,d){c.is_dynamic(a)?(q.set_rotation_euler_rel(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_scale=function(a,b){c.is_dynamic(a)?(q.set_scale(a,b),q.V(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_scale_rel=function(a,b){c.is_dynamic(a)?(q.set_scale_rel(a,b),q.V(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.get_scale=function(a){return q.get_scale(a)};a.get_scale_rel=function(a){return q.get_scale_rel(a)};a.empty_reset_transform=function(a){if("EMPTY"!=a.type)h.error("Wrong object: "+a.name);else{for(var d=0;d<a.te.length;d++)if(!c.is_dynamic(a.te[d])){h.error('Wrong object: "'+a.te[d].name+'" is not dynamic.');return}q.set_translation(a,[0,0,0]);q.set_rotation(a,[0,0,0,1]);q.set_scale(a,1);q.V(a);b.sync_transform(a)}};a.get_object_size=function(a){return c.is_mesh(a)?q.get_object_size(a):(h.error("Wrong object: "+
a.name),0)};a.get_object_center=function(a,b,d){if(!c.is_mesh(a))return h.error("Wrong object: "+a.name),null;d||(d=new Float32Array(3));return q.get_object_center(a,b,d)};a.move_local=function(a,d,e,f){c.is_dynamic(a)?(q.move_local(a,d,e,f),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.rotate_x_local=function(a,e){if(c.is_dynamic(a)){var l=f.setAxisAngle(x.AXIS_X,e,d);q.XB(a,l);q.V(a);b.sync_transform(a)}else h.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.rotate_y_local=function(a,e){if(c.is_dynamic(a)){var l=f.setAxisAngle(x.AXIS_MY,e,d);q.XB(a,l);q.V(a);b.sync_transform(a)}else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.rotate_z_local=function(a,e){if(c.is_dynamic(a)){var l=f.setAxisAngle(x.AXIS_Z,e,d);q.XB(a,l);q.V(a);b.sync_transform(a)}else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_object_bounding_box=function(a){return e.mu(a.A.wh)};a.set_tsr=function(a,d){c.is_dynamic(a)?(q.set_tsr(a,d),q.V(a),b.sync_transform(a)):
h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_tsr_rel=function(a,d){c.is_dynamic(a)?(q.set_tsr_rel(a,d),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_tsr=function(a,b){b||(b=new Float32Array(8));q.get_tsr(a,b);return b};a.get_tsr_rel=function(a,b){b||(b=new Float32Array(8));q.get_tsr_rel(a,b);return b};a.distance=function(a,b){return q.distance(a,b)};a.set_matrix=function(a,d){c.is_dynamic(a)?(l.from_mat4(d,y),q.set_tsr(a,y),q.V(a),b.sync_transform(a)):
h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_matrix_rel=function(a,d){c.is_dynamic(a)?(l.from_mat4(d,y),q.set_tsr_rel(a,y),q.V(a),b.sync_transform(a)):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_matrix=function(a,b){b||(b=new Float32Array(16));q.get_tsr(a,y);l.to_mat4(y,b);return b};a.get_matrix_rel=function(a,b){b||(b=new Float32Array(16));q.get_tsr_rel(a,y);l.to_mat4(y,b);return b}};b4w.module.tsr=function(a,t){var e=t("__mat4"),c=t("__tsr");a.create=c.create;a.from_values=c.from_values;a.copy=c.copy;a.identity=c.identity;a.set_sep=c.set_sep;a.set_trans=c.set_trans;a.set_scale=c.set_scale;a.set_transcale=c.set_transcale;a.set_quat=c.set_quat;a.get_trans_view=c.get_trans_view;a.get_scale=c.get_scale;a.get_quat_view=c.get_quat_view;a.invert=c.invert;a.to_mat4=function(a,h){h||(h=e.create());c.to_mat4(a,h);return h};a.from_mat4=c.from_mat4;a.multiply=c.multiply;a.transform_vec3=
c.transform_vec3;a.transform_vec3_inv=c.transform_vec3_inv;a.transform_vectors=c.transform_vectors;a.transform_dir_vectors=c.transform_dir_vectors;a.transform_dir_vec3=c.transform_dir_vec3;a.transform_tangents=c.transform_tangents;a.translate=c.translate;a.interpolate=function(a,e,f,q){q||(q=c.create());c.interpolate(a,e,f,q);return q}};b4w.module.util=function(a,t){var e=t("__compat"),c=t("__print"),b=t("__quat"),h=t("__tbn"),f=t("__util"),q=t("__vec3");a.AXIS_X=new Float32Array([1,0,0]);a.AXIS_Y=new Float32Array([0,1,0]);a.AXIS_Z=new Float32Array([0,0,1]);a.AXIS_MX=new Float32Array([-1,0,0]);a.AXIS_MY=new Float32Array([0,-1,0]);a.AXIS_MZ=new Float32Array([0,0,-1]);a.XYX=f.XYX;a.YZY=f.YZY;a.ZXZ=f.ZXZ;a.XZX=f.XZX;a.YXY=f.YXY;a.ZYZ=f.ZYZ;a.XYZ=f.XYZ;a.YZX=f.YZX;a.ZXY=f.ZXY;a.XZY=f.XZY;a.YXZ=f.YXZ;a.ZYX=f.ZYX;a.f32=function(a){return f.f32(a||
0)};a.assert=f.assert;a.keyfind=f.keyfind;a.keysearch=f.keysearch;a.matrix_to_quat=function(a){return f.matrix_to_quat(a)};a.euler_to_quat=function(a,b){b||(b=new Float32Array(4));return f.euler_to_quat(a,b)};a.ordered_angles_to_quat=function(a,c,e){e||(e=b.create());return f.ordered_angles_to_quat(a,c,e)};a.quat_to_ordered_angles=function(a,b,c){c||(c=q.create());return f.quat_to_ordered_angles(a,b,c)};a.quat_to_euler=function(a,b){b||(b=new Float32Array(3));return f.quat_to_euler(a,b)};a.sign=f.sign;
a.clamp=f.clamp;a.quat_to_dir=f.quat_to_dir;a.ground_project_cam_quat=function(a,b){return f.quat_project(a,f.AXIS_MZ,f.AXIS_Z,f.AXIS_Y,b)};a.cam_quat_to_mesh_quat=function(a,b){return f.cam_quat_to_mesh_quat(a,b)};a.quat_project=function(a,b,e,h,d){return 0!=q.dot(e,h)?(c.error("Wrong in-plane direction"),null):f.quat_project(a,b,e,h,d)};a.hash_code=f.hash_code;a.smooth=f.smooth;a.smooth_v=f.smooth_v;a.is_vector=f.is_vector;a.correct_cam_quat_up=f.correct_cam_quat_up;a.quat_to_angle_axis=f.quat_to_angle_axis;
a.random_from_array=f.random_from_array;a.horizontal_direction=f.horizontal_direction;a.angle_wrap_0_2pi=f.angle_wrap_0_2pi;a.angle_wrap_periodic=f.angle_wrap_periodic;a.smooth_step=f.smooth_step;a.lerp=f.lerp;a.deg_to_rad=f.deg_to_rad;a.rad_to_deg=f.rad_to_deg;a.dir_to_quat=f.dir_to_quat;a.is_ie11=e.is_ie11;a.gen_tbn_quats=h.get;a.trunc=f.trunc};b4w.module.version=function(a,t){var e=t("__version");a.version=e.version;a.version_str=e.version_str;a.type=e.type;a.date=e.date;a.date_str=e.date_str;a.get_build_version=e.get_build_version};b4w.module.objects=function(a,t){var e=t("__geometry"),c=t("__objects"),b=t("__batch"),h=t("__obj_util"),f=t("__print"),q=t("__scenes"),l=t("__util");a.get_meta_tags=function(a){if(a)return c.get_meta_tags(a)};a.get_custom_prop=function(a){if(a)return c.get_custom_prop(a)};a.copy=function(a,b,l){return h.is_mesh(a)?h.is_dynamic(a)?e.Bj(a)||e.check_shape_keys(a)||!l?-1==c.Sb(q.get_active(),"MESH",c.DATA_ID_ALL).indexOf(a)?(f.error('object "'+a.name+'" does not belong to the active scene.'),!1):c.copy(a,
b||"",l):(f.error('object "'+a.name+'" has not dynamic geometry for deep copying.'),!1):(f.error('object "'+a.name+'" is not dynamic.'),!1):(f.error('object "'+a.name+'" is not of type "MESH".'),!1)};a.set_nodemat_value=function(a,e,l){f.fd("set_nodemat_value","material.set_nodemat_value");if(h.mb(a)){var d=e[0],p=b.gb(a,d,"MAIN");if(null===p)return f.error('Material "'+d+'" was not found in the object "'+a.name+'".'),null;p=c.Br(p.Gf,e,1);if(null===p)return f.error('Value node "'+e[e.length-1]+'" was not found in the object "'+
a.name+'".'),null;c.set_nodemat_value(a,d,p,l)}else f.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.get_nodemat_value=function(a,e){f.fd("get_nodemat_value","material.get_nodemat_value");if(!h.mb(a))return f.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),0;var l=e[0],d=b.gb(a,l,"MAIN");if(null===d)return f.error('Material "'+l+'" was not found in the object "'+a.name+'".'),0;l=c.Br(d.Gf,e,1);return null===l?(f.error('Value node "'+
e[e.length-1]+'" was not found in the object "'+a.name+'".'),0):c.get_nodemat_value(d,l)};a.set_nodemat_rgb=function(a,e,l,d,q){f.fd("set_nodemat_rgb","material.set_nodemat_rgb");if(h.mb(a)){var p=e[0],v=b.gb(a,p,"MAIN");null===v?f.error('Material "'+p+'" was not found in the object "'+a.name+'".'):(v=c.Ar(v.Ff,e,1),null===v?f.error('RGB node "'+e[e.length-1]+'" was not found in the object "'+a.name+'".'):c.set_nodemat_rgb(a,p,v,l,d,q))}else f.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};
a.get_nodemat_rgb=function(a,e,l){f.fd("get_nodemat_rgb","material.get_nodemat_rgb");if(!h.mb(a))return f.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),null;var d=e[0],p=b.gb(a,d,"MAIN");if(null===p)return f.error('Material "'+d+'" was not found in the object "'+a.name+'".'),null;d=c.Ar(p.Ff,e);if(null===d)return f.error('RGB node "'+e[e.length-1]+'" was not found in the object "'+a.name+'".'),null;l||(l=new Float32Array(3));return c.get_nodemat_rgb(p,d,l)};a.update_boundings=
function(a){h.is_mesh(a)?e.Bj(a)||e.check_shape_keys(a)?c.update_boundings(a):f.error('object "'+a.name+'" has not dynamic geometry.'):f.error('The type of the object "'+a.name+'" is not "MESH".')};a.get_parent=h.get_parent;a.get_dg_parent=h.get_dg_parent;a.is_mesh=h.is_mesh;a.is_armature=h.is_armature;a.is_speaker=h.is_speaker;a.is_camera=h.is_camera;a.is_lamp=h.is_lamp;a.is_empty=h.is_empty;a.is_line=h.is_line;a.is_world=h.is_world;a.get_selectable_objects=function(){return c.get_selectable_objects()};
a.get_outlining_objects=function(){return c.get_outlining_objects()};a.is_dynamic=h.is_dynamic;a.set_wind_bending_params=function(a,e){if(h.mb(a)){var p=a.A;if(p.Ke){if("number"==typeof e.angle){var d=b.oK(l.deg_to_rad(e.angle),p.hj,p.D[3]);p.Tf=d}"number"==typeof e.main_frequency&&(p.Uf=e.main_frequency);"number"==typeof e.detail_frequency&&(p.yf=e.detail_frequency);"number"==typeof e.detail_amplitude&&(p.xf=e.detail_amplitude);"number"==typeof e.branch_amplitude&&(p.sf=e.branch_amplitude);c.TU(a)}else f.error('The "'+
a.name+"\" object doesn't have wind bending parameters.")}else f.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.get_wind_bending_params=function(a){a=a.A;if(!a.Ke)return null;var c={},e=l.rad_to_deg(b.lX(a.Tf,a.hj,a.D[3]));c.angle=e;c.main_frequency=a.Uf;c.detail_frequency=a.yf;c.detail_amplitude=a.xf;c.branch_amplitude=a.sf;return c};a.create_line=function(a){return c.create_line(a)};a.hide_all_by_data_id=function(a){a=c.get_all_objects("ALL",a);for(var b=0;b<
a.length;b++)q.hm(a[b],!0)};a.show_all_by_data_id=function(a){a=c.get_all_objects("ALL",a);for(var b=0;b<a.length;b++)q.hm(a[b],!1)}};b4w.module.main=function(a,t){function e(){}function c(){}function b(){}function h(){window.performance||(I.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(I.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});R.II(0)}function f(a,b){for(var c=null,d=b?da:wa,e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,ha)}catch(la){}if(c)break}c&&w.UP(c);return c}function q(a,b,e){a.addEventListener("webglcontextlost",
function(a){a.preventDefault();I.error("WebGL context lost");x()},!1);u.yg(e);var f=u.get_renderer_info();f&&I.log("%cRENDERER INFO:","color: #00a",e.getParameter(f.UNMASKED_VENDOR_WEBGL)+", "+e.getParameter(f.UNMASKED_RENDERER_WEBGL));S.yg(e);g.yg(e);Q.yg(e);U.yg(e);n.yg(e);F.yg(e);k.mV(a);n.init(a,b);m.KI(a.width,a.height,1);K.init();D.init();c=d();p()}function l(){e=function(){}}function x(){y()||(ma=performance.now()/1E3,K.pause(),z.pause(),Q.pause(),v.pause())}function y(){return aa<ma}function p(){var a=
"HMD"===pa.stereo&&D.KR();a?a.requestAnimationFrame(p):Ga(p);var b=performance.now()/1E3;Z||(Z=b);var d=b-Z;if(!(d<1/pa.max_fps)){for(var f=R.get_timeline(),g=0;g<fa.length;g++)fa[g](f,d);y()||(aa>Z&&(d-=aa-Math.max(ma,Z)),R.OU(d),f+=d,R.II(f),F.update(),H.update(),k.update(),g=d,k.is_primary_loaded()&&(B.reset(),ga.update(g),A.update(f,g),N.update(f,g),K.update(f,g),g&&r.update(g),k.is_primary_loaded()&&(z.update(f,g),k.is_primary_loaded()&&(D.update(f),C.update(f,g),k.is_primary_loaded()&&(v.update(!1),
G.update(f,g),ia.update(),e(g,f),k.is_primary_loaded()&&(m.update(f,g),v.OJ(),L.frame()))))),c(d));Z=b;a&&a.isPresenting&&a.submitFrame()}}function d(){var a=60,c=0,d=pa.PF,e=pa.DQ;return function(f){f<1/pa.max_fps||(a=ra.smooth(1/f,a,f,d),f=z.rR(),(c=(c+1)%e)||b(Math.round(a),f))}}var v=t("__anchors"),r=t("__animation"),H=t("__assets"),E=t("__config"),w=t("__compat"),n=t("__container"),C=t("__controls"),k=t("__data"),F=t("__debug"),u=t("__extensions"),g=t("__geometry"),D=t("__input"),B=t("__hud"),
N=t("__nla"),L=t("__main"),A=t("__logic_nodes"),G=t("__objects"),z=t("__physics"),I=t("__print"),S=t("__renderer"),m=t("__scenes"),K=t("__sfx"),U=t("__shaders"),Q=t("__textures"),R=t("__time"),ga=t("__transform"),ra=t("__util"),T=t("__version"),ia=t("__particles"),ha=E.context,pa=E.L,Z=0,ma=0,aa=0,fa=[],wa=["webgl","experimental-webgl"],da=["webgl2","experimental-webgl2"],W=null,Ga=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/pa.max_fps)}}();a.init=function(a,b){I.jV(pa.console_verbose);var c=T.version_str()+" "+T.type()+" ("+T.date_str()+")";I.log("%cINIT ENGINE","color: #00a",c);I.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;h();b?B.init(b):(E.L.show_hud_debug_info=!1,E.ka.xw=!1);w.$M();w.vz("Chrome")||w.vz("Firefox")||(pa.Gb=!1);c=f(a,pa.Gb);!c&&pa.Gb&&(pa.Gb=
!1,c=f(a,!1));if(!c)return null;I.log("%cINIT WEBGL "+(pa.Gb?"2":"1"),"color: #00a");W=c;q(a,b,c);E.apply_quality();w.BI(c,!0);E.$U();U.PS();pa.Qv&&(a.style["touch-action"]="none");I.log("%cSET PRECISION:","color: #00a",pa.precision);return c};a.set_fps_callback=function(a){b=a};a.clear_fps_callback=function(){b=function(){}};a.set_render_callback=function(a){e=a};a.clear_render_callback=function(){l()};a.pause=x;a.resume=function(){y()&&(aa=performance.now()/1E3,K.resume(),z.resume(),Q.play(!0),
v.resume())};a.is_paused=y;a.reset=function(){k.unload(0);k.reset();u.reset();S.reset();g.reset();Q.pU();U.reset();F.reset();n.reset();k.reset();n.reset();R.reset();K.reset();aa=ma=Z=0;b=function(){};c=function(){};e=function(){};fa.length=0;W=null};a.canvas_data_url=function(a,b,c,d){L.canvas_data_url(a,b,c,d)};a.detect_mobile=function(){return w.detect_mobile()};a.append_loop_cb=function(a){for(var b=0;b<fa.length;b++)if(fa[b]==a)return;fa.push(a)};a.remove_loop_cb=function(a){for(var b=0;b<fa.length;b++)if(fa[b]==
a){fa.splice(b,1);break}};a.get_renderer_info=function(){var a=u.get_renderer_info();return a?{vendor:W.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:W.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}};b4w.module.nla=function(a,t){var e=t("__nla"),c=t("__time"),b=t("__print"),h=t("__util");a.set_frame=function(a){a=h.clamp(a,e.get_frame_start(),e.get_frame_end());e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.set_frame(a,c.get_timeline())};a.get_frame=function(){return e.get_frame(c.get_timeline())};a.stop=function(){e.check_logic_nodes()&&b.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");e.sC()};a.play=function(a){e.check_logic_nodes()&&
b.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");e.WH(a)};a.is_play=function(){return e.is_play()};a.get_frame_start=function(){return e.get_frame_start()};a.get_frame_end=function(){return e.get_frame_end()};a.check_nla=function(){return e.check_nla()};a.check_logic_nodes=function(){return e.check_logic_nodes()};a.set_range=function(a,c){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):(c=parseFloat(c)||e.get_frame_end(),a=parseFloat(a)||
e.get_frame_end(),c=h.clamp(c,e.get_frame_start(),e.get_frame_end()),a=h.clamp(a,e.get_frame_start(),c),e.set_range(a,c))};a.reset_range=function(){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.reset_range()};a.set_cyclic=function(a){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.set_cyclic(a)};a.clear_callback=function(){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.clear_callback()}};b4w.module.app=function(a,t){function e(){var a=L.is_paused();document.addEventListener("visibilitychange",function(){document.hidden?(a=L.is_paused(),L.pause()):a||L.resume()},!1)}function c(){var a=0,b=u.get_container(),c=L.is_paused(),d=!0;L.append_loop_cb(function(){if(!(a%10)){var e=b.getBoundingClientRect();e.top>window.innerHeight||0>e.bottom?(d&&(c=L.is_paused()),L.pause(),d=!1):c||d||(L.resume(),d=!0)}a++})}function b(a,b,c,d){var e=document.createElement("canvas"),f=document.getElementById(a);
f||(G.error('Warning: canvas container "'+a+'" not found, appending to body'),f=document.body);e.style.position="absolute";e.style.left=0;e.style.top=0;e.style.width=f.offsetWidth+"px";e.style.height=f.offsetHeight+"px";e.width=f.offsetWidth*window.devicePixelRatio;e.height=f.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",e.style.left=0,e.style.top=0,a.style.pointerEvents="none"):a=null;f.appendChild(e);if(!L.init(e,a))return c&&w("Browser could not initialize WebGL",
"For more info visit","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",d),!1;a&&u.insert_to_container(a,"LAST");return!0}function h(a,b){a?(b&&(document.getElementById(b).style.display="block"),Q=document.getElementById(a)):(Q=document.createElement("div"),Q.innerHTML=0,Q.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",u.insert_to_container(Q,
"JUST_AFTER_CANVAS"))}function f(a,b){var c=String(a);b&&(c+="/"+String(b));Q.innerHTML=c}function q(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function l(a,b,c){var d=Math.max(C.hover_get_distance(a),1),e=S.get_rotation(a,fa);b=m.quat_to_dir(e,b,ma);b[2]=0;K.normalize(b,b);K.scale(b,d*c,b);c=S.get_translation(a,aa);K.add(c,b,c);C.set_translation(a,c)}function x(a,b){var c=C.hover_get_vertical_limits(a,da);if(c.up!=c.down){var d=C.get_camera_angles(a,
Z)[1],c=(c.down-d)/(c.down-c.up),d=C.hover_get_distance_limits(a,da),c=Math.max(c,2/d.max);C.rotate_camera(a,0,c*b)}}function y(a,b,c,d){S.move_local(a,5*b,5*c,5*d)}function p(a,b,c){var d=C.target_get_distance(a),e=Math.abs(b);c=Math.pow(e*c,1-Math.pow(e*c,.15));S.move_local(a,0,0,0>b?.001<d?-d*c:0:c/(1-c)*d)}function d(a,b,c,d){for(var e=c*b;0<a;--a)c+=e,d+=e,e=c*b;return d}function v(a,b,c,e,f){f?(f=C.target_get_pivot(a,ma),a=C.get_translation(a),a=K.dist(f,a)+e,e=0<b?d(b,-c,a,e):d(-b,c/(1-c),
a,e)):e-=2*b*c;return e}function r(a,b,c,d,e,f){function h(a,b,c,d){if(1==c){C.get_velocities(a,E);var e=D?.003*E.trans:.003*E.rot;c=g.get_sensor_value(a,b,0);g.get_sensor_payload(a,b,0).gesture===g.PL_SINGLE_TOUCH_MOVE?(Da+="X"==d?-c*e:0,Xa+="Y"==d?-c*e:0):g.get_sensor_payload(a,b,0).gesture===g.PL_MULTITOUCH_MOVE_PAN&&(a=D?.003*E.rot:7.5E-4*E.trans,Cb+="X"==d?-c*a:0,Hb+="Y"==d?-c*a:0)}}function k(a,b,c,d){if(1==c){c=g.get_sensor_value(a,b,1);C.get_velocities(a,E);if(D)e=.003*E.trans,f=7.5E-4*E.rot;
else var e=.003*E.rot,f=7.5E-4*E.trans;if(1===g.get_sensor_payload(a,b,0).which)ka+="X"==d?-c*e:0,ic+="Y"==d?-c*e:0;else if(2===g.get_sensor_payload(a,b,0).which||3===g.get_sensor_payload(a,b,0).which)oa+="X"==d?-c*f:0,P+="Y"==d?-c*f:0}}function n(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function q(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function r(a){return a[0]&&(a[1]||-.1>a[2])}function u(a){return a[0]&&(a[1]||.1<a[2])}function t(a){return a[0]&&(a[1]||a[2]||a[3])}function z(a,b,c){if(1==c)switch(c=
g.get_sensor_value(a,b,0),C.get_velocities(a,E),b){case "FORWARD":G?L[0]=1:D?(b=C.get_camera_angles(a,Z)[1],b=Math.abs(b)>=Math.PI/4?m.AXIS_Y:m.AXIS_MZ,l(a,b,.5*E.trans*c)):B?p(a,-E.zoom,c):y(a,0,0,-E.trans*c);break;case "BACKWARD":G?L[0]=-1:D?(b=C.get_camera_angles(a,Z)[1],b=Math.abs(b)>=Math.PI/4?m.AXIS_MY:m.AXIS_Z,l(a,b,.5*E.trans*c)):B?p(a,E.zoom,c):y(a,0,0,E.trans*c);break;case "UP":D?x(a,30*-E.zoom*c):G||y(a,0,E.trans*c,0);break;case "DOWN":D?x(a,30*E.zoom*c):G||y(a,0,-E.trans*c,0);break;case "LEFT":G?
L[1]=1:D?l(a,m.AXIS_MX,.5*E.trans*c):y(a,-E.trans*c,0,0);break;case "RIGHT":G?L[1]=-1:D?l(a,m.AXIS_X,.5*E.trans*c):y(a,E.trans*c,0,0);break;case "ROT_LEFT":B?C.rotate_camera(a,.75*-E.rot*c,0):C.rotate_camera(a,.75*E.rot*c,0);break;case "ROT_RIGHT":B?C.rotate_camera(a,.75*E.rot*c,0):C.rotate_camera(a,.75*-E.rot*c,0);break;case "ROT_UP":B?C.rotate_camera(a,0,.75*-E.rot*c):C.rotate_camera(a,0,.75*E.rot*c);break;case "ROT_DOWN":B?C.rotate_camera(a,0,.75*E.rot*c):C.rotate_camera(a,0,.75*-E.rot*c)}else switch(b){case "FORWARD":case "BACKWARD":G&&
(L[0]=0);break;case "LEFT":case "RIGHT":G&&(L[1]=0)}G&&(A.set_character_move_dir(G,L[0],L[1]),a=C.get_camera_angles_char(a,pa),A.set_character_rotation_h(G,a[0]),A.set_character_vert_move_dir_angle(G,a[1]))}R=a;ga=b;ra=c;T=d;ia=e;ha=f;var w=I.get_active_camera();H(w);var B=!1,G=null,D=!1;switch(C.get_move_style(w)){case C.MS_TARGET_CONTROLS:B=!a;break;case C.MS_EYE_CONTROLS:G=I.get_first_character();break;case C.MS_STATIC:return;case C.MS_HOVER_CONTROLS:D=!0}var E=C.get_velocities(w,wa);a=g.create_elapsed_sensor();
if(A.has_simulated_physics(w)){var Q=g.create_collision_sensor(w,null,!0);g.create_sensor_manifold(w,"CAMERA_COLLISION",g.CT_POSITIVE,[Q],null,function(a,b){var c=g.get_sensor_payload(a,b,0).coll_dist;if(0>c){var d=g.get_sensor_payload(a,b,0).coll_norm,e=ma;K.scale(d,-.25*c,e);c=S.get_translation(a,aa);K.add(c,e,c);S.set_translation_v(a,c)}})}if(G){var Q=S.get_translation(w),O=S.get_rotation(w),O=m.cam_quat_to_mesh_quat(O);Q[2]-=.5;A.set_transform(G,Q,O);F.append_stiff_trans(w,G,[0,0,.5]);var L=new Float32Array(2),
W=!0;A.set_character_move_type(G,A.CM_FLY);g.create_kb_sensor_manifold(w,"TOGGLE_CHAR_MOVE_TYPE",g.CT_SHOT,g.KEY_C,function(){W=!W;A.set_character_move_type(G,W?A.CM_FLY:A.CM_WALK)})}var ba,Ga,M,ja,ua,da,fa,Ya,za;f?Q=O=da=fa=Ya=za=g.create_custom_sensor(0):(za=N.check_enable_gamepad_indices(),O=za.length?za[za.length-1]:0,Q=g.create_gamepad_btn_sensor(N.GMPD_BUTTON_6,O),O=g.create_gamepad_btn_sensor(N.GMPD_BUTTON_7,O),da=g.create_gamepad_axis_sensor(N.GMPD_AXIS_0,za),fa=g.create_gamepad_axis_sensor(N.GMPD_AXIS_1,
za),Ya=g.create_gamepad_axis_sensor(N.GMPD_AXIS_2,za),za=g.create_gamepad_axis_sensor(N.GMPD_AXIS_3,za));b?b=ba=Ga=M=ja=ua=g.create_custom_sensor(0):(b=g.create_keyboard_sensor(g.KEY_W),ba=g.create_keyboard_sensor(g.KEY_S),Ga=g.create_keyboard_sensor(g.KEY_A),M=g.create_keyboard_sensor(g.KEY_D),ja=g.create_keyboard_sensor(g.KEY_R),ua=g.create_keyboard_sensor(g.KEY_F));var Oa=g.create_keyboard_sensor(g.KEY_UP),Qa=g.create_keyboard_sensor(g.KEY_DOWN),Ma=g.create_keyboard_sensor(g.KEY_LEFT),Na=g.create_keyboard_sensor(g.KEY_RIGHT);
D||(g.create_sensor_manifold(w,"FORWARD",g.CT_CONTINUOUS,[a,b,fa],r,z),g.create_sensor_manifold(w,"BACKWARD",g.CT_CONTINUOUS,[a,ba,fa],u,z));B?(g.create_sensor_manifold(w,"ROT_UP",g.CT_CONTINUOUS,[a,Oa,ja,za],n,z),g.create_sensor_manifold(w,"ROT_DOWN",g.CT_CONTINUOUS,[a,Qa,ua,za],q,z),g.create_sensor_manifold(w,"ROT_LEFT",g.CT_CONTINUOUS,[a,Ma,Ga,Ya],n,z),g.create_sensor_manifold(w,"ROT_RIGHT",g.CT_CONTINUOUS,[a,Na,M,Ya],q,z)):D?(g.create_sensor_manifold(w,"LEFT",g.CT_CONTINUOUS,[a,Ma,Ga,da],n,z),
g.create_sensor_manifold(w,"RIGHT",g.CT_CONTINUOUS,[a,Na,M,da],q,z),g.create_sensor_manifold(w,"FORWARD",g.CT_CONTINUOUS,[a,Oa,b,fa],n,z),g.create_sensor_manifold(w,"BACKWARD",g.CT_CONTINUOUS,[a,Qa,ba,fa],q,z),g.create_sensor_manifold(w,"UP",g.CT_CONTINUOUS,[a,ua,za],u,z),g.create_sensor_manifold(w,"DOWN",g.CT_CONTINUOUS,[a,ja,za],r,z)):(g.create_sensor_manifold(w,"UP",g.CT_CONTINUOUS,[a,ja,Q],t,z),g.create_sensor_manifold(w,"DOWN",g.CT_CONTINUOUS,[a,ua,O],t,z),g.create_sensor_manifold(w,"LEFT",g.CT_CONTINUOUS,
[a,Ga,da],r,z),g.create_sensor_manifold(w,"RIGHT",g.CT_CONTINUOUS,[a,M,da],u,z),g.create_sensor_manifold(w,"ROT_UP",g.CT_CONTINUOUS,[a,Oa,za],r,z),g.create_sensor_manifold(w,"ROT_DOWN",g.CT_CONTINUOUS,[a,Qa,za],u,z),g.create_sensor_manifold(w,"ROT_LEFT",g.CT_CONTINUOUS,[a,Ma,Ya],r,z),g.create_sensor_manifold(w,"ROT_RIGHT",g.CT_CONTINUOUS,[a,Na,Ya],u,z));if(!c){var Ra=0;c=g.create_mouse_wheel_sensor(d);var Ja=0;fa=g.create_touch_zoom_sensor(d);g.create_sensor_manifold(w,"MOUSE_WHEEL",g.CT_LEVEL,[c],
null,function(a,b,c){1==c&&(b=g.get_sensor_value(a,b,0),C.get_velocities(a,E),B||D?Ra=v(a,b,E.zoom,Ra,B):(E.trans*=1+b*E.zoom,C.set_velocities(a,E)))});g.create_sensor_manifold(w,"TOUCH_ZOOM",g.CT_LEVEL,[fa],null,function(a,b,c){1==c&&(c=g.get_sensor_value(a,b,0),C.get_velocities(a,E),g.get_sensor_payload(a,b,0)===g.PL_MULTITOUCH_MOVE_ZOOM&&(Ja=v(a,c,.03*E.zoom,Ja,B)))});g.create_sensor_manifold(w,"ZOOM_INTERPOL",g.CT_POSITIVE,[a],null,function(a,b){if(B||D)if(1E-5<Math.abs(Ra)||1E-5<Math.abs(Ja)){var c=
g.get_sensor_value(a,b,0),d=m.smooth(Ra,0,c,.1*U);Ra-=d;c=m.smooth(Ja,0,c,.15*U);Ja-=c;D?x(a,-(d+c)):(d=C.target_get_distance(a)+d+c,d=Math.max(d,.001),C.target_set_distance(a,d))}else Ja=Ra=0})}var ka=0,ic=0,oa=0,P=0,Ha=0,Za=0;f||(f=function(a){C.get_velocities(a,E);Ha+=.002*E.trans},c=function(a){C.get_velocities(a,E);Za+=.05*E.zoom},fa=function(a){C.get_velocities(a,E);Ha-=.002*E.trans},za=function(a){C.get_velocities(a,E);Za-=.05*E.zoom},B?(g.create_sensor_manifold(w,"GMPD_PAN_Y_POS",g.CT_CONTINUOUS,
[Q],null,c),g.create_sensor_manifold(w,"GMPD_PAN_Y_NEG",g.CT_CONTINUOUS,[O],null,za),g.create_sensor_manifold(w,"GMPD_PAN_X_POS",g.CT_CONTINUOUS,[da],function(a){return-.1>a[0]},fa),g.create_sensor_manifold(w,"GMPD_PAN_X_NEG",g.CT_CONTINUOUS,[da],function(a){return.1<a[0]},f)):D&&(g.create_sensor_manifold(w,"GMPD_PAN_X_POS",g.CT_CONTINUOUS,[Ya],function(a){return-.1>a[0]},fa),g.create_sensor_manifold(w,"GMPD_PAN_X_NEG",g.CT_CONTINUOUS,[Ya],function(a){return.1<a[0]},f)));if(e){e=g.create_mouse_move_sensor("X",
window);f=g.create_mouse_move_sensor("Y",window);Q=g.create_mouse_click_sensor(d);c=g.create_mouse_click_sensor(window);var Wa=!1,O=function(a){a[2]?Wa=!0:a[0]||(Wa=!1);return Wa&&a[0]};g.create_sensor_manifold(w,"MOUSE_X",g.CT_POSITIVE,[c,e,Q],O,k,"X");g.create_sensor_manifold(w,"MOUSE_Y",g.CT_POSITIVE,[c,f,Q],O,k,"Y");e=N.get_device_by_type_element(N.DEVICE_MOUSE,window);N.switch_prevent_default(e,!1)}else e=g.create_mouse_move_sensor("X",d),f=g.create_mouse_move_sensor("Y",d),Q=g.create_mouse_click_sensor(d),
g.create_sensor_manifold(w,"MOUSE_X",g.CT_POSITIVE,[Q,e],null,k,"X"),g.create_sensor_manifold(w,"MOUSE_Y",g.CT_POSITIVE,[Q,f],null,k,"Y");var Da=0,Xa=0,Cb=0,Hb=0;e=g.create_touch_move_sensor("X",d);d=g.create_touch_move_sensor("Y",d);g.create_sensor_manifold(w,"TOUCH_X",g.CT_POSITIVE,[e],null,h,"X");g.create_sensor_manifold(w,"TOUCH_Y",g.CT_POSITIVE,[d],null,h,"Y");g.create_sensor_manifold(w,"ROT_TRANS_INTERPOL",g.CT_POSITIVE,[a],null,function(a,b){if(1E-5<Math.abs(ka)||1E-5<Math.abs(ic)||1E-5<Math.abs(Da)||
1E-5<Math.abs(Xa)||1E-5<Math.abs(oa)||1E-5<Math.abs(P)||1E-5<Math.abs(Cb)||1E-5<Math.abs(Hb)||1E-5<Math.abs(Ha)||1E-5<Math.abs(Za)){var c=g.get_sensor_value(a,b,0),d=m.smooth(ka,0,c,.08*U),e=m.smooth(ic,0,c,.08*U);ka-=d;ic-=e;var f=m.smooth(Da,0,c,.12*U),h=m.smooth(Xa,0,c,.12*U);Da-=f;Xa-=h;var k=m.smooth(oa,0,c,.08*U),n=m.smooth(P,0,c,.08*U);oa-=k;P-=n;var p=m.smooth(Cb,0,c,.12*U),q=m.smooth(Hb,0,c,.12*U);Cb-=p;Hb-=q;var r=m.smooth(Ha,0,c,.08*U),c=m.smooth(Za,0,c,.08*U);Ha-=r;Za-=c;B?(C.rotate_camera(a,
d+f,e+h),e=C.target_get_distance(a),C.target_pan_pivot(a,e*(k+p+r),e*(n+q+c))):D?(d+f&&l(a,m.AXIS_X,.2*(d+f)),e+h&&(n=C.get_camera_angles(a,Z)[1],l(a,Math.abs(n)>Math.PI/4?m.AXIS_MY:m.AXIS_Z,.2*(e+h))),C.rotate_camera(a,k+p+r,0)):(C.rotate_camera(a,.5*(d+f),.5*(e+h)),G&&(k=C.get_camera_angles_char(a,pa),A.set_character_rotation_h(G,k[0]),A.set_character_vert_move_dir_angle(G,k[1])))}});g.create_kb_sensor_manifold(w,"DEC_STEREO_DIST",g.CT_SHOT,g.KEY_LEFT_SQ_BRACKET,function(a){var b=C.get_stereo_distance(a);
C.set_stereo_distance(a,.9*b)});g.create_kb_sensor_manifold(w,"INC_STEREO_DIST",g.CT_SHOT,g.KEY_RIGHT_SQ_BRACKET,function(a){var b=C.get_stereo_distance(a);C.set_stereo_distance(a,1.1*b)})}function H(a){var b=C.get_move_style(a),c=g.create_callback_sensor(function(){var c=C.get_move_style(a),d=c!=b;b=c;return d});g.create_sensor_manifold(a,"CHANGE_MOVE_STYLE",g.CT_POSITIVE,[c],null,function(){E();r(R,ga,ra,T,ia,ha)})}function E(){var a=I.get_active_camera();g.check_sensor_manifold(a,"TOGGLE_CHAR_MOVE_TYPE")&&
I.get_first_character()&&F.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),c=0;c<b.length;c++)g.remove_sensor_manifold(a,b[c])}function w(a,b,c,d){var e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div");if(d)for(var h=0;h<d.length;h++){var k=document.getElementById(d[h]);k&&
k.parentNode.removeChild(k)}e.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";f.style.cssText="color:#fff;font-size:24px;";g.style.cssText="color:#fff;font-size:20px;";f.innerHTML=a;g.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+c+'">'+c.replace("https://www.","")+"</a>";e.appendChild(f);e.appendChild(g);document.body.appendChild(e)}function n(a,b,c,d,e){function f(){var h=performance.now()-g;e(b+h*(c-b)/d);
(h>=d||!a.parentNode)&&L.remove_loop_cb(f)}var g=performance.now();L.append_loop_cb(f)}var C=t("camera"),k=t("config"),F=t("constraints"),u=t("container"),g=t("controls"),D=t("data"),B=t("debug"),N=t("input"),L=t("main"),A=t("physics"),G=t("print"),z=t("screen"),I=t("scenes"),S=t("transform"),m=t("util"),K=t("vec3"),U=1,Q=null,R=!1,ga=!1,ra=!1,T=null,ia=!1,ha=!1,pa=new Float32Array(2),Z=new Float32Array(2),ma=new Float32Array(3),aa=new Float32Array(3),fa=new Float32Array(4),wa={},da={};a.init=function(a){function d(){var a=
b(p,Q,A,q),d=u.get_canvas();if(a){var g=u.get_container();u.resize_to_container();C&&(h(r,t),L.set_fps_callback(f));x&&(e(),c());v&&L.append_loop_cb(function(){g.style.height=g.clientWidth/v+"px"});n&&L.append_loop_cb(function(){u.resize_to_container()});E&&L.append_loop_cb(function(){u.force_offsets_updating()});w&&k.reset_limits();I==k.P_AUTO?B.test_performance(function(a,b){0==a?(G.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),k.apply_quality(k.P_HIGH)):1.5>b?(G.log("QUALITY TEST RESULT: LOW ("+
b.toFixed(1)+" GB/s)"),k.apply_quality(k.P_LOW)):(G.log("QUALITY TEST RESULT: HIGH ("+b.toFixed(1)+" GB/s)"),k.apply_quality(k.P_HIGH));m(d,!0)}):m(d,!0)}else m(d,!1)}function l(a){a.keyCode==g.KEY_P&&(L.is_paused()?L.resume():L.pause())}function m(){}a=a||{};var n=!1,p=null,q=null,r=null,v=0,t=null,z=!0,w=!1,x=!0,A=!0,y=!1,C=!1,K=!1,E=!1,I=k.get("quality"),F;for(F in a)switch(F){case "canvas_container_id":p=a.canvas_container_id;break;case "callback":m=a.callback;break;case "autoresize":n=a.autoresize;
break;case "show_hud_debug_info":K=a.show_hud_debug_info;break;case "sfx_mix_mode":y=a.sfx_mix_mode;break;case "show_fps":C=a.show_fps;break;case "track_container_position":E=a.track_container_position;G.ga("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":t=a.fps_wrapper_id;break;case "fps_elem_id":r=a.fps_elem_id;break;case "error_purge_elements":q=a.error_purge_elements;break;case "report_init_failure":A=a.report_init_failure;
break;case "pause_invisible":x=a.pause_invisible;break;case "key_pause_enabled":z=a.key_pause_enabled;break;case "force_container_ratio":v=a.force_container_ratio;break;case "min_capabilities":w=a.min_capabilities;break;case "quality":I=a.quality;break;default:k.set(F,a[F])}I!=k.P_AUTO&&k.set("quality",I);z&&document.addEventListener("keydown",l,!1);k.set("show_hud_debug_info",K);k.set("sfx_mix_mode",y);var Q=K||y||null;"complete"==document.readyState?window.setTimeout(d,0):window.addEventListener("load",
d,!1);window.addEventListener("unload",function(){D.cleanup()},!1)};a.set_onclick=function(a,b){var c=q(a);c.addEventListener("mouseup",function(){b(c.value)},!1)};a.set_onchange=function(a,b){var c=q(a);c.addEventListener("change",function(){var a=c.checked;b(void 0!=a?a:c.value)},!1)};a.set_onkeypress=function(a,b){var c=q(a);c.addEventListener("keypress",function(a){b(a.keyCode,c.value)},!1)};a.enable_camera_controls=r;a.disable_camera_controls=E;a.enable_object_controls=function(a){function b(a){return a[0]&&
(a[1]||a[2])}function c(a,b,c){if(1==c)switch(c=g.get_sensor_value(a,b,0),b){case "FORWARD":d?A.vehicle_throttle(a,1):S.move_local(a,0,-1*c,0);break;case "BACKWARD":d?A.vehicle_throttle(a,-1):S.move_local(a,0,1*c,0);break;case "LEFT":d?A.vehicle_steer(a,-1):S.move_local(a,1*c,0,0);break;case "RIGHT":d?A.vehicle_steer(a,1):S.move_local(a,-1*c,0,0)}else switch(b){case "FORWARD":case "BACKWARD":d&&A.vehicle_throttle(a,0);break;case "LEFT":case "RIGHT":d&&A.vehicle_steer(a,0)}}var d=A.is_vehicle_chassis(a)||
A.is_vehicle_hull(a),e=g.create_elapsed_sensor(),f=g.create_keyboard_sensor(g.KEY_W),h=g.create_keyboard_sensor(g.KEY_S),k=g.create_keyboard_sensor(g.KEY_A),l=g.create_keyboard_sensor(g.KEY_D),m=g.create_keyboard_sensor(g.KEY_UP),n=g.create_keyboard_sensor(g.KEY_DOWN),p=g.create_keyboard_sensor(g.KEY_LEFT),q=g.create_keyboard_sensor(g.KEY_RIGHT);g.create_sensor_manifold(a,"FORWARD",g.CT_CONTINUOUS,[e,f,m],b,c);g.create_sensor_manifold(a,"BACKWARD",g.CT_CONTINUOUS,[e,h,n],b,c);g.create_sensor_manifold(a,
"LEFT",g.CT_CONTINUOUS,[e,k,p],b,c);g.create_sensor_manifold(a,"RIGHT",g.CT_CONTINUOUS,[e,l,q],b,c)};a.disable_object_controls=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],c=0;c<b.length;c++)g.remove_sensor_manifold(a,b[c])};a.enable_debug_controls=function(){g.create_kb_sensor_manifold(null,"CAMERA_SHOT",g.CT_SHOT,g.KEY_K,function(){B.make_camera_frustum_shot()});g.create_kb_sensor_manifold(null,"LIGHT_SHOT",g.CT_SHOT,g.KEY_L,function(){B.make_light_frustum_shot()});g.create_kb_sensor_manifold(null,
"TELEMETRY",g.CT_SHOT,g.KEY_T,function(){B.plot_telemetry()})};a.request_fullscreen=function(a,b,c){G.fd("request_fullscreen","screen.request_fullscreen");z.request_fullscreen(a,b,c)};a.exit_fullscreen=function(){G.fd("exit_fullscreen","screen.exit_fullscreen");z.exit_fullscreen()};a.check_fullscreen=function(){G.fd("check_fullscreen","screen.check_fullscreen");return z.check_fullscreen()};a.report_app_error=w;a.get_url_params=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==
b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("="),f=e[0];1<e.length?(e=e[1],a?f in c?c[f].push(e):c[f]=[e]:c[f]=e):a?f in c||(c[f]=[]):c[f]=""}return c};a.css_animate=function(a,b,c,d,e,f,g,h){if(a&&b&&isFinite(c)&&isFinite(d)&&isFinite(e)){f=f||"";g=g||"";h=h||function(){};var k=a.style,l=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==k[b])if(void 0!=k["webkit"+l])b="webkit"+l;else if(void 0!=k["ms"+l])b="ms"+l;else if(void 0!=k["moz"+
l])b="moz"+l;else return;n(a,c,d,e,function(e){a&&(k[b]=f+e+g,c>d&&e<=d||c<d&&e>=d)&&(k[b]=f+d+g,h())})}};a.attr_animate=function(a,b,c,d,e,f){a&&b&&isFinite(c)&&isFinite(d)&&isFinite(e)&&(f=f||function(){},n(a,c,d,e,function(e){a&&(0<=e&&a.setAttribute(b,e),c>d&&e<=d||c<d&&e>=d)&&(a.setAttribute(b,d),f())}))};a.queue_animate=function(b){if(b.length){var c=b.shift(),d=c.elem,e=c.prop,f=c.from,g=c.to,h=c.duration,k=c.opt_prefix,l=c.opt_suffix,m=function(){c.cb&&c.cb();a.queue_animate(b)};"css"==c.type?
a.css_animate(d,e,f,g,h,k,l,m):"attr"==c.type&&a.attr_animate(d,e,f,g,h,m)}};a.set_camera_smooth_factor=function(a){U=a};a.get_camera_smooth_factor=function(){return U}};b4w.module.camera_anim=function(a,t){function e(a,b,d,e,f){d=y.angle_wrap_0_2pi(b-d);d=Math.min(d,2*Math.PI-d);b=y.angle_wrap_0_2pi(e-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(d)||1E-6>2*Math.PI-Math.abs(d))d=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;c.is_eye_camera(a)?(f[0]=b,f[1]=d):(f[0]=d,f[1]=b);return f}var c=t("camera"),b=t("controls"),h=t("print"),f=t("scenes"),q=t("time"),l=t("transform"),x=t("tsr"),y=t("util"),p=t("vec3"),d=new Float32Array(2),v=new Float32Array(2),r=new Float32Array(3),
H=new Float32Array(3),E=new Float32Array(3),w=x.create(),n=x.create(),C=x.create(),k={},F=!1,u=!1,g=!1,D=!1;a.track_to_target=function(a,e,f,g,k,n,u,t){if(c.is_eye_camera(a)){if(y.is_vector(e))var m=e;else m=r,l.get_object_center(e,!1,m);f=f||1;g=g||2;k=k||1;n=n||1;var z=l.get_translation(a,H);e=p.subtract(m,z,E);var m=c.get_camera_angles(a,d),w=c.get_camera_angles_dir(e,v),x=w[0]-m[0],A=w[1]-m[1],B=Math.abs(Math.acos(Math.cos(x)*Math.cos(A))/f),C=p.length(e)*(1-1/g),D=function(a){return 6*a*(1-a)},
G=q.get_timeline(),I=0,F=function(){b.remove_sensor_manifold(a,"TRACK_TO_TARGET");u&&u()};f=b.create_timeline_sensor();g=b.create_elapsed_sensor();b.create_sensor_manifold(a,"TRACK_TO_TARGET",b.CT_CONTINUOUS,[f,g],null,function(d,e,f){c.is_eye_camera(d)?1==f&&(f=b.get_sensor_value(d,e,0)-G,e=b.get_sensor_value(d,e,1),f<B?(f=D(f/B),c.rotate_camera(a,f*x*e/B,f*A*e/B)):f<B+k?(I||(c.rotate_camera(a,w[0],w[1],!0),I++),f=D(f-B/k),e=f*C*e/k,l.move_local(d,0,0,-e)):f<B+k+n?1>=I&&(c.rotate_camera(a,w[0],w[1],
!0),c.eye_set_look_at(a,z),l.move_local(d,0,0,-C),t&&t(),I++):f<B+k+n+k?(2>=I&&(c.rotate_camera(a,w[0],w[1],!0),c.eye_set_look_at(a,z),l.move_local(d,0,0,-C),I++),f=D(f-B-k-n/k),e=f*C*e/k,l.move_local(d,0,0,e)):(c.rotate_camera(a,w[0],w[1],!0),c.eye_set_look_at(a,z),F())):F()})}else h.error("track_to_target(): Wrong camera object or camera move style")};a.auto_rotate=function(a,g,l){function n(f,g,h){if(1==h)if(h=c.get_move_style(f),h==c.MS_STATIC)p();else if(h!=c.MS_TARGET_CONTROLS&&h!=c.MS_EYE_CONTROLS||
!c.has_horizontal_rot_limits(f))r=null,g=b.get_sensor_value(f,g,0),c.rotate_camera(f,g*a,0);else{h=h==c.MS_EYE_CONTROLS?c.eye_get_horizontal_limits(f,k):c.target_get_horizontal_limits(f,k);if(null===r||h.left!=r.left||h.right!=r.right){r=r||{};r.left=h.left;r.right=h.right;u=Math.min(.2,y.angle_wrap_0_2pi(r.right-r.left)/2);h=q;var l=r,n=c.get_camera_angles(h,d)[0];h=e(h,n,l.left,l.right,v);m=a*Math.min(1,h[0]/.2,h[1]/.2)}g=b.get_sensor_value(f,g,0);h=c.get_camera_angles(f,d)[0];h=e(f,h,r.left,r.right,
v);h[1]>u&&h[0]>u?m=y.sign(m)*a:h[1]<u?m-=Math.pow(a,2)/.4*g:h[0]<u&&(m+=Math.pow(a,2)/.4*g);c.rotate_camera(f,g*m,0)}}function p(){b.remove_sensor_manifold(q,"AUTO_ROTATE");b.remove_sensor_manifold(q,"DISABLE_AUTO_ROTATE");g()}g=g||function(){};var q=f.get_active_camera();if(c.is_static_camera(q))h.error("auto_rotate(): Wrong camera move style");else{var r={},u=0,m=0;if(b.check_sensor_manifold(q,"AUTO_ROTATE"))p();else{var t=b.create_mouse_move_sensor("X"),w=b.create_mouse_move_sensor("Y"),x=b.create_mouse_click_sensor(),
B=b.create_touch_move_sensor(),C=b.create_touch_zoom_sensor(),D=b.create_elapsed_sensor();l=l?b.create_mouse_wheel_sensor():b.create_custom_sensor(0);b.create_sensor_manifold(q,"DISABLE_AUTO_ROTATE",b.CT_LEVEL,[t,w,x,B,C,l],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},p);b.create_sensor_manifold(q,"AUTO_ROTATE",b.CT_CONTINUOUS,[D],function(a){return a[0]},n)}}};a.is_auto_rotate=function(){var a=f.get_active_camera();return b.check_sensor_manifold(a,"AUTO_ROTATE")};a.check_auto_rotate=
function(){var a=f.get_active_camera();return c.get_move_style(a)==c.MS_STATIC?!1:!0};a.move_camera_to_point=function(a,b,d,e,f){if(c.get_move_style(a)!=c.MS_STATIC)h.error("move_camera_to_point(): wrong camera type");else if(!F)if(a)if(b){d=d||1;e=e||.01;var k=y.is_vector(a)?a:l.get_tsr(a,w),u=y.is_vector(b)?b:l.get_tsr(b,n);b=p.distance(x.get_trans_view(k),x.get_trans_view(u))/d;d=y.quat_to_dir(x.get_quat_view(k),y.AXIS_MZ,r);var v=y.quat_to_dir(x.get_quat_view(u),y.AXIS_MZ,H);d=Math.min(Math.abs(p.dot(d,
v)),1);e=1E3*Math.max(b,Math.acos(d)/e);F=!0;var m=q.animate(0,1,e,function(b){var c=x.interpolate(k,u,y.smooth_step(b),C);g?(q.clear_animation(m),F=g=!1):(l.set_tsr(a,c),1==b&&(F=!1,f&&f()))})}else h.error("move_camera_to_point(): you must specify the point object");else h.error("move_camera_to_point(): you must specify the camera object")};a.rotate_camera=function(a,b,d,e,f){if(c.get_move_style(a)==c.MS_STATIC)h.error("rotate_camera(): not supported for STATIC cameras");else if(!u)if(a)if(b||d){e=
e||1E3;u=!0;var g=0,k=q.animate(0,b,e,function(d){D||d>=b?(D=!1,q.clear_animation(k),u&&(u=!1,f&&f())):(c.rotate_camera(a,g-d,0),g=d)}),l=0,m=q.animate(0,d,e,function(b){D||b>=d?(D=!1,q.clear_animation(m),u&&(u=!1,f&&f())):(c.rotate_camera(a,0,l-b),l=b)})}else h.error("rotate_camera(): you must specify the rotation angle");else h.error("rotate_camera(): you must specify the camera object")};a.stop_cam_moving=function(){g=!0};a.stop_cam_rotating=function(){D=!0};a.is_moving=function(){return F};a.is_rotating=
function(){return u}};b4w.module.gp_conf=function(a,t){function e(){A.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&A.push(a[b]);return A}function c(a){var b=H.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)r.set_gamepad_key(a,c,b[c])}else c=JSON.stringify(w),H.set(a+"_gmpd_stngs",c,"b4w")}function b(a){S=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),
e=document.createElement("div"),f=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),q=document.createElement("div"),u=document.createElement("div"),v=document.createElement("div"),t=document.createElement("div"),w=document.createElement("div"),A=document.createElement("div"),y=document.createElement("div"),B=document.createElement("div"),C=document.createElement("div"),
D=document.createElement("div"),K=document.createElement("div"),F=document.createElement("div");g=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";f.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";k.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";l.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";q.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";u.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";v.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";w.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";C.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";K.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";F.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(K);b.appendChild(F);c.appendChild(d);c.appendChild(e);c.appendChild(f);c.appendChild(h);b.appendChild(c);k.appendChild(l);k.appendChild(m);k.appendChild(p);k.appendChild(q);b.appendChild(k);b.appendChild(u);b.appendChild(v);b.appendChild(t);b.appendChild(w);b.appendChild(A);b.appendChild(y);b.appendChild(B);a.appendChild(b);b.appendChild(C);b.appendChild(D);G.length=0;n.length=0;z.length=0;I.length=0;G.push(p,
m,q,l,A,y,C,B,t,w,u,v,d,f,h,e,D);n.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
z.push(u,u,v,v);I.push(K,F);for(a=0;a<G.length;a++)G[a].setAttribute("id","pad_btn_"+a),G[a].setAttribute("data-colorstate","B"),G[a].setAttribute("data-key",a),G[a].setAttribute("data-svgid",a);K.setAttribute("id","pad_left_axis");K.setAttribute("data-colorstate","GR");K.setAttribute("data-key",r.GMPD_AXIS_0);K.setAttribute("data-svgid",n.length);F.setAttribute("id","pad_right_axis");F.setAttribute("data-colorstate","GR");F.setAttribute("data-key",r.GMPD_AXIS_2);F.setAttribute("data-svgid",n.length+
1);n.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
x(G,E);x(I,"#e6e6e6")}function h(a){return[v.create_gamepad_btn_sensor(r.GMPD_BUTTON_0,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_1,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_2,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_3,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_4,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_5,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_6,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_7,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_8,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_9,
a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_10,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_11,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_12,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_13,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_14,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_15,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_16,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_17,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_18,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_19,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_20,
a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_21,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_22,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_23,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_24,a),v.create_gamepad_btn_sensor(r.GMPD_BUTTON_25,a)]}function f(a){return[v.create_gamepad_axis_sensor(r.GMPD_AXIS_0,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_1,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_2,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_3,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_4,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_5,
a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_6,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_7,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_8,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_9,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_10,a),v.create_gamepad_axis_sensor(r.GMPD_AXIS_11,a)]}function q(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=
b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function l(a){u.removeChild(g);g=null;switch(a){case "PAD":N.checked=!0;b(u);break;case "WHEEL":B.checked=!0;var c=u;S=!1;var d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),
q=document.createElement("div"),v=document.createElement("div"),t=document.createElement("div"),w=document.createElement("div"),A=document.createElement("div"),y=document.createElement("div"),C=document.createElement("div"),D=document.createElement("div"),F=document.createElement("div"),K=document.createElement("div"),H=document.createElement("div"),L=document.createElement("div"),ca=document.createElement("div"),Ca=document.createElement("div"),la=document.createElement("div"),V=document.createElement("div");
a=document.createElement("div");var sa=document.createElement("div"),xa=document.createElement("div"),J=document.createElement("div"),La=document.createElement("div"),Ua=document.createElement("div");g=d;var Ia="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";d.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=Ia+"top: 132px;left: 331px;";f.style.cssText=Ia+"top: 122px;left: 315px;";h.style.cssText=Ia+"top: 122px;left: 347px;";k.style.cssText=Ia+"top: 113px;left: 331px;";l.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";p.style.cssText=Ia+"top: 107px;left: 141px;";q.style.cssText=Ia+"top: 107px;left: 90px;";v.style.cssText=Ia+"top: 185px;left: 321px;";t.style.cssText=Ia+"top: 185px;left: 340px;";w.style.cssText=Ia+"top: 179px;left: 358px;";A.style.cssText=Ia+"top: 178px;left: 303px;";y.style.cssText=Ia+"top: 210px;left: 299px;";C.style.cssText=Ia+"top: 279px;left: 299px;";D.style.cssText=Ia+"top: 210px;left: 321px;";F.style.cssText=Ia+
"top: 279px;left: 321px;";K.style.cssText=Ia+"top: 210px;left: 344px;";H.style.cssText=Ia+"top: 278px;left: 344px;";L.style.cssText=Ia+"top: 124px;left: 147px;";ca.style.cssText=Ia+"top: 138px;left: 133px;";Ca.style.cssText=Ia+"top: 124px;left: 82px;";la.style.cssText=Ia+"top: 138px;left: 96px;";V.style.cssText=Ia+"top: 278px;left: 367px;";Ia="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=Ia+"top: 291px;left: 50px;";sa.style.cssText=Ia+"top: 291px;left: 111px;";xa.style.cssText=Ia+"top: 291px;left: 171px;";J.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";La.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Ua.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";c.appendChild(d);d.appendChild(a);d.appendChild(sa);d.appendChild(xa);d.appendChild(J);d.appendChild(La);d.appendChild(Ua);d.appendChild(e);d.appendChild(f);d.appendChild(h);d.appendChild(k);d.appendChild(l);d.appendChild(m);d.appendChild(p);d.appendChild(q);d.appendChild(v);d.appendChild(t);d.appendChild(w);d.appendChild(A);d.appendChild(y);d.appendChild(C);d.appendChild(D);d.appendChild(F);d.appendChild(K);d.appendChild(H);
d.appendChild(L);d.appendChild(ca);d.appendChild(Ca);d.appendChild(la);d.appendChild(V);G.length=0;n.length=0;z.length=0;I.length=0;G.push(e,f,h,k,l,m,p,q,v,t,w,A,y,C,D,F,K,H,L,ca,Ca,la,V);n.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
I.push(J,a,xa,sa,La,Ua);for(c=0;c<G.length;c++)G[c].setAttribute("id","wheel_btn_"+c),G[c].setAttribute("data-colorstate","B"),G[c].setAttribute("data-key",c),G[c].setAttribute("data-svgid",c);for(c=0;c<I.length;c++)G[c].setAttribute("id","wheel_axis_"+c),G[c].setAttribute("data-colorstate","GR");J.setAttribute("data-key",r.GMPD_AXIS_0);J.setAttribute("data-svgid",n.length);a.setAttribute("data-key",r.GMPD_AXIS_1);a.setAttribute("data-svgid",n.length+1);xa.setAttribute("data-key",r.GMPD_AXIS_2);xa.setAttribute("data-svgid",
n.length+2);sa.setAttribute("data-key",r.GMPD_AXIS_3);sa.setAttribute("data-svgid",n.length+3);La.setAttribute("data-key",r.GMPD_AXIS_4);La.setAttribute("data-svgid",n.length+4);Ua.setAttribute("data-key",r.GMPD_AXIS_5);Ua.setAttribute("data-svgid",n.length+5);n.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
x(G,E);x(I,"#e6e6e6")}}function x(a,b){function c(a){a=a.target;if(!(0>C||"G"==a.getAttribute("data-colorstate")))if(F){if("R"==a.getAttribute("data-colorstate")&&(k=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",F=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(k.getAttribute("data-svgid"));k.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(n[c])+"')";k.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));k=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(n[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),d="B"==a.getAttribute("data-colorstate")?1:2;F=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(n[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";k=a}}for(var d=0;d<a.length;d++)r.add_click_listener(a[d],c)}function y(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function p(){var a=window.innerWidth,b=window.innerHeight;u.style.zoom=750>=
b&&400<b||750>=a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var d=t("container"),v=t("controls"),r=t("input"),H=t("storage"),E=RegExp("#5276cf","g"),w={};w[r.GMPD_BUTTON_12]=r.GMPD_BUTTON_12;w[r.GMPD_BUTTON_13]=r.GMPD_BUTTON_13;w[r.GMPD_BUTTON_15]=r.GMPD_BUTTON_15;w[r.GMPD_BUTTON_14]=r.GMPD_BUTTON_14;w[r.GMPD_BUTTON_3]=r.GMPD_BUTTON_3;w[r.GMPD_BUTTON_0]=r.GMPD_BUTTON_0;w[r.GMPD_BUTTON_1]=r.GMPD_BUTTON_1;w[r.GMPD_BUTTON_2]=r.GMPD_BUTTON_2;w[r.GMPD_BUTTON_5]=r.GMPD_BUTTON_5;w[r.GMPD_BUTTON_7]=r.GMPD_BUTTON_7;
w[r.GMPD_BUTTON_4]=r.GMPD_BUTTON_4;w[r.GMPD_BUTTON_6]=r.GMPD_BUTTON_6;w[r.GMPD_BUTTON_8]=r.GMPD_BUTTON_8;w[r.GMPD_BUTTON_9]=r.GMPD_BUTTON_9;w[r.GMPD_BUTTON_10]=r.GMPD_BUTTON_10;w[r.GMPD_BUTTON_11]=r.GMPD_BUTTON_11;w[r.GMPD_BUTTON_16]=r.GMPD_BUTTON_16;var n=[],C=-1,k=null,F=0,u=null,g=null,D=null,B=null,N=null,L=null,A=[],G=[],z=[],I=[],S=!0,m={};m[r.GMPD_AXIS_0]=-2;m[r.GMPD_AXIS_1]=-2;m[r.GMPD_AXIS_2]=-2;m[r.GMPD_AXIS_3]=-2;m[r.GMPD_AXIS_4]=-2;m[r.GMPD_AXIS_5]=-2;m[r.GMPD_AXIS_6]=-2;m[r.GMPD_AXIS_7]=
-2;m[r.GMPD_AXIS_8]=-2;m[r.GMPD_AXIS_9]=-2;m[r.GMPD_AXIS_10]=-2;m[r.GMPD_AXIS_11]=-2;a.show=function(){var a=document.createElement("div");u=a;a.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
d.insert_to_container(a,"LAST");b(a);var g=document.createElement("div");g.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var t=document.createElement("div");t.innerHTML="Select a device";t.style.cssText="color: #fff;display: inline-block;";g.appendChild(t);for(t=0;4>t;t++){var w=h(t),x=function(){return!0},
A=function(a,b){if(b==C)for(var c=0;c<G.length;c++){var d=G[c],e=v.get_sensor_value(a,b,c),f=c;if(F)e=r.get_pressed_gmpd_btn(C),0<=e&&k&&1==F&&(d=k.getAttribute("data-key"),r.set_gamepad_key(C,d,e),f=H.get(C+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,H.set(C+"_gmpd_stngs",JSON.stringify(f),"b4w"),k=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",F=0);else{if(e&&"B"==d.getAttribute("data-colorstate")){var g=n[f];d.style.backgroundImage=
"url('data:image/svg+xml;base64,"+btoa(g.replace(E,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(g=n[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(g)+"')",d.setAttribute("data-colorstate","B"))}}};v.create_sensor_manifold(null,t,v.CT_CONTINUOUS,w,x,A)}0<e().length&&(C=0);var T=[],t=document.createElement("div");t.style.cssText="margin-top: 20px;";for(w=0;4>w;w++)A=y(w),w==C&&(A.style.backgroundColor="green",D=A),c(w),t.appendChild(A),
A.setAttribute("data-device_type","PAD"),T.push(A),r.add_click_listener(A,function(a){var b=e();a=a.target;for(var d=0;d<b.length;d++)T[d]==a&&(C=d,D=a,c(C),l(a.getAttribute("data-device_type")))});g.appendChild(t);L=document.createElement("label");L.style.cssText="position: relative;display: block;color: white;";g.appendChild(L);t=document.createElement("div");t.style.cssText="margin-top: 20px;";w=q(t,"Pad");A=q(t,"Wheel");w.setAttribute("checked","true");w.onchange=function(){l("PAD");D&&D.setAttribute("data-device_type",
"PAD")};A.onchange=function(){l("WHEEL");D&&D.setAttribute("data-device_type","WHEEL")};w.setAttribute("id","test");N=w;B=A;w=document.createElement("label");w.style.cssText+="color: #fff;display: block;";t.appendChild(w);w.textContent="Click on the buttons & arrows to setup your controller";w.setAttribute("id","action_label");g.appendChild(t);a.appendChild(g);a=v.create_elapsed_sensor();v.create_sensor_manifold(null,"UPDATE_GAMEPAD_DATA",v.CT_CONTINUOUS,[a],x,function(){var a=e(),b=a.length;-1==
C&&a.length&&(C=a[0].index,D=T[C]);for(var c=0;c<T.length;c++)c<b?(T[c].textContent=a[c].index,T[c]==D?(T[c].style.backgroundColor="green",L.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):T[c].style.backgroundColor="blue"):T[c].style.backgroundColor="black";b||(C=-1,L.textContent="")});for(t=0;4>t;t++)w=f(t),A=function(a,b){if(b=="AXES"+C){for(var c=0;c<z.length;c+=2){var d=z[c],e=a,f=b,g=c,h=20*v.get_sensor_value(e,f,g),e=20*v.get_sensor_value(e,f,g+1);d.style.transform="translate3d("+
h+"px, "+e+"px, 0px) rotate(0rad)"}if(S)for(c=0;12>c;c+=2){if(e=a,f=b,d=c,!(d+1>2*I.length)){h=v.get_sensor_value(e,f,d);e=v.get_sensor_value(e,f,d+1);if(-2<m[d]){var l=h-m[d],p=e-m[d+1],f=I[Math.floor(d/2)],g=f.getAttribute("data-svgid");F?2==F&&(l=r.get_moved_gmpd_axis(C),0<=l&&(l%2&&l--,F=0,f.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(n[g])+"')",f=parseFloat(k.getAttribute("data-key")),r.set_gamepad_key(C,f,l),r.set_gamepad_key(C,f+1,l+1),k=null,document.getElementById("action_label").textContent=
"Click on the buttons & arrows to setup your controller")):f.style.backgroundImage=l||p?"url('data:image/svg+xml;base64,"+btoa(n[g].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(n[g])+"')"}m[d]=h;m[d+1]=e}}else for(c=0;12>c;c++)(d=c,d>=I.length)||(h=v.get_sensor_value(a,b,d),-2<m[d]&&((g=h-m[d],e=I[d],f=e.getAttribute("data-svgid"),F)?2==F&&(g=r.get_moved_gmpd_axis(C),0<=g&&(F=0,e.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(n[f])+"')",e=parseFloat(k.getAttribute("data-key")),
r.set_gamepad_key(C,e,g),k=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):e.style.backgroundImage=g?"url('data:image/svg+xml;base64,"+btoa(n[f].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(n[f])+"')"),m[d]=h)}},v.create_sensor_manifold(null,"AXES"+t,v.CT_CONTINUOUS,w,function(){return!0},A);p();window.addEventListener("resize",p)};a.hide=function(){F=0;C=-1;N=B=k=D=null;z.length=0;G.length=0;I.length=
0;d.get_container().removeChild(u);u=null;v.remove_sensor_manifold(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)v.remove_sensor_manifold(null,a),v.remove_sensor_manifold(null,"AXES"+a);window.removeEventListener("resize",p)};a.update=function(){for(var a=0;4>a;a++)c(a)}};b4w.module.gyroscope=function(a,t){function e(a){var e=b.create_gyro_angles_sensor(),h=b.create_gyro_quat_sensor(),t=!0;b.create_sensor_manifold(a,"CAMERA_ROTATE_GYRO",b.CT_CONTINUOUS,[e,h],null,function(a,e,h){if(0<h)if(c.is_eye_camera(a))e=b.get_sensor_payload(a,e,1),h=l.transformQuat(q.AXIS_MY,e,p),c.set_vertical_axis(a,h),f.set_rotation_v(a,e);else{y=b.get_sensor_payload(a,e,0);t&&(x[0]=y[0],x[1]=y[1],x[2]=y[2],t=!1);h=e=0;window.orientation||(e=y[1]-x[1],h=y[0]-x[0],y[1]>v&&y[1]<d&&(h=0));if(180==
window.orientation){e=y[1]-x[1];0>y[1]&&(e=-e);h=x[0]-y[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;y[1]>-d&&y[1]<-v&&(h=0)}if(-90==window.orientation){e=y[0]-x[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;h=x[1]-y[1];if(y[0]>r||y[0]<H)h=0}if(90==window.orientation){e=x[0]-y[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;h=y[1]-x[1];if(y[0]>r||y[0]<H)h=0}c.rotate_camera(a,h,e);x[0]=y[0];x[1]=y[1];x[2]=y[2]}})}var c=t("camera"),b=t("controls"),h=t("scenes"),f=t("transform"),q=t("util"),l=t("vec3"),x=new Float32Array(3),y=new Float32Array(3),
p=l.create(),d=q.deg_to_rad(110),v=q.deg_to_rad(70),r=q.deg_to_rad(70),H=-q.deg_to_rad(70);a.enable_camera_rotation=function(){var a=h.get_active_camera();e(a)};a.disable_camera_rotation=function(){var a=h.get_active_camera();b.remove_sensor_manifold(a,"CAMERA_ROTATE_GYRO")}};b4w.module.hmd_conf=function(a,t){function e(){if(!v.can_use_device(v.DEVICE_HMD))return!1;var a=v.get_device_by_type_element(v.DEVICE_HMD),a=v.get_value_param(a,v.HMD_WEBVR_TYPE);return a&(v.HMD_NON_WEBVR|v.HMD_WEBVR_MOBILE|v.HMD_WEBVR_DESKTOP)&&!(a&v.HMD_WEBVR1)}function c(a){a=a.target.value;var b=D[a],c;for(c in u)if(c in b){var d=document.getElementById(c+"_slider");d&&(d.disabled="custom"!==a,d.value=b[c]);if(d=document.getElementById(c+"_number"))d.disabled="custom"!==a,d.value=b[c];u[c]=b[c]}}
function b(){d.remove_sensor_manifold(null,"UPDATE_HMD_RENDERING");f();l();w&&(w=!1,p.get_container().removeChild(n),document.head.removeChild(C),C=k=n=null)}function h(){f(!0);l();for(var a in u){var b=document.getElementById(a+"_slider");b&&(b.value=u[a]);if(b=document.getElementById(a+"_number"))b.value=u[a]}}function f(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,d=0,e=0,f=0,h;a:{h=
N;var k=navigator.userAgent||navigator.vendor||window.opera;if(1==h.format&&h.devices&&h.devices.length)for(var l=0;l<h.devices.length;l++){var n=h.devices[l];if(n.rules&&("ios"==n.type&&g||"android"==n.type)){for(var p=!1,q=0;q<n.rules.length;q++){var t=n.rules[q];if(t.ua&&0<=k.indexOf(t.ua)||!t.ua&&t.res&&t.res[0]&&t.res[1]&&Math.min(b,c)==Math.min(t.res[0],t.res[1])&&Math.max(b,c)==Math.max(t.res[0],t.res[1])){p=!0;break}}if(p){h=l;break a}}}else r.error("DPDB isn't correct.");h=-1}-1!=h&&(f=N.devices[h],
e=f.dpi[1]||f.dpi,d=Math.round(25.4*b/(f.dpi[0]||f.dpi)),e=Math.round(25.4*c/e),f=Math.round(f.bw));b=H.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");a?(u.first_distortion=.34,u.second_distortion=.55,u.bevel_size=f||4,u.screen_width=d||110,u.screen_height=e||65,u.screen_lense=50,u.ipd=64,u.baseline=32):(u.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,u.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,u.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):
f||4,u.screen_width="screen_width"in b?parseFloat(b.screen_width):d||110,u.screen_height="screen_height"in b?parseFloat(b.screen_height):e||65,u.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,u.ipd="ipd"in b?parseFloat(b.ipd):64,u.baseline="baseline"in b?parseFloat(b.baseline):32);F=!0}function q(){H.set("hmd_conf",JSON.stringify(u),"b4w");b()}function l(){if(F){var a=v.get_device_by_type_element(v.DEVICE_HMD);a&&(v.set_config(a,v.HMD_DISTORTION,[u.first_distortion,u.second_distortion]),
v.get_value_param(a,v.HMD_WEBVR_TYPE)&(v.HMD_NON_WEBVR|v.HMD_WEBVR_MOBILE)&&(v.set_config(a,v.HMD_BEVEL_SIZE,.001*u.bevel_size),v.set_config(a,v.HMD_SCREEN_WIDTH,.001*u.screen_width),v.set_config(a,v.HMD_SCREEN_HEIGHT,.001*u.screen_height),v.set_config(a,v.HMD_SCREEN_LENS_DIST,.001*u.screen_lense),v.set_config(a,v.HMD_EYE_DISTANCE,.001*u.ipd),v.set_config(a,v.HMD_BASELINE_DIST,.001*u.baseline)));F=!1}}function x(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in u&&u[b]!=a.target.value&&
(F=!0,u[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function y(a,b,c){var d=document.createElement("button");d.onclick=a;d.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";d.innerHTML=b;return d}var p=t("container"),d=t("controls"),v=t("input"),r=t("print"),H=t("storage"),E=t("util"),w=!1,n=null,C=null,k=null,F=!0,u={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},g=/iPad|iPhone|iPod/.test(navigator.platform),D={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},B=[{label:"Tray to lens-center distance.",Do:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",Do:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
Do:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",Do:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",Do:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",Do:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];a.check=e;a.show=function(a){if(e()){var g=p.get_container();C=document.createElement("style");
C.innerHTML="."+a+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+a+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(C);if(!w){w=!0;f();var r=
v.get_device_by_type_element(v.DEVICE_MOUSE,g);v.switch_prevent_default(r,!1);r=v.get_device_by_type_element(v.DEVICE_TOUCH,g);v.switch_prevent_default(r,!1);n=document.createElement("div");n.className=a;g.appendChild(n);k=document.createElement("div");n.appendChild(k);k.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";a=H.get("hmd_conf","b4w");
a=JSON.parse(a?a:"{}").profile||"custom";g=document.createElement("div");r=document.createElement("label");r.innerHTML="Profile: ";r.className="text_label";r.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
g.appendChild(r);r=document.createElement("select");g.appendChild(r);r.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";var t=v.get_device_by_type_element(v.DEVICE_HMD);if(t)for(var F in D)if(0==D[F].type||v.get_value_param(t,
v.HMD_WEBVR_TYPE)&(v.HMD_NON_WEBVR|v.HMD_WEBVR_MOBILE)&&1==D[F].type){var S=document.createElement("option");S.value=F;S.text=D[F].name;r.appendChild(S)}r.value=a;E.is_ie11()?r.onchange=c:r.oninput=c;k.appendChild(g);F=v.get_device_by_type_element(v.DEVICE_HMD);for(a=0;a<B.length;a++)if(v.get_value_param(F,v.HMD_WEBVR_TYPE)&(v.HMD_NON_WEBVR|v.HMD_WEBVR_MOBILE)||!B[a].Do){g=B[a];t=a;r=document.createElement("div");S=document.createElement("label");S.className="text_label";var m="8px";t%2&&(m="0");
S.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";S.textContent=g.label;r.appendChild(S);r.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+m+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";
for(t=0;t<g.inputs.length;t++){S=g.inputs[t];m=document.createElement("div");m.className="row";var K=document.createElement("input");K.className="input_slider";K.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";K.setAttribute("id",S.id+"_slider");K.setAttribute("type","range");K.setAttribute("min","0.00");K.setAttribute("step",S.step);K.setAttribute("value",u[S.id]);
K.setAttribute("max",S.max);m.appendChild(K);var L=document.createElement("input");L.className="input_text";L.setAttribute("id",S.id+"_number");L.setAttribute("type","number");L.setAttribute("min","0.00");L.setAttribute("step",S.step);L.setAttribute("value",u[S.id]);L.setAttribute("max",S.max);m.appendChild(L);L.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
E.is_ie11()?(K.onchange=x,L.onchange=x):(K.oninput=x,L.oninput=x);r.appendChild(m)}k.appendChild(r)}F=document.createElement("div");a=y(q,"SAVE","4px");g=y(b,"CANCEL","4px");r=y(h,"RESET","0px");F.className="row";F.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";F.appendChild(a);F.appendChild(g);F.appendChild(r);k.appendChild(F);F=d.create_timeline_sensor();d.create_sensor_manifold(null,"UPDATE_HMD_RENDERING",d.CT_CONTINUOUS,[F],null,l)}}};a.hide=
b;a.reset=h;a.update=function(){f();l()};var N={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},
{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,
518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},
{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},
{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],
dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},
{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},
{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],
dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,
bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},
{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",
rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}};b4w.module.hmd=function(a,t){function e(){h.remove_sensor_manifold(null,"VR_CONTROLLERS")}function c(a,c){function e(c,e,f){if(0<f&&(f=l.get_active_camera())&&b.is_eye_camera(f)){var m=h.get_sensor_payload(c,e,1);c=h.get_sensor_payload(c,e,2);c=d.add(c,N,n);y.set_translation_v(f,c);if(m)if(1==a){var m=q.multiply(B,m,D),t=d.transformQuat(p.AXIS_MY,m,n);b.set_vertical_axis(f,t);y.set_rotation_v(f,m)}else if(2==a||3==a){c=y.get_rotation(f,u);c=q.invert(c,u);e=q.multiply(v,c,u);c=b.get_vertical_axis(f,
n);Math.abs(c[2])<Math.PI/4?t=d.cross(c,p.AXIS_MY,C):Math.abs(c[1])<Math.PI/4&&(t=d.cross(c,p.AXIS_Z,C));d.normalize(t,t);e=d.transformQuat(t,e,k);var w=d.dot(c,e);e=d.scaleAndAdd(e,c,-w,k);d.normalize(e,e);c=d.cross(c,t,n);t=Math.acos(p.clamp(d.dot(t,e),0,1));c=p.sign(d.dot(e,c));r+=t*c;t=q.setAxisAngle(p.AXIS_Z,-r,u);3==a?m=q.multiply(t,m,F):(c=p.quat_project(m,p.AXIS_MZ,p.AXIS_Z,p.AXIS_Y,g),c=q.invert(c,g),m=q.multiply(c,m,g),m=q.multiply(t,m,F));t=d.transformQuat(p.AXIS_MY,m,n);b.set_vertical_axis(f,
t);y.set_rotation_v(f,m);q.copy(m,v)}}}if(c){var f=l.get_active_camera();f&&x.request_split_screen(function(){b.is_eye_camera(f)||(H=b.is_target_camera(f),E=b.is_hover_camera(f),w=b.is_static_camera(f),b.eye_setup(f));var a=h.create_elapsed_sensor(),d=h.create_hmd_position_sensor();v=y.get_rotation(f,v);h.create_sensor_manifold(null,"HMD_ROTATE_CAMERA",h.CT_CONTINUOUS,[a,c,d],null,e)})}}var b=t("camera"),h=t("controls"),f=t("input"),q=t("quat"),l=t("scenes"),x=t("screen"),y=t("transform"),p=t("util"),
d=t("vec3"),v=q.create(),r=0,H=!1,E=!1,w=!1,n=d.create(),C=d.create(),k=d.create(),F=q.create(),u=q.create(),g=q.create(),D=q.create(),B=q.create(),N=d.create(),L={pivot:d.create()};a.HMD_NONE_MOUSE_ALL_AXES=0;a.HMD_ALL_AXES_MOUSE_NONE=1;a.HMD_ROLL_PITCH_MOUSE_YAW=2;a.HMD_ALL_AXES_MOUSE_YAW=3;a.enable_hmd=function(a){var b;if(b=f.get_device_by_type_element(f.DEVICE_HMD))b=f.get_value_param(b,f.HMD_WEBVR_TYPE)&(f.HMD_WEBVR_MOBILE|f.HMD_WEBVR_DESKTOP|f.HMD_WEBVR1)?h.create_hmd_quat_sensor():h.create_gyro_quat_sensor(),
c(a,b)};a.check_browser_support=function(){return!!f.can_use_device(f.DEVICE_HMD)};a.enable_controllers=function(a,b){e();if(a||b){var c=f.get_vr_controller_id(0),g=h.create_gamepad_position_sensor(c),c=h.create_gamepad_orientation_sensor(c),k=f.get_vr_controller_id(1),l=h.create_gamepad_position_sensor(k),k=h.create_gamepad_orientation_sensor(k);h.create_sensor_manifold(null,"VR_CONTROLLERS",h.CT_CONTINUOUS,[g,l,c,k],null,function(c,e){if(a){var f=h.get_sensor_payload(c,e,0),g=h.get_sensor_payload(c,
e,2);d.add(N,f,f);y.set_translation_v(a,f);y.set_rotation_v(a,g)}b&&(f=h.get_sensor_payload(c,e,1),g=h.get_sensor_payload(c,e,3),d.add(N,f,f),y.set_translation_v(b,f),y.set_rotation_v(b,g))})}};a.disable_controllers=e;a.disable_hmd=function(){if(h.check_sensor_manifold(null,"HMD_ROTATE_CAMERA")){h.remove_sensor_manifold(null,"HMD_ROTATE_CAMERA");x.exit_split_screen();var a=l.get_active_camera();H?b.target_setup(a,L):E?b.hover_setup(a,L):w&&b.static_setup(a,L);b.set_vertical_axis(a,p.AXIS_Z);var c=
y.get_rotation(a,F);y.set_rotation_v(a,c)}};a.set_rotate_quat=function(a){q.copy(a,B)};a.get_rotate_quat=function(a){q.copy(B,a);return a};a.set_position=function(a){q.copy(a,N)};a.get_position=function(a){q.copy(N,a);return a}};b4w.module.fps=function(a,t){function e(){}function c(a,b,c){var d=u.get_active_camera();C.rotate_camera(d,b,c);b=C.get_camera_angles_char(d,ma);F.set_character_rotation_h(a,b[0]);F.set_character_vert_move_dir_angle(a,b[1])}function b(a,b,c,d){if(.01<Math.abs(U[0])||.01<Math.abs(U[1]))c=k.get_sensor_value(a,b,0),b=g.smooth(U[0],0,c,.2*Q),c=g.smooth(U[1],0,c,.2*Q),U[0]-=b,U[1]-=c,d(a,-b*R,-c*R)}function h(a){var b=document.createElement("div");b.style.cssText="position: absolute;left: 10px;bottom: 70px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);";
b.setAttribute("id","B4W_DEFAULT_BTN_1");var c=document.createElement("div");c.style.cssText="position: absolute;left: 10px;bottom: 10px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);transform: rotate(180deg);transform-origin: center;";
c.setAttribute("id","B4W_DEFAULT_BTN_2");a.appendChild(b);a.appendChild(c)}function f(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)}function q(a,c){if(f(a)&&!D.detect_mobile()){var d=k.create_plock_mouse_sensor(a),h=T?T:k.create_plock_sensor(a);T=h;k.create_sensor_manifold(c,"FPS_PLOCK",k.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,b,c){0<c&&(b=k.get_sensor_payload(a,b,0),e(a,-b.coords[0]*R,-b.coords[1]*R))});k.create_sensor_manifold(null,
"FPS_ACTIVATE_PLOCK",k.CT_TRIGGER,[h],function(a){return a[0]},function(b,c,d){0<d?ia.Uz&&ia.Uz(a):ia.fr&&ia.fr(a)})}else{if(D.detect_mobile())var d=k.create_touch_move_sensor("XY",a),h=k.create_touch_click_sensor(a),l=4;else{var d=k.create_mouse_move_sensor("XY",a),h=k.create_mouse_click_sensor(a),l=2,n=u.get_active_camera(),p=k.create_elapsed_sensor(),q=k.create_gamepad_axis_sensor(N.GMPD_AXIS_2),r=k.create_gamepad_axis_sensor(N.GMPD_AXIS_3);k.create_sensor_manifold(c,"FPS_CAM_ROT",k.CT_CONTINUOUS,
[p,q,r],function(a){return.05<Math.abs(a[1])||.05<Math.abs(a[2])},function(a,b,c){if(0<c){var d=k.get_sensor_value(a,b,0);c=k.get_sensor_value(a,b,1);b=k.get_sensor_value(a,b,2);d*=2.5;b=-(.05>Math.abs(b)?0:b)*d;c=-(.05>Math.abs(c)?0:c)*d;b=g.clamp(b,m,K);C.rotate_camera(n,c,b);c=C.get_camera_angles(n,ma);F.set_character_rotation_h(a,c[0]+Math.PI)}})}var t=0,v=0;k.create_sensor_manifold(null,"FPS_DRAG_PRESS",k.CT_SHOT,[h],function(a){return a[0]},function(a,b,c){1==c&&(a=k.get_sensor_payload(a,b,
0).coords,t=a[0],v=a[1])});k.create_sensor_manifold(null,"FPS_DRAG_MOVE",k.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,b,c){1==c&&(a=k.get_sensor_payload(a,b,0).coords,U[0]+=(a[0]-t)*l,U[1]+=(a[1]-v)*l,t=a[0],v=a[1])});d=k.create_elapsed_sensor();k.create_sensor_manifold(c,"FPS_SMOOTH_DRAG",k.CT_CONTINUOUS,[d],null,b,e)}}function l(a,b){N.add_click_listener(a,function(){L.request_fullscreen_hmd(a,function(){k.check_sensor_manifolds(b,"FPS_PLOCK")&&k.remove_sensor_manifold(b,"FPS_PLOCK");
k.check_sensor_manifolds(null,"FPS_ACTIVATE_PLOCK")&&k.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK");k.check_sensor_manifolds(b,"FPS_CAM_ROT")&&k.remove_sensor_manifold(b,"FPS_CAM_ROT");k.check_sensor_manifolds(null,"FPS_DRAG_PRESS")&&k.remove_sensor_manifold(null,"FPS_DRAG_PRESS");k.check_sensor_manifolds(null,"FPS_DRAG_MOVE")&&k.remove_sensor_manifold(null,"FPS_DRAG_MOVE");k.check_sensor_manifolds(b,"FPS_SMOOTH_DRAG")&&k.remove_sensor_manifold(b,"FPS_SMOOTH_DRAG");I.enable_hmd(I.HMD_ALL_AXES_MOUSE_NONE);
x(b);wa&&wa()},function(){k.remove_sensor_manifold(b,"FPS_CHARECTER_VR_ROT");I.disable_hmd();q(a,b);da&&da()})})}function x(a){var b=k.create_elapsed_sensor(),c=u.get_active_camera();k.create_sensor_manifold(a,"FPS_CHARECTER_VR_ROT",k.CT_CONTINUOUS,[b],null,function(a){var b=C.get_camera_angles_char(c,ma)[0];F.set_character_rotation_h(a,b)})}function y(){var a=I.check_browser_support()&&!D.detect_mobile(),b=N.get_device_by_type_element(N.DEVICE_HMD);b&&(a=a&&N.get_value_param(b,N.HMD_WEBVR_TYPE)&
N.HMD_WEBVR1);return a}function p(a,b,c,d){function e(a){if(k()){4==l.Dk.id&&(a=0);a=0<a?1:a;var d=m+p;p=-(0>a?-1:a);a=q+r;var e=m+p;F.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);t&&d!=e&&t(a,e,0)}}function f(a){if(k()){a=0<a?1:a;var d=q+r;r=-(0>a?-1:a);a=q+r;var e=m+p;F.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);t&&d!=a&&t(a,e,0)}}function g(a,b){var c=l.Dk.id;a||b||4==c?0==c&&(0<u?E(l,2):E(l,1)):E(l,0)}function k(){return Z?(r=q=p=m=0,!1):!0}D.detect_mobile()&&h(a.parentElement?a.parentElement:
a);var l=w(b),m=0,p=0,q=0,r=0,u=-1,t=d.move_dir_cd;a=d.kN;var v=d.qU,x=d.BS,z=d.vS,y=d.wU,A=d.AQ;n(1,d.BQ,function(a){if(k()){var d=q+r;q=a;a=q+r;var e=m+p;F.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);t&&d!=a&&t(a,e,0)}});n(1,a,f);n(1,v,e);n(1,x,function(a){if(k()){4==l.Dk.id&&(a=0);var d=m+p;m=a;a=q+r;var e=m+p;F.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);t&&d!=e&&t(a,e,0)}});n(1,z,function(a){k()&&0<a&&(F.character_jump(b),t&&t(q+r,m+p,1))});n(3,[N.GMPD_AXIS_0],e);n(3,[N.GMPD_AXIS_1],f);
n(1,y,function(a){u=a;Math.abs(q+r)+Math.abs(m+p)?(0<a?E(l,2):E(l,1),t&&t(q+r,m+p,0)):E(l,0)});n(1,A,function(a){0<a&&(a=ra.Dk.id,1==a||0==a?E(l,3):E(l,1))})}function d(){ra||(ra={Z:[],Dk:null,lock:!1,AS:null});return ra}function v(a,b,c,d){a.Z.push({id:b,$y:c,DE:d,CE:null,rz:null})}function r(a){for(var b=[],c=0;c<a.Z;c++){var d=a.Z[c].id;if(0<=b.indexOf(d))return!1;b.push(d)}for(c=0;c<a.Z;c++)for(var d=a.Z[c],e=0;e<d.$y.length;e++)if(0>b.indexOf(d.$y[e]))return!1;return!0}function H(a,b){for(var c=
null,d=0;d<a.Z.length;d++)if(a.Z[d].id==b){c=a.Z[d];break}return c}function E(a,b){a.AS=b;if(!a.lock){var c=a.Dk,d=c.id;if(0<=c.$y.indexOf(b)){var e=!0;c.CE&&(e=c.CE(d,b));e&&(a.Dk=H(a,b),c.DE&&c.DE(d,b),c.rz&&c.rz(d,b))}}}function w(a){function b(b,c){switch(c){case 0:case 1:F.set_character_move_type(a,F.CM_WALK);break;case 2:F.set_character_move_type(a,F.CM_RUN);break;case 3:F.set_character_move_type(a,F.CM_FLY);break;case 4:F.set_character_move_type(a,F.CM_CLIMB)}}var c=d();v(c,0,[1,3,2,4],b);
v(c,1,[2,3,4,0],b);v(c,2,[1,3,4,0],b);v(c,3,[1],b);v(c,4,[1,2,0],b);r(c);c.Dk=H(c,0);return ra}function n(a,b,c){if(b.length){for(var d=[],e=0;e<b.length;e++)if("number"==typeof b[e])300>b[e]?d.push(k.create_keyboard_sensor(b[e])):326>b[e]?d.push(k.create_gamepad_btn_sensor(b[e],ha)):d.push(k.create_gamepad_axis_sensor(b[e]));else if("string"==typeof b[e]){var f=document.getElementById(b[e]);f?d.push(k.create_touch_click_sensor(f)):S.error("Couldn't find element with "+b[e]+" ID.")}b=function(){return!1};
e=k.CT_SHOT;f=function(){};switch(a){case 1:e=k.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};f=function(a,b,d){0<d?c(1):c(0)};break;case 2:e=k.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};f=function(a,b,d){0>d?c(1):c(0)};break;case 3:e=k.CT_CONTINUOUS,b=function(a){for(var b=0;b<a.length;b++)if(.05<Math.abs(a[b]))return!0;return!1},f=function(a,b,d,e){if(0<d)for(d=0;d<e;d++){var f=k.get_sensor_value(a,b,d);if(.05<Math.abs(f)){c(f);
break}}else c(0)}}k.create_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+ga.toString(),e,d,b,f,d.length);ga++}}var C=t("camera"),k=t("controls"),F=t("physics"),u=t("scenes"),g=t("util"),D=t("main"),B=t("container"),N=t("input"),L=t("screen"),A=t("transform"),G=t("constraints"),z=t("vec3"),I=t("hmd"),S=t("__print"),m=(-Math.PI+.1)/2,K=(Math.PI-.1)/2,U=new Float32Array(2),Q=1,R=4E-4,ga=0,ra=null,T=null,ia={Uz:null,fr:null},ha=0,pa=4,Z=!1,ma=new Float32Array(2),aa=new Float32Array(3),fa=new Float32Array(3),
wa=null,da=null;a.append_switch_vr_cbs=function(a){wa=a};a.CS_STAY=0;a.CS_WALK=1;a.CS_RUN=2;a.CS_FLY=3;a.CS_CLIMB=4;a.AT_PRESSED=1;a.AT_RELEASED=2;a.AT_CONTINUOUS=3;a.bind_action=n;a.enable_fps_controls=function(a){a=a||{lock_camera:!0};var b=a.character||u.get_first_character();if(b){var d=a.element||B.get_canvas(),f=a.motion_cb||null;ha=a.gamepad_id||0;var g=a.forward_sens||[k.KEY_W,N.GMPD_BUTTON_12],h=a.backward_sens||[k.KEY_S,N.GMPD_BUTTON_13],m=a.right_sens||[k.KEY_D,N.GMPD_BUTTON_15],n=a.left_sens||
[k.KEY_A,N.GMPD_BUTTON_14],r=a.jump_sens||[k.KEY_SPACE,N.GMPD_BUTTON_1],t=a.e_||[k.KEY_SHIFT,N.GMPD_BUTTON_7],v=a.fly_sens||[];D.detect_mobile()&&(g.push("B4W_DEFAULT_BTN_1"),h.push("B4W_DEFAULT_BTN_2"));g={BQ:g,kN:h,qU:m,BS:n,vS:r,wU:t,AQ:v,move_dir_cd:a.move_dir_cd||null};e=a.rotation_cb||c;h="undefined"!=typeof a.lock_camera?a.lock_camera:!0;a=u.get_active_camera();h&&(h=A.get_translation(a,aa),m=A.get_translation(b,fa),z.subtract(h,m,h),G.append_stiff_trans(a,b,h));a=C.get_camera_angles_char(a,
ma);F.set_character_rotation_h(b,a[0]);F.set_character_vert_move_dir_angle(b,a[1]);y()&&l(d,b);q(d,b);p(d,b,f,g)}};a.disable_fps_controls=function(a,b){a=a||u.get_first_character();b=b||B.get_container();if(a){for(var c=0;c<ga;c++)k.remove_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+c.toString());var c=a,d=b;f(d)&&!D.detect_mobile()&&(ia.fr&&ia.fr(d),k.remove_sensor_manifold(c,"FPS_PLOCK"),k.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK"));c=a;if(!f(b)||D.detect_mobile())k.remove_sensor_manifold(c,
"FPS_CAM_ROT"),k.remove_sensor_manifold(c,"FPS_DRAG_PRESS"),k.remove_sensor_manifold(c,"FPS_DRAG_MOVE"),k.remove_sensor_manifold(c,"FPS_SMOOTH_DRAG");c=a;y()&&k.remove_sensor_manifold(c,"FPS_CHARECTER_VR_ROT");c=b;if(D.detect_mobile()){var d=document.getElementById("B4W_DEFAULT_BTN_1"),e=document.getElementById("B4W_DEFAULT_BTN_2");d&&c.removeChild(d);e&&c.removeChild(e)}}};a.set_state_change_cb=function(a,b){H(ra,a).rz=b};a.set_cam_smooth_factor=function(a){k.set_plock_smooth_factor(a);Q=a};a.get_cam_smooth_factor=
function(){return Q};a.set_cam_sensitivity=function(a){R=a/2E5};a.get_cam_sensitivity=function(){return 2E5*R};a.set_plock_enable_cb=function(a){ia.Uz=a};a.set_plock_disable_cb=function(a){ia.fr=a};a.get_character_state=function(){return ra.Dk.id};a.add_new_state=function(){return pa++};a.add_state=function(a,b,c){var e=d();v(e,a,b,c);r(e)||S.error("Incorrect state machine.")};a.switch_state=function(a){var b=d();E(b,a)};a.lock_character=function(){d().lock=!0};a.unlock_character=function(){d().lock=
!1};a.is_character_locked=function(){return d().lock};a.set_rotation_cb=function(a){a?e=a:e=c};a.freeze_movements=function(){Z=!0};a.unfreeze_movements=function(){Z=!1}};b4w.module.mixer=function(a,t){function e(){n=w.length=0;C=c();k=new Float32Array(C.length);F=new Float32Array(C.length);var a=r.get_speaker_objects();if(a.length){w.push(b());for(var d=0;d<a.length;d++)w.push(f(a[d]));w.sort(function(a,b){return"MASTER"==a.id?-1:"MASTER"==b.id?1:"COMPRESSOR"==a.id?-1:"COMPRESSOR"==b.id?1:a.id.toUpperCase()<b.id.toUpperCase()?-1:a.id.toUpperCase()>b.id.toUpperCase()?1:0})}}function c(){for(var a=new Float32Array(100),b=0,c=0;100>c;c++)a[c]=20*Math.pow(1E3,b),b+=1/
99;return a}function b(){var a=h("MASTER"),b=r.get_compressor_params();b&&(a.aa.push(["THRESHOLD",b.threshold,-100,0,100,!1]),a.aa.push(["KNEE",b.knee,0,40,40,!1]),a.aa.push(["RATIO",b.ratio,1,20,20,!1]),a.aa.push(["ATTACK",b.attack,0,1,1E3,!1]),a.aa.push(["RELEASE",b.release,0,1,1E3,!1]));a.aa.push(["VOLUME",r.get_volume(null),0,1,50,!1]);a.mute=r.is_muted(null)?1:0;a.kh=-1;return a}function h(a){return{id:a,aa:[],Ul:0,mute:-1,kh:-1,qc:null}}function f(a){var b=h(d.get_object_name(a));b.mute=r.is_muted(a)?
1:0;b.kh=0;b.qc=a;return b}function q(a){if(a.qc){a.aa.length=0;var b=r.get_positional_params(a.qc);b&&(a.aa.push(["DIST_REF",b.dist_ref,0,1E3,1E4,!1]),a.aa.push(["ATTENUATION",b.attenuation,0,50,1E3,!1]),a.aa.push(["DIST_MAX",b.dist_max,0,1E4,1E4,!1]));if(b=r.get_filter_params(a.qc))a.aa.push(["EQ_FREQ",b.freq,20,2E4,100,!0]),a.aa.push(["EQ_Q",b.Q,0,10,100,!1]),a.aa.push(["EQ_GAIN",b.gain,-70,30,100,!1]);a.aa.push(["VOLUME",r.get_volume(a.qc),0,1,50,!1]);H.clamp(a.Ul,0,a.aa.length-1)}}function l(a){for(var b=
0;b<w.length;b++){var c=w[b];if(c!=a&&1==c.kh)return!0}return!1}function x(a){for(var b=0;b<w.length;b++){var c=w[b];c!=a&&0==c.mute&&0==c.kh&&r.mute(c.qc,!1)}}function y(){if(!w.length)return[0,-1];var a=8*Math.floor(n/8),b=a+7,a=H.clamp(a,0,w.length-1),b=H.clamp(b,0,w.length-1);return[a,b]}var p=t("controls"),d=t("scenes"),v=t("screen"),r=t("sfx"),H=t("__util"),E="SWITCH_STRIP SWITCH_STRIP_HOLD SWITCH_PARAM INC_DEC INC_DEC_HOLD MUTE_SOLO".split(" "),w=[],n=0,C=null,k=null,F=null;a.enable_mixer_controls=
function(){function a(a,b,c){if(1==c){var d=p.get_sensor_value(a,b,0)?-1:1,e=w[n];if(e)switch(c=e.aa[e.Ul],c[1]=c[5]?c[1]*Math.pow(c[3]/c[2],d/c[4]):c[1]+(c[3]-c[2])/c[4]*d,c[1]=H.clamp(c[1],c[2],c[3]),c[0]){case "VOLUME":"MASTER"!=e.id?r.set_volume(e.qc,c[1]):r.set_volume(null,c[1]);break;case "DIST_REF":d=r.get_positional_params(e.qc);d.dist_ref=c[1];r.set_positional_params(e.qc,d);break;case "ATTENUATION":d=r.get_positional_params(e.qc);d.attenuation=c[1];r.set_positional_params(e.qc,d);break;
case "DIST_MAX":d=r.get_positional_params(e.qc);d.dist_max=c[1];r.set_positional_params(e.qc,d);break;case "EQ_FREQ":d=r.get_filter_params(e.qc);d.freq=c[1];r.set_filter_params(e.qc,d);break;case "EQ_Q":d=r.get_filter_params(e.qc);d.Q=c[1];r.set_filter_params(e.qc,d);break;case "EQ_GAIN":d=r.get_filter_params(e.qc);d.gain=c[1];r.set_filter_params(e.qc,d);break;case "THRESHOLD":e=r.get_compressor_params();e.threshold=c[1];r.set_compressor_params(e);break;case "KNEE":e=r.get_compressor_params();e.knee=
c[1];r.set_compressor_params(e);break;case "RATIO":e=r.get_compressor_params();e.ratio=c[1];r.set_compressor_params(e);break;case "ATTACK":e=r.get_compressor_params();e.attack=c[1];r.set_compressor_params(e);break;case "RELEASE":e=r.get_compressor_params();e.release=c[1];r.set_compressor_params(e);break;default:H.K("Unknown strip param")}"INC_DEC"==b?p.reset_timer_sensor(a,b,2,.35):p.reset_timer_sensor(a,b,2,.05)}else p.reset_timer_sensor(a,b,2,10)}function b(a,b,c){if(1==c){c=p.get_sensor_value(a,
b,0)?-1:1;if(w.length){1==c&&n<w.length-1?n++:-1==c&&0<n&&n--;c=y();for(var d=c[0];d<=c[1];d++)q(w[d])}"SWITCH_STRIP"==b?p.reset_timer_sensor(a,b,2,.15+.3):p.reset_timer_sensor(a,b,2,.15)}else p.reset_timer_sensor(a,b,2,10)}e();var c=p.create_keyboard_sensor(p.KEY_NUM4),d=p.create_keyboard_sensor(p.KEY_NUM6),f=p.create_keyboard_sensor(p.KEY_NUM8),h=p.create_keyboard_sensor(p.KEY_NUM2),t=p.create_keyboard_sensor(p.KEY_ADD),G=p.create_keyboard_sensor(p.KEY_SUB),z=p.create_keyboard_sensor(p.KEY_NUM7),
E=p.create_keyboard_sensor(p.KEY_NUM9),S=p.create_timer_sensor(.15,!0),m=p.create_timer_sensor(.05,!0),c=[c,d,S];p.create_sensor_manifold(null,"SWITCH_STRIP",p.CT_TRIGGER,c,function(a){return a[0]||a[1]},b);p.create_sensor_manifold(null,"SWITCH_STRIP_HOLD",p.CT_SHOT,c,function(a){return(a[0]||a[1])&&a[2]},b);p.create_sensor_manifold(null,"SWITCH_PARAM",p.CT_SHOT,[f,h],function(a){return a[0]||a[1]},function(a,b){var c=p.get_sensor_value(a,b,0)?-1:1,d=w[n];d&&(1==c&&d.Ul<d.aa.length-1?d.Ul++:-1==c&&
0<d.Ul&&d.Ul--)});f=[G,t,m];p.create_sensor_manifold(null,"INC_DEC",p.CT_TRIGGER,f,function(a){return a[0]||a[1]},a);p.create_sensor_manifold(null,"INC_DEC_HOLD",p.CT_SHOT,f,function(a){return(a[0]||a[1])&&a[2]},a);p.create_sensor_manifold(null,"MUTE_SOLO",p.CT_SHOT,[z,E],function(a){return a[0]||a[1]},function(a,b){if(p.get_sensor_value(a,b,0)){var c=w[n];c&&0<=c.mute&&("MASTER"!=c.id?0==c.mute?(c.mute=1,r.mute(c.qc,!0),1==c.kh&&(c.kh=0,l(c)||x(c))):(c.mute=0,l(c)||r.mute(c.qc,!1)):0==c.mute?(c.mute=
1,r.mute(null,!0)):(c.mute=0,r.mute(null,!1)))}else if((c=w[n])&&0<=c.kh)if(0==c.kh){c.kh=1;r.mute(c.qc,!1);1==c.mute&&(c.mute=0);for(var d=0;d<w.length;d++){var e=w[d];e!=c&&0==e.mute&&0==e.kh&&r.mute(e.qc,!0)}}else c.kh=0,l(c)?r.mute(c.qc,!0):x(c)});z=p.create_elapsed_sensor();p.create_sensor_manifold(null,"MIXER_DRAW",p.CT_CONTINUOUS,[z],null,function(){if(w[n])for(var a=y(),b=a[0];b<=a[1];b++){var c=w[b];v.draw_mixer_strip(c.id,b==n,b%8,c.aa,c.Ul,c.mute,c.kh);if(c.qc&&r.get_filter_params(c.qc)){r.get_filter_freq_response(c.qc,
C,k,F);for(c=0;c<k.length;c++)k[c]=20*Math.log(k[c])/Math.LN10;v.plot_array("EQ",b%8,k,20,2E4,-10,10)}}});z=p.create_timer_sensor(1,!0);p.create_sensor_manifold(null,"MIXER_UPDATE",p.CT_TRIGGER,[z],null,function(){for(var a=y(),b=a[0];b<=a[1];b++)q(w[b])})};a.disable_mixer_controls=function(){for(var a=0;E.length;a++)p.remove_sensor_manifold(null,E[a])}};b4w.module.npc_ai=function(a,t){function e(a,b){var c=b.destination,d=b.dz,e=k;v.get_translation(b.collider,e);var f=0,h=e[2];c[2]=h;switch(b.type){case N:if(b.random&&b.nl){c[0]=(12*Math.random()-6)*b.speed+d[0];c[1]=-(12*Math.random()-6)*b.speed+d[1];var n=D,d=F,p=b.speed,t=b.rot_speed;v.get_rotation(b.collider,n);r.transformQuat(w.AXIS_MY,n,d);d[2]=0;r.normalize(d,d);n=.5*p/Math.sin(t/2);e=r.dist(c,e);e<2*n&&r.scaleAndAdd(c,d,2*n-e,c);b.nl=!1}b.vA&&(f=b.vA-h,e=b.speed*a,f>e?f=e:f<-e&&(f=-e));b.kk=
f;break;case L:case A:b.Up?f=b.Up:b.kk&&(f=b.kk,b.type==A&&(f*=a)),b.random&&b.nl&&(b.type==A?(b.speed=Math.random()+.1,e=b.uH-b.xH):e=b.max_height-b.min_height,c[0]=10*Math.random()-5+d[0],c[1]=10*Math.random()-5+d[1],c[2]=h-(Math.random()*e-.5*e),b.nl=!1)}f&&(c[2]=h+f);var c=C,e=k,n=F,f=B,t=b.rig,d=b.collider,h=b.destination,x=b.speed,z=b.actions,G=l.get_current_anim_name(t);if(!l.is_play(t)||!z.idle||-1==z.idle.indexOf(G)){v.get_translation(d,c);var p=h[0]-c[0],E=h[1]-c[1],p=Math.sqrt(p*p+E*E);
if(p>2*x*a)b.state=20,w.horizontal_direction(h,c,n),z=b.rig,l.is_animated(z)&&(t=b.speed,x=l.get_frame(z),z=l.get_anim_length(z),t=z/24*(1-x/z)*t,.9>p/t&&r.scaleAndAdd(h,n,t-p,h)),p=D,t=u,v.get_rotation(b.collider,p),r.transformQuat(w.AXIS_MY,p,e),t[0]=e[0],t[1]=e[1],t[2]=0,r.normalize(t,t),x=r.dot(t,n),z=a/(Math.abs(Math.acos(x))/Math.PI)*b.rot_speed*b.YB,y.rotationTo(t,n,f),y.rotationTo(w.AXIS_MY,t,p),1<=Math.abs(x)?y.copy(p,f):(y.multiply(f,p,f),y.slerp(p,f,Math.min(z,1),f)),n=a,b.type!=L&&(n=
Math.max(n,1/60),p=g,t=D,y.setAxisAngle(w.AXIS_X,-Math.asin(-e[2]),t),y.setAxisAngle(w.AXIS_X,-Math.atan(b.kk/(b.speed*n)),p),y.slerp(t,p,n,p),y.multiply(f,p,f)),v.set_rotation_v(d,f),e=F,d=u,w.quat_to_dir(f,w.AXIS_MY,e),r.scale(e,b.speed*a,d),r.add(d,c,d),d[2]=b.type!=N?(h[2]-c[2])*a*.1+c[2]:h[2],v.set_translation_v(b.collider,d);else if(b.type==N)z.move?G&&-1!=z.move.indexOf(G)&&l.is_play(t)?b.state=20:(b.state=10,b.nl=!0):(b.state=10,b.nl=!0);else if(b.type==A||b.type==L)b.nl=!0;if(q(b)&&(c=b.rig,
!l.is_play(c))){f=null;switch(b.state){case 10:f=b.actions;f=f.idle?w.random_from_array(f.idle):null;break;case 20:f=l.get_current_anim_name(b.rig),e=h=b.actions,e.move_blends&&-1==e.move_blends.indexOf(f)&&e.move&&-1!=e.move.indexOf(f)&&.33<Math.random()?(h=b.actions,f=h.move_blends[h.move.indexOf(f)]):(e=b.actions,e.move&&(-1!=e.move.indexOf(f)||!e.move_blends&&!e.move_start||!e.move_start&&!f||e.move_blends&&-1!=e.move_blends.indexOf(f)||e.move_start&&-1!=e.move_start.indexOf(f))?(h=b.actions,
h.move_blends?(e=h.move_blends.indexOf(f),-1!=e?(f=e+1,f=f<h.move.length?f:0,f=h.move[f]):f=-1!=h.move.indexOf(f)?f:w.random_from_array(h.move)):f=w.random_from_array(h.move)):(e=b.actions,f=e.move_start&&-1==e.move_start.indexOf(f)&&e.move&&-1==e.move.indexOf(f)?w.random_from_array(h.move_start):null))}f&&(l.apply(c,f),l.set_behavior(c,l.AB_FINISH_RESET),l.set_frame(c,0),l.play(c))}}}function c(a,b,c,d){if(d)if(1==c)switch(d.type){case L:a:{for(c=0;3>c;c++){var e=x.get_sensor_payload(a,b,c).hit_fract;
if(e){b=e;break a}}b=void 0}b=100*b;d.kk=b<d.min_height?10:b>d.max_height?-10:0;break;case N:a=x.get_sensor_payload(a,b,0);d.vA=a.hit_pos[2];break;case A:a=x.get_sensor_payload(a,b,0),"CLOSE_GROUND"==b?(d.kk=100*a.hit_fract-1,d.kk=.1>d.kk?.05:0):"CLOSE_WATER"==b&&(d.Up=100*a.hit_fract,d.Up=d.Up<d.xH?-.02:d.Up>d.uH?.02:0)}else d.kk=0}function b(){for(var a=0;a<n.length;a++){var b=n[a];h(b);f(b);l.get_current_anim_name(b.rig)&&l.play(b.rig)}}function h(a){var b=r.create(),d=a.collider;switch(a.type){case L:var e=
x.create_ray_sensor(d,b,[0,0,-100],"TERRAIN",!0,!0),f=x.create_ray_sensor(d,b,[0,0,-100],"STONE",!0,!0),b=x.create_ray_sensor(d,b,[0,0,-100],"WATER",!0,!0),e=[e,f,b];x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,function(a){return a[0]||a[1]||a[2]},c,a);break;case N:e=x.create_ray_sensor(d,[0,0,1],[0,0,-99],"TERRAIN",!0,!0);e=[e];x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,null,c,a);break;case A:e=x.create_ray_sensor(d,[0,0,1],[0,0,-99],"TERRAIN",!0,!0),b=x.create_ray_sensor(d,
b,[0,0,100],"WATER",!0,!0),e=[e],x.create_sensor_manifold(d,"CLOSE_WATER",x.CT_CONTINUOUS,[b],null,c,a),x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,null,c,a)}}function f(a){var b=a.collider;if(a.type==N){var c=x.create_collision_sensor(b,"CONSTRUCTION",!1);x.create_sensor_manifold(b,"CONSTRUCTION_COLL",x.CT_CONTINUOUS,[c],null,function(b,c,d){1==d?(r.copy(a.dz,a.destination),a.YB=4):a.YB=1})}}function q(a){var b=a.rig;if(!l.is_play(b))return!0;b=l.get_current_anim_name(b);if(!b)return!0;
var c=a.actions;switch(a.state){case 10:if(!c.idle)return!1;break;case 20:if(!c.move||-1!=c.move.indexOf(b)||c.move_start&&-1!=c.move_start.indexOf(b)||c.move_blends&&-1!=c.move_blends.indexOf(b))return!1;break;default:return!1}return!0}var l=t("animation"),x=t("controls"),y=t("quat"),p=t("scenes"),d=t("time"),v=t("transform"),r=t("vec3"),H=t("physics"),E=t("print"),w=t("util"),n=[],C=new Float32Array(3),k=new Float32Array(3),F=new Float32Array(3),u=new Float32Array(3),g=new Float32Array(4),D=new Float32Array(4),
B=new Float32Array(4),N=a.NT_WALKING=10,L=a.NT_FLYING=20,A=a.NT_SWIMMING=30;a.new_event_track=function(a){var b={obj:null,rig:null,collider:null,empty:null,type:N,state:10,actions:{},dz:new Float32Array(3),destination:new Float32Array(3),path:[],start:[],ended:[],dv:[],delay:[],random:!0,nl:!0,vA:0,kk:0,Up:0,YB:1,speed:1,rot_speed:.1,max_height:0,min_height:0,uH:0,xH:0};if("object"!=typeof a.obj)E.error("Can't create event track. Wrong object.");else if("object"!=typeof a.rig)E.error("Can't create event track. Wrong rig object.");
else if("object"==typeof a.collider&&H.has_physics(a.collider)){b.obj=a.obj;b.collider=a.collider;b.rig=a.rig;v.get_translation(a.collider,b.dz);"object"==typeof a.actions&&(b.actions=a.actions);"boolean"==typeof a.random&&(b.random=a.random);"number"==typeof a.type&&(b.type=a.type);"number"==typeof a.speed&&(b.speed=a.speed);"number"==typeof a.rot_speed&&(b.rot_speed=a.rot_speed);"number"==typeof a.max_height&&(b.max_height=a.max_height);"number"==typeof a.min_height&&(b.min_height=a.min_height);
if(!b.random){for(var c=0;c<a.path.length;c++)b.start[c]=-1,b.ended[c]=!1,b.dv[c]=!1;b.path=a.path;b.delay=a.delay}a=a.actions;var c=l.get_current_anim_name(b.rig),d;for(d in a)for(var e=a[d],f=0;f<e.length;f++)l.apply(b.rig,e[f]);c&&l.apply(b.rig,c);n.push(b)}else E.error("Can't create event track. Wrong collider object.")};a.enable_animation=function(){if(n.length){b();var a=x.create_elapsed_sensor();x.create_sensor_manifold(n[0].collider,"ELAPSED",x.CT_CONTINUOUS,[a],function(a){return a[0]},function(a,
b,c){if(1==c)for(a=x.get_sensor_value(a,b,0),b=0;b<n.length;b++){c=n[b];var f=a;if(p.is_visible(c.obj))if(c.random)e(f,c);else{for(var g=d.get_timeline(),h=0;h<c.path.length;h++)if(!c.ended[h]){c.dv[h]||(c.dv[h]=!0,c.destination[0]=c.path[h][0],c.destination[1]=c.path[h][1],c.destination[2]=c.path[h][2],c.start[h]=g+c.delay[h]);if(g<c.start[h])break;e(f,c);c.ended[h]=c.nl;break}a:{for(f=0;f<c.path.length;f++)if(0==c.ended[f]){f=!1;break a}f=!0}if(f)for(f=0;f<c.path.length;f++)c.dv[f]=!1,c.ended[f]=
!1}}})}};a.disable_animation=function(){if(!(0>=n.length))for(var a=0;a<n.length;a++){var b=n[a];x.check_sensor_manifolds(b.collider)&&x.remove_sensor_manifold(b.collider);l.is_play(b.rig)&&l.stop(b.rig)}}};b4w.module.mouse=function(a,t){function e(){1==B&&(B=0);var a=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock;"function"===typeof a&&a.apply(document);d.remove_sensor_manifold(H.get_active_camera(),"SMOOTH_PL")}function c(a){2==B&&(B=0);a.removeEventListener("mousedown",h,!1);a.removeEventListener("mouseup",f,!1);a.removeEventListener("mousemove",b,!1);d.remove_sensor_manifold(H.get_active_camera(),"SMOOTH_DRAG")}function b(a){if(g()){if(L)var b=p.get_coords_target_space(a,
u);else b=u,b[0]=a.clientX,b[1]=a.clientY;F[0]+=2*(b[0]-C);F[1]+=2*(b[1]-k);C=b[0];k=b[1]}a.preventDefault()}function h(a){if(L)var c=p.get_coords_target_space(a,u);else c=u,c[0]=a.clientX,c[1]=a.clientY;C=c[0];k=c[1];a.currentTarget.addEventListener("mousemove",b,!1);a.preventDefault()}function f(a){a.currentTarget.removeEventListener("mousemove",b,!1);a.preventDefault()}function q(a,b,c,e){if(.01<Math.abs(F[0])||.01<Math.abs(F[1]))b=d.get_sensor_value(a,b,0),a=E.smooth(F[0],0,b,.1*n),b=E.smooth(F[1],
0,b,.1*n),F[0]-=a,F[1]-=b,e(4E-4*-a,4E-4*-b)}function l(a,b){var c=H.get_first_character(),d=H.get_active_camera();y.rotate_camera(d,a,b);c&&(d=y.get_camera_angles_char(d,u),v.set_character_rotation_h(c,d[0]),v.set_character_vert_move_dir_angle(c,d[1]))}function x(a){N?(a=p.get_coords_target_space(a,!1,u),a=H.pick_object(a[0],a[1])):a=H.pick_object(a.clientX,a.clientY);a?(H.outlining_is_enabled(a)&&H.set_outline_intensity(a,1),H.outlining_is_enabled(D)&&a!=D&&H.set_outline_intensity(D,0)):H.outlining_is_enabled(D)&&
H.set_outline_intensity(D,0);D=a}var y=t("camera"),p=t("container"),d=t("controls"),v=t("physics"),r=t("print"),H=t("scenes"),E=t("util"),w=t("main"),n=1,C=0,k=0,F=new Float32Array(2),u=new Float32Array(2),g=null,D=null,B=0,N=!1,L=!1;a.request_pointerlock=function(a,b,e,f,g,h){function k(){if(document.pointerLockElement===a||document.webkitPointerLockElement===a||document.mozPointerLockElement===a){c(a);a.addEventListener("mousemove",f,!1);var g=H.get_active_camera();if(!d.check_sensor_manifold(g,
"SMOOTH_PL")){var l=d.create_elapsed_sensor();d.create_sensor_manifold(g,"SMOOTH_PL",d.CT_CONTINUOUS,[l],null,q,h)}b()}else a.removeEventListener("mousemove",f,!1),B=0,document.removeEventListener("pointerlockchange",k,!1),document.removeEventListener("webkitpointerlockchange",k,!1),document.removeEventListener("mozpointerlockchange",k,!1),e()}if(1!=B){B=1;b=b||function(){};e=e||function(){};h=h||l;g=g||function(){return!0};f=f||function(a){if(g()){if("number"==typeof a.movementX){var b=a.movementX;
a=a.movementY}else"number"==typeof a.webkitMovementX?(b=a.webkitMovementX,a=a.webkitMovementY):"number"==typeof a.mozMovementX?(b=a.mozMovementX,a=a.mozMovementY):a=b=0;F[0]+=b;F[1]+=a}};document.addEventListener("pointerlockchange",k,!1);document.addEventListener("webkitpointerlockchange",k,!1);document.addEventListener("mozpointerlockchange",k,!1);var m=a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock;"function"===typeof m?m.apply(a):r.error("Pointer lock is not available")}};
a.exit_pointerlock=e;a.check_pointerlock=function(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)?!0:!1};a.request_mouse_drag=function(a,b,c,k){2!=B&&(B=2,e(),g=b||function(){return!0},c=c||l,L=!!k,a.addEventListener("mousedown",h,!1),a.addEventListener("mouseup",f,!1),a=H.get_active_camera(),d.check_sensor_manifold(a,"SMOOTH_DRAG")||(b=d.create_elapsed_sensor(),d.create_sensor_manifold(a,"SMOOTH_DRAG",d.CT_CONTINUOUS,[b],null,q,c)))};a.exit_mouse_drag=
c;a.enable_mouse_hover_outline=function(a){N=!!a;w.detect_mobile()||p.get_canvas().addEventListener("mousemove",x)};a.disable_mouse_hover_outline=function(){w.detect_mobile()||(p.get_canvas().removeEventListener("mousemove",x),D&&H.set_outline_intensity(D,0))};a.get_coords_x=function(a,b,c){return c?p.get_coords_target_space(a,b,u)[0]:"clientX"in a?a.clientX:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientX"in a[0]?a[0].clientX:-1};a.get_coords_y=function(a,b,c){return c?
p.get_coords_target_space(a,b,u)[1]:"clientY"in a?a.clientY:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientY"in a[0]?a[0].clientY:-1};a.set_plock_smooth_factor=function(a){n=a};a.get_plock_smooth_factor=function(){return n}};b4w.module.preloader=function(a,t){var e=t("container"),c,b,h,f,q,l,x,y,p=null;a.create_preloader=function(a){var d="#484848",l="#5276cf",p="rgba(150, 150, 150, 0.7)",q="#fff",t;for(t in a)switch(t){case "container_color":d=a.container_color;break;case "bar_color":l=a.bar_color;break;case "frame_color":p=a.frame_color;break;case "font_color":q=a.font_color}a=document.createElement("div");t=a.cloneNode(!1);var n=a.cloneNode(!1),x=a.cloneNode(!1),k=e.get_container();n.appendChild(t);n.appendChild(x);
a.appendChild(n);k.appendChild(a);a.style.cssText="background-color: "+d+";width: 100%;height: 100%;position: absolute;top: 0;left: 0;";n.style.cssText="position: absolute;left: 50%;top: 50%;margin-left: -150px;margin-top: -30px;width: 300px;height: 28px;box-shadow: 0px 0px 10px 0px "+p+";border: 2px solid "+p+";";t.style.cssText="position: absolute;width: 0%;top: 0;left: 0;background-color: "+l+";height: 100%;";x.style.cssText="font-family: Arial, sans-serif;line-height: 28px;height: 100%;width: 100%;top: 0;left: 0;text-align: center;position: absolute;font-size: 16px;font-weight: bold;text-shadow: 0px 0px 6px "+
p+";color: "+q+";";c=t;b=x;h=a;f="DEFAULT"};a.create_simple_preloader=function(a){var d=null,e=null,l="#bf9221",t="#000",w;for(w in a)switch(w){case "canvas_container_id":d=a.canvas_container_id;break;case "background_container_id":e=a.background_container_id;break;case "bg_color":t=a.bg_color;break;case "bar_color":l=a.bar_color}a=document.createElement("div");w=document.createElement("div");a.id="simple_preloader_container";var n=document.createElement("div"),x=document.createElement("div"),e=document.getElementById(e);
p=document.getElementById(d);a.style.cssText="z-index: 4;background-color: "+t+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";w.style.cssText="position: absolute;left: 50%;top: 82%;width: 300px;height: 20px;margin-left: -150px;margin-top: -10px;border-style:solid;border-width:4px;border-color: #000;border-radius: 0px;";n.style.cssText="position: absolute;left: 0px;top: 1px;width: 0px;height: 18px;background-color: "+l+";border-radius: 0px;";x.style.cssText="position: absolute;left: 50%;top: 50%;width: 100%;height: 100%;margin-left: -150px;margin-top: -10px;text-align: center;font-size: 17px;font-weight: bold;color: #000;font-family: Verdana;"+
w.appendChild(n);w.appendChild(x);a.appendChild(w);document.body.appendChild(a);f="SIMPLE";h=a;c=n;b=x;q=e};a.create_rotation_preloader=function(a){var c=null,d=null,e="rgba(0,0,0,0)",t="",w="",n="rgba(0,0,0,0)",x;for(x in a)switch(x){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":d=a.background_container_id;break;case "frame_bg_color":e=a.frame_bg_color;break;case "bg_color":n=a.bg_color;break;case "frame_class":t=a.frame_class;break;case "anim_elem_class":w=
a.anim_elem_class}a=document.createElement("div");x=document.createElement("div");var k=document.createElement("div"),y=document.createElement("div"),d=document.getElementById(d);p=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+n+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";x.style.cssText="position: absolute;left: 50%;top: 50%;width: 117px;height: 117px;margin-left: -58px;margin-top: -58px;background-color: "+e+";";k.style.cssText=
"position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;background-position: center;background-repeat: no-repeat;";y.style.cssText="position: absolute;width: 100%;height: 100%;text-align: center;margin-top: 38px;font-size: 36px;color: #ffffff;font-family: Arial;font-weight: bold;";k.className=w;x.appendChild(k);x.className=t;x.appendChild(y);a.appendChild(x);p.appendChild(a);f="ROTATION";h=a;l=k;b=y;q=d};a.create_advanced_preloader=function(a){var d=a.preloader_width,d=d/(d-a.img_width),e=
document.getElementById(a.preloader_bar_id),l=document.getElementById(a.fill_band_id),t=document.getElementById(a.preloader_caption_id),w=document.getElementById(a.preloader_container_id),n=document.getElementById(a.background_container_id);p=document.getElementById(a.canvas_container_id);f="ADVANCED";c=e;x=l;y=d;b=t;h=w;q=n};a.update_preloader=function(a){b.innerHTML=a+"%";"SIMPLE"==f?c.style.width=a+"%":"ADVANCED"==f?(c.style.width=a/y+"%",x.style.width=100-a+"%"):"ROTATION"==f?l.style.transform=
"rotate("+a+"deg)":"DEFAULT"==f&&(c.style.width=a+"%");100==a&&(h.parentNode.removeChild(h),q&&q.parentNode.removeChild(q))}};b4w.module.storage=function(a,t){function e(a){return h[a?a:b]?JSON.parse(h[a?a:b]):{}}var c=t("__print"),b="b4w",h=null;a.init=function(a){a?"b4w"!==a?b=a:c.error("b4w prefix denied"):c.warn("Prefix should be a string. Last declared storage prefix will be used.")};a.set=function(a,c,l){var f=e(l);f[a]=String(c);h[l?l:b]=JSON.stringify(f)};a.cleanup=function(a){delete h[a?a:b]};a.get=function(a,b){var c=e(b);return c[a]?c[a]:""};a.debug=function(a){c.log(e(a?a:b))};try{h=window.localStorage;try{h.tmp=
null,delete h.tmp}catch(f){c.warn("localStorage quota is limited. Disabling localStorage"),h=null}}catch(f){c.warn("Applying chrome localStorage bug workaround"),h=null}h||(c.warn("localStorage is not available, initializing temporary storage"),h={})};b4w.module.screenshooter=function(a,t){var e=t("screen"),c=t("print");a.shot=function(a,h){c.fd("shot","screen.shot");e.shot(a,h)}};
//# sourceMappingURL=/deploy/apps/common/b4w.min.js.map