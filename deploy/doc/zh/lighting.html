

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>照明、 阴影和背景 &mdash; Blend4Web 17.10 用户手册</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="关于这些文档"
              href="about.html"/>
    <link rel="top" title="Blend4Web 17.10 用户手册" href="index.html"/>
        <link rel="next" title="后期处理效果" href="postprocessing_effects.html"/>
        <link rel="prev" title="逻辑编辑器" href="logic_editor.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Blend4Web. 用户手册
        

        
        </a>

        
          
          
            <div class="version">
              v17.10
            </div>
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="engine_features.html">引擎功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Blender的用户界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">安装和更新</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">工作流程</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_manager.html">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">场景预览器</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_player.html">网络播放器</a></li>
<li class="toctree-l1"><a class="reference internal" href="addon.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene_settings.html">场景设置</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">物体</a></li>
<li class="toctree-l1"><a class="reference internal" href="meshes.html">网格</a></li>
<li class="toctree-l1"><a class="reference internal" href="normal_editor.html">法线编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">相机</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">材质</a></li>
<li class="toctree-l1"><a class="reference internal" href="material_library.html">材质库</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_materials.html">节点材质</a></li>
<li class="toctree-l1"><a class="reference internal" href="logic_editor.html">逻辑编辑器</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">照明、 阴影和背景</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#shading-types">着色类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lighting-with-light-sources">用光源照明</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#light-source-types">光源类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#light-source-setup">光源设置</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#environment-lighting-ambient">环境照明（环境）</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#activation"><strong>激活</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup">设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment-map-method">环境贴图方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#shadows">阴影</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2"><strong>激活</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">设置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generic-shadows">通用阴影</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shadow-cascades">级联阴影</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#background">背景</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_effects.html">后期处理效果</a></li>
<li class="toctree-l1"><a class="reference internal" href="vr_and_ar.html">VR and AR</a></li>
<li class="toctree-l1"><a class="reference internal" href="textures.html">纹理</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">粒子系统,流体</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles_instancing.html">粒子系统.实例化</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">动画</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdoor_rendering.html">室外效果</a></li>
<li class="toctree-l1"><a class="reference internal" href="colors.html">色彩管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">音频</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">物理</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">对应用程序开发人员</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers_advanced.html">对于引擎开发者</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_short_manual.html">团队工作。使用 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems_and_solutions.html">存在的问题及解决方案</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">发布说明</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Blend4Web. 用户手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div id="lang_cont">
          <a href="#">RU</a>
          <a href="#">EN</a>
          <a href="#">ZH</a>
        </div>
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>照明、 阴影和背景</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="lighting"></span><div class="section" id="lighting-shadows-and-background">
<span id="index-0"></span><h1><a class="toc-backref" href="#id4">照明、 阴影和背景</a><a class="headerlink" href="#lighting-shadows-and-background" title="永久链接至标题">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#lighting-shadows-and-background" id="id4">照明、 阴影和背景</a><ul>
<li><a class="reference internal" href="#shading-types" id="id5">着色类型</a></li>
<li><a class="reference internal" href="#lighting-with-light-sources" id="id6">用光源照明</a><ul>
<li><a class="reference internal" href="#light-source-types" id="id7">光源类型</a></li>
<li><a class="reference internal" href="#light-source-setup" id="id8">光源设置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-lighting-ambient" id="id9">环境照明（环境）</a><ul>
<li><a class="reference internal" href="#activation" id="id10"><strong>激活</strong></a></li>
<li><a class="reference internal" href="#setup" id="id11">设置</a></li>
<li><a class="reference internal" href="#environment-map-method" id="id12">环境贴图方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shadows" id="id13">阴影</a><ul>
<li><a class="reference internal" href="#id2" id="id14"><strong>激活</strong></a></li>
<li><a class="reference internal" href="#id3" id="id15">设置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#background" id="id16">背景</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="shading-types">
<span id="index-1"></span><h2><a class="toc-backref" href="#id5">着色类型</a><a class="headerlink" href="#shading-types" title="永久链接至标题">¶</a></h2>
<p>照明（着色）取决于法线矢量的方向。支持标准Blender的阴影类型 ： <code class="docutils literal"><span class="pre">Shading:</span> <span class="pre">Flat</span></code> （面法线被使用），<code class="docutils literal"><span class="pre">Shading:</span> <span class="pre">Smooth</span></code> （插值顶点法线被使用）以及它们的组合。</p>
<a class="reference internal image-reference" href="_images/flat_smooth_shading.png"><img alt="_images/flat_smooth_shading.png" class="align-center" src="_images/flat_smooth_shading.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>如果使用标准工具没法达到所需的效果，您可以使用 <a class="reference internal" href="normal_editor.html#normals-editor"><span>normals editor</span></a>.</p>
<p>不同的阴影类型和使用法线编辑的结果：</p>
<a class="reference internal image-reference" href="_images/different_shadings_comparison.png"><img alt="_images/different_shadings_comparison.png" class="align-center" src="_images/different_shadings_comparison.png" style="width: 100%;" /></a>
<ol class="arabic simple">
<li><p class="first">平面着色</p>
</li>
<li><p class="first">光滑着色</p>
</li>
<li><p class="first">平滑阴影 倒角</p>
</li>
<li><p class="first">平滑阴影 倒角 编辑法线</p>
</li>
</ol>
</div>
<div class="section" id="lighting-with-light-sources">
<span id="index-2"></span><h2><a class="toc-backref" href="#id6">用光源照明</a><a class="headerlink" href="#lighting-with-light-sources" title="永久链接至标题">¶</a></h2>
<p>一个场景可以有多个（但不小于一个）的不同类型的光源。</p>
<div class="section" id="light-source-types">
<h3><a class="toc-backref" href="#id7">光源类型</a><a class="headerlink" href="#light-source-types" title="永久链接至标题">¶</a></h3>
<p>支持下面的光源类型：</p>
<dl class="docutils">
<dt><em>Point</em></dt>
<dd><p class="first last">光从一个点均匀传播与逐渐衰减四面八方。</p>
</dd>
<dt><em>Sun</em></dt>
<dd><p class="first last">光从一个无限平面在一个方向无衰减传播。</p>
</dd>
<dt><em>Spot</em></dt>
<dd><p class="first last">光从角度限制内的一个点传播时，并逐渐衰减。</p>
</dd>
<dt><em>Hemi</em></dt>
<dd><p class="first last">半球形。光线从无限半球传播无衰减。</p>
</dd>
</dl>
</div>
<div class="section" id="light-source-setup">
<h3><a class="toc-backref" href="#id8">光源设置</a><a class="headerlink" href="#light-source-setup" title="永久链接至标题">¶</a></h3>
<p>当选择了一盏灯在 <code class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></code> 标签中修改设置。</p>
<a class="reference internal image-reference" href="_images/lighting_setup.png"><img alt="_images/lighting_setup.png" class="align-center" src="_images/lighting_setup.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>Color</em></dt>
<dd><p class="first last">灯光颜色。默认值是（1.0，1.0，1.0）（即白色）。</p>
</dd>
<dt><em>Energy</em></dt>
<dd><p class="first last">辐射强度。缺省值为1.0。</p>
</dd>
<dt><em>Falloff</em></dt>
<dd><p class="first last">衰减型。该值导出，但引擎始终使用 <code class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></code>. 它适用于 <code class="docutils literal"><span class="pre">Point</span></code> 和 <code class="docutils literal"><span class="pre">Spot</span></code> 光源类型。默认值是 <code class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></code>.</p>
</dd>
<dt><em>Distance</em></dt>
<dd><p class="first last">衰减参数。它适用于 <code class="docutils literal"><span class="pre">Point</span></code> 和 <code class="docutils literal"><span class="pre">Spot</span></code> 光源类型。默认值是25.0。</p>
</dd>
<dt><em>Specular</em></dt>
<dd><p class="first last">创建镜面高光。默认情况下启用。</p>
</dd>
<dt><em>Diffuse</em></dt>
<dd><p class="first last">做漫反射着色。默认情况下启用。</p>
</dd>
<dt><em>Spot Shape &gt; Size</em></dt>
<dd><p class="first last">锥角度。它适用于 <code class="docutils literal"><span class="pre">Spot</span></code> 光源类型。默认值是45度。</p>
</dd>
<dt><em>Spot Shape &gt; Blend</em></dt>
<dd><p class="first last">模糊光斑边缘参数。它适用于 <code class="docutils literal"><span class="pre">Spot</span></code> 光源类型。默认值是0.15。</p>
</dd>
<dt><em>Dynamic Intensity</em></dt>
<dd><p class="first last">使用该光源，用于计算每天的时间。仅适用于 <code class="docutils literal"><span class="pre">Sun</span></code> 光源类型。默认情况下禁用。</p>
</dd>
<dt><em>Shadow &gt; Shadow</em></dt>
<dd><p class="first last">使用这个光源计算影子。当多个光源存在应该被使用。默认情况下禁用。</p>
</dd>
<dt><em>Shadow &gt; Clip Start</em></dt>
<dd><p class="first last">此参数指定离光源的距离，低于该值物体不产生阴影的距离。默认值为1.001。</p>
</dd>
<dt><em>Shadow &gt; Clip End</em></dt>
<dd><p class="first last">此参数指定离光源的距离，超出后物体不产生阴影的距离。默认值是30.002。</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="environment-lighting-ambient">
<span id="environment-lighting"></span><h2><a class="toc-backref" href="#id9">环境照明（环境）</a><a class="headerlink" href="#environment-lighting-ambient" title="永久链接至标题">¶</a></h2>
<p>该引擎支持环境灯光模拟的3种方法。</p>
<ol class="arabic simple">
<li><p class="first">平白光照明。</p>
</li>
<li><p class="first">半球形的照明模式，即应当指定视野和天顶的颜色。物体会因为法线和方向填充这两种颜色组成的梯度色。</p>
</li>
<li><p class="first">灯光使用 <a class="reference internal" href="textures.html#environment-map"><span>环境贴图</span></a> - 所谓的基于图像的照明。</p>
</li>
</ol>
<p>请注意，环境照明使用了简化的模型，不考虑对象的相互遮挡。</p>
<div class="section" id="activation">
<h3><a class="toc-backref" href="#id10"><strong>激活</strong></a><a class="headerlink" href="#activation" title="永久链接至标题">¶</a></h3>
<p>启用 <code class="docutils literal"><span class="pre">World</span></code> 选项卡上的 <code class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span></code>  复选框。</p>
<a class="reference internal image-reference" href="_images/lighting_environment.png"><img alt="_images/lighting_environment.png" class="align-center" src="_images/lighting_environment.png" style="width: 100%;" /></a>
</div>
<div class="section" id="setup">
<h3><a class="toc-backref" href="#id11">设置</a><a class="headerlink" href="#setup" title="永久链接至标题">¶</a></h3>
<dl class="docutils">
<dt><em>World &gt; Environment Lighting &gt; Energy</em></dt>
<dd><p class="first last">环境照明亮度。缺省值为1.0。</p>
</dd>
<dt><em>World &gt; Environment Lighting &gt; Environment Color</em></dt>
<dd><p class="first last">选择环境照明模拟的方法: <code class="docutils literal"><span class="pre">White</span></code> - 平照明，<code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></code> - 半球模型，<code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Texture</span></code> - 照明使用的 <a class="reference internal" href="textures.html#environment-map"><span>环境贴图</span></a> 。默认值是白色。</p>
</dd>
<dt><em>World &gt; Horizon Color</em> 和 <em>World &gt; Zenith Color</em></dt>
<dd><p class="first last">如果选择了半球模型 (<code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></code>)  可以通过 <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Horizon</span> <span class="pre">Color</span></code> 和 <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Zenith</span> <span class="pre">Color</span></code>  颜色选取器指定的地平线和天顶角变化的颜色。建议以激活 <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Blend</span> <span class="pre">Sky</span></code> 选项为更好的颜色选择。</p>
</dd>
<dt><em>世界 &gt; 使用节点 （Cycles）</em></dt>
<dd><p class="first last">如果启用此选项， <code class="docutils literal"><span class="pre">Cycles</span></code> 节点可以用于设置环境。默认为禁用。</p>
</dd>
<dt><em>世界 &gt; 反射世界</em></dt>
<dd><p class="first last">如果启用此参数，则环境也会在反射中被渲染 （环境能由镜面反射）。默认为禁用。</p>
</dd>
<dt><em>世界 &gt; 仅渲染反射</em></dt>
<dd><p class="first last">如果启用此参数，则将渲染环境的反射，而不是场景本身。默认为禁用。</p>
</dd>
</dl>
</div>
<div class="section" id="environment-map-method">
<h3><a class="toc-backref" href="#id12">环境贴图方法</a><a class="headerlink" href="#environment-map-method" title="永久链接至标题">¶</a></h3>
<p>要使用环境贴图进行环境照明：</p>
<ol class="arabic simple">
<li><p class="first">启用 <code class="docutils literal"><span class="pre">World</span></code> 选项卡上的 <code class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span></code>  复选框。</p>
</li>
<li><p class="first">选择 <code class="docutils literal"><span class="pre">环境照明&gt;天空Texture</span></code>。</p>
</li>
<li><p class="first">从 <code class="docutils literal"><span class="pre">World</span></code> 选项卡转至 <code class="docutils literal"><span class="pre">Texture</span></code> 标签。</p>
</li>
<li><p class="first">创建 <a class="reference internal" href="textures.html#environment-map"><span>环境贴图</span></a>，加载相应的图像。</p>
</li>
<li><p class="first">对于环境贴图选择 <code class="docutils literal"><span class="pre">ENVIRONMENT_LIGHTING</span></code> 或 <code class="docutils literal"><span class="pre">BOTH</span></code> 为 <code class="docutils literal"><span class="pre">Export</span> <span class="pre">Options</span></code> 面板上的 <code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Texture</span> <span class="pre">Usage</span></code> 值（<code class="docutils literal"><span class="pre">BOTH</span></code> 选项，还可以使用该纹理作为 <a class="reference internal" href="textures.html#skydome-texture"><span>天穹材质</span></a>).</p>
</li>
</ol>
<a class="reference internal image-reference" href="_images/lighting_environment_texture.png"><img alt="_images/lighting_environment_texture.png" class="align-center" src="_images/lighting_environment_texture.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="shadows">
<span id="id1"></span><h2><a class="toc-backref" href="#id13">阴影</a><a class="headerlink" href="#shadows" title="永久链接至标题">¶</a></h2>
<p>阴影对渲染最后的画面格外重要。它们所提供的观看者不仅与有关物体的轮廓的信息，也包含他们的高度和相对位置，光源位置等。</p>
<p>Blend4Web实现以下阴影渲染技术：级联阴影贴图（CSM）和软阴影（PCF）。</p>
<p>多达4个（或3如果SSAO启用）光源可以同时生成阴影。如果 <em>阴影</em> 参数为被超过4光源启用，阴影只能从其中4个中生成的。</p>
<a class="reference internal image-reference" href="_images/lighting_multiple_shadows.png"><img alt="_images/lighting_multiple_shadows.png" class="align-center" src="_images/lighting_multiple_shadows.png" style="width: 100%;" /></a>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id14"><strong>激活</strong></a><a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p class="first">在 <code class="docutils literal"><span class="pre">Object</span></code> 选项卡下启用 <code class="docutils literal"><span class="pre">Shadows:</span> <span class="pre">Cast</span></code>  复选框为物体 <strong>投射</strong> 阴影 。</p>
</li>
<li><p class="first">在 <code class="docutils literal"><span class="pre">Object</span></code> 选项卡下启用 <code class="docutils literal"><span class="pre">Shadows:</span> <span class="pre">Receive</span></code> 复选框为物体 <strong>接收</strong> 阴影 。</p>
</li>
<li><p class="first">确保在 <code class="docutils literal"><span class="pre">Render</span></code> 选项卡中的 <code class="docutils literal"><span class="pre">Shadows</span></code> 选项的值为 <code class="docutils literal"><span class="pre">AUTO</span></code> 或 <code class="docutils literal"><span class="pre">ON</span></code>。</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>物体，其中带有 <a class="reference internal" href="materials.html#alpha-blend"><span>渐变的透明材质</span></a>, 不投射阴影。</p>
<a class="last reference internal image-reference" href="_images/alpha_shadows.png"><img alt="_images/alpha_shadows.png" class="align-center" src="_images/alpha_shadows.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id15">设置</a><a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<dl class="docutils">
<dt><em>Direction</em></dt>
<dd><p class="first last">如果有多个光源，建议指定用于阴影计算确切的光源，选择灯光物体通过在 <code class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></code> 面板的 <code class="docutils literal"><span class="pre">Shadow</span> <span class="pre">&gt;</span> <span class="pre">Shadow</span></code> 复选框来启用。</p>
</dd>
<dt><em>Color</em></dt>
<dd><p class="first last">环境照明阴影颜色是由 <a class="reference internal" href="#environment-lighting"><span>环境光照</span></a> 设置确定 。</p>
</dd>
</dl>
<p>下列附加设置位于 <code class="docutils literal"><span class="pre">Render</span></code> 标签的 <code class="docutils literal"><span class="pre">Shadows</span></code> 面板上：</p>
<a class="reference internal image-reference" href="_images/lighting_shadow_settings.png"><img alt="_images/lighting_shadow_settings.png" class="align-center" src="_images/lighting_shadow_settings.png" style="width: 100%;" /></a>
<dl class="docutils">
<dt><em>渲染阴影</em></dt>
<dd><p class="first last">启用和禁用阴影渲染。可设置 <code class="docutils literal"><span class="pre">ON</span></code>，<code class="docutils literal"><span class="pre">OFF</span></code> 和 <code class="docutils literal"><span class="pre">AUTO</span></code>。默认设置为 <code class="docutils literal"><span class="pre">AUTO</span></code>。</p>
</dd>
<dt><em>软阴影</em></dt>
<dd><p class="first last">此选项使平滑的阴影贴图。默认情况下启用。</p>
</dd>
<dt><em>分辨率</em></dt>
<dd><p class="first last">阴影贴图分辨率。默认值为 2048 x 2048px。</p>
</dd>
<dt><em>采样</em></dt>
<dd><p class="first last">用于平滑阴影贴图的样品数目。可用值为 4x, 8x 和 16x, 后者是默认值。</p>
</dd>
<dt><em>Self-Shadow Polygon Offset</em></dt>
<dd><p class="first last">相对于光源定向多边形移位系数。默认值是1。</p>
</dd>
<dt><em>Self-Shadow Normal Offset</em></dt>
<dd><p class="first last">沿法线移动多边形系数。默认值是0.010。</p>
</dd>
</dl>
<p>最后两个参数可以用于减少自阴影的瑕疵。这些瑕疵显示在同一时间投射和接收阴影的物体。<code class="docutils literal"><span class="pre">Self-Shadow</span> <span class="pre">Polygon</span> <span class="pre">Offset</span></code> 参数是更有效的对抗的多边形的内部区域瑕疵，虽然&#8217; Self-Shadow 法线抵消 &#8216; 是更好地为边界地区。上述两个参数导致阴影扭曲，因此，我们建议让他们尽可能低的水平。</p>
<a class="reference internal image-reference" href="_images/self_shadow_artifacts.png"><img alt="_images/self_shadow_artifacts.png" class="align-center" src="_images/self_shadow_artifacts.png" style="width: 100%;" /></a>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">从 <code class="docutils literal"><span class="pre">Point</span></code> 光源生成的阴影方法与从 <code class="docutils literal"><span class="pre">Spot</span></code> 光源的相同，预计由源的 <code class="docutils literal"><span class="pre">Rotation</span></code> 参数指定只在一个方向投影。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>Enable CSM</em></dt>
<dd><p class="first last">激活的级联阴影模型的使用;显示附加选项。默认情况下禁用。如果 <code class="docutils literal"><span class="pre">Shadow</span></code> 设置一个以上的光源启用将无法工作。 <code class="docutils literal"><span class="pre">Point</span></code> 和 <code class="docutils literal"><span class="pre">Spot</span></code> 式光源只支持一个阴影级联。</p>
</dd>
</dl>
<p>此选项允许下面的阴影生成类型之间进行选择：</p>
<ul class="simple">
<li><p class="first">它使用一个单一的优化阴影贴图为整个场景通用模型 (<code class="docutils literal"><span class="pre">Enable</span> <span class="pre">CSM</span></code> 已关闭）。</p>
</li>
<li><p class="first">阴影级联 (<code class="docutils literal"><span class="pre">Enable</span> <span class="pre">CSM</span></code> 被接通）。</p>
</li>
</ul>
<dl class="docutils">
<dt><em>Blur Radius</em></dt>
<dd><p class="first last">设置软化阴影模糊比例。默认值是3。零值会产生硬阴影。</p>
</dd>
</dl>
<a class="reference internal image-reference" href="_images/blur_radius.png"><img alt="_images/blur_radius.png" class="align-center" src="_images/blur_radius.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>软化的阴影可以提高视觉质量和真实感。使用基于图像的技术，这是尤其明显的低分辨率的阴影贴图时，他们隐藏不可避免的齿形的边缘。经常使用软化阴影允许降低分辨率没有实质的质量损失。</p>
<div class="section" id="generic-shadows">
<h4>通用阴影<a class="headerlink" href="#generic-shadows" title="永久链接至标题">¶</a></h4>
<p>此选项适合很小场景与数量有限的物体。通过优化应用这样的场景，可以用级联阴影达到更好的阴影质量。此外，此选项是简单和快速的设置，而使用单个阴影贴图极大地提高了性能。</p>
</div>
<div class="section" id="shadow-cascades">
<h4>级联阴影<a class="headerlink" href="#shadow-cascades" title="永久链接至标题">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">这些设置只支持 <code class="docutils literal"><span class="pre">Sun</span></code> 光源。级联对其他类型的光源关闭。</p>
</div>
<p>为提供可接受的阴影质量，同时也为覆盖了相当大的空间是需要影子生成 （级联） 使用多个阶段。因此，最好的质量级联位于靠近观察者，而最坏的质量级联的距离较远。这个选项适合中到大的场景，例如游戏关卡。</p>
<p>如果启用下列扩展设置会显示：</p>
<img alt="_images/lighting_cascades.png" class="align-center" src="_images/lighting_cascades.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>CSM Number</em></dt>
<dd><p class="first last">阴影级联的数量。从1至4个级联的支持。默认值是1。</p>
</dd>
<dt><em>CSM First Cascade Border</em></dt>
<dd><p class="first last">第一梯级的大小。默认值是10.0。</p>
</dd>
<dt><em>CSM Last Cascade Border</em></dt>
<dd><p class="first last">最后级联大小。默认值是100.0。</p>
</dd>
</dl>
<p>中间级联的尺寸在两个上述参数之间内插。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">记住当设置阴影时，级联尺寸越大，内部的阴影细节越少越差。另一方面，降低 <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">First</span> <span class="pre">Cascade</span> <span class="pre">Border</span></code> 参数使得靠近相机的级联缺乏细节。降低 <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">Last</span> <span class="pre">Cascade</span> <span class="pre">Border</span></code>  参数强制在靠近相机的距离里阴影消失。然而，当使用软阴影时，由于边缘模糊的原因整体质量将得到改善。</p>
</div>
<a class="reference internal image-reference" href="_images/csm_cascade_distance.png"><img alt="_images/csm_cascade_distance.png" class="align-center" src="_images/csm_cascade_distance.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>CSM First Cascade Blur Radius</em></dt>
<dd><p class="first last">模糊比用于第一级联。默认值是3。零值会产生硬阴影。</p>
</dd>
<dt><em>CSM Last Cascade Blur Radius</em></dt>
<dd><p class="first last">模糊比用于最后级联。默认值是1.5。零值会产生硬阴影。</p>
</dd>
</dl>
<p>中间级联的模糊半径两个上述参数之间内插。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">我们建议开始设置与第一梯级软化阴影（使用 <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">First</span> <span class="pre">Cascade</span> <span class="pre">Blur</span> <span class="pre">Radius</span></code>) ，然后进行其他级联（使用 <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">Last</span> <span class="pre">Cascade</span> <span class="pre">Blur</span> <span class="pre">Radius</span></code>) 。通常，最后一个级联可能比第一个需要更少的模糊。这可能是必要的，由于低分辨率以防止在最后一个级联的阴影太褪色，。这也减少了不良自阴影假象。</p>
</div>
<dl class="docutils">
<dt><em>Fade-out Last Cascade</em></dt>
<dd><p class="first last">平滑消失在最后一个级联。默认情况下启用。</p>
</dd>
<dt><em>Blend Between Cascades</em></dt>
<dd><p class="first last">平滑的级联之间的界限。默认情况下启用。</p>
</dd>
</dl>
<a class="reference internal image-reference" href="_images/blend_between_cascades.png"><img alt="_images/blend_between_cascades.png" class="align-center" src="_images/blend_between_cascades.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="background">
<span id="index-3"></span><h2><a class="toc-backref" href="#id16">背景</a><a class="headerlink" href="#background" title="永久链接至标题">¶</a></h2>
<p>您可以通过以下方式更改背景：</p>
<ol class="arabic simple">
<li><p class="first">启用  <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code>, 然后在Blender的 <code class="docutils literal"><span class="pre">World</span></code> 选项卡下设置 <code class="docutils literal"><span class="pre">Horizon</span> <span class="pre">Color</span></code> 和 <code class="docutils literal"><span class="pre">Zenith</span> <span class="pre">Color</span></code>  。</p>
</li>
<li><p class="first">把整个场景放入一个（例如一个立方体或球体）法线指向内部模型的里面，带材料和一个可选的纹理。</p>
</li>
<li><p class="first">在相机前放置一个带一个可选的纹理的材质的面。设置父级为相机。如果需要，调整到这个表面的距离，相机开始和结束剪切平面。</p>
</li>
</ol>
<a class="reference internal image-reference" href="_images/parented_background.png"><img alt="_images/parented_background.png" class="align-center" src="_images/parented_background.png" style="width: 100%;" /></a>
<ol class="arabic" start="4">
<li><p class="first">使用 <a class="reference internal" href="textures.html#skydome-texture"><span>skydome</span></a>.</p>
</li>
<li><p class="first">建立程序产生 <a class="reference internal" href="outdoor_rendering.html#atmosphere"><span>大气</span></a>.</p>
</li>
<li><p class="first">用 <code class="docutils literal"><span class="pre">config.set()</span></code> 方法设置引擎的 <code class="docutils literal"><span class="pre">background_color</span></code> 参数。请注意，Blender的 <code class="docutils literal"><span class="pre">World</span></code> 选项卡下的  <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code> 必须被禁止。这个值被用作WebGL的 <code class="docutils literal"><span class="pre">clearColor()</span></code> 方法的参数。对于正确的结果，建议将WebGL的背景透明度关闭（<code class="docutils literal"><span class="pre">alpha</span></code> 参数）。这样的配置在默认情况下引擎的标准网络播放器使用。</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">m_cfg</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_main</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">);</span>

<span class="c1">// gray</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;background_color&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]));</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="nx">m_main</span><span class="p">.</span><span class="nx">init</span><span class="p">(...);</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">您可以在 <em>canvas</em> 元素之后使用任何HTML内容，作为背景进行渲染。要做到这一点，激活WebGL的背景透明度（ <code class="docutils literal"><span class="pre">alpha</span></code> 参数）。请注意，Blender的 <code class="docutils literal"><span class="pre">World</span></code> 选项卡下的 <code class="docutils literal"><span class="pre">World</span>&nbsp; <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code> 必须禁止。想要正确的结果，建议设置完全透明的黑色背景色。这样的配置在Blend4Web SDK的  <a class="reference internal" href="viewer.html#viewer"><span>场景查看器</span></a> 默认情况下使用。</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">m_cfg</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_main</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">);</span>

<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;background_color&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]));</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">m_main</span><span class="p">.</span><span class="nx">init</span><span class="p">(...);</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<p class="last"><a class="reference internal" href="colors.html#alpha-compositing"><span>alpha合成</span></a></p>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="postprocessing_effects.html" class="btn btn-neutral float-right" title="后期处理效果" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="logic_editor.html" class="btn btn-neutral" title="逻辑编辑器" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2014-2017, Triumph.
      最后更新于 2017-10-20.

    </p>
  </div>

  <a href="https://www.blend4web.com">www.blend4web.com</a>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
  (function() {
    if (window.document.domain != "www.blend4web.com")
      return;

    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter24512171 = new Ya.Metrika({
                    id:24512171,
                    clickmap:false,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
  })();
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/24512171" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v17.10',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();

          var lang_cont = $("#lang_cont");
          var links = lang_cont.children();

          var link_ru = links[0];
          var link_en = links[1];
          var link_zh = links[2];

          var loc = document.location.href;

          var href_ru = loc;
          var href_en = loc;
          var href_zh = loc; 

          if (loc.search("/ru/") != -1) {
              href_en = loc.replace("/ru/", "/en/");
              href_zh = loc.replace("/ru/", "/zh/");
          } else if (loc.search("/en/") != -1) {
              href_ru = loc.replace("/en/", "/ru/");
              href_zh = loc.replace("/en/", "/zh/");
          } else {
              href_ru = loc.replace("/zh/", "/ru/");
              href_en = loc.replace("/zh/", "/en/");
          }

          link_ru.href = href_ru;
          link_en.href = href_en;
          link_zh.href = href_zh;

          lang_cont.css("display", "inline-block")
      });
  </script>
   

</body>
</html>